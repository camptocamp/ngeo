(function(){'use strict';var k="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function aa(){k.Symbol||(k.Symbol=ba);aa=function(){}}var ca=0;function ba(a){return"jscomp_symbol_"+a+ca++}function da(){aa();k.Symbol.iterator||(k.Symbol.iterator=k.Symbol("iterator"));da=function(){}}function ea(a){da();aa();da();var b=a[Symbol.iterator];if(b)return b.call(a);var c=0;return{next:function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}}}
function fa(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}var ga=this;function ha(a,b){a=a.split(".");var c=ga;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]?c=c[d]:c=c[d]={}:c[d]=b}
function ia(a,b){function c(){}c.prototype=b.prototype;a.ta=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.ja=function(a,c,f){for(var g=Array(arguments.length-2),l=2;l<arguments.length;l++)g[l-2]=arguments[l];return b.prototype[c].apply(a,g)}};function p(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function q(){}var ja=0;function ka(a){this.message="Assertion failed. See /doc/errors/#"+a+" for details.";this.code=a;this.name="AssertionError"}p(ka,Error);var t="function"===typeof Object.assign?Object.assign:function(a,b){if(!a||!a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1,e=arguments.length;d<e;++d){var f=arguments[d];if(void 0!==f&&null!==f)for(var g in f)f.hasOwnProperty(g)&&(c[g]=f[g])}return c};function la(a){for(var b in a)delete a[b]};function ma(a){function b(b){var d=a.listener,e=a.R||a.target;a.T&&na(a);return d.call(e,b)}return a.S=b}function oa(a,b,c,d){for(var e,f=0,g=a.length;f<g;++f)if(e=a[f],e.listener===b&&e.R===c)return d&&(e.deleteIndex=f),e}function pa(a,b){return(a=a.H)?a[b]:void 0}function u(a,b,c,d){var e,f=a.H;f||(f=a.H={});e=f;(f=e[b])||(f=e[b]=[]);(e=oa(f,c,d,!1))?e.T=!1:(e={R:d,T:!1,listener:c,target:a,type:b},a.addEventListener(b,ma(e)),f.push(e));return e}
function qa(a,b,c,d){(a=pa(a,b))&&(c=oa(a,c,d,!0))&&na(c)}function na(a){if(a&&a.target){a.target.removeEventListener(a.type,a.S);var b=pa(a.target,a.type);if(b){var c="deleteIndex"in a?a.deleteIndex:b.indexOf(a);-1!==c&&b.splice(c,1);if(0===b.length){var b=a.target,c=a.type,d=pa(b,c);if(d){for(var e=0,f=d.length;e<f;++e)b.removeEventListener(c,d[e].S),la(d[e]);d.length=0;if(d=b.H)delete d[c],0===Object.keys(d).length&&delete b.H}}}la(a)}};function ra(){};function v(a){this.type=a;this.target=null}v.prototype.preventDefault=v.prototype.stopPropagation=function(){this.ea=!0};function w(){this.w={};this.i={};this.v={}}p(w,ra);w.prototype.addEventListener=function(a,b){var c=this.v[a];c||(c=this.v[a]=[]);-1===c.indexOf(b)&&c.push(b)};function sa(a,b){var c="string"===typeof b?new v(b):b;b=c.type;c.target=a;var d=a.v[b];if(d){b in a.i||(a.i[b]=0,a.w[b]=0);++a.i[b];for(var e=0,f=d.length;e<f&&!1!==d[e].call(a,c)&&!c.ea;++e);--a.i[b];if(0===a.i[b]){c=a.w[b];for(delete a.w[b];c--;)a.removeEventListener(b,q);delete a.i[b]}}}
w.prototype.removeEventListener=function(a,b){var c=this.v[a];c&&(b=c.indexOf(b),a in this.w?(c[b]=q,++this.w[a]):(c.splice(b,1),0===c.length&&delete this.v[a]))};function x(){w.call(this);this.N=0}p(x,w);x.prototype.b=function(){++this.N;sa(this,"change")};x.prototype.on=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=u(this,a[f],b,c);return e}return u(this,a,b,c)};function ta(a,b,c){v.call(this,a);this.key=b;this.oldValue=c}p(ta,v);function y(a){x.call(this);this.W||(this.W=++ja);this.j={};void 0!==a&&ua(this,a)}p(y,x);var va={};function wa(a){return va.hasOwnProperty(a)?va[a]:va[a]="change:"+a}y.prototype.get=function(a){var b;this.j.hasOwnProperty(a)&&(b=this.j[a]);return b};y.prototype.set=function(a,b,c){c?this.j[a]=b:(c=this.j[a],this.j[a]=b,c!==b&&(b=wa(a),sa(this,new ta(b,a,c)),sa(this,new ta("propertychange",a,c))))};
function ua(a,b){for(var c in b)a.set(c,b[c],void 0)};function xa(a,b,c,d,e){return e?(e[0]=a,e[1]=b,e[2]=c,e[3]=d,e):[a,b,c,d]}function ya(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]};var za=function(){var a;"cosh"in Math?a=Math.cosh:a=function(a){a=Math.exp(a);return(a+1/a)/2};return a}();/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function Aa(a){this.radius=a}function Ba(a,b){var c=a[1]*Math.PI/180,d=b[1]*Math.PI/180,e=(d-c)/2;a=(b[0]-a[0])*Math.PI/180/2;c=Math.sin(e)*Math.sin(e)+Math.sin(a)*Math.sin(a)*Math.cos(c)*Math.cos(d);return 2*Ca.radius*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}
Aa.prototype.offset=function(a,b,c){var d=a[1]*Math.PI/180;b/=this.radius;var e=Math.asin(Math.sin(d)*Math.cos(b)+Math.cos(d)*Math.sin(b)*Math.cos(c));return[180*(a[0]*Math.PI/180+Math.atan2(Math.sin(c)*Math.sin(b)*Math.cos(d),Math.cos(b)-Math.sin(d)*Math.sin(e)))/Math.PI,180*e/Math.PI]};var Ca=new Aa(6370997);var Da={};Da.degrees=2*Math.PI*Ca.radius/360;Da.ft=.3048;Da.m=1;Da["us-ft"]=1200/3937;
function z(a){this.h=a.code;this.a=a.units;this.b=void 0!==a.extent?a.extent:null;this.c=void 0!==a.global?a.global:!1;this.i=!(!this.c||!this.b);this.f=void 0!==a.G?a.G:this.j;this.g=a.U;var b=Ea,c=a.code,d=Fa||window.proj4;if("function"==typeof d&&void 0===b[c]){var e=d.defs(c);if(void 0!==e){void 0===a.U&&(this.g=e.to_meter);void 0===a.units&&(this.a=e.units);var f,g;for(f in b)if(a=d.defs(f),void 0!==a)if(b=A(f),a===e)Ga([b,this]);else{g=d(f,c);a=g.forward;g=g.inverse;var b=A(b),l=A(this);B(b,
l,Ha(a));B(l,b,Ha(g))}}}}z.prototype.u=function(){return this.b};z.prototype.j=function(a,b){if("degrees"==this.a)return a;var c=Ia(this,A("EPSG:4326"));a=[b[0]-a/2,b[1],b[0]+a/2,b[1],b[0],b[1]-a/2,b[0],b[1]+a/2];a=c(a,a,2);c=(Ba(a.slice(0,2),a.slice(2,4))+Ba(a.slice(4,6),a.slice(6,8)))/2;a=this.g||Da[this.a];void 0!==a&&(c/=a);return c};z.prototype.G=function(a,b){return this.f(a,b)};var Ea={},C={},Fa=null;function Ga(a){Ja(a);a.forEach(function(b){a.forEach(function(a){b!==a&&B(b,a,Ka)})})}
function La(a){Ea[a.h]=a;B(a,a,Ka)}function Ja(a){var b=[];a.forEach(function(a){b.push(La(a))})}function B(a,b,c){a=a.h;b=b.h;a in C||(C[a]={});C[a][b]=c}function Ha(a){return function(b,c,d){var e=b.length;d=void 0!==d?d:2;c=void 0!==c?c:Array(e);var f,g;for(g=0;g<e;g+=d)for(f=a([b[g],b[g+1]]),c[g]=f[0],c[g+1]=f[1],f=d-1;2<=f;--f)c[g+f]=b[g+f];return c}}
function A(a){var b;if(a instanceof z)b=a;else if("string"===typeof a){b=Ea[a];var c=Fa||window.proj4;void 0===b&&"function"==typeof c&&void 0!==c.defs(a)&&(b=new z({code:a}),La(b))}return b||null}function Ma(a,b){a=A(a);b=A(b);return Ia(a,b)}function Ia(a,b){a=a.h;b=b.h;var c;a in C&&b in C[a]&&(c=C[a][b]);void 0===c&&(c=Na);return c}function Na(a,b){if(void 0!==b&&a!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}return a}
function Ka(a,b){if(void 0!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}else a=a.slice();return a}function Oa(a,b,c){b=Ma(b,c);a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];b(a,a,2);c=[a[0],a[2],a[4],a[6]];var d=[a[1],a[3],a[5],a[7]];a=Math.min.apply(null,c);b=Math.min.apply(null,d);c=Math.max.apply(null,c);d=Math.max.apply(null,d);return xa(a,b,c,d,void 0)};function D(){y.call(this);this.M=[Infinity,Infinity,-Infinity,-Infinity];this.O=-1}p(D,y);D.prototype.u=function(a){this.O!=this.N&&(this.M=this.L(this.M),this.O=this.N);var b=this.M;a?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):a=b;return a};D.prototype.transform=function(a,b){this.A(Ma(a,b));return this};(function(){if(!("HTMLCanvasElement"in window))return!1;try{return document.createElement("CANVAS").getContext("2d")?!0:!1}catch(a){return!1}})();function E(a){y.call(this);this.a="geometry";this.c=this.f=null;u(this,wa(this.a),this.g,this);void 0!==a&&(a instanceof D||!a?this.set(this.a,a):ua(this,a))}p(E,y);E.prototype.clone=function(){var a=new E(t({},this.j));Pa(a,this.a);var b=this.get(this.a);b&&(b=b.clone(),a.set(a.a,b));(b=this.f)&&a.setStyle(b);return a};E.prototype.A=function(){this.b()};E.prototype.g=function(){this.c&&(na(this.c),this.c=null);var a=this.get(this.a);a&&(this.c=u(a,"change",this.A,this));this.b()};
E.prototype.setStyle=function(a){if((this.f=a)&&"function"!==typeof a&&!Array.isArray(a))throw new ka(41);this.b()};function Pa(a,b){qa(a,wa(a.a),a.g,a);a.a=b;u(a,wa(a.a),a.g,a);a.g()};function Qa(){this.a=this.s=null};function F(){D.call(this);this.layout="XY";this.c=2;this.a=null}p(F,D);function Ra(a){var b;"XY"==a?b=2:"XYZ"==a||"XYM"==a?b=3:"XYZM"==a&&(b=4);return b}F.prototype.L=function(a){var b=this.a,c=this.a.length,d=this.c;a=xa(Infinity,Infinity,-Infinity,-Infinity,a);for(var e=0;e<c;e+=d){var f=a,g=b[e],l=b[e+1];f[0]=Math.min(f[0],g);f[1]=Math.min(f[1],l);f[2]=Math.max(f[2],g);f[3]=Math.max(f[3],l)}return a};function G(a,b,c){a.c=Ra(b);a.layout=b;a.a=c}
function H(a,b,c,d){if(b)c=Ra(b);else{for(b=0;b<d;++b){if(0===c.length){a.layout="XY";a.c=2;return}c=c[0]}c=c.length;var e;2==c?e="XY":3==c?e="XYZ":4==c&&(e="XYZM");b=e}a.layout=b;a.c=c}F.prototype.A=function(a){this.a&&(a(this.a,this.a,this.c),this.b())};
F.prototype.rotate=function(a,b){var c=this.a;if(c){var d=c.length,e=this.c,f=c?c:[],g=Math.cos(a);a=Math.sin(a);var l=b[0];b=b[1];for(var m=0,h=0;h<d;h+=e){var n=c[h]-l,r=c[h+1]-b;f[m++]=l+n*g-r*a;f[m++]=b+n*a+r*g;for(n=h+2;n<h+e;++n)f[m++]=c[n]}c&&f.length!=m&&(f.length=m);this.b()}};
F.prototype.scale=function(a,b,c){var d=b;void 0===d&&(d=a);var e=c;e||(e=ya(this.u()));if(c=this.a){b=c.length;for(var f=this.c,g=c?c:[],l=e[0],e=e[1],m=0,h=0;h<b;h+=f){var n=c[h]-l,r=c[h+1]-e;g[m++]=l+a*n;g[m++]=e+d*r;for(n=h+2;n<h+f;++n)g[m++]=c[n]}c&&g.length!=m&&(g.length=m);this.b()}};F.prototype.translate=function(a,b){var c=this.a;if(c){var d=c.length,e=this.c,f=c?c:[],g=0,l,m;for(l=0;l<d;l+=e)for(f[g++]=c[l]+a,f[g++]=c[l+1]+b,m=l+2;m<l+e;++m)f[g++]=c[m];c&&f.length!=g&&(f.length=g);this.b()}};function Sa(a,b,c,d){var e,f;e=0;for(f=c.length;e<f;++e){var g=c[e],l;for(l=0;l<d;++l)a[b++]=g[l]}return b}function Ta(a,b,c,d,e){e=e?e:[];var f=0,g,l;g=0;for(l=c.length;g<l;++g)b=Sa(a,b,c[g],d),e[f++]=b;e.length=f;return e};function Ua(a,b){F.call(this);this.g(a,b)}p(Ua,F);Ua.prototype.clone=function(){var a=new Ua(null);G(a,this.layout,this.a.slice());a.b();return a};Ua.prototype.g=function(a,b){a?(H(this,b,a,1),this.a||(this.a=[]),this.a.length=Sa(this.a,0,a,this.c)):G(this,"XY",null);this.b()};navigator.userAgent.match("CriOS");try{new MouseEvent("click",{buttons:1})}catch(a){};function I(a,b){F.call(this);this.g(a,b)}p(I,F);I.prototype.clone=function(){var a=new I(null);G(a,this.layout,this.a.slice());a.b();return a};I.prototype.L=function(a){var b=this.a,c=b[0],b=b[1];return xa(c,b,c,b,a)};I.prototype.g=function(a,b){if(a){H(this,b,a,0);this.a||(this.a=[]);var c=b=this.a,d=0,e,f;e=0;for(f=a.length;e<f;++e)c[d++]=a[e];b.length=d}else G(this,"XY",null);this.b()};function Va(a,b){F.call(this);this.f=[];this.g(a,b)}p(Va,F);Va.prototype.clone=function(){var a=new Va(null),b=this.f.slice();G(a,this.layout,this.a.slice());a.f=b;a.b();return a};Va.prototype.g=function(a,b){a?(H(this,b,a,2),this.a||(this.a=[]),a=Ta(this.a,0,a,this.c,this.f),this.a.length=0===a.length?0:a[a.length-1]):(a=this.f,G(this,"XY",null),this.f=a);this.b()};function Wa(a){z.call(this,{code:a,units:"m",extent:Xa,global:!0,ga:Ya})}p(Wa,z);Wa.prototype.G=function(a,b){return a/za(b[1]/6378137)};var J=6378137*Math.PI,Xa=[-J,-J,J,J],Ya=[-180,-85,180,85],Za="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(a){return new Wa(a)});
function $a(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c){b[e]=J*a[e]/180;var f=6378137*Math.log(Math.tan(Math.PI*(a[e+1]+90)/360));f>J?f=J:f<-J&&(f=-J);b[e+1]=f}return b}function ab(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c)b[e]=180*a[e]/J,b[e+1]=360*Math.atan(Math.exp(a[e+1]/6378137))/Math.PI-90;return b};var bb=new Aa(6378137);function K(a,b){z.call(this,{code:a,units:"degrees",extent:cb,ia:b,global:!0,U:db,ga:cb})}p(K,z);K.prototype.G=function(a){return a};var cb=[-180,-90,180,90],db=Math.PI*bb.radius/180,eb=[new K("CRS:84"),new K("EPSG:4326","neu"),new K("urn:ogc:def:crs:EPSG::4326","neu"),new K("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new K("urn:ogc:def:crs:OGC:1.3:CRS84"),new K("urn:ogc:def:crs:OGC:2:84"),new K("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new K("urn:x-ogc:def:crs:EPSG:4326","neu")];Ga(Za);Ga(eb);eb.forEach(function(a){Za.forEach(function(b){B(a,b,$a);B(b,a,ab)})});function L(){return{restrict:"A",link:function(a,b,c){var d=a.$eval(c.ngeoSearch),e=a.$eval(c.ngeoSearchDatasets).slice();e.unshift(d);b.typeahead.apply(b,[].concat(e instanceof Array?e:fa(ea(e))));c=a.$eval(c.ngeoSearchListeners);var f=L.a(c);b.on("typeahead:open",function(){a.$apply(function(){f.open()})});b.on("typeahead:close",function(){a.$apply(function(){f.close()})});b.on("typeahead:cursorchange",function(b,c,d){a.$apply(function(){f.cursorchange(b,c,d)})});b.on("typeahead:select",function(b,
c,d){a.$apply(function(){f.select(b,c,d)})});b.on("typeahead:autocomplete",function(b,c,d){a.$apply(function(){f.autocomplete(b,c,d)})})}}}L.a=function(a){var b;a?b={open:void 0!==a.open?a.open:q,close:void 0!==a.close?a.close:q,cursorchange:void 0!==a.cursorchange?a.cursorchange:q,select:void 0!==a.select?a.select:q,autocomplete:void 0!==a.autocomplete?a.autocomplete:q}:b={open:q,close:q,cursorchange:q,select:q,autocomplete:q};return b};L.module=angular.module("ngeoSearchDirective",[]);
L.module.directive("ngeoSearch",L);function fb(){Qa.call(this)}p(fb,Qa);function gb(a){return"string"===typeof a?(a=JSON.parse(a))?a:null:null!==a?a:null};function M(a){D.call(this);this.a=a?a:null;hb(this)}p(M,D);function hb(a){var b,c;if(a.a)for(b=0,c=a.a.length;b<c;++b)u(a.a[b],"change",a.b,a)}M.prototype.clone=function(){var a=new M(null),b=this.a,c=[],d,e;d=0;for(e=b.length;d<e;++d)c.push(b[d].clone());if(a.a)for(b=0,d=a.a.length;b<d;++b)qa(a.a[b],"change",a.b,a);a.a=c;hb(a);a.b();return a};
M.prototype.L=function(a){xa(Infinity,Infinity,-Infinity,-Infinity,a);for(var b=this.a,c=0,d=b.length;c<d;++c){var e=a,f=b[c].u();f[0]<e[0]&&(e[0]=f[0]);f[2]>e[2]&&(e[2]=f[2]);f[1]<e[1]&&(e[1]=f[1]);f[3]>e[3]&&(e[3]=f[3])}return a};M.prototype.rotate=function(a,b){for(var c=this.a,d=0,e=c.length;d<e;++d)c[d].rotate(a,b);this.b()};M.prototype.scale=function(a,b,c){c||(c=ya(this.u()));for(var d=this.a,e=0,f=d.length;e<f;++e)d[e].scale(a,b,c);this.b()};
M.prototype.A=function(a){var b=this.a,c,d;c=0;for(d=b.length;c<d;++c)b[c].A(a);this.b()};M.prototype.translate=function(a,b){var c=this.a,d,e;d=0;for(e=c.length;d<e;++d)c[d].translate(a,b);this.b()};function ib(a,b){F.call(this);this.f=[];this.g(a,b)}p(ib,F);ib.prototype.clone=function(){var a=new ib(null),b=this.f.slice();G(a,this.layout,this.a.slice());a.f=b;a.b();return a};ib.prototype.g=function(a,b){a?(H(this,b,a,2),this.a||(this.a=[]),a=Ta(this.a,0,a,this.c,this.f),this.a.length=0===a.length?0:a[a.length-1]):(a=this.f,G(this,"XY",null),this.f=a);this.b()};function jb(a,b){F.call(this);this.g(a,b)}p(jb,F);jb.prototype.clone=function(){var a=new jb(null);G(a,this.layout,this.a.slice());a.b();return a};jb.prototype.g=function(a,b){a?(H(this,b,a,1),this.a||(this.a=[]),this.a.length=Sa(this.a,0,a,this.c)):G(this,"XY",null);this.b()};function kb(a,b){F.call(this);this.f=[];this.g(a,b)}p(kb,F);kb.prototype.clone=function(){for(var a=new kb(null),b=this.f.length,c=Array(b),d=0;d<b;++d)c[d]=this.f[d].slice();G(a,this.layout,this.a.slice());a.f=c;a.b();return a};
kb.prototype.g=function(a,b){if(a){H(this,b,a,3);this.a||(this.a=[]);b=this.a;var c=this.c,d=this.f,e=0,d=d?d:[],f=0,g,l;g=0;for(l=a.length;g<l;++g)e=Ta(b,e,a[g],c,d[f]),d[f++]=e,e=e[e.length-1];d.length=f;0===d.length?this.a.length=0:(a=d[d.length-1],this.a.length=0===a.length?0:a[a.length-1])}else a=this.f,G(this,"XY",null),this.f=a;this.b()};function lb(a){a=a?a:{};Qa.call(this);this.s=A(a.s?a.s:"EPSG:4326");a.l&&(this.a=A(a.l));this.b=a.geometryName}p(lb,fb);function mb(a,b){var c;if(a){a=(0,nb[a.type])(a);var d=b?A(b.l):null;b=b?A(b.o):null;var e;if(e=d&&b)d===b?e=!0:(e=d.a===b.a,e=d.h===b.h?e:Ia(d,b)===Ka&&e),e=!e;e?a instanceof D?c=a.transform(b,d):c=Oa(a,b,d):c=a}else c=null;return c}
var nb={Point:function(a){return new I(a.coordinates)},LineString:function(a){return new Ua(a.coordinates)},Polygon:function(a){return new Va(a.coordinates)},MultiPoint:function(a){return new jb(a.coordinates)},MultiLineString:function(a){return new ib(a.coordinates)},MultiPolygon:function(a){return new kb(a.coordinates)},GeometryCollection:function(a,b){a=a.geometries.map(function(a){return mb(a,b)});return new M(a)}};
function ob(a,b,c){b="Feature"===b.type?b:{type:"Feature",geometry:b};c=mb(b.geometry,c);var d=new E;a.b&&Pa(d,a.b);d.set(d.a,c);void 0!==b.id&&d.b();b.properties&&ua(d,b.properties);return d};function pb(a,b,c,d,e,f){var g=new lb;a={remote:{url:a,prepare:function(a,b){b.url=b.url.replace("%QUERY",a);return b},transform:function(a){void 0!==b&&(a={type:"FeatureCollection",features:a.features.filter(b)});var e=a,f={l:c,o:d};a=gb(e);var n;if(f){if(f.o)n=f.o;else if(n=gb(e).crs)if("name"==n.type)n=A(n.properties.name);else if("EPSG"==n.type)n=A("EPSG:"+n.properties.code);else throw new ka(36);else n=g.s;n={o:n,l:f.l}}f=t({o:g.s,l:g.a},n);if("FeatureCollection"===a.type){n=[];a=a.features;
var r,e=0;for(r=a.length;e<r;++e)n.push(ob(g,a[e],f))}else n=[ob(g,a,f)];return n}},datumTokenizer:q,queryTokenizer:Bloodhound.tokenizers.whitespace};e=t({},e||{});f=t({},f||{});e.remote&&(t(f,e.remote),delete e.remote);t(a,e);t(a.remote,f);return new Bloodhound(a)}pb.module=angular.module("ngeoSearchCreategeojsonbloodhound",[]);pb.module.value("ngeoSearchCreateGeoJSONBloodhound",pb);if("function"==typeof proj4){proj4.defs("EPSG:21781","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs");var qb=A("EPSG:21781"),rb=[42E4,3E4,9E5,35E4];qb.b=rb;qb.i=!(!qb.c||!rb)};function sb(a){var b=a||{},c=A("EPSG:21781"),d=b.targetProjection;a={remote:{url:"https://api3.geo.admin.ch/rest/services/api/SearchServer?type=locations&searchText=%QUERY",prepare:function(a,c){c.url=c.url.replace("%QUERY",a);void 0!==b.limit&&(c.url+="&limit="+b.limit);void 0!==b.origins&&(c.url+="&origins="+b.origins);return void 0!==b.prepare?b.prepare(a,c):c},transform:function(a){return a.results.map(function(a){a=a.attrs;var b=new I([a.y,a.x]),e;e=/BOX\((.*?) (.*?),(.*?) (.*?)\)/g.exec(a.geom_st_box2d);
e=null!==e?[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])]:null;void 0!==d&&(b.transform(c,d),null!==e&&(e=Oa(e,c,d)));a.geometry=b;a.bbox=e;b=a.label;a.label_no_html=b.replace(/<\/?[ib]>/g,"");e=/<b>(.*?)<\/b>/g.exec(b);a.label_simple=null!==e?e[1]:b;a=new E(a);a.b();return a})}},datumTokenizer:q,queryTokenizer:Bloodhound.tokenizers.whitespace};var e=t({},b.options||{}),f=t({},b.remoteOptions||{});e.remote&&(t(f,e.remote),delete e.remote);t(a,e);t(a.remote,f);return new Bloodhound(a)}
sb.module=angular.module("ngeoCreateLocationSearchBloodhound",[]);sb.module.value("ngeoCreateLocationSearchBloodhound",sb);var tb=angular.module("ngeoSearchModule",[L.module.name,pb.module.name,sb.module.name]);function ub(a,b,c,d){var e,f;this.c=function(a){return!(2E7<a)};this.b=function(b){var f=a.defer();e&&e.abort();e=new FileReader;e.onload=function(a){f.resolve(a.target.result)};e.onerror=function(a){a=a.target.error;c.console.error("Reading file failed: ",a);f.reject({message:20==a.code?d("Operation canceled"):d("Read failed"),reason:a.message})};e.onprogress=function(a){f.notify(a)};e.readAsText(b);return f.promise};this.a=function(e,l){f&&f.resolve();f=l||a.defer();var m=a.defer();b.get(e,{timeout:f.promise}).then(function(a){m.resolve(a.data)},
function(a){c.console.error("Uploading file failed: ",a);m.reject({message:d("Upload failed"),reason:a})});return m.promise}}ub.$inject=["$q","$http","$window","gettext"];var vb=angular.module("ngeo.fileService",[]);vb.service("ngeoFile",ub);function wb(a,b,c,d,e){return{restrict:"A",templateUrl:e,scope:{options:"=ngeoImportDndOptions"},link:function(e,g){var l=e.options;if(l&&"function"===typeof l.handleFileContent){e.handleFileContent=l.handleFileContent;g.click(function(){this.style.display="none"}).on("dragleave drop",function(){this.style.display="none"}).on("dragover dragleave drop",function(a){a.stopPropagation();a.preventDefault()}).on("drop",function(b){var g=b.originalEvent.dataTransfer.files;if(g&&0<g.length)d.b(g[0]).then(function(a){e.handleFileContent(a,
g[0])});else if(b.originalEvent.dataTransfer.types){var h=b.originalEvent.dataTransfer.getData("text/plain");if(l.isValidUrl(h))d.a(h).then(function(a){return e.handleFileContent(a,{url:h})})["catch"](function(b){a.alert(c.getString(b.message))});else a.alert(c.getString("Invalid URL")+h)}});var m=function(a){a.stopPropagation();a.preventDefault();a=a.originalEvent.dataTransfer.types||[];for(var b=0,c=a.length;b<c;++b)if(/(files|text\/plain)/i.test(a[b])){g.css("display","table");break}};b.on("dragenter",
m);var h=function(){return!1};b.on("dragstart",h);e.$on("$destroy",function(){b.off("dragEnter",m).off("dragstart",h)})}else g.remove()}}}wb.$inject=["$window","$document","gettextCatalog","ngeoFile","ngeoImportDndTemplateUrl"];var xb=angular.module("ngeo.importDndDirective",["gettext",vb.name]);xb.value("ngeoImportDndTemplateUrl",function(a,b){a=b.ngeoImportDndTemplateUrl;return void 0!==a?a:yb+"/import/partials/import-dnd.html"});xb.directive("ngeoImportDnd",wb);function zb(a,b,c,d){var e;return{restrict:"A",templateUrl:d,scope:{options:"=ngeoImportLocalOptions"},link:function(d,g){var l=d.options;if(l&&"function"===typeof l.handleFileContent){d.handleFileContent=d.options.handleFileContent;var m=function(){d.userMessage=b.getString("Load local file");d.progress=0;d.fileReader=null};m();l=function(){g.find('input[type="file"]').click()};g.find("button.ngeo-import-browse").click(l);g.find("input.form-control[type=text][readonly]").click(l);g.find("input[type=file]").bind("change",
function(a){a.target.files&&0<a.target.files.length&&d.$apply(function(){d.files=a.target.files})});d.$watchCollection("files",function(){if(d.files&&0<d.files.length){var a=d.files[0];d.file=a;d.fileSize=a.size;d.isDropped&&d.handleFile()}});d.isLoading=function(){return 0<d.progress&&100>d.progress};d.isValid=function(a){return!a||c.c(a.size)};d.cancel=function(){d.fileReader&&(d.fileReader.abort(),d.fileReader=null)};d.handleFile=function(){d.file&&(d.loading=!0,d.userMessage=b.getString("Reading file"),
a.cancel(e),c.b(d.file).then(function(a){d.fileReader=null;d.userMessage=b.getString("Parsing file");return d.handleFileContent(a,d.file)}).then(function(){d.userMessage=b.getString("Parsing succeeded")},function(a){d.userMessage=a.message},function(a){d.fileReader||(d.fileReader=a.target)}).finally(function(){d.fileReader=null;d.loading=!1;e=a(m,5E3)}))}}else g.remove()}}}zb.$inject=["$timeout","gettextCatalog","ngeoFile","ngeoImportLocalTemplateUrl"];
var Ab=angular.module("ngeo.importLocalDirective",[vb.name]);Ab.value("ngeoImportLocalTemplateUrl",function(a,b){a=b.ngeoImportLocalTemplateUrl;return void 0!==a?a:yb+"/import/partials/import-local.html"});Ab.directive("ngeoImportLocal",zb);function Bb(a,b,c,d,e,f){var g;return{restrict:"A",templateUrl:f,scope:{options:"=ngeoImportOnlineOptions"},link:function(e,f){var h=e.options;if(h&&"function"===typeof h.handleFileContent){e.handleFileContent=h.handleFileContent;var n=function(){e.userMessage=d("Connect");e.progress=0;e.loading=!1};n();var r=e.options.urls;r&&0<r.length&&!r[0].name&&(r=r.map(function(a){return{name:a,url:a}}));var O=f.find("input[name=url]").typeahead({hint:!0,highlight:!0,minLength:0},{name:"wms",displayKey:"name",
limit:500,source:function(a){return function(b,c){var e=[];if(b){var d=new RegExp(b,"i");a.forEach(function(a){d.test(a.name)&&e.push(a)})}else e=a;c(e)}}(r)}).on("typeahead:selected",function(a,b){O.typeahead("close");e.fileUrl=b.url;e.handleFileUrl();e.$digest()}),Zb=f.find(".tt-menu");f.find(".ngeo-import-open").on("mousedown",function(a){"none"==Zb.css("display")?(O.focus(),O.typeahead("val","")):O.blur();a.preventDefault()});e.$on("gettextLanguageChanged",function(){e.fileUrl&&/lang=/.test(e.fileUrl)&&
e.handleFileUrl()});e.cancel=function(){e.progress=0;e.canceler&&(e.canceler.resolve(),e.canceler=null)};e.isValid=function(a){return h.isValidUrl?h.isValidUrl(a):!0};e.handleFileUrl=function(){var f=e.fileUrl;h.transformUrl&&(f=h.transformUrl(f));e.canceler=a.defer();e.loading=!0;e.userMessage=d("Dowloading file");b.cancel(g);c.a(f,e.canceler).then(function(a){e.canceler=null;return e.handleFileContent(a,{url:e.fileUrl})}).then(function(a){e.userMessage=a.message},function(a){e.userMessage=a.message}).finally(function(){e.canceler=
null;e.loading=!1;g=b(n,1E4)})}}else f.remove()}}}Bb.$inject="$q $timeout ngeoFile gettext gettextCatalog ngeoImportOnlineTemplateUrl".split(" ");var Cb=angular.module("ngeo.importOnlineDirective",[vb.name,"gettext"]);Cb.value("ngeoImportOnlineTemplateUrl",function(a,b){a=b.ngeoImportOnlineTemplateUrl;return void 0!==a?a:yb+"/import/partials/import-online.html"});Cb.directive("ngeoImportOnline",Bb);function Db(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")};function Eb(a,b,c){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)b?c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(a.nodeValue);else for(a=a.firstChild;a;a=a.nextSibling)Eb(a,b,c);return c}function Fb(){var a=N;return function(b,c){b=a.call(this,b,c);void 0!==b&&c[c.length-1].push(b)}}function P(a){return function(b,c){var d=a.call(this,b,c);if(void 0!==d){c=c[c.length-1];b=b.localName;var e;b in c?e=c[b]:e=c[b]=[];e.push(d)}}}
function Q(a){return function(b,c){var d=a.call(this,b,c);void 0!==d&&(c[c.length-1][b.localName]=d)}}function R(a,b){var c={},d,e;d=0;for(e=a.length;d<e;++d)c[a[d]]=b;return c}function S(a,b,c,d){d.push(a);for(a=c.firstElementChild;a;a=a.nextElementSibling)c=b[a.namespaceURI],void 0!==c&&(c=c[a.localName])&&c.call(void 0,a,d);return d.pop()};function Gb(){}function Hb(a){var b=new Ib;return a instanceof Document?Jb(b,a):a instanceof Node?Kb(b,a):"string"===typeof a?(a=(new DOMParser).parseFromString(a,"application/xml"),Jb(b,a)):null};function T(a){if(a=/^\s*(true|1)|(false|0)\s*$/.exec(a))return void 0!==a[1]||!1}function U(a){a=Eb(a,!1,[]).join("");return V(a)}function V(a){if(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))return parseFloat(a[1])}function Lb(a){a=Eb(a,!1,[]).join("");return Mb(a)}function Mb(a){if(a=/^\s*(\d+)\s*$/.exec(a))return parseInt(a[1],10)}function N(a){return Eb(a,!1,[]).join("").trim()};function Ib(){this.version=void 0}p(Ib,Gb);function Jb(a,b){for(b=b.firstChild;b;b=b.nextSibling)if(b.nodeType==Node.ELEMENT_NODE)return Kb(a,b);return null}function Kb(a,b){a.version=b.getAttribute("version").trim();return(a=S({version:a.version},Nb,b,[]))?a:null}function W(a,b){return S({},Ob,a,b)}function Pb(a,b){return S({},Qb,a,b)}function Rb(a,b){if(b=W(a,b))return a=[Mb(a.getAttribute("width")),Mb(a.getAttribute("height"))],b.size=a,b}function Sb(a,b){return S([],Tb,a,b)}
var X=[null,"http://www.opengis.net/wms"],Nb=R(X,{Service:Q(function(a,b){return S({},Ub,a,b)}),Capability:Q(function(a,b){return S({},Vb,a,b)})}),Vb=R(X,{Request:Q(function(a,b){return S({},Wb,a,b)}),Exception:Q(function(a,b){return S([],Xb,a,b)}),Layer:Q(function(a,b){return S({},Yb,a,b)})}),Ub=R(X,{Name:Q(N),Title:Q(N),Abstract:Q(N),KeywordList:Q(Sb),OnlineResource:Q(Db),ContactInformation:Q(function(a,b){return S({},$b,a,b)}),Fees:Q(N),AccessConstraints:Q(N),LayerLimit:Q(Lb),MaxWidth:Q(Lb),MaxHeight:Q(Lb)}),
$b=R(X,{ContactPersonPrimary:Q(function(a,b){return S({},ac,a,b)}),ContactPosition:Q(N),ContactAddress:Q(function(a,b){return S({},bc,a,b)}),ContactVoiceTelephone:Q(N),ContactFacsimileTelephone:Q(N),ContactElectronicMailAddress:Q(N)}),ac=R(X,{ContactPerson:Q(N),ContactOrganization:Q(N)}),bc=R(X,{AddressType:Q(N),Address:Q(N),City:Q(N),StateOrProvince:Q(N),PostCode:Q(N),Country:Q(N)}),Xb=R(X,{Format:Fb()}),Yb=R(X,{Name:Q(N),Title:Q(N),Abstract:Q(N),KeywordList:Q(Sb),CRS:P(N),EX_GeographicBoundingBox:Q(function(a,
b){var c=S({},cc,a,b);if(c){a=c.westBoundLongitude;b=c.southBoundLatitude;var d=c.eastBoundLongitude,c=c.northBoundLatitude;return void 0===a||void 0===b||void 0===d||void 0===c?void 0:[a,b,d,c]}}),BoundingBox:P(function(a){var b=[V(a.getAttribute("minx")),V(a.getAttribute("miny")),V(a.getAttribute("maxx")),V(a.getAttribute("maxy"))],c=[V(a.getAttribute("resx")),V(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),extent:b,res:c}}),Dimension:P(function(a){return{name:a.getAttribute("name"),
units:a.getAttribute("units"),unitSymbol:a.getAttribute("unitSymbol"),"default":a.getAttribute("default"),multipleValues:T(a.getAttribute("multipleValues")),nearestValue:T(a.getAttribute("nearestValue")),current:T(a.getAttribute("current")),values:N(a)}}),Attribution:Q(function(a,b){return S({},dc,a,b)}),AuthorityURL:P(function(a,b){if(b=W(a,b))return b.name=a.getAttribute("name"),b}),Identifier:P(N),MetadataURL:P(function(a,b){if(b=W(a,b))return b.type=a.getAttribute("type"),b}),DataURL:P(W),FeatureListURL:P(W),
Style:P(function(a,b){return S({},ec,a,b)}),MinScaleDenominator:Q(U),MaxScaleDenominator:Q(U),Layer:P(function(a,b){var c=b[b.length-1],d=S({},Yb,a,b);if(d)return b=T(a.getAttribute("queryable")),void 0===b&&(b=c.queryable),d.queryable=void 0!==b?b:!1,b=Mb(a.getAttribute("cascaded")),void 0===b&&(b=c.cascaded),d.cascaded=b,b=T(a.getAttribute("opaque")),void 0===b&&(b=c.opaque),d.opaque=void 0!==b?b:!1,b=T(a.getAttribute("noSubsets")),void 0===b&&(b=c.noSubsets),d.noSubsets=void 0!==b?b:!1,(b=V(a.getAttribute("fixedWidth")))||
(b=c.fixedWidth),d.fixedWidth=b,(a=V(a.getAttribute("fixedHeight")))||(a=c.fixedHeight),d.fixedHeight=a,["Style","CRS","AuthorityURL"].forEach(function(a){a in c&&(d[a]=(d[a]||[]).concat(c[a]))}),"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(a){a in d||(d[a]=c[a])}),d})}),dc=R(X,{Title:Q(N),OnlineResource:Q(Db),LogoURL:Q(Rb)}),cc=R(X,{westBoundLongitude:Q(U),eastBoundLongitude:Q(U),southBoundLatitude:Q(U),northBoundLatitude:Q(U)}),
Wb=R(X,{GetCapabilities:Q(Pb),GetMap:Q(Pb),GetFeatureInfo:Q(Pb)}),Qb=R(X,{Format:P(N),DCPType:P(function(a,b){return S({},fc,a,b)})}),fc=R(X,{HTTP:Q(function(a,b){return S({},gc,a,b)})}),gc=R(X,{Get:Q(W),Post:Q(W)}),ec=R(X,{Name:Q(N),Title:Q(N),Abstract:Q(N),LegendURL:P(Rb),StyleSheetURL:Q(W),StyleURL:Q(W)}),Ob=R(X,{Format:Q(N),OnlineResource:Q(Db)}),Tb=R(X,{Keyword:Fb()});function hc(a,b,c,d){function e(a,c,d){c.Name||(c.isInvalid=!0,c.Abstract=b("Invalid layer: missing name"));if(!c.isInvalid){c.wmsUrl=a.Service.OnlineResource;c.wmsVersion=a.version;c.id="WMS||"+c.wmsUrl+"||"+c.Name;var m;a:{m=d.h;if(c.BoundingBox)for(var h=0,n=c.BoundingBox.length;h<n;h++){var r=c.BoundingBox[h],O=r.crs||r.srs;if(O&&O.toUpperCase()==m.toUpperCase()){m=r.extent;break a}}if(h=c.EX_GeographicBoundingBox||c.LatLonBoundingBox)if(n=Oa(d.u(),m,"EPSG:4326"),r=[Infinity,Infinity,-Infinity,
-Infinity],n[0]<=h[2]&&n[2]>=h[0]&&n[1]<=h[3]&&n[3]>=h[1]&&(r[0]=n[0]>h[0]?n[0]:h[0],r[1]=n[1]>h[1]?n[1]:h[1],r[2]=n[2]<h[2]?n[2]:h[2],r[3]=n[3]<h[3]?n[3]:h[3]),r){m=Oa(r,"EPSG:4326",m);break a}m=void 0}c.extent=m;m=d.h;if(h="1.3.0"==a.version)h=c.CRS||c.SRS||[],h=!(-1!=h.indexOf(m.toUpperCase())||-1!=h.indexOf(m.toLowerCase()));h&&(c.useReprojection=!0,c.extent||(c.isInvalid=!0,c.Abstract=b("Invalid layer: outside the map")))}if(c.Layer){for(m=0;m<c.Layer.length;m++)e(a,c.Layer[m],d)||(c.Layer.splice(m,
1),m--);0==c.Layer.length&&(c.Layer=void 0)}return c.isInvalid&&!c.Layer?void 0:c}return{restrict:"A",templateUrl:d,scope:{getCap:"=ngeoWmsGetCap",map:"=ngeoWmsGetCapMap",options:"=ngeoWmsGetCapOptions"},link:function(d){d.layers=[];d.options=d.options||{};d.$watch("getCap",function(g){var l;try{g=Hb(g)}catch(m){l=m}l||!g?(a.console.error("WMS GetCap parsing failed: ",l||g),d.userMsg=b("Parsing failed")):(d.limitations="",d.layers=[],d.options.layerSelected=null,d.options.layerHovered=null,g&&g.Service&&
g.Capability&&(g.Service.MaxWidth&&(d.limitations=c.getString("Maximum WMS size allowed")+" "+g.Service.MaxWidth+" * "+g.Service.MaxHeight),g.Capability.Layer&&(g=e(g,g.Capability.Layer,d.map.Z().ma()))&&(d.layers=g.Layer||[g])))});d.addLayerSelected=function(){var b=d.options.layerSelected;if(b&&d.options.getOlLayerFromGetCapLayer){var e=c.getString("WMS layer added succesfully");try{var m=d.options.getOlLayerFromGetCapLayer(b);m&&d.map.ha(m)}catch(h){a.console.error("Add layer failed:"+h),e=c.getString("WMS layer could not be added")+
" "+h.message}a.alert(e)}};d.getAbstract=function(){return c.getString((d.options.layerSelected||d.options.layerHovered||{}).Abstract)||""}}}}hc.$inject=["$window","gettext","gettextCatalog","ngeoWmsGetCapTemplateUrl"];var ic=angular.module("ngeo.wmsGetCapDirective",["gettext"]);ic.value("ngeoWmsGetCapTemplateUrl",function(a,b){a=b.ngeoWmsGetCapTemplateUrl;return void 0!==a?a:yb+"/import/partials/wms-get-cap.html"});ic.directive("ngeoWmsGetCap",hc);function jc(a){var b=a.options;a.addPreviewLayer=function(c,d){c.stopPropagation();b.layerHovered=d;d.isInvalid||b.addPreviewLayer(a.map,d)};a.removePreviewLayer=function(c){c.stopPropagation();b.layerHovered=null;b.removePreviewLayer(a.map)};a.toggleLayerSelected=function(a,d){a.stopPropagation();b.layerSelected=b.layerSelected&&b.layerSelected.Name==d.Name?null:d}}jc.$inject=["$scope"];
function kc(a,b){return{restrict:"A",templateUrl:b,controller:"NgeoWmsGetCapItemDirectiveController",compile:function(b){var d=b.contents().remove(),e;return function(b,c){e||(e=a(d));e(b,function(a){c.append(a)});var l=c.find("> .ngeo-header-group"),m=l.find(".fa-plus"),h;l.find(".fa-zoom-in").on("click",function(a){a.stopPropagation();a:{var c=b.layer,d=b.map,e=c.extent;b.options.transformExtent&&(e=b.options.transformExtent(c.extent));a=d.Z();var g=[d.na-d.pa+1,d.oa-d.qa+1];if(c.P&&e){var h=2834.64*
a.Y(e,g);if(h>c.P){d=ya(e);h/=c.P;c=(e[2]-e[0])/h;e=(e[3]-e[1])/h;e=[d[0]-c/2,d[1]-e/2,d[0]+c/2,d[1]+e/2];if(e=b.options.transformExtent(e))e=a.ka(a.Y(e,g),0,-1),a.ra(d),a.sa(e);break a}}e&&a.la(e,g)}});m.on("click",function(a){a.stopPropagation();m.toggleClass("fa-minus");h||(h=c.find("> .ngeo-child-group"));h.slideToggle()})}}}}kc.$inject=["$compile","ngeoWmsGetCapItemTemplateUrl"];var lc=angular.module("ngeo.wmsGetCapItemDirective",[]);
lc.value("ngeoWmsGetCapItemTemplateUrl",function(a,b){a=b.ngeoWmsGetCapItemTemplateUrl;return void 0!==a?a:yb+"/import/partials/wms-get-cap-item.html"});lc.controller("NgeoWmsGetCapItemDirectiveController",jc);lc.directive("ngeoWmsGetCapItem",kc);var mc=angular.module("ngeo.import",[vb.name,xb.name,Ab.name,Cb.name,ic.name,lc.name]);var nc=angular.module("ngeo",[tb.name,mc.name,"gettext","ui.date","floatThead"]),yb="ngeomodule";ha("ngeo.FeatureProperties",{ANGLE:"a",COLOR:"c",IS_CIRCLE:"l",IS_RECTANGLE:"r",IS_TEXT:"t",NAME:"n",OPACITY:"o",AZIMUT:"z",SHOW_MEASURE:"m",SIZE:"s",STROKE:"k"});ha("ngeo.GeometryType",{CIRCLE:"Circle",LINE_STRING:"LineString",MULTI_LINE_STRING:"MultiLineString",MULTI_POINT:"MultiPoint",MULTI_POLYGON:"MultiPolygon",POINT:"Point",POLYGON:"Polygon",RECTANGLE:"Rectangle",TEXT:"Text"});function oc(a){if(Error.captureStackTrace)Error.captureStackTrace(this,oc);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}ia(oc,Error);oc.prototype.name="CustomError";function pc(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")};function qc(a,b){b.unshift(a);oc.call(this,pc.apply(null,b));b.shift()}ia(qc,oc);qc.prototype.name="AssertionError";function rc(a,b){throw new qc("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};nc.value("ngeoPopupTemplateUrl",function(a,b){a=b.ngeoPopupTemplateurl;return void 0!==a?a:"ngeo/popup.html"});function sc(a){return{restrict:"A",templateUrl:a,link:function(a,c){c.addClass("popover");a.close=function(a){a&&(a.stopPropagation(),a.preventDefault());c.addClass("hidden")};a.$watch("open",function(a){c.css("display",a?"block":"none")})}}}sc.$inject=["ngeoPopupTemplateUrl"];nc.directive("ngeoPopup",sc);function Y(a,b,c,d){var e=this;this.scope=b.$new(!0);this.scope.$watch(function(){return e.scope.open},function(a){!a&&e.c&&e.g(function(){e.destroy()})});this.b=c;this.g=d;this.a=angular.element("<div ngeo-popup></div>");this.c=!1;a(this.a)(this.scope);angular.element(document.body).append(this.a)}Y.prototype.X=function(){return this.scope.open};Y.prototype.getOpen=Y.prototype.X;Y.prototype.D=function(a){this.scope.open=a};Y.prototype.setOpen=Y.prototype.D;
Y.prototype.destroy=function(){this.scope.$destroy();this.a.remove()};Y.prototype.destroy=Y.prototype.destroy;Y.prototype.F=function(a){a=this.b.trustAsHtml(a);this.scope.title=a};Y.prototype.setTitle=Y.prototype.F;Y.prototype.C=function(a,b){this.scope.content=b?this.b.trustAsHtml(a):a};Y.prototype.setContent=Y.prototype.C;Y.prototype.K=function(a){a=this.b.trustAsHtml('<iframe src="'+a+'" width="100%" height="100%"></iframe>');this.C(a)};Y.prototype.setUrl=Y.prototype.K;
Y.prototype.J=function(a){this.a.width(a);this.a.css("max-width",a)};Y.prototype.setWidth=Y.prototype.J;Y.prototype.I=function(a){this.a.height(a)};Y.prototype.setHeight=Y.prototype.I;Y.prototype.V=function(a,b){this.J(a);this.I(b)};Y.prototype.setSize=Y.prototype.V;Y.prototype.B=function(a){this.c=a};Y.prototype.setAutoDestroy=Y.prototype.B;Y.prototype.addClass=function(a){this.a.addClass(a)};Y.prototype.addClass=Y.prototype.addClass;
Y.prototype.open=function(a){a.url?this.K(a.url):a.content?this.C(a.content):rc('ngeo.Popup options requirest "url" or "content".');void 0!==a.autoDestroy&&this.B(a.autoDestroy);void 0!==a.cls&&this.addClass(a.cls);void 0!==a.height&&this.I(a.height);void 0!==a.title&&this.F(a.title);void 0!==a.width&&this.J(a.width);this.D(!0)};Y.prototype.open=Y.prototype.open;function tc(a,b,c,d){return function(){return new Y(a,b,c,d)}}tc.$inject=["$compile","$rootScope","$sce","$timeout"];
nc.factory("ngeoCreatePopup",tc);var uc=angular.module("app",["ngeo"]);function Z(a,b){this.b=a;this.a=b;$('[data-toggle="tooltip"]').tooltip({container:"body",trigger:"hover"})}Z.$inject=["$sce","ngeoCreatePopup"];Z.prototype.fa=function(){var a=this.a();a.B(!0);a.F("Simple popup");var b=this.b.trustAsHtml("This is a simple 400x300 px popup.");a.C(b);a.J("400px");a.I("300px");a.D(!0)};Z.prototype.simplePopup=Z.prototype.fa;
Z.prototype.ba=function(){var a=this.a();a.B(!0);a.addClass("popup-with-iframe");a.F("Iframe popup");a.K("http://geomapfish.org/");a.V("400px","300px");a.D(!0)};Z.prototype.iframePopup=Z.prototype.ba;
Z.prototype.aa=function(){var a=this.a();a.B(!0);a.F("This is a popup with lots and lots of content and a very long title");var b=this.b.trustAsHtml("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla egetquam at ex euismod bibendum et eget enim. Nulla sodales tortor acsagittis aliquet. Ut malesuada quam vitae pulvinar porta. Nunc idmagna id risus malesuada elementum eget id purus. Curabitur vel augueblandit, faucibus nulla quis, consequat tellus. Phasellus commodo,tellus et vulputate ultricies, nulla libero ornare arcu, quisfermentum sem diam quis tellus. Aliquam ut sapien tristique, laciniaante et, lacinia arcu. Quisque sagittis eros at quam blanditgravida. Nulla sit amet enim semper, efficitur eros sit amet,porttitor libero. Fusce quis tellus est. Quisque ornare, ex egetluctus pharetra, nisl leo lobortis purus, sed tristique neque leo egetodio. Maecenas lobortis nisl ac magna mollis, ac pulvinar risusconvallis. Donec ullamcorper sollicitudin maximus. Quisque bibendumelit sit amet ultrices ornare. Donec aliquam felis id urna ultricesscelerisque.");a.C(b);
a.D(!0)};Z.prototype.heavyPopup=Z.prototype.aa;Z.prototype.ca=function(){var a=this.a(),b=this.b.trustAsHtml("This popup was opened using the <code>open</code> method.");a.open({autoDestroy:!0,content:b,height:"200px",title:'Opened with "open"',width:"300px"})};Z.prototype.openPopupWithContent=Z.prototype.ca;Z.prototype.da=function(){this.a().open({autoDestroy:!0,cls:"popup-with-iframe",height:"300px",title:'Opened with "open" and "iframe"',url:"http://geomapfish.org/",width:"400px"})};
Z.prototype.openPopupWithUrl=Z.prototype.da;uc.controller("MainController",Z);(function(){function a(a){a.put("ngeo/attributes.html",'<fieldset ng-disabled=attrCtrl.disabled> <div class=form-group ng-repeat="attribute in ::attrCtrl.attributes"> <div ng-if="attribute.type !== \'geometry\'"> <label class=control-label>{{ ::attribute.name | translate }} <span class=text-muted>{{::attribute.required ? "*" : ""}}</span></label> <div ng-switch=attribute.type> <select name={{::attribute.name}} ng-required=attribute.required ng-switch-when=select ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <option ng-repeat="attribute in ::attribute.choices" value="{{ ::attribute }}"> {{ ::attribute }} </option> </select> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=date ui-date=attrCtrl.dateOptions ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=datetime ui-date=attrCtrl.dateOptions ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-default ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <div ng-show="form.$submitted || form[attribute.name].$touched"> <p class=text-danger ng-show=form[attribute.name].$error.required> {{\'This field is required\' | translate}} </p> </div> </div> </div> </div> </fieldset> ');
a.put("ngeo/popup.html",'<h4 class="popover-title ngeo-popup-title"> <span ng-bind-html=title></span> <button type=button class=close ng-click="open = false"> &times;</button> </h4> <div class=popover-content ng-bind-html=content></div> ');a.put("ngeomodule/import/partials/import-local.html",'<div class="input-group input-group-sm"> <input type=file name=file> <input class=form-control type=text readonly value="{{(file.name) ? file.name + \', \' + file.size/1000 + \' ko\' : \'\'}}" placeholder="{{\'No file\' | translate}}"> <span class=input-group-btn> <button type=button class="btn btn-default ngeo-import-browse" translate>Browse</button> </span> </div> <div ng-hide=isValid(file) class=ngeo-error translate>File too large</div> <div class=tabbable-footer> <button type=button class="btn btn-default btn-sm ngeo-load" ng-class="{\'btn-danger\': loading}" ng-disabled="!isValid(file) || (loading && !fileReader)" ng-click="loading ? cancel() : handleFile()"> <span>{{userMessage | translate }}</span> </button> </div> ');
a.put("ngeomodule/import/partials/import-dnd.html","<div translate>Drop file here</div> ");a.put("ngeo/grid.html",'<div class=ngeo-grid-table-container> <table float-thead=ctrl.floatTheadConfig ng-model=ctrl.configuration.data class="table table-bordered table-striped table-hover"> <thead class=table-header> <tr> <th ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-click=ctrl.sort(columnDefs.name)>{{columnDefs.name | translate}} <i ng-show="ctrl.sortedBy !== columnDefs.name" class="fa fa-fw"></i> <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === true" class="fa fa-caret-up"></i> <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === false" class="fa fa-caret-down"></i> </th> </tr> </thead> <tbody> <tr ng-repeat="attributes in ctrl.configuration.data" ng-class="[\'row-\' + ctrl.configuration.getRowUid(attributes), ctrl.configuration.isRowSelected(attributes) ? \'ngeo-grid-active\': \'\']" ng-click="ctrl.clickRow(attributes, $event)" ng-mousedown=ctrl.preventTextSelection($event)> <td ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-bind-html="attributes[columnDefs.name] | ngeoTrustHtml"></td> </tr> </tbody> </table> </div> ');
a.put("ngeo/scaleselector.html",'<div class="btn-group btn-block" ng-class="::{\'dropup\': scaleselectorCtrl.options.dropup}"> <button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span ng-bind-html=scaleselectorCtrl.currentScale|ngeoScalify></span>&nbsp;<i class=caret></i> </button> <ul class="dropdown-menu btn-block" role=menu> <li ng-repeat="zoomLevel in ::scaleselectorCtrl.zoomLevels"> <a href ng-click=scaleselectorCtrl.changeZoom(zoomLevel) ng-bind-html=::scaleselectorCtrl.getScale(zoomLevel)|ngeoScalify> </a> </li> </ul> </div> ');
a.put("ngeomodule/import/partials/wms-get-cap-item.html",'<div class=ngeo-header-group ng-class="{\'ngeo-odd\': $odd, \'ngeo-invalid\': layer.isInvalid, \'ngeo-selected\': (options.layerSelected === layer)}" ng-mouseenter="addPreviewLayer($event, layer)" ng-mouseleave=removePreviewLayer($event) ng-click="toggleLayerSelected($event, layer)"> <button class="fa fa-zoom-in ngeo-btn" ng-disabled=!(layer.extent)></button> <button class="fa fa-plus" ng-hide=!(layer.Layer)></button> {{layer.Title}} </div> <ul class=ngeo-child-group ng-if=!!(layer.Layer)> <li ng-repeat="layer in layer.Layer | orderBy:\'Title\'"> <div ngeo-wms-get-cap-item></div> </li> </ul> ');
a.put("ngeomodule/import/partials/wms-get-cap.html",'<div class=ngeo-message>{{limitations}}</div> <div class=ngeo-container> <div class=ngeo-header ng-click="reverse = !reverse"> <label translate>Layer</label> <button class="pull-right fa" ng-class="{\'fa-sort-by-alphabet\': !reverse, \'fa-sort-by-alphabet-alt\': reverse}"></button> </div> <div class=ngeo-content> <ul> <li ng-repeat="layer in layers | orderBy:\'Title\':reverse"> <div ngeo-wms-get-cap-item></div> </li> </ul> </div> <div class="modal-backdrop fade in" ng-show="progress > 0 && progress < 100"> <div class="progress progress-striped active"> <div class=progress-bar style="width: 100%;"></div> </div> </div> </div> <div class=ngeo-descr> <label translate>Description</label> <textarea placeholder="{{\'description instructions\' | translate}}" class=form-control readonly>{{getAbstract()}}</textarea> <button type=button class="btn btn-default btn-sm ngeo-add" ng-disabled="(!options.layerSelected || options.layerSelected.isInvalid)" ng-click=addLayerSelected() translate>Add layer</button> </div> ');
a.put("ngeo/datepicker.html","<div class=ngeo-datepicker> <form name=dateForm class=ngeo-datepicker-form novalidate> <div ng-if=\"::datepickerCtrl.time.widget === 'datepicker'\"> <div class=ngeo-datepicker-start-date> <span ng-if=\"::datepickerCtrl.time.mode === 'range'\" translate>From:</span> <span ng-if=\"::datepickerCtrl.time.mode !== 'range'\" translate>Date:</span> <input name=sdate ui-date=datepickerCtrl.sdateOptions ng-model=datepickerCtrl.sdate required> </div> <div class=ngeo-datepicker-end-date ng-if=\"::datepickerCtrl.time.mode === 'range'\"> <span translate>To:</span> <input name=edate ui-date=datepickerCtrl.edateOptions ng-model=datepickerCtrl.edate required> </div> </div> </form> </div> ");
a.put("ngeomodule/import/partials/import-online.html",'<form class="form-group form-group-sm"> <input type=url name=url autocomplete=off placeholder="{{\'Choose or enter online resource URL\' | translate}}" ng-model=fileUrl required class=form-control> <div class="ngeo-import-open fa fa-collapse"></div> </form> <div class=tabbable-footer> <button type=button class="btn btn-default btn-sm" ng-class="{\'btn-danger\': canceler}" ng-disabled="!fileUrl || !isValid(fileUrl) || (loading && !canceler)" ng-click="loading ? cancel() : handleFileUrl()"> {{userMessage | translate}} </button> </div> ');
a.put("ngeo/layertree.html",'<span ng-if=::!layertreeCtrl.isRoot>{{::layertreeCtrl.node.name}}</span> <input type=checkbox ng-if="::layertreeCtrl.node && !layertreeCtrl.node.children" ng-model=layertreeCtrl.getSetActive ng-model-options="{getterSetter: true}"> <ul ng-if=::layertreeCtrl.node.children> <li ng-repeat="node in ::layertreeCtrl.node.children" ngeo-layertree=::node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> ');
a.put("ngeo/colorpicker.html",'<table class=ngeo-colorpicker-palette> <tr ng-repeat="colors in ::ctrl.colors"> <td ng-repeat="color in ::colors" ng-click=ctrl.setColor(color) ng-class="{\'ngeo-colorpicker-selected\': color == ctrl.color}"> <div ng-style="::{\'background-color\': color}"></div> </td> </tr> </table> ')}a.$inject=["$templateCache"];nc.run(a)})();}).call(window);
//# sourceMappingURL=popupservice.js.map
