(self.webpackChunkngeo=self.webpackChunkngeo||[]).push([[649],{"./node_modules/d3/src/index.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function identity(x){return x}__webpack_require__.d(__webpack_exports__,{l78:()=>axisBottom,V4s:()=>axisLeft,WnM:()=>src_pointer,m4Y:()=>linear_linear,Ltv:()=>src_select,s_O:()=>zoom});function translateX(x){return"translate("+x+",0)"}function translateY(y){return"translate(0,"+y+")"}function number(scale){return d=>+scale(d)}function center(scale,offset){return offset=Math.max(0,scale.bandwidth()-2*offset)/2,scale.round()&&(offset=Math.round(offset)),d=>+scale(d)+offset}function entering(){return!this.__axis}function axis(orient,scale){var tickArguments=[],tickValues=null,tickFormat=null,tickSizeInner=6,tickSizeOuter=6,tickPadding=3,offset="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,k=1===orient||4===orient?-1:1,x=4===orient||2===orient?"x":"y",transform=1===orient||3===orient?translateX:translateY;function axis(context){var values=null==tickValues?scale.ticks?scale.ticks.apply(scale,tickArguments):scale.domain():tickValues,format=null==tickFormat?scale.tickFormat?scale.tickFormat.apply(scale,tickArguments):identity:tickFormat,spacing=Math.max(tickSizeInner,0)+tickPadding,range=scale.range(),range0=+range[0]+offset,range1=+range[range.length-1]+offset,position=(scale.bandwidth?center:number)(scale.copy(),offset),selection=context.selection?context.selection():context,path=selection.selectAll(".domain").data([null]),tick=selection.selectAll(".tick").data(values,scale).order(),tickExit=tick.exit(),tickEnter=tick.enter().append("g").attr("class","tick"),line=tick.select("line"),text=tick.select("text");path=path.merge(path.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),tick=tick.merge(tickEnter),line=line.merge(tickEnter.append("line").attr("stroke","currentColor").attr(x+"2",k*tickSizeInner)),text=text.merge(tickEnter.append("text").attr("fill","currentColor").attr(x,k*spacing).attr("dy",1===orient?"0em":3===orient?"0.71em":"0.32em")),context!==selection&&(path=path.transition(context),tick=tick.transition(context),line=line.transition(context),text=text.transition(context),tickExit=tickExit.transition(context).attr("opacity",1e-6).attr("transform",function(d){return isFinite(d=position(d))?transform(d+offset):this.getAttribute("transform")}),tickEnter.attr("opacity",1e-6).attr("transform",function(d){var p=this.parentNode.__axis;return transform((p&&isFinite(p=p(d))?p:position(d))+offset)})),tickExit.remove(),path.attr("d",4===orient||2===orient?tickSizeOuter?"M"+k*tickSizeOuter+","+range0+"H"+offset+"V"+range1+"H"+k*tickSizeOuter:"M"+offset+","+range0+"V"+range1:tickSizeOuter?"M"+range0+","+k*tickSizeOuter+"V"+offset+"H"+range1+"V"+k*tickSizeOuter:"M"+range0+","+offset+"H"+range1),tick.attr("opacity",1).attr("transform",function(d){return transform(position(d)+offset)}),line.attr(x+"2",k*tickSizeInner),text.attr(x,k*spacing).text(format),selection.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===orient?"start":4===orient?"end":"middle"),selection.each(function(){this.__axis=position})}return axis.scale=function(_){return arguments.length?(scale=_,axis):scale},axis.ticks=function(){return tickArguments=Array.from(arguments),axis},axis.tickArguments=function(_){return arguments.length?(tickArguments=null==_?[]:Array.from(_),axis):tickArguments.slice()},axis.tickValues=function(_){return arguments.length?(tickValues=null==_?null:Array.from(_),axis):tickValues&&tickValues.slice()},axis.tickFormat=function(_){return arguments.length?(tickFormat=_,axis):tickFormat},axis.tickSize=function(_){return arguments.length?(tickSizeInner=tickSizeOuter=+_,axis):tickSizeInner},axis.tickSizeInner=function(_){return arguments.length?(tickSizeInner=+_,axis):tickSizeInner},axis.tickSizeOuter=function(_){return arguments.length?(tickSizeOuter=+_,axis):tickSizeOuter},axis.tickPadding=function(_){return arguments.length?(tickPadding=+_,axis):tickPadding},axis.offset=function(_){return arguments.length?(offset=+_,axis):offset},axis}function axisBottom(scale){return axis(3,scale)}function axisLeft(scale){return axis(4,scale)}function none(){}function selector(selector){return null==selector?none:function(){return this.querySelector(selector)}}function empty(){return[]}function selectorAll(selector){return null==selector?empty:function(){return this.querySelectorAll(selector)}}function arrayAll(select){return function(){return function array(x){return null==x?[]:Array.isArray(x)?x:Array.from(x)}(select.apply(this,arguments))}}function matcher(selector){return function(){return this.matches(selector)}}function childMatcher(selector){return function(node){return node.matches(selector)}}var find=Array.prototype.find;function childFirst(){return this.firstElementChild}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function sparse(update){return new Array(update.length)}function EnterNode(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}function bindIndex(parent,group,enter,update,exit,data){for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],update[i]=node):enter[i]=new EnterNode(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node)}function bindKey(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue=new Map,groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue=key.call(node,node.__data__,i,group)+"",nodeByKeyValue.has(keyValue)?exit[i]=node:nodeByKeyValue.set(keyValue,node));for(i=0;i<dataLength;++i)keyValue=key.call(parent,data[i],i,data)+"",(node=nodeByKeyValue.get(keyValue))?(update[i]=node,node.__data__=data[i],nodeByKeyValue.delete(keyValue)):enter[i]=new EnterNode(parent,data[i]);for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue.get(keyValues[i])===node&&(exit[i]=node)}function datum(node){return node.__data__}function arraylike(data){return"object"==typeof data&&"length"in data?data:Array.from(data)}function ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}EnterNode.prototype={constructor:EnterNode,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}};var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(name){var prefix=name+="",i=prefix.indexOf(":");return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),namespaces.hasOwnProperty(prefix)?{space:namespaces[prefix],local:name}:name}function attrRemove(name){return function(){this.removeAttribute(name)}}function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttribute(name):this.setAttribute(name,v)}}function attrFunctionNS(fullname,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v)}}function src_window(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}function styleRemove(name){return function(){this.style.removeProperty(name)}}function styleConstant(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction(name,value,priority){return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority)}}function styleValue(node,name){return node.style.getPropertyValue(name)||src_window(node).getComputedStyle(node,null).getPropertyValue(name)}function propertyRemove(name){return function(){delete this[name]}}function propertyConstant(name,value){return function(){this[name]=value}}function propertyFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?delete this[name]:this[name]=v}}function classArray(string){return string.trim().split(/^|\s+/)}function classList(node){return node.classList||new ClassList(node)}function ClassList(node){this._node=node,this._names=classArray(node.getAttribute("class")||"")}function classedAdd(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.add(names[i])}function classedRemove(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.remove(names[i])}function classedTrue(names){return function(){classedAdd(this,names)}}function classedFalse(names){return function(){classedRemove(this,names)}}function classedFunction(names,value){return function(){(value.apply(this,arguments)?classedAdd:classedRemove)(this,names)}}function textRemove(){this.textContent=""}function textConstant(value){return function(){this.textContent=value}}function textFunction(value){return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}}function htmlRemove(){this.innerHTML=""}function htmlConstant(value){return function(){this.innerHTML=value}}function htmlFunction(value){return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function creatorInherit(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml&&document.documentElement.namespaceURI===xhtml?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator(name){var fullname=namespace(name);return(fullname.local?creatorFixed:creatorInherit)(fullname)}function constantNull(){return null}function remove(){var parent=this.parentNode;parent&&parent.removeChild(this)}function selection_cloneShallow(){var clone=this.cloneNode(!1),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function selection_cloneDeep(){var clone=this.cloneNode(!0),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function onRemove(typename){return function(){var on=this.__on;if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.options);++i?on.length=i:delete this.__on}}}function onAdd(typename,value,options){return function(){var o,on=this.__on,listener=function contextListener(listener){return function(event){listener.call(this,event,this.__data__)}}(value);if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=listener,o.options=options),void(o.value=value);this.addEventListener(typename.type,listener,options),o={type:typename.type,name:typename.name,value,listener,options},on?on.push(o):this.__on=[o]}}function dispatchEvent(node,type,params){var window=src_window(node),event=window.CustomEvent;"function"==typeof event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant(type,params){return function(){return dispatchEvent(this,type,params)}}function dispatchFunction(type,params){return function(){return dispatchEvent(this,type,params.apply(this,arguments))}}ClassList.prototype={add:function(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},remove:function(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(name){return this._names.indexOf(name)>=0}};var root=[null];function Selection(groups,parents){this._groups=groups,this._parents=parents}function selection(){return new Selection([[document.documentElement]],root)}Selection.prototype=selection.prototype={constructor:Selection,select:function selection_select(select){"function"!=typeof select&&(select=selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode);return new Selection(subgroups,this._parents)},selectAll:function selectAll(select){select="function"==typeof select?arrayAll(select):selectorAll(select);for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),parents.push(node));return new Selection(subgroups,parents)},selectChild:function selectChild(match){return this.select(null==match?childFirst:function childFind(match){return function(){return find.call(this.children,match)}}("function"==typeof match?match:childMatcher(match)))},selectChildren:function selectChildren(match){return this.selectAll(null==match?children:function childrenFilter(match){return function(){return filter.call(this.children,match)}}("function"==typeof match?match:childMatcher(match)))},filter:function selection_filter(match){"function"!=typeof match&&(match=matcher(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Selection(subgroups,this._parents)},data:function data(value,key){if(!arguments.length)return Array.from(this,datum);var bind=key?bindKey:bindIndex,parents=this._parents,groups=this._groups;"function"!=typeof value&&(value=function src_constant(x){return function(){return x}}(value));for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=arraylike(value.call(parent,parent&&parent.__data__,j,parents)),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength);bind(parent,group,enterGroup,updateGroup,exit[j]=new Array(groupLength),data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return(update=new Selection(update,parents))._enter=enter,update._exit=exit,update},enter:function enter(){return new Selection(this._enter||this._groups.map(sparse),this._parents)},exit:function exit(){return new Selection(this._exit||this._groups.map(sparse),this._parents)},join:function join(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();return"function"==typeof onenter?(enter=onenter(enter))&&(enter=enter.selection()):enter=enter.append(onenter+""),null!=onupdate&&(update=onupdate(update))&&(update=update.selection()),null==onexit?exit.remove():onexit(exit),enter&&update?enter.merge(update).order():update},merge:function merge(context){for(var selection=context.selection?context.selection():context,groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Selection(merges,this._parents)},selection:function selection_selection(){return this},order:function order(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&4^node.compareDocumentPosition(next)&&next.parentNode.insertBefore(node,next),next=node);return this},sort:function sort(compare){function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=ascending);for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);sortgroup.sort(compareNode)}return new Selection(sortgroups,this._parents).order()},call:function call(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this},nodes:function nodes(){return Array.from(this)},node:function node(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}return null},size:function size(){let size=0;for(const node of this)++size;return size},empty:function selection_empty(){return!this.node()},each:function each(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);return this},attr:function attr(name,value){var fullname=namespace(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((null==value?fullname.local?attrRemoveNS:attrRemove:"function"==typeof value?fullname.local?attrFunctionNS:attrFunction:fullname.local?attrConstantNS:attrConstant)(fullname,value))},style:function style(name,value,priority){return arguments.length>1?this.each((null==value?styleRemove:"function"==typeof value?styleFunction:styleConstant)(name,value,null==priority?"":priority)):styleValue(this.node(),name)},property:function property(name,value){return arguments.length>1?this.each((null==value?propertyRemove:"function"==typeof value?propertyFunction:propertyConstant)(name,value)):this.node()[name]},classed:function classed(name,value){var names=classArray(name+"");if(arguments.length<2){for(var list=classList(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;return!0}return this.each(("function"==typeof value?classedFunction:value?classedTrue:classedFalse)(names,value))},text:function selection_text(value){return arguments.length?this.each(null==value?textRemove:("function"==typeof value?textFunction:textConstant)(value)):this.node().textContent},html:function html(value){return arguments.length?this.each(null==value?htmlRemove:("function"==typeof value?htmlFunction:htmlConstant)(value)):this.node().innerHTML},raise:function selection_raise(){return this.each(raise)},lower:function selection_lower(){return this.each(lower)},append:function append(name){var create="function"==typeof name?name:creator(name);return this.select(function(){return this.appendChild(create.apply(this,arguments))})},insert:function insert(name,before){var create="function"==typeof name?name:creator(name),select=null==before?constantNull:"function"==typeof before?before:selector(before);return this.select(function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)})},remove:function selection_remove(){return this.each(remove)},clone:function clone(deep){return this.select(deep?selection_cloneDeep:selection_cloneShallow)},datum:function selection_datum(value){return arguments.length?this.property("__data__",value):this.node().__data__},on:function on(typename,value,options){var i,t,typenames=function parseTypenames(typenames){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name}})}(typename+""),n=typenames.length;if(!(arguments.length<2)){for(on=value?onAdd:onRemove,i=0;i<n;++i)this.each(on(typenames[i],value,options));return this}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value},dispatch:function selection_dispatch(type,params){return this.each(("function"==typeof params?dispatchFunction:dispatchConstant)(type,params))},[Symbol.iterator]:function*iterator(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&(yield node)}};const src_selection=selection;var noop={value:()=>{}};function dispatch_dispatch(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function get(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name,value:callback}),type}Dispatch.prototype=dispatch_dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var t,_=this._,T=function dispatch_parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name}})}(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};const src_dispatch=dispatch_dispatch;var taskHead,taskTail,timer_frame=0,timeout=0,interval=0,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(callback,delay,time){var t=new Timer;return t.restart(callback,delay,time),t}function wake(){clockNow=(clockLast=clock.now())+clockSkew,timer_frame=timeout=0;try{!function timerFlush(){now(),++timer_frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(void 0,e),t=t._next;--timer_frame}()}finally{timer_frame=0,function nap(){var t0,t2,t1=taskHead,time=1/0;for(;t1;)t1._call?(time>t1._time&&(time=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead=t2);taskTail=t0,sleep(time)}(),clockNow=0}}function poke(){var now=clock.now(),delay=now-clockLast;delay>1e3&&(clockSkew-=delay,clockLast=now)}function sleep(time){timer_frame||(timeout&&(timeout=clearTimeout(timeout)),time-clockNow>24?(time<1/0&&(timeout=setTimeout(wake,time-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,1e3)),timer_frame=1,setFrame(wake)))}function src_timeout(callback,delay,time){var t=new Timer;return delay=null==delay?0:+delay,t.restart(elapsed=>{t.stop(),callback(elapsed+delay)},delay,time),t}Timer.prototype=timer.prototype={constructor:Timer,restart:function(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");time=(null==time?now():+time)+(null==delay?0:+delay),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=callback,this._time=time,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var emptyOn=src_dispatch("start","end","cancel","interrupt"),emptyTween=[];function schedule(node,name,id,index,group,timing){var schedules=node.__transition;if(schedules){if(id in schedules)return}else node.__transition={};!function create(node,id,self){var tween,schedules=node.__transition;function schedule(elapsed){self.state=1,self.timer.restart(start,self.delay,self.time),self.delay<=elapsed&&start(elapsed-self.delay)}function start(elapsed){var i,j,n,o;if(1!==self.state)return stop();for(i in schedules)if((o=schedules[i]).name===self.name){if(3===o.state)return src_timeout(start);4===o.state?(o.state=6,o.timer.stop(),o.on.call("interrupt",node,node.__data__,o.index,o.group),delete schedules[i]):+i<id&&(o.state=6,o.timer.stop(),o.on.call("cancel",node,node.__data__,o.index,o.group),delete schedules[i])}if(src_timeout(function(){3===self.state&&(self.state=4,self.timer.restart(tick,self.delay,self.time),tick(elapsed))}),self.state=2,self.on.call("start",node,node.__data__,self.index,self.group),2===self.state){for(self.state=3,tween=new Array(n=self.tween.length),i=0,j=-1;i<n;++i)(o=self.tween[i].value.call(node,node.__data__,self.index,self.group))&&(tween[++j]=o);tween.length=j+1}}function tick(elapsed){for(var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=5,1),i=-1,n=tween.length;++i<n;)tween[i].call(node,t);5===self.state&&(self.on.call("end",node,node.__data__,self.index,self.group),stop())}function stop(){for(var i in self.state=6,self.timer.stop(),delete schedules[id],schedules)return;delete node.__transition}schedules[id]=self,self.timer=timer(schedule,0,self.time)}(node,id,{name,index,group,on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:0})}function init(node,id){var schedule=schedule_get(node,id);if(schedule.state>0)throw new Error("too late; already scheduled");return schedule}function schedule_set(node,id){var schedule=schedule_get(node,id);if(schedule.state>3)throw new Error("too late; already running");return schedule}function schedule_get(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))throw new Error("transition not found");return schedule}function src_interrupt(node,name){var schedule,active,i,schedules=node.__transition,empty=!0;if(schedules){for(i in name=null==name?null:name+"",schedules)(schedule=schedules[i]).name===name?(active=schedule.state>2&&schedule.state<5,schedule.state=6,schedule.timer.stop(),schedule.on.call(active?"interrupt":"cancel",node,node.__data__,schedule.index,schedule.group),delete schedules[i]):empty=!1;empty&&delete node.__transition}}function src_number(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}var svgNode,degrees=180/Math.PI,decompose_identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX,scaleY}}function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:src_number(xa,xb)},{i:i-2,x:src_number(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function rotate(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:src_number(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function skewX(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:src_number(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:src_number(xa,xb)},{i:i-2,x:src_number(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform(function parseCss(value){const m=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(value+"");return m.isIdentity?decompose_identity:decompose(m.a,m.b,m.c,m.d,m.e,m.f)},"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(function parseSvg(value){return null==value?decompose_identity:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?decompose((value=value.matrix).a,value.b,value.c,value.d,value.e,value.f):decompose_identity)},", ",")",")");function tweenRemove(id,name){var tween0,tween1;return function(){var schedule=schedule_set(this,id),tween=schedule.tween;if(tween!==tween0)for(var i=0,n=(tween1=tween0=tween).length;i<n;++i)if(tween1[i].name===name){(tween1=tween1.slice()).splice(i,1);break}schedule.tween=tween1}}function tweenFunction(id,name,value){var tween0,tween1;if("function"!=typeof value)throw new Error;return function(){var schedule=schedule_set(this,id),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name,value},i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){tween1[i]=t;break}i===n&&tween1.push(t)}schedule.tween=tween1}}function tweenValue(transition,name,value){var id=transition._id;return transition.each(function(){var schedule=schedule_set(this,id);(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments)}),function(node){return schedule_get(node,id).value[name]}}function src_define(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor}function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var brighter=1/.7,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m,l;return format=(format+"").trim().toLowerCase(),(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),6===l?rgbn(m):3===l?new Rgb(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):8===l?rgba(m>>24&255,m>>16&255,m>>8&255,(255&m)/255):4===l?rgba(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|240&m,((15&m)<<4|15&m)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function color_rgb(r,g,b,opacity){return 1===arguments.length?function rgbConvert(o){return o instanceof Color||(o=color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatRgb(){const a=clampa(this.opacity);return`${1===a?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${1===a?")":`, ${a})`}`}function clampa(opacity){return isNaN(opacity)?1:Math.max(0,Math.min(1,opacity))}function clampi(value){return Math.max(0,Math.min(255,Math.round(value)||0))}function hex(value){return((value=clampi(value))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function clamph(value){return(value=(value||0)%360)<0?value+360:value}function clampt(value){return Math.max(0,Math.min(1,value||0))}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}src_define(Color,color,{copy(channels){return Object.assign(new this.constructor,this,channels)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:function color_formatHex8(){return this.rgb().formatHex8()},formatHsl:function color_formatHsl(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),src_define(Rgb,color_rgb,extend(Color,{brighter(k){return k=null==k?brighter:Math.pow(brighter,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker(k){return k=null==k?.7:Math.pow(.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),src_define(Hsl,function hsl(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)},extend(Color,{brighter(k){return k=null==k?brighter:Math.pow(brighter,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker(k){return k=null==k?.7:Math.pow(.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const a=clampa(this.opacity);return`${1===a?"hsl(":"hsla("}${clamph(this.h)}, ${100*clampt(this.s)}%, ${100*clampt(this.l)}%${1===a?")":`, ${a})`}`}}));const d3_interpolate_src_constant=x=>()=>x;function linear(a,d){return function(t){return a+t*d}}function gamma(y){return 1===(y=+y)?nogamma:function(a,b){return b-a?function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):d3_interpolate_src_constant(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):d3_interpolate_src_constant(isNaN(a)?b:a)}const rgb=function rgbGamma(y){var color=gamma(y);function rgb(start,end){var r=color((start=color_rgb(start)).r,(end=color_rgb(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(spline){return function(colors){var i,color,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color=color_rgb(colors[i]),r[i]=color.r||0,g[i]=color.g||0,b[i]=color.b||0;return r=spline(r),g=spline(g),b=spline(b),color.opacity=1,function(t){return color.r=r(t),color.g=g(t),color.b=b(t),color+""}}}rgbSpline(function src_basis(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}}),rgbSpline(function basisClosed(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3)}});var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function string(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i,x:src_number(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function one(b){return function(t){return b(t)+""}}(q[0].x):function zero(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function transition_interpolate(a,b){var c;return("number"==typeof b?src_number:b instanceof color?rgb:(c=color(b))?(b=c,rgb):string)(a,b)}function attr_attrRemove(name){return function(){this.removeAttribute(name)}}function attr_attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attr_attrConstant(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttribute(name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attr_attrConstantNS(fullname,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttributeNS(fullname.space,fullname.local);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attr_attrFunction(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttribute(name))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttribute(name)}}function attr_attrFunctionNS(fullname,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttributeNS(fullname.space,fullname.local))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttributeNS(fullname.space,fullname.local)}}function attrTweenNS(fullname,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&function attrInterpolateNS(fullname,i){return function(t){this.setAttributeNS(fullname.space,fullname.local,i.call(this,t))}}(fullname,i)),t0}return tween._value=value,tween}function attrTween(name,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&function attrInterpolate(name,i){return function(t){this.setAttribute(name,i.call(this,t))}}(name,i)),t0}return tween._value=value,tween}function delayFunction(id,value){return function(){init(this,id).delay=+value.apply(this,arguments)}}function delayConstant(id,value){return value=+value,function(){init(this,id).delay=value}}function durationFunction(id,value){return function(){schedule_set(this,id).duration=+value.apply(this,arguments)}}function durationConstant(id,value){return value=+value,function(){schedule_set(this,id).duration=value}}var selection_Selection=src_selection.prototype.constructor;function style_styleRemove(name){return function(){this.style.removeProperty(name)}}var id=0;function Transition(groups,parents,name,id){this._groups=groups,this._parents=parents,this._name=name,this._id=id}function newId(){return++id}var selection_prototype=src_selection.prototype;Transition.prototype=function transition_transition(name){return src_selection().transition(name)}.prototype={constructor:Transition,select:function transition_select(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode,schedule(subgroup[i],name,id,i,subgroup,schedule_get(node,id)));return new Transition(subgroups,this._parents,name,id)},selectAll:function transition_selectAll(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selectorAll(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){for(var child,children=select.call(node,node.__data__,i,group),inherit=schedule_get(node,id),k=0,l=children.length;k<l;++k)(child=children[k])&&schedule(child,name,id,k,children,inherit);subgroups.push(children),parents.push(node)}return new Transition(subgroups,parents,name,id)},selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:function transition_filter(match){"function"!=typeof match&&(match=matcher(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Transition(subgroups,this._parents,this._name,this._id)},merge:function transition_merge(transition){if(transition._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Transition(merges,this._parents,this._name,this._id)},selection:function transition_selection(){return new selection_Selection(this._groups,this._parents)},transition:function transition(){for(var name=this._name,id0=this._id,id1=newId(),groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){var inherit=schedule_get(node,id0);schedule(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease})}return new Transition(groups,this._parents,name,id1)},call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:function transition_on(name,listener){var id=this._id;return arguments.length<2?schedule_get(this.node(),id).on.on(name):this.each(function onFunction(id,name,listener){var on0,on1,sit=function start(name){return(name+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t})}(name)?init:schedule_set;return function(){var schedule=sit(this,id),on=schedule.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),schedule.on=on1}}(id,name,listener))},attr:function transition_attr(name,value){var fullname=namespace(name),i="transform"===fullname?interpolateTransformSvg:transition_interpolate;return this.attrTween(name,"function"==typeof value?(fullname.local?attr_attrFunctionNS:attr_attrFunction)(fullname,i,tweenValue(this,"attr."+name,value)):null==value?(fullname.local?attr_attrRemoveNS:attr_attrRemove)(fullname):(fullname.local?attr_attrConstantNS:attr_attrConstant)(fullname,i,value))},attrTween:function transition_attrTween(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;var fullname=namespace(name);return this.tween(key,(fullname.local?attrTweenNS:attrTween)(fullname,value))},style:function transition_style(name,value,priority){var i="transform"==(name+="")?interpolateTransformCss:transition_interpolate;return null==value?this.styleTween(name,function styleNull(name,interpolate){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),string1=(this.style.removeProperty(name),styleValue(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate(string00=string0,string10=string1)}}(name,i)).on("end.style."+name,style_styleRemove(name)):"function"==typeof value?this.styleTween(name,function style_styleFunction(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),value1=value(this),string1=value1+"";return null==value1&&(this.style.removeProperty(name),string1=value1=styleValue(this,name)),string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}(name,i,tweenValue(this,"style."+name,value))).each(function styleMaybeRemove(id,name){var on0,on1,listener0,remove,key="style."+name,event="end."+key;return function(){var schedule=schedule_set(this,id),on=schedule.on,listener=null==schedule.value[key]?remove||(remove=style_styleRemove(name)):void 0;on===on0&&listener0===listener||(on1=(on0=on).copy()).on(event,listener0=listener),schedule.on=on1}}(this._id,name)):this.styleTween(name,function style_styleConstant(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=styleValue(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}(name,i,value),priority).on("end.style."+name,null)},styleTween:function transition_styleTween(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,function styleTween(name,value,priority){var t,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t=(i0=i)&&function styleInterpolate(name,i,priority){return function(t){this.style.setProperty(name,i.call(this,t),priority)}}(name,i,priority)),t}return tween._value=value,tween}(name,value,null==priority?"":priority))},text:function transition_text(value){return this.tween("text","function"==typeof value?function text_textFunction(value){return function(){var value1=value(this);this.textContent=null==value1?"":value1}}(tweenValue(this,"text",value)):function text_textConstant(value){return function(){this.textContent=value}}(null==value?"":value+""))},textTween:function transition_textTween(value){var key="text";if(arguments.length<1)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,function textTween(value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&function textInterpolate(i){return function(t){this.textContent=i.call(this,t)}}(i)),t0}return tween._value=value,tween}(value))},remove:function transition_remove(){return this.on("end.remove",function removeFunction(id){return function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;parent&&parent.removeChild(this)}}(this._id))},tween:function tween(name,value){var id=this._id;if(name+="",arguments.length<2){for(var t,tween=schedule_get(this.node(),id).tween,i=0,n=tween.length;i<n;++i)if((t=tween[i]).name===name)return t.value;return null}return this.each((null==value?tweenRemove:tweenFunction)(id,name,value))},delay:function delay(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?delayFunction:delayConstant)(id,value)):schedule_get(this.node(),id).delay},duration:function duration(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?durationFunction:durationConstant)(id,value)):schedule_get(this.node(),id).duration},ease:function ease(value){var id=this._id;return arguments.length?this.each(function easeConstant(id,value){if("function"!=typeof value)throw new Error;return function(){schedule_set(this,id).ease=value}}(id,value)):schedule_get(this.node(),id).ease},easeVarying:function transition_easeVarying(value){if("function"!=typeof value)throw new Error;return this.each(function easeVarying(id,value){return function(){var v=value.apply(this,arguments);if("function"!=typeof v)throw new Error;schedule_set(this,id).ease=v}}(this._id,value))},end:function end(){var on0,on1,that=this,id=that._id,size=that.size();return new Promise(function(resolve,reject){var cancel={value:reject},end={value:function(){0===--size&&resolve()}};that.each(function(){var schedule=schedule_set(this,id),on=schedule.on;on!==on0&&((on1=(on0=on).copy())._.cancel.push(cancel),on1._.interrupt.push(cancel),on1._.end.push(end)),schedule.on=on1}),0===size&&resolve()})},[Symbol.iterator]:selection_prototype[Symbol.iterator]};var defaultTiming={time:null,delay:0,duration:250,ease:function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function inherit(node,id){for(var timing;!(timing=node.__transition)||!(timing=timing[id]);)if(!(node=node.parentNode))throw new Error(`transition ${id} not found`);return timing}src_selection.prototype.interrupt=function selection_interrupt(name){return this.each(function(){src_interrupt(this,name)})},src_selection.prototype.transition=function selection_transition(name){var id,timing;name instanceof Transition?(id=name._id,name=name._name):(id=newId(),(timing=defaultTiming).time=now(),name=null==name?null:name+"");for(var groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&schedule(node,name,id,i,group,timing||inherit(node,id));return new Transition(groups,this._parents,name,id)};const{abs,max,min}=Math;function number1(e){return[+e[0],+e[1]]}function number2(e){return[number1(e[0]),number1(e[1])]}["w","e"].map(type),["n","s"].map(type),["n","w","e","s","nw","ne","sw","se"].map(type);function type(t){return{type:t}}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(start,stop,count){const step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log10(step)),error=step/Math.pow(10,power),factor=error>=e10?10:error>=e5?5:error>=e2?2:1;let i1,i2,inc;return power<0?(inc=Math.pow(10,-power)/factor,i1=Math.round(start*inc),i2=Math.round(stop*inc),i1/inc<start&&++i1,i2/inc>stop&&--i2,inc=-inc):(inc=Math.pow(10,power)*factor,i1=Math.round(start/inc),i2=Math.round(stop/inc),i1*inc<start&&++i1,i2*inc>stop&&--i2),i2<i1&&.5<=count&&count<2?tickSpec(start,stop,2*count):[i1,i2,inc]}function tickIncrement(start,stop,count){return tickSpec(start=+start,stop=+stop,count=+count)[2]}function ascending_ascending(a,b){return null==a||null==b?NaN:a<b?-1:a>b?1:a>=b?0:NaN}function descending(a,b){return null==a||null==b?NaN:b<a?-1:b>a?1:b>=a?0:NaN}function bisector(f){let compare1,compare2,delta;function left(a,x,lo=0,hi=a.length){if(lo<hi){if(0!==compare1(x,x))return hi;do{const mid=lo+hi>>>1;compare2(a[mid],x)<0?lo=mid+1:hi=mid}while(lo<hi)}return lo}return 2!==f.length?(compare1=ascending_ascending,compare2=(d,x)=>ascending_ascending(f(d),x),delta=(d,x)=>f(d)-x):(compare1=f===ascending_ascending||f===descending?f:bisector_zero,compare2=f,delta=f),{left,center:function center(a,x,lo=0,hi=a.length){const i=left(a,x,lo,hi-1);return i>lo&&delta(a[i-1],x)>-delta(a[i],x)?i-1:i},right:function right(a,x,lo=0,hi=a.length){if(lo<hi){if(0!==compare1(x,x))return hi;do{const mid=lo+hi>>>1;compare2(a[mid],x)<=0?lo=mid+1:hi=mid}while(lo<hi)}return lo}}}function bisector_zero(){return 0}const ascendingBisect=bisector(ascending_ascending),bisectRight=ascendingBisect.right,bisect=(ascendingBisect.left,bisector(function number_number(x){return null===x?NaN:+x}).center,bisectRight);function genericArray(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=value(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}function date(a,b){var d=new Date;return a=+a,b=+b,function(t){return d.setTime(a*(1-t)+b*t),d}}function object(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=value(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}}function src_numberArray(a,b){b||(b=[]);var i,n=a?Math.min(b.length,a.length):0,c=b.slice();return function(t){for(i=0;i<n;++i)c[i]=a[i]*(1-t)+b[i]*t;return c}}function value(a,b){var c,t=typeof b;return null==b||"boolean"===t?d3_interpolate_src_constant(b):("number"===t?src_number:"string"===t?(c=color(b))?(b=c,rgb):string:b instanceof color?rgb:b instanceof Date?date:function numberArray_isNumberArray(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}(b)?src_numberArray:Array.isArray(b)?genericArray:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?object:src_number)(a,b)}function round(a,b){return a=+a,b=+b,function(t){return Math.round(a*(1-t)+b*t)}}function src_number_number(x){return+x}var unit=[0,1];function continuous_identity(x){return x}function normalize(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:function constants(x){return function(){return x}}(isNaN(b)?NaN:.5)}function bimap(domain,range,interpolate){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];return d1<d0?(d0=normalize(d1,d0),r0=interpolate(r1,r0)):(d0=normalize(d0,d1),r0=interpolate(r0,r1)),function(x){return r0(d0(x))}}function polymap(domain,range,interpolate){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;for(domain[j]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++i<j;)d[i]=normalize(domain[i],domain[i+1]),r[i]=interpolate(range[i],range[i+1]);return function(x){var i=bisect(domain,x,1,j)-1;return r[i](d[i](x))}}function transformer(){var transform,untransform,unknown,piecewise,output,input,domain=unit,range=unit,interpolate=value,clamp=continuous_identity;function rescale(){var n=Math.min(domain.length,range.length);return clamp!==continuous_identity&&(clamp=function clamper(a,b){var t;return a>b&&(t=a,a=b,b=t),function(x){return Math.max(a,Math.min(b,x))}}(domain[0],domain[n-1])),piecewise=n>2?polymap:bimap,output=input=null,scale}function scale(x){return null==x||isNaN(x=+x)?unknown:(output||(output=piecewise(domain.map(transform),range,interpolate)))(transform(clamp(x)))}return scale.invert=function(y){return clamp(untransform((input||(input=piecewise(range,domain.map(transform),src_number)))(y)))},scale.domain=function(_){return arguments.length?(domain=Array.from(_,src_number_number),rescale()):domain.slice()},scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()},scale.rangeRound=function(_){return range=Array.from(_),interpolate=round,rescale()},scale.clamp=function(_){return arguments.length?(clamp=!!_||continuous_identity,rescale()):clamp!==continuous_identity},scale.interpolate=function(_){return arguments.length?(interpolate=_,rescale()):interpolate},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t,u){return transform=t,untransform=u,rescale()}}function initRange(domain,range){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range).domain(domain)}return this}var prefixExponent,re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]})}function FormatSpecifier(specifier){this.fill=void 0===specifier.fill?" ":specifier.fill+"",this.align=void 0===specifier.align?">":specifier.align+"",this.sign=void 0===specifier.sign?"-":specifier.sign+"",this.symbol=void 0===specifier.symbol?"":specifier.symbol+"",this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":specifier.type+""}function formatDecimalParts(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}function exponent(x){return(x=formatDecimalParts(Math.abs(x)))?x[1]:NaN}function formatRounded(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const formatTypes={"%":(x,p)=>(100*x).toFixed(p),b:x=>Math.round(x).toString(2),c:x=>x+"",d:function formatDecimal(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)},e:(x,p)=>x.toExponential(p),f:(x,p)=>x.toFixed(p),g:(x,p)=>x.toPrecision(p),o:x=>Math.round(x).toString(8),p:(x,p)=>formatRounded(100*x,p),r:formatRounded,s:function formatPrefixAuto(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimalParts(x,Math.max(0,p+i-1))[0]},X:x=>Math.round(x).toString(16).toUpperCase(),x:x=>Math.round(x).toString(16)};function src_identity(x){return x}var defaultLocale_locale,format,formatPrefix,map=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function locale(locale){var group=void 0===locale.grouping||void 0===locale.thousands?src_identity:function formatGroup(grouping,thousands){return function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}}(map.call(locale.grouping,Number),locale.thousands+""),currencyPrefix=void 0===locale.currency?"":locale.currency[0]+"",currencySuffix=void 0===locale.currency?"":locale.currency[1]+"",decimal=void 0===locale.decimal?".":locale.decimal+"",numerals=void 0===locale.numerals?src_identity:function formatNumerals(numerals){return function(value){return value.replace(/[0-9]/g,function(i){return numerals[+i]})}}(map.call(locale.numerals,String)),percent=void 0===locale.percent?"%":locale.percent+"",minus=void 0===locale.minus?"":locale.minus+"",nan=void 0===locale.nan?"NaN":locale.nan+"";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(void 0===precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0||1/value<0;if(value=isNaN(value)?nan:formatType(Math.abs(value),precision),trim&&(value=function formatTrim(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(!+s[i])break out;i0>0&&(i0=0)}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}(value)),valueNegative&&0===+value&&"+"!==sign&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:minus:"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=void 0===precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function formatPrefix(specifier,value){var f=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(exponent(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}}}function tickFormat(start,stop,count,specifier){var precision,step=function tickStep(start,stop,count){count=+count;const reverse=(stop=+stop)<(start=+start),inc=reverse?tickIncrement(stop,start,count):tickIncrement(start,stop,count);return(reverse?-1:1)*(inc<0?1/-inc:inc)}(start,stop,count);switch((specifier=formatSpecifier(null==specifier?",f":specifier)).type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));return null!=specifier.precision||isNaN(precision=function precisionPrefix(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(value)/3)))-exponent(Math.abs(step)))}(step,value))||(specifier.precision=precision),formatPrefix(specifier,value);case"":case"e":case"g":case"p":case"r":null!=specifier.precision||isNaN(precision=function precisionRound(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,exponent(max)-exponent(step))+1}(step,Math.max(Math.abs(start),Math.abs(stop))))||(specifier.precision=precision-("e"===specifier.type));break;case"f":case"%":null!=specifier.precision||isNaN(precision=function precisionFixed(step){return Math.max(0,-exponent(Math.abs(step)))}(step))||(specifier.precision=precision-2*("%"===specifier.type))}return format(specifier)}function linearish(scale){var domain=scale.domain;return scale.ticks=function(count){var d=domain();return function ticks(start,stop,count){if(!((count=+count)>0))return[];if((start=+start)===(stop=+stop))return[start];const reverse=stop<start,[i1,i2,inc]=reverse?tickSpec(stop,start,count):tickSpec(start,stop,count);if(!(i2>=i1))return[];const n=i2-i1+1,ticks=new Array(n);if(reverse)if(inc<0)for(let i=0;i<n;++i)ticks[i]=(i2-i)/-inc;else for(let i=0;i<n;++i)ticks[i]=(i2-i)*inc;else if(inc<0)for(let i=0;i<n;++i)ticks[i]=(i1+i)/-inc;else for(let i=0;i<n;++i)ticks[i]=(i1+i)*inc;return ticks}(d[0],d[d.length-1],null==count?10:count)},scale.tickFormat=function(count,specifier){var d=domain();return tickFormat(d[0],d[d.length-1],null==count?10:count,specifier)},scale.nice=function(count){null==count&&(count=10);var prestep,step,d=domain(),i0=0,i1=d.length-1,start=d[i0],stop=d[i1],maxIter=10;for(stop<start&&(step=start,start=stop,stop=step,step=i0,i0=i1,i1=step);maxIter-- >0;){if((step=tickIncrement(start,stop,count))===prestep)return d[i0]=start,d[i1]=stop,domain(d);if(step>0)start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step;else{if(!(step<0))break;start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step}prestep=step}return scale},scale}function linear_linear(){var scale=function continuous(){return transformer()(continuous_identity,continuous_identity)}();return scale.copy=function(){return function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}(scale,linear_linear())},initRange.apply(scale,arguments),linearish(scale)}function src_pointer(event,node){if(event=function sourceEvent(event){let sourceEvent;for(;sourceEvent=event.sourceEvent;)event=sourceEvent;return event}(event),void 0===node&&(node=event.currentTarget),node){var svg=node.ownerSVGElement||node;if(svg.createSVGPoint){var point=svg.createSVGPoint();return point.x=event.clientX,point.y=event.clientY,[(point=point.matrixTransform(node.getScreenCTM().inverse())).x,point.y]}if(node.getBoundingClientRect){var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop]}}return[event.pageX,event.pageY]}function src_select(selector){return"string"==typeof selector?new Selection([[document.querySelector(selector)]],[document.documentElement]):new Selection([[selector]],root)}!function defaultLocale(definition){return defaultLocale_locale=locale(definition),format=defaultLocale_locale.format,formatPrefix=defaultLocale_locale.formatPrefix,defaultLocale_locale}({thousands:",",grouping:[3],currency:["$",""]});const nonpassivecapture={capture:!0,passive:!1};function src_noevent(event){event.preventDefault(),event.stopImmediatePropagation()}function cosh(x){return((x=Math.exp(x))+1/x)/2}const src_zoom=function zoomRho(rho,rho2,rho4){function zoom(p0,p1){var i,S,ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy;if(d2<1e-12)S=Math.log(w1/w0)/rho,i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)]};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+rho4*d2)/(2*w0*rho2*d1),b1=(w1*w1-w0*w0-rho4*d2)/(2*w1*rho2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/rho,i=function(t){var s=t*S,coshr0=cosh(r0),u=w0/(rho2*d1)*(coshr0*function tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}(rho*s+r0)-function sinh(x){return((x=Math.exp(x))-1/x)/2}(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/cosh(rho*s+r0)]}}return i.duration=1e3*S*rho/Math.SQRT2,i}return zoom.rho=function(_){var _1=Math.max(.001,+_),_2=_1*_1;return zoomRho(_1,_2,_2*_2)},zoom}(Math.SQRT2,2,4),d3_zoom_src_constant=x=>()=>x;function ZoomEvent(type,{sourceEvent,target,transform,dispatch}){Object.defineProperties(this,{type:{value:type,enumerable:!0,configurable:!0},sourceEvent:{value:sourceEvent,enumerable:!0,configurable:!0},target:{value:target,enumerable:!0,configurable:!0},transform:{value:transform,enumerable:!0,configurable:!0},_:{value:dispatch}})}function Transform(k,x,y){this.k=k,this.x=x,this.y=y}Transform.prototype={constructor:Transform,scale:function(k){return 1===k?this:new Transform(this.k*k,this.x,this.y)},translate:function(x,y){return 0===x&0===y?this:new Transform(this.k,this.x+this.k*x,this.y+this.k*y)},apply:function(point){return[point[0]*this.k+this.x,point[1]*this.k+this.y]},applyX:function(x){return x*this.k+this.x},applyY:function(y){return y*this.k+this.y},invert:function(location){return[(location[0]-this.x)/this.k,(location[1]-this.y)/this.k]},invertX:function(x){return(x-this.x)/this.k},invertY:function(y){return(y-this.y)/this.k},rescaleX:function(x){return x.copy().domain(x.range().map(this.invertX,this).map(x.invert,x))},rescaleY:function(y){return y.copy().domain(y.range().map(this.invertY,this).map(y.invert,y))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var transform_identity=new Transform(1,0,0);function src_noevent_nopropagation(event){event.stopImmediatePropagation()}function d3_zoom_src_noevent(event){event.preventDefault(),event.stopImmediatePropagation()}function zoom_defaultFilter(event){return!(event.ctrlKey&&"wheel"!==event.type||event.button)}function zoom_defaultExtent(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function defaultTransform(){return this.__zoom||transform_identity}function defaultWheelDelta(event){return-event.deltaY*(1===event.deltaMode?.05:event.deltaMode?1:.002)*(event.ctrlKey?10:1)}function zoom_defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(transform,extent,translateExtent){var dx0=transform.invertX(extent[0][0])-translateExtent[0][0],dx1=transform.invertX(extent[1][0])-translateExtent[1][0],dy0=transform.invertY(extent[0][1])-translateExtent[0][1],dy1=transform.invertY(extent[1][1])-translateExtent[1][1];return transform.translate(dx1>dx0?(dx0+dx1)/2:Math.min(0,dx0)||Math.max(0,dx1),dy1>dy0?(dy0+dy1)/2:Math.min(0,dy0)||Math.max(0,dy1))}function zoom(){var touchstarting,touchfirst,touchending,filter=zoom_defaultFilter,extent=zoom_defaultExtent,constrain=defaultConstrain,wheelDelta=defaultWheelDelta,touchable=zoom_defaultTouchable,scaleExtent=[0,1/0],translateExtent=[[-1/0,-1/0],[1/0,1/0]],duration=250,interpolate=src_zoom,listeners=src_dispatch("start","zoom","end"),clickDistance2=0,tapDistance=10;function zoom(selection){selection.property("__zoom",defaultTransform).on("wheel.zoom",wheeled,{passive:!1}).on("mousedown.zoom",mousedowned).on("dblclick.zoom",dblclicked).filter(touchable).on("touchstart.zoom",touchstarted).on("touchmove.zoom",touchmoved).on("touchend.zoom touchcancel.zoom",touchended).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function scale(transform,k){return(k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],k)))===transform.k?transform:new Transform(k,transform.x,transform.y)}function translate(transform,p0,p1){var x=p0[0]-p1[0]*transform.k,y=p0[1]-p1[1]*transform.k;return x===transform.x&&y===transform.y?transform:new Transform(transform.k,x,y)}function centroid(extent){return[(+extent[0][0]+ +extent[1][0])/2,(+extent[0][1]+ +extent[1][1])/2]}function schedule(transition,transform,point,event){transition.on("start.zoom",function(){gesture(this,arguments).event(event).start()}).on("interrupt.zoom end.zoom",function(){gesture(this,arguments).event(event).end()}).tween("zoom",function(){var args=arguments,g=gesture(this,args).event(event),e=extent.apply(this,args),p=null==point?centroid(e):"function"==typeof point?point.apply(this,args):point,w=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),a=this.__zoom,b="function"==typeof transform?transform.apply(this,args):transform,i=interpolate(a.invert(p).concat(w/a.k),b.invert(p).concat(w/b.k));return function(t){if(1===t)t=b;else{var l=i(t),k=w/l[2];t=new Transform(k,p[0]-l[0]*k,p[1]-l[1]*k)}g.zoom(null,t)}})}function gesture(that,args,clean){return!clean&&that.__zooming||new Gesture(that,args)}function Gesture(that,args){this.that=that,this.args=args,this.active=0,this.sourceEvent=null,this.extent=extent.apply(that,args),this.taps=0}function wheeled(event,...args){if(filter.apply(this,arguments)){var g=gesture(this,args).event(event),t=this.__zoom,k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],t.k*Math.pow(2,wheelDelta.apply(this,arguments)))),p=src_pointer(event);if(g.wheel)g.mouse[0][0]===p[0]&&g.mouse[0][1]===p[1]||(g.mouse[1]=t.invert(g.mouse[0]=p)),clearTimeout(g.wheel);else{if(t.k===k)return;g.mouse=[p,t.invert(p)],src_interrupt(this),g.start()}d3_zoom_src_noevent(event),g.wheel=setTimeout(function wheelidled(){g.wheel=null,g.end()},150),g.zoom("mouse",constrain(translate(scale(t,k),g.mouse[0],g.mouse[1]),g.extent,translateExtent))}}function mousedowned(event,...args){if(!touchending&&filter.apply(this,arguments)){var currentTarget=event.currentTarget,g=gesture(this,args,!0).event(event),v=src_select(event.view).on("mousemove.zoom",function mousemoved(event){if(d3_zoom_src_noevent(event),!g.moved){var dx=event.clientX-x0,dy=event.clientY-y0;g.moved=dx*dx+dy*dy>clickDistance2}g.event(event).zoom("mouse",constrain(translate(g.that.__zoom,g.mouse[0]=src_pointer(event,currentTarget),g.mouse[1]),g.extent,translateExtent))},!0).on("mouseup.zoom",function mouseupped(event){v.on("mousemove.zoom mouseup.zoom",null),function yesdrag(view,noclick){var root=view.document.documentElement,selection=src_select(view).on("dragstart.drag",null);noclick&&(selection.on("click.drag",src_noevent,nonpassivecapture),setTimeout(function(){selection.on("click.drag",null)},0)),"onselectstart"in root?selection.on("selectstart.drag",null):(root.style.MozUserSelect=root.__noselect,delete root.__noselect)}(event.view,g.moved),d3_zoom_src_noevent(event),g.event(event).end()},!0),p=src_pointer(event,currentTarget),x0=event.clientX,y0=event.clientY;!function nodrag(view){var root=view.document.documentElement,selection=src_select(view).on("dragstart.drag",src_noevent,nonpassivecapture);"onselectstart"in root?selection.on("selectstart.drag",src_noevent,nonpassivecapture):(root.__noselect=root.style.MozUserSelect,root.style.MozUserSelect="none")}(event.view),src_noevent_nopropagation(event),g.mouse=[p,this.__zoom.invert(p)],src_interrupt(this),g.start()}}function dblclicked(event,...args){if(filter.apply(this,arguments)){var t0=this.__zoom,p0=src_pointer(event.changedTouches?event.changedTouches[0]:event,this),p1=t0.invert(p0),k1=t0.k*(event.shiftKey?.5:2),t1=constrain(translate(scale(t0,k1),p0,p1),extent.apply(this,args),translateExtent);d3_zoom_src_noevent(event),duration>0?src_select(this).transition().duration(duration).call(schedule,t1,p0,event):src_select(this).call(zoom.transform,t1,p0,event)}}function touchstarted(event,...args){if(filter.apply(this,arguments)){var started,i,t,p,touches=event.touches,n=touches.length,g=gesture(this,args,event.changedTouches.length===n).event(event);for(src_noevent_nopropagation(event),i=0;i<n;++i)p=[p=src_pointer(t=touches[i],this),this.__zoom.invert(p),t.identifier],g.touch0?g.touch1||g.touch0[2]===p[2]||(g.touch1=p,g.taps=0):(g.touch0=p,started=!0,g.taps=1+!!touchstarting);touchstarting&&(touchstarting=clearTimeout(touchstarting)),started&&(g.taps<2&&(touchfirst=p[0],touchstarting=setTimeout(function(){touchstarting=null},500)),src_interrupt(this),g.start())}}function touchmoved(event,...args){if(this.__zooming){var i,t,p,l,g=gesture(this,args).event(event),touches=event.changedTouches,n=touches.length;for(d3_zoom_src_noevent(event),i=0;i<n;++i)p=src_pointer(t=touches[i],this),g.touch0&&g.touch0[2]===t.identifier?g.touch0[0]=p:g.touch1&&g.touch1[2]===t.identifier&&(g.touch1[0]=p);if(t=g.that.__zoom,g.touch1){var p0=g.touch0[0],l0=g.touch0[1],p1=g.touch1[0],l1=g.touch1[1],dp=(dp=p1[0]-p0[0])*dp+(dp=p1[1]-p0[1])*dp,dl=(dl=l1[0]-l0[0])*dl+(dl=l1[1]-l0[1])*dl;t=scale(t,Math.sqrt(dp/dl)),p=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2],l=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2]}else{if(!g.touch0)return;p=g.touch0[0],l=g.touch0[1]}g.zoom("touch",constrain(translate(t,p,l),g.extent,translateExtent))}}function touchended(event,...args){if(this.__zooming){var i,t,g=gesture(this,args).event(event),touches=event.changedTouches,n=touches.length;for(src_noevent_nopropagation(event),touchending&&clearTimeout(touchending),touchending=setTimeout(function(){touchending=null},500),i=0;i<n;++i)t=touches[i],g.touch0&&g.touch0[2]===t.identifier?delete g.touch0:g.touch1&&g.touch1[2]===t.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),2===g.taps&&(t=src_pointer(t,this),Math.hypot(touchfirst[0]-t[0],touchfirst[1]-t[1])<tapDistance)){var p=src_select(this).on("dblclick.zoom");p&&p.apply(this,arguments)}}}return zoom.transform=function(collection,transform,point,event){var selection=collection.selection?collection.selection():collection;selection.property("__zoom",defaultTransform),collection!==selection?schedule(collection,transform,point,event):selection.interrupt().each(function(){gesture(this,arguments).event(event).start().zoom(null,"function"==typeof transform?transform.apply(this,arguments):transform).end()})},zoom.scaleBy=function(selection,k,p,event){zoom.scaleTo(selection,function(){return this.__zoom.k*("function"==typeof k?k.apply(this,arguments):k)},p,event)},zoom.scaleTo=function(selection,k,p,event){zoom.transform(selection,function(){var e=extent.apply(this,arguments),t0=this.__zoom,p0=null==p?centroid(e):"function"==typeof p?p.apply(this,arguments):p,p1=t0.invert(p0),k1="function"==typeof k?k.apply(this,arguments):k;return constrain(translate(scale(t0,k1),p0,p1),e,translateExtent)},p,event)},zoom.translateBy=function(selection,x,y,event){zoom.transform(selection,function(){return constrain(this.__zoom.translate("function"==typeof x?x.apply(this,arguments):x,"function"==typeof y?y.apply(this,arguments):y),extent.apply(this,arguments),translateExtent)},null,event)},zoom.translateTo=function(selection,x,y,p,event){zoom.transform(selection,function(){var e=extent.apply(this,arguments),t=this.__zoom,p0=null==p?centroid(e):"function"==typeof p?p.apply(this,arguments):p;return constrain(transform_identity.translate(p0[0],p0[1]).scale(t.k).translate("function"==typeof x?-x.apply(this,arguments):-x,"function"==typeof y?-y.apply(this,arguments):-y),e,translateExtent)},p,event)},Gesture.prototype={event:function(event){return event&&(this.sourceEvent=event),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(key,transform){return this.mouse&&"mouse"!==key&&(this.mouse[1]=transform.invert(this.mouse[0])),this.touch0&&"touch"!==key&&(this.touch0[1]=transform.invert(this.touch0[0])),this.touch1&&"touch"!==key&&(this.touch1[1]=transform.invert(this.touch1[0])),this.that.__zoom=transform,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(type){var d=src_select(this.that).datum();listeners.call(type,this.that,new ZoomEvent(type,{sourceEvent:this.sourceEvent,target:zoom,type,transform:this.that.__zoom,dispatch:listeners}),d)}},zoom.wheelDelta=function(_){return arguments.length?(wheelDelta="function"==typeof _?_:d3_zoom_src_constant(+_),zoom):wheelDelta},zoom.filter=function(_){return arguments.length?(filter="function"==typeof _?_:d3_zoom_src_constant(!!_),zoom):filter},zoom.touchable=function(_){return arguments.length?(touchable="function"==typeof _?_:d3_zoom_src_constant(!!_),zoom):touchable},zoom.extent=function(_){return arguments.length?(extent="function"==typeof _?_:d3_zoom_src_constant([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),zoom):extent},zoom.scaleExtent=function(_){return arguments.length?(scaleExtent[0]=+_[0],scaleExtent[1]=+_[1],zoom):[scaleExtent[0],scaleExtent[1]]},zoom.translateExtent=function(_){return arguments.length?(translateExtent[0][0]=+_[0][0],translateExtent[1][0]=+_[1][0],translateExtent[0][1]=+_[0][1],translateExtent[1][1]=+_[1][1],zoom):[[translateExtent[0][0],translateExtent[0][1]],[translateExtent[1][0],translateExtent[1][1]]]},zoom.constrain=function(_){return arguments.length?(constrain=_,zoom):constrain},zoom.duration=function(_){return arguments.length?(duration=+_,zoom):duration},zoom.interpolate=function(_){return arguments.length?(interpolate=_,zoom):interpolate},zoom.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?zoom:value},zoom.clickDistance=function(_){return arguments.length?(clickDistance2=(_=+_)*_,zoom):Math.sqrt(clickDistance2)},zoom.tapDistance=function(_){return arguments.length?(tapDistance=+_,zoom):tapDistance},zoom}Transform.prototype},"./node_modules/file-saver/dist/FileSaver.min.js"(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){"use strict";function b(a,b){return void 0===b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\ufeff",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error("could not download file")},d.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof __webpack_require__.g&&__webpack_require__.g.global===__webpack_require__.g?__webpack_require__.g:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4e4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(b,d,e,g){if((g=g||open("","_blank"))&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return c(b,d,e);var h="application/octet-stream"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4e4)}});f.saveAs=g.saveAs=g,module.exports=g})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},"./node_modules/ol/Collection.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,J:()=>CollectionEvent});var _CollectionEventType_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/CollectionEventType.js"),_Object_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/Object.js"),_events_Event_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/events/Event.js");const Property_LENGTH="length";class CollectionEvent extends _events_Event_js__WEBPACK_IMPORTED_MODULE_2__.Ay{constructor(type,element,index){super(type),this.element=element,this.index=index}}class Collection extends _Object_js__WEBPACK_IMPORTED_MODULE_1__.A{constructor(array,options){if(super(),this.on,this.once,this.un,options=options||{},this.unique_=!!options.unique,this.array_=array??[],this.unique_)for(let i=1,ii=this.array_.length;i<ii;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(arr){for(let i=0,ii=arr.length;i<ii;++i)this.push(arr[i]);return this}forEach(f){const array=this.array_;for(let i=0,ii=array.length;i<ii;++i)f(array[i],i,array)}getArray(){return this.array_}item(index){return this.array_[index]}getLength(){return this.get(Property_LENGTH)}insertAt(index,elem){if(index<0||index>this.getLength())throw new Error("Index out of bounds: "+index);this.unique_&&this.assertUnique_(elem),this.array_.splice(index,0,elem),this.updateLength_(),this.dispatchEvent(new CollectionEvent(_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_0__.A.ADD,elem,index))}pop(){return this.removeAt(this.getLength()-1)}push(elem){const n=this.getLength();return this.insertAt(n,elem),this.getLength()}remove(elem){const arr=this.array_;for(let i=0,ii=arr.length;i<ii;++i)if(arr[i]===elem)return this.removeAt(i)}removeAt(index){if(index<0||index>=this.getLength())return;const prev=this.array_[index];return this.array_.splice(index,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_0__.A.REMOVE,prev,index)),prev}setAt(index,elem){if(index>=this.getLength())return void this.insertAt(index,elem);if(index<0)throw new Error("Index out of bounds: "+index);this.unique_&&this.assertUnique_(elem,index);const prev=this.array_[index];this.array_[index]=elem,this.dispatchEvent(new CollectionEvent(_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_0__.A.REMOVE,prev,index)),this.dispatchEvent(new CollectionEvent(_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_0__.A.ADD,elem,index))}updateLength_(){this.set(Property_LENGTH,this.array_.length)}assertUnique_(elem,except){const array=this.array_;for(let i=0,ii=array.length;i<ii;++i)if(array[i]===elem&&i!==except)throw new Error("Duplicate item added to a unique collection")}}const __WEBPACK_DEFAULT_EXPORT__=Collection},"./node_modules/ol/CollectionEventType.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={ADD:"add",REMOVE:"remove"}},"./node_modules/ol/Disposable.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},"./node_modules/ol/Feature.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _Object_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/Object.js"),_asserts_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/asserts.js"),_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/events/EventType.js"),_events_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/events.js");class Feature extends _Object_js__WEBPACK_IMPORTED_MODULE_0__.A{constructor(geometryOrProperties){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),geometryOrProperties)if("function"==typeof geometryOrProperties.getSimplifiedGeometry){const geometry=geometryOrProperties;this.setGeometry(geometry)}else{const properties=geometryOrProperties;this.setProperties(properties)}}clone(){const clone=new Feature(this.hasProperties()?this.getProperties():null);clone.setGeometryName(this.getGeometryName());const geometry=this.getGeometry();geometry&&clone.setGeometry(geometry.clone());const style=this.getStyle();return style&&clone.setStyle(style),clone}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,_events_js__WEBPACK_IMPORTED_MODULE_3__.JH)(this.geometryChangeKey_),this.geometryChangeKey_=null);const geometry=this.getGeometry();geometry&&(this.geometryChangeKey_=(0,_events_js__WEBPACK_IMPORTED_MODULE_3__.KT)(geometry,_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__.A.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(geometry){this.set(this.geometryName_,geometry)}setStyle(style){this.style_=style,this.styleFunction_=style?function createStyleFunction(obj){if("function"==typeof obj)return obj;let styles;if(Array.isArray(obj))styles=obj;else{(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.v)("function"==typeof obj.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`");styles=[obj]}return function(){return styles}}(style):void 0,this.changed()}setId(id){this.id_=id,this.changed()}setGeometryName(name){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=name,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const __WEBPACK_DEFAULT_EXPORT__=Feature},"./node_modules/ol/ImageState.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},"./node_modules/ol/Map.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>ol_Map});var Collection=__webpack_require__("./node_modules/ol/Collection.js"),CollectionEventType=__webpack_require__("./node_modules/ol/CollectionEventType.js"),MapBrowserEvent=__webpack_require__("./node_modules/ol/MapBrowserEvent.js"),MapBrowserEventType=__webpack_require__("./node_modules/ol/MapBrowserEventType.js"),EventType=__webpack_require__("./node_modules/ol/events/EventType.js"),Target=__webpack_require__("./node_modules/ol/events/Target.js"),events=__webpack_require__("./node_modules/ol/events.js"),has=__webpack_require__("./node_modules/ol/has.js");const pointer_EventType_POINTERMOVE="pointermove",pointer_EventType_POINTERDOWN="pointerdown";class MapBrowserEventHandler extends Target.A{constructor(map,moveTolerance){super(map),this.map_=map,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===moveTolerance?1:moveTolerance,this.down_=null;const element=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=element,this.pointerdownListenerKey_=(0,events.KT)(element,pointer_EventType_POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=(0,events.KT)(element,pointer_EventType_POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType.A.TOUCHMOVE,this.boundHandleTouchMove_,!!has.FT&&{passive:!1})}emulateClick_(pointerEvent){let newEvent=new MapBrowserEvent.A(MapBrowserEventType.A.CLICK,this.map_,pointerEvent);this.dispatchEvent(newEvent),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,newEvent=new MapBrowserEvent.A(MapBrowserEventType.A.DBLCLICK,this.map_,pointerEvent),this.dispatchEvent(newEvent)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const newEvent=new MapBrowserEvent.A(MapBrowserEventType.A.SINGLECLICK,this.map_,pointerEvent);this.dispatchEvent(newEvent)},250)}updateActivePointers_(pointerEvent){const event=pointerEvent,id=event.pointerId;if(event.type==MapBrowserEventType.A.POINTERUP||event.type==MapBrowserEventType.A.POINTERCANCEL){delete this.trackedTouches_[id];for(const pointerId in this.trackedTouches_)if(this.trackedTouches_[pointerId].target!==event.target){delete this.trackedTouches_[pointerId];break}}else event.type!=MapBrowserEventType.A.POINTERDOWN&&event.type!=MapBrowserEventType.A.POINTERMOVE||(this.trackedTouches_[id]=event);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(pointerEvent){this.updateActivePointers_(pointerEvent);const newEvent=new MapBrowserEvent.A(MapBrowserEventType.A.POINTERUP,this.map_,pointerEvent,void 0,void 0,this.activePointers_);this.dispatchEvent(newEvent),this.emulateClicks_&&!newEvent.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(pointerEvent)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(events.JH),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(pointerEvent){return 0===pointerEvent.button}handlePointerDown_(pointerEvent){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(pointerEvent);const newEvent=new MapBrowserEvent.A(MapBrowserEventType.A.POINTERDOWN,this.map_,pointerEvent,void 0,void 0,this.activePointers_);if(this.dispatchEvent(newEvent),this.down_=new PointerEvent(pointerEvent.type,pointerEvent),Object.defineProperty(this.down_,"target",{writable:!1,value:pointerEvent.target}),0===this.dragListenerKeys_.length){const doc=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,events.KT)(doc,MapBrowserEventType.A.POINTERMOVE,this.handlePointerMove_,this),(0,events.KT)(doc,MapBrowserEventType.A.POINTERUP,this.handlePointerUp_,this),(0,events.KT)(this.element_,MapBrowserEventType.A.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==doc&&this.dragListenerKeys_.push((0,events.KT)(this.element_.getRootNode(),MapBrowserEventType.A.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(pointerEvent){if(this.isMoving_(pointerEvent)){this.updateActivePointers_(pointerEvent),this.dragging_=!0;const newEvent=new MapBrowserEvent.A(MapBrowserEventType.A.POINTERDRAG,this.map_,pointerEvent,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(newEvent)}}relayMoveEvent_(pointerEvent){this.originalPointerMoveEvent_=pointerEvent;const dragging=!(!this.down_||!this.isMoving_(pointerEvent));this.dispatchEvent(new MapBrowserEvent.A(MapBrowserEventType.A.POINTERMOVE,this.map_,pointerEvent,dragging))}handleTouchMove_(event){const originalEvent=this.originalPointerMoveEvent_;originalEvent&&!originalEvent.defaultPrevented||"boolean"==typeof event.cancelable&&!0!==event.cancelable||event.preventDefault()}isMoving_(pointerEvent){return this.dragging_||Math.abs(pointerEvent.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(pointerEvent.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,events.JH)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType.A.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,events.JH)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(events.JH),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const ol_MapBrowserEventHandler=MapBrowserEventHandler;var MapEvent=__webpack_require__("./node_modules/ol/MapEvent.js"),MapEventType=__webpack_require__("./node_modules/ol/MapEventType.js");const MapProperty_LAYERGROUP="layergroup",MapProperty_SIZE="size",MapProperty_TARGET="target",MapProperty_VIEW="view";var ol_Object=__webpack_require__("./node_modules/ol/Object.js"),ObjectEventType=__webpack_require__("./node_modules/ol/ObjectEventType.js");const TileState_IDLE=0,TileState_LOADED=2,TileState_ERROR=3,TileState_EMPTY=4;var asserts=__webpack_require__("./node_modules/ol/asserts.js"),obj=__webpack_require__("./node_modules/ol/obj.js");const DROP=1/0;const structs_PriorityQueue=class PriorityQueue{constructor(priorityFunction,keyFunction){this.priorityFunction_=priorityFunction,this.keyFunction_=keyFunction,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,obj.I)(this.queuedElements_)}dequeue(){const elements=this.elements_,priorities=this.priorities_,element=elements[0];1==elements.length?(elements.length=0,priorities.length=0):(elements[0]=elements.pop(),priorities[0]=priorities.pop(),this.siftUp_(0));const elementKey=this.keyFunction_(element);return delete this.queuedElements_[elementKey],element}enqueue(element){(0,asserts.v)(!(this.keyFunction_(element)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const priority=this.priorityFunction_(element);return priority!=DROP&&(this.elements_.push(element),this.priorities_.push(priority),this.queuedElements_[this.keyFunction_(element)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(index){return 2*index+1}getRightChildIndex_(index){return 2*index+2}getParentIndex_(index){return index-1>>1}heapify_(){let i;for(i=(this.elements_.length>>1)-1;i>=0;i--)this.siftUp_(i)}isEmpty(){return 0===this.elements_.length}isKeyQueued(key){return key in this.queuedElements_}isQueued(element){return this.isKeyQueued(this.keyFunction_(element))}siftUp_(index){const elements=this.elements_,priorities=this.priorities_,count=elements.length,element=elements[index],priority=priorities[index],startIndex=index;for(;index<count>>1;){const lIndex=this.getLeftChildIndex_(index),rIndex=this.getRightChildIndex_(index),smallerChildIndex=rIndex<count&&priorities[rIndex]<priorities[lIndex]?rIndex:lIndex;elements[index]=elements[smallerChildIndex],priorities[index]=priorities[smallerChildIndex],index=smallerChildIndex}elements[index]=element,priorities[index]=priority,this.siftDown_(startIndex,index)}siftDown_(startIndex,index){const elements=this.elements_,priorities=this.priorities_,element=elements[index],priority=priorities[index];for(;index>startIndex;){const parentIndex=this.getParentIndex_(index);if(!(priorities[parentIndex]>priority))break;elements[index]=elements[parentIndex],priorities[index]=priorities[parentIndex],index=parentIndex}elements[index]=element,priorities[index]=priority}reprioritize(){const priorityFunction=this.priorityFunction_,elements=this.elements_,priorities=this.priorities_;let index=0;const n=elements.length;let element,i,priority;for(i=0;i<n;++i)element=elements[i],priority=priorityFunction(element),priority==DROP?delete this.queuedElements_[this.keyFunction_(element)]:(priorities[index]=priority,elements[index++]=element);elements.length=index,priorities.length=index,this.heapify_()}};const ol_TileQueue=class TileQueue extends structs_PriorityQueue{constructor(tilePriorityFunction,tileChangeCallback){super(element=>tilePriorityFunction.apply(null,element),element=>element[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=tileChangeCallback,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(element){const added=super.enqueue(element);if(added){element[0].addEventListener(EventType.A.CHANGE,this.boundHandleTileChange_)}return added}getTilesLoading(){return this.tilesLoading_}handleTileChange(event){const tile=event.target,state=tile.getState();if(state===TileState_LOADED||state===TileState_ERROR||state===TileState_EMPTY){state!==TileState_ERROR&&tile.removeEventListener(EventType.A.CHANGE,this.boundHandleTileChange_);const tileKey=tile.getKey();tileKey in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[tileKey],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(maxTotalLoading,maxNewLoads){let newLoads=0;for(;this.tilesLoading_<maxTotalLoading&&newLoads<maxNewLoads&&this.getCount()>0;){const tile=this.dequeue()[0],tileKey=tile.getKey();tile.getState()!==TileState_IDLE||tileKey in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[tileKey]=!0,++this.tilesLoading_,++newLoads,tile.load())}}};var View=__webpack_require__("./node_modules/ol/View.js"),ViewHint=__webpack_require__("./node_modules/ol/ViewHint.js"),array=__webpack_require__("./node_modules/ol/array.js"),console=__webpack_require__("./node_modules/ol/console.js"),css=__webpack_require__("./node_modules/ol/css.js"),dom=__webpack_require__("./node_modules/ol/dom.js"),functions=__webpack_require__("./node_modules/ol/functions.js");class Control extends ol_Object.A{constructor(options){super();const element=options.element;!element||options.target||element.style.pointerEvents||(element.style.pointerEvents="auto"),this.element=element||null,this.target_=null,this.map_=null,this.listenerKeys=[],options.render&&(this.render=options.render),options.target&&this.setTarget(options.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(map){this.map_&&this.element?.remove();for(let i=0,ii=this.listenerKeys.length;i<ii;++i)(0,events.JH)(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=map,map){const target=this.target_??map.getOverlayContainerStopEvent();this.element&&target.appendChild(this.element),this.render!==functions.tV&&this.listenerKeys.push((0,events.KT)(map,MapEventType.A.POSTRENDER,this.render,this)),map.render()}}render(mapEvent){}setTarget(target){this.target_="string"==typeof target?document.getElementById(target):target}}const control_Control=Control;const control_Attribution=class Attribution extends control_Control{constructor(options){options=options||{},super({element:document.createElement("div"),render:options.render,target:options.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===options.collapsed||options.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==options.collapsible,this.collapsible_=void 0===options.collapsible||options.collapsible,this.collapsible_||(this.collapsed_=!1),this.attributions_=options.attributions;const className=void 0!==options.className?options.className:"ol-attribution",tipLabel=void 0!==options.tipLabel?options.tipLabel:"Attributions",expandClassName=void 0!==options.expandClassName?options.expandClassName:className+"-expand",collapseLabel=void 0!==options.collapseLabel?options.collapseLabel:"",collapseClassName=void 0!==options.collapseClassName?options.collapseClassName:className+"-collapse";"string"==typeof collapseLabel?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=collapseLabel,this.collapseLabel_.className=collapseClassName):this.collapseLabel_=collapseLabel;const label=void 0!==options.label?options.label:"i";"string"==typeof label?(this.label_=document.createElement("span"),this.label_.textContent=label,this.label_.className=expandClassName):this.label_=label;const activeLabel=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=tipLabel,this.toggleButton_.appendChild(activeLabel),this.toggleButton_.addEventListener(EventType.A.CLICK,this.handleClick_.bind(this),!1);const cssClasses=className+" "+css.XI+" "+css.$N+(this.collapsed_&&this.collapsible_?" "+css.nT:"")+(this.collapsible_?"":" ol-uncollapsible"),element=this.element;element.className=cssClasses,element.appendChild(this.toggleButton_),element.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(frameState){const layers=this.getMap().getAllLayers(),visibleAttributions=new Set(layers.flatMap(layer=>layer.getAttributions(frameState)));if(void 0!==this.attributions_&&(Array.isArray(this.attributions_)?this.attributions_.forEach(item=>visibleAttributions.add(item)):visibleAttributions.add(this.attributions_)),!this.overrideCollapsible_){const collapsible=!layers.some(layer=>!1===layer.getSource()?.getAttributionsCollapsible());this.setCollapsible(collapsible)}return Array.from(visibleAttributions)}async updateElement_(frameState){if(!frameState)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const attributions=await Promise.all(this.collectSourceAttributions_(frameState).map(attribution=>(0,functions.hq)(()=>attribution))),visible=attributions.length>0;if(this.renderedVisible_!=visible&&(this.element.style.display=visible?"":"none",this.renderedVisible_=visible),!(0,array.aI)(attributions,this.renderedAttributions_)){(0,dom.gS)(this.ulElement_);for(let i=0,ii=attributions.length;i<ii;++i){const element=document.createElement("li");element.innerHTML=attributions[i],this.ulElement_.appendChild(element)}this.renderedAttributions_=attributions}}handleClick_(event){event.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(css.nT),this.collapsed_?(0,dom.fo)(this.collapseLabel_,this.label_):(0,dom.fo)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(collapsible){this.collapsible_!==collapsible&&(this.collapsible_=collapsible,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(collapsed){this.userCollapsed_=collapsed,this.collapsible_&&this.collapsed_!==collapsed&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(mapEvent){this.updateElement_(mapEvent.frameState)}};var easing=__webpack_require__("./node_modules/ol/easing.js");const control_Rotate=class Rotate extends control_Control{constructor(options){options=options||{},super({element:document.createElement("div"),render:options.render,target:options.target});const className=void 0!==options.className?options.className:"ol-rotate",label=void 0!==options.label?options.label:"",compassClassName=void 0!==options.compassClassName?options.compassClassName:"ol-compass";this.label_=null,"string"==typeof label?(this.label_=document.createElement("span"),this.label_.className=compassClassName,this.label_.textContent=label):(this.label_=label,this.label_.classList.add(compassClassName));const tipLabel=options.tipLabel?options.tipLabel:"Reset rotation",button=document.createElement("button");button.className=className+"-reset",button.setAttribute("type","button"),button.title=tipLabel,button.appendChild(this.label_),button.addEventListener(EventType.A.CLICK,this.handleClick_.bind(this),!1);const cssClasses=className+" "+css.XI+" "+css.$N,element=this.element;element.className=cssClasses,element.appendChild(button),this.callResetNorth_=options.resetNorth?options.resetNorth:void 0,this.duration_=void 0!==options.duration?options.duration:250,this.autoHide_=void 0===options.autoHide||options.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(css.Si)}handleClick_(event){event.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const view=this.getMap().getView();if(!view)return;const rotation=view.getRotation();void 0!==rotation&&(this.duration_>0&&rotation%(2*Math.PI)!=0?view.animate({rotation:0,duration:this.duration_,easing:easing.vT}):view.setRotation(0))}render(mapEvent){const frameState=mapEvent.frameState;if(!frameState)return;const rotation=frameState.viewState.rotation;if(rotation!=this.rotation_){const transform="rotate("+rotation+"rad)";if(this.autoHide_){const contains=this.element.classList.contains(css.Si);contains||0!==rotation?contains&&0!==rotation&&this.element.classList.remove(css.Si):this.element.classList.add(css.Si)}this.label_.style.transform=transform}this.rotation_=rotation}};const control_Zoom=class Zoom extends control_Control{constructor(options){options=options||{},super({element:document.createElement("div"),target:options.target});const className=void 0!==options.className?options.className:"ol-zoom",delta=void 0!==options.delta?options.delta:1,zoomInClassName=void 0!==options.zoomInClassName?options.zoomInClassName:className+"-in",zoomOutClassName=void 0!==options.zoomOutClassName?options.zoomOutClassName:className+"-out",zoomInLabel=void 0!==options.zoomInLabel?options.zoomInLabel:"+",zoomOutLabel=void 0!==options.zoomOutLabel?options.zoomOutLabel:"",zoomInTipLabel=void 0!==options.zoomInTipLabel?options.zoomInTipLabel:"Zoom in",zoomOutTipLabel=void 0!==options.zoomOutTipLabel?options.zoomOutTipLabel:"Zoom out",inElement=document.createElement("button");inElement.className=zoomInClassName,inElement.setAttribute("type","button"),inElement.title=zoomInTipLabel,inElement.appendChild("string"==typeof zoomInLabel?document.createTextNode(zoomInLabel):zoomInLabel),inElement.addEventListener(EventType.A.CLICK,this.handleClick_.bind(this,delta),!1);const outElement=document.createElement("button");outElement.className=zoomOutClassName,outElement.setAttribute("type","button"),outElement.title=zoomOutTipLabel,outElement.appendChild("string"==typeof zoomOutLabel?document.createTextNode(zoomOutLabel):zoomOutLabel),outElement.addEventListener(EventType.A.CLICK,this.handleClick_.bind(this,-delta),!1);const cssClasses=className+" "+css.XI+" "+css.$N,element=this.element;element.className=cssClasses,element.appendChild(inElement),element.appendChild(outElement),this.duration_=void 0!==options.duration?options.duration:250}handleClick_(delta,event){event.preventDefault(),this.zoomByDelta_(delta)}zoomByDelta_(delta){const view=this.getMap().getView();if(!view)return;const currentZoom=view.getZoom();if(void 0!==currentZoom){const newZoom=view.getConstrainedZoom(currentZoom+delta);this.duration_>0?(view.getAnimating()&&view.cancelAnimations(),view.animate({zoom:newZoom,duration:this.duration_,easing:easing.vT})):view.setZoom(newZoom)}}};var extent=__webpack_require__("./node_modules/ol/extent.js");const ol_Kinetic=class Kinetic{constructor(decay,minVelocity,delay){this.decay_=decay,this.minVelocity_=minVelocity,this.delay_=delay,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(x,y){this.points_.push(x,y,Date.now())}end(){if(this.points_.length<6)return!1;const delay=Date.now()-this.delay_,lastIndex=this.points_.length-3;if(this.points_[lastIndex+2]<delay)return!1;let firstIndex=lastIndex-3;for(;firstIndex>0&&this.points_[firstIndex+2]>delay;)firstIndex-=3;const duration=this.points_[lastIndex+2]-this.points_[firstIndex+2];if(duration<1e3/60)return!1;const dx=this.points_[lastIndex]-this.points_[firstIndex],dy=this.points_[lastIndex+1]-this.points_[firstIndex+1];return this.angle_=Math.atan2(dy,dx),this.initialVelocity_=Math.sqrt(dx*dx+dy*dy)/duration,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}};var Interaction=__webpack_require__("./node_modules/ol/interaction/Interaction.js");class DoubleClickZoom extends Interaction.Ay{constructor(options){super(),options=options||{},this.delta_=options.delta?options.delta:1,this.duration_=void 0!==options.duration?options.duration:250}handleEvent(mapBrowserEvent){let stopEvent=!1;if(mapBrowserEvent.type==MapBrowserEventType.A.DBLCLICK){const browserEvent=mapBrowserEvent.originalEvent,map=mapBrowserEvent.map,anchor=mapBrowserEvent.coordinate,delta=browserEvent.shiftKey?-this.delta_:this.delta_,view=map.getView();(0,Interaction.D2)(view,delta,anchor,this.duration_),browserEvent.preventDefault(),stopEvent=!0}return!stopEvent}}const interaction_DoubleClickZoom=DoubleClickZoom;var ol_coordinate=__webpack_require__("./node_modules/ol/coordinate.js"),events_condition=__webpack_require__("./node_modules/ol/events/condition.js"),Pointer=__webpack_require__("./node_modules/ol/interaction/Pointer.js");class DragPan extends Pointer.A{constructor(options){super({stopDown:functions.W8}),options=options||{},this.kinetic_=options.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const condition=options.condition?options.condition:(0,events_condition.Q7)(events_condition.TS,events_condition.fs);this.condition_=options.onFocusOnly?(0,events_condition.Q7)(events_condition.eL,condition):condition,this.noKinetic_=!1}handleDragEvent(mapBrowserEvent){const map=mapBrowserEvent.map;this.panning_||(this.panning_=!0,map.getView().beginInteraction());const targetPointers=this.targetPointers,centroid=map.getEventPixel((0,Pointer.v)(targetPointers));if(targetPointers.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(centroid[0],centroid[1]),this.lastCentroid){const delta=[this.lastCentroid[0]-centroid[0],centroid[1]-this.lastCentroid[1]],view=mapBrowserEvent.map.getView();(0,ol_coordinate.hs)(delta,view.getResolution()),(0,ol_coordinate.e$)(delta,view.getRotation()),view.adjustCenterInternal(delta)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=centroid,this.lastPointersCount_=targetPointers.length,mapBrowserEvent.originalEvent.preventDefault()}handleUpEvent(mapBrowserEvent){const map=mapBrowserEvent.map,view=map.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const distance=this.kinetic_.getDistance(),angle=this.kinetic_.getAngle(),center=view.getCenterInternal(),centerpx=map.getPixelFromCoordinateInternal(center),dest=map.getCoordinateFromPixelInternal([centerpx[0]-distance*Math.cos(angle),centerpx[1]-distance*Math.sin(angle)]);view.animateInternal({center:view.getConstrainedCenter(dest),duration:500,easing:easing.vT})}return this.panning_&&(this.panning_=!1,view.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(mapBrowserEvent){if(this.targetPointers.length>0&&this.condition_(mapBrowserEvent)){const view=mapBrowserEvent.map.getView();return this.lastCentroid=null,view.getAnimating()&&view.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const interaction_DragPan=DragPan;var rotationconstraint=__webpack_require__("./node_modules/ol/rotationconstraint.js");class DragRotate extends Pointer.A{constructor(options){options=options||{},super({stopDown:functions.W8}),this.condition_=options.condition?options.condition:events_condition.IO,this.lastAngle_=void 0,this.duration_=void 0!==options.duration?options.duration:250}handleDragEvent(mapBrowserEvent){if(!(0,events_condition.A4)(mapBrowserEvent))return;const map=mapBrowserEvent.map,view=map.getView();if(view.getConstraints().rotation===rotationconstraint.b8)return;const size=map.getSize(),offset=mapBrowserEvent.pixel,theta=Math.atan2(size[1]/2-offset[1],offset[0]-size[0]/2);if(void 0!==this.lastAngle_){const delta=theta-this.lastAngle_;view.adjustRotationInternal(-delta)}this.lastAngle_=theta}handleUpEvent(mapBrowserEvent){if(!(0,events_condition.A4)(mapBrowserEvent))return!0;return mapBrowserEvent.map.getView().endInteraction(this.duration_),!1}handleDownEvent(mapBrowserEvent){if(!(0,events_condition.A4)(mapBrowserEvent))return!1;if((0,events_condition.at)(mapBrowserEvent)&&this.condition_(mapBrowserEvent)){return mapBrowserEvent.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}}const interaction_DragRotate=DragRotate;var Event=__webpack_require__("./node_modules/ol/events/Event.js"),Disposable=__webpack_require__("./node_modules/ol/Disposable.js"),Polygon=__webpack_require__("./node_modules/ol/geom/Polygon.js");class RenderBox extends Disposable.A{constructor(className){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+className,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const startPixel=this.startPixel_,endPixel=this.endPixel_,style=this.element_.style;style.left=Math.min(startPixel[0],endPixel[0])+"px",style.top=Math.min(startPixel[1],endPixel[1])+"px",style.width=Math.abs(endPixel[0]-startPixel[0])+"px",style.height=Math.abs(endPixel[1]-startPixel[1])+"px"}setMap(map){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const style=this.element_.style;style.left="inherit",style.top="inherit",style.width="inherit",style.height="inherit"}this.map_=map,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(startPixel,endPixel){this.startPixel_=startPixel,this.endPixel_=endPixel,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const startPixel=this.startPixel_,endPixel=this.endPixel_,coordinates=[startPixel,[startPixel[0],endPixel[1]],endPixel,[endPixel[0],startPixel[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);coordinates[4]=coordinates[0].slice(),this.geometry_?this.geometry_.setCoordinates([coordinates]):this.geometry_=new Polygon.Ay([coordinates])}getGeometry(){return this.geometry_}}const Box=RenderBox,DragBoxEventType_BOXSTART="boxstart",DragBoxEventType_BOXDRAG="boxdrag",DragBoxEventType_BOXEND="boxend",DragBoxEventType_BOXCANCEL="boxcancel";class DragBoxEvent extends Event.Ay{constructor(type,coordinate,mapBrowserEvent){super(type),this.coordinate=coordinate,this.mapBrowserEvent=mapBrowserEvent}}class DragBox extends Pointer.A{constructor(options){super(),this.on,this.once,this.un,options=options??{},this.box_=new Box(options.className||"ol-dragbox"),this.minArea_=options.minArea??64,options.onBoxEnd&&(this.onBoxEnd=options.onBoxEnd),this.startPixel_=null,this.condition_=options.condition??events_condition.at,this.boxEndCondition_=options.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(mapBrowserEvent,startPixel,endPixel){const width=endPixel[0]-startPixel[0],height=endPixel[1]-startPixel[1];return width*width+height*height>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(mapBrowserEvent){this.startPixel_&&(this.box_.setPixels(this.startPixel_,mapBrowserEvent.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType_BOXDRAG,mapBrowserEvent.coordinate,mapBrowserEvent)))}handleUpEvent(mapBrowserEvent){if(!this.startPixel_)return!1;const completeBox=this.boxEndCondition_(mapBrowserEvent,this.startPixel_,mapBrowserEvent.pixel);return completeBox&&this.onBoxEnd(mapBrowserEvent),this.dispatchEvent(new DragBoxEvent(completeBox?DragBoxEventType_BOXEND:DragBoxEventType_BOXCANCEL,mapBrowserEvent.coordinate,mapBrowserEvent)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(mapBrowserEvent){return!!this.condition_(mapBrowserEvent)&&(this.startPixel_=mapBrowserEvent.pixel,this.box_.setMap(mapBrowserEvent.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType_BOXSTART,mapBrowserEvent.coordinate,mapBrowserEvent)),!0)}onBoxEnd(event){}setActive(active){active||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new DragBoxEvent(DragBoxEventType_BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(active)}setMap(map){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new DragBoxEvent(DragBoxEventType_BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(map)}}const interaction_DragBox=DragBox;const interaction_DragZoom=class DragZoom extends interaction_DragBox{constructor(options){super({condition:(options=options||{}).condition?options.condition:events_condition.Kg,className:options.className||"ol-dragzoom",minArea:options.minArea}),this.duration_=void 0!==options.duration?options.duration:200,this.out_=void 0!==options.out&&options.out}onBoxEnd(event){const view=this.getMap().getView();let geometry=this.getGeometry();if(this.out_){const rotatedExtent=view.rotatedExtentForGeometry(geometry),resolution=view.getResolutionForExtentInternal(rotatedExtent),factor=view.getResolution()/resolution;geometry=geometry.clone(),geometry.scale(factor*factor)}view.fitInternal(geometry,{duration:this.duration_,easing:easing.vT})}},Key_LEFT="ArrowLeft",Key_UP="ArrowUp",Key_RIGHT="ArrowRight",Key_DOWN="ArrowDown";class KeyboardPan extends Interaction.Ay{constructor(options){super(),options=options||{},this.defaultCondition_=function(mapBrowserEvent){return(0,events_condition.TS)(mapBrowserEvent)&&(0,events_condition.tE)(mapBrowserEvent)},this.condition_=void 0!==options.condition?options.condition:this.defaultCondition_,this.duration_=void 0!==options.duration?options.duration:100,this.pixelDelta_=void 0!==options.pixelDelta?options.pixelDelta:128}handleEvent(mapBrowserEvent){let stopEvent=!1;if(mapBrowserEvent.type==EventType.A.KEYDOWN){const keyEvent=mapBrowserEvent.originalEvent,key=keyEvent.key;if(this.condition_(mapBrowserEvent)&&(key==Key_DOWN||key==Key_LEFT||key==Key_RIGHT||key==Key_UP)){const view=mapBrowserEvent.map.getView(),mapUnitsDelta=view.getResolution()*this.pixelDelta_;let deltaX=0,deltaY=0;key==Key_DOWN?deltaY=-mapUnitsDelta:key==Key_LEFT?deltaX=-mapUnitsDelta:key==Key_RIGHT?deltaX=mapUnitsDelta:deltaY=mapUnitsDelta;const delta=[deltaX,deltaY];(0,ol_coordinate.e$)(delta,view.getRotation()),(0,Interaction.e4)(view,delta,this.duration_),keyEvent.preventDefault(),stopEvent=!0}}return!stopEvent}}const interaction_KeyboardPan=KeyboardPan;class KeyboardZoom extends Interaction.Ay{constructor(options){super(),options=options||{},this.condition_=options.condition?options.condition:function(mapBrowserEvent){return!(0,events_condition.GB)(mapBrowserEvent)&&(0,events_condition.tE)(mapBrowserEvent)},this.delta_=options.delta?options.delta:1,this.duration_=void 0!==options.duration?options.duration:100}handleEvent(mapBrowserEvent){let stopEvent=!1;if(mapBrowserEvent.type==EventType.A.KEYDOWN||mapBrowserEvent.type==EventType.A.KEYPRESS){const keyEvent=mapBrowserEvent.originalEvent,key=keyEvent.key;if(this.condition_(mapBrowserEvent)&&("+"===key||"-"===key)){const map=mapBrowserEvent.map,delta="+"===key?this.delta_:-this.delta_,view=map.getView();(0,Interaction.D2)(view,delta,void 0,this.duration_),keyEvent.preventDefault(),stopEvent=!0}}return!stopEvent}}const interaction_KeyboardZoom=KeyboardZoom;var math=__webpack_require__("./node_modules/ol/math.js");class MouseWheelZoom extends Interaction.Ay{constructor(options){super(options=options||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==options.maxDelta?options.maxDelta:1,this.duration_=void 0!==options.duration?options.duration:250,this.timeout_=void 0!==options.timeout?options.timeout:80,this.useAnchor_=void 0===options.useAnchor||options.useAnchor,this.constrainResolution_=void 0!==options.constrainResolution&&options.constrainResolution;const condition=options.condition?options.condition:events_condition.Gk;this.condition_=options.onFocusOnly?(0,events_condition.Q7)(events_condition.eL,condition):condition,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const map=this.getMap();if(!map)return;map.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?map.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(mapBrowserEvent){if(!this.condition_(mapBrowserEvent))return!0;if(mapBrowserEvent.type!==EventType.A.WHEEL)return!0;const map=mapBrowserEvent.map,wheelEvent=mapBrowserEvent.originalEvent;wheelEvent.preventDefault(),this.useAnchor_&&(this.lastAnchor_=mapBrowserEvent.pixel);let delta=wheelEvent.deltaY;switch(wheelEvent.deltaMode){case WheelEvent.DOM_DELTA_LINE:delta*=40;break;case WheelEvent.DOM_DELTA_PAGE:delta*=300}if(0===delta)return!1;this.lastDelta_=delta;const now=Date.now();void 0===this.startTime_&&(this.startTime_=now),(!this.mode_||now-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(delta)<4?"trackpad":"wheel");const view=map.getView();if("trackpad"===this.mode_&&!view.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(view.getAnimating()&&view.cancelAnimations(),view.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),view.adjustZoom(-delta/this.deltaPerZoom_,this.lastAnchor_?map.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=now,!1;this.totalDelta_+=delta;const timeLeft=Math.max(this.timeout_-(now-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,map),timeLeft),!1}handleWheelZoom_(map){const view=map.getView();view.getAnimating()&&view.cancelAnimations();let delta=-(0,math.qE)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(view.getConstrainResolution()||this.constrainResolution_)&&(delta=delta?delta>0?1:-1:0),(0,Interaction.D2)(view,delta,this.lastAnchor_?map.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(useAnchor){this.useAnchor_=useAnchor,useAnchor||(this.lastAnchor_=null)}}const interaction_MouseWheelZoom=MouseWheelZoom;class PinchRotate extends Pointer.A{constructor(options){const pointerOptions=options=options||{};pointerOptions.stopDown||(pointerOptions.stopDown=functions.W8),super(pointerOptions),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==options.threshold?options.threshold:.3,this.duration_=void 0!==options.duration?options.duration:250}handleDragEvent(mapBrowserEvent){let rotationDelta=0;const touch0=this.targetPointers[0],touch1=this.targetPointers[1],angle=Math.atan2(touch1.clientY-touch0.clientY,touch1.clientX-touch0.clientX);if(void 0!==this.lastAngle_){const delta=angle-this.lastAngle_;this.rotationDelta_+=delta,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),rotationDelta=delta}this.lastAngle_=angle;const map=mapBrowserEvent.map,view=map.getView();view.getConstraints().rotation!==rotationconstraint.b8&&(this.anchor_=map.getCoordinateFromPixelInternal(map.getEventPixel((0,Pointer.v)(this.targetPointers))),this.rotating_&&(map.render(),view.adjustRotationInternal(rotationDelta,this.anchor_)))}handleUpEvent(mapBrowserEvent){if(this.targetPointers.length<2){return mapBrowserEvent.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(mapBrowserEvent){if(this.targetPointers.length>=2){const map=mapBrowserEvent.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||map.getView().beginInteraction(),!0}return!1}}const interaction_PinchRotate=PinchRotate;class PinchZoom extends Pointer.A{constructor(options){const pointerOptions=options=options||{};pointerOptions.stopDown||(pointerOptions.stopDown=functions.W8),super(pointerOptions),this.anchor_=null,this.duration_=void 0!==options.duration?options.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(mapBrowserEvent){let scaleDelta=1;const touch0=this.targetPointers[0],touch1=this.targetPointers[1],dx=touch0.clientX-touch1.clientX,dy=touch0.clientY-touch1.clientY,distance=Math.sqrt(dx*dx+dy*dy);void 0!==this.lastDistance_&&(scaleDelta=this.lastDistance_/distance),this.lastDistance_=distance;const map=mapBrowserEvent.map,view=map.getView();1!=scaleDelta&&(this.lastScaleDelta_=scaleDelta),this.anchor_=map.getCoordinateFromPixelInternal(map.getEventPixel((0,Pointer.v)(this.targetPointers))),map.render(),view.adjustResolutionInternal(scaleDelta,this.anchor_)}handleUpEvent(mapBrowserEvent){if(this.targetPointers.length<2){const view=mapBrowserEvent.map.getView(),direction=this.lastScaleDelta_>1?1:-1;return view.endInteraction(this.duration_,direction),!1}return!0}handleDownEvent(mapBrowserEvent){if(this.targetPointers.length>=2){const map=mapBrowserEvent.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||map.getView().beginInteraction(),!0}return!1}}const interaction_PinchZoom=PinchZoom;var util=__webpack_require__("./node_modules/ol/util.js"),Base=__webpack_require__("./node_modules/ol/layer/Base.js");const GroupEventType_ADDLAYER="addlayer",GroupEventType_REMOVELAYER="removelayer";class GroupEvent extends Event.Ay{constructor(type,layer){super(type),this.layer=layer}}const Property_LAYERS="layers";class LayerGroup extends Base.A{constructor(options){options=options||{};const baseOptions=Object.assign({},options);delete baseOptions.layers;let layers=options.layers;super(baseOptions),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property_LAYERS,this.handleLayersChanged_),layers?Array.isArray(layers)?layers=new Collection.A(layers.slice(),{unique:!0}):(0,asserts.v)("function"==typeof layers.getArray,"Expected `layers` to be an array or a `Collection`"):layers=new Collection.A(void 0,{unique:!0}),this.setLayers(layers)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(events.JH),this.layersListenerKeys_.length=0;const layers=this.getLayers();this.layersListenerKeys_.push((0,events.KT)(layers,CollectionEventType.A.ADD,this.handleLayersAdd_,this),(0,events.KT)(layers,CollectionEventType.A.REMOVE,this.handleLayersRemove_,this));for(const id in this.listenerKeys_)this.listenerKeys_[id].forEach(events.JH);(0,obj.I)(this.listenerKeys_);const layersArray=layers.getArray();for(let i=0,ii=layersArray.length;i<ii;i++){const layer=layersArray[i];this.registerLayerListeners_(layer),this.dispatchEvent(new GroupEvent(GroupEventType_ADDLAYER,layer))}this.changed()}registerLayerListeners_(layer){const listenerKeys=[(0,events.KT)(layer,ObjectEventType.A.PROPERTYCHANGE,this.handleLayerChange_,this),(0,events.KT)(layer,EventType.A.CHANGE,this.handleLayerChange_,this)];layer instanceof LayerGroup&&listenerKeys.push((0,events.KT)(layer,GroupEventType_ADDLAYER,this.handleLayerGroupAdd_,this),(0,events.KT)(layer,GroupEventType_REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,util.v6)(layer)]=listenerKeys}handleLayerGroupAdd_(event){this.dispatchEvent(new GroupEvent(GroupEventType_ADDLAYER,event.layer))}handleLayerGroupRemove_(event){this.dispatchEvent(new GroupEvent(GroupEventType_REMOVELAYER,event.layer))}handleLayersAdd_(collectionEvent){const layer=collectionEvent.element;this.registerLayerListeners_(layer),this.dispatchEvent(new GroupEvent(GroupEventType_ADDLAYER,layer)),this.changed()}handleLayersRemove_(collectionEvent){const layer=collectionEvent.element,key=(0,util.v6)(layer);this.listenerKeys_[key].forEach(events.JH),delete this.listenerKeys_[key],this.dispatchEvent(new GroupEvent(GroupEventType_REMOVELAYER,layer)),this.changed()}getLayers(){return this.get(Property_LAYERS)}setLayers(layers){const collection=this.getLayers();if(collection){const currentLayers=collection.getArray();for(let i=0,ii=currentLayers.length;i<ii;++i)this.dispatchEvent(new GroupEvent(GroupEventType_REMOVELAYER,currentLayers[i]))}this.set(Property_LAYERS,layers)}getLayersArray(array){return array=void 0!==array?array:[],this.getLayers().forEach(function(layer){layer.getLayersArray(array)}),array}getLayerStatesArray(dest){const states=void 0!==dest?dest:[],pos=states.length;this.getLayers().forEach(function(layer){layer.getLayerStatesArray(states)});const ownLayerState=this.getLayerState();let defaultZIndex=ownLayerState.zIndex;dest||void 0!==ownLayerState.zIndex||(defaultZIndex=0);for(let i=pos,ii=states.length;i<ii;i++){const layerState=states[i];layerState.opacity*=ownLayerState.opacity,layerState.visible=layerState.visible&&ownLayerState.visible,layerState.maxResolution=Math.min(layerState.maxResolution,ownLayerState.maxResolution),layerState.minResolution=Math.max(layerState.minResolution,ownLayerState.minResolution),layerState.minZoom=Math.max(layerState.minZoom,ownLayerState.minZoom),layerState.maxZoom=Math.min(layerState.maxZoom,ownLayerState.maxZoom),void 0!==ownLayerState.extent&&(void 0!==layerState.extent?layerState.extent=(0,extent._N)(layerState.extent,ownLayerState.extent):layerState.extent=ownLayerState.extent),void 0===layerState.zIndex&&(layerState.zIndex=defaultZIndex)}return states}getSourceState(){return"ready"}}const Group=LayerGroup;var Layer=__webpack_require__("./node_modules/ol/layer/Layer.js"),proj=__webpack_require__("./node_modules/ol/proj.js"),render_EventType=__webpack_require__("./node_modules/ol/render/EventType.js"),BaseVector=__webpack_require__("./node_modules/ol/layer/BaseVector.js"),render_Event=__webpack_require__("./node_modules/ol/render/Event.js"),canvas=__webpack_require__("./node_modules/ol/render/canvas.js"),ol_transform=__webpack_require__("./node_modules/ol/transform.js"),IconImageCache=__webpack_require__("./node_modules/ol/style/IconImageCache.js");class MapRenderer extends Disposable.A{constructor(map){super(),this.map_=map}dispatchRenderEvent(type,frameState){(0,util.b0)()}calculateMatrices2D(frameState){const viewState=frameState.viewState,coordinateToPixelTransform=frameState.coordinateToPixelTransform,pixelToCoordinateTransform=frameState.pixelToCoordinateTransform;(0,ol_transform.Zz)(coordinateToPixelTransform,frameState.size[0]/2,frameState.size[1]/2,1/viewState.resolution,-1/viewState.resolution,-viewState.rotation,-viewState.center[0],-viewState.center[1]),(0,ol_transform.T9)(pixelToCoordinateTransform,coordinateToPixelTransform)}forEachFeatureAtCoordinate(coordinate,frameState,hitTolerance,checkWrapped,callback,thisArg,layerFilter,thisArg2){let result;const viewState=frameState.viewState;function forEachFeatureAtCoordinate(managed,feature,layer,geometry){return callback.call(thisArg,feature,managed?layer:null,geometry)}const projection=viewState.projection,translatedCoordinate=(0,ol_coordinate.Li)(coordinate.slice(),projection),offsets=[[0,0]];if(projection.canWrapX()&&checkWrapped){const projectionExtent=projection.getExtent(),worldWidth=(0,extent.RG)(projectionExtent);offsets.push([-worldWidth,0],[worldWidth,0])}const layerStates=frameState.layerStatesArray,numLayers=layerStates.length,matches=[],tmpCoord=[];for(let i=0;i<offsets.length;i++)for(let j=numLayers-1;j>=0;--j){const layerState=layerStates[j],layer=layerState.layer;if(layer.hasRenderer()&&(0,Layer.l)(layerState,viewState)&&layerFilter.call(thisArg2,layer)){const layerRenderer=layer.getRenderer(),source=layer.getSource();if(layerRenderer&&source){const coordinates=source.getWrapX()?translatedCoordinate:coordinate,callback=forEachFeatureAtCoordinate.bind(null,layerState.managed);tmpCoord[0]=coordinates[0]+offsets[i][0],tmpCoord[1]=coordinates[1]+offsets[i][1],result=layerRenderer.forEachFeatureAtCoordinate(tmpCoord,frameState,hitTolerance,callback,matches)}if(result)return result}}if(0===matches.length)return;const order=1/matches.length;return matches.forEach((m,i)=>m.distanceSq+=i*order),matches.sort((a,b)=>a.distanceSq-b.distanceSq),matches.some(m=>result=m.callback(m.feature,m.layer,m.geometry)),result}hasFeatureAtCoordinate(coordinate,frameState,hitTolerance,checkWrapped,layerFilter,thisArg){return void 0!==this.forEachFeatureAtCoordinate(coordinate,frameState,hitTolerance,checkWrapped,functions.rT,this,layerFilter,thisArg)}getMap(){return this.map_}renderFrame(frameState){(0,util.b0)()}scheduleExpireIconCache(frameState){IconImageCache.ue.canExpireCache()&&frameState.postRenderFunctions.push(expireIconCache)}}function expireIconCache(map,frameState){IconImageCache.ue.expire()}const Map=MapRenderer;const Composite=class CompositeMapRenderer extends Map{constructor(map){super(map),this.fontChangeListenerKey_=(0,events.KT)(canvas.yY,ObjectEventType.A.PROPERTYCHANGE,map.redrawText,map),this.element_=has.Wl?(0,dom.mH)():document.createElement("div");const style=this.element_.style;style.position="absolute",style.width="100%",style.height="100%",style.zIndex="0",this.element_.className=css.XI+" ol-layers";const container=map.getViewport();container&&container.insertBefore(this.element_,container.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(type,frameState){const map=this.getMap();if(map.hasListener(type)){const event=new render_Event.A(type,void 0,frameState);map.dispatchEvent(event)}}disposeInternal(){(0,events.JH)(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(frameState){if(!frameState)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(frameState),this.dispatchRenderEvent(render_EventType.A.PRECOMPOSE,frameState);const layerStatesArray=frameState.layerStatesArray.sort((a,b)=>a.zIndex-b.zIndex);layerStatesArray.some(layerState=>layerState.layer instanceof BaseVector.A&&layerState.layer.getDeclutter())&&(frameState.declutter={});const viewState=frameState.viewState;this.children_.length=0;const renderedLayerStates=[];let previousElement=null;for(let i=0,ii=layerStatesArray.length;i<ii;++i){const layerState=layerStatesArray[i];frameState.layerIndex=i;const layer=layerState.layer,sourceState=layer.getSourceState();if(!(0,Layer.l)(layerState,viewState)||"ready"!=sourceState&&"undefined"!=sourceState){layer.unrender();continue}const element=layer.render(frameState,previousElement);element&&(element!==previousElement&&(this.children_.push(element),previousElement=element),renderedLayerStates.push(layerState))}this.declutter(frameState,renderedLayerStates),(0,dom.WM)(this.element_,this.children_);const mapCanvas=this.getMap().getTargetElement();if((0,dom.rB)(mapCanvas)){const mapContext=mapCanvas.getContext("2d");for(const container of this.children_){const canvas=container.firstElementChild||container,backgroundColor=container.style.backgroundColor;if(backgroundColor&&(!(0,dom.rB)(canvas)||canvas.width>0)&&(mapContext.fillStyle=backgroundColor,mapContext.fillRect(0,0,mapCanvas.width,mapCanvas.height)),(0,dom.rB)(canvas)&&canvas.width>0){const opacity=container.style.opacity||canvas.style.opacity;mapContext.globalAlpha=""===opacity?1:Number(opacity);const transform=canvas.style.transform;if(transform)mapContext.setTransform(...(0,ol_transform.sH)(transform));else{const w=parseFloat(canvas.style.width)/canvas.width,h=parseFloat(canvas.style.height)/canvas.height;mapContext.setTransform(w,0,0,h,0,0)}mapContext.drawImage(canvas,0,0)}}mapContext.globalAlpha=1,mapContext.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(render_EventType.A.POSTCOMPOSE,frameState),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(frameState)}declutter(frameState,layerStates){if(frameState.declutter){for(let i=layerStates.length-1;i>=0;--i){const layerState=layerStates[i],layer=layerState.layer;layer.getDeclutter()&&layer.renderDeclutter(frameState,layerState)}layerStates.forEach(layerState=>layerState.layer.renderDeferred(frameState))}}};var ol_size=__webpack_require__("./node_modules/ol/size.js");function removeLayerMapProperty(layer){layer instanceof Layer.A?layer.setMapInternal(null):layer instanceof Group&&layer.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(layer,map){if(layer instanceof Layer.A)layer.setMapInternal(map);else if(layer instanceof Group){const layers=layer.getLayers().getArray();for(let i=0,ii=layers.length;i<ii;++i)setLayerMapProperty(layers[i],map)}}class Map_Map extends ol_Object.A{constructor(options){super(),options=options||{},this.on,this.once,this.un;const optionsInternal=function createOptionsInternal(options){let keyboardEventTarget=null;void 0!==options.keyboardEventTarget&&(keyboardEventTarget="string"==typeof options.keyboardEventTarget?document.getElementById(options.keyboardEventTarget):options.keyboardEventTarget);const values={},layerGroup=options.layers&&"function"==typeof options.layers.getLayers?options.layers:new Group({layers:options.layers});let controls,interactions,overlays;values[MapProperty_LAYERGROUP]=layerGroup,values[MapProperty_TARGET]=options.target,values[MapProperty_VIEW]=options.view instanceof View.Ay?options.view:new View.Ay,void 0!==options.controls&&(Array.isArray(options.controls)?controls=new Collection.A(options.controls.slice()):((0,asserts.v)("function"==typeof options.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),controls=options.controls));void 0!==options.interactions&&(Array.isArray(options.interactions)?interactions=new Collection.A(options.interactions.slice()):((0,asserts.v)("function"==typeof options.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),interactions=options.interactions));void 0!==options.overlays?Array.isArray(options.overlays)?overlays=new Collection.A(options.overlays.slice()):((0,asserts.v)("function"==typeof options.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),overlays=options.overlays):overlays=new Collection.A;return{controls,interactions,keyboardEventTarget,overlays,values}}(options);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==options.maxTilesLoading?options.maxTilesLoading:16,this.pixelRatio_=void 0!==options.pixelRatio?options.pixelRatio:has.cr,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,ol_transform.vt)(),this.pixelToCoordinateTransform_=(0,ol_transform.vt)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,has.Wl||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=options.moveTolerance,this.keyboardEventTarget_=optionsInternal.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,has.Wl||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=optionsInternal.controls||(has.Wl?new Collection.A:function defaults(options){options=options||{};const controls=new Collection.A;return(void 0===options.zoom||options.zoom)&&controls.push(new control_Zoom(options.zoomOptions)),(void 0===options.rotate||options.rotate)&&controls.push(new control_Rotate(options.rotateOptions)),(void 0===options.attribution||options.attribution)&&controls.push(new control_Attribution(options.attributionOptions)),controls}()),this.interactions=optionsInternal.interactions||(has.Wl?new Collection.A:function defaults_defaults(options){options=options||{};const interactions=new Collection.A,kinetic=new ol_Kinetic(-.005,.05,100);return(void 0===options.altShiftDragRotate||options.altShiftDragRotate)&&interactions.push(new interaction_DragRotate),(void 0===options.doubleClickZoom||options.doubleClickZoom)&&interactions.push(new interaction_DoubleClickZoom({delta:options.zoomDelta,duration:options.zoomDuration})),(void 0===options.dragPan||options.dragPan)&&interactions.push(new interaction_DragPan({onFocusOnly:options.onFocusOnly,kinetic})),(void 0===options.pinchRotate||options.pinchRotate)&&interactions.push(new interaction_PinchRotate),(void 0===options.pinchZoom||options.pinchZoom)&&interactions.push(new interaction_PinchZoom({duration:options.zoomDuration})),(void 0===options.keyboard||options.keyboard)&&(interactions.push(new interaction_KeyboardPan),interactions.push(new interaction_KeyboardZoom({delta:options.zoomDelta,duration:options.zoomDuration}))),(void 0===options.mouseWheelZoom||options.mouseWheelZoom)&&interactions.push(new interaction_MouseWheelZoom({onFocusOnly:options.onFocusOnly,duration:options.zoomDuration})),(void 0===options.shiftDragZoom||options.shiftDragZoom)&&interactions.push(new interaction_DragZoom({duration:options.zoomDuration})),interactions}({onFocusOnly:!0})),this.overlays_=optionsInternal.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new ol_TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty_LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty_VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty_SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty_TARGET,this.handleTargetChanged_),this.setProperties(optionsInternal.values);const map=this;!options.view||options.view instanceof View.Ay||options.view.then(function(viewOptions){map.setView(new View.Ay(viewOptions))}),this.controls.addEventListener(CollectionEventType.A.ADD,event=>{event.element.setMap(this)}),this.controls.addEventListener(CollectionEventType.A.REMOVE,event=>{event.element.setMap(null)}),this.interactions.addEventListener(CollectionEventType.A.ADD,event=>{event.element.setMap(this)}),this.interactions.addEventListener(CollectionEventType.A.REMOVE,event=>{event.element.setMap(null)}),this.overlays_.addEventListener(CollectionEventType.A.ADD,event=>{this.addOverlayInternal_(event.element)}),this.overlays_.addEventListener(CollectionEventType.A.REMOVE,event=>{const id=event.element.getId();void 0!==id&&delete this.overlayIdIndex_[id.toString()],event.element.setMap(null)}),this.controls.forEach(control=>{control.setMap(this)}),this.interactions.forEach(interaction=>{interaction.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(control){this.getControls().push(control)}addInteraction(interaction){this.getInteractions().push(interaction)}addLayer(layer){this.getLayerGroup().getLayers().push(layer)}handleLayerAdd_(event){setLayerMapProperty(event.layer,this)}addOverlay(overlay){this.getOverlays().push(overlay)}addOverlayInternal_(overlay){const id=overlay.getId();void 0!==id&&(this.overlayIdIndex_[id.toString()]=overlay),overlay.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(pixel,callback,options){if(!this.frameState_||!this.renderer_)return;const coordinate=this.getCoordinateFromPixelInternal(pixel),hitTolerance=void 0!==(options=void 0!==options?options:{}).hitTolerance?options.hitTolerance:0,layerFilter=void 0!==options.layerFilter?options.layerFilter:functions.rT,checkWrapped=!1!==options.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(coordinate,this.frameState_,hitTolerance,checkWrapped,callback,null,layerFilter,null)}getFeaturesAtPixel(pixel,options){const features=[];return this.forEachFeatureAtPixel(pixel,function(feature){features.push(feature)},options),features}getAllLayers(){const layers=[];return function addLayersFrom(layerGroup){layerGroup.forEach(function(layer){layer instanceof Group?addLayersFrom(layer.getLayers()):layers.push(layer)})}(this.getLayers()),layers}hasFeatureAtPixel(pixel,options){if(!this.frameState_||!this.renderer_)return!1;const coordinate=this.getCoordinateFromPixelInternal(pixel),layerFilter=void 0!==(options=void 0!==options?options:{}).layerFilter?options.layerFilter:functions.rT,hitTolerance=void 0!==options.hitTolerance?options.hitTolerance:0,checkWrapped=!1!==options.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(coordinate,this.frameState_,hitTolerance,checkWrapped,layerFilter,null)}getEventCoordinate(event){return this.getCoordinateFromPixel(this.getEventPixel(event))}getEventCoordinateInternal(event){return this.getCoordinateFromPixelInternal(this.getEventPixel(event))}getEventPixel(event){const viewportPosition=this.viewport_.getBoundingClientRect(),viewportSize=this.getSize(),scaleX=viewportPosition.width/viewportSize[0],scaleY=viewportPosition.height/viewportSize[1],eventPosition="changedTouches"in event?event.changedTouches[0]:event;return[(eventPosition.clientX-viewportPosition.left)/scaleX,(eventPosition.clientY-viewportPosition.top)/scaleY]}getTarget(){return this.get(MapProperty_TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(pixel){return(0,proj.te)(this.getCoordinateFromPixelInternal(pixel),this.getView().getProjection())}getCoordinateFromPixelInternal(pixel){const frameState=this.frameState_;return frameState?(0,ol_transform.Bb)(frameState.pixelToCoordinateTransform,pixel.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(id){const overlay=this.overlayIdIndex_[id.toString()];return void 0!==overlay?overlay:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty_LAYERGROUP)}setLayers(layers){const group=this.getLayerGroup();if(layers instanceof Collection.A)return void group.setLayers(layers);const collection=group.getLayers();collection.clear(),collection.extend(layers)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const layerStatesArray=this.getLayerGroup().getLayerStatesArray();for(let i=0,ii=layerStatesArray.length;i<ii;++i){const state=layerStatesArray[i];if(!state.visible)continue;const renderer=state.layer.getRenderer();if(renderer&&!renderer.ready)return!0;const source=state.layer.getSource();if(source&&source.loading)return!0}return!1}getPixelFromCoordinate(coordinate){const viewCoordinate=(0,proj.Ad)(coordinate,this.getView().getProjection());return this.getPixelFromCoordinateInternal(viewCoordinate)}getPixelFromCoordinateInternal(coordinate){const frameState=this.frameState_;return frameState?(0,ol_transform.Bb)(frameState.coordinateToPixelTransform,coordinate.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty_SIZE)}getView(){return this.get(MapProperty_VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const targetElement=this.getTargetElement();return targetElement?targetElement.ownerDocument:document}getTilePriority(tile,tileSourceKey,tileCenter,tileResolution){return function getTilePriority(frameState,tile,tileSourceKey,tileCenter,tileResolution){if(!frameState||!(tileSourceKey in frameState.wantedTiles))return DROP;if(!frameState.wantedTiles[tileSourceKey][tile.getKey()])return DROP;const center=frameState.viewState.center,deltaX=tileCenter[0]-center[0],deltaY=tileCenter[1]-center[1];return 65536*Math.log(tileResolution)+Math.sqrt(deltaX*deltaX+deltaY*deltaY)/tileResolution}(this.frameState_,tile,tileSourceKey,tileCenter,tileResolution)}handleBrowserEvent(browserEvent,type){type=type||browserEvent.type;const mapBrowserEvent=new MapBrowserEvent.A(type,this,browserEvent);this.handleMapBrowserEvent(mapBrowserEvent)}handleMapBrowserEvent(mapBrowserEvent){if(!this.frameState_)return;const originalEvent=mapBrowserEvent.originalEvent,eventType=originalEvent.type;if(eventType===pointer_EventType_POINTERDOWN||eventType===EventType.A.WHEEL||eventType===EventType.A.KEYDOWN){const doc=this.getOwnerDocument(),rootNode=this.viewport_.getRootNode?this.viewport_.getRootNode():doc,target=originalEvent.target,currentDoc=rootNode instanceof ShadowRoot?rootNode.host===target?rootNode.host.ownerDocument:rootNode:rootNode===doc?doc.documentElement:rootNode;if(this.overlayContainerStopEvent_.contains(target)||!currentDoc.contains(target))return}if(mapBrowserEvent.frameState=this.frameState_,!1!==this.dispatchEvent(mapBrowserEvent)){const interactionsArray=this.getInteractions().getArray().slice();for(let i=interactionsArray.length-1;i>=0;i--){const interaction=interactionsArray[i];if(interaction.getMap()!==this||!interaction.getActive()||!this.getTargetElement())continue;if(!interaction.handleEvent(mapBrowserEvent)||mapBrowserEvent.propagationStopped)break}}}handlePostRender(){const frameState=this.frameState_,tileQueue=this.tileQueue_;if(!tileQueue.isEmpty()){let maxTotalLoading=this.maxTilesLoading_,maxNewLoads=maxTotalLoading;if(frameState){const hints=frameState.viewHints;if(hints[ViewHint.A.ANIMATING]||hints[ViewHint.A.INTERACTING]){const lowOnFrameBudget=Date.now()-frameState.time>8;maxTotalLoading=lowOnFrameBudget?0:8,maxNewLoads=lowOnFrameBudget?0:2}}tileQueue.getTilesLoading()<maxTotalLoading&&(tileQueue.reprioritize(),tileQueue.loadMoreTiles(maxTotalLoading,maxNewLoads))}frameState&&this.renderer_&&!frameState.animate&&(this.renderComplete_?(this.hasListener(render_EventType.A.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(render_EventType.A.RENDERCOMPLETE,frameState),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new MapEvent.A(MapEventType.A.LOADEND,this,frameState)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new MapEvent.A(MapEventType.A.LOADSTART,this,frameState))));const postRenderFunctions=this.postRenderFunctions_;if(frameState)for(let i=0,ii=postRenderFunctions.length;i<ii;++i)postRenderFunctions[i](this,frameState);postRenderFunctions.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,ii=this.targetChangeHandlerKeys_.length;i<ii;++i)(0,events.JH)(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType.A.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType.A.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!(0,dom.rB)(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const rootNode=this.targetElement_.getRootNode();rootNode instanceof ShadowRoot&&this.resizeObserver_.unobserve(rootNode.host),this.setSize(void 0)}const target=this.getTarget(),targetElement="string"==typeof target?document.getElementById(target):target;if(this.targetElement_=targetElement,targetElement){if((0,dom.rB)(targetElement)||targetElement.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Composite(this)),!(0,dom.rB)(targetElement)){this.mapBrowserEventHandler_=new ol_MapBrowserEventHandler(this,this.moveTolerance_);for(const key in MapBrowserEventType.A)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType.A[key],this.handleMapBrowserEvent.bind(this));let keyboardEventTarget;if(this.viewport_.addEventListener(EventType.A.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType.A.WHEEL,this.boundHandleBrowserEvent_,!!has.FT&&{passive:!1}),this.keyboardEventTarget_)keyboardEventTarget=this.keyboardEventTarget_;else{const targetRoot=targetElement.getRootNode();keyboardEventTarget=targetRoot instanceof ShadowRoot?targetRoot.host:targetElement}if(this.targetChangeHandlerKeys_=[(0,events.KT)(keyboardEventTarget,EventType.A.KEYDOWN,this.handleBrowserEvent,this),(0,events.KT)(keyboardEventTarget,EventType.A.KEYPRESS,this.handleBrowserEvent,this)],targetElement instanceof HTMLElement){const rootNode=targetElement.getRootNode();rootNode instanceof ShadowRoot&&this.resizeObserver_.observe(rootNode.host),this.resizeObserver_?.observe(targetElement)}}this.updateSize()}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0)}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,events.JH)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,events.JH)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const view=this.getView();view&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=(0,events.KT)(view,ObjectEventType.A.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,events.KT)(view,EventType.A.CHANGE,this.handleViewPropertyChanged_,this),view.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(events.JH),this.layerGroupPropertyListenerKeys_=null);const layerGroup=this.getLayerGroup();layerGroup&&(this.handleLayerAdd_(new GroupEvent("addlayer",layerGroup)),this.layerGroupPropertyListenerKeys_=[(0,events.KT)(layerGroup,ObjectEventType.A.PROPERTYCHANGE,this.render,this),(0,events.KT)(layerGroup,EventType.A.CHANGE,this.render,this),(0,events.KT)(layerGroup,"addlayer",this.handleLayerAdd_,this),(0,events.KT)(layerGroup,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const layerStates=this.frameState_.layerStatesArray;for(let i=0,ii=layerStates.length;i<ii;++i){const layer=layerStates[i].layer;layer.hasRenderer()&&layer.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(control){return this.getControls().remove(control)}removeInteraction(interaction){return this.getInteractions().remove(interaction)}removeLayer(layer){return this.getLayerGroup().getLayers().remove(layer)}handleLayerRemove_(event){removeLayerMapProperty(event.layer)}removeOverlay(overlay){return this.getOverlays().remove(overlay)}renderFrame_(time){const size=this.getSize(),view=this.getView(),previousFrameState=this.frameState_;let frameState=null;if(void 0!==size&&(0,ol_size.Ie)(size)&&view&&view.isDef()){const viewHints=view.getHints(this.frameState_?this.frameState_.viewHints:void 0),viewState=view.getState();if(frameState={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:(0,extent.Bg)(viewState.center,viewState.resolution,viewState.rotation,size),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size,tileQueue:this.tileQueue_,time,usedTiles:{},viewState,viewHints,wantedTiles:{},mapId:(0,util.v6)(this),renderTargets:{}},viewState.nextCenter&&viewState.nextResolution){const rotation=isNaN(viewState.nextRotation)?viewState.rotation:viewState.nextRotation;frameState.nextExtent=(0,extent.Bg)(viewState.nextCenter,viewState.nextResolution,rotation,size)}}if(this.frameState_=frameState,this.renderer_.renderFrame(frameState),frameState){if(frameState.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,frameState.postRenderFunctions),previousFrameState){(!this.previousExtent_||!(0,extent.Im)(this.previousExtent_)&&!(0,extent.aI)(frameState.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent.A(MapEventType.A.MOVESTART,this,previousFrameState)),this.previousExtent_=(0,extent.aZ)(this.previousExtent_))}this.previousExtent_&&!frameState.viewHints[ViewHint.A.ANIMATING]&&!frameState.viewHints[ViewHint.A.INTERACTING]&&!(0,extent.aI)(frameState.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent.A(MapEventType.A.MOVEEND,this,frameState)),(0,extent.o8)(frameState.extent,this.previousExtent_))}this.dispatchEvent(new MapEvent.A(MapEventType.A.POSTRENDER,this,frameState)),this.renderComplete_=(this.hasListener(MapEventType.A.LOADSTART)||this.hasListener(MapEventType.A.LOADEND)||this.hasListener(render_EventType.A.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(layerGroup){const oldLayerGroup=this.getLayerGroup();oldLayerGroup&&this.handleLayerRemove_(new GroupEvent("removelayer",oldLayerGroup)),this.set(MapProperty_LAYERGROUP,layerGroup)}setSize(size){this.set(MapProperty_SIZE,size)}setTarget(target){this.set(MapProperty_TARGET,target)}setView(view){if(!view||view instanceof View.Ay)return void this.set(MapProperty_VIEW,view);this.set(MapProperty_VIEW,new View.Ay);const map=this;view.then(function(viewOptions){map.setView(new View.Ay(viewOptions))})}updateSize(){const targetElement=this.getTargetElement();let size;if(targetElement){let width,height;if((0,dom.rB)(targetElement))width=targetElement.width,height=targetElement.height;else{const computedStyle=getComputedStyle(targetElement);width=targetElement.offsetWidth-parseFloat(computedStyle.borderLeftWidth)-parseFloat(computedStyle.paddingLeft)-parseFloat(computedStyle.paddingRight)-parseFloat(computedStyle.borderRightWidth),height=targetElement.offsetHeight-parseFloat(computedStyle.borderTopWidth)-parseFloat(computedStyle.paddingTop)-parseFloat(computedStyle.paddingBottom)-parseFloat(computedStyle.borderBottomWidth)}isNaN(width)||isNaN(height)||(size=[Math.max(0,width),Math.max(0,height)],!(0,ol_size.Ie)(size)&&(targetElement.offsetWidth||targetElement.offsetHeight||targetElement.getClientRects().length)&&(0,console.R8)("No map visible because the map container's width or height are 0."))}const oldSize=this.getSize();!size||oldSize&&(0,array.aI)(size,oldSize)||(this.setSize(size),this.updateViewportSize_(size))}updateViewportSize_(size){const view=this.getView();view&&view.setViewportSize(size)}}const ol_Map=Map_Map},"./node_modules/ol/MapBrowserEvent.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _MapEvent_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/MapEvent.js");class MapBrowserEvent extends _MapEvent_js__WEBPACK_IMPORTED_MODULE_0__.A{constructor(type,map,originalEvent,dragging,frameState,activePointers){super(type,map,frameState),this.originalEvent=originalEvent,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==dragging&&dragging,this.activePointers=activePointers}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(pixel){this.pixel_=pixel}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(coordinate){this.coordinate_=coordinate}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const __WEBPACK_DEFAULT_EXPORT__=MapBrowserEvent},"./node_modules/ol/MapBrowserEventType.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _events_EventType_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/events/EventType.js");const __WEBPACK_DEFAULT_EXPORT__={SINGLECLICK:"singleclick",CLICK:_events_EventType_js__WEBPACK_IMPORTED_MODULE_0__.A.CLICK,DBLCLICK:_events_EventType_js__WEBPACK_IMPORTED_MODULE_0__.A.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},"./node_modules/ol/MapEvent.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _events_Event_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/events/Event.js");class MapEvent extends _events_Event_js__WEBPACK_IMPORTED_MODULE_0__.Ay{constructor(type,map,frameState){super(type),this.map=map,this.frameState=void 0!==frameState?frameState:null}}const __WEBPACK_DEFAULT_EXPORT__=MapEvent},"./node_modules/ol/MapEventType.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},"./node_modules/ol/Object.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _ObjectEventType_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/ObjectEventType.js"),_Observable_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/Observable.js"),_events_Event_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/events/Event.js"),_obj_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/obj.js"),_util_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/util.js");class ObjectEvent extends _events_Event_js__WEBPACK_IMPORTED_MODULE_2__.Ay{constructor(type,key,oldValue){super(type),this.key=key,this.oldValue=oldValue}}class BaseObject extends _Observable_js__WEBPACK_IMPORTED_MODULE_1__.A{constructor(values){super(),this.on,this.once,this.un,(0,_util_js__WEBPACK_IMPORTED_MODULE_4__.v6)(this),this.values_=null,void 0!==values&&this.setProperties(values)}get(key){let value;return this.values_&&this.values_.hasOwnProperty(key)&&(value=this.values_[key]),value}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(key,oldValue){let eventType;eventType=`change:${key}`,this.hasListener(eventType)&&this.dispatchEvent(new ObjectEvent(eventType,key,oldValue)),eventType=_ObjectEventType_js__WEBPACK_IMPORTED_MODULE_0__.A.PROPERTYCHANGE,this.hasListener(eventType)&&this.dispatchEvent(new ObjectEvent(eventType,key,oldValue))}addChangeListener(key,listener){this.addEventListener(`change:${key}`,listener)}removeChangeListener(key,listener){this.removeEventListener(`change:${key}`,listener)}set(key,value,silent){const values=this.values_||(this.values_={});if(silent)values[key]=value;else{const oldValue=values[key];values[key]=value,oldValue!==value&&this.notify(key,oldValue)}}setProperties(values,silent){for(const key in values)this.set(key,values[key],silent)}applyProperties(source){source.values_&&Object.assign(this.values_||(this.values_={}),source.values_)}unset(key,silent){if(this.values_&&key in this.values_){const oldValue=this.values_[key];delete this.values_[key],(0,_obj_js__WEBPACK_IMPORTED_MODULE_3__.p)(this.values_)&&(this.values_=null),silent||this.notify(key,oldValue)}}}const __WEBPACK_DEFAULT_EXPORT__=BaseObject},"./node_modules/ol/ObjectEventType.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={PROPERTYCHANGE:"propertychange"}},"./node_modules/ol/Observable.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _events_EventType_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/events/EventType.js"),_events_Target_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/events/Target.js"),_events_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/events.js");class Observable extends _events_Target_js__WEBPACK_IMPORTED_MODULE_1__.A{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(_events_EventType_js__WEBPACK_IMPORTED_MODULE_0__.A.CHANGE)}getRevision(){return this.revision_}onInternal(type,listener){if(Array.isArray(type)){const len=type.length,keys=new Array(len);for(let i=0;i<len;++i)keys[i]=(0,_events_js__WEBPACK_IMPORTED_MODULE_2__.KT)(this,type[i],listener);return keys}return(0,_events_js__WEBPACK_IMPORTED_MODULE_2__.KT)(this,type,listener)}onceInternal(type,listener){let key;if(Array.isArray(type)){const len=type.length;key=new Array(len);for(let i=0;i<len;++i)key[i]=(0,_events_js__WEBPACK_IMPORTED_MODULE_2__.Jz)(this,type[i],listener)}else key=(0,_events_js__WEBPACK_IMPORTED_MODULE_2__.Jz)(this,type,listener);return listener.ol_key=key,key}unInternal(type,listener){const key=listener.ol_key;if(key)!function unByKey(key){if(Array.isArray(key))for(let i=0,ii=key.length;i<ii;++i)(0,_events_js__WEBPACK_IMPORTED_MODULE_2__.JH)(key[i]);else(0,_events_js__WEBPACK_IMPORTED_MODULE_2__.JH)(key)}(key);else if(Array.isArray(type))for(let i=0,ii=type.length;i<ii;++i)this.removeEventListener(type[i],listener);else this.removeEventListener(type,listener)}}Observable.prototype.on,Observable.prototype.once,Observable.prototype.un;const __WEBPACK_DEFAULT_EXPORT__=Observable},"./node_modules/ol/Overlay.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _MapEventType_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/MapEventType.js"),_Object_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/Object.js"),_css_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/css.js"),_dom_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/dom.js"),_events_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/events.js"),_extent_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/ol/extent.js");const Property_ELEMENT="element",Property_MAP="map",Property_OFFSET="offset",Property_POSITION="position",Property_POSITIONING="positioning";class Overlay extends _Object_js__WEBPACK_IMPORTED_MODULE_1__.A{constructor(options){super(),this.on,this.once,this.un,this.options=options,this.id=options.id,this.insertFirst=void 0===options.insertFirst||options.insertFirst,this.stopEvent=void 0===options.stopEvent||options.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==options.className?options.className:"ol-overlay-container "+_css_js__WEBPACK_IMPORTED_MODULE_2__.Q5,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===options.autoPan?{}:options.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Property_ELEMENT,this.handleElementChanged),this.addChangeListener(Property_MAP,this.handleMapChanged),this.addChangeListener(Property_OFFSET,this.handleOffsetChanged),this.addChangeListener(Property_POSITION,this.handlePositionChanged),this.addChangeListener(Property_POSITIONING,this.handlePositioningChanged),void 0!==options.element&&this.setElement(options.element),this.setOffset(void 0!==options.offset?options.offset:[0,0]),this.setPositioning(options.positioning||"top-left"),void 0!==options.position&&this.setPosition(options.position)}getElement(){return this.get(Property_ELEMENT)}getId(){return this.id}getMap(){return this.get(Property_MAP)||null}getOffset(){return this.get(Property_OFFSET)}getPosition(){return this.get(Property_POSITION)}getPositioning(){return this.get(Property_POSITIONING)}handleElementChanged(){(0,_dom_js__WEBPACK_IMPORTED_MODULE_3__.gS)(this.element);const element=this.getElement();element&&this.element.appendChild(element)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),(0,_events_js__WEBPACK_IMPORTED_MODULE_4__.JH)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const map=this.getMap();if(map){this.mapPostrenderListenerKey=(0,_events_js__WEBPACK_IMPORTED_MODULE_4__.KT)(map,_MapEventType_js__WEBPACK_IMPORTED_MODULE_0__.A.POSTRENDER,this.render,this),this.updatePixelPosition();const container=this.stopEvent?map.getOverlayContainerStopEvent():map.getOverlayContainer();this.insertFirst?container.insertBefore(this.element,container.childNodes[0]||null):container.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(element){this.set(Property_ELEMENT,element)}setMap(map){this.set(Property_MAP,map)}setOffset(offset){this.set(Property_OFFSET,offset)}setPosition(position){this.set(Property_POSITION,position)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(panIntoViewOptions){const map=this.getMap();if(!map||!map.getTargetElement()||!this.get(Property_POSITION))return;const mapRect=this.getRect(map.getTargetElement(),map.getSize()),element=this.getElement(),overlayRect=this.getRect(element,[(0,_dom_js__WEBPACK_IMPORTED_MODULE_3__.Gq)(element),(0,_dom_js__WEBPACK_IMPORTED_MODULE_3__.DK)(element)]),myMargin=void 0===(panIntoViewOptions=panIntoViewOptions||{}).margin?20:panIntoViewOptions.margin;if(!(0,_extent_js__WEBPACK_IMPORTED_MODULE_5__.ms)(mapRect,overlayRect)){const offsetLeft=overlayRect[0]-mapRect[0],offsetRight=mapRect[2]-overlayRect[2],offsetTop=overlayRect[1]-mapRect[1],offsetBottom=mapRect[3]-overlayRect[3],delta=[0,0];if(offsetLeft<0?delta[0]=offsetLeft-myMargin:offsetRight<0&&(delta[0]=Math.abs(offsetRight)+myMargin),offsetTop<0?delta[1]=offsetTop-myMargin:offsetBottom<0&&(delta[1]=Math.abs(offsetBottom)+myMargin),0!==delta[0]||0!==delta[1]){const center=map.getView().getCenterInternal(),centerPx=map.getPixelFromCoordinateInternal(center);if(!centerPx)return;const newCenterPx=[centerPx[0]+delta[0],centerPx[1]+delta[1]],panOptions=panIntoViewOptions.animation||{};map.getView().animateInternal({center:map.getCoordinateFromPixelInternal(newCenterPx),duration:panOptions.duration,easing:panOptions.easing})}}}getRect(element,size){const box=element.getBoundingClientRect(),offsetX=box.left+window.pageXOffset,offsetY=box.top+window.pageYOffset;return[offsetX,offsetY,offsetX+size[0],offsetY+size[1]]}setPositioning(positioning){this.set(Property_POSITIONING,positioning)}setVisible(visible){this.rendered.visible!==visible&&(this.element.style.display=visible?"":"none",this.rendered.visible=visible)}updatePixelPosition(){const map=this.getMap(),position=this.getPosition();if(!map||!map.isRendered()||!position)return void this.setVisible(!1);const pixel=map.getPixelFromCoordinate(position),mapSize=map.getSize();this.updateRenderedPosition(pixel,mapSize)}updateRenderedPosition(pixel,mapSize){const style=this.element.style,offset=this.getOffset(),positioning=this.getPositioning();this.setVisible(!0);let posX="0%",posY="0%";"bottom-right"==positioning||"center-right"==positioning||"top-right"==positioning?posX="-100%":"bottom-center"!=positioning&&"center-center"!=positioning&&"top-center"!=positioning||(posX="-50%"),"bottom-left"==positioning||"bottom-center"==positioning||"bottom-right"==positioning?posY="-100%":"center-left"!=positioning&&"center-center"!=positioning&&"center-right"!=positioning||(posY="-50%");const transform=`translate(${posX}, ${posY}) translate(${`${pixel[0]+offset[0]}px`}, ${`${pixel[1]+offset[1]}px`})`;this.rendered.transform_!=transform&&(this.rendered.transform_=transform,style.transform=transform)}getOptions(){return this.options}}const __WEBPACK_DEFAULT_EXPORT__=Overlay},"./node_modules/ol/View.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>ol_View});var ol_Object=__webpack_require__("./node_modules/ol/Object.js"),ViewHint=__webpack_require__("./node_modules/ol/ViewHint.js");const ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var array=__webpack_require__("./node_modules/ol/array.js"),asserts=__webpack_require__("./node_modules/ol/asserts.js"),math=__webpack_require__("./node_modules/ol/math.js");function createExtent(extent,onlyCenter,smooth){return function(center,resolution,size,isMoving,centerShift){if(!center)return;if(!resolution&&!onlyCenter)return center;const viewWidth=onlyCenter?0:size[0]*resolution,viewHeight=onlyCenter?0:size[1]*resolution,shiftX=centerShift?centerShift[0]:0,shiftY=centerShift?centerShift[1]:0;let minX=extent[0]+viewWidth/2+shiftX,maxX=extent[2]-viewWidth/2+shiftX,minY=extent[1]+viewHeight/2+shiftY,maxY=extent[3]-viewHeight/2+shiftY;minX>maxX&&(minX=(maxX+minX)/2,maxX=minX),minY>maxY&&(minY=(maxY+minY)/2,maxY=minY);let x=(0,math.qE)(center[0],minX,maxX),y=(0,math.qE)(center[1],minY,maxY);if(isMoving&&smooth&&resolution){const ratio=30*resolution;x+=-ratio*Math.log(1+Math.max(0,minX-center[0])/ratio)+ratio*Math.log(1+Math.max(0,center[0]-maxX)/ratio),y+=-ratio*Math.log(1+Math.max(0,minY-center[1])/ratio)+ratio*Math.log(1+Math.max(0,center[1]-maxY)/ratio)}return[x,y]}}function none(center){return center}var coordinate=__webpack_require__("./node_modules/ol/coordinate.js"),easing=__webpack_require__("./node_modules/ol/easing.js"),ol_extent=__webpack_require__("./node_modules/ol/extent.js"),functions=__webpack_require__("./node_modules/ol/functions.js"),Polygon=__webpack_require__("./node_modules/ol/geom/Polygon.js"),proj=__webpack_require__("./node_modules/ol/proj.js");function getViewportClampedResolution(resolution,maxExtent,viewportSize,showFullExtent){const xResolution=(0,ol_extent.RG)(maxExtent)/viewportSize[0],yResolution=(0,ol_extent.Oq)(maxExtent)/viewportSize[1];return showFullExtent?Math.min(resolution,Math.max(xResolution,yResolution)):Math.min(resolution,Math.min(xResolution,yResolution))}function getSmoothClampedResolution(resolution,maxResolution,minResolution){let result=Math.min(resolution,maxResolution);return result*=Math.log(1+50*Math.max(0,resolution/maxResolution-1))/50+1,minResolution&&(result=Math.max(result,minResolution),result/=Math.log(1+50*Math.max(0,minResolution/resolution-1))/50+1),(0,math.qE)(result,minResolution/2,2*maxResolution)}function createMinMaxResolution(maxResolution,minResolution,smooth,maxExtent,showFullExtent){return smooth=void 0===smooth||smooth,function(resolution,direction,size,isMoving){if(void 0!==resolution){const cappedMaxRes=maxExtent?getViewportClampedResolution(maxResolution,maxExtent,size,showFullExtent):maxResolution;return smooth&&isMoving?getSmoothClampedResolution(resolution,cappedMaxRes,minResolution):(0,math.qE)(resolution,minResolution,cappedMaxRes)}}}var rotationconstraint=__webpack_require__("./node_modules/ol/rotationconstraint.js");class View extends ol_Object.A{constructor(options){super(),this.on,this.once,this.un,options=Object.assign({},options),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=(0,proj.Av)(options.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,options.projection&&(0,proj.RJ)(),options.center&&(options.center=(0,proj.Ad)(options.center,this.projection_)),options.extent&&(options.extent=(0,proj.SD)(options.extent,this.projection_)),this.applyOptions_(options)}applyOptions_(options){const properties=Object.assign({},options);for(const key in ViewProperty)delete properties[key];this.setProperties(properties,!0);const resolutionConstraintInfo=function createResolutionConstraint(options){let resolutionConstraint,maxResolution,minResolution;const defaultMaxZoom=28,defaultZoomFactor=2;let minZoom=void 0!==options.minZoom?options.minZoom:0,maxZoom=void 0!==options.maxZoom?options.maxZoom:defaultMaxZoom;const zoomFactor=void 0!==options.zoomFactor?options.zoomFactor:defaultZoomFactor,multiWorld=void 0!==options.multiWorld&&options.multiWorld,smooth=void 0===options.smoothResolutionConstraint||options.smoothResolutionConstraint,showFullExtent=void 0!==options.showFullExtent&&options.showFullExtent,projection=(0,proj.Av)(options.projection,"EPSG:3857"),projExtent=projection.getExtent();let constrainOnlyCenter=options.constrainOnlyCenter,extent=options.extent;multiWorld||extent||!projection.isGlobal()||(constrainOnlyCenter=!1,extent=projExtent);if(void 0!==options.resolutions){const resolutions=options.resolutions;maxResolution=resolutions[minZoom],minResolution=void 0!==resolutions[maxZoom]?resolutions[maxZoom]:resolutions[resolutions.length-1],resolutionConstraint=options.constrainResolution?function createSnapToResolutions(resolutions,smooth,maxExtent,showFullExtent){return smooth=void 0===smooth||smooth,function(resolution,direction,size,isMoving){if(void 0!==resolution){const maxResolution=resolutions[0],minResolution=resolutions[resolutions.length-1],cappedMaxRes=maxExtent?getViewportClampedResolution(maxResolution,maxExtent,size,showFullExtent):maxResolution;if(isMoving)return smooth?getSmoothClampedResolution(resolution,cappedMaxRes,minResolution):(0,math.qE)(resolution,minResolution,cappedMaxRes);const capped=Math.min(cappedMaxRes,resolution),z=Math.floor((0,array.FT)(resolutions,capped,direction));return resolutions[z]>cappedMaxRes&&z<resolutions.length-1?resolutions[z+1]:resolutions[z]}}}(resolutions,smooth,!constrainOnlyCenter&&extent,showFullExtent):createMinMaxResolution(maxResolution,minResolution,smooth,!constrainOnlyCenter&&extent,showFullExtent)}else{const defaultMaxResolution=(projExtent?Math.max((0,ol_extent.RG)(projExtent),(0,ol_extent.Oq)(projExtent)):360*proj.Ig.degrees/projection.getMetersPerUnit())/256/Math.pow(defaultZoomFactor,0),defaultMinResolution=defaultMaxResolution/Math.pow(defaultZoomFactor,defaultMaxZoom-0);maxResolution=options.maxResolution,void 0!==maxResolution?minZoom=0:maxResolution=defaultMaxResolution/Math.pow(zoomFactor,minZoom),minResolution=options.minResolution,void 0===minResolution&&(minResolution=void 0!==options.maxZoom?void 0!==options.maxResolution?maxResolution/Math.pow(zoomFactor,maxZoom):defaultMaxResolution/Math.pow(zoomFactor,maxZoom):defaultMinResolution),maxZoom=minZoom+Math.floor(Math.log(maxResolution/minResolution)/Math.log(zoomFactor)),minResolution=maxResolution/Math.pow(zoomFactor,maxZoom-minZoom),resolutionConstraint=options.constrainResolution?function createSnapToPower(power,maxResolution,minResolution,smooth,maxExtent,showFullExtent){return smooth=void 0===smooth||smooth,minResolution=void 0!==minResolution?minResolution:0,function(resolution,direction,size,isMoving){if(void 0!==resolution){const cappedMaxRes=maxExtent?getViewportClampedResolution(maxResolution,maxExtent,size,showFullExtent):maxResolution;if(isMoving)return smooth?getSmoothClampedResolution(resolution,cappedMaxRes,minResolution):(0,math.qE)(resolution,minResolution,cappedMaxRes);const tolerance=1e-9,minZoomLevel=Math.ceil(Math.log(maxResolution/cappedMaxRes)/Math.log(power)-tolerance),offset=-direction*(.5-tolerance)+.5,capped=Math.min(cappedMaxRes,resolution),cappedZoomLevel=Math.floor(Math.log(maxResolution/capped)/Math.log(power)+offset),zoomLevel=Math.max(minZoomLevel,cappedZoomLevel),newResolution=maxResolution/Math.pow(power,zoomLevel);return(0,math.qE)(newResolution,minResolution,cappedMaxRes)}}}(zoomFactor,maxResolution,minResolution,smooth,!constrainOnlyCenter&&extent,showFullExtent):createMinMaxResolution(maxResolution,minResolution,smooth,!constrainOnlyCenter&&extent,showFullExtent)}return{constraint:resolutionConstraint,maxResolution,minResolution,minZoom,zoomFactor}}(options);this.maxResolution_=resolutionConstraintInfo.maxResolution,this.minResolution_=resolutionConstraintInfo.minResolution,this.zoomFactor_=resolutionConstraintInfo.zoomFactor,this.resolutions_=options.resolutions,this.padding_=options.padding,this.minZoom_=resolutionConstraintInfo.minZoom;const centerConstraint=function createCenterConstraint(options){if(void 0!==options.extent){const smooth=void 0===options.smoothExtentConstraint||options.smoothExtentConstraint;return createExtent(options.extent,options.constrainOnlyCenter,smooth)}const projection=(0,proj.Av)(options.projection,"EPSG:3857");if(!0!==options.multiWorld&&projection.isGlobal()){const extent=projection.getExtent().slice();return extent[0]=-1/0,extent[2]=1/0,createExtent(extent,!1,!1)}return none}(options),resolutionConstraint=resolutionConstraintInfo.constraint,rotationConstraint=function createRotationConstraint(options){const enableRotation=void 0===options.enableRotation||options.enableRotation;if(enableRotation){const constrainRotation=options.constrainRotation;return void 0===constrainRotation||!0===constrainRotation?(0,rotationconstraint.cq)():!1===constrainRotation?rotationconstraint.dv:"number"==typeof constrainRotation?(0,rotationconstraint.a$)(constrainRotation):rotationconstraint.dv}return rotationconstraint.b8}(options);this.constraints_={center:centerConstraint,resolution:resolutionConstraint,rotation:rotationConstraint},this.setRotation(void 0!==options.rotation?options.rotation:0),this.setCenterInternal(void 0!==options.center?options.center:null),void 0!==options.resolution?this.setResolution(options.resolution):void 0!==options.zoom&&this.setZoom(options.zoom)}get padding(){return this.padding_}set padding(padding){let oldPadding=this.padding_;this.padding_=padding;const center=this.getCenterInternal();if(center){const newPadding=padding||[0,0,0,0];oldPadding=oldPadding||[0,0,0,0];const resolution=this.getResolution(),offsetX=resolution/2*(newPadding[3]-oldPadding[3]+oldPadding[1]-newPadding[1]),offsetY=resolution/2*(newPadding[0]-oldPadding[0]+oldPadding[2]-newPadding[2]);this.setCenterInternal([center[0]+offsetX,center[1]-offsetY])}}getUpdatedOptions_(newOptions){const options=this.getProperties();return void 0!==options.resolution?options.resolution=this.getResolution():options.zoom=this.getZoom(),options.center=this.getCenterInternal(),options.rotation=this.getRotation(),Object.assign({},options,newOptions)}animate(var_args){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const args=new Array(arguments.length);for(let i=0;i<args.length;++i){let options=arguments[i];options.center&&(options=Object.assign({},options),options.center=(0,proj.Ad)(options.center,this.getProjection())),options.anchor&&(options=Object.assign({},options),options.anchor=(0,proj.Ad)(options.anchor,this.getProjection())),args[i]=options}this.animateInternal.apply(this,args)}animateInternal(var_args){let callback,animationCount=arguments.length;animationCount>1&&"function"==typeof arguments[animationCount-1]&&(callback=arguments[animationCount-1],--animationCount);let i=0;for(;i<animationCount&&!this.isDef();++i){const state=arguments[i];state.center&&this.setCenterInternal(state.center),void 0!==state.zoom?this.setZoom(state.zoom):state.resolution&&this.setResolution(state.resolution),void 0!==state.rotation&&this.setRotation(state.rotation)}if(i===animationCount)return void(callback&&animationCallback(callback,!0));let start=Date.now(),center=this.targetCenter_.slice(),resolution=this.targetResolution_,rotation=this.targetRotation_;const series=[];for(;i<animationCount;++i){const options=arguments[i],animation={start,complete:!1,anchor:options.anchor,duration:void 0!==options.duration?options.duration:1e3,easing:options.easing||easing.T9,callback};if(options.center&&(animation.sourceCenter=center,animation.targetCenter=options.center.slice(),center=animation.targetCenter),void 0!==options.zoom?(animation.sourceResolution=resolution,animation.targetResolution=this.getResolutionForZoom(options.zoom),resolution=animation.targetResolution):options.resolution&&(animation.sourceResolution=resolution,animation.targetResolution=options.resolution,resolution=animation.targetResolution),void 0!==options.rotation){animation.sourceRotation=rotation;const delta=(0,math.xP)(options.rotation-rotation+Math.PI,2*Math.PI)-Math.PI;animation.targetRotation=rotation+delta,rotation=animation.targetRotation}isNoopAnimation(animation)?animation.complete=!0:start+=animation.duration,series.push(animation)}this.animations_.push(series),this.setHint(ViewHint.A.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.A.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.A.INTERACTING]>0}cancelAnimations(){let anchor;this.setHint(ViewHint.A.ANIMATING,-this.hints_[ViewHint.A.ANIMATING]);for(let i=0,ii=this.animations_.length;i<ii;++i){const series=this.animations_[i];if(series[0].callback&&animationCallback(series[0].callback,!1),!anchor)for(let j=0,jj=series.length;j<jj;++j){const animation=series[j];if(!animation.complete){anchor=animation.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=anchor,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const now=Date.now();let more=!1;for(let i=this.animations_.length-1;i>=0;--i){const series=this.animations_[i];let seriesComplete=!0;for(let j=0,jj=series.length;j<jj;++j){const animation=series[j];if(animation.complete)continue;const elapsed=now-animation.start;let fraction=animation.duration>0?elapsed/animation.duration:1;fraction>=1?(animation.complete=!0,fraction=1):seriesComplete=!1;const progress=animation.easing(fraction);if(animation.sourceCenter){const x0=animation.sourceCenter[0],y0=animation.sourceCenter[1],x1=animation.targetCenter[0],y1=animation.targetCenter[1];this.nextCenter_=animation.targetCenter;const x=x0+progress*(x1-x0),y=y0+progress*(y1-y0);this.targetCenter_=[x,y]}if(animation.sourceResolution&&animation.targetResolution){const resolution=1===progress?animation.targetResolution:animation.sourceResolution+progress*(animation.targetResolution-animation.sourceResolution);if(animation.anchor){const size=this.getViewportSize_(this.getRotation()),constrainedResolution=this.constraints_.resolution(resolution,0,size,!0);this.targetCenter_=this.calculateCenterZoom(constrainedResolution,animation.anchor)}this.nextResolution_=animation.targetResolution,this.targetResolution_=resolution,this.applyTargetState_(!0)}if(void 0!==animation.sourceRotation&&void 0!==animation.targetRotation){const rotation=1===progress?(0,math.xP)(animation.targetRotation+Math.PI,2*Math.PI)-Math.PI:animation.sourceRotation+progress*(animation.targetRotation-animation.sourceRotation);if(animation.anchor){const constrainedRotation=this.constraints_.rotation(rotation,!0);this.targetCenter_=this.calculateCenterRotate(constrainedRotation,animation.anchor)}this.nextRotation_=animation.targetRotation,this.targetRotation_=rotation}if(this.applyTargetState_(!0),more=!0,!animation.complete)break}if(seriesComplete){this.animations_[i]=null,this.setHint(ViewHint.A.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const callback=series[0].callback;callback&&animationCallback(callback,!0)}}this.animations_=this.animations_.filter(Boolean),more&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(rotation,anchor){let center;const currentCenter=this.getCenterInternal();return void 0!==currentCenter&&(center=[currentCenter[0]-anchor[0],currentCenter[1]-anchor[1]],(0,coordinate.e$)(center,rotation-this.getRotation()),(0,coordinate.WQ)(center,anchor)),center}calculateCenterZoom(resolution,anchor){let center;const currentCenter=this.getCenterInternal(),currentResolution=this.getResolution();if(void 0!==currentCenter&&void 0!==currentResolution){center=[anchor[0]-resolution*(anchor[0]-currentCenter[0])/currentResolution,anchor[1]-resolution*(anchor[1]-currentCenter[1])/currentResolution]}return center}getViewportSize_(rotation){const size=this.viewportSize_;if(rotation){const w=size[0],h=size[1];return[Math.abs(w*Math.cos(rotation))+Math.abs(h*Math.sin(rotation)),Math.abs(w*Math.sin(rotation))+Math.abs(h*Math.cos(rotation))]}return size}setViewportSize(size){this.viewportSize_=Array.isArray(size)?size.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const center=this.getCenterInternal();return center?(0,proj.te)(center,this.getProjection()):center}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(hints){return void 0!==hints?(hints[0]=this.hints_[0],hints[1]=this.hints_[1],hints):this.hints_.slice()}calculateExtent(size){const extent=this.calculateExtentInternal(size);return(0,proj.JR)(extent,this.getProjection())}calculateExtentInternal(size){size=size||this.getViewportSizeMinusPadding_();const center=this.getCenterInternal();(0,asserts.v)(center,"The view center is not defined");const resolution=this.getResolution();(0,asserts.v)(void 0!==resolution,"The view resolution is not defined");const rotation=this.getRotation();return(0,asserts.v)(void 0!==rotation,"The view rotation is not defined"),(0,ol_extent.Bg)(center,resolution,rotation,size)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(zoom){this.applyOptions_(this.getUpdatedOptions_({maxZoom:zoom}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(zoom){this.applyOptions_(this.getUpdatedOptions_({minZoom:zoom}))}setConstrainResolution(enabled){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:enabled}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(extent,size){return this.getResolutionForExtentInternal((0,proj.SD)(extent,this.getProjection()),size)}getResolutionForExtentInternal(extent,size){size=size||this.getViewportSizeMinusPadding_();const xResolution=(0,ol_extent.RG)(extent)/size[0],yResolution=(0,ol_extent.Oq)(extent)/size[1];return Math.max(xResolution,yResolution)}getResolutionForValueFunction(power){power=power||2;const maxResolution=this.getConstrainedResolution(this.maxResolution_),minResolution=this.minResolution_,max=Math.log(maxResolution/minResolution)/Math.log(power);return function(value){return maxResolution/Math.pow(power,value*max)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(power){const logPower=Math.log(power||2),maxResolution=this.getConstrainedResolution(this.maxResolution_),minResolution=this.minResolution_,max=Math.log(maxResolution/minResolution)/logPower;return function(resolution){return Math.log(maxResolution/resolution)/logPower/max}}getViewportSizeMinusPadding_(rotation){let size=this.getViewportSize_(rotation);const padding=this.padding_;return padding&&(size=[size[0]-padding[1]-padding[3],size[1]-padding[0]-padding[2]]),size}getState(){const projection=this.getProjection(),resolution=this.getResolution(),rotation=this.getRotation();let center=this.getCenterInternal();const padding=this.padding_;if(padding){const reducedSize=this.getViewportSizeMinusPadding_();center=calculateCenterOn(center,this.getViewportSize_(),[reducedSize[0]/2+padding[3],reducedSize[1]/2+padding[0]],resolution,rotation)}return{center:center.slice(0),projection:void 0!==projection?projection:null,resolution,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let zoom;const resolution=this.getResolution();return void 0!==resolution&&(zoom=this.getZoomForResolution(resolution)),zoom}getZoomForResolution(resolution){let max,zoomFactor,offset=this.minZoom_||0;if(this.resolutions_){const nearest=(0,array.FT)(this.resolutions_,resolution,1);offset=nearest,max=this.resolutions_[nearest],zoomFactor=nearest==this.resolutions_.length-1?2:max/this.resolutions_[nearest+1]}else max=this.maxResolution_,zoomFactor=this.zoomFactor_;return offset+Math.log(max/resolution)/Math.log(zoomFactor)}getResolutionForZoom(zoom){if(this.resolutions_?.length){if(1===this.resolutions_.length)return this.resolutions_[0];const baseLevel=(0,math.qE)(Math.floor(zoom),0,this.resolutions_.length-2),zoomFactor=this.resolutions_[baseLevel]/this.resolutions_[baseLevel+1];return this.resolutions_[baseLevel]/Math.pow(zoomFactor,(0,math.qE)(zoom-baseLevel,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,zoom-this.minZoom_)}fit(geometryOrExtent,options){let geometry;if((0,asserts.v)(Array.isArray(geometryOrExtent)||"function"==typeof geometryOrExtent.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(geometryOrExtent)){(0,asserts.v)(!(0,ol_extent.Im)(geometryOrExtent),"Cannot fit empty extent provided as `geometry`");const extent=(0,proj.SD)(geometryOrExtent,this.getProjection());geometry=(0,Polygon.VY)(extent)}else if("Circle"===geometryOrExtent.getType()){const extent=(0,proj.SD)(geometryOrExtent.getExtent(),this.getProjection());geometry=(0,Polygon.VY)(extent),geometry.rotate(this.getRotation(),(0,ol_extent.q1)(extent))}else{const userProjection=(0,proj.Tf)();geometry=userProjection?geometryOrExtent.clone().transform(userProjection,this.getProjection()):geometryOrExtent}this.fitInternal(geometry,options)}rotatedExtentForGeometry(geometry){const rotation=this.getRotation(),cosAngle=Math.cos(rotation),sinAngle=Math.sin(-rotation),coords=geometry.getFlatCoordinates(),stride=geometry.getStride();let minRotX=1/0,minRotY=1/0,maxRotX=-1/0,maxRotY=-1/0;for(let i=0,ii=coords.length;i<ii;i+=stride){const rotX=coords[i]*cosAngle-coords[i+1]*sinAngle,rotY=coords[i]*sinAngle+coords[i+1]*cosAngle;minRotX=Math.min(minRotX,rotX),minRotY=Math.min(minRotY,rotY),maxRotX=Math.max(maxRotX,rotX),maxRotY=Math.max(maxRotY,rotY)}return[minRotX,minRotY,maxRotX,maxRotY]}fitInternal(geometry,options){let size=(options=options||{}).size;size||(size=this.getViewportSizeMinusPadding_());const padding=void 0!==options.padding?options.padding:[0,0,0,0],nearest=void 0!==options.nearest&&options.nearest;let minResolution;minResolution=void 0!==options.minResolution?options.minResolution:void 0!==options.maxZoom?this.getResolutionForZoom(options.maxZoom):0;const rotatedExtent=this.rotatedExtentForGeometry(geometry);let resolution=this.getResolutionForExtentInternal(rotatedExtent,[size[0]-padding[1]-padding[3],size[1]-padding[0]-padding[2]]);resolution=isNaN(resolution)?minResolution:Math.max(resolution,minResolution),resolution=this.getConstrainedResolution(resolution,nearest?0:1);const rotation=this.getRotation(),sinAngle=Math.sin(rotation),cosAngle=Math.cos(rotation),centerRot=(0,ol_extent.q1)(rotatedExtent);centerRot[0]+=(padding[1]-padding[3])/2*resolution,centerRot[1]+=(padding[0]-padding[2])/2*resolution;const centerX=centerRot[0]*cosAngle-centerRot[1]*sinAngle,centerY=centerRot[1]*cosAngle+centerRot[0]*sinAngle,center=this.getConstrainedCenter([centerX,centerY],resolution),callback=options.callback?options.callback:functions.tV;void 0!==options.duration?this.animateInternal({resolution,center,duration:options.duration,easing:options.easing},callback):(this.targetResolution_=resolution,this.targetCenter_=center,this.applyTargetState_(!1,!0),animationCallback(callback,!0))}centerOn(coordinate,size,position){this.centerOnInternal((0,proj.Ad)(coordinate,this.getProjection()),size,position)}centerOnInternal(coordinate,size,position){this.setCenterInternal(calculateCenterOn(coordinate,size,position,this.getResolution(),this.getRotation()))}calculateCenterShift(center,resolution,rotation,size){let centerShift;const padding=this.padding_;if(padding&&center){const reducedSize=this.getViewportSizeMinusPadding_(-rotation),shiftedCenter=calculateCenterOn(center,size,[reducedSize[0]/2+padding[3],reducedSize[1]/2+padding[0]],resolution,rotation);centerShift=[center[0]-shiftedCenter[0],center[1]-shiftedCenter[1]]}return centerShift}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(deltaCoordinates){const center=(0,proj.te)(this.targetCenter_,this.getProjection());this.setCenter([center[0]+deltaCoordinates[0],center[1]+deltaCoordinates[1]])}adjustCenterInternal(deltaCoordinates){const center=this.targetCenter_;this.setCenterInternal([center[0]+deltaCoordinates[0],center[1]+deltaCoordinates[1]])}adjustResolution(ratio,anchor){anchor=anchor&&(0,proj.Ad)(anchor,this.getProjection()),this.adjustResolutionInternal(ratio,anchor)}adjustResolutionInternal(ratio,anchor){const isMoving=this.getAnimating()||this.getInteracting(),size=this.getViewportSize_(this.getRotation()),newResolution=this.constraints_.resolution(this.targetResolution_*ratio,0,size,isMoving);anchor&&(this.targetCenter_=this.calculateCenterZoom(newResolution,anchor)),this.targetResolution_*=ratio,this.applyTargetState_()}adjustZoom(delta,anchor){this.adjustResolution(Math.pow(this.zoomFactor_,-delta),anchor)}adjustRotation(delta,anchor){anchor&&(anchor=(0,proj.Ad)(anchor,this.getProjection())),this.adjustRotationInternal(delta,anchor)}adjustRotationInternal(delta,anchor){const isMoving=this.getAnimating()||this.getInteracting(),newRotation=this.constraints_.rotation(this.targetRotation_+delta,isMoving);anchor&&(this.targetCenter_=this.calculateCenterRotate(newRotation,anchor)),this.targetRotation_+=delta,this.applyTargetState_()}setCenter(center){this.setCenterInternal(center?(0,proj.Ad)(center,this.getProjection()):center)}setCenterInternal(center){this.targetCenter_=center,this.applyTargetState_()}setHint(hint,delta){return this.hints_[hint]+=delta,this.changed(),this.hints_[hint]}setResolution(resolution){this.targetResolution_=resolution,this.applyTargetState_()}setRotation(rotation){this.targetRotation_=rotation,this.applyTargetState_()}setZoom(zoom){this.setResolution(this.getResolutionForZoom(zoom))}applyTargetState_(doNotCancelAnims,forceMoving){const isMoving=this.getAnimating()||this.getInteracting()||forceMoving,newRotation=this.constraints_.rotation(this.targetRotation_,isMoving),size=this.getViewportSize_(newRotation),newResolution=this.constraints_.resolution(this.targetResolution_,0,size,isMoving),newCenter=this.constraints_.center(this.targetCenter_,newResolution,size,isMoving,this.calculateCenterShift(this.targetCenter_,newResolution,newRotation,size));this.get(ViewProperty.ROTATION)!==newRotation&&this.set(ViewProperty.ROTATION,newRotation),this.get(ViewProperty.RESOLUTION)!==newResolution&&(this.set(ViewProperty.RESOLUTION,newResolution),this.set("zoom",this.getZoom(),!0)),newCenter&&this.get(ViewProperty.CENTER)&&(0,coordinate.aI)(this.get(ViewProperty.CENTER),newCenter)||this.set(ViewProperty.CENTER,newCenter),this.getAnimating()&&!doNotCancelAnims&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(duration,resolutionDirection,anchor){duration=void 0!==duration?duration:200;const direction=resolutionDirection||0,newRotation=this.constraints_.rotation(this.targetRotation_),size=this.getViewportSize_(newRotation),newResolution=this.constraints_.resolution(this.targetResolution_,direction,size),newCenter=this.constraints_.center(this.targetCenter_,newResolution,size,!1,this.calculateCenterShift(this.targetCenter_,newResolution,newRotation,size));if(0===duration&&!this.cancelAnchor_)return this.targetResolution_=newResolution,this.targetRotation_=newRotation,this.targetCenter_=newCenter,void this.applyTargetState_();anchor=anchor||(0===duration?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===newResolution&&this.getRotation()===newRotation&&this.getCenterInternal()&&(0,coordinate.aI)(this.getCenterInternal(),newCenter)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:newRotation,center:newCenter,resolution:newResolution,duration,easing:easing.vT,anchor}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.A.INTERACTING,1)}endInteraction(duration,resolutionDirection,anchor){anchor=anchor&&(0,proj.Ad)(anchor,this.getProjection()),this.endInteractionInternal(duration,resolutionDirection,anchor)}endInteractionInternal(duration,resolutionDirection,anchor){this.getInteracting()&&(this.setHint(ViewHint.A.INTERACTING,-1),this.resolveConstraints(duration,resolutionDirection,anchor))}getConstrainedCenter(targetCenter,targetResolution){const size=this.getViewportSize_(this.getRotation());return this.constraints_.center(targetCenter,targetResolution||this.getResolution(),size)}getConstrainedZoom(targetZoom,direction){const targetRes=this.getResolutionForZoom(targetZoom);return this.getZoomForResolution(this.getConstrainedResolution(targetRes,direction))}getConstrainedResolution(targetResolution,direction){direction=direction||0;const size=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(targetResolution,direction,size)}}function animationCallback(callback,returnValue){setTimeout(function(){callback(returnValue)},0)}function isNoopAnimation(animation){return!(animation.sourceCenter&&animation.targetCenter&&!(0,coordinate.aI)(animation.sourceCenter,animation.targetCenter))&&(animation.sourceResolution===animation.targetResolution&&animation.sourceRotation===animation.targetRotation)}function calculateCenterOn(coordinate,size,position,resolution,rotation){const cosAngle=Math.cos(-rotation);let sinAngle=Math.sin(-rotation),rotX=coordinate[0]*cosAngle-coordinate[1]*sinAngle,rotY=coordinate[1]*cosAngle+coordinate[0]*sinAngle;rotX+=(size[0]/2-position[0])*resolution,rotY+=(position[1]-size[1]/2)*resolution,sinAngle=-sinAngle;return[rotX*cosAngle-rotY*sinAngle,rotY*cosAngle+rotX*sinAngle]}const ol_View=View},"./node_modules/ol/ViewHint.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={ANIMATING:0,INTERACTING:1}},"./node_modules/ol/array.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function binarySearch(haystack,needle,comparator){let mid,cmp;comparator=comparator||ascending;let low=0,high=haystack.length,found=!1;for(;low<high;)mid=low+(high-low>>1),cmp=+comparator(haystack[mid],needle),cmp<0?low=mid+1:(high=mid,found=!cmp);return found?low:~low}function ascending(a,b){return a>b?1:a<b?-1:0}function descending(a,b){return a<b?1:a>b?-1:0}function linearFindNearest(arr,target,direction){if(arr[0]<=target)return 0;const n=arr.length;if(target<=arr[n-1])return n-1;if("function"==typeof direction){for(let i=1;i<n;++i){const candidate=arr[i];if(candidate===target)return i;if(candidate<target)return direction(target,arr[i-1],candidate)>0?i-1:i}return n-1}if(direction>0){for(let i=1;i<n;++i)if(arr[i]<target)return i-1;return n-1}if(direction<0){for(let i=1;i<n;++i)if(arr[i]<=target)return i;return n-1}for(let i=1;i<n;++i){if(arr[i]==target)return i;if(arr[i]<target)return arr[i-1]-target<target-arr[i]?i-1:i}return n-1}function reverseSubArray(arr,begin,end){for(;begin<end;){const tmp=arr[begin];arr[begin]=arr[end],arr[end]=tmp,++begin,--end}}function extend(arr,data){const extension=Array.isArray(data)?data:[data],length=extension.length;for(let i=0;i<length;i++)arr[arr.length]=extension[i]}function equals(arr1,arr2){const len1=arr1.length;if(len1!==arr2.length)return!1;for(let i=0;i<len1;i++)if(arr1[i]!==arr2[i])return!1;return!0}__webpack_require__.d(__webpack_exports__,{El:()=>binarySearch,FT:()=>linearFindNearest,V_:()=>ascending,X$:()=>extend,aI:()=>equals,gI:()=>reverseSubArray,rG:()=>descending})},"./node_modules/ol/asserts.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function assert(assertion,errorMessage){if(!assertion)throw new Error(errorMessage)}__webpack_require__.d(__webpack_exports__,{v:()=>assert})},"./node_modules/ol/color.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{_j:()=>asArray,cD:()=>lchaToRgba,dI:()=>toString,eE:()=>rgbaToLcha,fu:()=>withAlpha,oJ:()=>asString,qV:()=>NO_COLOR,sH:()=>fromString});var _dom_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/dom.js"),_math_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/math.js");const NO_COLOR=[NaN,NaN,NaN,0];let colorParseContext;const rgbModernRegEx=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,rgbLegacyAbsoluteRegEx=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,rgbLegacyPercentageRegEx=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,hexRegEx=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function toColorComponent(s,divider){return s.endsWith("%")?Number(s.substring(0,s.length-1))/divider:Number(s)}function throwInvalidColor(color){throw new Error('failed to parse "'+color+'" as color')}function parseRgba(color){if(color.toLowerCase().startsWith("rgb")){const rgb=color.match(rgbLegacyAbsoluteRegEx)||color.match(rgbModernRegEx)||color.match(rgbLegacyPercentageRegEx);if(rgb){const alpha=rgb[4],rgbDivider=100/255;return[(0,_math_js__WEBPACK_IMPORTED_MODULE_1__.qE)(toColorComponent(rgb[1],rgbDivider)+.5|0,0,255),(0,_math_js__WEBPACK_IMPORTED_MODULE_1__.qE)(toColorComponent(rgb[2],rgbDivider)+.5|0,0,255),(0,_math_js__WEBPACK_IMPORTED_MODULE_1__.qE)(toColorComponent(rgb[3],rgbDivider)+.5|0,0,255),void 0!==alpha?(0,_math_js__WEBPACK_IMPORTED_MODULE_1__.qE)(toColorComponent(alpha,100),0,1):1]}throwInvalidColor(color)}if(color.startsWith("#")){if(hexRegEx.test(color)){const hex=color.substring(1),step=hex.length<=4?1:2,colorFromHex=[0,0,0,255];for(let i=0,ii=hex.length;i<ii;i+=step){let colorComponent=parseInt(hex.substring(i,i+step),16);1===step&&(colorComponent+=colorComponent<<4),colorFromHex[i/step]=colorComponent}return colorFromHex[3]=colorFromHex[3]/255,colorFromHex}throwInvalidColor(color)}const context=function getColorParseContext(){return colorParseContext||(colorParseContext=(0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.Y)(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),colorParseContext}();context.fillStyle="#abcdef";let invalidCheckFillStyle=context.fillStyle;context.fillStyle=color,context.fillStyle===invalidCheckFillStyle&&(context.fillStyle="#fedcba",invalidCheckFillStyle=context.fillStyle,context.fillStyle=color,context.fillStyle===invalidCheckFillStyle&&throwInvalidColor(color));const colorString=context.fillStyle;if(colorString.startsWith("#")||colorString.startsWith("rgba"))return parseRgba(colorString);context.clearRect(0,0,1,1),context.fillRect(0,0,1,1);const colorFromImage=Array.from(context.getImageData(0,0,1,1).data);return colorFromImage[3]=(0,_math_js__WEBPACK_IMPORTED_MODULE_1__.Mg)(colorFromImage[3]/255,3),colorFromImage}function asString(color){return"string"==typeof color?color:toString(color)}const cache={};let cacheSize=0;function withAlpha(color){if(4===color.length)return color;const output=color.slice();return output[3]=1,output}function b1(v){return v>.0031308?269.025*Math.pow(v,1/2.4)-14.025:3294.6*v}function b2(v){return v>.2068965?Math.pow(v,3):108/841*(v-4/29)}function a1(v){return v>10.314724?Math.pow((v+14.025)/269.025,2.4):v/3294.6}function a2(v){return v>.0088564?Math.pow(v,1/3):v/(108/841)+4/29}function rgbaToLcha(color){const r=a1(color[0]),g=a1(color[1]),b=a1(color[2]),y=a2(.222488403*r+.716873169*g+.06060791*b),l=500*(a2(.452247074*r+.399439023*g+.148375274*b)-y),q=200*(y-a2(.016863605*r+.117638439*g+.865350722*b)),h=Math.atan2(q,l)*(180/Math.PI);return[116*y-16,Math.sqrt(l*l+q*q),h<0?h+360:h,color[3]]}function lchaToRgba(color){const l=(color[0]+16)/116,c=color[1],h=color[2]*Math.PI/180,y=b2(l),x=b2(l+c/500*Math.cos(h)),z=b2(l-c/200*Math.sin(h)),r=b1(3.021973625*x-1.617392459*y-.404875592*z),g=b1(-.943766287*x+1.916279586*y+.027607165*z),b=b1(.069407491*x-.22898585*y+1.159737864*z);return[(0,_math_js__WEBPACK_IMPORTED_MODULE_1__.qE)(r+.5|0,0,255),(0,_math_js__WEBPACK_IMPORTED_MODULE_1__.qE)(g+.5|0,0,255),(0,_math_js__WEBPACK_IMPORTED_MODULE_1__.qE)(b+.5|0,0,255),color[3]]}function fromString(s){if("none"===s)return NO_COLOR;if(cache.hasOwnProperty(s))return cache[s];if(cacheSize>=1024){let i=0;for(const key in cache)3&i++||(delete cache[key],--cacheSize)}const color=parseRgba(s);4!==color.length&&throwInvalidColor(s);for(const c of color)isNaN(c)&&throwInvalidColor(s);return cache[s]=color,++cacheSize,color}function asArray(color){return Array.isArray(color)?color:fromString(color)}function toString(color){let r=color[0];r!=(0|r)&&(r=r+.5|0);let g=color[1];g!=(0|g)&&(g=g+.5|0);let b=color[2];b!=(0|b)&&(b=b+.5|0);return"rgba("+r+","+g+","+b+","+(void 0===color[3]?1:Math.round(1e3*color[3])/1e3)+")"}},"./node_modules/ol/colorlike.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>asColorLike});var _ImageState_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/ImageState.js"),_color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/color.js"),_dom_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/dom.js"),_style_IconImage_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/style/IconImage.js"),_style_IconImageCache_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/style/IconImageCache.js");function asColorLike(color){return color?Array.isArray(color)?(0,_color_js__WEBPACK_IMPORTED_MODULE_1__.dI)(color):"object"==typeof color&&"src"in color?function asCanvasPattern(pattern){if(!pattern.offset||!pattern.size)return _style_IconImageCache_js__WEBPACK_IMPORTED_MODULE_4__.ue.getPattern(pattern.src,"anonymous",pattern.color);const cacheKey=pattern.src+":"+pattern.offset,canvasPattern=_style_IconImageCache_js__WEBPACK_IMPORTED_MODULE_4__.ue.getPattern(cacheKey,void 0,pattern.color);if(canvasPattern)return canvasPattern;const iconImage=_style_IconImageCache_js__WEBPACK_IMPORTED_MODULE_4__.ue.get(pattern.src,"anonymous",null);if(iconImage.getImageState()!==_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.LOADED)return null;const patternCanvasContext=(0,_dom_js__WEBPACK_IMPORTED_MODULE_2__.Y)(pattern.size[0],pattern.size[1]);return patternCanvasContext.drawImage(iconImage.getImage(1),pattern.offset[0],pattern.offset[1],pattern.size[0],pattern.size[1],0,0,pattern.size[0],pattern.size[1]),(0,_style_IconImage_js__WEBPACK_IMPORTED_MODULE_3__.J)(patternCanvasContext.canvas,cacheKey,void 0,_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.LOADED,pattern.color,!0),_style_IconImageCache_js__WEBPACK_IMPORTED_MODULE_4__.ue.getPattern(cacheKey,void 0,pattern.color)}(color):color:null}},"./node_modules/ol/console.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{R8:()=>warn});const levels={info:1,warn:2,error:3,none:4};let level=levels.info;function warn(...args){level>levels.warn||console.warn(...args)}},"./node_modules/ol/coordinate.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Io:()=>distance,Li:()=>wrapX,WQ:()=>add,aI:()=>equals,e$:()=>rotate,hG:()=>squaredDistance,hs:()=>scale});var _extent_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/extent.js");function add(coordinate,delta){return coordinate[0]+=+delta[0],coordinate[1]+=+delta[1],coordinate}function equals(coordinate1,coordinate2){let equals=!0;for(let i=coordinate1.length-1;i>=0;--i)if(coordinate1[i]!=coordinate2[i]){equals=!1;break}return equals}function rotate(coordinate,angle){const cosAngle=Math.cos(angle),sinAngle=Math.sin(angle),x=coordinate[0]*cosAngle-coordinate[1]*sinAngle,y=coordinate[1]*cosAngle+coordinate[0]*sinAngle;return coordinate[0]=x,coordinate[1]=y,coordinate}function scale(coordinate,scale){return coordinate[0]*=scale,coordinate[1]*=scale,coordinate}function squaredDistance(coord1,coord2){const dx=coord1[0]-coord2[0],dy=coord1[1]-coord2[1];return dx*dx+dy*dy}function distance(coord1,coord2){return Math.sqrt(squaredDistance(coord1,coord2))}function wrapX(coordinate,projection){if(projection.canWrapX()){const worldWidth=(0,_extent_js__WEBPACK_IMPORTED_MODULE_0__.RG)(projection.getExtent()),worldsAway=function getWorldsAway(coordinate,projection,sourceExtentWidth){const projectionExtent=projection.getExtent();let worldsAway=0;projection.canWrapX()&&(coordinate[0]<projectionExtent[0]||coordinate[0]>projectionExtent[2])&&(sourceExtentWidth=sourceExtentWidth||(0,_extent_js__WEBPACK_IMPORTED_MODULE_0__.RG)(projectionExtent),worldsAway=Math.floor((coordinate[0]-projectionExtent[0])/sourceExtentWidth));return worldsAway}(coordinate,projection,worldWidth);worldsAway&&(coordinate[0]-=worldsAway*worldWidth)}return coordinate}},"./node_modules/ol/css.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{$N:()=>CLASS_CONTROL,K5:()=>getFontParameters,NM:()=>fontWeights,Q5:()=>CLASS_SELECTABLE,Si:()=>CLASS_HIDDEN,XI:()=>CLASS_UNSELECTABLE,nT:()=>CLASS_COLLAPSED});const CLASS_HIDDEN="ol-hidden",CLASS_SELECTABLE="ol-selectable",CLASS_UNSELECTABLE="ol-unselectable",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z0-9]+?)\\s*$"].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],fontWeights={normal:400,bold:700},getFontParameters=function(fontSpec){const match=fontSpec.match(fontRegEx);if(!match)return null;const style={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,ii=fontRegExMatchIndex.length;i<ii;++i){const value=match[i+1];void 0!==value&&(style[fontRegExMatchIndex[i]]="string"==typeof value?value.trim():value)}return isNaN(Number(style.weight))&&style.weight in fontWeights&&(style.weight=fontWeights[style.weight]),style.families=style.family.split(/,\s?/).map(f=>f.trim().replace(/^['"]|['"]$/g,"")),style}},"./node_modules/ol/dom.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{DK:()=>outerHeight,Gq:()=>outerWidth,WM:()=>replaceChildren,Y:()=>createCanvasContext2D,Yg:()=>releaseCanvas,fo:()=>replaceNode,gS:()=>removeChildren,lr:()=>getSharedCanvasContext2D,mH:()=>createMockDiv,rB:()=>isCanvas});var _has_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/has.js");function createCanvasContext2D(width,height,canvasPool,settings){let canvas;return canvas=canvasPool&&canvasPool.length?canvasPool.shift():_has_js__WEBPACK_IMPORTED_MODULE_0__.Wl?new class extends OffscreenCanvas{style={}}(width??300,height??150):document.createElement("canvas"),width&&(canvas.width=width),height&&(canvas.height=height),canvas.getContext("2d",settings)}let sharedCanvasContext;function getSharedCanvasContext2D(){return sharedCanvasContext||(sharedCanvasContext=createCanvasContext2D(1,1)),sharedCanvasContext}function releaseCanvas(context){const canvas=context.canvas;canvas.width=1,canvas.height=1,context.clearRect(0,0,1,1)}function outerWidth(element){let width=element.offsetWidth;const style=getComputedStyle(element);return width+=parseInt(style.marginLeft,10)+parseInt(style.marginRight,10),width}function outerHeight(element){let height=element.offsetHeight;const style=getComputedStyle(element);return height+=parseInt(style.marginTop,10)+parseInt(style.marginBottom,10),height}function replaceNode(newNode,oldNode){const parent=oldNode.parentNode;parent&&parent.replaceChild(newNode,oldNode)}function removeChildren(node){for(;node.lastChild;)node.lastChild.remove()}function replaceChildren(node,children){const oldChildren=node.childNodes;for(let i=0;;++i){const oldChild=oldChildren[i],newChild=children[i];if(!oldChild&&!newChild)break;oldChild!==newChild&&(oldChild?newChild?node.insertBefore(newChild,oldChild):(node.removeChild(oldChild),--i):node.appendChild(newChild))}}function createMockDiv(){return new Proxy({childNodes:[],appendChild:function(node){return this.childNodes.push(node),node},remove:function(){},removeChild:function(node){const index=this.childNodes.indexOf(node);if(-1===index)throw new Error("Node to remove was not found");return this.childNodes.splice(index,1),node},insertBefore:function(newNode,referenceNode){const index=this.childNodes.indexOf(referenceNode);if(-1===index)throw new Error("Reference node not found");return this.childNodes.splice(index,0,newNode),newNode},style:{}},{get:(target,prop,receiver)=>"firstElementChild"===prop?target.childNodes.length>0?target.childNodes[0]:null:Reflect.get(target,prop,receiver)})}function isCanvas(obj){return"undefined"!=typeof HTMLCanvasElement&&obj instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&obj instanceof OffscreenCanvas}},"./node_modules/ol/easing.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function easeOut(t){return 1-function easeIn(t){return Math.pow(t,3)}(1-t)}function inAndOut(t){return 3*t*t-2*t*t*t}function linear(t){return t}__webpack_require__.d(__webpack_exports__,{T9:()=>inAndOut,sn:()=>linear,vT:()=>easeOut})},"./node_modules/ol/events.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{JH:()=>unlistenByKey,Jz:()=>listenOnce,KT:()=>listen});var _obj_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/obj.js");function listen(target,type,listener,thisArg,once){if(once){const originalListener=listener;listener=function(event){return target.removeEventListener(type,listener),originalListener.call(thisArg??this,event)}}else thisArg&&thisArg!==target&&(listener=listener.bind(thisArg));const eventsKey={target,type,listener};return target.addEventListener(type,listener),eventsKey}function listenOnce(target,type,listener,thisArg){return listen(target,type,listener,thisArg,!0)}function unlistenByKey(key){key&&key.target&&(key.target.removeEventListener(key.type,key.listener),(0,_obj_js__WEBPACK_IMPORTED_MODULE_0__.I)(key))}},"./node_modules/ol/events/Event.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=class BaseEvent{constructor(type){this.propagationStopped,this.defaultPrevented,this.type=type,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},"./node_modules/ol/events/EventType.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},"./node_modules/ol/events/Target.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _Disposable_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/Disposable.js"),_functions_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/functions.js"),_obj_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/obj.js"),_Event_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/events/Event.js");class Target extends _Disposable_js__WEBPACK_IMPORTED_MODULE_0__.A{constructor(target){super(),this.eventTarget_=target,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(type,listener){if(!type||!listener)return;const listeners=this.listeners_||(this.listeners_={}),listenersForType=listeners[type]||(listeners[type]=[]);listenersForType.includes(listener)||listenersForType.push(listener)}dispatchEvent(event){const isString="string"==typeof event,type=isString?event:event.type,listeners=this.listeners_&&this.listeners_[type];if(!listeners)return;const evt=isString?new _Event_js__WEBPACK_IMPORTED_MODULE_3__.Ay(event):event;evt.target||(evt.target=this.eventTarget_||this);const dispatching=this.dispatching_||(this.dispatching_={}),pendingRemovals=this.pendingRemovals_||(this.pendingRemovals_={});let propagate;type in dispatching||(dispatching[type]=0,pendingRemovals[type]=0),++dispatching[type];for(let i=0,ii=listeners.length;i<ii;++i)if(propagate="handleEvent"in listeners[i]?listeners[i].handleEvent(evt):listeners[i].call(this,evt),!1===propagate||evt.propagationStopped){propagate=!1;break}if(0===--dispatching[type]){let pr=pendingRemovals[type];for(delete pendingRemovals[type];pr--;)this.removeEventListener(type,_functions_js__WEBPACK_IMPORTED_MODULE_1__.tV);delete dispatching[type]}return propagate}disposeInternal(){this.listeners_&&(0,_obj_js__WEBPACK_IMPORTED_MODULE_2__.I)(this.listeners_)}getListeners(type){return this.listeners_&&this.listeners_[type]||void 0}hasListener(type){return!!this.listeners_&&(type?type in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(type,listener){if(!this.listeners_)return;const listeners=this.listeners_[type];if(!listeners)return;const index=listeners.indexOf(listener);-1!==index&&(this.pendingRemovals_&&type in this.pendingRemovals_?(listeners[index]=_functions_js__WEBPACK_IMPORTED_MODULE_1__.tV,++this.pendingRemovals_[type]):(listeners.splice(index,1),0===listeners.length&&delete this.listeners_[type]))}}const __WEBPACK_DEFAULT_EXPORT__=Target},"./node_modules/ol/events/condition.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A4:()=>mouseOnly,GB:()=>platformModifierKey,Gk:()=>always,IO:()=>altShiftKeysOnly,Kg:()=>shiftKeyOnly,Q7:()=>all,TS:()=>noModifierKeys,Zm:()=>never,at:()=>mouseActionButton,eL:()=>focusWithTabindex,fs:()=>primaryAction,tE:()=>targetNotEditable});var _functions_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/functions.js"),_has_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/has.js");function all(var_args){const conditions=arguments;return function(event){let pass=!0;for(let i=0,ii=conditions.length;i<ii&&(pass=pass&&conditions[i](event),pass);++i);return pass}}const altShiftKeysOnly=function(mapBrowserEvent){const originalEvent=mapBrowserEvent.originalEvent;return originalEvent.altKey&&!(originalEvent.metaKey||originalEvent.ctrlKey)&&originalEvent.shiftKey},focusWithTabindex=function(event){const targetElement=event.map.getTargetElement(),rootNode=targetElement.getRootNode();return!(rootNode instanceof ShadowRoot?rootNode.host:targetElement).hasAttribute("tabindex")||function(event){const targetElement=event.map.getTargetElement(),rootNode=targetElement.getRootNode(),activeElement=event.map.getOwnerDocument().activeElement;return rootNode instanceof ShadowRoot?rootNode.host.contains(activeElement):targetElement.contains(activeElement)}(event)},always=_functions_js__WEBPACK_IMPORTED_MODULE_0__.rT,mouseActionButton=function(mapBrowserEvent){const originalEvent=mapBrowserEvent.originalEvent;return"pointerId"in originalEvent&&0==originalEvent.button&&!(_has_js__WEBPACK_IMPORTED_MODULE_1__.j&&_has_js__WEBPACK_IMPORTED_MODULE_1__.ew&&originalEvent.ctrlKey)},never=_functions_js__WEBPACK_IMPORTED_MODULE_0__.W8,noModifierKeys=function(mapBrowserEvent){const originalEvent=mapBrowserEvent.originalEvent;return!originalEvent.altKey&&!(originalEvent.metaKey||originalEvent.ctrlKey)&&!originalEvent.shiftKey},platformModifierKey=function(mapBrowserEvent){const originalEvent=mapBrowserEvent.originalEvent;return _has_js__WEBPACK_IMPORTED_MODULE_1__.ew?originalEvent.metaKey:originalEvent.ctrlKey},shiftKeyOnly=function(mapBrowserEvent){const originalEvent=mapBrowserEvent.originalEvent;return!originalEvent.altKey&&!(originalEvent.metaKey||originalEvent.ctrlKey)&&originalEvent.shiftKey},targetNotEditable=function(mapBrowserEvent){const originalEvent=mapBrowserEvent.originalEvent,tagName=originalEvent.target.tagName;return"INPUT"!==tagName&&"SELECT"!==tagName&&"TEXTAREA"!==tagName&&!originalEvent.target.isContentEditable},mouseOnly=function(mapBrowserEvent){const pointerEvent=mapBrowserEvent.originalEvent;return"pointerId"in pointerEvent&&"mouse"==pointerEvent.pointerType},primaryAction=function(mapBrowserEvent){const pointerEvent=mapBrowserEvent.originalEvent;return"pointerId"in pointerEvent&&pointerEvent.isPrimary&&0===pointerEvent.button}},"./node_modules/ol/extent.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{$C:()=>extendCoordinate,$u:()=>returnOrUpdate,Bg:()=>getForViewAndSize,HY:()=>intersects,Im:()=>isEmpty,Ld:()=>closestSquaredDistanceXY,Li:()=>wrapX,Mx:()=>intersectsSegment,N:()=>createOrUpdate,NW:()=>applyTransform,Oq:()=>getHeight,Py:()=>getTopLeft,QJ:()=>wrapAndSliceX,R:()=>getBottomLeft,R8:()=>extendFlatCoordinates,RG:()=>getWidth,Rj:()=>containsXY,S5:()=>createEmpty,Tr:()=>boundingExtent,Vy:()=>createOrUpdateFromFlatCoordinates,WU:()=>getTopRight,X$:()=>extend,Ym:()=>containsCoordinate,_N:()=>getIntersection,aI:()=>equals,aZ:()=>createOrUpdateEmpty,dP:()=>createOrUpdateFromCoordinate,k_:()=>getBottomRight,ms:()=>containsExtent,o8:()=>clone,q1:()=>getCenter,r:()=>buffer,sB:()=>forEachCorner,vz:()=>coordinateRelationship});var _extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/extent/Relationship.js");function boundingExtent(coordinates){const extent=createEmpty();for(let i=0,ii=coordinates.length;i<ii;++i)extendCoordinate(extent,coordinates[i]);return extent}function buffer(extent,value,dest){return dest?(dest[0]=extent[0]-value,dest[1]=extent[1]-value,dest[2]=extent[2]+value,dest[3]=extent[3]+value,dest):[extent[0]-value,extent[1]-value,extent[2]+value,extent[3]+value]}function clone(extent,dest){return dest?(dest[0]=extent[0],dest[1]=extent[1],dest[2]=extent[2],dest[3]=extent[3],dest):extent.slice()}function closestSquaredDistanceXY(extent,x,y){let dx,dy;return dx=x<extent[0]?extent[0]-x:extent[2]<x?x-extent[2]:0,dy=y<extent[1]?extent[1]-y:extent[3]<y?y-extent[3]:0,dx*dx+dy*dy}function containsCoordinate(extent,coordinate){return containsXY(extent,coordinate[0],coordinate[1])}function containsExtent(extent1,extent2){return extent1[0]<=extent2[0]&&extent2[2]<=extent1[2]&&extent1[1]<=extent2[1]&&extent2[3]<=extent1[3]}function containsXY(extent,x,y){return extent[0]<=x&&x<=extent[2]&&extent[1]<=y&&y<=extent[3]}function coordinateRelationship(extent,coordinate){const minX=extent[0],minY=extent[1],maxX=extent[2],maxY=extent[3],x=coordinate[0],y=coordinate[1];let relationship=_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.UNKNOWN;return x<minX?relationship|=_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.LEFT:x>maxX&&(relationship|=_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.RIGHT),y<minY?relationship|=_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.BELOW:y>maxY&&(relationship|=_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.ABOVE),relationship===_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.UNKNOWN&&(relationship=_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.INTERSECTING),relationship}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate(minX,minY,maxX,maxY,dest){return dest?(dest[0]=minX,dest[1]=minY,dest[2]=maxX,dest[3]=maxY,dest):[minX,minY,maxX,maxY]}function createOrUpdateEmpty(dest){return createOrUpdate(1/0,1/0,-1/0,-1/0,dest)}function createOrUpdateFromCoordinate(coordinate,dest){const x=coordinate[0],y=coordinate[1];return createOrUpdate(x,y,x,y,dest)}function createOrUpdateFromFlatCoordinates(flatCoordinates,offset,end,stride,dest){return extendFlatCoordinates(createOrUpdateEmpty(dest),flatCoordinates,offset,end,stride)}function equals(extent1,extent2){return extent1[0]==extent2[0]&&extent1[2]==extent2[2]&&extent1[1]==extent2[1]&&extent1[3]==extent2[3]}function extend(extent1,extent2){return extent2[0]<extent1[0]&&(extent1[0]=extent2[0]),extent2[2]>extent1[2]&&(extent1[2]=extent2[2]),extent2[1]<extent1[1]&&(extent1[1]=extent2[1]),extent2[3]>extent1[3]&&(extent1[3]=extent2[3]),extent1}function extendCoordinate(extent,coordinate){coordinate[0]<extent[0]&&(extent[0]=coordinate[0]),coordinate[0]>extent[2]&&(extent[2]=coordinate[0]),coordinate[1]<extent[1]&&(extent[1]=coordinate[1]),coordinate[1]>extent[3]&&(extent[3]=coordinate[1])}function extendFlatCoordinates(extent,flatCoordinates,offset,end,stride){for(;offset<end;offset+=stride)extendXY(extent,flatCoordinates[offset],flatCoordinates[offset+1]);return extent}function extendXY(extent,x,y){extent[0]=Math.min(extent[0],x),extent[1]=Math.min(extent[1],y),extent[2]=Math.max(extent[2],x),extent[3]=Math.max(extent[3],y)}function forEachCorner(extent,callback){let val;return val=callback(getBottomLeft(extent)),val||(val=callback(getBottomRight(extent)),val||(val=callback(getTopRight(extent)),val||(val=callback(getTopLeft(extent)),val||!1)))}function getBottomLeft(extent){return[extent[0],extent[1]]}function getBottomRight(extent){return[extent[2],extent[1]]}function getCenter(extent){return[(extent[0]+extent[2])/2,(extent[1]+extent[3])/2]}function getForViewAndSize(center,resolution,rotation,size,dest){const[x0,y0,x1,y1,x2,y2,x3,y3]=function getRotatedViewport(center,resolution,rotation,size){const dx=resolution*size[0]/2,dy=resolution*size[1]/2,cosRotation=Math.cos(rotation),sinRotation=Math.sin(rotation),xCos=dx*cosRotation,xSin=dx*sinRotation,yCos=dy*cosRotation,ySin=dy*sinRotation,x=center[0],y=center[1];return[x-xCos+ySin,y-xSin-yCos,x-xCos-ySin,y-xSin+yCos,x+xCos-ySin,y+xSin+yCos,x+xCos+ySin,y+xSin-yCos,x-xCos+ySin,y-xSin-yCos]}(center,resolution,rotation,size);return createOrUpdate(Math.min(x0,x1,x2,x3),Math.min(y0,y1,y2,y3),Math.max(x0,x1,x2,x3),Math.max(y0,y1,y2,y3),dest)}function getHeight(extent){return extent[3]-extent[1]}function getIntersection(extent1,extent2,dest){const intersection=dest||[1/0,1/0,-1/0,-1/0];return intersects(extent1,extent2)?(extent1[0]>extent2[0]?intersection[0]=extent1[0]:intersection[0]=extent2[0],extent1[1]>extent2[1]?intersection[1]=extent1[1]:intersection[1]=extent2[1],extent1[2]<extent2[2]?intersection[2]=extent1[2]:intersection[2]=extent2[2],extent1[3]<extent2[3]?intersection[3]=extent1[3]:intersection[3]=extent2[3]):createOrUpdateEmpty(intersection),intersection}function getTopLeft(extent){return[extent[0],extent[3]]}function getTopRight(extent){return[extent[2],extent[3]]}function getWidth(extent){return extent[2]-extent[0]}function intersects(extent1,extent2){return extent1[0]<=extent2[2]&&extent1[2]>=extent2[0]&&extent1[1]<=extent2[3]&&extent1[3]>=extent2[1]}function isEmpty(extent){return extent[2]<extent[0]||extent[3]<extent[1]}function returnOrUpdate(extent,dest){return dest?(dest[0]=extent[0],dest[1]=extent[1],dest[2]=extent[2],dest[3]=extent[3],dest):extent}function intersectsSegment(extent,start,end){let intersects=!1;const startRel=coordinateRelationship(extent,start),endRel=coordinateRelationship(extent,end);if(startRel===_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.INTERSECTING||endRel===_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.INTERSECTING)intersects=!0;else{const minX=extent[0],minY=extent[1],maxX=extent[2],maxY=extent[3],startX=start[0],startY=start[1],endX=end[0],endY=end[1],slope=(endY-startY)/(endX-startX);let x,y;endRel&_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.ABOVE&&!(startRel&_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.ABOVE)&&(x=endX-(endY-maxY)/slope,intersects=x>=minX&&x<=maxX),intersects||!(endRel&_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.RIGHT)||startRel&_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.RIGHT||(y=endY-(endX-maxX)*slope,intersects=y>=minY&&y<=maxY),intersects||!(endRel&_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.BELOW)||startRel&_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.BELOW||(x=endX-(endY-minY)/slope,intersects=x>=minX&&x<=maxX),intersects||!(endRel&_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.LEFT)||startRel&_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_0__.A.LEFT||(y=endY-(endX-minX)*slope,intersects=y>=minY&&y<=maxY)}return intersects}function applyTransform(extent,transformFn,dest,stops){if(isEmpty(extent))return createOrUpdateEmpty(dest);let coordinates=[];if(stops>1){const width=extent[2]-extent[0],height=extent[3]-extent[1];for(let i=0;i<stops;++i)coordinates.push(extent[0]+width*i/stops,extent[1],extent[2],extent[1]+height*i/stops,extent[2]-width*i/stops,extent[3],extent[0],extent[3]-height*i/stops)}else coordinates=[extent[0],extent[1],extent[2],extent[1],extent[2],extent[3],extent[0],extent[3]];transformFn(coordinates,coordinates,2);const xs=[],ys=[];for(let i=0,l=coordinates.length;i<l;i+=2)xs.push(coordinates[i]),ys.push(coordinates[i+1]);return function _boundingExtentXYs(xs,ys,dest){return createOrUpdate(Math.min.apply(null,xs),Math.min.apply(null,ys),Math.max.apply(null,xs),Math.max.apply(null,ys),dest)}(xs,ys,dest)}function wrapX(extent,projection){const projectionExtent=projection.getExtent(),center=getCenter(extent);if(projection.canWrapX()&&(center[0]<projectionExtent[0]||center[0]>=projectionExtent[2])){const worldWidth=getWidth(projectionExtent),offset=Math.floor((center[0]-projectionExtent[0])/worldWidth)*worldWidth;extent[0]-=offset,extent[2]-=offset}return extent}function wrapAndSliceX(extent,projection,multiWorld){if(projection.canWrapX()){const projectionExtent=projection.getExtent();if(!isFinite(extent[0])||!isFinite(extent[2]))return[[projectionExtent[0],extent[1],projectionExtent[2],extent[3]]];wrapX(extent,projection);const worldWidth=getWidth(projectionExtent);if(getWidth(extent)>worldWidth&&!multiWorld)return[[projectionExtent[0],extent[1],projectionExtent[2],extent[3]]];if(extent[0]<projectionExtent[0])return[[extent[0]+worldWidth,extent[1],projectionExtent[2],extent[3]],[projectionExtent[0],extent[1],extent[2],extent[3]]];if(extent[2]>projectionExtent[2])return[[extent[0],extent[1],projectionExtent[2],extent[3]],[projectionExtent[0],extent[1],extent[2]-worldWidth,extent[3]]]}return[extent]}},"./node_modules/ol/extent/Relationship.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},"./node_modules/ol/functions.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{B4:()=>memoizeOne,W8:()=>FALSE,hq:()=>toPromise,rT:()=>TRUE,tV:()=>VOID});var _array_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/array.js");function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(fn){let lastResult,lastArgs,lastThis;return function(){const nextArgs=Array.prototype.slice.call(arguments);return lastArgs&&this===lastThis&&(0,_array_js__WEBPACK_IMPORTED_MODULE_0__.aI)(nextArgs,lastArgs)||(lastThis=this,lastArgs=nextArgs,lastResult=fn.apply(this,arguments)),lastResult}}function toPromise(getter){return function promiseGetter(){let value;try{value=getter()}catch(err){return Promise.reject(err)}return value instanceof Promise?value:Promise.resolve(value)}()}},"./node_modules/ol/geom/Geometry.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _Object_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/Object.js"),_extent_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/extent.js"),_functions_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/functions.js"),_proj_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/proj.js"),_transform_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/transform.js"),_util_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/ol/util.js"),_flat_transform_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/ol/geom/flat/transform.js");const tmpTransform=(0,_transform_js__WEBPACK_IMPORTED_MODULE_4__.vt)(),tmpPoint=[NaN,NaN];class Geometry extends _Object_js__WEBPACK_IMPORTED_MODULE_0__.A{constructor(){super(),this.extent_=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.S5)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,_functions_js__WEBPACK_IMPORTED_MODULE_2__.B4)((revision,squaredTolerance,transform)=>{if(!transform)return this.getSimplifiedGeometry(squaredTolerance);const clone=this.clone();return clone.applyTransform(transform),clone.getSimplifiedGeometry(squaredTolerance)})}simplifyTransformed(squaredTolerance,transform){return this.simplifyTransformedInternal(this.getRevision(),squaredTolerance,transform)}clone(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_5__.b0)()}closestPointXY(x,y,closestPoint,minSquaredDistance){return(0,_util_js__WEBPACK_IMPORTED_MODULE_5__.b0)()}containsXY(x,y){return 0===this.closestPointXY(x,y,tmpPoint,Number.MIN_VALUE)}getClosestPoint(point,closestPoint){return closestPoint=closestPoint||[NaN,NaN],this.closestPointXY(point[0],point[1],closestPoint,1/0),closestPoint}intersectsCoordinate(coordinate){return this.containsXY(coordinate[0],coordinate[1])}computeExtent(extent){return(0,_util_js__WEBPACK_IMPORTED_MODULE_5__.b0)()}getExtent(extent){if(this.extentRevision_!=this.getRevision()){const extent=this.computeExtent(this.extent_);(isNaN(extent[0])||isNaN(extent[1]))&&(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.aZ)(extent),this.extentRevision_=this.getRevision()}return(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.$u)(this.extent_,extent)}rotate(angle,anchor){(0,_util_js__WEBPACK_IMPORTED_MODULE_5__.b0)()}scale(sx,sy,anchor){(0,_util_js__WEBPACK_IMPORTED_MODULE_5__.b0)()}simplify(tolerance){return this.getSimplifiedGeometry(tolerance*tolerance)}getSimplifiedGeometry(squaredTolerance){return(0,_util_js__WEBPACK_IMPORTED_MODULE_5__.b0)()}getType(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_5__.b0)()}applyTransform(transformFn){(0,_util_js__WEBPACK_IMPORTED_MODULE_5__.b0)()}intersectsExtent(extent){return(0,_util_js__WEBPACK_IMPORTED_MODULE_5__.b0)()}translate(deltaX,deltaY){(0,_util_js__WEBPACK_IMPORTED_MODULE_5__.b0)()}transform(source,destination){const sourceProj=(0,_proj_js__WEBPACK_IMPORTED_MODULE_3__.Jt)(source),transformFn="tile-pixels"==sourceProj.getUnits()?function(inCoordinates,outCoordinates,stride){const pixelExtent=sourceProj.getExtent(),projectedExtent=sourceProj.getWorldExtent(),scale=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.Oq)(projectedExtent)/(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.Oq)(pixelExtent);(0,_transform_js__WEBPACK_IMPORTED_MODULE_4__.Zz)(tmpTransform,projectedExtent[0],projectedExtent[3],scale,-scale,0,0,0);const transformed=(0,_flat_transform_js__WEBPACK_IMPORTED_MODULE_6__.Rc)(inCoordinates,0,inCoordinates.length,stride,tmpTransform,outCoordinates),projTransform=(0,_proj_js__WEBPACK_IMPORTED_MODULE_3__.RG)(sourceProj,destination);return projTransform?projTransform(transformed,transformed,stride):transformed}:(0,_proj_js__WEBPACK_IMPORTED_MODULE_3__.RG)(sourceProj,destination);return this.applyTransform(transformFn),this}}const __WEBPACK_DEFAULT_EXPORT__=Geometry},"./node_modules/ol/geom/LineString.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _array_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/array.js"),_extent_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/extent.js"),_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/geom/SimpleGeometry.js"),_flat_closest_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/geom/flat/closest.js"),_flat_deflate_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/geom/flat/deflate.js"),_flat_inflate_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/ol/geom/flat/inflate.js"),_flat_interpolate_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/ol/geom/flat/interpolate.js"),_flat_intersectsextent_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/ol/geom/flat/intersectsextent.js"),_flat_length_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/ol/geom/flat/length.js"),_flat_segments_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/ol/geom/flat/segments.js"),_flat_simplify_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/ol/geom/flat/simplify.js");class LineString extends _SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_2__.Ay{constructor(coordinates,layout){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===layout||Array.isArray(coordinates[0])?this.setCoordinates(coordinates,layout):this.setFlatCoordinates(layout,coordinates)}appendCoordinate(coordinate){(0,_array_js__WEBPACK_IMPORTED_MODULE_0__.X$)(this.flatCoordinates,coordinate),this.changed()}clone(){const lineString=new LineString(this.flatCoordinates.slice(),this.layout);return lineString.applyProperties(this),lineString}closestPointXY(x,y,closestPoint,minSquaredDistance){return minSquaredDistance<(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.Ld)(this.getExtent(),x,y)?minSquaredDistance:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,_flat_closest_js__WEBPACK_IMPORTED_MODULE_3__.MD)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,_flat_closest_js__WEBPACK_IMPORTED_MODULE_3__.n)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,x,y,closestPoint,minSquaredDistance))}forEachSegment(callback){return(0,_flat_segments_js__WEBPACK_IMPORTED_MODULE_9__.j)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,callback)}getCoordinateAtM(m,extrapolate){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(extrapolate=void 0!==extrapolate&&extrapolate,(0,_flat_interpolate_js__WEBPACK_IMPORTED_MODULE_6__.gr)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,m,extrapolate))}getCoordinates(){return(0,_flat_inflate_js__WEBPACK_IMPORTED_MODULE_5__.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(fraction,dest){return(0,_flat_interpolate_js__WEBPACK_IMPORTED_MODULE_6__.SH)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,fraction,dest,this.stride)}getLength(){return(0,_flat_length_js__WEBPACK_IMPORTED_MODULE_8__.k)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(squaredTolerance){const simplifiedFlatCoordinates=[];return simplifiedFlatCoordinates.length=(0,_flat_simplify_js__WEBPACK_IMPORTED_MODULE_10__.P4)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,squaredTolerance,simplifiedFlatCoordinates,0),new LineString(simplifiedFlatCoordinates,"XY")}getType(){return"LineString"}intersectsExtent(extent){return(0,_flat_intersectsextent_js__WEBPACK_IMPORTED_MODULE_7__.gp)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,extent,this.getExtent())}setCoordinates(coordinates,layout){this.setLayout(layout,coordinates,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,_flat_deflate_js__WEBPACK_IMPORTED_MODULE_4__.z2)(this.flatCoordinates,0,coordinates,this.stride),this.changed()}}const __WEBPACK_DEFAULT_EXPORT__=LineString},"./node_modules/ol/geom/Point.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _extent_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/extent.js"),_math_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/math.js"),_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/geom/SimpleGeometry.js"),_flat_deflate_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/geom/flat/deflate.js");class Point extends _SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_2__.Ay{constructor(coordinates,layout){super(),this.setCoordinates(coordinates,layout)}clone(){const point=new Point(this.flatCoordinates.slice(),this.layout);return point.applyProperties(this),point}closestPointXY(x,y,closestPoint,minSquaredDistance){const flatCoordinates=this.flatCoordinates,squaredDistance=(0,_math_js__WEBPACK_IMPORTED_MODULE_1__.hG)(x,y,flatCoordinates[0],flatCoordinates[1]);if(squaredDistance<minSquaredDistance){const stride=this.stride;for(let i=0;i<stride;++i)closestPoint[i]=flatCoordinates[i];return closestPoint.length=stride,squaredDistance}return minSquaredDistance}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(extent){return(0,_extent_js__WEBPACK_IMPORTED_MODULE_0__.dP)(this.flatCoordinates,extent)}getType(){return"Point"}intersectsExtent(extent){return(0,_extent_js__WEBPACK_IMPORTED_MODULE_0__.Rj)(extent,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(coordinates,layout){this.setLayout(layout,coordinates,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,_flat_deflate_js__WEBPACK_IMPORTED_MODULE_3__._n)(this.flatCoordinates,0,coordinates,this.stride),this.changed()}}const __WEBPACK_DEFAULT_EXPORT__=Point},"./node_modules/ol/geom/Polygon.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>geom_Polygon,VY:()=>fromExtent});var array=__webpack_require__("./node_modules/ol/array.js"),ol_extent=__webpack_require__("./node_modules/ol/extent.js"),SimpleGeometry=__webpack_require__("./node_modules/ol/geom/SimpleGeometry.js"),flat_area=__webpack_require__("./node_modules/ol/geom/flat/area.js"),closest=__webpack_require__("./node_modules/ol/geom/flat/closest.js"),deflate=__webpack_require__("./node_modules/ol/geom/flat/deflate.js"),inflate=__webpack_require__("./node_modules/ol/geom/flat/inflate.js"),simplify=__webpack_require__("./node_modules/ol/geom/flat/simplify.js");class LinearRing extends SimpleGeometry.Ay{constructor(coordinates,layout){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===layout||Array.isArray(coordinates[0])?this.setCoordinates(coordinates,layout):this.setFlatCoordinates(layout,coordinates)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(x,y,closestPoint,minSquaredDistance){return minSquaredDistance<(0,ol_extent.Ld)(this.getExtent(),x,y)?minSquaredDistance:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,closest.MD)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,closest.n)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,x,y,closestPoint,minSquaredDistance))}getArea(){return(0,flat_area.eN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,inflate.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(squaredTolerance){const simplifiedFlatCoordinates=[];return simplifiedFlatCoordinates.length=(0,simplify.P4)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,squaredTolerance,simplifiedFlatCoordinates,0),new LinearRing(simplifiedFlatCoordinates,"XY")}getType(){return"LinearRing"}intersectsExtent(extent){return!1}setCoordinates(coordinates,layout){this.setLayout(layout,coordinates,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,deflate.z2)(this.flatCoordinates,0,coordinates,this.stride),this.changed()}}const geom_LinearRing=LinearRing;var Point=__webpack_require__("./node_modules/ol/geom/Point.js"),contains=__webpack_require__("./node_modules/ol/geom/flat/contains.js"),interiorpoint=__webpack_require__("./node_modules/ol/geom/flat/interiorpoint.js"),intersectsextent=__webpack_require__("./node_modules/ol/geom/flat/intersectsextent.js"),orient=__webpack_require__("./node_modules/ol/geom/flat/orient.js");class Polygon extends SimpleGeometry.Ay{constructor(coordinates,layout,ends){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==layout&&ends?(this.setFlatCoordinates(layout,coordinates),this.ends_=ends):this.setCoordinates(coordinates,layout)}appendLinearRing(linearRing){this.flatCoordinates?(0,array.X$)(this.flatCoordinates,linearRing.getFlatCoordinates()):this.flatCoordinates=linearRing.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const polygon=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return polygon.applyProperties(this),polygon}closestPointXY(x,y,closestPoint,minSquaredDistance){return minSquaredDistance<(0,ol_extent.Ld)(this.getExtent(),x,y)?minSquaredDistance:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,closest.HX)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,closest.oW)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,x,y,closestPoint,minSquaredDistance))}containsXY(x,y){return(0,contains.zb)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,x,y)}getArea(){return(0,flat_area.PK)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(right){let flatCoordinates;return void 0!==right?(flatCoordinates=this.getOrientedFlatCoordinates().slice(),(0,orient.ug)(flatCoordinates,0,this.ends_,this.stride,right)):flatCoordinates=this.flatCoordinates,(0,inflate.cD)(flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const flatCenter=(0,ol_extent.q1)(this.getExtent());this.flatInteriorPoint_=(0,interiorpoint.J)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,flatCenter,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point.A(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(index){return index<0||this.ends_.length<=index?null:new geom_LinearRing(this.flatCoordinates.slice(0===index?0:this.ends_[index-1],this.ends_[index]),this.layout)}getLinearRings(){const layout=this.layout,flatCoordinates=this.flatCoordinates,ends=this.ends_,linearRings=[];let offset=0;for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i],linearRing=new geom_LinearRing(flatCoordinates.slice(offset,end),layout);linearRings.push(linearRing),offset=end}return linearRings}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const flatCoordinates=this.flatCoordinates;(0,orient.PA)(flatCoordinates,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=flatCoordinates:(this.orientedFlatCoordinates_=flatCoordinates.slice(),this.orientedFlatCoordinates_.length=(0,orient.ug)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(squaredTolerance){const simplifiedFlatCoordinates=[],simplifiedEnds=[];return simplifiedFlatCoordinates.length=(0,simplify.Hg)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(squaredTolerance),simplifiedFlatCoordinates,0,simplifiedEnds),new Polygon(simplifiedFlatCoordinates,"XY",simplifiedEnds)}getType(){return"Polygon"}intersectsExtent(extent){return(0,intersectsextent.HT)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,extent)}setCoordinates(coordinates,layout){this.setLayout(layout,coordinates,2),this.flatCoordinates||(this.flatCoordinates=[]);const ends=(0,deflate.KG)(this.flatCoordinates,0,coordinates,this.stride,this.ends_);this.flatCoordinates.length=0===ends.length?0:ends[ends.length-1],this.changed()}}const geom_Polygon=Polygon;function fromExtent(extent){if((0,ol_extent.Im)(extent))throw new Error("Cannot create polygon from empty extent");const minX=extent[0],minY=extent[1],maxX=extent[2],maxY=extent[3],flatCoordinates=[minX,minY,minX,maxY,maxX,maxY,maxX,minY,minX,minY];return new Polygon(flatCoordinates,"XY",[flatCoordinates.length])}},"./node_modules/ol/geom/SimpleGeometry.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,dn:()=>getStrideForLayout,v7:()=>transformGeom2D});var _extent_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/extent.js"),_util_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/util.js"),_Geometry_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/geom/Geometry.js"),_flat_transform_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/geom/flat/transform.js");class SimpleGeometry extends _Geometry_js__WEBPACK_IMPORTED_MODULE_2__.A{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(extent){return(0,_extent_js__WEBPACK_IMPORTED_MODULE_0__.Vy)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,extent)}getCoordinates(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.b0)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(squaredTolerance){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),squaredTolerance<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&squaredTolerance<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const simplifiedGeometry=this.getSimplifiedGeometryInternal(squaredTolerance);return simplifiedGeometry.getFlatCoordinates().length<this.flatCoordinates.length?simplifiedGeometry:(this.simplifiedGeometryMaxMinSquaredTolerance=squaredTolerance,this)}getSimplifiedGeometryInternal(squaredTolerance){return this}getStride(){return this.stride}setFlatCoordinates(layout,flatCoordinates){this.stride=getStrideForLayout(layout),this.layout=layout,this.flatCoordinates=flatCoordinates}setCoordinates(coordinates,layout){(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.b0)()}setLayout(layout,coordinates,nesting){let stride;if(layout)stride=getStrideForLayout(layout);else{for(let i=0;i<nesting;++i){if(0===coordinates.length)return this.layout="XY",void(this.stride=2);coordinates=coordinates[0]}stride=coordinates.length,layout=function getLayoutForStride(stride){let layout;2==stride?layout="XY":3==stride?layout="XYZ":4==stride&&(layout="XYZM");return layout}(stride)}this.layout=layout,this.stride=stride}applyTransform(transformFn){this.flatCoordinates&&(transformFn(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(angle,anchor){const flatCoordinates=this.getFlatCoordinates();if(flatCoordinates){const stride=this.getStride();(0,_flat_transform_js__WEBPACK_IMPORTED_MODULE_3__.e$)(flatCoordinates,0,flatCoordinates.length,stride,angle,anchor,flatCoordinates),this.changed()}}scale(sx,sy,anchor){void 0===sy&&(sy=sx),anchor||(anchor=(0,_extent_js__WEBPACK_IMPORTED_MODULE_0__.q1)(this.getExtent()));const flatCoordinates=this.getFlatCoordinates();if(flatCoordinates){const stride=this.getStride();(0,_flat_transform_js__WEBPACK_IMPORTED_MODULE_3__.hs)(flatCoordinates,0,flatCoordinates.length,stride,sx,sy,anchor,flatCoordinates),this.changed()}}translate(deltaX,deltaY){const flatCoordinates=this.getFlatCoordinates();if(flatCoordinates){const stride=this.getStride();(0,_flat_transform_js__WEBPACK_IMPORTED_MODULE_3__.Tl)(flatCoordinates,0,flatCoordinates.length,stride,deltaX,deltaY,flatCoordinates),this.changed()}}}function getStrideForLayout(layout){let stride;return"XY"==layout?stride=2:"XYZ"==layout||"XYM"==layout?stride=3:"XYZM"==layout&&(stride=4),stride}function transformGeom2D(simpleGeometry,transform,dest){const flatCoordinates=simpleGeometry.getFlatCoordinates();if(!flatCoordinates)return null;const stride=simpleGeometry.getStride();return(0,_flat_transform_js__WEBPACK_IMPORTED_MODULE_3__.Rc)(flatCoordinates,0,flatCoordinates.length,stride,transform,dest)}const __WEBPACK_DEFAULT_EXPORT__=SimpleGeometry},"./node_modules/ol/geom/flat/area.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function linearRing(flatCoordinates,offset,end,stride){let twiceArea=0;const x0=flatCoordinates[end-stride],y0=flatCoordinates[end-stride+1];let dx1=0,dy1=0;for(;offset<end;offset+=stride){const dx2=flatCoordinates[offset]-x0,dy2=flatCoordinates[offset+1]-y0;twiceArea+=dy1*dx2-dx1*dy2,dx1=dx2,dy1=dy2}return twiceArea/2}function linearRings(flatCoordinates,offset,ends,stride){let area=0;for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i];area+=linearRing(flatCoordinates,offset,end,stride),offset=end}return area}function linearRingss(flatCoordinates,offset,endss,stride){let area=0;for(let i=0,ii=endss.length;i<ii;++i){const ends=endss[i];area+=linearRings(flatCoordinates,offset,ends,stride),offset=ends[ends.length-1]}return area}__webpack_require__.d(__webpack_exports__,{Cs:()=>linearRingss,PK:()=>linearRings,eN:()=>linearRing})},"./node_modules/ol/geom/flat/center.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>linearRingss});var _extent_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/extent.js");function linearRingss(flatCoordinates,offset,endss,stride){const flatCenters=[];let extent=(0,_extent_js__WEBPACK_IMPORTED_MODULE_0__.S5)();for(let i=0,ii=endss.length;i<ii;++i){const ends=endss[i];extent=(0,_extent_js__WEBPACK_IMPORTED_MODULE_0__.Vy)(flatCoordinates,offset,ends[0],stride),flatCenters.push((extent[0]+extent[2])/2,(extent[1]+extent[3])/2),offset=ends[ends.length-1]}return flatCenters}},"./node_modules/ol/geom/flat/closest.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{HX:()=>arrayMaxSquaredDelta,MD:()=>maxSquaredDelta,c:()=>multiArrayMaxSquaredDelta,n:()=>assignClosestPoint,oW:()=>assignClosestArrayPoint,te:()=>assignClosestMultiArrayPoint});var _math_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/math.js");function assignClosest(flatCoordinates,offset1,offset2,stride,x,y,closestPoint){const x1=flatCoordinates[offset1],y1=flatCoordinates[offset1+1],dx=flatCoordinates[offset2]-x1,dy=flatCoordinates[offset2+1]-y1;let offset;if(0===dx&&0===dy)offset=offset1;else{const t=((x-x1)*dx+(y-y1)*dy)/(dx*dx+dy*dy);if(t>1)offset=offset2;else{if(t>0){for(let i=0;i<stride;++i)closestPoint[i]=(0,_math_js__WEBPACK_IMPORTED_MODULE_0__.Cc)(flatCoordinates[offset1+i],flatCoordinates[offset2+i],t);return void(closestPoint.length=stride)}offset=offset1}}for(let i=0;i<stride;++i)closestPoint[i]=flatCoordinates[offset+i];closestPoint.length=stride}function maxSquaredDelta(flatCoordinates,offset,end,stride,max){let x1=flatCoordinates[offset],y1=flatCoordinates[offset+1];for(offset+=stride;offset<end;offset+=stride){const x2=flatCoordinates[offset],y2=flatCoordinates[offset+1],squaredDelta=(0,_math_js__WEBPACK_IMPORTED_MODULE_0__.hG)(x1,y1,x2,y2);squaredDelta>max&&(max=squaredDelta),x1=x2,y1=y2}return max}function arrayMaxSquaredDelta(flatCoordinates,offset,ends,stride,max){for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i];max=maxSquaredDelta(flatCoordinates,offset,end,stride,max),offset=end}return max}function multiArrayMaxSquaredDelta(flatCoordinates,offset,endss,stride,max){for(let i=0,ii=endss.length;i<ii;++i){const ends=endss[i];max=arrayMaxSquaredDelta(flatCoordinates,offset,ends,stride,max),offset=ends[ends.length-1]}return max}function assignClosestPoint(flatCoordinates,offset,end,stride,maxDelta,isRing,x,y,closestPoint,minSquaredDistance,tmpPoint){if(offset==end)return minSquaredDistance;let i,squaredDistance;if(0===maxDelta){if(squaredDistance=(0,_math_js__WEBPACK_IMPORTED_MODULE_0__.hG)(x,y,flatCoordinates[offset],flatCoordinates[offset+1]),squaredDistance<minSquaredDistance){for(i=0;i<stride;++i)closestPoint[i]=flatCoordinates[offset+i];return closestPoint.length=stride,squaredDistance}return minSquaredDistance}tmpPoint=tmpPoint||[NaN,NaN];let index=offset+stride;for(;index<end;)if(assignClosest(flatCoordinates,index-stride,index,stride,x,y,tmpPoint),squaredDistance=(0,_math_js__WEBPACK_IMPORTED_MODULE_0__.hG)(x,y,tmpPoint[0],tmpPoint[1]),squaredDistance<minSquaredDistance){for(minSquaredDistance=squaredDistance,i=0;i<stride;++i)closestPoint[i]=tmpPoint[i];closestPoint.length=stride,index+=stride}else index+=stride*Math.max((Math.sqrt(squaredDistance)-Math.sqrt(minSquaredDistance))/maxDelta|0,1);if(isRing&&(assignClosest(flatCoordinates,end-stride,offset,stride,x,y,tmpPoint),squaredDistance=(0,_math_js__WEBPACK_IMPORTED_MODULE_0__.hG)(x,y,tmpPoint[0],tmpPoint[1]),squaredDistance<minSquaredDistance)){for(minSquaredDistance=squaredDistance,i=0;i<stride;++i)closestPoint[i]=tmpPoint[i];closestPoint.length=stride}return minSquaredDistance}function assignClosestArrayPoint(flatCoordinates,offset,ends,stride,maxDelta,isRing,x,y,closestPoint,minSquaredDistance,tmpPoint){tmpPoint=tmpPoint||[NaN,NaN];for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i];minSquaredDistance=assignClosestPoint(flatCoordinates,offset,end,stride,maxDelta,isRing,x,y,closestPoint,minSquaredDistance,tmpPoint),offset=end}return minSquaredDistance}function assignClosestMultiArrayPoint(flatCoordinates,offset,endss,stride,maxDelta,isRing,x,y,closestPoint,minSquaredDistance,tmpPoint){tmpPoint=tmpPoint||[NaN,NaN];for(let i=0,ii=endss.length;i<ii;++i){const ends=endss[i];minSquaredDistance=assignClosestArrayPoint(flatCoordinates,offset,ends,stride,maxDelta,isRing,x,y,closestPoint,minSquaredDistance,tmpPoint),offset=ends[ends.length-1]}return minSquaredDistance}},"./node_modules/ol/geom/flat/contains.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Gd:()=>linearRingssContainsXY,a_:()=>linearRingContainsXY,t7:()=>linearRingContainsExtent,zb:()=>linearRingsContainsXY});var _extent_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/extent.js");function linearRingContainsExtent(flatCoordinates,offset,end,stride,extent){return!(0,_extent_js__WEBPACK_IMPORTED_MODULE_0__.sB)(extent,function(coordinate){return!linearRingContainsXY(flatCoordinates,offset,end,stride,coordinate[0],coordinate[1])})}function linearRingContainsXY(flatCoordinates,offset,end,stride,x,y){let wn=0,x1=flatCoordinates[end-stride],y1=flatCoordinates[end-stride+1];for(;offset<end;offset+=stride){const x2=flatCoordinates[offset],y2=flatCoordinates[offset+1];y1<=y?y2>y&&(x2-x1)*(y-y1)-(x-x1)*(y2-y1)>0&&wn++:y2<=y&&(x2-x1)*(y-y1)-(x-x1)*(y2-y1)<0&&wn--,x1=x2,y1=y2}return 0!==wn}function linearRingsContainsXY(flatCoordinates,offset,ends,stride,x,y){if(0===ends.length)return!1;if(!linearRingContainsXY(flatCoordinates,offset,ends[0],stride,x,y))return!1;for(let i=1,ii=ends.length;i<ii;++i)if(linearRingContainsXY(flatCoordinates,ends[i-1],ends[i],stride,x,y))return!1;return!0}function linearRingssContainsXY(flatCoordinates,offset,endss,stride,x,y){if(0===endss.length)return!1;for(let i=0,ii=endss.length;i<ii;++i){const ends=endss[i];if(linearRingsContainsXY(flatCoordinates,offset,ends,stride,x,y))return!0;offset=ends[ends.length-1]}return!1}},"./node_modules/ol/geom/flat/deflate.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function deflateCoordinate(flatCoordinates,offset,coordinate,stride){for(let i=0,ii=coordinate.length;i<ii;++i)flatCoordinates[offset++]=coordinate[i];return offset}function deflateCoordinates(flatCoordinates,offset,coordinates,stride){for(let i=0,ii=coordinates.length;i<ii;++i){const coordinate=coordinates[i];for(let j=0;j<stride;++j)flatCoordinates[offset++]=coordinate[j]}return offset}function deflateCoordinatesArray(flatCoordinates,offset,coordinatess,stride,ends){ends=ends||[];let i=0;for(let j=0,jj=coordinatess.length;j<jj;++j){const end=deflateCoordinates(flatCoordinates,offset,coordinatess[j],stride);ends[i++]=end,offset=end}return ends.length=i,ends}function deflateMultiCoordinatesArray(flatCoordinates,offset,coordinatesss,stride,endss){endss=endss||[];let i=0;for(let j=0,jj=coordinatesss.length;j<jj;++j){const ends=deflateCoordinatesArray(flatCoordinates,offset,coordinatesss[j],stride,endss[i]);0===ends.length&&(ends[0]=offset),endss[i++]=ends,offset=ends[ends.length-1]}return endss.length=i,endss}__webpack_require__.d(__webpack_exports__,{KG:()=>deflateCoordinatesArray,_n:()=>deflateCoordinate,d6:()=>deflateMultiCoordinatesArray,z2:()=>deflateCoordinates})},"./node_modules/ol/geom/flat/inflate.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function inflateCoordinates(flatCoordinates,offset,end,stride,coordinates){coordinates=void 0!==coordinates?coordinates:[];let i=0;for(let j=offset;j<end;j+=stride)coordinates[i++]=flatCoordinates.slice(j,j+stride);return coordinates.length=i,coordinates}function inflateCoordinatesArray(flatCoordinates,offset,ends,stride,coordinatess){coordinatess=void 0!==coordinatess?coordinatess:[];let i=0;for(let j=0,jj=ends.length;j<jj;++j){const end=ends[j];coordinatess[i++]=inflateCoordinates(flatCoordinates,offset,end,stride,coordinatess[i]),offset=end}return coordinatess.length=i,coordinatess}function inflateMultiCoordinatesArray(flatCoordinates,offset,endss,stride,coordinatesss){coordinatesss=void 0!==coordinatesss?coordinatesss:[];let i=0;for(let j=0,jj=endss.length;j<jj;++j){const ends=endss[j];coordinatesss[i++]=1===ends.length&&ends[0]===offset?[]:inflateCoordinatesArray(flatCoordinates,offset,ends,stride,coordinatesss[i]),offset=ends[ends.length-1]}return coordinatesss.length=i,coordinatesss}__webpack_require__.d(__webpack_exports__,{Dz:()=>inflateMultiCoordinatesArray,cD:()=>inflateCoordinatesArray,n2:()=>inflateCoordinates})},"./node_modules/ol/geom/flat/interiorpoint.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{J:()=>getInteriorPointOfArray,p:()=>getInteriorPointsOfMultiArray});var _array_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/array.js"),_contains_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/geom/flat/contains.js");function getInteriorPointOfArray(flatCoordinates,offset,ends,stride,flatCenters,flatCentersOffset,dest){let i,ii,x,x1,x2,y1,y2;const y=flatCenters[flatCentersOffset+1],intersections=[];for(let r=0,rr=ends.length;r<rr;++r){const end=ends[r];for(x1=flatCoordinates[end-stride],y1=flatCoordinates[end-stride+1],i=offset;i<end;i+=stride)x2=flatCoordinates[i],y2=flatCoordinates[i+1],(y<=y1&&y2<=y||y1<=y&&y<=y2)&&(x=(y-y1)/(y2-y1)*(x2-x1)+x1,intersections.push(x)),x1=x2,y1=y2}let pointX=NaN,maxSegmentLength=-1/0;for(intersections.sort(_array_js__WEBPACK_IMPORTED_MODULE_0__.V_),x1=intersections[0],i=1,ii=intersections.length;i<ii;++i){x2=intersections[i];const segmentLength=Math.abs(x2-x1);segmentLength>maxSegmentLength&&(x=(x1+x2)/2,(0,_contains_js__WEBPACK_IMPORTED_MODULE_1__.zb)(flatCoordinates,offset,ends,stride,x,y)&&(pointX=x,maxSegmentLength=segmentLength)),x1=x2}return isNaN(pointX)&&(pointX=flatCenters[flatCentersOffset]),dest?(dest.push(pointX,y,maxSegmentLength),dest):[pointX,y,maxSegmentLength]}function getInteriorPointsOfMultiArray(flatCoordinates,offset,endss,stride,flatCenters){let interiorPoints=[];for(let i=0,ii=endss.length;i<ii;++i){const ends=endss[i];interiorPoints=getInteriorPointOfArray(flatCoordinates,offset,ends,stride,flatCenters,2*i,interiorPoints),offset=ends[ends.length-1]}return interiorPoints}},"./node_modules/ol/geom/flat/interpolate.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{L8:()=>lineStringsCoordinateAtM,SH:()=>interpolatePoint,gr:()=>lineStringCoordinateAtM});var _array_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/array.js"),_math_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/math.js");function interpolatePoint(flatCoordinates,offset,end,stride,fraction,dest,dimension){let o,t;const n=(end-offset)/stride;if(1===n)o=offset;else if(2===n)o=offset,t=fraction;else if(0!==n){let x1=flatCoordinates[offset],y1=flatCoordinates[offset+1],length=0;const cumulativeLengths=[0];for(let i=offset+stride;i<end;i+=stride){const x2=flatCoordinates[i],y2=flatCoordinates[i+1];length+=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1)),cumulativeLengths.push(length),x1=x2,y1=y2}const target=fraction*length,index=(0,_array_js__WEBPACK_IMPORTED_MODULE_0__.El)(cumulativeLengths,target);index<0?(t=(target-cumulativeLengths[-index-2])/(cumulativeLengths[-index-1]-cumulativeLengths[-index-2]),o=offset+(-index-2)*stride):o=offset+index*stride}dimension=dimension>1?dimension:2,dest=dest||new Array(dimension);for(let i=0;i<dimension;++i)dest[i]=void 0===o?NaN:void 0===t?flatCoordinates[o+i]:(0,_math_js__WEBPACK_IMPORTED_MODULE_1__.Cc)(flatCoordinates[o+i],flatCoordinates[o+stride+i],t);return dest}function lineStringCoordinateAtM(flatCoordinates,offset,end,stride,m,extrapolate){if(end==offset)return null;let coordinate;if(m<flatCoordinates[offset+stride-1])return extrapolate?(coordinate=flatCoordinates.slice(offset,offset+stride),coordinate[stride-1]=m,coordinate):null;if(flatCoordinates[end-1]<m)return extrapolate?(coordinate=flatCoordinates.slice(end-stride,end),coordinate[stride-1]=m,coordinate):null;if(m==flatCoordinates[offset+stride-1])return flatCoordinates.slice(offset,offset+stride);let lo=offset/stride,hi=end/stride;for(;lo<hi;){const mid=lo+hi>>1;m<flatCoordinates[(mid+1)*stride-1]?hi=mid:lo=mid+1}const m0=flatCoordinates[lo*stride-1];if(m==m0)return flatCoordinates.slice((lo-1)*stride,(lo-1)*stride+stride);const t=(m-m0)/(flatCoordinates[(lo+1)*stride-1]-m0);coordinate=[];for(let i=0;i<stride-1;++i)coordinate.push((0,_math_js__WEBPACK_IMPORTED_MODULE_1__.Cc)(flatCoordinates[(lo-1)*stride+i],flatCoordinates[lo*stride+i],t));return coordinate.push(m),coordinate}function lineStringsCoordinateAtM(flatCoordinates,offset,ends,stride,m,extrapolate,interpolate){if(interpolate)return lineStringCoordinateAtM(flatCoordinates,offset,ends[ends.length-1],stride,m,extrapolate);let coordinate;if(m<flatCoordinates[stride-1])return extrapolate?(coordinate=flatCoordinates.slice(0,stride),coordinate[stride-1]=m,coordinate):null;if(flatCoordinates[flatCoordinates.length-1]<m)return extrapolate?(coordinate=flatCoordinates.slice(flatCoordinates.length-stride),coordinate[stride-1]=m,coordinate):null;for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i];if(offset!=end){if(m<flatCoordinates[offset+stride-1])return null;if(m<=flatCoordinates[end-1])return lineStringCoordinateAtM(flatCoordinates,offset,end,stride,m,!1);offset=end}}return null}},"./node_modules/ol/geom/flat/intersectsextent.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{HT:()=>intersectsLinearRingArray,Wp:()=>intersectsLinearRingMultiArray,fB:()=>intersectsLineStringArray,gp:()=>intersectsLineString});var _extent_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/extent.js"),_contains_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/geom/flat/contains.js"),_segments_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/geom/flat/segments.js");function intersectsLineString(flatCoordinates,offset,end,stride,extent,coordinatesExtent){return coordinatesExtent=coordinatesExtent??(0,_extent_js__WEBPACK_IMPORTED_MODULE_0__.R8)((0,_extent_js__WEBPACK_IMPORTED_MODULE_0__.S5)(),flatCoordinates,offset,end,stride),!!(0,_extent_js__WEBPACK_IMPORTED_MODULE_0__.HY)(extent,coordinatesExtent)&&(coordinatesExtent[0]>=extent[0]&&coordinatesExtent[2]<=extent[2]||coordinatesExtent[1]>=extent[1]&&coordinatesExtent[3]<=extent[3]||(0,_segments_js__WEBPACK_IMPORTED_MODULE_2__.j)(flatCoordinates,offset,end,stride,function(point1,point2){return(0,_extent_js__WEBPACK_IMPORTED_MODULE_0__.Mx)(extent,point1,point2)}))}function intersectsLineStringArray(flatCoordinates,offset,ends,stride,extent){for(let i=0,ii=ends.length;i<ii;++i){if(intersectsLineString(flatCoordinates,offset,ends[i],stride,extent))return!0;offset=ends[i]}return!1}function intersectsLinearRingArray(flatCoordinates,offset,ends,stride,extent){if(!function intersectsLinearRing(flatCoordinates,offset,end,stride,extent){return!!(intersectsLineString(flatCoordinates,offset,end,stride,extent)||(0,_contains_js__WEBPACK_IMPORTED_MODULE_1__.a_)(flatCoordinates,offset,end,stride,extent[0],extent[1])||(0,_contains_js__WEBPACK_IMPORTED_MODULE_1__.a_)(flatCoordinates,offset,end,stride,extent[0],extent[3])||(0,_contains_js__WEBPACK_IMPORTED_MODULE_1__.a_)(flatCoordinates,offset,end,stride,extent[2],extent[1])||(0,_contains_js__WEBPACK_IMPORTED_MODULE_1__.a_)(flatCoordinates,offset,end,stride,extent[2],extent[3]))}(flatCoordinates,offset,ends[0],stride,extent))return!1;if(1===ends.length)return!0;for(let i=1,ii=ends.length;i<ii;++i)if((0,_contains_js__WEBPACK_IMPORTED_MODULE_1__.t7)(flatCoordinates,ends[i-1],ends[i],stride,extent)&&!intersectsLineString(flatCoordinates,ends[i-1],ends[i],stride,extent))return!1;return!0}function intersectsLinearRingMultiArray(flatCoordinates,offset,endss,stride,extent){for(let i=0,ii=endss.length;i<ii;++i){const ends=endss[i];if(intersectsLinearRingArray(flatCoordinates,offset,ends,stride,extent))return!0;offset=ends[ends.length-1]}return!1}},"./node_modules/ol/geom/flat/length.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function lineStringLength(flatCoordinates,offset,end,stride){let x1=flatCoordinates[offset],y1=flatCoordinates[offset+1],length=0;for(let i=offset+stride;i<end;i+=stride){const x2=flatCoordinates[i],y2=flatCoordinates[i+1];length+=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1)),x1=x2,y1=y2}return length}__webpack_require__.d(__webpack_exports__,{k:()=>lineStringLength})},"./node_modules/ol/geom/flat/orient.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function coordinates(flatCoordinates,offset,end,stride){for(;offset<end-stride;){for(let i=0;i<stride;++i){const tmp=flatCoordinates[offset+i];flatCoordinates[offset+i]=flatCoordinates[end-stride+i],flatCoordinates[end-stride+i]=tmp}offset+=stride,end-=stride}}function linearRingIsClockwise(flatCoordinates,offset,end,stride){let edge=0,x1=flatCoordinates[end-stride],y1=flatCoordinates[end-stride+1];for(;offset<end;offset+=stride){const x2=flatCoordinates[offset],y2=flatCoordinates[offset+1];edge+=(x2-x1)*(y2+y1),x1=x2,y1=y2}return 0===edge?void 0:edge>0}function linearRingsAreOriented(flatCoordinates,offset,ends,stride,right){right=void 0!==right&&right;for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i],isClockwise=linearRingIsClockwise(flatCoordinates,offset,end,stride);if(0===i){if(right&&isClockwise||!right&&!isClockwise)return!1}else if(right&&!isClockwise||!right&&isClockwise)return!1;offset=end}return!0}function linearRingssAreOriented(flatCoordinates,offset,endss,stride,right){for(let i=0,ii=endss.length;i<ii;++i){const ends=endss[i];if(!linearRingsAreOriented(flatCoordinates,offset,ends,stride,right))return!1;ends.length&&(offset=ends[ends.length-1])}return!0}function orientLinearRings(flatCoordinates,offset,ends,stride,right){right=void 0!==right&&right;for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i],isClockwise=linearRingIsClockwise(flatCoordinates,offset,end,stride);(0===i?right&&isClockwise||!right&&!isClockwise:right&&!isClockwise||!right&&isClockwise)&&coordinates(flatCoordinates,offset,end,stride),offset=end}return offset}function orientLinearRingsArray(flatCoordinates,offset,endss,stride,right){for(let i=0,ii=endss.length;i<ii;++i)offset=orientLinearRings(flatCoordinates,offset,endss[i],stride,right);return offset}function inflateEnds(flatCoordinates,ends){const endss=[];let startOrientation,offset=0,prevEndIndex=0;for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i],orientation=linearRingIsClockwise(flatCoordinates,offset,end,2);if(void 0===startOrientation&&(startOrientation=orientation),orientation===startOrientation)endss.push(ends.slice(prevEndIndex,i+1));else{if(0===endss.length)continue;endss[endss.length-1].push(ends[prevEndIndex])}prevEndIndex=i+1,offset=end}return endss}__webpack_require__.d(__webpack_exports__,{yJ:()=>inflateEnds,PA:()=>linearRingsAreOriented,mb:()=>linearRingssAreOriented,ug:()=>orientLinearRings,NK:()=>orientLinearRingsArray})},"./node_modules/ol/geom/flat/segments.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function forEach(flatCoordinates,offset,end,stride,callback){let ret;for(offset+=stride;offset<end;offset+=stride)if(ret=callback(flatCoordinates.slice(offset-stride,offset),flatCoordinates.slice(offset,offset+stride)),ret)return ret;return!1}__webpack_require__.d(__webpack_exports__,{j:()=>forEach})},"./node_modules/ol/geom/flat/simplify.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{AL:()=>douglasPeuckerArray,Hg:()=>quantizeArray,P4:()=>douglasPeucker,n$:()=>snap,sx:()=>quantizeMultiArray});var _math_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/math.js");function douglasPeucker(flatCoordinates,offset,end,stride,squaredTolerance,simplifiedFlatCoordinates,simplifiedOffset){const n=(end-offset)/stride;if(n<3){for(;offset<end;offset+=stride)simplifiedFlatCoordinates[simplifiedOffset++]=flatCoordinates[offset],simplifiedFlatCoordinates[simplifiedOffset++]=flatCoordinates[offset+1];return simplifiedOffset}const markers=new Array(n);markers[0]=1,markers[n-1]=1;const stack=[offset,end-stride];let index=0;for(;stack.length>0;){const last=stack.pop(),first=stack.pop();let maxSquaredDistance=0;const x1=flatCoordinates[first],y1=flatCoordinates[first+1],x2=flatCoordinates[last],y2=flatCoordinates[last+1];for(let i=first+stride;i<last;i+=stride){const x=flatCoordinates[i],y=flatCoordinates[i+1],squaredDistance=(0,_math_js__WEBPACK_IMPORTED_MODULE_0__.Q1)(x,y,x1,y1,x2,y2);squaredDistance>maxSquaredDistance&&(index=i,maxSquaredDistance=squaredDistance)}maxSquaredDistance>squaredTolerance&&(markers[(index-offset)/stride]=1,first+stride<index&&stack.push(first,index),index+stride<last&&stack.push(index,last))}for(let i=0;i<n;++i)markers[i]&&(simplifiedFlatCoordinates[simplifiedOffset++]=flatCoordinates[offset+i*stride],simplifiedFlatCoordinates[simplifiedOffset++]=flatCoordinates[offset+i*stride+1]);return simplifiedOffset}function douglasPeuckerArray(flatCoordinates,offset,ends,stride,squaredTolerance,simplifiedFlatCoordinates,simplifiedOffset,simplifiedEnds){for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i];simplifiedOffset=douglasPeucker(flatCoordinates,offset,end,stride,squaredTolerance,simplifiedFlatCoordinates,simplifiedOffset),simplifiedEnds.push(simplifiedOffset),offset=end}return simplifiedOffset}function snap(value,tolerance){return tolerance*Math.round(value/tolerance)}function quantize(flatCoordinates,offset,end,stride,tolerance,simplifiedFlatCoordinates,simplifiedOffset){if(offset==end)return simplifiedOffset;let x2,y2,x1=snap(flatCoordinates[offset],tolerance),y1=snap(flatCoordinates[offset+1],tolerance);offset+=stride,simplifiedFlatCoordinates[simplifiedOffset++]=x1,simplifiedFlatCoordinates[simplifiedOffset++]=y1;do{if(x2=snap(flatCoordinates[offset],tolerance),y2=snap(flatCoordinates[offset+1],tolerance),(offset+=stride)==end)return simplifiedFlatCoordinates[simplifiedOffset++]=x2,simplifiedFlatCoordinates[simplifiedOffset++]=y2,simplifiedOffset}while(x2==x1&&y2==y1);for(;offset<end;){const x3=snap(flatCoordinates[offset],tolerance),y3=snap(flatCoordinates[offset+1],tolerance);if(offset+=stride,x3==x2&&y3==y2)continue;const dx1=x2-x1,dy1=y2-y1,dx2=x3-x1,dy2=y3-y1;dx1*dy2==dy1*dx2&&(dx1<0&&dx2<dx1||dx1==dx2||dx1>0&&dx2>dx1)&&(dy1<0&&dy2<dy1||dy1==dy2||dy1>0&&dy2>dy1)?(x2=x3,y2=y3):(simplifiedFlatCoordinates[simplifiedOffset++]=x2,simplifiedFlatCoordinates[simplifiedOffset++]=y2,x1=x2,y1=y2,x2=x3,y2=y3)}return simplifiedFlatCoordinates[simplifiedOffset++]=x2,simplifiedFlatCoordinates[simplifiedOffset++]=y2,simplifiedOffset}function quantizeArray(flatCoordinates,offset,ends,stride,tolerance,simplifiedFlatCoordinates,simplifiedOffset,simplifiedEnds){for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i];simplifiedOffset=quantize(flatCoordinates,offset,end,stride,tolerance,simplifiedFlatCoordinates,simplifiedOffset),simplifiedEnds.push(simplifiedOffset),offset=end}return simplifiedOffset}function quantizeMultiArray(flatCoordinates,offset,endss,stride,tolerance,simplifiedFlatCoordinates,simplifiedOffset,simplifiedEndss){for(let i=0,ii=endss.length;i<ii;++i){const ends=endss[i],simplifiedEnds=[];simplifiedOffset=quantizeArray(flatCoordinates,offset,ends,stride,tolerance,simplifiedFlatCoordinates,simplifiedOffset,simplifiedEnds),simplifiedEndss.push(simplifiedEnds),offset=ends[ends.length-1]}return simplifiedOffset}},"./node_modules/ol/geom/flat/transform.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function transform2D(flatCoordinates,offset,end,stride,transform,dest,destinationStride){dest=dest||[],destinationStride=destinationStride||2;let i=0;for(let j=offset;j<end;j+=stride){const x=flatCoordinates[j],y=flatCoordinates[j+1];dest[i++]=transform[0]*x+transform[2]*y+transform[4],dest[i++]=transform[1]*x+transform[3]*y+transform[5];for(let k=2;k<destinationStride;k++)dest[i++]=flatCoordinates[j+k]}return dest&&dest.length!=i&&(dest.length=i),dest}function rotate(flatCoordinates,offset,end,stride,angle,anchor,dest){dest=dest||[];const cos=Math.cos(angle),sin=Math.sin(angle),anchorX=anchor[0],anchorY=anchor[1];let i=0;for(let j=offset;j<end;j+=stride){const deltaX=flatCoordinates[j]-anchorX,deltaY=flatCoordinates[j+1]-anchorY;dest[i++]=anchorX+deltaX*cos-deltaY*sin,dest[i++]=anchorY+deltaX*sin+deltaY*cos;for(let k=j+2;k<j+stride;++k)dest[i++]=flatCoordinates[k]}return dest&&dest.length!=i&&(dest.length=i),dest}function scale(flatCoordinates,offset,end,stride,sx,sy,anchor,dest){dest=dest||[];const anchorX=anchor[0],anchorY=anchor[1];let i=0;for(let j=offset;j<end;j+=stride){const deltaX=flatCoordinates[j]-anchorX,deltaY=flatCoordinates[j+1]-anchorY;dest[i++]=anchorX+sx*deltaX,dest[i++]=anchorY+sy*deltaY;for(let k=j+2;k<j+stride;++k)dest[i++]=flatCoordinates[k]}return dest&&dest.length!=i&&(dest.length=i),dest}function translate(flatCoordinates,offset,end,stride,deltaX,deltaY,dest){dest=dest||[];let i=0;for(let j=offset;j<end;j+=stride){dest[i++]=flatCoordinates[j]+deltaX,dest[i++]=flatCoordinates[j+1]+deltaY;for(let k=j+2;k<j+stride;++k)dest[i++]=flatCoordinates[k]}return dest&&dest.length!=i&&(dest.length=i),dest}__webpack_require__.d(__webpack_exports__,{Rc:()=>transform2D,Tl:()=>translate,e$:()=>rotate,hs:()=>scale})},"./node_modules/ol/has.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{DT:()=>IMAGE_DECODE,FT:()=>PASSIVE_EVENT_LISTENERS,Wl:()=>WORKER_OFFSCREEN_CANVAS,XM:()=>CREATE_IMAGE_BITMAP,cr:()=>DEVICE_PIXEL_RATIO,ew:()=>MAC,j:()=>WEBKIT});const ua="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",WEBKIT=(ua.includes("safari")&&!ua.includes("chrom")&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua)),ua.includes("webkit")&&!ua.includes("edge")),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,IMAGE_DECODE="undefined"!=typeof Image&&Image.prototype.decode,CREATE_IMAGE_BITMAP="function"==typeof createImageBitmap,PASSIVE_EVENT_LISTENERS=function(){let passive=!1;try{const options=Object.defineProperty({},"passive",{get:function(){passive=!0}});window.addEventListener("_",null,options),window.removeEventListener("_",null,options)}catch{}return passive}()},"./node_modules/ol/interaction/Draw.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>interaction_Draw});var Feature=__webpack_require__("./node_modules/ol/Feature.js"),MapBrowserEvent=__webpack_require__("./node_modules/ol/MapBrowserEvent.js"),MapBrowserEventType=__webpack_require__("./node_modules/ol/MapBrowserEventType.js"),ol_coordinate=__webpack_require__("./node_modules/ol/coordinate.js"),Event=__webpack_require__("./node_modules/ol/events/Event.js"),EventType=__webpack_require__("./node_modules/ol/events/EventType.js"),events_condition=__webpack_require__("./node_modules/ol/events/condition.js"),ol_extent=__webpack_require__("./node_modules/ol/extent.js"),functions=__webpack_require__("./node_modules/ol/functions.js"),SimpleGeometry=__webpack_require__("./node_modules/ol/geom/SimpleGeometry.js"),deflate=__webpack_require__("./node_modules/ol/geom/flat/deflate.js"),transform=__webpack_require__("./node_modules/ol/geom/flat/transform.js");class Circle_Circle extends SimpleGeometry.Ay{constructor(center,radius,layout){super(),void 0!==layout&&void 0===radius?this.setFlatCoordinates(layout,center):(radius=radius||0,this.setCenterAndRadius(center,radius,layout))}clone(){const circle=new Circle_Circle(this.flatCoordinates.slice(),void 0,this.layout);return circle.applyProperties(this),circle}closestPointXY(x,y,closestPoint,minSquaredDistance){const flatCoordinates=this.flatCoordinates,dx=x-flatCoordinates[0],dy=y-flatCoordinates[1],squaredDistance=dx*dx+dy*dy;if(squaredDistance<minSquaredDistance){if(0===squaredDistance)for(let i=0;i<this.stride;++i)closestPoint[i]=flatCoordinates[i];else{const delta=this.getRadius()/Math.sqrt(squaredDistance);closestPoint[0]=flatCoordinates[0]+delta*dx,closestPoint[1]=flatCoordinates[1]+delta*dy;for(let i=2;i<this.stride;++i)closestPoint[i]=flatCoordinates[i]}return closestPoint.length=this.stride,squaredDistance}return minSquaredDistance}containsXY(x,y){const flatCoordinates=this.flatCoordinates,dx=x-flatCoordinates[0],dy=y-flatCoordinates[1];return dx*dx+dy*dy<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(extent){const flatCoordinates=this.flatCoordinates,radius=flatCoordinates[this.stride]-flatCoordinates[0];return(0,ol_extent.N)(flatCoordinates[0]-radius,flatCoordinates[1]-radius,flatCoordinates[0]+radius,flatCoordinates[1]+radius,extent)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const dx=this.flatCoordinates[this.stride]-this.flatCoordinates[0],dy=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return dx*dx+dy*dy}getType(){return"Circle"}intersectsExtent(extent){const circleExtent=this.getExtent();if((0,ol_extent.HY)(extent,circleExtent)){const center=this.getCenter();return extent[0]<=center[0]&&extent[2]>=center[0]||(extent[1]<=center[1]&&extent[3]>=center[1]||(0,ol_extent.sB)(extent,this.intersectsCoordinate.bind(this)))}return!1}setCenter(center){const stride=this.stride,radius=this.flatCoordinates[stride]-this.flatCoordinates[0],flatCoordinates=center.slice();flatCoordinates[stride]=flatCoordinates[0]+radius;for(let i=1;i<stride;++i)flatCoordinates[stride+i]=center[i];this.setFlatCoordinates(this.layout,flatCoordinates),this.changed()}setCenterAndRadius(center,radius,layout){this.setLayout(layout,center,0),this.flatCoordinates||(this.flatCoordinates=[]);const flatCoordinates=this.flatCoordinates;let offset=(0,deflate._n)(flatCoordinates,0,center,this.stride);flatCoordinates[offset++]=flatCoordinates[0]+radius;for(let i=1,ii=this.stride;i<ii;++i)flatCoordinates[offset++]=flatCoordinates[i];flatCoordinates.length=offset,this.changed()}getCoordinates(){return null}setCoordinates(coordinates,layout){}setRadius(radius){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+radius,this.changed()}rotate(angle,anchor){const center=this.getCenter(),stride=this.getStride();this.setCenter((0,transform.e$)(center,0,center.length,stride,angle,anchor,center)),this.changed()}}Circle_Circle.prototype.transform;const geom_Circle=Circle_Circle;var LineString=__webpack_require__("./node_modules/ol/geom/LineString.js"),array=__webpack_require__("./node_modules/ol/array.js"),closest=__webpack_require__("./node_modules/ol/geom/flat/closest.js"),inflate=__webpack_require__("./node_modules/ol/geom/flat/inflate.js"),flat_interpolate=__webpack_require__("./node_modules/ol/geom/flat/interpolate.js"),intersectsextent=__webpack_require__("./node_modules/ol/geom/flat/intersectsextent.js"),flat_length=__webpack_require__("./node_modules/ol/geom/flat/length.js"),simplify=__webpack_require__("./node_modules/ol/geom/flat/simplify.js");class MultiLineString extends SimpleGeometry.Ay{constructor(coordinates,layout,ends){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(coordinates[0]))this.setCoordinates(coordinates,layout);else if(void 0!==layout&&ends)this.setFlatCoordinates(layout,coordinates),this.ends_=ends;else{const lineStrings=coordinates,flatCoordinates=[],ends=[];for(let i=0,ii=lineStrings.length;i<ii;++i){const lineString=lineStrings[i];(0,array.X$)(flatCoordinates,lineString.getFlatCoordinates()),ends.push(flatCoordinates.length)}const layout=0===lineStrings.length?this.getLayout():lineStrings[0].getLayout();this.setFlatCoordinates(layout,flatCoordinates),this.ends_=ends}}appendLineString(lineString){(0,array.X$)(this.flatCoordinates,lineString.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const multiLineString=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return multiLineString.applyProperties(this),multiLineString}closestPointXY(x,y,closestPoint,minSquaredDistance){return minSquaredDistance<(0,ol_extent.Ld)(this.getExtent(),x,y)?minSquaredDistance:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,closest.HX)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,closest.oW)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,x,y,closestPoint,minSquaredDistance))}getCoordinateAtM(m,extrapolate,interpolate){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(extrapolate=void 0!==extrapolate&&extrapolate,interpolate=void 0!==interpolate&&interpolate,(0,flat_interpolate.L8)(this.flatCoordinates,0,this.ends_,this.stride,m,extrapolate,interpolate))}getCoordinates(){return(0,inflate.cD)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(index){return index<0||this.ends_.length<=index?null:new LineString.A(this.flatCoordinates.slice(0===index?0:this.ends_[index-1],this.ends_[index]),this.layout)}getLineStrings(){const flatCoordinates=this.flatCoordinates,ends=this.ends_,layout=this.layout,lineStrings=[];let offset=0;for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i],lineString=new LineString.A(flatCoordinates.slice(offset,end),layout);lineStrings.push(lineString),offset=end}return lineStrings}getLength(){const ends=this.ends_;let start=0,length=0;for(let i=0,ii=ends.length;i<ii;++i)length+=(0,flat_length.k)(this.flatCoordinates,start,ends[i],this.stride),start=ends[i];return length}getFlatMidpoints(){const midpoints=[],flatCoordinates=this.flatCoordinates;let offset=0;const ends=this.ends_,stride=this.stride;for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i],midpoint=(0,flat_interpolate.SH)(flatCoordinates,offset,end,stride,.5);(0,array.X$)(midpoints,midpoint),offset=end}return midpoints}getSimplifiedGeometryInternal(squaredTolerance){const simplifiedFlatCoordinates=[],simplifiedEnds=[];return simplifiedFlatCoordinates.length=(0,simplify.AL)(this.flatCoordinates,0,this.ends_,this.stride,squaredTolerance,simplifiedFlatCoordinates,0,simplifiedEnds),new MultiLineString(simplifiedFlatCoordinates,"XY",simplifiedEnds)}getType(){return"MultiLineString"}intersectsExtent(extent){return(0,intersectsextent.fB)(this.flatCoordinates,0,this.ends_,this.stride,extent)}setCoordinates(coordinates,layout){this.setLayout(layout,coordinates,2),this.flatCoordinates||(this.flatCoordinates=[]);const ends=(0,deflate.KG)(this.flatCoordinates,0,coordinates,this.stride,this.ends_);this.flatCoordinates.length=0===ends.length?0:ends[ends.length-1],this.changed()}}const geom_MultiLineString=MultiLineString;var math=__webpack_require__("./node_modules/ol/math.js"),Point=__webpack_require__("./node_modules/ol/geom/Point.js");class MultiPoint extends SimpleGeometry.Ay{constructor(coordinates,layout){super(),layout&&!Array.isArray(coordinates[0])?this.setFlatCoordinates(layout,coordinates):this.setCoordinates(coordinates,layout)}appendPoint(point){(0,array.X$)(this.flatCoordinates,point.getFlatCoordinates()),this.changed()}clone(){const multiPoint=new MultiPoint(this.flatCoordinates.slice(),this.layout);return multiPoint.applyProperties(this),multiPoint}closestPointXY(x,y,closestPoint,minSquaredDistance){if(minSquaredDistance<(0,ol_extent.Ld)(this.getExtent(),x,y))return minSquaredDistance;const flatCoordinates=this.flatCoordinates,stride=this.stride;for(let i=0,ii=flatCoordinates.length;i<ii;i+=stride){const squaredDistance=(0,math.hG)(x,y,flatCoordinates[i],flatCoordinates[i+1]);if(squaredDistance<minSquaredDistance){minSquaredDistance=squaredDistance;for(let j=0;j<stride;++j)closestPoint[j]=flatCoordinates[i+j];closestPoint.length=stride}}return minSquaredDistance}getCoordinates(){return(0,inflate.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(index){const n=this.flatCoordinates.length/this.stride;return index<0||n<=index?null:new Point.A(this.flatCoordinates.slice(index*this.stride,(index+1)*this.stride),this.layout)}getPoints(){const flatCoordinates=this.flatCoordinates,layout=this.layout,stride=this.stride,points=[];for(let i=0,ii=flatCoordinates.length;i<ii;i+=stride){const point=new Point.A(flatCoordinates.slice(i,i+stride),layout);points.push(point)}return points}getType(){return"MultiPoint"}intersectsExtent(extent){const flatCoordinates=this.flatCoordinates,stride=this.stride;for(let i=0,ii=flatCoordinates.length;i<ii;i+=stride){const x=flatCoordinates[i],y=flatCoordinates[i+1];if((0,ol_extent.Rj)(extent,x,y))return!0}return!1}setCoordinates(coordinates,layout){this.setLayout(layout,coordinates,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,deflate.z2)(this.flatCoordinates,0,coordinates,this.stride),this.changed()}}const geom_MultiPoint=MultiPoint;var geom_Polygon=__webpack_require__("./node_modules/ol/geom/Polygon.js"),flat_area=__webpack_require__("./node_modules/ol/geom/flat/area.js"),center=__webpack_require__("./node_modules/ol/geom/flat/center.js"),contains=__webpack_require__("./node_modules/ol/geom/flat/contains.js"),interiorpoint=__webpack_require__("./node_modules/ol/geom/flat/interiorpoint.js"),orient=__webpack_require__("./node_modules/ol/geom/flat/orient.js");class MultiPolygon extends SimpleGeometry.Ay{constructor(coordinates,layout,endss){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!endss&&!Array.isArray(coordinates[0])){const polygons=coordinates,flatCoordinates=[],thisEndss=[];for(let i=0,ii=polygons.length;i<ii;++i){const polygon=polygons[i],offset=flatCoordinates.length,ends=polygon.getEnds();for(let j=0,jj=ends.length;j<jj;++j)ends[j]+=offset;(0,array.X$)(flatCoordinates,polygon.getFlatCoordinates()),thisEndss.push(ends)}layout=0===polygons.length?this.getLayout():polygons[0].getLayout(),coordinates=flatCoordinates,endss=thisEndss}void 0!==layout&&endss?(this.setFlatCoordinates(layout,coordinates),this.endss_=endss):this.setCoordinates(coordinates,layout)}appendPolygon(polygon){let ends;if(this.flatCoordinates){const offset=this.flatCoordinates.length;(0,array.X$)(this.flatCoordinates,polygon.getFlatCoordinates()),ends=polygon.getEnds().slice();for(let i=0,ii=ends.length;i<ii;++i)ends[i]+=offset}else this.flatCoordinates=polygon.getFlatCoordinates().slice(),ends=polygon.getEnds().slice(),this.endss_.push();this.endss_.push(ends),this.changed()}clone(){const len=this.endss_.length,newEndss=new Array(len);for(let i=0;i<len;++i)newEndss[i]=this.endss_[i].slice();const multiPolygon=new MultiPolygon(this.flatCoordinates.slice(),this.layout,newEndss);return multiPolygon.applyProperties(this),multiPolygon}closestPointXY(x,y,closestPoint,minSquaredDistance){return minSquaredDistance<(0,ol_extent.Ld)(this.getExtent(),x,y)?minSquaredDistance:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,closest.c)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,closest.te)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,x,y,closestPoint,minSquaredDistance))}containsXY(x,y){return(0,contains.Gd)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,x,y)}getArea(){return(0,flat_area.Cs)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(right){let flatCoordinates;return void 0!==right?(flatCoordinates=this.getOrientedFlatCoordinates().slice(),(0,orient.NK)(flatCoordinates,0,this.endss_,this.stride,right)):flatCoordinates=this.flatCoordinates,(0,inflate.Dz)(flatCoordinates,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const flatCenters=(0,center.C)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,interiorpoint.p)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,flatCenters),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new geom_MultiPoint(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const flatCoordinates=this.flatCoordinates;(0,orient.mb)(flatCoordinates,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=flatCoordinates:(this.orientedFlatCoordinates_=flatCoordinates.slice(),this.orientedFlatCoordinates_.length=(0,orient.NK)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(squaredTolerance){const simplifiedFlatCoordinates=[],simplifiedEndss=[];return simplifiedFlatCoordinates.length=(0,simplify.sx)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(squaredTolerance),simplifiedFlatCoordinates,0,simplifiedEndss),new MultiPolygon(simplifiedFlatCoordinates,"XY",simplifiedEndss)}getPolygon(index){if(index<0||this.endss_.length<=index)return null;let offset;if(0===index)offset=0;else{const prevEnds=this.endss_[index-1];offset=prevEnds[prevEnds.length-1]}const ends=this.endss_[index].slice(),end=ends[ends.length-1];if(0!==offset)for(let i=0,ii=ends.length;i<ii;++i)ends[i]-=offset;return new geom_Polygon.Ay(this.flatCoordinates.slice(offset,end),this.layout,ends)}getPolygons(){const layout=this.layout,flatCoordinates=this.flatCoordinates,endss=this.endss_,polygons=[];let offset=0;for(let i=0,ii=endss.length;i<ii;++i){const ends=endss[i].slice(),end=ends[ends.length-1];if(0!==offset)for(let j=0,jj=ends.length;j<jj;++j)ends[j]-=offset;const polygon=new geom_Polygon.Ay(flatCoordinates.slice(offset,end),layout,ends);polygons.push(polygon),offset=end}return polygons}getType(){return"MultiPolygon"}intersectsExtent(extent){return(0,intersectsextent.Wp)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,extent)}setCoordinates(coordinates,layout){this.setLayout(layout,coordinates,3),this.flatCoordinates||(this.flatCoordinates=[]);const endss=(0,deflate.d6)(this.flatCoordinates,0,coordinates,this.stride,this.endss_);if(0===endss.length)this.flatCoordinates.length=0;else{const lastEnds=endss[endss.length-1];this.flatCoordinates.length=0===lastEnds.length?0:lastEnds[lastEnds.length-1]}this.changed()}}const geom_MultiPolygon=MultiPolygon;var Vector=__webpack_require__("./node_modules/ol/layer/Vector.js"),proj=__webpack_require__("./node_modules/ol/proj.js"),source_Vector=__webpack_require__("./node_modules/ol/source/Vector.js"),Style=__webpack_require__("./node_modules/ol/style/Style.js"),Pointer=__webpack_require__("./node_modules/ol/interaction/Pointer.js"),Property=__webpack_require__("./node_modules/ol/interaction/Property.js"),events=__webpack_require__("./node_modules/ol/events.js"),Geometry=__webpack_require__("./node_modules/ol/geom/Geometry.js");class GeometryCollection extends Geometry.A{constructor(geometries){super(),this.geometries_=geometries,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(events.JH),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const geometries=this.geometries_;for(let i=0,ii=geometries.length;i<ii;++i)this.changeEventsKeys_.push((0,events.KT)(geometries[i],EventType.A.CHANGE,this.changed,this))}clone(){const geometryCollection=new GeometryCollection(cloneGeometries(this.geometries_));return geometryCollection.applyProperties(this),geometryCollection}closestPointXY(x,y,closestPoint,minSquaredDistance){if(minSquaredDistance<(0,ol_extent.Ld)(this.getExtent(),x,y))return minSquaredDistance;const geometries=this.geometries_;for(let i=0,ii=geometries.length;i<ii;++i)minSquaredDistance=geometries[i].closestPointXY(x,y,closestPoint,minSquaredDistance);return minSquaredDistance}containsXY(x,y){const geometries=this.geometries_;for(let i=0,ii=geometries.length;i<ii;++i)if(geometries[i].containsXY(x,y))return!0;return!1}computeExtent(extent){(0,ol_extent.aZ)(extent);const geometries=this.geometries_;for(let i=0,ii=geometries.length;i<ii;++i)(0,ol_extent.X$)(extent,geometries[i].getExtent());return extent}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let geometriesArray=[];const geometries=this.geometries_;for(let i=0,ii=geometries.length;i<ii;++i)geometries[i].getType()===this.getType()?geometriesArray=geometriesArray.concat(geometries[i].getGeometriesArrayRecursive()):geometriesArray.push(geometries[i]);return geometriesArray}getSimplifiedGeometry(squaredTolerance){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),squaredTolerance<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&squaredTolerance<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const simplifiedGeometries=[],geometries=this.geometries_;let simplified=!1;for(let i=0,ii=geometries.length;i<ii;++i){const geometry=geometries[i],simplifiedGeometry=geometry.getSimplifiedGeometry(squaredTolerance);simplifiedGeometries.push(simplifiedGeometry),simplifiedGeometry!==geometry&&(simplified=!0)}if(simplified){return new GeometryCollection(simplifiedGeometries)}return this.simplifiedGeometryMaxMinSquaredTolerance=squaredTolerance,this}getType(){return"GeometryCollection"}intersectsExtent(extent){const geometries=this.geometries_;for(let i=0,ii=geometries.length;i<ii;++i)if(geometries[i].intersectsExtent(extent))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(angle,anchor){const geometries=this.geometries_;for(let i=0,ii=geometries.length;i<ii;++i)geometries[i].rotate(angle,anchor);this.changed()}scale(sx,sy,anchor){anchor||(anchor=(0,ol_extent.q1)(this.getExtent()));const geometries=this.geometries_;for(let i=0,ii=geometries.length;i<ii;++i)geometries[i].scale(sx,sy,anchor);this.changed()}setGeometries(geometries){this.setGeometriesArray(cloneGeometries(geometries))}setGeometriesArray(geometries){this.unlistenGeometriesChange_(),this.geometries_=geometries,this.listenGeometriesChange_(),this.changed()}applyTransform(transformFn){const geometries=this.geometries_;for(let i=0,ii=geometries.length;i<ii;++i)geometries[i].applyTransform(transformFn);this.changed()}translate(deltaX,deltaY){const geometries=this.geometries_;for(let i=0,ii=geometries.length;i<ii;++i)geometries[i].translate(deltaX,deltaY);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(geometries){return geometries.map(geometry=>geometry.clone())}const geom_GeometryCollection=GeometryCollection;function getCoordinate(coordinates,index){const count=coordinates.length;return index<0?coordinates[index+count]:index>=count?coordinates[index-count]:coordinates[index]}function interpolateCoordinate(coordinates,index){const count=coordinates.length;let startIndex=Math.floor(index);const along=index-startIndex;startIndex>=count?startIndex-=count:startIndex<0&&(startIndex+=count);let endIndex=startIndex+1;endIndex>=count&&(endIndex-=count);const start=coordinates[startIndex],x0=start[0],y0=start[1],end=coordinates[endIndex];return[x0+(end[0]-x0)*along,y0+(end[1]-y0)*along]}const sharedUpdateInfo={index:-1,endIndex:NaN,closestTargetDistance:1/0};function appendGeometryTraceTargets(coordinate,geometry,targets){if(geometry instanceof LineString.A)appendTraceTarget(coordinate,geometry.getCoordinates(),!1,targets);else{if(geometry instanceof geom_MultiLineString){const coordinates=geometry.getCoordinates();for(let i=0,ii=coordinates.length;i<ii;++i)appendTraceTarget(coordinate,coordinates[i],!1,targets);return}if(geometry instanceof geom_Polygon.Ay){const coordinates=geometry.getCoordinates();for(let i=0,ii=coordinates.length;i<ii;++i)appendTraceTarget(coordinate,coordinates[i],!0,targets);return}if(geometry instanceof geom_MultiPolygon){const polys=geometry.getCoordinates();for(let i=0,ii=polys.length;i<ii;++i){const coordinates=polys[i];for(let j=0,jj=coordinates.length;j<jj;++j)appendTraceTarget(coordinate,coordinates[j],!0,targets)}return}if(geometry instanceof geom_GeometryCollection){const geometries=geometry.getGeometries();for(let i=0;i<geometries.length;++i)appendGeometryTraceTargets(coordinate,geometries[i],targets);return}}}function appendTraceTarget(coordinate,coordinates,ring,targets){const x=coordinate[0],y=coordinate[1];for(let i=0,ii=coordinates.length-1;i<ii;++i){const rel=getPointSegmentRelationship(x,y,coordinates[i],coordinates[i+1]);if(0===rel.squaredDistance){const index=i+rel.along;return void targets.push({coordinates,ring,startIndex:index,endIndex:index})}}}function getSquaredDistance(a,b){return(0,math.hG)(a[0],a[1],b[0],b[1])}function getCumulativeSquaredDistance(coordinates,startIndex,endIndex){let lowIndex,highIndex;startIndex<endIndex?(lowIndex=startIndex,highIndex=endIndex):(lowIndex=endIndex,highIndex=startIndex);const lowWholeIndex=Math.ceil(lowIndex),highWholeIndex=Math.floor(highIndex);if(lowWholeIndex>highWholeIndex){return getSquaredDistance(interpolateCoordinate(coordinates,lowIndex),interpolateCoordinate(coordinates,highIndex))}let sd=0;if(lowIndex<lowWholeIndex){sd+=getSquaredDistance(interpolateCoordinate(coordinates,lowIndex),getCoordinate(coordinates,lowWholeIndex))}if(highWholeIndex<highIndex){sd+=getSquaredDistance(getCoordinate(coordinates,highWholeIndex),interpolateCoordinate(coordinates,highIndex))}for(let i=lowWholeIndex;i<highWholeIndex-1;++i){sd+=getSquaredDistance(getCoordinate(coordinates,i),getCoordinate(coordinates,i+1))}return sd}const sharedRel={along:0,squaredDistance:0};function getPointSegmentRelationship(x,y,start,end){const x1=start[0],y1=start[1],dx=end[0]-x1,dy=end[1]-y1;let along=0,px=x1,py=y1;return 0===dx&&0===dy||(along=(0,math.qE)(((x-x1)*dx+(y-y1)*dy)/(dx*dx+dy*dy),0,1),px+=dx*along,py+=dy*along),sharedRel.along=along,sharedRel.squaredDistance=(0,math.Mg)((0,math.hG)(x,y,px,py),10),sharedRel}const DrawEventType_DRAWSTART="drawstart",DrawEventType_DRAWEND="drawend",DrawEventType_DRAWABORT="drawabort";class DrawEvent extends Event.Ay{constructor(type,feature){super(type),this.feature=feature}}class Draw extends Pointer.A{constructor(options){const pointerOptions=options;pointerOptions.stopDown||(pointerOptions.stopDown=functions.W8),super(pointerOptions),this.on,this.once,this.un,this.options_=options,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=options.source?options.source:null,this.features_=options.features?options.features:null,this.snapTolerance_=options.snapTolerance?options.snapTolerance:12,this.type_=options.type,this.mode_=function getMode(type){switch(type){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+type)}}(this.type_),this.stopClick_=!!options.stopClick,this.ignoreNextUpEvent_=!1,this.minPoints_=options.minPoints?options.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:options.maxPoints?options.maxPoints:1/0,this.finishCondition_=options.finishCondition?options.finishCondition:functions.rT,this.geometryLayout_=options.geometryLayout?options.geometryLayout:"XY";let geometryFunction=options.geometryFunction;if(!geometryFunction){const mode=this.mode_;if("Circle"===mode)geometryFunction=(coordinates,geometry,projection)=>{const circle=geometry||new geom_Circle([NaN,NaN]),center=(0,proj.Ad)(coordinates[0],projection),squaredLength=(0,ol_coordinate.hG)(center,(0,proj.Ad)(coordinates[coordinates.length-1],projection));circle.setCenterAndRadius(center,Math.sqrt(squaredLength),this.geometryLayout_);const userProjection=(0,proj.Tf)();return userProjection&&circle.transform(projection,userProjection),circle};else{let Constructor;"Point"===mode?Constructor=Point.A:"LineString"===mode?Constructor=LineString.A:"Polygon"===mode&&(Constructor=geom_Polygon.Ay),geometryFunction=(coordinates,geometry,projection)=>(geometry?"Polygon"===mode?coordinates[0].length?geometry.setCoordinates([coordinates[0].concat([coordinates[0][0]])],this.geometryLayout_):geometry.setCoordinates([],this.geometryLayout_):geometry.setCoordinates(coordinates,this.geometryLayout_):geometry=new Constructor(coordinates,this.geometryLayout_),geometry)}}this.geometryFunction_=geometryFunction,this.dragVertexDelay_=void 0!==options.dragVertexDelay?options.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=options.clickTolerance?options.clickTolerance*options.clickTolerance:36,this.overlay_=new Vector.A({source:new source_Vector.A({useSpatialIndex:!1,wrapX:!!options.wrapX&&options.wrapX}),style:options.style?options.style:getDefaultStyleFunction(),updateWhileInteracting:!0}),this.geometryName_=options.geometryName,this.condition_=options.condition?options.condition:events_condition.TS,this.freehandCondition_,options.freehand?this.freehandCondition_=events_condition.Gk:this.freehandCondition_=options.freehandCondition?options.freehandCondition:events_condition.Kg,this.traceCondition_,this.setTrace(options.trace||!1),this.traceState_={active:!1},this.traceSource_=options.traceSource||options.source||null,this.addChangeListener(Property.A.ACTIVE,this.updateState_)}setTrace(trace){let condition;condition=trace?!0===trace?events_condition.Gk:trace:events_condition.Zm,this.traceCondition_=condition}setMap(map){super.setMap(map),this.updateState_()}setFreehand(freehand){this.freehand_=freehand,this.freehand_?this.freehandCondition_=events_condition.Gk:this.freehandCondition_=this.options_&&this.options_.freehandCondition?this.options_.freehandCondition:events_condition.Kg}getOverlay(){return this.overlay_}getFreehand(){return this.freehand_}handleEvent(event){event.originalEvent.type===EventType.A.CONTEXTMENU&&event.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(event);let move=event.type===MapBrowserEventType.A.POINTERMOVE,pass=!0;if(!this.freehand_&&this.lastDragTime_&&event.type===MapBrowserEventType.A.POINTERDRAG){Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=event.pixel,this.shouldHandle_=!this.freehand_,move=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&event.type===MapBrowserEventType.A.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(event.coordinate),pass=!1):this.freehand_&&event.type===MapBrowserEventType.A.POINTERDOWN?pass=!1:move&&this.getPointerCount()<2?(pass=event.type===MapBrowserEventType.A.POINTERMOVE,pass&&this.freehand_?(this.handlePointerMove_(event),this.shouldHandle_&&event.originalEvent.preventDefault()):("mouse"===event.originalEvent.pointerType||event.type===MapBrowserEventType.A.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(event)):event.type===MapBrowserEventType.A.DBLCLICK&&(pass=!1),super.handleEvent(event)&&pass}handleDownEvent(event){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=event.pixel,this.finishCoordinate_||this.startDrawing_(event.coordinate),!0):this.condition_(event)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new MapBrowserEvent.A(MapBrowserEventType.A.POINTERMOVE,event.map,event.originalEvent,!1,event.frameState))},this.dragVertexDelay_),this.downPx_=event.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(event){if(!this.traceSource_||!this.traceCondition_(event))return;if(this.traceState_.active)return void this.deactivateTrace_();const map=this.getMap(),lowerLeft=map.getCoordinateFromPixel([event.pixel[0]-this.snapTolerance_,event.pixel[1]+this.snapTolerance_]),upperRight=map.getCoordinateFromPixel([event.pixel[0]+this.snapTolerance_,event.pixel[1]-this.snapTolerance_]),extent=(0,ol_extent.Tr)([lowerLeft,upperRight]),features=this.traceSource_.getFeaturesInExtent(extent);if(0===features.length)return;const targets=function getTraceTargets(coordinate,features){const targets=[];for(let i=0;i<features.length;++i)appendGeometryTraceTargets(coordinate,features[i].getGeometry(),targets);return targets}(event.coordinate,features);targets.length&&(this.traceState_={active:!0,startCoord:event.coordinate.slice(),targets,targetIndex:-1})}addOrRemoveTracedCoordinates_(target,endIndex){const previouslyForward=target.startIndex<=target.endIndex;previouslyForward===target.startIndex<=endIndex?previouslyForward&&endIndex>target.endIndex||!previouslyForward&&endIndex<target.endIndex?this.addTracedCoordinates_(target,target.endIndex,endIndex):(previouslyForward&&endIndex<target.endIndex||!previouslyForward&&endIndex>target.endIndex)&&this.removeTracedCoordinates_(endIndex,target.endIndex):(this.removeTracedCoordinates_(target.startIndex,target.endIndex),this.addTracedCoordinates_(target,target.startIndex,endIndex))}removeTracedCoordinates_(fromIndex,toIndex){if(fromIndex===toIndex)return;let remove=0;if(fromIndex<toIndex){const start=Math.ceil(fromIndex);let end=Math.floor(toIndex);end===toIndex&&(end-=1),remove=end-start+1}else{const start=Math.floor(fromIndex);let end=Math.ceil(toIndex);end===toIndex&&(end+=1),remove=start-end+1}remove>0&&this.removeLastPoints_(remove)}addTracedCoordinates_(target,fromIndex,toIndex){if(fromIndex===toIndex)return;const coordinates=[];if(fromIndex<toIndex){const start=Math.ceil(fromIndex);let end=Math.floor(toIndex);end===toIndex&&(end-=1);for(let i=start;i<=end;++i)coordinates.push(getCoordinate(target.coordinates,i))}else{const start=Math.floor(fromIndex);let end=Math.ceil(toIndex);end===toIndex&&(end+=1);for(let i=start;i>=end;--i)coordinates.push(getCoordinate(target.coordinates,i))}coordinates.length&&this.appendCoordinates(coordinates)}updateTrace_(event){const traceState=this.traceState_;if(!traceState.active)return;if(-1===traceState.targetIndex){const startPx=event.map.getPixelFromCoordinate(traceState.startCoord);if((0,ol_coordinate.Io)(startPx,event.pixel)<this.snapTolerance_)return}const updatedTraceTarget=function getTraceTargetUpdate(coordinate,traceState,map,snapTolerance){const x=coordinate[0],y=coordinate[1];let closestTargetDistance=1/0,newTargetIndex=-1,newEndIndex=NaN;for(let targetIndex=0;targetIndex<traceState.targets.length;++targetIndex){const target=traceState.targets[targetIndex],coordinates=target.coordinates;let endIndex,minSegmentDistance=1/0;for(let coordinateIndex=0;coordinateIndex<coordinates.length-1;++coordinateIndex){const rel=getPointSegmentRelationship(x,y,coordinates[coordinateIndex],coordinates[coordinateIndex+1]);rel.squaredDistance<minSegmentDistance&&(minSegmentDistance=rel.squaredDistance,endIndex=coordinateIndex+rel.along)}minSegmentDistance<closestTargetDistance&&(closestTargetDistance=minSegmentDistance,target.ring&&traceState.targetIndex===targetIndex&&(target.endIndex>target.startIndex?endIndex<target.startIndex&&(endIndex+=coordinates.length):target.endIndex<target.startIndex&&endIndex>target.startIndex&&(endIndex-=coordinates.length)),newEndIndex=endIndex,newTargetIndex=targetIndex)}const newTarget=traceState.targets[newTargetIndex];let considerBothDirections=newTarget.ring;if(traceState.targetIndex===newTargetIndex&&considerBothDirections){const newCoordinate=interpolateCoordinate(newTarget.coordinates,newEndIndex),pixel=map.getPixelFromCoordinate(newCoordinate),startPx=map.getPixelFromCoordinate(traceState.startCoord);(0,ol_coordinate.Io)(pixel,startPx)>snapTolerance&&(considerBothDirections=!1)}if(considerBothDirections){const coordinates=newTarget.coordinates,count=coordinates.length,startIndex=newTarget.startIndex,endIndex=newEndIndex;if(startIndex<endIndex){const forwardDistance=getCumulativeSquaredDistance(coordinates,startIndex,endIndex);getCumulativeSquaredDistance(coordinates,startIndex,endIndex-count)<forwardDistance&&(newEndIndex-=count)}else{const reverseDistance=getCumulativeSquaredDistance(coordinates,startIndex,endIndex);getCumulativeSquaredDistance(coordinates,startIndex,endIndex+count)<reverseDistance&&(newEndIndex+=count)}}return sharedUpdateInfo.index=newTargetIndex,sharedUpdateInfo.endIndex=newEndIndex,sharedUpdateInfo.closestTargetDistance=closestTargetDistance,sharedUpdateInfo}(event.coordinate,traceState,this.getMap(),this.snapTolerance_);if(traceState.targetIndex!==updatedTraceTarget.index){if(-1!==traceState.targetIndex){const oldTarget=traceState.targets[traceState.targetIndex];this.removeTracedCoordinates_(oldTarget.startIndex,oldTarget.endIndex)}const newTarget=traceState.targets[updatedTraceTarget.index];this.addTracedCoordinates_(newTarget,newTarget.startIndex,updatedTraceTarget.endIndex)}else{const target=traceState.targets[traceState.targetIndex];this.addOrRemoveTracedCoordinates_(target,updatedTraceTarget.endIndex)}traceState.targetIndex=updatedTraceTarget.index;const target=traceState.targets[traceState.targetIndex];target.endIndex=updatedTraceTarget.endIndex;const coordinate=interpolateCoordinate(target.coordinates,target.endIndex),pixel=this.getMap().getPixelFromCoordinate(coordinate);event.coordinate=coordinate,event.pixel=[Math.round(pixel[0]),Math.round(pixel[1])]}handleDragEvent(event){this.ignoreNextUpEvent_=!0,super.handleDragEvent(event)}handleUpEvent(event){let pass=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(event);const tracing=this.traceState_.active;if(this.ignoreNextUpEvent_||this.toggleTraceState_(event),this.shouldHandle_){const startingToDraw=!this.finishCoordinate_;startingToDraw&&this.startDrawing_(event.coordinate),!startingToDraw&&this.freehand_?this.finishDrawing():this.freehand_||startingToDraw&&"Point"!==this.mode_||(this.atFinish_(event.pixel,tracing)?this.finishCondition_(event)&&this.finishDrawing():this.addToDrawing_(event.coordinate)),pass=!1}else this.freehand_&&this.abortDrawing()}return this.ignoreNextUpEvent_=!1,!pass&&this.stopClick_&&event.preventDefault(),pass}handlePointerMove_(event){if(this.pointerType_=event.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const downPx=this.downPx_,clickPx=event.pixel,dx=downPx[0]-clickPx[0],dy=downPx[1]-clickPx[1],squaredDistance=dx*dx+dy*dy;if(this.shouldHandle_=this.freehand_?squaredDistance>this.squaredClickTolerance_:squaredDistance<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(event),this.modifyDrawing_(event.coordinate)):this.createOrUpdateSketchPoint_(event.coordinate.slice())}atFinish_(pixel,tracing){let at=!1;if(this.sketchFeature_){let potentiallyDone=!1,potentiallyFinishCoordinates=[this.finishCoordinate_];const mode=this.mode_;if("Point"===mode)at=!0;else if("Circle"===mode)at=2===this.sketchCoords_.length;else if("LineString"===mode)potentiallyDone=!tracing&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===mode){const sketchCoords=this.sketchCoords_;potentiallyDone=sketchCoords[0].length>this.minPoints_,potentiallyFinishCoordinates=[sketchCoords[0][0],sketchCoords[0][sketchCoords[0].length-2]],potentiallyFinishCoordinates=tracing?[sketchCoords[0][0]]:[sketchCoords[0][0],sketchCoords[0][sketchCoords[0].length-2]]}if(potentiallyDone){const map=this.getMap();for(let i=0,ii=potentiallyFinishCoordinates.length;i<ii;i++){const finishCoordinate=potentiallyFinishCoordinates[i],finishPixel=map.getPixelFromCoordinate(finishCoordinate),dx=pixel[0]-finishPixel[0],dy=pixel[1]-finishPixel[1],snapTolerance=this.freehand_?1:this.snapTolerance_;if(at=Math.sqrt(dx*dx+dy*dy)<=snapTolerance,at){this.finishCoordinate_=finishCoordinate;break}}}}return at}createOrUpdateSketchPoint_(coordinates){if(this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(coordinates)}else this.sketchPoint_=new Feature.A(new Point.A(coordinates)),this.updateSketchFeatures_()}createOrUpdateCustomSketchLine_(geometry){this.sketchLine_||(this.sketchLine_=new Feature.A);const ring=geometry.getLinearRing(0);let sketchLineGeom=this.sketchLine_.getGeometry();sketchLineGeom?(sketchLineGeom.setFlatCoordinates(ring.getLayout(),ring.getFlatCoordinates()),sketchLineGeom.changed()):(sketchLineGeom=new LineString.A(ring.getFlatCoordinates(),ring.getLayout()),this.sketchLine_.setGeometry(sketchLineGeom))}startDrawing_(start){const projection=this.getMap().getView().getProjection(),stride=(0,SimpleGeometry.dn)(this.geometryLayout_);for(;start.length<stride;)start.push(0);this.finishCoordinate_=start,"Point"===this.mode_?this.sketchCoords_=start.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[start.slice(),start.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[start.slice(),start.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Feature.A(new LineString.A(this.sketchLineCoords_)));const geometry=this.geometryFunction_(this.sketchCoords_,void 0,projection);this.sketchFeature_=new Feature.A,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(geometry),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType_DRAWSTART,this.sketchFeature_))}modifyDrawing_(coordinate){const map=this.getMap(),geometry=this.sketchFeature_.getGeometry(),projection=map.getView().getProjection(),stride=(0,SimpleGeometry.dn)(this.geometryLayout_);let coordinates,last;for(;coordinate.length<stride;)coordinate.push(0);if("Point"===this.mode_?last=this.sketchCoords_:"Polygon"===this.mode_?(coordinates=this.sketchCoords_[0],last=coordinates[coordinates.length-1],this.atFinish_(map.getPixelFromCoordinate(coordinate))&&(coordinate=this.finishCoordinate_.slice())):(coordinates=this.sketchCoords_,last=coordinates[coordinates.length-1]),last[0]=coordinate[0],last[1]=coordinate[1],this.geometryFunction_(this.sketchCoords_,geometry,projection),this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(coordinate)}if("Polygon"===geometry.getType()&&"Polygon"!==this.mode_)this.createOrUpdateCustomSketchLine_(geometry);else if(this.sketchLineCoords_){this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()}addToDrawing_(coordinate){const geometry=this.sketchFeature_.getGeometry(),projection=this.getMap().getView().getProjection();let done,coordinates;const mode=this.mode_;return"LineString"===mode||"Circle"===mode?(this.finishCoordinate_=coordinate.slice(),coordinates=this.sketchCoords_,coordinates.length>=this.maxPoints_&&(this.freehand_?coordinates.pop():done=!0),coordinates.push(coordinate.slice()),this.geometryFunction_(coordinates,geometry,projection)):"Polygon"===mode&&(coordinates=this.sketchCoords_[0],coordinates.length>=this.maxPoints_&&(this.freehand_?coordinates.pop():done=!0),coordinates.push(coordinate.slice()),done&&(this.finishCoordinate_=coordinates[0]),this.geometryFunction_(this.sketchCoords_,geometry,projection)),this.createOrUpdateSketchPoint_(coordinate.slice()),this.updateSketchFeatures_(),done?this.finishDrawing():this.sketchFeature_}removeLastPoints_(n){if(!this.sketchFeature_)return;const geometry=this.sketchFeature_.getGeometry(),projection=this.getMap().getView().getProjection(),mode=this.mode_;for(let i=0;i<n;++i){let coordinates;if("LineString"===mode||"Circle"===mode){if(coordinates=this.sketchCoords_,coordinates.splice(-2,1),coordinates.length>=2){this.finishCoordinate_=coordinates[coordinates.length-2].slice();const finishCoordinate=this.finishCoordinate_.slice();coordinates[coordinates.length-1]=finishCoordinate,this.createOrUpdateSketchPoint_(finishCoordinate)}this.geometryFunction_(coordinates,geometry,projection),"Polygon"===geometry.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(geometry)}else if("Polygon"===mode){coordinates=this.sketchCoords_[0],coordinates.splice(-2,1);const sketchLineGeom=this.sketchLine_.getGeometry();if(coordinates.length>=2){const finishCoordinate=coordinates[coordinates.length-2].slice();coordinates[coordinates.length-1]=finishCoordinate,this.createOrUpdateSketchPoint_(finishCoordinate)}sketchLineGeom.setCoordinates(coordinates),this.geometryFunction_(this.sketchCoords_,geometry,projection)}if(1===coordinates.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const sketchFeature=this.abortDrawing_();if(!sketchFeature)return null;let coordinates=this.sketchCoords_;const geometry=sketchFeature.getGeometry(),projection=this.getMap().getView().getProjection();return"LineString"===this.mode_?(coordinates.pop(),this.geometryFunction_(coordinates,geometry,projection)):"Polygon"===this.mode_&&(coordinates[0].pop(),this.geometryFunction_(coordinates,geometry,projection),coordinates=geometry.getCoordinates()),"MultiPoint"===this.type_?sketchFeature.setGeometry(new geom_MultiPoint([coordinates])):"MultiLineString"===this.type_?sketchFeature.setGeometry(new geom_MultiLineString([coordinates])):"MultiPolygon"===this.type_&&sketchFeature.setGeometry(new geom_MultiPolygon([coordinates])),this.dispatchEvent(new DrawEvent(DrawEventType_DRAWEND,sketchFeature)),this.features_&&this.features_.push(sketchFeature),this.source_&&this.source_.addFeature(sketchFeature),sketchFeature}abortDrawing_(){this.finishCoordinate_=null;const sketchFeature=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),sketchFeature}abortDrawing(){const sketchFeature=this.abortDrawing_();sketchFeature&&this.dispatchEvent(new DrawEvent(DrawEventType_DRAWABORT,sketchFeature))}appendCoordinates(coordinates){const mode=this.mode_,newDrawing=!this.sketchFeature_;let sketchCoords;if(newDrawing&&this.startDrawing_(coordinates[0]),"LineString"===mode||"Circle"===mode)sketchCoords=this.sketchCoords_;else{if("Polygon"!==mode)return;sketchCoords=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}newDrawing&&sketchCoords.shift(),sketchCoords.pop();for(let i=0;i<coordinates.length;i++)this.addToDrawing_(coordinates[i]);const ending=coordinates[coordinates.length-1];this.sketchFeature_=this.addToDrawing_(ending),this.modifyDrawing_(ending)}extend(feature){const lineString=feature.getGeometry();this.sketchFeature_=feature,this.sketchCoords_=lineString.getCoordinates();const last=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=last.slice(),this.sketchCoords_.push(last.slice()),this.sketchPoint_=new Feature.A(new Point.A(last)),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType_DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const sketchFeatures=[];this.sketchFeature_&&sketchFeatures.push(this.sketchFeature_),this.sketchLine_&&sketchFeatures.push(this.sketchLine_),this.sketchPoint_&&sketchFeatures.push(this.sketchPoint_);const overlaySource=this.overlay_.getSource();overlaySource.clear(!0),overlaySource.addFeatures(sketchFeatures)}updateState_(){const map=this.getMap(),active=this.getActive();map&&active||this.abortDrawing(),this.overlay_.setMap(active?map:null)}}function getDefaultStyleFunction(){const styles=(0,Style.mY)();return function(feature,resolution){return styles[feature.getGeometry().getType()]}}const interaction_Draw=Draw},"./node_modules/ol/interaction/Interaction.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,D2:()=>zoomByDelta,e4:()=>pan});var _Object_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/Object.js"),_easing_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/easing.js"),_Property_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/interaction/Property.js");class Interaction extends _Object_js__WEBPACK_IMPORTED_MODULE_0__.A{constructor(options){super(),this.on,this.once,this.un,options&&options.handleEvent&&(this.handleEvent=options.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_2__.A.ACTIVE)}getMap(){return this.map_}handleEvent(mapBrowserEvent){return!0}setActive(active){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_2__.A.ACTIVE,active)}setMap(map){this.map_=map}}function pan(view,delta,duration){const currentCenter=view.getCenterInternal();if(currentCenter){const center=[currentCenter[0]+delta[0],currentCenter[1]+delta[1]];view.animateInternal({duration:void 0!==duration?duration:250,easing:_easing_js__WEBPACK_IMPORTED_MODULE_1__.sn,center:view.getConstrainedCenter(center)})}}function zoomByDelta(view,delta,anchor,duration){const currentZoom=view.getZoom();if(void 0===currentZoom)return;const newZoom=view.getConstrainedZoom(currentZoom+delta),newResolution=view.getResolutionForZoom(newZoom);view.getAnimating()&&view.cancelAnimations(),view.animate({resolution:newResolution,anchor,duration:void 0!==duration?duration:250,easing:_easing_js__WEBPACK_IMPORTED_MODULE_1__.vT})}const __WEBPACK_DEFAULT_EXPORT__=Interaction},"./node_modules/ol/interaction/Pointer.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,v:()=>centroid});var _MapBrowserEventType_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/MapBrowserEventType.js"),_Interaction_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/interaction/Interaction.js");class PointerInteraction extends _Interaction_js__WEBPACK_IMPORTED_MODULE_1__.Ay{constructor(options){super(options=options||{}),options.handleDownEvent&&(this.handleDownEvent=options.handleDownEvent),options.handleDragEvent&&(this.handleDragEvent=options.handleDragEvent),options.handleMoveEvent&&(this.handleMoveEvent=options.handleMoveEvent),options.handleUpEvent&&(this.handleUpEvent=options.handleUpEvent),options.stopDown&&(this.stopDown=options.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(mapBrowserEvent){return!1}handleDragEvent(mapBrowserEvent){}handleEvent(mapBrowserEvent){if(!mapBrowserEvent.originalEvent)return!0;let stopEvent=!1;if(this.updateTrackedPointers_(mapBrowserEvent),this.handlingDownUpSequence){if(mapBrowserEvent.type==_MapBrowserEventType_js__WEBPACK_IMPORTED_MODULE_0__.A.POINTERDRAG)this.handleDragEvent(mapBrowserEvent),mapBrowserEvent.originalEvent.preventDefault();else if(mapBrowserEvent.type==_MapBrowserEventType_js__WEBPACK_IMPORTED_MODULE_0__.A.POINTERUP){const handledUp=this.handleUpEvent(mapBrowserEvent);this.handlingDownUpSequence=handledUp&&this.targetPointers.length>0}}else if(mapBrowserEvent.type==_MapBrowserEventType_js__WEBPACK_IMPORTED_MODULE_0__.A.POINTERDOWN){const handled=this.handleDownEvent(mapBrowserEvent);this.handlingDownUpSequence=handled,stopEvent=this.stopDown(handled)}else mapBrowserEvent.type==_MapBrowserEventType_js__WEBPACK_IMPORTED_MODULE_0__.A.POINTERMOVE&&this.handleMoveEvent(mapBrowserEvent);return!stopEvent}handleMoveEvent(mapBrowserEvent){}handleUpEvent(mapBrowserEvent){return!1}stopDown(handled){return handled}updateTrackedPointers_(mapBrowserEvent){mapBrowserEvent.activePointers&&(this.targetPointers=mapBrowserEvent.activePointers)}}function centroid(pointerEvents){const length=pointerEvents.length;let clientX=0,clientY=0;for(let i=0;i<length;i++)clientX+=pointerEvents[i].clientX,clientY+=pointerEvents[i].clientY;return{clientX:clientX/length,clientY:clientY/length}}const __WEBPACK_DEFAULT_EXPORT__=PointerInteraction},"./node_modules/ol/interaction/Property.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={ACTIVE:"active"}},"./node_modules/ol/layer/Base.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _Object_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/Object.js"),_asserts_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/asserts.js"),_math_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/math.js"),_util_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/util.js"),_Property_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/layer/Property.js");class BaseLayer extends _Object_js__WEBPACK_IMPORTED_MODULE_0__.A{constructor(options){super(),this.on,this.once,this.un,this.background_=options.background;const properties=Object.assign({},options);"object"==typeof options.properties&&(delete properties.properties,Object.assign(properties,options.properties)),properties[_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.OPACITY]=void 0!==options.opacity?options.opacity:1,(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.v)("number"==typeof properties[_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.OPACITY],"Layer opacity must be a number"),properties[_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.VISIBLE]=void 0===options.visible||options.visible,properties[_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.Z_INDEX]=options.zIndex,properties[_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.MAX_RESOLUTION]=void 0!==options.maxResolution?options.maxResolution:1/0,properties[_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.MIN_RESOLUTION]=void 0!==options.minResolution?options.minResolution:0,properties[_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.MIN_ZOOM]=void 0!==options.minZoom?options.minZoom:-1/0,properties[_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.MAX_ZOOM]=void 0!==options.maxZoom?options.maxZoom:1/0,this.className_=void 0!==properties.className?properties.className:"ol-layer",delete properties.className,this.setProperties(properties),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(managed){const state=this.state_||{layer:this,managed:void 0===managed||managed},zIndex=this.getZIndex();return state.opacity=(0,_math_js__WEBPACK_IMPORTED_MODULE_2__.qE)(Math.round(100*this.getOpacity())/100,0,1),state.visible=this.getVisible(),state.extent=this.getExtent(),state.zIndex=void 0!==zIndex||state.managed?zIndex:1/0,state.maxResolution=this.getMaxResolution(),state.minResolution=Math.max(this.getMinResolution(),0),state.minZoom=this.getMinZoom(),state.maxZoom=this.getMaxZoom(),this.state_=state,state}getLayersArray(array){return(0,_util_js__WEBPACK_IMPORTED_MODULE_3__.b0)()}getLayerStatesArray(states){return(0,_util_js__WEBPACK_IMPORTED_MODULE_3__.b0)()}getExtent(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.EXTENT)}getMaxResolution(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.MAX_RESOLUTION)}getMinResolution(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.MIN_RESOLUTION)}getMinZoom(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.MIN_ZOOM)}getMaxZoom(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.MAX_ZOOM)}getOpacity(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.OPACITY)}getSourceState(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_3__.b0)()}getVisible(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.VISIBLE)}getZIndex(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.Z_INDEX)}setBackground(background){this.background_=background,this.changed()}setExtent(extent){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.EXTENT,extent)}setMaxResolution(maxResolution){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.MAX_RESOLUTION,maxResolution)}setMinResolution(minResolution){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.MIN_RESOLUTION,minResolution)}setMaxZoom(maxZoom){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.MAX_ZOOM,maxZoom)}setMinZoom(minZoom){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.MIN_ZOOM,minZoom)}setOpacity(opacity){(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.v)("number"==typeof opacity,"Layer opacity must be a number"),this.set(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.OPACITY,opacity)}setVisible(visible){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.VISIBLE,visible)}setZIndex(zindex){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_4__.A.Z_INDEX,zindex)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const __WEBPACK_DEFAULT_EXPORT__=BaseLayer},"./node_modules/ol/layer/BaseVector.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>BaseVector});var rbush=__webpack_require__("./node_modules/ol/node_modules/rbush/index.js"),ol_color=__webpack_require__("./node_modules/ol/color.js"),array=__webpack_require__("./node_modules/ol/array.js"),size=__webpack_require__("./node_modules/ol/size.js");let numTypes=0;const BooleanType=1<<numTypes++,NumberType=1<<numTypes++,StringType=1<<numTypes++,ColorType=1<<numTypes++,NumberArrayType=1<<numTypes++,SizeType=1<<numTypes++,AnyType=Math.pow(2,6)-1,typeNames={[BooleanType]:"boolean",[NumberType]:"number",[StringType]:"string",[ColorType]:"color",[NumberArrayType]:"number[]",[SizeType]:"size"},namedTypes=Object.keys(typeNames).map(Number).sort(array.V_);function typeName(type){const names=[];for(const namedType of namedTypes)includesType(type,namedType)&&names.push(typeNames[namedType]);return 0===names.length?"untyped":names.length<3?names.join(" or "):names.slice(0,-1).join(", ")+", or "+names[names.length-1]}function includesType(broad,specific){return(broad&specific)===specific}function isType(type,expected){return type===expected}class LiteralExpression{constructor(type,value){if(!function isSpecific(type){return type in typeNames}(type))throw new Error(`literal expressions must have a specific type, got ${typeName(type)}`);this.type=type,this.value=value}}class CallExpression{constructor(type,operator,...args){this.type=type,this.operator=operator,this.args=args}}function newParsingContext(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function parse(encoded,expectedType,context){switch(typeof encoded){case"boolean":if(isType(expectedType,StringType))return new LiteralExpression(StringType,encoded?"true":"false");if(!includesType(expectedType,BooleanType))throw new Error(`got a boolean, but expected ${typeName(expectedType)}`);return new LiteralExpression(BooleanType,encoded);case"number":if(isType(expectedType,SizeType))return new LiteralExpression(SizeType,(0,size.xq)(encoded));if(isType(expectedType,BooleanType))return new LiteralExpression(BooleanType,!!encoded);if(isType(expectedType,StringType))return new LiteralExpression(StringType,encoded.toString());if(!includesType(expectedType,NumberType))throw new Error(`got a number, but expected ${typeName(expectedType)}`);return new LiteralExpression(NumberType,encoded);case"string":if(isType(expectedType,ColorType))return new LiteralExpression(ColorType,(0,ol_color.sH)(encoded));if(isType(expectedType,BooleanType))return new LiteralExpression(BooleanType,!!encoded);if(!includesType(expectedType,StringType))throw new Error(`got a string, but expected ${typeName(expectedType)}`);return new LiteralExpression(StringType,encoded)}if(!Array.isArray(encoded))throw new Error("expression must be an array or a primitive value");if(0===encoded.length)throw new Error("empty expression");if("string"==typeof encoded[0])return function parseCallExpression(encoded,returnType,context){const operator=encoded[0],parser=parsers[operator];if(!parser)throw new Error(`unknown operator: ${operator}`);return parser(encoded,returnType,context)}(encoded,expectedType,context);for(const item of encoded)if("number"!=typeof item)throw new Error("expected an array of numbers");if(isType(expectedType,SizeType)){if(2!==encoded.length)throw new Error(`expected an array of two values for a size, got ${encoded.length}`);return new LiteralExpression(SizeType,encoded)}if(isType(expectedType,ColorType)){if(3===encoded.length)return new LiteralExpression(ColorType,[...encoded,1]);if(4===encoded.length)return new LiteralExpression(ColorType,encoded);throw new Error(`expected an array of 3 or 4 values for a color, got ${encoded.length}`)}if(!includesType(expectedType,NumberArrayType))throw new Error(`got an array of numbers, but expected ${typeName(expectedType)}`);return new LiteralExpression(NumberArrayType,encoded)}const Ops_Get="get",Ops_Var="var",Ops_Concat="concat",Ops_GeometryType="geometry-type",Ops_LineMetric="line-metric",Ops_Any="any",Ops_All="all",Ops_Not="!",Ops_Resolution="resolution",Ops_Zoom="zoom",Ops_Time="time",Ops_Equal="==",Ops_NotEqual="!=",Ops_GreaterThan=">",Ops_GreaterThanOrEqualTo=">=",Ops_LessThan="<",Ops_LessThanOrEqualTo="<=",Ops_Multiply="*",Ops_Divide="/",Ops_Add="+",Ops_Subtract="-",Ops_Clamp="clamp",Ops_Mod="%",Ops_Pow="^",Ops_Abs="abs",Ops_Floor="floor",Ops_Ceil="ceil",Ops_Round="round",Ops_Sin="sin",Ops_Cos="cos",Ops_Atan="atan",Ops_Sqrt="sqrt",Ops_Match="match",Ops_Between="between",Ops_Interpolate="interpolate",Ops_Coalesce="coalesce",Ops_Case="case",Ops_In="in",Ops_Number="number",Ops_String="string",Ops_Array="array",Ops_Color="color",Ops_Id="id",Ops_Band="band",Ops_Palette="palette",Ops_ToString="to-string",Ops_Has="has",parsers={[Ops_Get]:createCallExpressionParser(hasArgsCount(1,1/0),withGetArgs),[Ops_Var]:createCallExpressionParser(hasArgsCount(1,1),function withVarArgs(encoded,returnType,context){const name=encoded[1];if("string"!=typeof name)throw new Error("expected a string argument for var operation");return context.variables.add(name),[new LiteralExpression(StringType,name)]}),[Ops_Has]:createCallExpressionParser(hasArgsCount(1,1/0),withGetArgs),[Ops_Id]:createCallExpressionParser(function usesFeatureId(encoded,returnType,context){context.featureId=!0},withNoArgs),[Ops_Concat]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(StringType)),[Ops_GeometryType]:createCallExpressionParser(function usesGeometryType(encoded,returnType,context){context.geometryType=!0},withNoArgs),[Ops_LineMetric]:createCallExpressionParser(withNoArgs),[Ops_Resolution]:createCallExpressionParser(usesMapState,withNoArgs),[Ops_Zoom]:createCallExpressionParser(usesMapState,withNoArgs),[Ops_Time]:createCallExpressionParser(usesMapState,withNoArgs),[Ops_Any]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(BooleanType)),[Ops_All]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(BooleanType)),[Ops_Not]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(BooleanType)),[Ops_Equal]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(AnyType)),[Ops_NotEqual]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(AnyType)),[Ops_GreaterThan]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType)),[Ops_GreaterThanOrEqualTo]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType)),[Ops_LessThan]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType)),[Ops_LessThanOrEqualTo]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType)),[Ops_Multiply]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfReturnType),[Ops_Coalesce]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfReturnType),[Ops_Divide]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType)),[Ops_Add]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(NumberType)),[Ops_Subtract]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType)),[Ops_Clamp]:createCallExpressionParser(hasArgsCount(3,3),withArgsOfType(NumberType)),[Ops_Mod]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType)),[Ops_Pow]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType)),[Ops_Abs]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType)),[Ops_Floor]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType)),[Ops_Ceil]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType)),[Ops_Round]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType)),[Ops_Sin]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType)),[Ops_Cos]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType)),[Ops_Atan]:createCallExpressionParser(hasArgsCount(1,2),withArgsOfType(NumberType)),[Ops_Sqrt]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType)),[Ops_Match]:createCallExpressionParser(hasArgsCount(4,1/0),hasEvenArgs,function withMatchArgs(encoded,returnType,context){const argsCount=encoded.length-1,inputType=StringType|NumberType|BooleanType,input=parse(encoded[1],inputType,context),fallback=parse(encoded[encoded.length-1],returnType,context),args=new Array(argsCount-2);for(let i=0;i<argsCount-2;i+=2){try{const match=parse(encoded[i+2],input.type,context);args[i]=match}catch(err){throw new Error(`failed to parse argument ${i+1} of match expression: ${err.message}`)}try{const output=parse(encoded[i+3],fallback.type,context);args[i+1]=output}catch(err){throw new Error(`failed to parse argument ${i+2} of match expression: ${err.message}`)}}return[input,...args,fallback]}),[Ops_Between]:createCallExpressionParser(hasArgsCount(3,3),withArgsOfType(NumberType)),[Ops_Interpolate]:createCallExpressionParser(hasArgsCount(6,1/0),hasEvenArgs,function withInterpolateArgs(encoded,returnType,context){const interpolationType=encoded[1];let base;switch(interpolationType[0]){case"linear":base=1;break;case"exponential":const b=interpolationType[1];if("number"!=typeof b||b<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(b)} instead`);base=b;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(interpolationType)}`)}const interpolation=new LiteralExpression(NumberType,base);let input;try{input=parse(encoded[2],NumberType,context)}catch(err){throw new Error(`failed to parse argument 1 in interpolate expression: ${err.message}`)}const args=new Array(encoded.length-3);for(let i=0;i<args.length;i+=2){try{const stop=parse(encoded[i+3],NumberType,context);args[i]=stop}catch(err){throw new Error(`failed to parse argument ${i+2} for interpolate expression: ${err.message}`)}try{const output=parse(encoded[i+4],returnType,context);args[i+1]=output}catch(err){throw new Error(`failed to parse argument ${i+3} for interpolate expression: ${err.message}`)}}return[interpolation,input,...args]}),[Ops_Case]:createCallExpressionParser(hasArgsCount(3,1/0),function hasOddArgs(encoded,returnType,context){const operation=encoded[0],argCount=encoded.length-1;if(argCount%2==0)throw new Error(`expected an odd number of arguments for ${operation}, got ${argCount} instead`)},function withCaseArgs(encoded,returnType,context){const fallback=parse(encoded[encoded.length-1],returnType,context),args=new Array(encoded.length-1);for(let i=0;i<args.length-1;i+=2){try{const condition=parse(encoded[i+1],BooleanType,context);args[i]=condition}catch(err){throw new Error(`failed to parse argument ${i} of case expression: ${err.message}`)}try{const output=parse(encoded[i+2],fallback.type,context);args[i+1]=output}catch(err){throw new Error(`failed to parse argument ${i+1} of case expression: ${err.message}`)}}return args[args.length-1]=fallback,args}),[Ops_In]:createCallExpressionParser(hasArgsCount(2,2),function withInArgs(encoded,returnType,context){let needleType,haystack=encoded[2];if(!Array.isArray(haystack))throw new Error('the second argument for the "in" operator must be an array');if("string"==typeof haystack[0]){if("literal"!==haystack[0])throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(haystack[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');haystack=haystack[1],needleType=StringType}else needleType=NumberType;const args=new Array(haystack.length);for(let i=0;i<args.length;i++)try{const arg=parse(haystack[i],needleType,context);args[i]=arg}catch(err){throw new Error(`failed to parse haystack item ${i} for "in" expression: ${err.message}`)}return[parse(encoded[1],needleType,context),...args]}),[Ops_Number]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(AnyType)),[Ops_String]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(AnyType)),[Ops_Array]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(NumberType)),[Ops_Color]:createCallExpressionParser(hasArgsCount(1,4),withArgsOfType(NumberType)),[Ops_Band]:createCallExpressionParser(hasArgsCount(1,3),withArgsOfType(NumberType)),[Ops_Palette]:createCallExpressionParser(hasArgsCount(2,2),function withPaletteArgs(encoded,returnType,context){let index;try{index=parse(encoded[1],NumberType,context)}catch(err){throw new Error(`failed to parse first argument in palette expression: ${err.message}`)}const colors=encoded[2];if(!Array.isArray(colors))throw new Error("the second argument of palette must be an array");const parsedColors=new Array(colors.length);for(let i=0;i<parsedColors.length;i++){let color;try{color=parse(colors[i],ColorType,context)}catch(err){throw new Error(`failed to parse color at index ${i} in palette expression: ${err.message}`)}if(!(color instanceof LiteralExpression))throw new Error(`the palette color at index ${i} must be a literal value`);parsedColors[i]=color}return[index,...parsedColors]}),[Ops_ToString]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(BooleanType|NumberType|StringType|ColorType))};function withGetArgs(encoded,returnType,context){const argsCount=encoded.length-1,args=new Array(argsCount);for(let i=0;i<argsCount;++i){const key=encoded[i+1];switch(typeof key){case"number":args[i]=new LiteralExpression(NumberType,key);break;case"string":args[i]=new LiteralExpression(StringType,key);break;default:throw new Error(`expected a string key or numeric array index for a get operation, got ${key}`)}0===i&&context.properties.add(String(key))}return args}function usesMapState(encoded,returnType,context){context.mapState=!0}function withNoArgs(encoded,returnType,context){const operation=encoded[0];if(1!==encoded.length)throw new Error(`expected no arguments for ${operation} operation`);return[]}function hasArgsCount(minArgs,maxArgs){return function(encoded,returnType,context){const operation=encoded[0],argCount=encoded.length-1;if(minArgs===maxArgs){if(argCount!==minArgs){throw new Error(`expected ${minArgs} argument${1===minArgs?"":"s"} for ${operation}, got ${argCount}`)}}else if(argCount<minArgs||argCount>maxArgs){throw new Error(`expected ${maxArgs===1/0?`${minArgs} or more`:`${minArgs} to ${maxArgs}`} arguments for ${operation}, got ${argCount}`)}}}function withArgsOfReturnType(encoded,returnType,context){const argCount=encoded.length-1,args=new Array(argCount);for(let i=0;i<argCount;++i){const expression=parse(encoded[i+1],returnType,context);args[i]=expression}return args}function withArgsOfType(argType){return function(encoded,returnType,context){const argCount=encoded.length-1,args=new Array(argCount);for(let i=0;i<argCount;++i){const expression=parse(encoded[i+1],argType,context);args[i]=expression}return args}}function hasEvenArgs(encoded,returnType,context){const operation=encoded[0],argCount=encoded.length-1;if(argCount%2==1)throw new Error(`expected an even number of arguments for operation ${operation}, got ${argCount} instead`)}function createCallExpressionParser(...validators){return function(encoded,returnType,context){const operator=encoded[0];let args;for(let i=0;i<validators.length;i++){const parsed=validators[i](encoded,returnType,context);if(i==validators.length-1){if(!parsed)throw new Error("expected last argument validator to return the parsed args");args=parsed}}return new CallExpression(returnType,operator,...args)}}function computeGeometryType(geometry){if(!geometry)return"";const type=geometry.getType();switch(type){case"Point":case"LineString":case"Polygon":return type;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return type.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return computeGeometryType(geometry.getGeometries()[0]);default:return""}}function buildExpression(encoded,type,context){return compileExpression(parse(encoded,type,context),context)}function compileExpression(expression,context){if(expression instanceof LiteralExpression){if(expression.type===ColorType&&"string"==typeof expression.value){const colorValue=(0,ol_color.sH)(expression.value);return function(){return colorValue}}return function(){return expression.value}}const operator=expression.operator;switch(operator){case Ops_Number:case Ops_String:case Ops_Coalesce:return function compileAssertionExpression(expression,context){const type=expression.operator,length=expression.args.length,args=new Array(length);for(let i=0;i<length;++i)args[i]=compileExpression(expression.args[i],context);switch(type){case Ops_Coalesce:return context=>{for(let i=0;i<length;++i){const value=args[i](context);if(null!=value)return value}throw new Error("Expected one of the values to be non-null")};case Ops_Number:case Ops_String:return context=>{for(let i=0;i<length;++i){const value=args[i](context);if(typeof value===type)return value}throw new Error(`Expected one of the values to be a ${type}`)};default:throw new Error(`Unsupported assertion operator ${type}`)}}(expression,context);case Ops_Get:case Ops_Var:case Ops_Has:return function compileAccessorExpression(expression,context){const nameExpression=expression.args[0],name=nameExpression.value;switch(expression.operator){case Ops_Get:return context=>{const args=expression.args;let value=context.properties[name];for(let i=1,ii=args.length;i<ii;++i){value=value[args[i].value]}return value};case Ops_Var:return context=>context.variables[name];case Ops_Has:return context=>{const args=expression.args;if(!(name in context.properties))return!1;let value=context.properties[name];for(let i=1,ii=args.length;i<ii;++i){const key=args[i].value;if(!value||!Object.hasOwn(value,key))return!1;value=value[key]}return!0};default:throw new Error(`Unsupported accessor operator ${expression.operator}`)}}(expression);case Ops_Id:return context=>context.featureId;case Ops_GeometryType:return context=>context.geometryType;case Ops_Concat:{const args=expression.args.map(e=>compileExpression(e,context));return context=>"".concat(...args.map(arg=>arg(context).toString()))}case Ops_Resolution:return context=>context.resolution;case Ops_Any:case Ops_All:case Ops_Between:case Ops_In:case Ops_Not:return function compileLogicalExpression(expression,context){const op=expression.operator,length=expression.args.length,args=new Array(length);for(let i=0;i<length;++i)args[i]=compileExpression(expression.args[i],context);switch(op){case Ops_Any:return context=>{for(let i=0;i<length;++i)if(args[i](context))return!0;return!1};case Ops_All:return context=>{for(let i=0;i<length;++i)if(!args[i](context))return!1;return!0};case Ops_Between:return context=>{const value=args[0](context),min=args[1](context),max=args[2](context);return value>=min&&value<=max};case Ops_In:return context=>{const value=args[0](context);for(let i=1;i<length;++i)if(value===args[i](context))return!0;return!1};case Ops_Not:return context=>!args[0](context);default:throw new Error(`Unsupported logical operator ${op}`)}}(expression,context);case Ops_Equal:case Ops_NotEqual:case Ops_LessThan:case Ops_LessThanOrEqualTo:case Ops_GreaterThan:case Ops_GreaterThanOrEqualTo:return function compileComparisonExpression(expression,context){const op=expression.operator,left=compileExpression(expression.args[0],context),right=compileExpression(expression.args[1],context);switch(op){case Ops_Equal:return context=>left(context)===right(context);case Ops_NotEqual:return context=>left(context)!==right(context);case Ops_LessThan:return context=>left(context)<right(context);case Ops_LessThanOrEqualTo:return context=>left(context)<=right(context);case Ops_GreaterThan:return context=>left(context)>right(context);case Ops_GreaterThanOrEqualTo:return context=>left(context)>=right(context);default:throw new Error(`Unsupported comparison operator ${op}`)}}(expression,context);case Ops_Multiply:case Ops_Divide:case Ops_Add:case Ops_Subtract:case Ops_Clamp:case Ops_Mod:case Ops_Pow:case Ops_Abs:case Ops_Floor:case Ops_Ceil:case Ops_Round:case Ops_Sin:case Ops_Cos:case Ops_Atan:case Ops_Sqrt:return function compileNumericExpression(expression,context){const op=expression.operator,length=expression.args.length,args=new Array(length);for(let i=0;i<length;++i)args[i]=compileExpression(expression.args[i],context);switch(op){case Ops_Multiply:return context=>{let value=1;for(let i=0;i<length;++i)value*=args[i](context);return value};case Ops_Divide:return context=>args[0](context)/args[1](context);case Ops_Add:return context=>{let value=0;for(let i=0;i<length;++i)value+=args[i](context);return value};case Ops_Subtract:return context=>args[0](context)-args[1](context);case Ops_Clamp:return context=>{const value=args[0](context),min=args[1](context);if(value<min)return min;const max=args[2](context);return value>max?max:value};case Ops_Mod:return context=>args[0](context)%args[1](context);case Ops_Pow:return context=>Math.pow(args[0](context),args[1](context));case Ops_Abs:return context=>Math.abs(args[0](context));case Ops_Floor:return context=>Math.floor(args[0](context));case Ops_Ceil:return context=>Math.ceil(args[0](context));case Ops_Round:return context=>Math.round(args[0](context));case Ops_Sin:return context=>Math.sin(args[0](context));case Ops_Cos:return context=>Math.cos(args[0](context));case Ops_Atan:return 2===length?context=>Math.atan2(args[0](context),args[1](context)):context=>Math.atan(args[0](context));case Ops_Sqrt:return context=>Math.sqrt(args[0](context));default:throw new Error(`Unsupported numeric operator ${op}`)}}(expression,context);case Ops_Case:return function compileCaseExpression(expression,context){const length=expression.args.length,args=new Array(length);for(let i=0;i<length;++i)args[i]=compileExpression(expression.args[i],context);return context=>{for(let i=0;i<length-1;i+=2){if(args[i](context))return args[i+1](context)}return args[length-1](context)}}(expression,context);case Ops_Match:return function compileMatchExpression(expression,context){const length=expression.args.length,args=new Array(length);for(let i=0;i<length;++i)args[i]=compileExpression(expression.args[i],context);return context=>{const value=args[0](context);for(let i=1;i<length-1;i+=2)if(value===args[i](context))return args[i+1](context);return args[length-1](context)}}(expression,context);case Ops_Interpolate:return function compileInterpolateExpression(expression,context){const length=expression.args.length,args=new Array(length);for(let i=0;i<length;++i)args[i]=compileExpression(expression.args[i],context);return context=>{const base=args[0](context),value=args[1](context);let previousInput,previousOutput;for(let i=2;i<length;i+=2){const input=args[i](context);let output=args[i+1](context);const isColor=Array.isArray(output);if(isColor&&(output=(0,ol_color.fu)(output)),input>=value)return 2===i?output:isColor?interpolateColor(base,value,previousInput,previousOutput,input,output):interpolateNumber(base,value,previousInput,previousOutput,input,output);previousInput=input,previousOutput=output}return previousOutput}}(expression,context);case Ops_ToString:return function compileConvertExpression(expression,context){const op=expression.operator,length=expression.args.length,args=new Array(length);for(let i=0;i<length;++i)args[i]=compileExpression(expression.args[i],context);if(op===Ops_ToString)return context=>{const value=args[0](context);return expression.args[0].type===ColorType?(0,ol_color.dI)(value):value.toString()};throw new Error(`Unsupported convert operator ${op}`)}(expression,context);default:throw new Error(`Unsupported operator ${operator}`)}}function interpolateNumber(base,value,input1,output1,input2,output2){const delta=input2-input1;if(0===delta)return output1;const along=value-input1;return output1+(1===base?along/delta:(Math.pow(base,along)-1)/(Math.pow(base,delta)-1))*(output2-output1)}function interpolateColor(base,value,input1,rgba1,input2,rgba2){if(0===input2-input1)return rgba1;const lcha1=(0,ol_color.eE)(rgba1),lcha2=(0,ol_color.eE)(rgba2);let deltaHue=lcha2[2]-lcha1[2];deltaHue>180?deltaHue-=360:deltaHue<-180&&(deltaHue+=360);const lcha=[interpolateNumber(base,value,input1,lcha1[0],input2,lcha2[0]),interpolateNumber(base,value,input1,lcha1[1],input2,lcha2[1]),lcha1[2]+interpolateNumber(base,value,input1,0,input2,deltaHue),interpolateNumber(base,value,input1,rgba1[3],input2,rgba2[3])];return(0,ol_color.cD)(lcha)}var obj=__webpack_require__("./node_modules/ol/obj.js"),Circle=__webpack_require__("./node_modules/ol/style/Circle.js"),Fill=__webpack_require__("./node_modules/ol/style/Fill.js"),Icon=__webpack_require__("./node_modules/ol/style/Icon.js"),RegularShape=__webpack_require__("./node_modules/ol/style/RegularShape.js"),Stroke=__webpack_require__("./node_modules/ol/style/Stroke.js"),Style=__webpack_require__("./node_modules/ol/style/Style.js");class Text{constructor(options){options=options||{},this.font_=options.font,this.rotation_=options.rotation,this.rotateWithView_=options.rotateWithView,this.keepUpright_=options.keepUpright,this.scale_=options.scale,this.scaleArray_=(0,size.xq)(void 0!==options.scale?options.scale:1),this.text_=options.text,this.textAlign_=options.textAlign,this.justify_=options.justify,this.repeat_=options.repeat,this.textBaseline_=options.textBaseline,this.fill_=void 0!==options.fill?options.fill:new Fill.A({color:"#333"}),this.maxAngle_=void 0!==options.maxAngle?options.maxAngle:Math.PI/4,this.placement_=void 0!==options.placement?options.placement:"point",this.overflow_=!!options.overflow,this.stroke_=void 0!==options.stroke?options.stroke:null,this.offsetX_=void 0!==options.offsetX?options.offsetX:0,this.offsetY_=void 0!==options.offsetY?options.offsetY:0,this.backgroundFill_=options.backgroundFill?options.backgroundFill:null,this.backgroundStroke_=options.backgroundStroke?options.backgroundStroke:null,this.padding_=void 0===options.padding?null:options.padding,this.declutterMode_=options.declutterMode}clone(){const scale=this.getScale();return new Text({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(scale)?scale.slice():scale,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Fill.A?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(overflow){this.overflow_=overflow}setFont(font){this.font_=font}setMaxAngle(maxAngle){this.maxAngle_=maxAngle}setOffsetX(offsetX){this.offsetX_=offsetX}setOffsetY(offsetY){this.offsetY_=offsetY}setPlacement(placement){this.placement_=placement}setRepeat(repeat){this.repeat_=repeat}setRotateWithView(rotateWithView){this.rotateWithView_=rotateWithView}setKeepUpright(keepUpright){this.keepUpright_=keepUpright}setFill(fill){this.fill_=fill}setRotation(rotation){this.rotation_=rotation}setScale(scale){this.scale_=scale,this.scaleArray_=(0,size.xq)(void 0!==scale?scale:1)}setStroke(stroke){this.stroke_=stroke}setText(text){this.text_=text}setTextAlign(textAlign){this.textAlign_=textAlign}setJustify(justify){this.justify_=justify}setTextBaseline(textBaseline){this.textBaseline_=textBaseline}setBackgroundFill(fill){this.backgroundFill_=fill}setBackgroundStroke(stroke){this.backgroundStroke_=stroke}setPadding(padding){this.padding_=padding}}const style_Text=Text;function always(context){return!0}function rulesToStyleFunction(rules){const parsingContext=newParsingContext(),evaluator=function buildRuleSet(rules,context){const length=rules.length,compiledRules=new Array(length);for(let i=0;i<length;++i){const rule=rules[i],filter="filter"in rule?buildExpression(rule.filter,BooleanType,context):always;let styles;if(Array.isArray(rule.style)){const styleLength=rule.style.length;styles=new Array(styleLength);for(let j=0;j<styleLength;++j)styles[j]=buildStyle(rule.style[j],context)}else styles=[buildStyle(rule.style,context)];compiledRules[i]={filter,styles}}return function(context){const styles=[];let someMatched=!1;for(let i=0;i<length;++i){if((0,compiledRules[i].filter)(context)&&(!rules[i].else||!someMatched)){someMatched=!0;for(const styleEvaluator of compiledRules[i].styles){const style=styleEvaluator(context);style&&styles.push(style)}}}return styles}}(rules,parsingContext),evaluationContext={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(feature,resolution){if(evaluationContext.properties=feature.getPropertiesInternal(),evaluationContext.resolution=resolution,parsingContext.featureId){const id=feature.getId();evaluationContext.featureId=void 0!==id?id:null}return parsingContext.geometryType&&(evaluationContext.geometryType=computeGeometryType(feature.getGeometry())),evaluator(evaluationContext)}}function flatStylesToStyleFunction(flatStyles){const parsingContext=newParsingContext(),length=flatStyles.length,evaluators=new Array(length);for(let i=0;i<length;++i)evaluators[i]=buildStyle(flatStyles[i],parsingContext);const evaluationContext={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},styles=new Array(length);return function(feature,resolution){if(evaluationContext.properties=feature.getPropertiesInternal(),evaluationContext.resolution=resolution,parsingContext.featureId){const id=feature.getId();evaluationContext.featureId=void 0!==id?id:null}let nonNullCount=0;for(let i=0;i<length;++i){const style=evaluators[i](evaluationContext);style&&(styles[nonNullCount]=style,nonNullCount+=1)}return styles.length=nonNullCount,styles}}function buildStyle(flatStyle,context){const evaluateFill=buildFill(flatStyle,"",context),evaluateStroke=buildStroke(flatStyle,"",context),evaluateText=function buildText(flatStyle,context){const prefix="text-",evaluateValue=stringEvaluator(flatStyle,prefix+"value",context);if(!evaluateValue)return null;const evaluateFill=buildFill(flatStyle,prefix,context),evaluateBackgroundFill=buildFill(flatStyle,prefix+"background-",context),evaluateStroke=buildStroke(flatStyle,prefix,context),evaluateBackgroundStroke=buildStroke(flatStyle,prefix+"background-",context),evaluateFont=stringEvaluator(flatStyle,prefix+"font",context),evaluateMaxAngle=numberEvaluator(flatStyle,prefix+"max-angle",context),evaluateOffsetX=numberEvaluator(flatStyle,prefix+"offset-x",context),evaluateOffsetY=numberEvaluator(flatStyle,prefix+"offset-y",context),evaluateOverflow=booleanEvaluator(flatStyle,prefix+"overflow",context),evaluatePlacement=stringEvaluator(flatStyle,prefix+"placement",context),evaluateRepeat=numberEvaluator(flatStyle,prefix+"repeat",context),evaluateScale=sizeLikeEvaluator(flatStyle,prefix+"scale",context),evaluateRotateWithView=booleanEvaluator(flatStyle,prefix+"rotate-with-view",context),evaluateRotation=numberEvaluator(flatStyle,prefix+"rotation",context),evaluateAlign=stringEvaluator(flatStyle,prefix+"align",context),evaluateJustify=stringEvaluator(flatStyle,prefix+"justify",context),evaluateBaseline=stringEvaluator(flatStyle,prefix+"baseline",context),evaluateKeepUpright=booleanEvaluator(flatStyle,prefix+"keep-upright",context),evaluatePadding=numberArrayEvaluator(flatStyle,prefix+"padding",context),declutterMode=optionalDeclutterMode(flatStyle,prefix+"declutter-mode"),text=new style_Text({declutterMode});return function(context){if(text.setText(evaluateValue(context)),evaluateFill&&text.setFill(evaluateFill(context)),evaluateBackgroundFill&&text.setBackgroundFill(evaluateBackgroundFill(context)),evaluateStroke&&text.setStroke(evaluateStroke(context)),evaluateBackgroundStroke&&text.setBackgroundStroke(evaluateBackgroundStroke(context)),evaluateFont&&text.setFont(evaluateFont(context)),evaluateMaxAngle&&text.setMaxAngle(evaluateMaxAngle(context)),evaluateOffsetX&&text.setOffsetX(evaluateOffsetX(context)),evaluateOffsetY&&text.setOffsetY(evaluateOffsetY(context)),evaluateOverflow&&text.setOverflow(evaluateOverflow(context)),evaluatePlacement){const placement=evaluatePlacement(context);if("point"!==placement&&"line"!==placement)throw new Error("Expected point or line for text-placement");text.setPlacement(placement)}if(evaluateRepeat&&text.setRepeat(evaluateRepeat(context)),evaluateScale&&text.setScale(evaluateScale(context)),evaluateRotateWithView&&text.setRotateWithView(evaluateRotateWithView(context)),evaluateRotation&&text.setRotation(evaluateRotation(context)),evaluateAlign){const textAlign=evaluateAlign(context);if("left"!==textAlign&&"center"!==textAlign&&"right"!==textAlign&&"end"!==textAlign&&"start"!==textAlign)throw new Error("Expected left, right, center, start, or end for text-align");text.setTextAlign(textAlign)}if(evaluateJustify){const justify=evaluateJustify(context);if("left"!==justify&&"right"!==justify&&"center"!==justify)throw new Error("Expected left, right, or center for text-justify");text.setJustify(justify)}if(evaluateBaseline){const textBaseline=evaluateBaseline(context);if("bottom"!==textBaseline&&"top"!==textBaseline&&"middle"!==textBaseline&&"alphabetic"!==textBaseline&&"hanging"!==textBaseline)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");text.setTextBaseline(textBaseline)}return evaluatePadding&&text.setPadding(evaluatePadding(context)),evaluateKeepUpright&&text.setKeepUpright(evaluateKeepUpright(context)),text}}(flatStyle,context),evaluateImage=function buildImage(flatStyle,context){if("icon-src"in flatStyle)return function buildIcon(flatStyle,context){const prefix="icon-",srcName=prefix+"src",src=requireString(flatStyle[srcName],srcName),evaluateAnchor=coordinateEvaluator(flatStyle,prefix+"anchor",context),evaluateScale=sizeLikeEvaluator(flatStyle,prefix+"scale",context),evaluateOpacity=numberEvaluator(flatStyle,prefix+"opacity",context),evaluateDisplacement=coordinateEvaluator(flatStyle,prefix+"displacement",context),evaluateRotation=numberEvaluator(flatStyle,prefix+"rotation",context),evaluateRotateWithView=booleanEvaluator(flatStyle,prefix+"rotate-with-view",context),anchorOrigin=optionalIconOrigin(flatStyle,prefix+"anchor-origin"),anchorXUnits=optionalIconAnchorUnits(flatStyle,prefix+"anchor-x-units"),anchorYUnits=optionalIconAnchorUnits(flatStyle,prefix+"anchor-y-units"),color=function optionalColorLike(flatStyle,property){const encoded=flatStyle[property];if(void 0===encoded)return;return requireColorLike(encoded,property)}(flatStyle,prefix+"color"),crossOrigin=function optionalString(flatStyle,property){const encoded=flatStyle[property];if(void 0===encoded)return;if("string"!=typeof encoded)throw new Error(`Expected a string for ${property}`);return encoded}(flatStyle,prefix+"cross-origin"),offset=function optionalNumberArray(flatStyle,property){const encoded=flatStyle[property];if(void 0===encoded)return;return requireNumberArray(encoded,property)}(flatStyle,prefix+"offset"),offsetOrigin=optionalIconOrigin(flatStyle,prefix+"offset-origin"),width=optionalNumber(flatStyle,prefix+"width"),height=optionalNumber(flatStyle,prefix+"height"),size=optionalSize(flatStyle,prefix+"size"),declutterMode=optionalDeclutterMode(flatStyle,prefix+"declutter-mode"),icon=new Icon.A({src,anchorOrigin,anchorXUnits,anchorYUnits,color,crossOrigin,offset,offsetOrigin,height,width,size,declutterMode});return function(context){return evaluateOpacity&&icon.setOpacity(evaluateOpacity(context)),evaluateDisplacement&&icon.setDisplacement(evaluateDisplacement(context)),evaluateRotation&&icon.setRotation(evaluateRotation(context)),evaluateRotateWithView&&icon.setRotateWithView(evaluateRotateWithView(context)),evaluateScale&&icon.setScale(evaluateScale(context)),evaluateAnchor&&icon.setAnchor(evaluateAnchor(context)),icon}}(flatStyle,context);if("shape-points"in flatStyle)return function buildShape(flatStyle,context){const prefix="shape-",pointsName=prefix+"points",radiusName=prefix+"radius",points=requireNumber(flatStyle[pointsName],pointsName),radius=requireNumber(flatStyle[radiusName],radiusName),evaluateFill=buildFill(flatStyle,prefix,context),evaluateStroke=buildStroke(flatStyle,prefix,context),evaluateScale=sizeLikeEvaluator(flatStyle,prefix+"scale",context),evaluateDisplacement=coordinateEvaluator(flatStyle,prefix+"displacement",context),evaluateRotation=numberEvaluator(flatStyle,prefix+"rotation",context),evaluateRotateWithView=booleanEvaluator(flatStyle,prefix+"rotate-with-view",context),radius2=optionalNumber(flatStyle,prefix+"radius2"),angle=optionalNumber(flatStyle,prefix+"angle"),declutterMode=optionalDeclutterMode(flatStyle,prefix+"declutter-mode"),shape=new RegularShape.A({points,radius,radius2,angle,declutterMode});return function(context){return evaluateFill&&shape.setFill(evaluateFill(context)),evaluateStroke&&shape.setStroke(evaluateStroke(context)),evaluateDisplacement&&shape.setDisplacement(evaluateDisplacement(context)),evaluateRotation&&shape.setRotation(evaluateRotation(context)),evaluateRotateWithView&&shape.setRotateWithView(evaluateRotateWithView(context)),evaluateScale&&shape.setScale(evaluateScale(context)),shape}}(flatStyle,context);if("circle-radius"in flatStyle)return function buildCircle(flatStyle,context){const prefix="circle-",evaluateFill=buildFill(flatStyle,prefix,context),evaluateStroke=buildStroke(flatStyle,prefix,context),evaluateRadius=numberEvaluator(flatStyle,prefix+"radius",context),evaluateScale=sizeLikeEvaluator(flatStyle,prefix+"scale",context),evaluateDisplacement=coordinateEvaluator(flatStyle,prefix+"displacement",context),evaluateRotation=numberEvaluator(flatStyle,prefix+"rotation",context),evaluateRotateWithView=booleanEvaluator(flatStyle,prefix+"rotate-with-view",context),declutterMode=optionalDeclutterMode(flatStyle,prefix+"declutter-mode"),circle=new Circle.A({radius:5,declutterMode});return function(context){return evaluateRadius&&circle.setRadius(evaluateRadius(context)),evaluateFill&&circle.setFill(evaluateFill(context)),evaluateStroke&&circle.setStroke(evaluateStroke(context)),evaluateDisplacement&&circle.setDisplacement(evaluateDisplacement(context)),evaluateRotation&&circle.setRotation(evaluateRotation(context)),evaluateRotateWithView&&circle.setRotateWithView(evaluateRotateWithView(context)),evaluateScale&&circle.setScale(evaluateScale(context)),circle}}(flatStyle,context);return null}(flatStyle,context),evaluateZIndex=numberEvaluator(flatStyle,"z-index",context);if(!(evaluateFill||evaluateStroke||evaluateText||evaluateImage||(0,obj.p)(flatStyle)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(flatStyle));const style=new Style.Ay;return function(context){let empty=!0;if(evaluateFill){const fill=evaluateFill(context);fill&&(empty=!1),style.setFill(fill)}if(evaluateStroke){const stroke=evaluateStroke(context);stroke&&(empty=!1),style.setStroke(stroke)}if(evaluateText){const text=evaluateText(context);text&&(empty=!1),style.setText(text)}if(evaluateImage){const image=evaluateImage(context);image&&(empty=!1),style.setImage(image)}return evaluateZIndex&&style.setZIndex(evaluateZIndex(context)),empty?null:style}}function buildFill(flatStyle,prefix,context){let evaluateColor;if(prefix+"fill-pattern-src"in flatStyle)evaluateColor=function patternEvaluator(flatStyle,prefix,context){const srcEvaluator=stringEvaluator(flatStyle,prefix+"pattern-src",context),offsetEvaluator=sizeEvaluator(flatStyle,prefix+"pattern-offset",context),patternSizeEvaluator=sizeEvaluator(flatStyle,prefix+"pattern-size",context),colorEvaluator=colorLikeEvaluator(flatStyle,prefix+"color",context);return function(context){return{src:srcEvaluator(context),offset:offsetEvaluator&&offsetEvaluator(context),size:patternSizeEvaluator&&patternSizeEvaluator(context),color:colorEvaluator&&colorEvaluator(context)}}}(flatStyle,prefix+"fill-",context);else{if("none"===flatStyle[prefix+"fill-color"])return context=>null;evaluateColor=colorLikeEvaluator(flatStyle,prefix+"fill-color",context)}if(!evaluateColor)return null;const fill=new Fill.A;return function(context){const color=evaluateColor(context);return color===ol_color.qV?null:(fill.setColor(color),fill)}}function buildStroke(flatStyle,prefix,context){const evaluateWidth=numberEvaluator(flatStyle,prefix+"stroke-width",context),evaluateColor=colorLikeEvaluator(flatStyle,prefix+"stroke-color",context);if(!evaluateWidth&&!evaluateColor)return null;const evaluateLineCap=stringEvaluator(flatStyle,prefix+"stroke-line-cap",context),evaluateLineJoin=stringEvaluator(flatStyle,prefix+"stroke-line-join",context),evaluateLineDash=numberArrayEvaluator(flatStyle,prefix+"stroke-line-dash",context),evaluateLineDashOffset=numberEvaluator(flatStyle,prefix+"stroke-line-dash-offset",context),evaluateMiterLimit=numberEvaluator(flatStyle,prefix+"stroke-miter-limit",context),stroke=new Stroke.A;return function(context){if(evaluateColor){const color=evaluateColor(context);if(color===ol_color.qV)return null;stroke.setColor(color)}if(evaluateWidth&&stroke.setWidth(evaluateWidth(context)),evaluateLineCap){const lineCap=evaluateLineCap(context);if("butt"!==lineCap&&"round"!==lineCap&&"square"!==lineCap)throw new Error("Expected butt, round, or square line cap");stroke.setLineCap(lineCap)}if(evaluateLineJoin){const lineJoin=evaluateLineJoin(context);if("bevel"!==lineJoin&&"round"!==lineJoin&&"miter"!==lineJoin)throw new Error("Expected bevel, round, or miter line join");stroke.setLineJoin(lineJoin)}return evaluateLineDash&&stroke.setLineDash(evaluateLineDash(context)),evaluateLineDashOffset&&stroke.setLineDashOffset(evaluateLineDashOffset(context)),evaluateMiterLimit&&stroke.setMiterLimit(evaluateMiterLimit(context)),stroke}}function numberEvaluator(flatStyle,name,context){if(!(name in flatStyle))return;const evaluator=buildExpression(flatStyle[name],NumberType,context);return function(context){return requireNumber(evaluator(context),name)}}function stringEvaluator(flatStyle,name,context){if(!(name in flatStyle))return null;const evaluator=buildExpression(flatStyle[name],StringType,context);return function(context){return requireString(evaluator(context),name)}}function booleanEvaluator(flatStyle,name,context){if(!(name in flatStyle))return null;const evaluator=buildExpression(flatStyle[name],BooleanType,context);return function(context){const value=evaluator(context);if("boolean"!=typeof value)throw new Error(`Expected a boolean for ${name}`);return value}}function colorLikeEvaluator(flatStyle,name,context){if(!(name in flatStyle))return null;const evaluator=buildExpression(flatStyle[name],ColorType,context);return function(context){return requireColorLike(evaluator(context),name)}}function numberArrayEvaluator(flatStyle,name,context){if(!(name in flatStyle))return null;const evaluator=buildExpression(flatStyle[name],NumberArrayType,context);return function(context){return requireNumberArray(evaluator(context),name)}}function coordinateEvaluator(flatStyle,name,context){if(!(name in flatStyle))return null;const evaluator=buildExpression(flatStyle[name],NumberArrayType,context);return function(context){const array=requireNumberArray(evaluator(context),name);if(2!==array.length)throw new Error(`Expected two numbers for ${name}`);return array}}function sizeEvaluator(flatStyle,name,context){if(!(name in flatStyle))return null;const evaluator=buildExpression(flatStyle[name],NumberArrayType,context);return function(context){return requireSize(evaluator(context),name)}}function sizeLikeEvaluator(flatStyle,name,context){if(!(name in flatStyle))return null;const evaluator=buildExpression(flatStyle[name],NumberArrayType|NumberType,context);return function(context){return function requireSizeLike(value,property){if("number"==typeof value)return value;return requireSize(value,property)}(evaluator(context),name)}}function optionalNumber(flatStyle,property){const value=flatStyle[property];if(void 0!==value){if("number"!=typeof value)throw new Error(`Expected a number for ${property}`);return value}}function optionalSize(flatStyle,property){const encoded=flatStyle[property];if(void 0!==encoded){if("number"==typeof encoded)return(0,size.xq)(encoded);if(!Array.isArray(encoded))throw new Error(`Expected a number or size array for ${property}`);if(2!==encoded.length||"number"!=typeof encoded[0]||"number"!=typeof encoded[1])throw new Error(`Expected a number or size array for ${property}`);return encoded}}function optionalIconOrigin(flatStyle,property){const encoded=flatStyle[property];if(void 0!==encoded){if("bottom-left"!==encoded&&"bottom-right"!==encoded&&"top-left"!==encoded&&"top-right"!==encoded)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${property}`);return encoded}}function optionalIconAnchorUnits(flatStyle,property){const encoded=flatStyle[property];if(void 0!==encoded){if("pixels"!==encoded&&"fraction"!==encoded)throw new Error(`Expected pixels or fraction for ${property}`);return encoded}}function optionalDeclutterMode(flatStyle,property){const encoded=flatStyle[property];if(void 0!==encoded){if("string"!=typeof encoded)throw new Error(`Expected a string for ${property}`);if("declutter"!==encoded&&"obstacle"!==encoded&&"none"!==encoded)throw new Error(`Expected declutter, obstacle, or none for ${property}`);return encoded}}function requireNumberArray(value,property){if(!Array.isArray(value))throw new Error(`Expected an array for ${property}`);const length=value.length;for(let i=0;i<length;++i)if("number"!=typeof value[i])throw new Error(`Expected an array of numbers for ${property}`);return value}function requireString(value,property){if("string"!=typeof value)throw new Error(`Expected a string for ${property}`);return value}function requireNumber(value,property){if("number"!=typeof value)throw new Error(`Expected a number for ${property}`);return value}function requireColorLike(value,property){if("string"==typeof value)return value;const array=requireNumberArray(value,property),length=array.length;if(length<3||length>4)throw new Error(`Expected a color with 3 or 4 values for ${property}`);return array}function requireSize(value,property){const size=requireNumberArray(value,property);if(2!==size.length)throw new Error(`Expected an array of two numbers for ${property}`);return size}var Layer=__webpack_require__("./node_modules/ol/layer/Layer.js");const Property_RENDER_ORDER="renderOrder";class BaseVectorLayer extends Layer.A{constructor(options){options=options||{};const baseOptions=Object.assign({},options);delete baseOptions.style,delete baseOptions.renderBuffer,delete baseOptions.updateWhileAnimating,delete baseOptions.updateWhileInteracting,super(baseOptions),this.declutter_=options.declutter?String(options.declutter):void 0,this.renderBuffer_=void 0!==options.renderBuffer?options.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(options.style),this.updateWhileAnimating_=void 0!==options.updateWhileAnimating&&options.updateWhileAnimating,this.updateWhileInteracting_=void 0!==options.updateWhileInteracting&&options.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(pixel){return super.getFeatures(pixel)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property_RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(frameState,layerState){const declutterGroup=this.getDeclutter();declutterGroup in frameState.declutter==!1&&(frameState.declutter[declutterGroup]=new rbush.A(9)),this.getRenderer().renderDeclutter(frameState,layerState)}setRenderOrder(renderOrder){this.set(Property_RENDER_ORDER,renderOrder)}setStyle(style){this.style_=void 0===style?Style.d1:style;const styleLike=function toStyleLike(style){if(void 0===style)return Style.d1;if(!style)return null;if("function"==typeof style)return style;if(style instanceof Style.Ay)return style;if(!Array.isArray(style))return flatStylesToStyleFunction([style]);if(0===style.length)return[];const length=style.length,first=style[0];if(first instanceof Style.Ay){const styles=new Array(length);for(let i=0;i<length;++i){const candidate=style[i];if(!(candidate instanceof Style.Ay))throw new Error("Expected a list of style instances");styles[i]=candidate}return styles}if("style"in first){const rules=new Array(length);for(let i=0;i<length;++i){const candidate=style[i];if(!("style"in candidate))throw new Error("Expected a list of rules with a style property");rules[i]=candidate}return rulesToStyleFunction(rules)}const flatStyles=style;return flatStylesToStyleFunction(flatStyles)}(style);this.styleFunction_=null===style?void 0:(0,Style.mC)(styleLike),this.changed()}setDeclutter(declutter){this.declutter_=declutter?String(declutter):void 0,this.changed()}}const BaseVector=BaseVectorLayer},"./node_modules/ol/layer/Layer.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,l:()=>inView});var _View_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/View.js"),_asserts_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/asserts.js"),_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/events/EventType.js"),_events_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/events.js"),_extent_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/extent.js"),_render_EventType_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/ol/render/EventType.js"),_Base_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/ol/layer/Base.js"),_Property_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/ol/layer/Property.js");class Layer extends _Base_js__WEBPACK_IMPORTED_MODULE_6__.A{constructor(options){const baseOptions=Object.assign({},options);delete baseOptions.source,super(baseOptions),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,options.render&&(this.render=options.render),options.map&&this.setMap(options.map),this.addChangeListener(_Property_js__WEBPACK_IMPORTED_MODULE_7__.A.SOURCE,this.handleSourcePropertyChange_);const source=options.source?options.source:null;this.setSource(source)}getLayersArray(array){return(array=array||[]).push(this),array}getLayerStatesArray(states){return(states=states||[]).push(this.getLayerState()),states}getSource(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_7__.A.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const source=this.getSource();return source?source.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,_events_js__WEBPACK_IMPORTED_MODULE_3__.JH)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const source=this.getSource();source&&(this.sourceChangeKey_=(0,_events_js__WEBPACK_IMPORTED_MODULE_3__.KT)(source,_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__.A.CHANGE,this.handleSourceChange_,this),"ready"===source.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(pixel){return this.renderer_?this.renderer_.getFeatures(pixel):Promise.resolve([])}getData(pixel){return this.renderer_&&this.rendered?this.renderer_.getData(pixel):null}isVisible(view){let frameState;const map=this.getMapInternal();let layerState;if(!view&&map&&(view=map.getView()),frameState=view instanceof _View_js__WEBPACK_IMPORTED_MODULE_0__.Ay?{viewState:view.getState(),extent:view.calculateExtent()}:view,!frameState.layerStatesArray&&map&&(frameState.layerStatesArray=map.getLayerGroup().getLayerStatesArray()),frameState.layerStatesArray){if(layerState=frameState.layerStatesArray.find(layerState=>layerState.layer===this),!layerState)return!1}else layerState=this.getLayerState();const layerExtent=this.getExtent();return inView(layerState,frameState.viewState)&&(!layerExtent||(0,_extent_js__WEBPACK_IMPORTED_MODULE_4__.HY)(layerExtent,frameState.extent))}getAttributions(view){if(!this.isVisible(view))return[];const getAttributions=this.getSource()?.getAttributions();if(!getAttributions)return[];let attributions=getAttributions(view instanceof _View_js__WEBPACK_IMPORTED_MODULE_0__.Ay?view.getViewStateAndExtent():view);return Array.isArray(attributions)||(attributions=[attributions]),attributions}render(frameState,target){const layerRenderer=this.getRenderer();return layerRenderer.prepareFrame(frameState)?(this.rendered=!0,layerRenderer.renderFrame(frameState,target)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(frameState,layerState){}renderDeferred(frameState){const layerRenderer=this.getRenderer();layerRenderer&&layerRenderer.renderDeferred(frameState)}setMapInternal(map){map||this.unrender(),this.set(_Property_js__WEBPACK_IMPORTED_MODULE_7__.A.MAP,map)}getMapInternal(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_7__.A.MAP)}setMap(map){this.mapPrecomposeKey_&&((0,_events_js__WEBPACK_IMPORTED_MODULE_3__.JH)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),map||this.changed(),this.mapRenderKey_&&((0,_events_js__WEBPACK_IMPORTED_MODULE_3__.JH)(this.mapRenderKey_),this.mapRenderKey_=null),map&&(this.mapPrecomposeKey_=(0,_events_js__WEBPACK_IMPORTED_MODULE_3__.KT)(map,_render_EventType_js__WEBPACK_IMPORTED_MODULE_5__.A.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=(0,_events_js__WEBPACK_IMPORTED_MODULE_3__.KT)(this,_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__.A.CHANGE,map.render,map),this.changed())}handlePrecompose_(renderEvent){const layerStatesArray=renderEvent.frameState.layerStatesArray,layerState=this.getLayerState(!1);(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.v)(!layerStatesArray.some(arrayLayerState=>arrayLayerState.layer===layerState.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),layerStatesArray.push(layerState)}setSource(source){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_7__.A.SOURCE,source)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function inView(layerState,viewState){if(!layerState.visible)return!1;const resolution=viewState.resolution;if(resolution<layerState.minResolution||resolution>=layerState.maxResolution)return!1;const zoom=viewState.zoom;return zoom>layerState.minZoom&&zoom<=layerState.maxZoom}const __WEBPACK_DEFAULT_EXPORT__=Layer},"./node_modules/ol/layer/Property.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},"./node_modules/ol/layer/Vector.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Vector});var ViewHint=__webpack_require__("./node_modules/ol/ViewHint.js"),array=__webpack_require__("./node_modules/ol/array.js"),coordinate=__webpack_require__("./node_modules/ol/coordinate.js"),dom=__webpack_require__("./node_modules/ol/dom.js"),ol_extent=__webpack_require__("./node_modules/ol/extent.js"),proj=__webpack_require__("./node_modules/ol/proj.js"),EventType=__webpack_require__("./node_modules/ol/render/EventType.js"),colorlike=__webpack_require__("./node_modules/ol/colorlike.js"),Relationship=__webpack_require__("./node_modules/ol/extent/Relationship.js"),inflate=__webpack_require__("./node_modules/ol/geom/flat/inflate.js");const render_VectorContext=class VectorContext{drawCustom(geometry,feature,renderer,hitDetectionRenderer,index){}drawGeometry(geometry){}setStyle(style){}drawCircle(circleGeometry,feature,index){}drawFeature(feature,style,index){}drawGeometryCollection(geometryCollectionGeometry,feature,index){}drawLineString(lineStringGeometry,feature,index){}drawMultiLineString(multiLineStringGeometry,feature,index){}drawMultiPoint(multiPointGeometry,feature,index){}drawMultiPolygon(multiPolygonGeometry,feature,index){}drawPoint(pointGeometry,feature,index){}drawPolygon(polygonGeometry,feature,index){}drawText(geometry,feature,index){}setFillStrokeStyle(fillStyle,strokeStyle){}setImageStyle(imageStyle,declutterImageWithText){}setTextStyle(textStyle,declutterImageWithText){}};var canvas=__webpack_require__("./node_modules/ol/render/canvas.js");const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH],canvas_Instruction=Instruction;const Builder=class CanvasBuilder extends render_VectorContext{constructor(tolerance,maxExtent,resolution,pixelRatio){super(),this.tolerance=tolerance,this.maxExtent=maxExtent,this.pixelRatio=pixelRatio,this.maxLineWidth=0,this.resolution=resolution,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(dashArray){const pixelRatio=this.pixelRatio;return 1==pixelRatio?dashArray:dashArray.map(function(dash){return dash*pixelRatio})}appendFlatPointCoordinates(flatCoordinates,stride){const extent=this.getBufferedMaxExtent(),tmpCoord=this.tmpCoordinate_,coordinates=this.coordinates;let myEnd=coordinates.length;for(let i=0,ii=flatCoordinates.length;i<ii;i+=stride)tmpCoord[0]=flatCoordinates[i],tmpCoord[1]=flatCoordinates[i+1],(0,ol_extent.Ym)(extent,tmpCoord)&&(coordinates[myEnd++]=tmpCoord[0],coordinates[myEnd++]=tmpCoord[1]);return myEnd}appendFlatLineCoordinates(flatCoordinates,offset,end,stride,closed,skipFirst){const coordinates=this.coordinates;let myEnd=coordinates.length;const extent=this.getBufferedMaxExtent();skipFirst&&(offset+=stride);let lastXCoord=flatCoordinates[offset],lastYCoord=flatCoordinates[offset+1];const nextCoord=this.tmpCoordinate_;let i,lastRel,nextRel,skipped=!0;for(i=offset+stride;i<end;i+=stride)nextCoord[0]=flatCoordinates[i],nextCoord[1]=flatCoordinates[i+1],nextRel=(0,ol_extent.vz)(extent,nextCoord),nextRel!==lastRel?(skipped&&(coordinates[myEnd++]=lastXCoord,coordinates[myEnd++]=lastYCoord,skipped=!1),coordinates[myEnd++]=nextCoord[0],coordinates[myEnd++]=nextCoord[1]):nextRel===Relationship.A.INTERSECTING?(coordinates[myEnd++]=nextCoord[0],coordinates[myEnd++]=nextCoord[1],skipped=!1):skipped=!0,lastXCoord=nextCoord[0],lastYCoord=nextCoord[1],lastRel=nextRel;return(closed&&skipped||i===offset+stride)&&(coordinates[myEnd++]=lastXCoord,coordinates[myEnd++]=lastYCoord),myEnd}drawCustomCoordinates_(flatCoordinates,offset,ends,stride,builderEnds){for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i],builderEnd=this.appendFlatLineCoordinates(flatCoordinates,offset,end,stride,!1,!1);builderEnds.push(builderEnd),offset=end}return offset}drawCustom(geometry,feature,renderer,hitDetectionRenderer,index){this.beginGeometry(geometry,feature,index);const type=geometry.getType(),stride=geometry.getStride(),builderBegin=this.coordinates.length;let flatCoordinates,builderEnd,builderEnds,builderEndss,offset;switch(type){case"MultiPolygon":flatCoordinates=geometry.getOrientedFlatCoordinates(),builderEndss=[];const endss=geometry.getEndss();offset=0;for(let i=0,ii=endss.length;i<ii;++i){const myEnds=[];offset=this.drawCustomCoordinates_(flatCoordinates,offset,endss[i],stride,myEnds),builderEndss.push(myEnds)}this.instructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEndss,geometry,renderer,inflate.Dz,index]),this.hitDetectionInstructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEndss,geometry,hitDetectionRenderer||renderer,inflate.Dz,index]);break;case"Polygon":case"MultiLineString":builderEnds=[],flatCoordinates="Polygon"==type?geometry.getOrientedFlatCoordinates():geometry.getFlatCoordinates(),offset=this.drawCustomCoordinates_(flatCoordinates,0,geometry.getEnds(),stride,builderEnds),this.instructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnds,geometry,renderer,inflate.cD,index]),this.hitDetectionInstructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnds,geometry,hitDetectionRenderer||renderer,inflate.cD,index]);break;case"LineString":case"Circle":flatCoordinates=geometry.getFlatCoordinates(),builderEnd=this.appendFlatLineCoordinates(flatCoordinates,0,flatCoordinates.length,stride,!1,!1),this.instructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnd,geometry,renderer,inflate.n2,index]),this.hitDetectionInstructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnd,geometry,hitDetectionRenderer||renderer,inflate.n2,index]);break;case"MultiPoint":flatCoordinates=geometry.getFlatCoordinates(),builderEnd=this.appendFlatPointCoordinates(flatCoordinates,stride),builderEnd>builderBegin&&(this.instructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnd,geometry,renderer,inflate.n2,index]),this.hitDetectionInstructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnd,geometry,hitDetectionRenderer||renderer,inflate.n2,index]));break;case"Point":flatCoordinates=geometry.getFlatCoordinates(),this.coordinates.push(flatCoordinates[0],flatCoordinates[1]),builderEnd=this.coordinates.length,this.instructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnd,geometry,renderer,void 0,index]),this.hitDetectionInstructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnd,geometry,hitDetectionRenderer||renderer,void 0,index])}this.endGeometry(feature)}beginGeometry(geometry,feature,index){this.beginGeometryInstruction1_=[canvas_Instruction.BEGIN_GEOMETRY,feature,0,geometry,index],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[canvas_Instruction.BEGIN_GEOMETRY,feature,0,geometry,index],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const hitDetectionInstructions=this.hitDetectionInstructions;let i;hitDetectionInstructions.reverse();const n=hitDetectionInstructions.length;let instruction,type,begin=-1;for(i=0;i<n;++i)instruction=hitDetectionInstructions[i],type=instruction[0],type==canvas_Instruction.END_GEOMETRY?begin=i:type==canvas_Instruction.BEGIN_GEOMETRY&&(instruction[2]=i,(0,array.gI)(this.hitDetectionInstructions,begin,i),begin=-1)}fillStyleToState(fillStyle,state={}){if(fillStyle){const fillStyleColor=fillStyle.getColor();state.fillPatternScale=fillStyleColor&&"object"==typeof fillStyleColor&&"src"in fillStyleColor?this.pixelRatio:1,state.fillStyle=(0,colorlike.F)(fillStyleColor||canvas.qY)}else state.fillStyle=void 0;return state}strokeStyleToState(strokeStyle,state={}){if(strokeStyle){const strokeStyleColor=strokeStyle.getColor();state.strokeStyle=(0,colorlike.F)(strokeStyleColor||canvas.NT);const strokeStyleLineCap=strokeStyle.getLineCap();state.lineCap=void 0!==strokeStyleLineCap?strokeStyleLineCap:canvas._m;const strokeStyleLineDash=strokeStyle.getLineDash();state.lineDash=strokeStyleLineDash?strokeStyleLineDash.slice():canvas.Oq;const strokeStyleLineDashOffset=strokeStyle.getLineDashOffset();state.lineDashOffset=strokeStyleLineDashOffset||canvas.vk;const strokeStyleLineJoin=strokeStyle.getLineJoin();state.lineJoin=void 0!==strokeStyleLineJoin?strokeStyleLineJoin:canvas._K;const strokeStyleWidth=strokeStyle.getWidth();state.lineWidth=void 0!==strokeStyleWidth?strokeStyleWidth:canvas.aq;const strokeStyleMiterLimit=strokeStyle.getMiterLimit();state.miterLimit=void 0!==strokeStyleMiterLimit?strokeStyleMiterLimit:canvas.eL,state.lineWidth>this.maxLineWidth&&(this.maxLineWidth=state.lineWidth,this.bufferedMaxExtent_=null)}else state.strokeStyle=void 0,state.lineCap=void 0,state.lineDash=null,state.lineDashOffset=void 0,state.lineJoin=void 0,state.lineWidth=void 0,state.miterLimit=void 0;return state}setFillStrokeStyle(fillStyle,strokeStyle){const state=this.state;this.fillStyleToState(fillStyle,state),this.strokeStyleToState(strokeStyle,state)}createFill(state){const fillStyle=state.fillStyle,fillInstruction=[canvas_Instruction.SET_FILL_STYLE,fillStyle];return"string"!=typeof fillStyle&&fillInstruction.push(state.fillPatternScale),fillInstruction}applyStroke(state){this.instructions.push(this.createStroke(state))}createStroke(state){return[canvas_Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth*this.pixelRatio,state.lineCap,state.lineJoin,state.miterLimit,state.lineDash?this.applyPixelRatio(state.lineDash):null,state.lineDashOffset*this.pixelRatio]}updateFillStyle(state,createFill){const fillStyle=state.fillStyle;"string"==typeof fillStyle&&state.currentFillStyle==fillStyle||(this.instructions.push(createFill.call(this,state)),state.currentFillStyle=fillStyle)}updateStrokeStyle(state,applyStroke){const strokeStyle=state.strokeStyle,lineCap=state.lineCap,lineDash=state.lineDash,lineDashOffset=state.lineDashOffset,lineJoin=state.lineJoin,lineWidth=state.lineWidth,miterLimit=state.miterLimit;(state.currentStrokeStyle!=strokeStyle||state.currentLineCap!=lineCap||lineDash!=state.currentLineDash&&!(0,array.aI)(state.currentLineDash,lineDash)||state.currentLineDashOffset!=lineDashOffset||state.currentLineJoin!=lineJoin||state.currentLineWidth!=lineWidth||state.currentMiterLimit!=miterLimit)&&(applyStroke.call(this,state),state.currentStrokeStyle=strokeStyle,state.currentLineCap=lineCap,state.currentLineDash=lineDash,state.currentLineDashOffset=lineDashOffset,state.currentLineJoin=lineJoin,state.currentLineWidth=lineWidth,state.currentMiterLimit=miterLimit)}endGeometry(feature){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const endGeometryInstruction=[canvas_Instruction.END_GEOMETRY,feature];this.instructions.push(endGeometryInstruction),this.hitDetectionInstructions.push(endGeometryInstruction)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,ol_extent.o8)(this.maxExtent),this.maxLineWidth>0)){const width=this.resolution*(this.maxLineWidth+1)/2;(0,ol_extent.r)(this.bufferedMaxExtent_,width,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}};const ImageBuilder=class CanvasImageBuilder extends Builder{constructor(tolerance,maxExtent,resolution,pixelRatio){super(tolerance,maxExtent,resolution,pixelRatio),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(pointGeometry,feature,index){if(!this.image_||this.maxExtent&&!(0,ol_extent.Ym)(this.maxExtent,pointGeometry.getFlatCoordinates()))return;this.beginGeometry(pointGeometry,feature,index);const flatCoordinates=pointGeometry.getFlatCoordinates(),stride=pointGeometry.getStride(),myBegin=this.coordinates.length,myEnd=this.appendFlatPointCoordinates(flatCoordinates,stride);this.instructions.push([canvas_Instruction.DRAW_IMAGE,myBegin,myEnd,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([canvas_Instruction.DRAW_IMAGE,myBegin,myEnd,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(feature)}drawMultiPoint(multiPointGeometry,feature,index){if(!this.image_)return;this.beginGeometry(multiPointGeometry,feature,index);const flatCoordinates=multiPointGeometry.getFlatCoordinates(),filteredFlatCoordinates=[];for(let i=0,ii=flatCoordinates.length;i<ii;i+=multiPointGeometry.getStride())this.maxExtent&&!(0,ol_extent.Ym)(this.maxExtent,flatCoordinates.slice(i,i+2))||filteredFlatCoordinates.push(flatCoordinates[i],flatCoordinates[i+1]);const myBegin=this.coordinates.length,myEnd=this.appendFlatPointCoordinates(filteredFlatCoordinates,2);this.instructions.push([canvas_Instruction.DRAW_IMAGE,myBegin,myEnd,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([canvas_Instruction.DRAW_IMAGE,myBegin,myEnd,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(feature)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(imageStyle,sharedData){const anchor=imageStyle.getAnchor(),size=imageStyle.getSize(),origin=imageStyle.getOrigin();this.imagePixelRatio_=imageStyle.getPixelRatio(this.pixelRatio),this.anchorX_=anchor[0],this.anchorY_=anchor[1],this.hitDetectionImage_=imageStyle.getHitDetectionImage(),this.image_=imageStyle.getImage(this.pixelRatio),this.height_=size[1],this.opacity_=imageStyle.getOpacity(),this.originX_=origin[0],this.originY_=origin[1],this.rotateWithView_=imageStyle.getRotateWithView(),this.rotation_=imageStyle.getRotation(),this.scale_=imageStyle.getScaleArray(),this.width_=size[0],this.declutterMode_=imageStyle.getDeclutterMode(),this.declutterImageWithText_=sharedData}};const LineStringBuilder=class CanvasLineStringBuilder extends Builder{constructor(tolerance,maxExtent,resolution,pixelRatio){super(tolerance,maxExtent,resolution,pixelRatio)}drawFlatCoordinates_(flatCoordinates,offset,end,stride){const myBegin=this.coordinates.length,myEnd=this.appendFlatLineCoordinates(flatCoordinates,offset,end,stride,!1,!1),moveToLineToInstruction=[canvas_Instruction.MOVE_TO_LINE_TO,myBegin,myEnd];return this.instructions.push(moveToLineToInstruction),this.hitDetectionInstructions.push(moveToLineToInstruction),end}drawLineString(lineStringGeometry,feature,index){const state=this.state,strokeStyle=state.strokeStyle,lineWidth=state.lineWidth;if(void 0===strokeStyle||void 0===lineWidth)return;this.updateStrokeStyle(state,this.applyStroke),this.beginGeometry(lineStringGeometry,feature,index),this.hitDetectionInstructions.push([canvas_Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,canvas.Oq,canvas.vk],beginPathInstruction);const flatCoordinates=lineStringGeometry.getFlatCoordinates(),stride=lineStringGeometry.getStride();this.drawFlatCoordinates_(flatCoordinates,0,flatCoordinates.length,stride),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(feature)}drawMultiLineString(multiLineStringGeometry,feature,index){const state=this.state,strokeStyle=state.strokeStyle,lineWidth=state.lineWidth;if(void 0===strokeStyle||void 0===lineWidth)return;this.updateStrokeStyle(state,this.applyStroke),this.beginGeometry(multiLineStringGeometry,feature,index),this.hitDetectionInstructions.push([canvas_Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,canvas.Oq,canvas.vk],beginPathInstruction);const ends=multiLineStringGeometry.getEnds(),flatCoordinates=multiLineStringGeometry.getFlatCoordinates(),stride=multiLineStringGeometry.getStride();let offset=0;for(let i=0,ii=ends.length;i<ii;++i)offset=this.drawFlatCoordinates_(flatCoordinates,offset,ends[i],stride);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(feature)}finish(){const state=this.state;return null!=state.lastStroke&&state.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(state){null!=state.lastStroke&&state.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),state.lastStroke=this.coordinates.length),state.lastStroke=0,super.applyStroke(state),this.instructions.push(beginPathInstruction)}};var simplify=__webpack_require__("./node_modules/ol/geom/flat/simplify.js");const PolygonBuilder=class CanvasPolygonBuilder extends Builder{constructor(tolerance,maxExtent,resolution,pixelRatio){super(tolerance,maxExtent,resolution,pixelRatio)}drawFlatCoordinatess_(flatCoordinates,offset,ends,stride){const state=this.state,fill=void 0!==state.fillStyle,stroke=void 0!==state.strokeStyle,numEnds=ends.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let i=0;i<numEnds;++i){const end=ends[i],myBegin=this.coordinates.length,myEnd=this.appendFlatLineCoordinates(flatCoordinates,offset,end,stride,!0,!stroke),moveToLineToInstruction=[canvas_Instruction.MOVE_TO_LINE_TO,myBegin,myEnd];this.instructions.push(moveToLineToInstruction),this.hitDetectionInstructions.push(moveToLineToInstruction),stroke&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),offset=end}return fill&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),stroke&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),offset}drawCircle(circleGeometry,feature,index){const state=this.state,fillStyle=state.fillStyle,strokeStyle=state.strokeStyle;if(void 0===fillStyle&&void 0===strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(circleGeometry,feature,index),void 0!==state.fillStyle&&this.hitDetectionInstructions.push([canvas_Instruction.SET_FILL_STYLE,canvas.qY]),void 0!==state.strokeStyle&&this.hitDetectionInstructions.push([canvas_Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,canvas.Oq,canvas.vk]);const flatCoordinates=circleGeometry.getFlatCoordinates(),stride=circleGeometry.getStride(),myBegin=this.coordinates.length;this.appendFlatLineCoordinates(flatCoordinates,0,flatCoordinates.length,stride,!1,!1);const circleInstruction=[canvas_Instruction.CIRCLE,myBegin];this.instructions.push(beginPathInstruction,circleInstruction),this.hitDetectionInstructions.push(beginPathInstruction,circleInstruction),void 0!==state.fillStyle&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),void 0!==state.strokeStyle&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(feature)}drawPolygon(polygonGeometry,feature,index){const state=this.state,fillStyle=state.fillStyle,strokeStyle=state.strokeStyle;if(void 0===fillStyle&&void 0===strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(polygonGeometry,feature,index),void 0!==state.fillStyle&&this.hitDetectionInstructions.push([canvas_Instruction.SET_FILL_STYLE,canvas.qY]),void 0!==state.strokeStyle&&this.hitDetectionInstructions.push([canvas_Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,canvas.Oq,canvas.vk]);const ends=polygonGeometry.getEnds(),flatCoordinates=polygonGeometry.getOrientedFlatCoordinates(),stride=polygonGeometry.getStride();this.drawFlatCoordinatess_(flatCoordinates,0,ends,stride),this.endGeometry(feature)}drawMultiPolygon(multiPolygonGeometry,feature,index){const state=this.state,fillStyle=state.fillStyle,strokeStyle=state.strokeStyle;if(void 0===fillStyle&&void 0===strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(multiPolygonGeometry,feature,index),void 0!==state.fillStyle&&this.hitDetectionInstructions.push([canvas_Instruction.SET_FILL_STYLE,canvas.qY]),void 0!==state.strokeStyle&&this.hitDetectionInstructions.push([canvas_Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,canvas.Oq,canvas.vk]);const endss=multiPolygonGeometry.getEndss(),flatCoordinates=multiPolygonGeometry.getOrientedFlatCoordinates(),stride=multiPolygonGeometry.getStride();let offset=0;for(let i=0,ii=endss.length;i<ii;++i)offset=this.drawFlatCoordinatess_(flatCoordinates,offset,endss[i],stride);this.endGeometry(feature)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const tolerance=this.tolerance;if(0!==tolerance){const coordinates=this.coordinates;for(let i=0,ii=coordinates.length;i<ii;++i)coordinates[i]=(0,simplify.n$)(coordinates[i],tolerance)}return super.finish()}setFillStrokeStyles_(){const state=this.state;this.updateFillStyle(state,this.createFill),this.updateStrokeStyle(state,this.applyStroke)}};var math=__webpack_require__("./node_modules/ol/math.js");function lineChunk(chunkLength,flatCoordinates,offset,end,stride){const chunks=[];let cursor=offset,chunkM=0,currentChunk=flatCoordinates.slice(offset,2);for(;chunkM<chunkLength&&cursor+stride<end;){const[x1,y1]=currentChunk.slice(-2),x2=flatCoordinates[cursor+stride],y2=flatCoordinates[cursor+stride+1],segmentLength=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));if(chunkM+=segmentLength,chunkM>=chunkLength){const m=(chunkLength-chunkM+segmentLength)/segmentLength,x=(0,math.Cc)(x1,x2,m),y=(0,math.Cc)(y1,y2,m);currentChunk.push(x,y),chunks.push(currentChunk),currentChunk=[x,y],chunkM==chunkLength&&(cursor+=stride),chunkM=0}else if(chunkM<chunkLength)currentChunk.push(flatCoordinates[cursor+stride],flatCoordinates[cursor+stride+1]),cursor+=stride;else{const missing=segmentLength-chunkM,x=(0,math.Cc)(x1,x2,missing/segmentLength),y=(0,math.Cc)(y1,y2,missing/segmentLength);currentChunk.push(x,y),chunks.push(currentChunk),currentChunk=[x,y],chunkM=0,cursor+=stride}}return chunkM>0&&chunks.push(currentChunk),chunks}function matchingChunk(maxAngle,flatCoordinates,offset,end,stride){let acos,i,m12,m23,x1,y1,x12,y12,x23,y23,chunkStart=offset,chunkEnd=offset,chunkM=0,m=0,start=offset;for(i=offset;i<end;i+=stride){const x2=flatCoordinates[i],y2=flatCoordinates[i+1];void 0!==x1&&(x23=x2-x1,y23=y2-y1,m23=Math.sqrt(x23*x23+y23*y23),void 0!==x12&&(m+=m12,acos=Math.acos((x12*x23+y12*y23)/(m12*m23)),acos>maxAngle&&(m>chunkM&&(chunkM=m,chunkStart=start,chunkEnd=i),m=0,start=i-stride)),m12=m23,x12=x23,y12=y23),x1=x2,y1=y2}return m+=m23,m>chunkM?[start,i]:[chunkStart,chunkEnd]}var util=__webpack_require__("./node_modules/ol/util.js");const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};const TextBuilder=class CanvasTextBuilder extends Builder{constructor(tolerance,maxExtent,resolution,pixelRatio){super(tolerance,maxExtent,resolution,pixelRatio),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[canvas.qY]={fillStyle:canvas.qY},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const instructions=super.finish();return instructions.textStates=this.textStates,instructions.fillStates=this.fillStates,instructions.strokeStates=this.strokeStates,instructions}drawText(geometry,feature,index){const fillState=this.textFillState_,strokeState=this.textStrokeState_,textState=this.textState_;if(""===this.text_||!textState||!fillState&&!strokeState)return;const coordinates=this.coordinates;let begin=coordinates.length;const geometryType=geometry.getType();let flatCoordinates=null,stride=geometry.getStride();if("line"!==textState.placement||"LineString"!=geometryType&&"MultiLineString"!=geometryType&&"Polygon"!=geometryType&&"MultiPolygon"!=geometryType){let geometryWidths=textState.overflow?null:[];switch(geometryType){case"Point":case"MultiPoint":flatCoordinates=geometry.getFlatCoordinates();break;case"LineString":flatCoordinates=geometry.getFlatMidpoint();break;case"Circle":flatCoordinates=geometry.getCenter();break;case"MultiLineString":flatCoordinates=geometry.getFlatMidpoints(),stride=2;break;case"Polygon":flatCoordinates=geometry.getFlatInteriorPoint(),textState.overflow||geometryWidths.push(flatCoordinates[2]/this.resolution),stride=3;break;case"MultiPolygon":const interiorPoints=geometry.getFlatInteriorPoints();flatCoordinates=[];for(let i=0,ii=interiorPoints.length;i<ii;i+=3)textState.overflow||geometryWidths.push(interiorPoints[i+2]/this.resolution),flatCoordinates.push(interiorPoints[i],interiorPoints[i+1]);if(0===flatCoordinates.length)return;stride=2}const end=this.appendFlatPointCoordinates(flatCoordinates,stride);if(end===begin)return;if(geometryWidths&&(end-begin)/2!==flatCoordinates.length/stride){let beg=begin/2;geometryWidths=geometryWidths.filter((w,i)=>{const keep=coordinates[2*(beg+i)]===flatCoordinates[i*stride]&&coordinates[2*(beg+i)+1]===flatCoordinates[i*stride+1];return keep||--beg,keep})}this.saveTextStates_();const backgroundFill=textState.backgroundFill?this.createFill(this.fillStyleToState(textState.backgroundFill)):null,backgroundStroke=textState.backgroundStroke?this.createStroke(this.strokeStyleToState(textState.backgroundStroke)):null;this.beginGeometry(geometry,feature,index);let padding=textState.padding;if(padding!=canvas.Tq&&(textState.scale[0]<0||textState.scale[1]<0)){let p0=textState.padding[0],p1=textState.padding[1],p2=textState.padding[2],p3=textState.padding[3];textState.scale[0]<0&&(p1=-p1,p3=-p3),textState.scale[1]<0&&(p0=-p0,p2=-p2),padding=[p0,p1,p2,p3]}const pixelRatio=this.pixelRatio;this.instructions.push([canvas_Instruction.DRAW_IMAGE,begin,end,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,padding==canvas.Tq?canvas.Tq:padding.map(function(p){return p*pixelRatio}),backgroundFill,backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,geometryWidths]);const scale=1/pixelRatio,hitDetectionBackgroundFill=backgroundFill?backgroundFill.slice(0):null;hitDetectionBackgroundFill&&(hitDetectionBackgroundFill[1]=canvas.qY),this.hitDetectionInstructions.push([canvas_Instruction.DRAW_IMAGE,begin,end,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[scale,scale],NaN,this.declutterMode_,this.declutterImageWithText_,padding,hitDetectionBackgroundFill,backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?canvas.qY:this.fillKey_,this.textOffsetX_,this.textOffsetY_,geometryWidths]),this.endGeometry(feature)}else{if(!(0,ol_extent.HY)(this.maxExtent,geometry.getExtent()))return;let ends;if(flatCoordinates=geometry.getFlatCoordinates(),"LineString"==geometryType)ends=[flatCoordinates.length];else if("MultiLineString"==geometryType)ends=geometry.getEnds();else if("Polygon"==geometryType)ends=geometry.getEnds().slice(0,1);else if("MultiPolygon"==geometryType){const endss=geometry.getEndss();ends=[];for(let i=0,ii=endss.length;i<ii;++i)ends.push(endss[i][0])}this.beginGeometry(geometry,feature,index);const repeat=textState.repeat,textAlign=repeat?void 0:textState.textAlign;let flatOffset=0;for(let o=0,oo=ends.length;o<oo;++o){let chunks;chunks=repeat?lineChunk(repeat*this.resolution,flatCoordinates,flatOffset,ends[o],stride):[flatCoordinates.slice(flatOffset,ends[o])];for(let c=0,cc=chunks.length;c<cc;++c){const chunk=chunks[c];let chunkBegin=0,chunkEnd=chunk.length;if(null==textAlign){const range=matchingChunk(textState.maxAngle,chunk,0,chunk.length,2);chunkBegin=range[0],chunkEnd=range[1]}for(let i=chunkBegin;i<chunkEnd;i+=stride)coordinates.push(chunk[i],chunk[i+1]);const end=coordinates.length;flatOffset=ends[o],this.drawChars_(begin,end),begin=end}}this.endGeometry(feature)}}saveTextStates_(){const strokeState=this.textStrokeState_,textState=this.textState_,fillState=this.textFillState_,strokeKey=this.strokeKey_;strokeState&&(strokeKey in this.strokeStates||(this.strokeStates[strokeKey]={strokeStyle:strokeState.strokeStyle,lineCap:strokeState.lineCap,lineDashOffset:strokeState.lineDashOffset,lineWidth:strokeState.lineWidth,lineJoin:strokeState.lineJoin,miterLimit:strokeState.miterLimit,lineDash:strokeState.lineDash}));const textKey=this.textKey_;textKey in this.textStates||(this.textStates[textKey]={font:textState.font,textAlign:textState.textAlign||canvas.MY,justify:textState.justify,textBaseline:textState.textBaseline||canvas.M8,scale:textState.scale});const fillKey=this.fillKey_;fillState&&(fillKey in this.fillStates||(this.fillStates[fillKey]={fillStyle:fillState.fillStyle}))}drawChars_(begin,end){const strokeState=this.textStrokeState_,textState=this.textState_,strokeKey=this.strokeKey_,textKey=this.textKey_,fillKey=this.fillKey_;this.saveTextStates_();const pixelRatio=this.pixelRatio,baseline=TEXT_ALIGN[textState.textBaseline],offsetY=this.textOffsetY_*pixelRatio,text=this.text_,strokeWidth=strokeState?strokeState.lineWidth*Math.abs(textState.scale[0])/2:0;this.instructions.push([canvas_Instruction.DRAW_CHARS,begin,end,baseline,textState.overflow,fillKey,textState.maxAngle,pixelRatio,offsetY,strokeKey,strokeWidth*pixelRatio,text,textKey,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([canvas_Instruction.DRAW_CHARS,begin,end,baseline,textState.overflow,fillKey?canvas.qY:fillKey,textState.maxAngle,pixelRatio,offsetY,strokeKey,strokeWidth*pixelRatio,text,textKey,1/pixelRatio,this.declutterMode_,this.textKeepUpright_])}setTextStyle(textStyle,sharedData){let textState,fillState,strokeState;if(textStyle){const textFillStyle=textStyle.getFill();textFillStyle?(fillState=this.textFillState_,fillState||(fillState={},this.textFillState_=fillState),fillState.fillStyle=(0,colorlike.F)(textFillStyle.getColor()||canvas.qY)):(fillState=null,this.textFillState_=fillState);const textStrokeStyle=textStyle.getStroke();if(textStrokeStyle){strokeState=this.textStrokeState_,strokeState||(strokeState={},this.textStrokeState_=strokeState);const lineDash=textStrokeStyle.getLineDash(),lineDashOffset=textStrokeStyle.getLineDashOffset(),lineWidth=textStrokeStyle.getWidth(),miterLimit=textStrokeStyle.getMiterLimit();strokeState.lineCap=textStrokeStyle.getLineCap()||canvas._m,strokeState.lineDash=lineDash?lineDash.slice():canvas.Oq,strokeState.lineDashOffset=void 0===lineDashOffset?canvas.vk:lineDashOffset,strokeState.lineJoin=textStrokeStyle.getLineJoin()||canvas._K,strokeState.lineWidth=void 0===lineWidth?canvas.aq:lineWidth,strokeState.miterLimit=void 0===miterLimit?canvas.eL:miterLimit,strokeState.strokeStyle=(0,colorlike.F)(textStrokeStyle.getColor()||canvas.NT)}else strokeState=null,this.textStrokeState_=strokeState;textState=this.textState_;const font=textStyle.getFont()||canvas.ZV;(0,canvas.fZ)(font);const textScale=textStyle.getScaleArray();textState.overflow=textStyle.getOverflow(),textState.font=font,textState.maxAngle=textStyle.getMaxAngle(),textState.placement=textStyle.getPlacement(),textState.textAlign=textStyle.getTextAlign(),textState.repeat=textStyle.getRepeat(),textState.justify=textStyle.getJustify(),textState.textBaseline=textStyle.getTextBaseline()||canvas.M8,textState.backgroundFill=textStyle.getBackgroundFill(),textState.backgroundStroke=textStyle.getBackgroundStroke(),textState.padding=textStyle.getPadding()||canvas.Tq,textState.scale=void 0===textScale?[1,1]:textScale;const textOffsetX=textStyle.getOffsetX(),textOffsetY=textStyle.getOffsetY(),textRotateWithView=textStyle.getRotateWithView(),textKeepUpright=textStyle.getKeepUpright(),textRotation=textStyle.getRotation();this.text_=textStyle.getText()||"",this.textOffsetX_=void 0===textOffsetX?0:textOffsetX,this.textOffsetY_=void 0===textOffsetY?0:textOffsetY,this.textRotateWithView_=void 0!==textRotateWithView&&textRotateWithView,this.textKeepUpright_=void 0===textKeepUpright||textKeepUpright,this.textRotation_=void 0===textRotation?0:textRotation,this.strokeKey_=strokeState?("string"==typeof strokeState.strokeStyle?strokeState.strokeStyle:(0,util.v6)(strokeState.strokeStyle))+strokeState.lineCap+strokeState.lineDashOffset+"|"+strokeState.lineWidth+strokeState.lineJoin+strokeState.miterLimit+"["+strokeState.lineDash.join()+"]":"",this.textKey_=textState.font+textState.scale+(textState.textAlign||"?")+(textState.repeat||"?")+(textState.justify||"?")+(textState.textBaseline||"?"),this.fillKey_=fillState&&fillState.fillStyle?"string"==typeof fillState.fillStyle?fillState.fillStyle:"|"+(0,util.v6)(fillState.fillStyle):""}else this.text_="";this.declutterMode_=textStyle.getDeclutterMode(),this.declutterImageWithText_=sharedData}},BATCH_CONSTRUCTORS={Circle:PolygonBuilder,Default:Builder,Image:ImageBuilder,LineString:LineStringBuilder,Polygon:PolygonBuilder,Text:TextBuilder};const canvas_BuilderGroup=class BuilderGroup{constructor(tolerance,maxExtent,resolution,pixelRatio){this.tolerance_=tolerance,this.maxExtent_=maxExtent,this.pixelRatio_=pixelRatio,this.resolution_=resolution,this.buildersByZIndex_={}}finish(){const builderInstructions={};for(const zKey in this.buildersByZIndex_){builderInstructions[zKey]=builderInstructions[zKey]||{};const builders=this.buildersByZIndex_[zKey];for(const builderKey in builders){const builderInstruction=builders[builderKey].finish();builderInstructions[zKey][builderKey]=builderInstruction}}return builderInstructions}getBuilder(zIndex,builderType){const zIndexKey=void 0!==zIndex?zIndex.toString():"0";let replays=this.buildersByZIndex_[zIndexKey];void 0===replays&&(replays={},this.buildersByZIndex_[zIndexKey]=replays);let replay=replays[builderType];if(void 0===replay){replay=new(0,BATCH_CONSTRUCTORS[builderType])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),replays[builderType]=replay}return replay}};var flat_transform=__webpack_require__("./node_modules/ol/geom/flat/transform.js"),obj=__webpack_require__("./node_modules/ol/obj.js"),ol_transform=__webpack_require__("./node_modules/ol/transform.js"),flat_length=__webpack_require__("./node_modules/ol/geom/flat/length.js");function drawTextOnPath(flatCoordinates,offset,end,stride,text,startM,maxAngle,scale,measureAndCacheTextWidth,font,cache,rotation,keepUpright=!0){let x2=flatCoordinates[offset],y2=flatCoordinates[offset+1],x1=0,y1=0,segmentLength=0,segmentM=0;function advance(){x1=x2,y1=y2,x2=flatCoordinates[offset+=stride],y2=flatCoordinates[offset+1],segmentM+=segmentLength,segmentLength=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1))}do{advance()}while(offset<end-stride&&segmentM+segmentLength<startM);let interpolate=0===segmentLength?0:(startM-segmentM)/segmentLength;const beginX=(0,math.Cc)(x1,x2,interpolate),beginY=(0,math.Cc)(y1,y2,interpolate),startOffset=offset-stride,startLength=segmentM,endM=startM+scale*measureAndCacheTextWidth(font,text,cache);for(;offset<end-stride&&segmentM+segmentLength<endM;)advance();interpolate=0===segmentLength?0:(endM-segmentM)/segmentLength;const endX=(0,math.Cc)(x1,x2,interpolate),endY=(0,math.Cc)(y1,y2,interpolate);let reverse=!1;if(keepUpright)if(rotation){const flat=[beginX,beginY,endX,endY];(0,flat_transform.e$)(flat,0,4,2,rotation,flat,flat),reverse=flat[0]>flat[2]}else reverse=beginX>endX;const PI=Math.PI,result=[],singleSegment=startOffset+stride===offset;let previousAngle;if(segmentLength=0,segmentM=startLength,x2=flatCoordinates[offset=startOffset],y2=flatCoordinates[offset+1],singleSegment){advance(),previousAngle=Math.atan2(y2-y1,x2-x1),reverse&&(previousAngle+=previousAngle>0?-PI:PI);const x=(endX+beginX)/2,y=(endY+beginY)/2;return result[0]=[x,y,(endM-startM)/2,previousAngle,text],result}for(let i=0,ii=(text=text.replace(/\n/g," ")).length;i<ii;){advance();let angle=Math.atan2(y2-y1,x2-x1);if(reverse&&(angle+=angle>0?-PI:PI),void 0!==previousAngle){let delta=angle-previousAngle;if(delta+=delta>PI?-2*PI:delta<-PI?2*PI:0,Math.abs(delta)>maxAngle)return null}previousAngle=angle;const iStart=i;let charLength=0;for(;i<ii;++i){const len=scale*measureAndCacheTextWidth(font,text[reverse?ii-i-1:i],cache);if(offset+stride<end&&segmentM+segmentLength<startM+charLength+len/2)break;charLength+=len}if(i===iStart)continue;const chars=reverse?text.substring(ii-iStart,ii-i):text.substring(iStart,i);interpolate=0===segmentLength?0:(startM+charLength/2-segmentM)/segmentLength;const x=(0,math.Cc)(x1,x2,interpolate),y=(0,math.Cc)(y1,y2,interpolate);result.push([x,y,charLength/2,angle,chars]),startM+=charLength}return result}const canvas_ZIndexContext=class ZIndexContext{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy((0,dom.lr)(),{get:(target,property)=>{if("function"==typeof(0,dom.lr)()[property])return this.push_(property),this.pushMethodArgs_},set:(target,property,value)=>(this.push_(property,value),!0)})}push_(...args){const instructions=this.instructions_,index=this.zIndex+this.offset_;instructions[index]||(instructions[index]=[]),instructions[index].push(...args)}pushMethodArgs_=(...args)=>(this.push_(args),this);pushFunction(render){this.push_(render)}getContext(){return this.context_}draw(context){this.instructions_.forEach(instructionsAtIndex=>{for(let i=0,ii=instructionsAtIndex.length;i<ii;++i){const property=instructionsAtIndex[i];if("function"==typeof property){property(context);continue}const instructionAtIndex=instructionsAtIndex[++i];if("function"==typeof context[property])context[property](...instructionAtIndex);else{if("function"==typeof instructionAtIndex){context[property]=instructionAtIndex(context);continue}context[property]=instructionAtIndex}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}},tmpExtent=(0,ol_extent.S5)(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(replayImageOrLabelArgs){return replayImageOrLabelArgs[3].declutterBox}const rtlRegEx=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function horizontalTextAlign(text,align){return"start"===align?align=rtlRegEx.test(text)?"right":"left":"end"===align&&(align=rtlRegEx.test(text)?"left":"right"),TEXT_ALIGN[align]}function createTextChunks(acc,line,i){return i>0&&acc.push("\n",""),acc.push(line,""),acc}function richTextToPlainText(result,part,index){return index%2==0&&(result+=part),result}const canvas_Executor=class Executor{constructor(resolution,pixelRatio,overlaps,instructions,deferredRendering){this.overlaps=overlaps,this.pixelRatio=pixelRatio,this.resolution=resolution,this.alignAndScaleFill_,this.instructions=instructions.instructions,this.coordinates=instructions.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,ol_transform.vt)(),this.hitDetectionInstructions=instructions.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=instructions.fillStates||{},this.strokeStates=instructions.strokeStates||{},this.textStates=instructions.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=deferredRendering?new canvas_ZIndexContext:null}getZIndexContext(){return this.zIndexContext_}createLabel(text,textKey,fillKey,strokeKey){const key=text+textKey+fillKey+strokeKey;if(this.labels_[key])return this.labels_[key];const strokeState=strokeKey?this.strokeStates[strokeKey]:null,fillState=fillKey?this.fillStates[fillKey]:null,textState=this.textStates[textKey],pixelRatio=this.pixelRatio,scale=[textState.scale[0]*pixelRatio,textState.scale[1]*pixelRatio],align=textState.justify?TEXT_ALIGN[textState.justify]:horizontalTextAlign(Array.isArray(text)?text[0]:text,textState.textAlign||canvas.MY),strokeWidth=strokeKey&&strokeState.lineWidth?strokeState.lineWidth:0,chunks=Array.isArray(text)?text:String(text).split("\n").reduce(createTextChunks,[]),{width,height,widths,heights,lineWidths}=(0,canvas.jT)(textState,chunks),renderWidth=width+strokeWidth,contextInstructions=[],w=(renderWidth+2)*scale[0],h=(height+strokeWidth)*scale[1],label={width:w<0?Math.floor(w):Math.ceil(w),height:h<0?Math.floor(h):Math.ceil(h),contextInstructions};1==scale[0]&&1==scale[1]||contextInstructions.push("scale",scale),strokeKey&&(contextInstructions.push("strokeStyle",strokeState.strokeStyle),contextInstructions.push("lineWidth",strokeWidth),contextInstructions.push("lineCap",strokeState.lineCap),contextInstructions.push("lineJoin",strokeState.lineJoin),contextInstructions.push("miterLimit",strokeState.miterLimit),contextInstructions.push("setLineDash",[strokeState.lineDash]),contextInstructions.push("lineDashOffset",strokeState.lineDashOffset)),fillKey&&contextInstructions.push("fillStyle",fillState.fillStyle),contextInstructions.push("textBaseline","middle"),contextInstructions.push("textAlign","center");const leftRight=.5-align;let x=align*renderWidth+leftRight*strokeWidth;const strokeInstructions=[],fillInstructions=[];let previousFont,lineHeight=0,lineOffset=0,widthHeightIndex=0,lineWidthIndex=0;for(let i=0,ii=chunks.length;i<ii;i+=2){const text=chunks[i];if("\n"===text){lineOffset+=lineHeight,lineHeight=0,x=align*renderWidth+leftRight*strokeWidth,++lineWidthIndex;continue}const font=chunks[i+1]||textState.font;font!==previousFont&&(strokeKey&&strokeInstructions.push("font",font),fillKey&&fillInstructions.push("font",font),previousFont=font),lineHeight=Math.max(lineHeight,heights[widthHeightIndex]);const fillStrokeArgs=[text,x+leftRight*widths[widthHeightIndex]+align*(widths[widthHeightIndex]-lineWidths[lineWidthIndex]),.5*(strokeWidth+lineHeight)+lineOffset];x+=widths[widthHeightIndex],strokeKey&&strokeInstructions.push("strokeText",fillStrokeArgs),fillKey&&fillInstructions.push("fillText",fillStrokeArgs),++widthHeightIndex}return Array.prototype.push.apply(contextInstructions,strokeInstructions),Array.prototype.push.apply(contextInstructions,fillInstructions),this.labels_[key]=label,label}replayTextBackground_(context,p1,p2,p3,p4,fillInstruction,strokeInstruction){context.beginPath(),context.moveTo.apply(context,p1),context.lineTo.apply(context,p2),context.lineTo.apply(context,p3),context.lineTo.apply(context,p4),context.lineTo.apply(context,p1),fillInstruction&&(this.alignAndScaleFill_=fillInstruction[2],context.fillStyle=fillInstruction[1],this.fill_(context)),strokeInstruction&&(this.setStrokeStyle_(context,strokeInstruction),context.stroke())}calculateImageOrLabelDimensions_(sheetWidth,sheetHeight,centerX,centerY,width,height,anchorX,anchorY,originX,originY,rotation,scale,snapToPixel,padding,fillStroke,feature){let x=centerX-(anchorX*=scale[0]),y=centerY-(anchorY*=scale[1]);const w=width+originX>sheetWidth?sheetWidth-originX:width,h=height+originY>sheetHeight?sheetHeight-originY:height,boxW=padding[3]+w*scale[0]+padding[1],boxH=padding[0]+h*scale[1]+padding[2],boxX=x-padding[3],boxY=y-padding[0];let transform;return(fillStroke||0!==rotation)&&(p1[0]=boxX,p4[0]=boxX,p1[1]=boxY,p2[1]=boxY,p2[0]=boxX+boxW,p3[0]=p2[0],p3[1]=boxY+boxH,p4[1]=p3[1]),0!==rotation?(transform=(0,ol_transform.Zz)((0,ol_transform.vt)(),centerX,centerY,1,1,rotation,-centerX,-centerY),(0,ol_transform.Bb)(transform,p1),(0,ol_transform.Bb)(transform,p2),(0,ol_transform.Bb)(transform,p3),(0,ol_transform.Bb)(transform,p4),(0,ol_extent.N)(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):(0,ol_extent.N)(Math.min(boxX,boxX+boxW),Math.min(boxY,boxY+boxH),Math.max(boxX,boxX+boxW),Math.max(boxY,boxY+boxH),tmpExtent),snapToPixel&&(x=Math.round(x),y=Math.round(y)),{drawImageX:x,drawImageY:y,drawImageW:w,drawImageH:h,originX,originY,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:feature},canvasTransform:transform,scale}}replayImageOrLabel_(context,scaledCanvasSize,imageOrLabel,dimensions,opacity,fillInstruction,strokeInstruction){const fillStroke=!(!fillInstruction&&!strokeInstruction),box=dimensions.declutterBox,strokePadding=strokeInstruction?strokeInstruction[2]*dimensions.scale[0]/2:0;return box.minX-strokePadding<=scaledCanvasSize[0]&&box.maxX+strokePadding>=0&&box.minY-strokePadding<=scaledCanvasSize[1]&&box.maxY+strokePadding>=0&&(fillStroke&&this.replayTextBackground_(context,p1,p2,p3,p4,fillInstruction,strokeInstruction),(0,canvas.Jw)(context,dimensions.canvasTransform,opacity,imageOrLabel,dimensions.originX,dimensions.originY,dimensions.drawImageW,dimensions.drawImageH,dimensions.drawImageX,dimensions.drawImageY,dimensions.scale)),!0}fill_(context){const alignAndScale=this.alignAndScaleFill_;if(alignAndScale){const origin=(0,ol_transform.Bb)(this.renderedTransform_,[0,0]),repeatSize=512*this.pixelRatio;context.save(),context.translate(origin[0]%repeatSize,origin[1]%repeatSize),1!==alignAndScale&&context.scale(alignAndScale,alignAndScale),context.rotate(this.viewRotation_)}context.fill(),alignAndScale&&context.restore()}setStrokeStyle_(context,instruction){context.strokeStyle=instruction[1],instruction[1]&&(context.lineWidth=instruction[2],context.lineCap=instruction[3],context.lineJoin=instruction[4],context.miterLimit=instruction[5],context.lineDashOffset=instruction[7],context.setLineDash(instruction[6]))}drawLabelWithPointPlacement_(text,textKey,strokeKey,fillKey){const textState=this.textStates[textKey],label=this.createLabel(text,textKey,fillKey,strokeKey),strokeState=this.strokeStates[strokeKey],pixelRatio=this.pixelRatio,align=horizontalTextAlign(Array.isArray(text)?text[0]:text,textState.textAlign||canvas.MY),baseline=TEXT_ALIGN[textState.textBaseline||canvas.M8],strokeWidth=strokeState&&strokeState.lineWidth?strokeState.lineWidth:0;return{label,anchorX:align*(label.width/pixelRatio-2*textState.scale[0])+2*(.5-align)*strokeWidth,anchorY:baseline*label.height/pixelRatio+2*(.5-baseline)*strokeWidth}}execute_(context,scaledCanvasSize,transform,instructions,snapToPixel,featureCallback,hitExtent,declutterTree){const zIndexContext=this.zIndexContext_;let pixelCoordinates;this.pixelCoordinates_&&(0,array.aI)(transform,this.renderedTransform_)?pixelCoordinates=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),pixelCoordinates=(0,flat_transform.Rc)(this.coordinates,0,this.coordinates.length,2,transform,this.pixelCoordinates_),(0,ol_transform.k3)(this.renderedTransform_,transform));let i=0;const ii=instructions.length;let dd,anchorX,anchorY,declutterMode,prevX,prevY,roundX,roundY,image,text,textKey,strokeKey,fillKey,d=0,pendingFill=0,pendingStroke=0;const coordinateCache=this.coordinateCache_,viewRotation=this.viewRotation_,viewRotationFromTransform=Math.round(1e12*Math.atan2(-transform[1],transform[0]))/1e12,state={context,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:viewRotation},batchSize=this.instructions!=instructions||this.overlaps?0:200;let feature,x,y,currentGeometry;for(;i<ii;){const instruction=instructions[i];switch(instruction[0]){case canvas_Instruction.BEGIN_GEOMETRY:feature=instruction[1],currentGeometry=instruction[3],feature.getGeometry()?void 0===hitExtent||(0,ol_extent.HY)(hitExtent,currentGeometry.getExtent())?++i:i=instruction[2]+1:i=instruction[2],zIndexContext&&(zIndexContext.zIndex=instruction[4]);break;case canvas_Instruction.BEGIN_PATH:pendingFill>batchSize&&(this.fill_(context),pendingFill=0),pendingStroke>batchSize&&(context.stroke(),pendingStroke=0),pendingFill||pendingStroke||(context.beginPath(),prevX=NaN,prevY=NaN),++i;break;case canvas_Instruction.CIRCLE:d=instruction[1];const x1=pixelCoordinates[d],y1=pixelCoordinates[d+1],dx=pixelCoordinates[d+2]-x1,dy=pixelCoordinates[d+3]-y1,r=Math.sqrt(dx*dx+dy*dy);context.moveTo(x1+r,y1),context.arc(x1,y1,r,0,2*Math.PI,!0),++i;break;case canvas_Instruction.CLOSE_PATH:context.closePath(),++i;break;case canvas_Instruction.CUSTOM:d=instruction[1],dd=instruction[2];const geometry=instruction[3],renderer=instruction[4],fn=instruction[5];state.geometry=geometry,state.feature=feature,i in coordinateCache||(coordinateCache[i]=[]);const coords=coordinateCache[i];fn?fn(pixelCoordinates,d,dd,2,coords):(coords[0]=pixelCoordinates[d],coords[1]=pixelCoordinates[d+1],coords.length=2),zIndexContext&&(zIndexContext.zIndex=instruction[6]),renderer(coords,state),++i;break;case canvas_Instruction.DRAW_IMAGE:d=instruction[1],dd=instruction[2],image=instruction[3],anchorX=instruction[4],anchorY=instruction[5];let height=instruction[6];const opacity=instruction[7],originX=instruction[8],originY=instruction[9],rotateWithView=instruction[10];let rotation=instruction[11];const scale=instruction[12];let width=instruction[13];declutterMode=instruction[14]||"declutter";const declutterImageWithText=instruction[15];if(!image&&instruction.length>=20){text=instruction[19],textKey=instruction[20],strokeKey=instruction[21],fillKey=instruction[22];const labelWithAnchor=this.drawLabelWithPointPlacement_(text,textKey,strokeKey,fillKey);image=labelWithAnchor.label,instruction[3]=image;const textOffsetX=instruction[23];anchorX=(labelWithAnchor.anchorX-textOffsetX)*this.pixelRatio,instruction[4]=anchorX;const textOffsetY=instruction[24];anchorY=(labelWithAnchor.anchorY-textOffsetY)*this.pixelRatio,instruction[5]=anchorY,height=image.height,instruction[6]=height,width=image.width,instruction[13]=width}let geometryWidths,padding,backgroundFillInstruction,backgroundStrokeInstruction;instruction.length>25&&(geometryWidths=instruction[25]),instruction.length>17?(padding=instruction[16],backgroundFillInstruction=instruction[17],backgroundStrokeInstruction=instruction[18]):(padding=canvas.Tq,backgroundFillInstruction=null,backgroundStrokeInstruction=null),rotateWithView&&viewRotationFromTransform?rotation+=viewRotation:rotateWithView||viewRotationFromTransform||(rotation-=viewRotation);let widthIndex=0;for(;d<dd;d+=2){if(geometryWidths&&geometryWidths[widthIndex++]<width/this.pixelRatio)continue;const dimensions=this.calculateImageOrLabelDimensions_(image.width,image.height,pixelCoordinates[d],pixelCoordinates[d+1],width,height,anchorX,anchorY,originX,originY,rotation,scale,snapToPixel,padding,!!backgroundFillInstruction||!!backgroundStrokeInstruction,feature),args=[context,scaledCanvasSize,image,dimensions,opacity,backgroundFillInstruction,backgroundStrokeInstruction];if(declutterTree){let imageArgs,imageDeclutterMode,imageDeclutterBox,renderImage,renderText;if(declutterImageWithText){const index=dd-d;if(!declutterImageWithText[index]){declutterImageWithText[index]={args,declutterMode};continue}const imageDeclutter=declutterImageWithText[index];imageArgs=imageDeclutter.args,imageDeclutterMode=imageDeclutter.declutterMode,delete declutterImageWithText[index],imageDeclutterBox=getDeclutterBox(imageArgs)}if(!imageArgs||"declutter"===imageDeclutterMode&&declutterTree.collides(imageDeclutterBox)||(renderImage=!0),"declutter"===declutterMode&&declutterTree.collides(dimensions.declutterBox)||(renderText=!0),"declutter"===imageDeclutterMode&&"declutter"===declutterMode){const render=renderImage&&renderText;renderImage=render,renderText=render}renderImage&&("none"!==imageDeclutterMode&&declutterTree.insert(imageDeclutterBox),this.replayImageOrLabel_.apply(this,imageArgs)),renderText&&("none"!==declutterMode&&declutterTree.insert(dimensions.declutterBox),this.replayImageOrLabel_.apply(this,args))}else this.replayImageOrLabel_.apply(this,args)}++i;break;case canvas_Instruction.DRAW_CHARS:const begin=instruction[1],end=instruction[2],baseline=instruction[3],overflow=instruction[4];fillKey=instruction[5];const maxAngle=instruction[6],measurePixelRatio=instruction[7],offsetY=instruction[8];strokeKey=instruction[9];const strokeWidth=instruction[10];text=instruction[11],Array.isArray(text)&&(text=text.reduce(richTextToPlainText,"")),textKey=instruction[12];const pixelRatioScale=[instruction[13],instruction[13]];declutterMode=instruction[14]||"declutter";const textKeepUpright=instruction[15],textState=this.textStates[textKey],font=textState.font,textScale=[textState.scale[0]*measurePixelRatio,textState.scale[1]*measurePixelRatio];let cachedWidths;font in this.widths_?cachedWidths=this.widths_[font]:(cachedWidths={},this.widths_[font]=cachedWidths);const pathLength=(0,flat_length.k)(pixelCoordinates,begin,end,2),textLength=Math.abs(textScale[0])*(0,canvas.TA)(font,text,cachedWidths);if(overflow||textLength<=pathLength){const parts=drawTextOnPath(pixelCoordinates,begin,end,2,text,(pathLength-textLength)*horizontalTextAlign(text,this.textStates[textKey].textAlign),maxAngle,Math.abs(textScale[0]),canvas.TA,font,cachedWidths,viewRotationFromTransform?0:this.viewRotation_,textKeepUpright);drawChars:if(parts){const replayImageOrLabelArgs=[];let c,cc,chars,label,part;if(strokeKey)for(c=0,cc=parts.length;c<cc;++c){part=parts[c],chars=part[4],label=this.createLabel(chars,textKey,"",strokeKey),anchorX=part[2]+(textScale[0]<0?-strokeWidth:strokeWidth),anchorY=baseline*label.height+2*(.5-baseline)*strokeWidth*textScale[1]/textScale[0]-offsetY;const dimensions=this.calculateImageOrLabelDimensions_(label.width,label.height,part[0],part[1],label.width,label.height,anchorX,anchorY,0,0,part[3],pixelRatioScale,!1,canvas.Tq,!1,feature);if(declutterTree&&"declutter"===declutterMode&&declutterTree.collides(dimensions.declutterBox))break drawChars;replayImageOrLabelArgs.push([context,scaledCanvasSize,label,dimensions,1,null,null])}if(fillKey)for(c=0,cc=parts.length;c<cc;++c){part=parts[c],chars=part[4],label=this.createLabel(chars,textKey,fillKey,""),anchorX=part[2],anchorY=baseline*label.height-offsetY;const dimensions=this.calculateImageOrLabelDimensions_(label.width,label.height,part[0],part[1],label.width,label.height,anchorX,anchorY,0,0,part[3],pixelRatioScale,!1,canvas.Tq,!1,feature);if(declutterTree&&"declutter"===declutterMode&&declutterTree.collides(dimensions.declutterBox))break drawChars;replayImageOrLabelArgs.push([context,scaledCanvasSize,label,dimensions,1,null,null])}declutterTree&&"none"!==declutterMode&&declutterTree.load(replayImageOrLabelArgs.map(getDeclutterBox));for(let i=0,ii=replayImageOrLabelArgs.length;i<ii;++i)this.replayImageOrLabel_.apply(this,replayImageOrLabelArgs[i])}}++i;break;case canvas_Instruction.END_GEOMETRY:if(void 0!==featureCallback){feature=instruction[1];const result=featureCallback(feature,currentGeometry,declutterMode);if(result)return result}++i;break;case canvas_Instruction.FILL:batchSize?pendingFill++:this.fill_(context),++i;break;case canvas_Instruction.MOVE_TO_LINE_TO:for(d=instruction[1],dd=instruction[2],x=pixelCoordinates[d],y=pixelCoordinates[d+1],context.moveTo(x,y),prevX=x+.5|0,prevY=y+.5|0,d+=2;d<dd;d+=2)x=pixelCoordinates[d],y=pixelCoordinates[d+1],roundX=x+.5|0,roundY=y+.5|0,d!=dd-2&&roundX===prevX&&roundY===prevY||(context.lineTo(x,y),prevX=roundX,prevY=roundY);++i;break;case canvas_Instruction.SET_FILL_STYLE:this.alignAndScaleFill_=instruction[2],pendingFill&&(this.fill_(context),pendingFill=0,pendingStroke&&(context.stroke(),pendingStroke=0)),context.fillStyle=instruction[1],++i;break;case canvas_Instruction.SET_STROKE_STYLE:pendingStroke&&(context.stroke(),pendingStroke=0),this.setStrokeStyle_(context,instruction),++i;break;case canvas_Instruction.STROKE:batchSize?pendingStroke++:context.stroke(),++i;break;default:++i}}pendingFill&&this.fill_(context),pendingStroke&&context.stroke()}execute(context,scaledCanvasSize,transform,viewRotation,snapToPixel,declutterTree){this.viewRotation_=viewRotation,this.execute_(context,scaledCanvasSize,transform,this.instructions,snapToPixel,void 0,void 0,declutterTree)}executeHitDetection(context,transform,viewRotation,featureCallback,hitExtent){return this.viewRotation_=viewRotation,this.execute_(context,[context.canvas.width,context.canvas.height],transform,this.hitDetectionInstructions,!0,featureCallback,hitExtent)}},ALL=["Polygon","Circle","LineString","Image","Text","Default"],DECLUTTER=["Image","Text"],NON_DECLUTTER=ALL.filter(builderType=>!DECLUTTER.includes(builderType));const circlePixelIndexArrayCache={};const canvas_ExecutorGroup=class ExecutorGroup{constructor(maxExtent,resolution,pixelRatio,overlaps,allInstructions,renderBuffer,deferredRendering){this.maxExtent_=maxExtent,this.overlaps_=overlaps,this.pixelRatio_=pixelRatio,this.resolution_=resolution,this.renderBuffer_=renderBuffer,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,ol_transform.vt)(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(allInstructions,deferredRendering)}clip(context,transform){const flatClipCoords=this.getClipCoords(transform);context.beginPath(),context.moveTo(flatClipCoords[0],flatClipCoords[1]),context.lineTo(flatClipCoords[2],flatClipCoords[3]),context.lineTo(flatClipCoords[4],flatClipCoords[5]),context.lineTo(flatClipCoords[6],flatClipCoords[7]),context.clip()}createExecutors_(allInstructions,deferredRendering){for(const zIndex in allInstructions){let executors=this.executorsByZIndex_[zIndex];void 0===executors&&(executors={},this.executorsByZIndex_[zIndex]=executors);const instructionByZindex=allInstructions[zIndex];for(const builderType in instructionByZindex){const instructions=instructionByZindex[builderType];executors[builderType]=new canvas_Executor(this.resolution_,this.pixelRatio_,this.overlaps_,instructions,deferredRendering)}}}hasExecutors(executors){for(const zIndex in this.executorsByZIndex_){const candidates=this.executorsByZIndex_[zIndex];for(let i=0,ii=executors.length;i<ii;++i)if(executors[i]in candidates)return!0}return!1}forEachFeatureAtCoordinate(coordinate,resolution,rotation,hitTolerance,callback,declutteredFeatures){const contextSize=2*(hitTolerance=Math.round(hitTolerance))+1,transform=(0,ol_transform.Zz)(this.hitDetectionTransform_,hitTolerance+.5,hitTolerance+.5,1/resolution,-1/resolution,-rotation,-coordinate[0],-coordinate[1]),newContext=!this.hitDetectionContext_;newContext&&(this.hitDetectionContext_=(0,dom.Y)(contextSize,contextSize));const context=this.hitDetectionContext_;let hitExtent;context.canvas.width!==contextSize||context.canvas.height!==contextSize?(context.canvas.width=contextSize,context.canvas.height=contextSize):newContext||context.clearRect(0,0,contextSize,contextSize),void 0!==this.renderBuffer_&&(hitExtent=(0,ol_extent.S5)(),(0,ol_extent.$C)(hitExtent,coordinate),(0,ol_extent.r)(hitExtent,resolution*(this.renderBuffer_+hitTolerance),hitExtent));const indexes=function getPixelIndexArray(radius){if(void 0!==circlePixelIndexArrayCache[radius])return circlePixelIndexArrayCache[radius];const size=2*radius+1,maxDistanceSq=radius*radius,distances=new Array(maxDistanceSq+1);for(let i=0;i<=radius;++i)for(let j=0;j<=radius;++j){const distanceSq=i*i+j*j;if(distanceSq>maxDistanceSq)break;let distance=distances[distanceSq];distance||(distance=[],distances[distanceSq]=distance),distance.push(4*((radius+i)*size+(radius+j))+3),i>0&&distance.push(4*((radius-i)*size+(radius+j))+3),j>0&&(distance.push(4*((radius+i)*size+(radius-j))+3),i>0&&distance.push(4*((radius-i)*size+(radius-j))+3))}const pixelIndex=[];for(let i=0,ii=distances.length;i<ii;++i)distances[i]&&pixelIndex.push(...distances[i]);return circlePixelIndexArrayCache[radius]=pixelIndex,pixelIndex}(hitTolerance);let builderType;function featureCallback(feature,geometry,declutterMode){const imageData=context.getImageData(0,0,contextSize,contextSize).data;for(let i=0,ii=indexes.length;i<ii;i++)if(imageData[indexes[i]]>0){if(!declutteredFeatures||"none"===declutterMode||"Image"!==builderType&&"Text"!==builderType||declutteredFeatures.includes(feature)){const idx=(indexes[i]-3)/4,x=hitTolerance-idx%contextSize,y=hitTolerance-(idx/contextSize|0),result=callback(feature,geometry,x*x+y*y);if(result)return result}context.clearRect(0,0,contextSize,contextSize);break}}const zs=Object.keys(this.executorsByZIndex_).map(Number);let i,j,executors,executor,result;for(zs.sort(array.V_),i=zs.length-1;i>=0;--i){const zIndexKey=zs[i].toString();for(executors=this.executorsByZIndex_[zIndexKey],j=ALL.length-1;j>=0;--j)if(builderType=ALL[j],executor=executors[builderType],void 0!==executor&&(result=executor.executeHitDetection(context,transform,rotation,featureCallback,hitExtent),result))return result}}getClipCoords(transform){const maxExtent=this.maxExtent_;if(!maxExtent)return null;const minX=maxExtent[0],minY=maxExtent[1],maxX=maxExtent[2],maxY=maxExtent[3],flatClipCoords=[minX,minY,minX,maxY,maxX,maxY,maxX,minY];return(0,flat_transform.Rc)(flatClipCoords,0,8,2,transform,flatClipCoords),flatClipCoords}isEmpty(){return(0,obj.p)(this.executorsByZIndex_)}execute(targetContext,scaledCanvasSize,transform,viewRotation,snapToPixel,builderTypes,declutterTree){const zs=Object.keys(this.executorsByZIndex_).map(Number);zs.sort(declutterTree?array.rG:array.V_),builderTypes=builderTypes||ALL;const maxBuilderTypes=ALL.length;for(let i=0,ii=zs.length;i<ii;++i){const zIndexKey=zs[i].toString(),replays=this.executorsByZIndex_[zIndexKey];for(let j=0,jj=builderTypes.length;j<jj;++j){const builderType=builderTypes[j],replay=replays[builderType];if(void 0!==replay){const zIndexContext=null===declutterTree?void 0:replay.getZIndexContext(),context=zIndexContext?zIndexContext.getContext():targetContext,requireClip=this.maxExtent_&&"Image"!==builderType&&"Text"!==builderType;if(requireClip&&(context.save(),this.clip(context,transform)),zIndexContext&&"Text"!==builderType&&"Image"!==builderType?zIndexContext.pushFunction(context=>replay.execute(context,scaledCanvasSize,transform,viewRotation,snapToPixel,declutterTree)):replay.execute(context,scaledCanvasSize,transform,viewRotation,snapToPixel,declutterTree),requireClip&&context.restore(),zIndexContext){zIndexContext.offset();const index=zs[i]*maxBuilderTypes+ALL.indexOf(builderType);this.deferredZIndexContexts_[index]||(this.deferredZIndexContexts_[index]=[]),this.deferredZIndexContexts_[index].push(zIndexContext)}}}}this.renderedContext_=targetContext}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const deferredZIndexContexts=this.deferredZIndexContexts_,zs=Object.keys(deferredZIndexContexts).map(Number).sort(array.V_);for(let i=0,ii=zs.length;i<ii;++i)deferredZIndexContexts[zs[i]].forEach(zIndexContext=>{zIndexContext.draw(this.renderedContext_),zIndexContext.clear()}),deferredZIndexContexts[zs[i]].length=0}};var Icon=__webpack_require__("./node_modules/ol/style/Icon.js"),SimpleGeometry=__webpack_require__("./node_modules/ol/geom/SimpleGeometry.js");const Immediate=class CanvasImmediateRenderer extends render_VectorContext{constructor(context,pixelRatio,extent,transform,viewRotation,squaredTolerance,userTransform){super(),this.context_=context,this.pixelRatio_=pixelRatio,this.extent_=extent,this.transform_=transform,this.transformRotation_=transform?(0,math.Mg)(Math.atan2(transform[1],transform[0]),10):0,this.viewRotation_=viewRotation,this.squaredTolerance_=squaredTolerance,this.userTransform_=userTransform,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,ol_transform.vt)()}drawImages_(flatCoordinates,offset,end,stride){if(!this.image_)return;const pixelCoordinates=(0,flat_transform.Rc)(flatCoordinates,offset,end,stride,this.transform_,this.pixelCoordinates_),context=this.context_,localTransform=this.tmpLocalTransform_,alpha=context.globalAlpha;1!=this.imageOpacity_&&(context.globalAlpha=alpha*this.imageOpacity_);let rotation=this.imageRotation_;0===this.transformRotation_&&(rotation-=this.viewRotation_),this.imageRotateWithView_&&(rotation+=this.viewRotation_);for(let i=0,ii=pixelCoordinates.length;i<ii;i+=2){const x=pixelCoordinates[i]-this.imageAnchorX_,y=pixelCoordinates[i+1]-this.imageAnchorY_;if(0!==rotation||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const centerX=x+this.imageAnchorX_,centerY=y+this.imageAnchorY_;(0,ol_transform.Zz)(localTransform,centerX,centerY,1,1,rotation,-centerX,-centerY),context.save(),context.transform.apply(context,localTransform),context.translate(centerX,centerY),context.scale(this.imageScale_[0],this.imageScale_[1]),context.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),context.restore()}else context.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,x,y,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(context.globalAlpha=alpha)}drawText_(flatCoordinates,offset,end,stride){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const pixelCoordinates=(0,flat_transform.Rc)(flatCoordinates,offset,end,stride,this.transform_,this.pixelCoordinates_),context=this.context_;let rotation=this.textRotation_;for(0===this.transformRotation_&&(rotation-=this.viewRotation_),this.textRotateWithView_&&(rotation+=this.viewRotation_);offset<end;offset+=stride){const x=pixelCoordinates[offset]+this.textOffsetX_,y=pixelCoordinates[offset+1]+this.textOffsetY_;0!==rotation||1!=this.textScale_[0]||1!=this.textScale_[1]?(context.save(),context.translate(x-this.textOffsetX_,y-this.textOffsetY_),context.rotate(rotation),context.translate(this.textOffsetX_,this.textOffsetY_),context.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&context.strokeText(this.text_,0,0),this.textFillState_&&context.fillText(this.text_,0,0),context.restore()):(this.textStrokeState_&&context.strokeText(this.text_,x,y),this.textFillState_&&context.fillText(this.text_,x,y))}}moveToLineTo_(flatCoordinates,offset,end,stride,close){const context=this.context_,pixelCoordinates=(0,flat_transform.Rc)(flatCoordinates,offset,end,stride,this.transform_,this.pixelCoordinates_);context.moveTo(pixelCoordinates[0],pixelCoordinates[1]);let length=pixelCoordinates.length;close&&(length-=2);for(let i=2;i<length;i+=2)context.lineTo(pixelCoordinates[i],pixelCoordinates[i+1]);return close&&context.closePath(),end}drawRings_(flatCoordinates,offset,ends,stride){for(let i=0,ii=ends.length;i<ii;++i)offset=this.moveToLineTo_(flatCoordinates,offset,ends[i],stride,!0);return offset}drawCircle(geometry){if(this.squaredTolerance_&&(geometry=geometry.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ol_extent.HY)(this.extent_,geometry.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const pixelCoordinates=(0,SimpleGeometry.v7)(geometry,this.transform_,this.pixelCoordinates_),dx=pixelCoordinates[2]-pixelCoordinates[0],dy=pixelCoordinates[3]-pixelCoordinates[1],radius=Math.sqrt(dx*dx+dy*dy),context=this.context_;context.beginPath(),context.arc(pixelCoordinates[0],pixelCoordinates[1],radius,0,2*Math.PI),this.fillState_&&context.fill(),this.strokeState_&&context.stroke()}""!==this.text_&&this.drawText_(geometry.getCenter(),0,2,2)}}setStyle(style){this.setFillStrokeStyle(style.getFill(),style.getStroke()),this.setImageStyle(style.getImage()),this.setTextStyle(style.getText())}setTransform(transform){this.transform_=transform}drawGeometry(geometry){switch(geometry.getType()){case"Point":this.drawPoint(geometry);break;case"LineString":this.drawLineString(geometry);break;case"Polygon":this.drawPolygon(geometry);break;case"MultiPoint":this.drawMultiPoint(geometry);break;case"MultiLineString":this.drawMultiLineString(geometry);break;case"MultiPolygon":this.drawMultiPolygon(geometry);break;case"GeometryCollection":this.drawGeometryCollection(geometry);break;case"Circle":this.drawCircle(geometry)}}drawFeature(feature,style){const geometry=style.getGeometryFunction()(feature);geometry&&(this.setStyle(style),this.drawGeometry(geometry))}drawGeometryCollection(geometry){const geometries=geometry.getGeometriesArray();for(let i=0,ii=geometries.length;i<ii;++i)this.drawGeometry(geometries[i])}drawPoint(geometry){this.squaredTolerance_&&(geometry=geometry.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const flatCoordinates=geometry.getFlatCoordinates(),stride=geometry.getStride();this.image_&&this.drawImages_(flatCoordinates,0,flatCoordinates.length,stride),""!==this.text_&&this.drawText_(flatCoordinates,0,flatCoordinates.length,stride)}drawMultiPoint(geometry){this.squaredTolerance_&&(geometry=geometry.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const flatCoordinates=geometry.getFlatCoordinates(),stride=geometry.getStride();this.image_&&this.drawImages_(flatCoordinates,0,flatCoordinates.length,stride),""!==this.text_&&this.drawText_(flatCoordinates,0,flatCoordinates.length,stride)}drawLineString(geometry){if(this.squaredTolerance_&&(geometry=geometry.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ol_extent.HY)(this.extent_,geometry.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const context=this.context_,flatCoordinates=geometry.getFlatCoordinates();context.beginPath(),this.moveToLineTo_(flatCoordinates,0,flatCoordinates.length,geometry.getStride(),!1),context.stroke()}if(""!==this.text_){const flatMidpoint=geometry.getFlatMidpoint();this.drawText_(flatMidpoint,0,2,2)}}}drawMultiLineString(geometry){this.squaredTolerance_&&(geometry=geometry.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const geometryExtent=geometry.getExtent();if((0,ol_extent.HY)(this.extent_,geometryExtent)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const context=this.context_,flatCoordinates=geometry.getFlatCoordinates();let offset=0;const ends=geometry.getEnds(),stride=geometry.getStride();context.beginPath();for(let i=0,ii=ends.length;i<ii;++i)offset=this.moveToLineTo_(flatCoordinates,offset,ends[i],stride,!1);context.stroke()}if(""!==this.text_){const flatMidpoints=geometry.getFlatMidpoints();this.drawText_(flatMidpoints,0,flatMidpoints.length,2)}}}drawPolygon(geometry){if(this.squaredTolerance_&&(geometry=geometry.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ol_extent.HY)(this.extent_,geometry.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const context=this.context_;context.beginPath(),this.drawRings_(geometry.getOrientedFlatCoordinates(),0,geometry.getEnds(),geometry.getStride()),this.fillState_&&context.fill(),this.strokeState_&&context.stroke()}if(""!==this.text_){const flatInteriorPoint=geometry.getFlatInteriorPoint();this.drawText_(flatInteriorPoint,0,2,2)}}}drawMultiPolygon(geometry){if(this.squaredTolerance_&&(geometry=geometry.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ol_extent.HY)(this.extent_,geometry.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const context=this.context_,flatCoordinates=geometry.getOrientedFlatCoordinates();let offset=0;const endss=geometry.getEndss(),stride=geometry.getStride();context.beginPath();for(let i=0,ii=endss.length;i<ii;++i){const ends=endss[i];offset=this.drawRings_(flatCoordinates,offset,ends,stride)}this.fillState_&&context.fill(),this.strokeState_&&context.stroke()}if(""!==this.text_){const flatInteriorPoints=geometry.getFlatInteriorPoints();this.drawText_(flatInteriorPoints,0,flatInteriorPoints.length,2)}}}setContextFillState_(fillState){const context=this.context_,contextFillState=this.contextFillState_;contextFillState?contextFillState.fillStyle!=fillState.fillStyle&&(contextFillState.fillStyle=fillState.fillStyle,context.fillStyle=fillState.fillStyle):(context.fillStyle=fillState.fillStyle,this.contextFillState_={fillStyle:fillState.fillStyle})}setContextStrokeState_(strokeState){const context=this.context_,contextStrokeState=this.contextStrokeState_;contextStrokeState?(contextStrokeState.lineCap!=strokeState.lineCap&&(contextStrokeState.lineCap=strokeState.lineCap,context.lineCap=strokeState.lineCap),(0,array.aI)(contextStrokeState.lineDash,strokeState.lineDash)||context.setLineDash(contextStrokeState.lineDash=strokeState.lineDash),contextStrokeState.lineDashOffset!=strokeState.lineDashOffset&&(contextStrokeState.lineDashOffset=strokeState.lineDashOffset,context.lineDashOffset=strokeState.lineDashOffset),contextStrokeState.lineJoin!=strokeState.lineJoin&&(contextStrokeState.lineJoin=strokeState.lineJoin,context.lineJoin=strokeState.lineJoin),contextStrokeState.lineWidth!=strokeState.lineWidth&&(contextStrokeState.lineWidth=strokeState.lineWidth,context.lineWidth=strokeState.lineWidth),contextStrokeState.miterLimit!=strokeState.miterLimit&&(contextStrokeState.miterLimit=strokeState.miterLimit,context.miterLimit=strokeState.miterLimit),contextStrokeState.strokeStyle!=strokeState.strokeStyle&&(contextStrokeState.strokeStyle=strokeState.strokeStyle,context.strokeStyle=strokeState.strokeStyle)):(context.lineCap=strokeState.lineCap,context.setLineDash(strokeState.lineDash),context.lineDashOffset=strokeState.lineDashOffset,context.lineJoin=strokeState.lineJoin,context.lineWidth=strokeState.lineWidth,context.miterLimit=strokeState.miterLimit,context.strokeStyle=strokeState.strokeStyle,this.contextStrokeState_={lineCap:strokeState.lineCap,lineDash:strokeState.lineDash,lineDashOffset:strokeState.lineDashOffset,lineJoin:strokeState.lineJoin,lineWidth:strokeState.lineWidth,miterLimit:strokeState.miterLimit,strokeStyle:strokeState.strokeStyle})}setContextTextState_(textState){const context=this.context_,contextTextState=this.contextTextState_,textAlign=textState.textAlign?textState.textAlign:canvas.MY;contextTextState?(contextTextState.font!=textState.font&&(contextTextState.font=textState.font,context.font=textState.font),contextTextState.textAlign!=textAlign&&(contextTextState.textAlign=textAlign,context.textAlign=textAlign),contextTextState.textBaseline!=textState.textBaseline&&(contextTextState.textBaseline=textState.textBaseline,context.textBaseline=textState.textBaseline)):(context.font=textState.font,context.textAlign=textAlign,context.textBaseline=textState.textBaseline,this.contextTextState_={font:textState.font,textAlign,textBaseline:textState.textBaseline})}setFillStrokeStyle(fillStyle,strokeStyle){if(fillStyle){const fillStyleColor=fillStyle.getColor();this.fillState_={fillStyle:(0,colorlike.F)(fillStyleColor||canvas.qY)}}else this.fillState_=null;if(strokeStyle){const strokeStyleColor=strokeStyle.getColor(),strokeStyleLineCap=strokeStyle.getLineCap(),strokeStyleLineDash=strokeStyle.getLineDash(),strokeStyleLineDashOffset=strokeStyle.getLineDashOffset(),strokeStyleLineJoin=strokeStyle.getLineJoin(),strokeStyleWidth=strokeStyle.getWidth(),strokeStyleMiterLimit=strokeStyle.getMiterLimit(),lineDash=strokeStyleLineDash||canvas.Oq;this.strokeState_={lineCap:void 0!==strokeStyleLineCap?strokeStyleLineCap:canvas._m,lineDash:1===this.pixelRatio_?lineDash:lineDash.map(n=>n*this.pixelRatio_),lineDashOffset:(strokeStyleLineDashOffset||canvas.vk)*this.pixelRatio_,lineJoin:void 0!==strokeStyleLineJoin?strokeStyleLineJoin:canvas._K,lineWidth:(void 0!==strokeStyleWidth?strokeStyleWidth:canvas.aq)*this.pixelRatio_,miterLimit:void 0!==strokeStyleMiterLimit?strokeStyleMiterLimit:canvas.eL,strokeStyle:(0,colorlike.F)(strokeStyleColor||canvas.NT)}}else this.strokeState_=null}setImageStyle(imageStyle){let imageSize;if(!imageStyle||!(imageSize=imageStyle.getSize()))return void(this.image_=null);const imagePixelRatio=imageStyle.getPixelRatio(this.pixelRatio_),imageAnchor=imageStyle.getAnchor(),imageOrigin=imageStyle.getOrigin();this.image_=imageStyle.getImage(this.pixelRatio_),this.imageAnchorX_=imageAnchor[0]*imagePixelRatio,this.imageAnchorY_=imageAnchor[1]*imagePixelRatio,this.imageHeight_=imageSize[1]*imagePixelRatio,this.imageOpacity_=imageStyle.getOpacity(),this.imageOriginX_=imageOrigin[0],this.imageOriginY_=imageOrigin[1],this.imageRotateWithView_=imageStyle.getRotateWithView(),this.imageRotation_=imageStyle.getRotation();const imageScale=imageStyle.getScaleArray();this.imageScale_=[imageScale[0]*this.pixelRatio_/imagePixelRatio,imageScale[1]*this.pixelRatio_/imagePixelRatio],this.imageWidth_=imageSize[0]*imagePixelRatio}setTextStyle(textStyle){if(textStyle){const textFillStyle=textStyle.getFill();if(textFillStyle){const textFillStyleColor=textFillStyle.getColor();this.textFillState_={fillStyle:(0,colorlike.F)(textFillStyleColor||canvas.qY)}}else this.textFillState_=null;const textStrokeStyle=textStyle.getStroke();if(textStrokeStyle){const textStrokeStyleColor=textStrokeStyle.getColor(),textStrokeStyleLineCap=textStrokeStyle.getLineCap(),textStrokeStyleLineDash=textStrokeStyle.getLineDash(),textStrokeStyleLineDashOffset=textStrokeStyle.getLineDashOffset(),textStrokeStyleLineJoin=textStrokeStyle.getLineJoin(),textStrokeStyleWidth=textStrokeStyle.getWidth(),textStrokeStyleMiterLimit=textStrokeStyle.getMiterLimit();this.textStrokeState_={lineCap:void 0!==textStrokeStyleLineCap?textStrokeStyleLineCap:canvas._m,lineDash:textStrokeStyleLineDash||canvas.Oq,lineDashOffset:textStrokeStyleLineDashOffset||canvas.vk,lineJoin:void 0!==textStrokeStyleLineJoin?textStrokeStyleLineJoin:canvas._K,lineWidth:void 0!==textStrokeStyleWidth?textStrokeStyleWidth:canvas.aq,miterLimit:void 0!==textStrokeStyleMiterLimit?textStrokeStyleMiterLimit:canvas.eL,strokeStyle:(0,colorlike.F)(textStrokeStyleColor||canvas.NT)}}else this.textStrokeState_=null;const textFont=textStyle.getFont(),textOffsetX=textStyle.getOffsetX(),textOffsetY=textStyle.getOffsetY(),textRotateWithView=textStyle.getRotateWithView(),textRotation=textStyle.getRotation(),textScale=textStyle.getScaleArray(),textText=textStyle.getText(),textTextAlign=textStyle.getTextAlign(),textTextBaseline=textStyle.getTextBaseline();this.textState_={font:void 0!==textFont?textFont:canvas.ZV,textAlign:void 0!==textTextAlign?textTextAlign:canvas.MY,textBaseline:void 0!==textTextBaseline?textTextBaseline:canvas.M8},this.text_=void 0!==textText?Array.isArray(textText)?textText.reduce((acc,t,i)=>acc+(i%2?" ":t),""):textText:"",this.textOffsetX_=void 0!==textOffsetX?this.pixelRatio_*textOffsetX:0,this.textOffsetY_=void 0!==textOffsetY?this.pixelRatio_*textOffsetY:0,this.textRotateWithView_=void 0!==textRotateWithView&&textRotateWithView,this.textRotation_=void 0!==textRotation?textRotation:0,this.textScale_=[this.pixelRatio_*textScale[0],this.pixelRatio_*textScale[1]]}else this.text_=""}};var ImageState=__webpack_require__("./node_modules/ol/ImageState.js");const GEOMETRY_RENDERERS={Point:function renderPointGeometry(builderGroup,geometry,style,feature,index,declutter){const imageStyle=style.getImage(),textStyle=style.getText(),hasText=textStyle&&textStyle.getText(),declutterImageWithText=declutter&&imageStyle&&hasText?{}:void 0;if(imageStyle){if(imageStyle.getImageState()!=ImageState.A.LOADED)return;const imageReplay=builderGroup.getBuilder(style.getZIndex(),"Image");imageReplay.setImageStyle(imageStyle,declutterImageWithText),imageReplay.drawPoint(geometry,feature,index)}if(hasText){const textReplay=builderGroup.getBuilder(style.getZIndex(),"Text");textReplay.setTextStyle(textStyle,declutterImageWithText),textReplay.drawText(geometry,feature,index)}},LineString:function renderLineStringGeometry(builderGroup,geometry,style,feature,index){const strokeStyle=style.getStroke();if(strokeStyle){const lineStringReplay=builderGroup.getBuilder(style.getZIndex(),"LineString");lineStringReplay.setFillStrokeStyle(null,strokeStyle),lineStringReplay.drawLineString(geometry,feature,index)}const textStyle=style.getText();if(textStyle&&textStyle.getText()){const textReplay=builderGroup.getBuilder(style.getZIndex(),"Text");textReplay.setTextStyle(textStyle),textReplay.drawText(geometry,feature,index)}},Polygon:function renderPolygonGeometry(builderGroup,geometry,style,feature,index){const fillStyle=style.getFill(),strokeStyle=style.getStroke();if(fillStyle||strokeStyle){const polygonReplay=builderGroup.getBuilder(style.getZIndex(),"Polygon");polygonReplay.setFillStrokeStyle(fillStyle,strokeStyle),polygonReplay.drawPolygon(geometry,feature,index)}const textStyle=style.getText();if(textStyle&&textStyle.getText()){const textReplay=builderGroup.getBuilder(style.getZIndex(),"Text");textReplay.setTextStyle(textStyle),textReplay.drawText(geometry,feature,index)}},MultiPoint:function renderMultiPointGeometry(builderGroup,geometry,style,feature,index,declutter){const imageStyle=style.getImage(),hasImage=imageStyle&&0!==imageStyle.getOpacity(),textStyle=style.getText(),hasText=textStyle&&textStyle.getText(),declutterImageWithText=declutter&&hasImage&&hasText?{}:void 0;if(hasImage){if(imageStyle.getImageState()!=ImageState.A.LOADED)return;const imageReplay=builderGroup.getBuilder(style.getZIndex(),"Image");imageReplay.setImageStyle(imageStyle,declutterImageWithText),imageReplay.drawMultiPoint(geometry,feature,index)}if(hasText){const textReplay=builderGroup.getBuilder(style.getZIndex(),"Text");textReplay.setTextStyle(textStyle,declutterImageWithText),textReplay.drawText(geometry,feature,index)}},MultiLineString:function renderMultiLineStringGeometry(builderGroup,geometry,style,feature,index){const strokeStyle=style.getStroke();if(strokeStyle){const lineStringReplay=builderGroup.getBuilder(style.getZIndex(),"LineString");lineStringReplay.setFillStrokeStyle(null,strokeStyle),lineStringReplay.drawMultiLineString(geometry,feature,index)}const textStyle=style.getText();if(textStyle&&textStyle.getText()){const textReplay=builderGroup.getBuilder(style.getZIndex(),"Text");textReplay.setTextStyle(textStyle),textReplay.drawText(geometry,feature,index)}},MultiPolygon:function renderMultiPolygonGeometry(builderGroup,geometry,style,feature,index){const fillStyle=style.getFill(),strokeStyle=style.getStroke();if(strokeStyle||fillStyle){const polygonReplay=builderGroup.getBuilder(style.getZIndex(),"Polygon");polygonReplay.setFillStrokeStyle(fillStyle,strokeStyle),polygonReplay.drawMultiPolygon(geometry,feature,index)}const textStyle=style.getText();if(textStyle&&textStyle.getText()){const textReplay=builderGroup.getBuilder(style.getZIndex(),"Text");textReplay.setTextStyle(textStyle),textReplay.drawText(geometry,feature,index)}},GeometryCollection:function renderGeometryCollectionGeometry(replayGroup,geometry,style,feature,declutterBuilderGroup,index){const geometries=geometry.getGeometriesArray();let i,ii;for(i=0,ii=geometries.length;i<ii;++i){(0,GEOMETRY_RENDERERS[geometries[i].getType()])(replayGroup,geometries[i],style,feature,declutterBuilderGroup,index)}},Circle:function renderCircleGeometry(builderGroup,geometry,style,feature,index){const fillStyle=style.getFill(),strokeStyle=style.getStroke();if(fillStyle||strokeStyle){const circleReplay=builderGroup.getBuilder(style.getZIndex(),"Circle");circleReplay.setFillStrokeStyle(fillStyle,strokeStyle),circleReplay.drawCircle(geometry,feature,index)}const textStyle=style.getText();if(textStyle&&textStyle.getText()){const textReplay=builderGroup.getBuilder(style.getZIndex(),"Text");textReplay.setTextStyle(textStyle),textReplay.drawText(geometry,feature)}}};function defaultOrder(feature1,feature2){return parseInt((0,util.v6)(feature1),10)-parseInt((0,util.v6)(feature2),10)}function getSquaredTolerance(resolution,pixelRatio){const tolerance=getTolerance(resolution,pixelRatio);return tolerance*tolerance}function getTolerance(resolution,pixelRatio){return.5*resolution/pixelRatio}function renderFeature(replayGroup,feature,style,squaredTolerance,listener,transform,declutter,index){const loadingPromises=[],imageStyle=style.getImage();if(imageStyle){let loading=!0;const imageState=imageStyle.getImageState();imageState==ImageState.A.LOADED||imageState==ImageState.A.ERROR?loading=!1:imageState==ImageState.A.IDLE&&imageStyle.load(),loading&&loadingPromises.push(imageStyle.ready())}const fillStyle=style.getFill();fillStyle&&fillStyle.loading()&&loadingPromises.push(fillStyle.ready());const loading=loadingPromises.length>0;return loading&&Promise.all(loadingPromises).then(()=>listener(null)),function renderFeatureInternal(replayGroup,feature,style,squaredTolerance,transform,declutter,index){const geometry=style.getGeometryFunction()(feature);if(!geometry)return;const simplifiedGeometry=geometry.simplifyTransformed(squaredTolerance,transform),renderer=style.getRenderer();if(renderer)renderGeometry(replayGroup,simplifiedGeometry,style,feature,index);else{(0,GEOMETRY_RENDERERS[simplifiedGeometry.getType()])(replayGroup,simplifiedGeometry,style,feature,index,declutter)}}(replayGroup,feature,style,squaredTolerance,transform,declutter,index),loading}function renderGeometry(replayGroup,geometry,style,feature,index){if("GeometryCollection"==geometry.getType()){const geometries=geometry.getGeometries();for(let i=0,ii=geometries.length;i<ii;++i)renderGeometry(replayGroup,geometries[i],style,feature,index);return}replayGroup.getBuilder(style.getZIndex(),"Default").drawCustom(geometry,feature,style.getRenderer(),style.getHitDetectionRenderer(),index)}var color=__webpack_require__("./node_modules/ol/color.js"),has=__webpack_require__("./node_modules/ol/has.js"),Event=__webpack_require__("./node_modules/ol/render/Event.js"),Observable=__webpack_require__("./node_modules/ol/Observable.js"),events_EventType=__webpack_require__("./node_modules/ol/events/EventType.js");class LayerRenderer extends Observable.A{constructor(layer){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=layer,this.staleKeys_=new Array,this.maxStaleKeys=5}getStaleKeys(){return this.staleKeys_}prependStaleKey(key){this.staleKeys_.unshift(key),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(pixel){return(0,util.b0)()}getData(pixel){return null}prepareFrame(frameState){return(0,util.b0)()}renderFrame(frameState,target){return(0,util.b0)()}forEachFeatureAtCoordinate(coordinate,frameState,hitTolerance,callback,matches){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(event){const image=event.target;image.getState()!==ImageState.A.LOADED&&image.getState()!==ImageState.A.ERROR||this.renderIfReadyAndVisible()}loadImage(image){let imageState=image.getState();return imageState!=ImageState.A.LOADED&&imageState!=ImageState.A.ERROR&&image.addEventListener(events_EventType.A.CHANGE,this.boundHandleImageChange_),imageState==ImageState.A.IDLE&&(image.load(),imageState=image.getState()),imageState==ImageState.A.LOADED}renderIfReadyAndVisible(){const layer=this.getLayer();layer&&layer.getVisible()&&"ready"===layer.getSourceState()&&layer.changed()}renderDeferred(frameState){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Layer=LayerRenderer,canvasPool=[];let pixelContext=null;const canvas_Layer=class CanvasLayerRenderer extends Layer{constructor(layer){super(layer),this.container=null,this.renderedResolution,this.tempTransform=(0,ol_transform.vt)(),this.pixelTransform=(0,ol_transform.vt)(),this.inversePixelTransform=(0,ol_transform.vt)(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(image,col,row){let data;pixelContext||function createPixelContext(){pixelContext=(0,dom.Y)(1,1,void 0,{willReadFrequently:!0})}(),pixelContext.clearRect(0,0,1,1);try{pixelContext.drawImage(image,col,row,1,1,0,0,1,1),data=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return data}getBackground(frameState){let background=this.getLayer().getBackground();return"function"==typeof background&&(background=background(frameState.viewState.resolution)),background||void 0}useContainer(target,transform,backgroundColor){const layerClassName=this.getLayer().getClassName();let container,context;if(target&&target.className===layerClassName&&(!backgroundColor||target&&target.style.backgroundColor&&(0,array.aI)((0,color._j)(target.style.backgroundColor),(0,color._j)(backgroundColor)))){const canvas=target.firstElementChild;(0,dom.rB)(canvas)&&(context=canvas.getContext("2d"))}if(context&&(0,ol_transform.tI)(context.canvas.style.transform,transform)?(this.container=target,this.context=context,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){container=has.Wl?(0,dom.mH)():document.createElement("div"),container.className=layerClassName;let style=container.style;style.position="absolute",style.width="100%",style.height="100%",context=(0,dom.Y)();const canvas=context.canvas;container.appendChild(canvas),style=canvas.style,style.position="absolute",style.left="0",style.transformOrigin="top left",this.container=container,this.context=context}this.containerReused||!backgroundColor||this.container.style.backgroundColor||(this.container.style.backgroundColor=backgroundColor)}clipUnrotated(context,frameState,extent){const topLeft=(0,ol_extent.Py)(extent),topRight=(0,ol_extent.WU)(extent),bottomRight=(0,ol_extent.k_)(extent),bottomLeft=(0,ol_extent.R)(extent);(0,ol_transform.Bb)(frameState.coordinateToPixelTransform,topLeft),(0,ol_transform.Bb)(frameState.coordinateToPixelTransform,topRight),(0,ol_transform.Bb)(frameState.coordinateToPixelTransform,bottomRight),(0,ol_transform.Bb)(frameState.coordinateToPixelTransform,bottomLeft);const inverted=this.inversePixelTransform;(0,ol_transform.Bb)(inverted,topLeft),(0,ol_transform.Bb)(inverted,topRight),(0,ol_transform.Bb)(inverted,bottomRight),(0,ol_transform.Bb)(inverted,bottomLeft),context.save(),context.beginPath(),context.moveTo(Math.round(topLeft[0]),Math.round(topLeft[1])),context.lineTo(Math.round(topRight[0]),Math.round(topRight[1])),context.lineTo(Math.round(bottomRight[0]),Math.round(bottomRight[1])),context.lineTo(Math.round(bottomLeft[0]),Math.round(bottomLeft[1])),context.clip()}prepareContainer(frameState,target){const extent=frameState.extent,resolution=frameState.viewState.resolution,rotation=frameState.viewState.rotation,pixelRatio=frameState.pixelRatio,width=Math.round((0,ol_extent.RG)(extent)/resolution*pixelRatio),height=Math.round((0,ol_extent.Oq)(extent)/resolution*pixelRatio);(0,ol_transform.Zz)(this.pixelTransform,frameState.size[0]/2,frameState.size[1]/2,1/pixelRatio,1/pixelRatio,rotation,-width/2,-height/2),(0,ol_transform.T9)(this.inversePixelTransform,this.pixelTransform);const canvasTransform=(0,ol_transform.dI)(this.pixelTransform);if(this.useContainer(target,canvasTransform,this.getBackground(frameState)),!this.containerReused){const canvas=this.context.canvas;canvas.width!=width||canvas.height!=height?(canvas.width=width,canvas.height=height):this.context.clearRect(0,0,width,height),canvasTransform!==canvas.style.transform&&(canvas.style.transform=canvasTransform)}}dispatchRenderEvent_(type,context,frameState){const layer=this.getLayer();if(layer.hasListener(type)){const event=new Event.A(type,this.inversePixelTransform,frameState,context);layer.dispatchEvent(event)}}preRender(context,frameState){this.frameState=frameState,frameState.declutter||this.dispatchRenderEvent_(EventType.A.PRERENDER,context,frameState)}postRender(context,frameState){frameState.declutter||this.dispatchRenderEvent_(EventType.A.POSTRENDER,context,frameState)}renderDeferredInternal(frameState){}getRenderContext(frameState){return frameState.declutter&&!this.deferredContext_&&(this.deferredContext_=new canvas_ZIndexContext),frameState.declutter?this.deferredContext_.getContext():this.context}renderDeferred(frameState){frameState.declutter&&(this.dispatchRenderEvent_(EventType.A.PRERENDER,this.context,frameState),frameState.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(frameState),this.dispatchRenderEvent_(EventType.A.POSTRENDER,this.context,frameState))}getRenderTransform(center,resolution,rotation,pixelRatio,width,height,offsetX){const dx1=width/2,dy1=height/2,sx=pixelRatio/resolution,sy=-sx,dx2=-center[0]+offsetX,dy2=-center[1];return(0,ol_transform.Zz)(this.tempTransform,dx1,dy1,sx,sy,-rotation,dx2,dy2)}disposeInternal(){delete this.frameState,super.disposeInternal()}};const canvas_VectorLayer=class CanvasVectorLayerRenderer extends canvas_Layer{constructor(vectorLayer){super(vectorLayer),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,ol_extent.S5)(),this.wrappedRenderedExtent_=(0,ol_extent.S5)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(executorGroup,frameState,declutterable){const extent=frameState.extent,viewState=frameState.viewState,center=viewState.center,resolution=viewState.resolution,projection=viewState.projection,rotation=viewState.rotation,projectionExtent=projection.getExtent(),vectorSource=this.getLayer().getSource(),declutter=this.getLayer().getDeclutter(),pixelRatio=frameState.pixelRatio,viewHints=frameState.viewHints,snapToPixel=!(viewHints[ViewHint.A.ANIMATING]||viewHints[ViewHint.A.INTERACTING]),context=this.context,width=Math.round((0,ol_extent.RG)(extent)/resolution*pixelRatio),height=Math.round((0,ol_extent.Oq)(extent)/resolution*pixelRatio),multiWorld=vectorSource.getWrapX()&&projection.canWrapX(),worldWidth=multiWorld?(0,ol_extent.RG)(projectionExtent):null,endWorld=multiWorld?Math.ceil((extent[2]-projectionExtent[2])/worldWidth)+1:1;let world=multiWorld?Math.floor((extent[0]-projectionExtent[0])/worldWidth):0;do{let transform=this.getRenderTransform(center,resolution,0,pixelRatio,width,height,world*worldWidth);frameState.declutter&&(transform=transform.slice(0)),executorGroup.execute(context,[context.canvas.width,context.canvas.height],transform,rotation,snapToPixel,void 0===declutterable?ALL:declutterable?DECLUTTER:NON_DECLUTTER,declutterable?declutter&&frameState.declutter[declutter]:void 0)}while(++world<endWorld)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=(0,dom.Y)(this.context.canvas.width,this.context.canvas.height,canvasPool))}resetDrawContext_(){if(1!==this.opacity_&&this.targetContext_){const alpha=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=alpha,(0,dom.Yg)(this.context),canvasPool.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(frameState){this.replayGroup_&&this.getLayer().getDeclutter()&&this.renderWorlds(this.replayGroup_,frameState,!0)}renderDeferredInternal(frameState){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(frameState,target){const layerState=frameState.layerStatesArray[frameState.layerIndex];this.opacity_=layerState.opacity;const viewState=frameState.viewState;this.prepareContainer(frameState,target);const context=this.context,replayGroup=this.replayGroup_;let render=replayGroup&&!replayGroup.isEmpty();if(!render){if(!(this.getLayer().hasListener(EventType.A.PRERENDER)||this.getLayer().hasListener(EventType.A.POSTRENDER)))return this.container}this.setDrawContext_(),this.preRender(context,frameState);const projection=viewState.projection;if(this.clipped_=!1,render&&layerState.extent&&this.clipping){const layerExtent=(0,proj.SD)(layerState.extent,projection);render=(0,ol_extent.HY)(layerExtent,frameState.extent),this.clipped_=render&&!(0,ol_extent.ms)(layerExtent,frameState.extent),this.clipped_&&this.clipUnrotated(context,frameState,layerExtent)}return render&&this.renderWorlds(replayGroup,frameState,!this.getLayer().getDeclutter()&&void 0),!frameState.declutter&&this.clipped_&&context.restore(),this.postRender(context,frameState),this.renderedRotation_!==viewState.rotation&&(this.renderedRotation_=viewState.rotation,this.hitDetectionImageData_=null),frameState.declutter||this.resetDrawContext_(),this.container}getFeatures(pixel){return new Promise(resolve=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const size=this.frameState.size.slice(),center=this.renderedCenter_,resolution=this.renderedResolution_,rotation=this.renderedRotation_,projection=this.renderedProjection_,extent=this.wrappedRenderedExtent_,layer=this.getLayer(),transforms=[],width=.5*size[0],height=.5*size[1];transforms.push(this.getRenderTransform(center,resolution,rotation,.5,width,height,0).slice());const source=layer.getSource(),projectionExtent=projection.getExtent();if(source.getWrapX()&&projection.canWrapX()&&!(0,ol_extent.ms)(projectionExtent,extent)){let startX=extent[0];const worldWidth=(0,ol_extent.RG)(projectionExtent);let offsetX,world=0;for(;startX<projectionExtent[0];)--world,offsetX=worldWidth*world,transforms.push(this.getRenderTransform(center,resolution,rotation,.5,width,height,offsetX).slice()),startX+=worldWidth;for(world=0,startX=extent[2];startX>projectionExtent[2];)++world,offsetX=worldWidth*world,transforms.push(this.getRenderTransform(center,resolution,rotation,.5,width,height,offsetX).slice()),startX-=worldWidth}const userProjection=(0,proj.Tf)();this.hitDetectionImageData_=function createHitDetectionImageData(size,transforms,features,styleFunction,extent,resolution,rotation,squaredTolerance,projection){const userExtent=projection?(0,proj.JR)(extent,projection):extent,width=.5*size[0],height=.5*size[1],context=(0,dom.Y)(width,height);context.imageSmoothingEnabled=!1;const canvas=context.canvas,renderer=new Immediate(context,.5,extent,null,rotation,squaredTolerance,projection?(0,proj.FO)((0,proj.Tf)(),projection):null),featureCount=features.length,indexFactor=Math.floor(16777215/featureCount),featuresByZIndex={};for(let i=1;i<=featureCount;++i){const feature=features[i-1],featureStyleFunction=feature.getStyleFunction()||styleFunction;if(!featureStyleFunction)continue;let styles=featureStyleFunction(feature,resolution);if(!styles)continue;Array.isArray(styles)||(styles=[styles]);const color=(i*indexFactor).toString(16).padStart(7,"#00000");for(let j=0,jj=styles.length;j<jj;++j){const originalStyle=styles[j],geometry=originalStyle.getGeometryFunction()(feature);if(!geometry||!(0,ol_extent.HY)(userExtent,geometry.getExtent()))continue;const style=originalStyle.clone(),fill=style.getFill();fill&&fill.setColor(color);const stroke=style.getStroke();stroke&&(stroke.setColor(color),stroke.setLineDash(null)),style.setText(void 0);const image=originalStyle.getImage();if(image){const imgSize=image.getImageSize();if(!imgSize)continue;const imgContext=(0,dom.Y)(imgSize[0],imgSize[1],void 0,{alpha:!1}),img=imgContext.canvas;imgContext.fillStyle=color,imgContext.fillRect(0,0,img.width,img.height),style.setImage(new Icon.A({img,anchor:image.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:image.getOrigin(),opacity:1,size:image.getSize(),scale:image.getScale(),rotation:image.getRotation(),rotateWithView:image.getRotateWithView()}))}const zIndex=style.getZIndex()||0;let byGeometryType=featuresByZIndex[zIndex];byGeometryType||(byGeometryType={},featuresByZIndex[zIndex]=byGeometryType,byGeometryType.Polygon=[],byGeometryType.Circle=[],byGeometryType.LineString=[],byGeometryType.Point=[]);const type=geometry.getType();if("GeometryCollection"===type){const geometries=geometry.getGeometriesArrayRecursive();for(let i=0,ii=geometries.length;i<ii;++i){const geometry=geometries[i];byGeometryType[geometry.getType().replace("Multi","")].push(geometry,style)}}else byGeometryType[type.replace("Multi","")].push(geometry,style)}}const zIndexKeys=Object.keys(featuresByZIndex).map(Number).sort(array.V_);for(let i=0,ii=zIndexKeys.length;i<ii;++i){const byGeometryType=featuresByZIndex[zIndexKeys[i]];for(const type in byGeometryType){const geomAndStyle=byGeometryType[type];for(let j=0,jj=geomAndStyle.length;j<jj;j+=2){renderer.setStyle(geomAndStyle[j+1]);for(let k=0,kk=transforms.length;k<kk;++k)renderer.setTransform(transforms[k]),renderer.drawGeometry(geomAndStyle[j])}}}return context.getImageData(0,0,canvas.width,canvas.height)}(size,transforms,this.renderedFeatures_,layer.getStyleFunction(),extent,resolution,rotation,getSquaredTolerance(resolution,this.renderedPixelRatio_),userProjection?projection:null)}resolve(function hitDetect(pixel,features,imageData){const resultFeatures=[];if(imageData){const x=Math.floor(.5*Math.round(pixel[0])),y=Math.floor(.5*Math.round(pixel[1])),index=4*((0,math.qE)(x,0,imageData.width-1)+(0,math.qE)(y,0,imageData.height-1)*imageData.width),r=imageData.data[index],g=imageData.data[index+1],i=imageData.data[index+2]+256*(g+256*r),indexFactor=Math.floor(16777215/features.length);i&&i%indexFactor===0&&resultFeatures.push(features[i/indexFactor-1])}return resultFeatures}(pixel,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(coordinate,frameState,hitTolerance,callback,matches){if(!this.replayGroup_)return;const resolution=frameState.viewState.resolution,rotation=frameState.viewState.rotation,layer=this.getLayer(),features={},declutter=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(coordinate,resolution,rotation,hitTolerance,function(feature,geometry,distanceSq){const key=(0,util.v6)(feature),match=features[key];if(match){if(!0!==match&&distanceSq<match.distanceSq){if(0===distanceSq)return features[key]=!0,matches.splice(matches.lastIndexOf(match),1),callback(feature,layer,geometry);match.geometry=geometry,match.distanceSq=distanceSq}}else{if(0===distanceSq)return features[key]=!0,callback(feature,layer,geometry);matches.push(features[key]={feature,layer,geometry,distanceSq,callback})}},declutter?frameState.declutter?.[declutter]?.all().map(item=>item.value):null)}handleFontsChanged(){const layer=this.getLayer();layer.getVisible()&&this.replayGroup_&&layer.changed()}handleStyleImageChange_(event){this.renderIfReadyAndVisible()}prepareFrame(frameState){const vectorLayer=this.getLayer(),vectorSource=vectorLayer.getSource();if(!vectorSource)return!1;const animating=frameState.viewHints[ViewHint.A.ANIMATING],interacting=frameState.viewHints[ViewHint.A.INTERACTING],updateWhileAnimating=vectorLayer.getUpdateWhileAnimating(),updateWhileInteracting=vectorLayer.getUpdateWhileInteracting();if(this.ready&&!updateWhileAnimating&&animating||!updateWhileInteracting&&interacting)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const frameStateExtent=frameState.extent,viewState=frameState.viewState,projection=viewState.projection,resolution=viewState.resolution,pixelRatio=frameState.pixelRatio,vectorLayerRevision=vectorLayer.getRevision(),vectorLayerRenderBuffer=vectorLayer.getRenderBuffer();let vectorLayerRenderOrder=vectorLayer.getRenderOrder();void 0===vectorLayerRenderOrder&&(vectorLayerRenderOrder=defaultOrder);const center=viewState.center.slice(),extent=(0,ol_extent.r)(frameStateExtent,vectorLayerRenderBuffer*resolution),renderedExtent=extent.slice(),loadExtents=[extent.slice()],projectionExtent=projection.getExtent();if(vectorSource.getWrapX()&&projection.canWrapX()&&!(0,ol_extent.ms)(projectionExtent,frameState.extent)){const worldWidth=(0,ol_extent.RG)(projectionExtent),gutter=Math.max((0,ol_extent.RG)(extent)/2,worldWidth);extent[0]=projectionExtent[0]-gutter,extent[2]=projectionExtent[2]+gutter,(0,coordinate.Li)(center,projection);const loadExtent=(0,ol_extent.Li)(loadExtents[0],projection);loadExtent[0]<projectionExtent[0]&&loadExtent[2]<projectionExtent[2]?loadExtents.push([loadExtent[0]+worldWidth,loadExtent[1],loadExtent[2]+worldWidth,loadExtent[3]]):loadExtent[0]>projectionExtent[0]&&loadExtent[2]>projectionExtent[2]&&loadExtents.push([loadExtent[0]-worldWidth,loadExtent[1],loadExtent[2]-worldWidth,loadExtent[3]])}if(this.ready&&this.renderedResolution_==resolution&&this.renderedRevision_==vectorLayerRevision&&this.renderedRenderOrder_==vectorLayerRenderOrder&&this.renderedFrameDeclutter_===!!frameState.declutter&&(0,ol_extent.ms)(this.wrappedRenderedExtent_,extent))return(0,array.aI)(this.renderedExtent_,renderedExtent)||(this.hitDetectionImageData_=null,this.renderedExtent_=renderedExtent),this.renderedCenter_=center,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const replayGroup=new canvas_BuilderGroup(getTolerance(resolution,pixelRatio),extent,resolution,pixelRatio),userProjection=(0,proj.Tf)();let userTransform;if(userProjection){for(let i=0,ii=loadExtents.length;i<ii;++i){const extent=loadExtents[i],userExtent=(0,proj.JR)(extent,projection);vectorSource.loadFeatures(userExtent,(0,proj.vN)(resolution,projection),userProjection)}userTransform=(0,proj.FO)(userProjection,projection)}else for(let i=0,ii=loadExtents.length;i<ii;++i)vectorSource.loadFeatures(loadExtents[i],resolution,projection);const squaredTolerance=getSquaredTolerance(resolution,pixelRatio);let ready=!0;const render=(feature,index)=>{let styles;const styleFunction=feature.getStyleFunction()||vectorLayer.getStyleFunction();if(styleFunction&&(styles=styleFunction(feature,resolution)),styles){const dirty=this.renderFeature(feature,squaredTolerance,styles,replayGroup,userTransform,this.getLayer().getDeclutter(),index);ready=ready&&!dirty}},userExtent=(0,proj.JR)(extent,projection),features=vectorSource.getFeaturesInExtent(userExtent);vectorLayerRenderOrder&&features.sort(vectorLayerRenderOrder);for(let i=0,ii=features.length;i<ii;++i)render(features[i],i);this.renderedFeatures_=features,this.ready=ready;const replayGroupInstructions=replayGroup.finish(),executorGroup=new canvas_ExecutorGroup(extent,resolution,pixelRatio,vectorSource.getOverlaps(),replayGroupInstructions,vectorLayer.getRenderBuffer(),!!frameState.declutter);return this.renderedResolution_=resolution,this.renderedRevision_=vectorLayerRevision,this.renderedRenderOrder_=vectorLayerRenderOrder,this.renderedFrameDeclutter_=!!frameState.declutter,this.renderedExtent_=renderedExtent,this.wrappedRenderedExtent_=extent,this.renderedCenter_=center,this.renderedProjection_=projection,this.renderedPixelRatio_=pixelRatio,this.replayGroup_=executorGroup,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(feature,squaredTolerance,styles,builderGroup,transform,declutter,index){if(!styles)return!1;let loading=!1;if(Array.isArray(styles))for(let i=0,ii=styles.length;i<ii;++i)loading=renderFeature(builderGroup,feature,styles[i],squaredTolerance,this.boundHandleStyleImageChange_,transform,declutter,index)||loading;else loading=renderFeature(builderGroup,feature,styles,squaredTolerance,this.boundHandleStyleImageChange_,transform,declutter,index);return loading}};var BaseVector=__webpack_require__("./node_modules/ol/layer/BaseVector.js");class VectorLayer extends BaseVector.A{constructor(options){super(options)}createRenderer(){return new canvas_VectorLayer(this)}}const Vector=VectorLayer},"./node_modules/ol/math.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function clamp(value,min,max){return Math.min(Math.max(value,min),max)}function squaredSegmentDistance(x,y,x1,y1,x2,y2){const dx=x2-x1,dy=y2-y1;if(0!==dx||0!==dy){const t=((x-x1)*dx+(y-y1)*dy)/(dx*dx+dy*dy);t>1?(x1=x2,y1=y2):t>0&&(x1+=dx*t,y1+=dy*t)}return squaredDistance(x,y,x1,y1)}function squaredDistance(x1,y1,x2,y2){const dx=x2-x1,dy=y2-y1;return dx*dx+dy*dy}function toDegrees(angleInRadians){return 180*angleInRadians/Math.PI}function toRadians(angleInDegrees){return angleInDegrees*Math.PI/180}function modulo(a,b){const r=a%b;return r*b<0?r+b:r}function lerp(a,b,x){return a+x*(b-a)}function toFixed(n,decimals){const factor=Math.pow(10,decimals);return Math.round(n*factor)/factor}function wrap(n,min,max){if(n>=min&&n<max)return n;const range=max-min;return((n-min)%range+range)%range+min}__webpack_require__.d(__webpack_exports__,{Cc:()=>lerp,LV:()=>wrap,Mg:()=>toFixed,Q1:()=>squaredSegmentDistance,eh:()=>toRadians,hG:()=>squaredDistance,qE:()=>clamp,xP:()=>modulo,xW:()=>toDegrees})},"./node_modules/ol/node_modules/rbush/index.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function quickselect(arr,k,left=0,right=arr.length-1,compare=defaultCompare){for(;right>left;){if(right-left>600){const n=right-left+1,m=k-left+1,z=Math.log(n),s=.5*Math.exp(2*z/3),sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);quickselect(arr,k,Math.max(left,Math.floor(k-m*s/n+sd)),Math.min(right,Math.floor(k+(n-m)*s/n+sd)),compare)}const t=arr[k];let i=left,j=right;for(swap(arr,left,k),compare(arr[right],t)>0&&swap(arr,left,right);i<j;){for(swap(arr,i,j),i++,j--;compare(arr[i],t)<0;)i++;for(;compare(arr[j],t)>0;)j--}0===compare(arr[left],t)?swap(arr,left,j):(j++,swap(arr,j,right)),j<=k&&(left=j+1),k<=j&&(right=j-1)}}function swap(arr,i,j){const tmp=arr[i];arr[i]=arr[j],arr[j]=tmp}function defaultCompare(a,b){return a<b?-1:a>b?1:0}__webpack_require__.d(__webpack_exports__,{A:()=>RBush});class RBush{constructor(maxEntries=9){this._maxEntries=Math.max(4,maxEntries),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(bbox){let node=this.data;const result=[];if(!intersects(bbox,node))return result;const toBBox=this.toBBox,nodesToSearch=[];for(;node;){for(let i=0;i<node.children.length;i++){const child=node.children[i],childBBox=node.leaf?toBBox(child):child;intersects(bbox,childBBox)&&(node.leaf?result.push(child):contains(bbox,childBBox)?this._all(child,result):nodesToSearch.push(child))}node=nodesToSearch.pop()}return result}collides(bbox){let node=this.data;if(!intersects(bbox,node))return!1;const nodesToSearch=[];for(;node;){for(let i=0;i<node.children.length;i++){const child=node.children[i],childBBox=node.leaf?this.toBBox(child):child;if(intersects(bbox,childBBox)){if(node.leaf||contains(bbox,childBBox))return!0;nodesToSearch.push(child)}}node=nodesToSearch.pop()}return!1}load(data){if(!data||!data.length)return this;if(data.length<this._minEntries){for(let i=0;i<data.length;i++)this.insert(data[i]);return this}let node=this._build(data.slice(),0,data.length-1,0);if(this.data.children.length)if(this.data.height===node.height)this._splitRoot(this.data,node);else{if(this.data.height<node.height){const tmpNode=this.data;this.data=node,node=tmpNode}this._insert(node,this.data.height-node.height-1,!0)}else this.data=node;return this}insert(item){return item&&this._insert(item,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(item,equalsFn){if(!item)return this;let node=this.data;const bbox=this.toBBox(item),path=[],indexes=[];let i,parent,goingUp;for(;node||path.length;){if(node||(node=path.pop(),parent=path[path.length-1],i=indexes.pop(),goingUp=!0),node.leaf){const index=findItem(item,node.children,equalsFn);if(-1!==index)return node.children.splice(index,1),path.push(node),this._condense(path),this}goingUp||node.leaf||!contains(node,bbox)?parent?(i++,node=parent.children[i],goingUp=!1):node=null:(path.push(node),indexes.push(i),i=0,parent=node,node=node.children[0])}return this}toBBox(item){return item}compareMinX(a,b){return a.minX-b.minX}compareMinY(a,b){return a.minY-b.minY}toJSON(){return this.data}fromJSON(data){return this.data=data,this}_all(node,result){const nodesToSearch=[];for(;node;)node.leaf?result.push(...node.children):nodesToSearch.push(...node.children),node=nodesToSearch.pop();return result}_build(items,left,right,height){const N=right-left+1;let node,M=this._maxEntries;if(N<=M)return node=createNode(items.slice(left,right+1)),calcBBox(node,this.toBBox),node;height||(height=Math.ceil(Math.log(N)/Math.log(M)),M=Math.ceil(N/Math.pow(M,height-1))),node=createNode([]),node.leaf=!1,node.height=height;const N2=Math.ceil(N/M),N1=N2*Math.ceil(Math.sqrt(M));multiSelect(items,left,right,N1,this.compareMinX);for(let i=left;i<=right;i+=N1){const right2=Math.min(i+N1-1,right);multiSelect(items,i,right2,N2,this.compareMinY);for(let j=i;j<=right2;j+=N2){const right3=Math.min(j+N2-1,right2);node.children.push(this._build(items,j,right3,height-1))}}return calcBBox(node,this.toBBox),node}_chooseSubtree(bbox,node,level,path){for(;path.push(node),!node.leaf&&path.length-1!==level;){let targetNode,minArea=1/0,minEnlargement=1/0;for(let i=0;i<node.children.length;i++){const child=node.children[i],area=bboxArea(child),enlargement=enlargedArea(bbox,child)-area;enlargement<minEnlargement?(minEnlargement=enlargement,minArea=area<minArea?area:minArea,targetNode=child):enlargement===minEnlargement&&area<minArea&&(minArea=area,targetNode=child)}node=targetNode||node.children[0]}return node}_insert(item,level,isNode){const bbox=isNode?item:this.toBBox(item),insertPath=[],node=this._chooseSubtree(bbox,this.data,level,insertPath);for(node.children.push(item),extend(node,bbox);level>=0&&insertPath[level].children.length>this._maxEntries;)this._split(insertPath,level),level--;this._adjustParentBBoxes(bbox,insertPath,level)}_split(insertPath,level){const node=insertPath[level],M=node.children.length,m=this._minEntries;this._chooseSplitAxis(node,m,M);const splitIndex=this._chooseSplitIndex(node,m,M),newNode=createNode(node.children.splice(splitIndex,node.children.length-splitIndex));newNode.height=node.height,newNode.leaf=node.leaf,calcBBox(node,this.toBBox),calcBBox(newNode,this.toBBox),level?insertPath[level-1].children.push(newNode):this._splitRoot(node,newNode)}_splitRoot(node,newNode){this.data=createNode([node,newNode]),this.data.height=node.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(node,m,M){let index,minOverlap=1/0,minArea=1/0;for(let i=m;i<=M-m;i++){const bbox1=distBBox(node,0,i,this.toBBox),bbox2=distBBox(node,i,M,this.toBBox),overlap=intersectionArea(bbox1,bbox2),area=bboxArea(bbox1)+bboxArea(bbox2);overlap<minOverlap?(minOverlap=overlap,index=i,minArea=area<minArea?area:minArea):overlap===minOverlap&&area<minArea&&(minArea=area,index=i)}return index||M-m}_chooseSplitAxis(node,m,M){const compareMinX=node.leaf?this.compareMinX:compareNodeMinX,compareMinY=node.leaf?this.compareMinY:compareNodeMinY;this._allDistMargin(node,m,M,compareMinX)<this._allDistMargin(node,m,M,compareMinY)&&node.children.sort(compareMinX)}_allDistMargin(node,m,M,compare){node.children.sort(compare);const toBBox=this.toBBox,leftBBox=distBBox(node,0,m,toBBox),rightBBox=distBBox(node,M-m,M,toBBox);let margin=bboxMargin(leftBBox)+bboxMargin(rightBBox);for(let i=m;i<M-m;i++){const child=node.children[i];extend(leftBBox,node.leaf?toBBox(child):child),margin+=bboxMargin(leftBBox)}for(let i=M-m-1;i>=m;i--){const child=node.children[i];extend(rightBBox,node.leaf?toBBox(child):child),margin+=bboxMargin(rightBBox)}return margin}_adjustParentBBoxes(bbox,path,level){for(let i=level;i>=0;i--)extend(path[i],bbox)}_condense(path){for(let siblings,i=path.length-1;i>=0;i--)0===path[i].children.length?i>0?(siblings=path[i-1].children,siblings.splice(siblings.indexOf(path[i]),1)):this.clear():calcBBox(path[i],this.toBBox)}}function findItem(item,items,equalsFn){if(!equalsFn)return items.indexOf(item);for(let i=0;i<items.length;i++)if(equalsFn(item,items[i]))return i;return-1}function calcBBox(node,toBBox){distBBox(node,0,node.children.length,toBBox,node)}function distBBox(node,k,p,toBBox,destNode){destNode||(destNode=createNode(null)),destNode.minX=1/0,destNode.minY=1/0,destNode.maxX=-1/0,destNode.maxY=-1/0;for(let i=k;i<p;i++){const child=node.children[i];extend(destNode,node.leaf?toBBox(child):child)}return destNode}function extend(a,b){return a.minX=Math.min(a.minX,b.minX),a.minY=Math.min(a.minY,b.minY),a.maxX=Math.max(a.maxX,b.maxX),a.maxY=Math.max(a.maxY,b.maxY),a}function compareNodeMinX(a,b){return a.minX-b.minX}function compareNodeMinY(a,b){return a.minY-b.minY}function bboxArea(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function bboxMargin(a){return a.maxX-a.minX+(a.maxY-a.minY)}function enlargedArea(a,b){return(Math.max(b.maxX,a.maxX)-Math.min(b.minX,a.minX))*(Math.max(b.maxY,a.maxY)-Math.min(b.minY,a.minY))}function intersectionArea(a,b){const minX=Math.max(a.minX,b.minX),minY=Math.max(a.minY,b.minY),maxX=Math.min(a.maxX,b.maxX),maxY=Math.min(a.maxY,b.maxY);return Math.max(0,maxX-minX)*Math.max(0,maxY-minY)}function contains(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function intersects(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function createNode(children){return{children,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(arr,left,right,n,compare){const stack=[left,right];for(;stack.length;){if((right=stack.pop())-(left=stack.pop())<=n)continue;const mid=left+Math.ceil((right-left)/n/2)*n;quickselect(arr,mid,left,right,compare),stack.push(left,mid,mid,right)}}},"./node_modules/ol/obj.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function clear(object){for(const property in object)delete object[property]}function isEmpty(object){let property;for(property in object)return!1;return!property}__webpack_require__.d(__webpack_exports__,{I:()=>clear,p:()=>isEmpty})},"./node_modules/ol/proj.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ig:()=>Units_METERS_PER_UNIT,Av:()=>createProjection,RJ:()=>disableCoordinateWarning,Ad:()=>fromUserCoordinate,SD:()=>fromUserExtent,Jt:()=>proj_get,RG:()=>getTransform,FO:()=>getTransformFromProjections,Tf:()=>getUserProjection,te:()=>toUserCoordinate,JR:()=>toUserExtent,vN:()=>toUserResolution});var console=__webpack_require__("./node_modules/ol/console.js"),ol_coordinate=__webpack_require__("./node_modules/ol/coordinate.js"),ol_extent=__webpack_require__("./node_modules/ol/extent.js");const Units_METERS_PER_UNIT={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};const proj_Projection=class Projection{constructor(options){this.code_=options.code,this.units_=options.units,this.extent_=void 0!==options.extent?options.extent:null,this.worldExtent_=void 0!==options.worldExtent?options.worldExtent:null,this.axisOrientation_=void 0!==options.axisOrientation?options.axisOrientation:"enu",this.global_=void 0!==options.global&&options.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=options.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=options.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Units_METERS_PER_UNIT[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(global){this.global_=global,this.canWrapX_=!(!global||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(tileGrid){this.defaultTileGrid_=tileGrid}setExtent(extent){this.extent_=extent,this.canWrapX_=!(!this.global_||!extent)}setWorldExtent(worldExtent){this.worldExtent_=worldExtent}setGetPointResolution(func){this.getPointResolutionFunc_=func}getPointResolutionFunc(){return this.getPointResolutionFunc_}},HALF_SIZE=6378137*Math.PI,EXTENT=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=6378137*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends proj_Projection{constructor(code){super({code,units:"m",extent:EXTENT,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(resolution,point){return resolution/Math.cosh(point[1]/6378137)}})}}const PROJECTIONS=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(input,output,dimension,stride){const length=input.length;dimension=dimension>1?dimension:2,stride=stride??dimension,void 0===output&&(output=dimension>2?input.slice():new Array(length));for(let i=0;i<length;i+=stride){output[i]=HALF_SIZE*input[i]/180;let y=6378137*Math.log(Math.tan(Math.PI*(+input[i+1]+90)/360));y>MAX_SAFE_Y?y=MAX_SAFE_Y:y<-MAX_SAFE_Y&&(y=-MAX_SAFE_Y),output[i+1]=y}return output}function toEPSG4326(input,output,dimension,stride){const length=input.length;dimension=dimension>1?dimension:2,stride=stride??dimension,void 0===output&&(output=dimension>2?input.slice():new Array(length));for(let i=0;i<length;i+=stride)output[i]=180*input[i]/HALF_SIZE,output[i+1]=360*Math.atan(Math.exp(input[i+1]/6378137))/Math.PI-90;return output}const epsg4326_EXTENT=[-180,-90,180,90],epsg4326_METERS_PER_UNIT=6378137*Math.PI/180;class EPSG4326Projection extends proj_Projection{constructor(code,axisOrientation){super({code,units:"degrees",extent:epsg4326_EXTENT,axisOrientation,global:!0,metersPerUnit:epsg4326_METERS_PER_UNIT,worldExtent:epsg4326_EXTENT})}}const epsg4326_PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache={};let transforms={};function transforms_add(source,destination,transformFn){const sourceCode=source.getCode(),destinationCode=destination.getCode();sourceCode in transforms||(transforms[sourceCode]={}),transforms[sourceCode][destinationCode]=transformFn}function transforms_get(sourceCode,destinationCode){return sourceCode in transforms&&destinationCode in transforms[sourceCode]?transforms[sourceCode][destinationCode]:null}var math=__webpack_require__("./node_modules/ol/math.js");const K0=.9996,E=.00669438,E2=E*E,E3=E2*E,E_P2=E/(1-E),SQRT_E=Math.sqrt(1-E),_E=(1-SQRT_E)/(1+SQRT_E),_E2=_E*_E,_E3=_E2*_E,_E4=_E3*_E,_E5=_E4*_E,M1=.9983242984503243,M4=35*E3/3072,P2=1.5*_E-27/32*_E3+269/512*_E5,P3=21/16*_E2-55/32*_E4,P4=151/96*_E3-417/128*_E5,P5=1097/512*_E4,R=6378137;function toLonLat(easting,northing,zone){const x=easting-5e5,mu=(zone.north?northing:northing-1e7)/K0/(R*M1),pRad=mu+P2*Math.sin(2*mu)+P3*Math.sin(4*mu)+P4*Math.sin(6*mu)+P5*Math.sin(8*mu),pSin=Math.sin(pRad),pSin2=pSin*pSin,pCos=Math.cos(pRad),pTan=pSin/pCos,pTan2=pTan*pTan,pTan4=pTan2*pTan2,epSin=1-E*pSin2,epSinSqrt=Math.sqrt(1-E*pSin2),c=E_P2*pCos**2,c2=c*c,d=x/(R/epSinSqrt*K0),d2=d*d,d3=d2*d,d4=d3*d,d5=d4*d,latitude=pRad-pTan/((1-E)/epSin)*(d2/2-d4/24*(5+3*pTan2+10*c-4*c2-9*E_P2))+d5*d/720*(61+90*pTan2+298*c+45*pTan4-252*E_P2-3*c2);let longitude=(d-d3/6*(1+2*pTan2+c)+d5/120*(5-2*c+28*pTan2-3*c2+8*E_P2+24*pTan4))/pCos;return longitude=(0,math.LV)(longitude+(0,math.eh)(zoneToCentralLongitude(zone.number)),-Math.PI,Math.PI),[(0,math.xW)(longitude),(0,math.xW)(latitude)]}function fromLonLat(longitude,latitude,zone){longitude=(0,math.LV)(longitude,-180,180),latitude<-80?latitude=-80:latitude>84&&(latitude=84);const latRad=(0,math.eh)(latitude),latSin=Math.sin(latRad),latCos=Math.cos(latRad),latTan=latSin/latCos,latTan2=latTan*latTan,latTan4=latTan2*latTan2,lonRad=(0,math.eh)(longitude),centralLon=zoneToCentralLongitude(zone.number),centralLonRad=(0,math.eh)(centralLon),n=R/Math.sqrt(1-E*latSin**2),c=E_P2*latCos**2,a=latCos*(0,math.LV)(lonRad-centralLonRad,-Math.PI,Math.PI),a2=a*a,a3=a2*a,a4=a3*a,a5=a4*a,a6=a5*a,m=R*(M1*latRad-.002514607064228144*Math.sin(2*latRad)+26390466021299826e-22*Math.sin(4*latRad)-M4*Math.sin(6*latRad)),easting=K0*n*(a+a3/6*(1-latTan2+c)+a5/120*(5-18*latTan2+latTan4+72*c-58*E_P2))+5e5;let northing=K0*(m+n*latTan*(a2/2+a4/24*(5-latTan2+9*c+4*c**2)+a6/720*(61-58*latTan2+latTan4+600*c-330*E_P2)));return zone.north||(northing+=1e7),[easting,northing]}function zoneToCentralLongitude(zone){return 6*(zone-1)-180+3}const epsgRegExes=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function zoneFromCode(code){let epsgId=0;for(const re of epsgRegExes){const match=code.match(re);if(match){epsgId=parseInt(match[1]);break}}if(!epsgId)return null;let number=0,north=!1;return epsgId>32700&&epsgId<32761?number=epsgId-32700:epsgId>32600&&epsgId<32661&&(north=!0,number=epsgId-32600),number?{number,north}:null}function makeTransformFunction(transformer,zone){return function(input,output,dimension,stride){const length=input.length;dimension=dimension>1?dimension:2,stride=stride??dimension,output||(output=dimension>2?input.slice():new Array(length));for(let i=0;i<length;i+=stride){const x=input[i],y=input[i+1],coord=transformer(x,y,zone);output[i]=coord[0],output[i+1]=coord[1]}return output}}const transformFactories=[function makeTransforms(projection){const zone=zoneFromCode(projection.getCode());return zone?{forward:makeTransformFunction(fromLonLat,zone),inverse:makeTransformFunction(toLonLat,zone)}:null}],projectionFactories=[function makeProjection(code){return zoneFromCode(code)?new proj_Projection({code,units:"m"}):null}];let showCoordinateWarning=!0;function disableCoordinateWarning(disable){showCoordinateWarning=!(void 0===disable||disable)}function cloneTransform(input,output){if(void 0!==output)for(let i=0,ii=input.length;i<ii;++i)output[i]=input[i];else output=input.slice();return output}function addProjection(projection){!function add(code,projection){cache[code]=projection}(projection.getCode(),projection),transforms_add(projection,projection,cloneTransform)}function proj_get(projectionLike){if("string"!=typeof projectionLike)return projectionLike;const projection=function get(code){return cache[code]||cache[code.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(projectionLike);if(projection)return projection;for(const makeProjection of projectionFactories){const projection=makeProjection(projectionLike);if(projection)return projection}return null}function addEquivalentProjections(projections){!function addProjections(projections){projections.forEach(addProjection)}(projections),projections.forEach(function(source){projections.forEach(function(destination){source!==destination&&transforms_add(source,destination,cloneTransform)})})}function createProjection(projection,defaultCode){return projection?"string"==typeof projection?proj_get(projection):projection:proj_get(defaultCode)}function getTransformFromProjections(source,destination){const sourceCode=source.getCode(),destinationCode=destination.getCode();let transformFunc=transforms_get(sourceCode,destinationCode);if(transformFunc)return transformFunc;let sourceTransforms=null,destinationTransforms=null;for(const makeTransforms of transformFactories)sourceTransforms||(sourceTransforms=makeTransforms(source)),destinationTransforms||(destinationTransforms=makeTransforms(destination));if(!sourceTransforms&&!destinationTransforms)return null;if(destinationTransforms)if(sourceTransforms)transformFunc=composeTransformFuncs(sourceTransforms.inverse,destinationTransforms.forward);else{const fromSource=transforms_get(sourceCode,"EPSG:4326");fromSource&&(transformFunc=composeTransformFuncs(fromSource,destinationTransforms.forward))}else{const toDestination=transforms_get("EPSG:4326",destinationCode);toDestination&&(transformFunc=composeTransformFuncs(sourceTransforms.inverse,toDestination))}return transformFunc&&(addProjection(source),addProjection(destination),transforms_add(source,destination,transformFunc)),transformFunc}function composeTransformFuncs(t1,t2){return function(input,output,dimensions,stride){return output=t1(input,output,dimensions,stride),t2(output,output,dimensions,stride)}}function getTransform(source,destination){return getTransformFromProjections(proj_get(source),proj_get(destination))}function transform(coordinate,source,destination){const transformFunc=getTransform(source,destination);if(!transformFunc){const sourceCode=proj_get(source).getCode(),destinationCode=proj_get(destination).getCode();throw new Error(`No transform available between ${sourceCode} and ${destinationCode}`)}return transformFunc(coordinate,void 0,coordinate.length)}function transformExtent(extent,source,destination,stops){const transformFunc=getTransform(source,destination);return(0,ol_extent.NW)(extent,transformFunc,void 0,stops)}let userProjection=null;function getUserProjection(){return userProjection}function toUserCoordinate(coordinate,sourceProjection){return userProjection?transform(coordinate,sourceProjection,userProjection):coordinate}function fromUserCoordinate(coordinate,destProjection){return userProjection?transform(coordinate,userProjection,destProjection):(showCoordinateWarning&&!(0,ol_coordinate.aI)(coordinate,[0,0])&&coordinate[0]>=-180&&coordinate[0]<=180&&coordinate[1]>=-90&&coordinate[1]<=90&&(showCoordinateWarning=!1,(0,console.R8)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),coordinate)}function toUserExtent(extent,sourceProjection){return userProjection?transformExtent(extent,sourceProjection,userProjection):extent}function fromUserExtent(extent,destProjection){return userProjection?transformExtent(extent,userProjection,destProjection):extent}function toUserResolution(resolution,sourceProjection){if(!userProjection)return resolution;const sourceMetersPerUnit=proj_get(sourceProjection).getMetersPerUnit(),userMetersPerUnit=userProjection.getMetersPerUnit();return sourceMetersPerUnit&&userMetersPerUnit?resolution*sourceMetersPerUnit/userMetersPerUnit:resolution}!function addCommon(){addEquivalentProjections(PROJECTIONS),addEquivalentProjections(epsg4326_PROJECTIONS),function addEquivalentTransforms(projections1,projections2,forwardTransform,inverseTransform){projections1.forEach(function(projection1){projections2.forEach(function(projection2){transforms_add(projection1,projection2,forwardTransform),transforms_add(projection2,projection1,inverseTransform)})})}(epsg4326_PROJECTIONS,PROJECTIONS,fromEPSG4326,toEPSG4326)}()},"./node_modules/ol/render/Event.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _events_Event_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/events/Event.js");class RenderEvent extends _events_Event_js__WEBPACK_IMPORTED_MODULE_0__.Ay{constructor(type,inversePixelTransform,frameState,context){super(type),this.inversePixelTransform=inversePixelTransform,this.frameState=frameState,this.context=context}}const __WEBPACK_DEFAULT_EXPORT__=RenderEvent},"./node_modules/ol/render/EventType.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},"./node_modules/ol/render/canvas.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Jw:()=>drawImageOrLabel,M8:()=>defaultTextBaseline,MY:()=>defaultTextAlign,NT:()=>defaultStrokeStyle,Oq:()=>defaultLineDash,TA:()=>measureAndCacheTextWidth,Tq:()=>defaultPadding,ZV:()=>defaultFont,_K:()=>defaultLineJoin,_m:()=>defaultLineCap,aq:()=>defaultLineWidth,eL:()=>defaultMiterLimit,fZ:()=>registerFont,jT:()=>getTextDimensions,qY:()=>defaultFillStyle,vk:()=>defaultLineDashOffset,yY:()=>checkedFonts});var _Object_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/Object.js"),_css_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/css.js"),_dom_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/dom.js"),_has_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/has.js"),_obj_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/obj.js");const defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new _Object_js__WEBPACK_IMPORTED_MODULE_0__.A;let measureFont,measureContext=null;const textHeights={},genericFontFamilies=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function getFontKey(style,weight,family){return`${style} ${weight} 16px "${family}"`}const registerFont=function(){let timeout,fontFaceSet;async function isAvailable(fontSpec){await fontFaceSet.ready;const fontFaces=await fontFaceSet.load(fontSpec);if(0===fontFaces.length)return!1;const font=(0,_css_js__WEBPACK_IMPORTED_MODULE_1__.K5)(fontSpec),checkFamily=font.families[0].toLowerCase(),checkWeight=font.weight;return fontFaces.some(f=>{const family=f.family.replace(/^['"]|['"]$/g,"").toLowerCase(),weight=_css_js__WEBPACK_IMPORTED_MODULE_1__.NM[f.weight]||f.weight;return family===checkFamily&&f.style===font.style&&weight==checkWeight})}async function check(){await fontFaceSet.ready;let done=!0;const checkedFontsProperties=checkedFonts.getProperties(),fonts=Object.keys(checkedFontsProperties).filter(key=>checkedFontsProperties[key]<100);for(let i=fonts.length-1;i>=0;--i){const font=fonts[i];let currentRetries=checkedFontsProperties[font];currentRetries<100&&(await isAvailable(font)?((0,_obj_js__WEBPACK_IMPORTED_MODULE_4__.I)(textHeights),checkedFonts.set(font,100)):(currentRetries+=10,checkedFonts.set(font,currentRetries,!0),currentRetries<100&&(done=!1)))}timeout=void 0,done||(timeout=setTimeout(check,100))}return async function(fontSpec){fontFaceSet||(fontFaceSet=_has_js__WEBPACK_IMPORTED_MODULE_3__.Wl?self.fonts:document.fonts);const font=(0,_css_js__WEBPACK_IMPORTED_MODULE_1__.K5)(fontSpec);if(!font)return;const families=font.families;let needCheck=!1;for(const family of families){if(genericFontFamilies.has(family))continue;const key=getFontKey(font.style,font.weight,family);void 0===checkedFonts.get(key)&&(checkedFonts.set(key,0,!0),needCheck=!0)}needCheck&&(clearTimeout(timeout),timeout=setTimeout(check,100))}}(),measureTextHeight=function(){let measureElement;return function(fontSpec){let height=textHeights[fontSpec];if(null==height){if(_has_js__WEBPACK_IMPORTED_MODULE_3__.Wl){const font=(0,_css_js__WEBPACK_IMPORTED_MODULE_1__.K5)(fontSpec),metrics=measureText(fontSpec,"g");height=(isNaN(Number(font.lineHeight))?1.2:Number(font.lineHeight))*(metrics.actualBoundingBoxAscent+metrics.actualBoundingBoxDescent)}else measureElement||(measureElement=document.createElement("div"),measureElement.innerHTML="M",measureElement.style.minHeight="0",measureElement.style.maxHeight="none",measureElement.style.height="auto",measureElement.style.padding="0",measureElement.style.border="none",measureElement.style.position="absolute",measureElement.style.display="block",measureElement.style.left="-99999px"),measureElement.style.font=fontSpec,document.body.appendChild(measureElement),height=measureElement.offsetHeight,document.body.removeChild(measureElement);textHeights[fontSpec]=height}return height}}();function measureText(font,text){return measureContext||(measureContext=(0,_dom_js__WEBPACK_IMPORTED_MODULE_2__.Y)(1,1)),font!=measureFont&&(measureContext.font=font,measureFont=measureContext.font),measureContext.measureText(text)}function measureTextWidth(font,text){return measureText(font,text).width}function measureAndCacheTextWidth(font,text,cache){if(text in cache)return cache[text];const width=text.split("\n").reduce((prev,curr)=>Math.max(prev,measureTextWidth(font,curr)),0);return cache[text]=width,width}function getTextDimensions(baseStyle,chunks){const widths=[],heights=[],lineWidths=[];let width=0,lineWidth=0,height=0,lineHeight=0;for(let i=0,ii=chunks.length;i<=ii;i+=2){const text=chunks[i];if("\n"===text||i===ii){width=Math.max(width,lineWidth),lineWidths.push(lineWidth),lineWidth=0,height+=lineHeight,lineHeight=0;continue}const font=chunks[i+1]||baseStyle.font,currentWidth=measureTextWidth(font,text);widths.push(currentWidth),lineWidth+=currentWidth;const currentHeight=measureTextHeight(font);heights.push(currentHeight),lineHeight=Math.max(lineHeight,currentHeight)}return{width,height,widths,heights,lineWidths}}function drawImageOrLabel(context,transform,opacity,labelOrImage,originX,originY,w,h,x,y,scale){context.save(),1!==opacity&&(void 0===context.globalAlpha?context.globalAlpha=context=>context.globalAlpha*=opacity:context.globalAlpha*=opacity),transform&&context.transform.apply(context,transform),labelOrImage.contextInstructions?(context.translate(x,y),context.scale(scale[0],scale[1]),function executeLabelInstructions(label,context){const contextInstructions=label.contextInstructions;for(let i=0,ii=contextInstructions.length;i<ii;i+=2)Array.isArray(contextInstructions[i+1])?context[contextInstructions[i]].apply(context,contextInstructions[i+1]):context[contextInstructions[i]]=contextInstructions[i+1]}(labelOrImage,context)):scale[0]<0||scale[1]<0?(context.translate(x,y),context.scale(scale[0],scale[1]),context.drawImage(labelOrImage,originX,originY,w,h,0,0,w,h)):context.drawImage(labelOrImage,originX,originY,w,h,x,y,w*scale[0],h*scale[1]),context.restore()}},"./node_modules/ol/rotationconstraint.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{a$:()=>createSnapToN,b8:()=>disable,cq:()=>createSnapToZero,dv:()=>none});var _math_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/math.js");function disable(rotation){if(void 0!==rotation)return 0}function none(rotation){if(void 0!==rotation)return rotation}function createSnapToN(n){const theta=2*Math.PI/n;return function(rotation,isMoving){return isMoving?rotation:void 0!==rotation?rotation=Math.floor(rotation/theta+.5)*theta:void 0}}function createSnapToZero(tolerance){const t=void 0===tolerance?(0,_math_js__WEBPACK_IMPORTED_MODULE_0__.eh)(5):tolerance;return function(rotation,isMoving){return isMoving||void 0===rotation?rotation:Math.abs(rotation)<=t?0:rotation}}},"./node_modules/ol/size.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function hasArea(size){return size[0]>0&&size[1]>0}function toSize(size,dest){return Array.isArray(size)?size:(void 0===dest?dest=[size,size]:(dest[0]=size,dest[1]=size),dest)}__webpack_require__.d(__webpack_exports__,{Ie:()=>hasArea,xq:()=>toSize})},"./node_modules/ol/source/Vector.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Vector});var Collection=__webpack_require__("./node_modules/ol/Collection.js"),CollectionEventType=__webpack_require__("./node_modules/ol/CollectionEventType.js"),ObjectEventType=__webpack_require__("./node_modules/ol/ObjectEventType.js"),array=__webpack_require__("./node_modules/ol/array.js"),asserts=__webpack_require__("./node_modules/ol/asserts.js"),Event=__webpack_require__("./node_modules/ol/events/Event.js"),EventType=__webpack_require__("./node_modules/ol/events/EventType.js"),events=__webpack_require__("./node_modules/ol/events.js"),ol_extent=__webpack_require__("./node_modules/ol/extent.js");let withCredentials=!1;function xhr(url,format){return function(extent,resolution,projection,success,failure){!function loadFeaturesXhr(url,format,extent,resolution,projection,success,failure){const xhr=new XMLHttpRequest;xhr.open("GET","function"==typeof url?url(extent,resolution,projection):url,!0),"arraybuffer"==format.getType()&&(xhr.responseType="arraybuffer"),xhr.withCredentials=withCredentials,xhr.onload=function(event){if(!xhr.status||xhr.status>=200&&xhr.status<300){const type=format.getType();try{let source;"text"==type||"json"==type?source=xhr.responseText:"xml"==type?source=xhr.responseXML||xhr.responseText:"arraybuffer"==type&&(source=xhr.response),source?success(format.readFeatures(source,{extent,featureProjection:projection}),format.readProjection(source)):failure()}catch{failure()}}else failure()},xhr.onerror=failure,xhr.send()}(url,format,extent,resolution,projection,(features,dataProjection)=>{this.addFeatures(features),void 0!==success&&success(features)},()=>{this.changed(),void 0!==failure&&failure()})}}var functions=__webpack_require__("./node_modules/ol/functions.js"),proj=__webpack_require__("./node_modules/ol/proj.js");function loadingstrategy_all(extent,resolution){return[[-1/0,-1/0,1/0,1/0]]}var obj=__webpack_require__("./node_modules/ol/obj.js"),center=__webpack_require__("./node_modules/ol/geom/flat/center.js"),interiorpoint=__webpack_require__("./node_modules/ol/geom/flat/interiorpoint.js"),interpolate=__webpack_require__("./node_modules/ol/geom/flat/interpolate.js"),orient=__webpack_require__("./node_modules/ol/geom/flat/orient.js"),simplify=__webpack_require__("./node_modules/ol/geom/flat/simplify.js"),transform=__webpack_require__("./node_modules/ol/geom/flat/transform.js"),ol_transform=__webpack_require__("./node_modules/ol/transform.js");const tmpTransform=(0,ol_transform.vt)();class RenderFeature{constructor(type,flatCoordinates,ends,stride,properties,id){this.styleFunction,this.extent_,this.id_=id,this.type_=type,this.flatCoordinates_=flatCoordinates,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=ends||null,this.properties_=properties,this.squaredTolerance_,this.stride_=stride,this.simplifiedGeometry_}get(key){return this.properties_[key]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,ol_extent.dP)(this.flatCoordinates_):(0,ol_extent.Vy)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const flatCenter=(0,ol_extent.q1)(this.getExtent());this.flatInteriorPoints_=(0,interiorpoint.J)(this.flatCoordinates_,0,this.ends_,2,flatCenter,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const ends=(0,orient.yJ)(this.flatCoordinates_,this.ends_),flatCenters=(0,center.C)(this.flatCoordinates_,0,ends,2);this.flatInteriorPoints_=(0,interiorpoint.p)(this.flatCoordinates_,0,ends,2,flatCenters)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,interpolate.SH)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const flatCoordinates=this.flatCoordinates_;let offset=0;const ends=this.ends_;for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i],midpoint=(0,interpolate.SH)(flatCoordinates,offset,end,2,.5);(0,array.X$)(this.flatMidpoints_,midpoint),offset=end}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(squaredTolerance){return this}simplifyTransformed(squaredTolerance,transform){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(projection){const pixelExtent=(projection=(0,proj.Jt)(projection)).getExtent(),projectedExtent=projection.getWorldExtent();if(pixelExtent&&projectedExtent){const scale=(0,ol_extent.Oq)(projectedExtent)/(0,ol_extent.Oq)(pixelExtent);(0,ol_transform.Zz)(tmpTransform,projectedExtent[0],projectedExtent[3],scale,-scale,0,0,0),(0,transform.Rc)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}applyTransform(transformFn){transformFn(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new RenderFeature(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=(0,functions.B4)((squaredTolerance,transform)=>{if(squaredTolerance===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),transform&&this.simplifiedGeometry_.applyTransform(transform);const simplifiedFlatCoordinates=this.simplifiedGeometry_.getFlatCoordinates();let simplifiedEnds;switch(this.type_){case"LineString":simplifiedFlatCoordinates.length=(0,simplify.P4)(simplifiedFlatCoordinates,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,squaredTolerance,simplifiedFlatCoordinates,0),simplifiedEnds=[simplifiedFlatCoordinates.length];break;case"MultiLineString":simplifiedEnds=[],simplifiedFlatCoordinates.length=(0,simplify.AL)(simplifiedFlatCoordinates,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,squaredTolerance,simplifiedFlatCoordinates,0,simplifiedEnds);break;case"Polygon":simplifiedEnds=[],simplifiedFlatCoordinates.length=(0,simplify.Hg)(simplifiedFlatCoordinates,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(squaredTolerance),simplifiedFlatCoordinates,0,simplifiedEnds)}return simplifiedEnds&&(this.simplifiedGeometry_=new RenderFeature(this.type_,simplifiedFlatCoordinates,simplifiedEnds,2,this.properties_,this.id_)),this.squaredTolerance_=squaredTolerance,this.simplifiedGeometry_}),this}}RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;const render_Feature=RenderFeature;var rbush=__webpack_require__("./node_modules/ol/node_modules/rbush/index.js"),util=__webpack_require__("./node_modules/ol/util.js");const structs_RBush=class RBush{constructor(maxEntries){this.rbush_=new rbush.A(maxEntries),this.items_={}}insert(extent,value){const item={minX:extent[0],minY:extent[1],maxX:extent[2],maxY:extent[3],value};this.rbush_.insert(item),this.items_[(0,util.v6)(value)]=item}load(extents,values){const items=new Array(values.length);for(let i=0,l=values.length;i<l;i++){const extent=extents[i],value=values[i],item={minX:extent[0],minY:extent[1],maxX:extent[2],maxY:extent[3],value};items[i]=item,this.items_[(0,util.v6)(value)]=item}this.rbush_.load(items)}remove(value){const uid=(0,util.v6)(value),item=this.items_[uid];return delete this.items_[uid],null!==this.rbush_.remove(item)}update(extent,value){const item=this.items_[(0,util.v6)(value)],bbox=[item.minX,item.minY,item.maxX,item.maxY];(0,ol_extent.aI)(bbox,extent)||(this.remove(value),this.insert(extent,value))}getAll(){return this.rbush_.all().map(function(item){return item.value})}getInExtent(extent){const bbox={minX:extent[0],minY:extent[1],maxX:extent[2],maxY:extent[3]};return this.rbush_.search(bbox).map(function(item){return item.value})}forEach(callback){return this.forEach_(this.getAll(),callback)}forEachInExtent(extent,callback){return this.forEach_(this.getInExtent(extent),callback)}forEach_(values,callback){let result;for(let i=0,l=values.length;i<l;i++)if(result=callback(values[i]),result)return result;return result}isEmpty(){return(0,obj.p)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(extent){const data=this.rbush_.toJSON();return(0,ol_extent.N)(data.minX,data.minY,data.maxX,data.maxY,extent)}concat(rbush){this.rbush_.load(rbush.rbush_.all());for(const i in rbush.items_)this.items_[i]=rbush.items_[i]}};var ol_Object=__webpack_require__("./node_modules/ol/Object.js");class Source extends ol_Object.A{constructor(options){super(),this.projection=(0,proj.Jt)(options.projection),this.attributions_=adaptAttributions(options.attributions),this.attributionsCollapsible_=options.attributionsCollapsible??!0,this.loading=!1,this.state_=void 0!==options.state?options.state:"ready",this.wrapX_=void 0!==options.wrapX&&options.wrapX,this.interpolate_=!!options.interpolate,this.viewResolver=null,this.viewRejector=null;const self=this;this.viewPromise_=new Promise(function(resolve,reject){self.viewResolver=resolve,self.viewRejector=reject})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(projection){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(attributions){this.attributions_=adaptAttributions(attributions),this.changed()}setState(state){this.state_=state,this.changed()}}function adaptAttributions(attributionLike){return attributionLike?"function"==typeof attributionLike?attributionLike:(Array.isArray(attributionLike)||(attributionLike=[attributionLike]),frameState=>attributionLike):null}const source_Source=Source,VectorEventType_ADDFEATURE="addfeature",VectorEventType_CHANGEFEATURE="changefeature",VectorEventType_CLEAR="clear",VectorEventType_REMOVEFEATURE="removefeature",VectorEventType_FEATURESLOADSTART="featuresloadstart",VectorEventType_FEATURESLOADEND="featuresloadend",VectorEventType_FEATURESLOADERROR="featuresloaderror";class VectorSourceEvent extends Event.Ay{constructor(type,feature,features){super(type),this.feature=feature,this.features=features}}const Vector=class VectorSource extends source_Source{constructor(options){super({attributions:(options=options||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===options.wrapX||options.wrapX}),this.on,this.once,this.un,this.loader_=functions.tV,this.format_=options.format||null,this.overlaps_=void 0===options.overlaps||options.overlaps,this.url_=options.url,void 0!==options.loader?this.loader_=options.loader:void 0!==this.url_&&((0,asserts.v)(this.format_,"`format` must be set when `url` is set"),this.loader_=xhr(this.url_,this.format_)),this.strategy_=void 0!==options.strategy?options.strategy:loadingstrategy_all;const useSpatialIndex=void 0===options.useSpatialIndex||options.useSpatialIndex;let collection,features;this.featuresRtree_=useSpatialIndex?new structs_RBush:null,this.loadedExtentsRtree_=new structs_RBush,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(options.features)?features=options.features:options.features&&(collection=options.features,features=collection.getArray()),useSpatialIndex||void 0!==collection||(collection=new Collection.A(features)),void 0!==features&&this.addFeaturesInternal(features),void 0!==collection&&this.bindFeaturesCollection_(collection)}addFeature(feature){this.addFeatureInternal(feature),this.changed()}addFeatureInternal(feature){const featureKey=(0,util.v6)(feature);if(!this.addToIndex_(featureKey,feature))return void(this.featuresCollection_&&this.featuresCollection_.remove(feature));this.setupChangeEvents_(featureKey,feature);const geometry=feature.getGeometry();if(geometry){const extent=geometry.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(extent,feature)}else this.nullGeometryFeatures_[featureKey]=feature;this.dispatchEvent(new VectorSourceEvent(VectorEventType_ADDFEATURE,feature))}setupChangeEvents_(featureKey,feature){feature instanceof render_Feature||(this.featureChangeKeys_[featureKey]=[(0,events.KT)(feature,EventType.A.CHANGE,this.handleFeatureChange_,this),(0,events.KT)(feature,ObjectEventType.A.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(featureKey,feature){let valid=!0;if(void 0!==feature.getId()){const id=String(feature.getId());if(id in this.idIndex_)if(feature instanceof render_Feature){const indexedFeature=this.idIndex_[id];indexedFeature instanceof render_Feature?Array.isArray(indexedFeature)?indexedFeature.push(feature):this.idIndex_[id]=[indexedFeature,feature]:valid=!1}else valid=!1;else this.idIndex_[id]=feature}return valid&&((0,asserts.v)(!(featureKey in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[featureKey]=feature),valid}addFeatures(features){this.addFeaturesInternal(features),this.changed()}addFeaturesInternal(features){const extents=[],newFeatures=[],geometryFeatures=[];for(let i=0,length=features.length;i<length;i++){const feature=features[i],featureKey=(0,util.v6)(feature);this.addToIndex_(featureKey,feature)&&newFeatures.push(feature)}for(let i=0,length=newFeatures.length;i<length;i++){const feature=newFeatures[i],featureKey=(0,util.v6)(feature);this.setupChangeEvents_(featureKey,feature);const geometry=feature.getGeometry();if(geometry){const extent=geometry.getExtent();extents.push(extent),geometryFeatures.push(feature)}else this.nullGeometryFeatures_[featureKey]=feature}if(this.featuresRtree_&&this.featuresRtree_.load(extents,geometryFeatures),this.hasListener(VectorEventType_ADDFEATURE))for(let i=0,length=newFeatures.length;i<length;i++)this.dispatchEvent(new VectorSourceEvent(VectorEventType_ADDFEATURE,newFeatures[i]))}bindFeaturesCollection_(collection){let modifyingCollection=!1;this.addEventListener(VectorEventType_ADDFEATURE,function(evt){modifyingCollection||(modifyingCollection=!0,collection.push(evt.feature),modifyingCollection=!1)}),this.addEventListener(VectorEventType_REMOVEFEATURE,function(evt){modifyingCollection||(modifyingCollection=!0,collection.remove(evt.feature),modifyingCollection=!1)}),collection.addEventListener(CollectionEventType.A.ADD,evt=>{modifyingCollection||(modifyingCollection=!0,this.addFeature(evt.element),modifyingCollection=!1)}),collection.addEventListener(CollectionEventType.A.REMOVE,evt=>{modifyingCollection||(modifyingCollection=!0,this.removeFeature(evt.element),modifyingCollection=!1)}),this.featuresCollection_=collection}clear(fast){if(fast){for(const featureId in this.featureChangeKeys_){this.featureChangeKeys_[featureId].forEach(events.JH)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(feature=>{this.removeFeatureInternal(feature)});for(const id in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[id])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const clearEvent=new VectorSourceEvent(VectorEventType_CLEAR);this.dispatchEvent(clearEvent),this.changed()}forEachFeature(callback){if(this.featuresRtree_)return this.featuresRtree_.forEach(callback);this.featuresCollection_&&this.featuresCollection_.forEach(callback)}forEachFeatureAtCoordinateDirect(coordinate,callback){const extent=[coordinate[0],coordinate[1],coordinate[0],coordinate[1]];return this.forEachFeatureInExtent(extent,function(feature){const geometry=feature.getGeometry();if(geometry instanceof render_Feature||geometry.intersectsCoordinate(coordinate))return callback(feature)})}forEachFeatureInExtent(extent,callback){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(extent,callback);this.featuresCollection_&&this.featuresCollection_.forEach(callback)}forEachFeatureIntersectingExtent(extent,callback){return this.forEachFeatureInExtent(extent,function(feature){const geometry=feature.getGeometry();if(geometry instanceof render_Feature||geometry.intersectsExtent(extent)){const result=callback(feature);if(result)return result}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let features;return this.featuresCollection_?features=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(features=this.featuresRtree_.getAll(),(0,obj.p)(this.nullGeometryFeatures_)||(0,array.X$)(features,Object.values(this.nullGeometryFeatures_))),features}getFeaturesAtCoordinate(coordinate){const features=[];return this.forEachFeatureAtCoordinateDirect(coordinate,function(feature){features.push(feature)}),features}getFeaturesInExtent(extent,projection){if(this.featuresRtree_){if(!(projection&&projection.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(extent);const extents=(0,ol_extent.QJ)(extent,projection);return[].concat(...extents.map(anExtent=>this.featuresRtree_.getInExtent(anExtent)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(coordinate,filter){const x=coordinate[0],y=coordinate[1];let closestFeature=null;const closestPoint=[NaN,NaN];let minSquaredDistance=1/0;const extent=[-1/0,-1/0,1/0,1/0];return filter=filter||functions.rT,this.featuresRtree_.forEachInExtent(extent,function(feature){if(filter(feature)){const geometry=feature.getGeometry(),previousMinSquaredDistance=minSquaredDistance;if(minSquaredDistance=geometry instanceof render_Feature?0:geometry.closestPointXY(x,y,closestPoint,minSquaredDistance),minSquaredDistance<previousMinSquaredDistance){closestFeature=feature;const minDistance=Math.sqrt(minSquaredDistance);extent[0]=x-minDistance,extent[1]=y-minDistance,extent[2]=x+minDistance,extent[3]=y+minDistance}}}),closestFeature}getExtent(extent){return this.featuresRtree_.getExtent(extent)}getFeatureById(id){const feature=this.idIndex_[id.toString()];return void 0!==feature?feature:null}getFeatureByUid(uid){const feature=this.uidIndex_[uid];return void 0!==feature?feature:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(event){const feature=event.target,featureKey=(0,util.v6)(feature),geometry=feature.getGeometry();if(geometry){const extent=geometry.getExtent();featureKey in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[featureKey],this.featuresRtree_&&this.featuresRtree_.insert(extent,feature)):this.featuresRtree_&&this.featuresRtree_.update(extent,feature)}else featureKey in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(feature),this.nullGeometryFeatures_[featureKey]=feature);const id=feature.getId();if(void 0!==id){const sid=id.toString();this.idIndex_[sid]!==feature&&(this.removeFromIdIndex_(feature),this.idIndex_[sid]=feature)}else this.removeFromIdIndex_(feature),this.uidIndex_[featureKey]=feature;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType_CHANGEFEATURE,feature))}hasFeature(feature){const id=feature.getId();return void 0!==id?id in this.idIndex_:(0,util.v6)(feature)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,obj.p)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(extent,resolution,projection){const loadedExtentsRtree=this.loadedExtentsRtree_,extentsToLoad=this.strategy_(extent,resolution,projection);for(let i=0,ii=extentsToLoad.length;i<ii;++i){const extentToLoad=extentsToLoad[i];loadedExtentsRtree.forEachInExtent(extentToLoad,function(object){return(0,ol_extent.ms)(object.extent,extentToLoad)})||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType_FEATURESLOADSTART)),this.loader_.call(this,extentToLoad,resolution,projection,features=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType_FEATURESLOADEND,void 0,features))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType_FEATURESLOADERROR))}),loadedExtentsRtree.insert(extentToLoad,{extent:extentToLoad.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(extent){const loadedExtentsRtree=this.loadedExtentsRtree_,obj=loadedExtentsRtree.forEachInExtent(extent,function(object){if((0,ol_extent.aI)(object.extent,extent))return object});obj&&loadedExtentsRtree.remove(obj)}removeFeatures(features){let removed=!1;for(let i=0,ii=features.length;i<ii;++i)removed=this.removeFeatureInternal(features[i])||removed;removed&&this.changed()}removeFeature(feature){if(!feature)return;this.removeFeatureInternal(feature)&&this.changed()}removeFeatureInternal(feature){const featureKey=(0,util.v6)(feature);if(!(featureKey in this.uidIndex_))return!1;featureKey in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[featureKey]:this.featuresRtree_&&this.featuresRtree_.remove(feature);const featureChangeKeys=this.featureChangeKeys_[featureKey];featureChangeKeys?.forEach(events.JH),delete this.featureChangeKeys_[featureKey];const id=feature.getId();if(void 0!==id){const idString=id.toString(),indexedFeature=this.idIndex_[idString];indexedFeature===feature?delete this.idIndex_[idString]:Array.isArray(indexedFeature)&&(indexedFeature.splice(indexedFeature.indexOf(feature),1),1===indexedFeature.length&&(this.idIndex_[idString]=indexedFeature[0]))}return delete this.uidIndex_[featureKey],this.hasListener(VectorEventType_REMOVEFEATURE)&&this.dispatchEvent(new VectorSourceEvent(VectorEventType_REMOVEFEATURE,feature)),!0}removeFromIdIndex_(feature){for(const id in this.idIndex_)if(this.idIndex_[id]===feature){delete this.idIndex_[id];break}}setLoader(loader){this.loader_=loader}setUrl(url){(0,asserts.v)(this.format_,"`format` must be set when `url` is set"),this.url_=url,this.setLoader(xhr(url,this.format_))}setOverlaps(overlaps){this.overlaps_=overlaps,this.changed()}}},"./node_modules/ol/style/Circle.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _RegularShape_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/style/RegularShape.js");class CircleStyle extends _RegularShape_js__WEBPACK_IMPORTED_MODULE_0__.A{constructor(options){super({points:1/0,fill:(options=options||{radius:5}).fill,radius:options.radius,stroke:options.stroke,scale:void 0!==options.scale?options.scale:1,rotation:void 0!==options.rotation?options.rotation:0,rotateWithView:void 0!==options.rotateWithView&&options.rotateWithView,displacement:void 0!==options.displacement?options.displacement:[0,0],declutterMode:options.declutterMode})}clone(){const scale=this.getScale(),style=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(scale)?scale.slice():scale,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return style.setOpacity(this.getOpacity()),style}setRadius(radius){this.radius=radius,this.render()}}const __WEBPACK_DEFAULT_EXPORT__=CircleStyle},"./node_modules/ol/style/Fill.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _ImageState_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/ImageState.js"),_color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/color.js"),_util_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/util.js"),_IconImage_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/style/IconImage.js");class Fill{constructor(options){options=options||{},this.patternImage_=null,this.color_=null,void 0!==options.color&&this.setColor(options.color)}clone(){const color=this.getColor();return new Fill({color:Array.isArray(color)?color.slice():color||void 0})}getColor(){return this.color_}setColor(color){if(null!==color&&"object"==typeof color&&"src"in color){const patternImage=(0,_IconImage_js__WEBPACK_IMPORTED_MODULE_3__.J)(null,color.src,"anonymous",void 0,color.offset?null:color.color?color.color:null,!(color.offset&&color.size));patternImage.ready().then(()=>{this.patternImage_=null}),patternImage.getImageState()===_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.IDLE&&patternImage.load(),patternImage.getImageState()===_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.LOADING&&(this.patternImage_=patternImage)}this.color_=color}getKey(){const fill=this.getColor();return fill?fill instanceof CanvasPattern||fill instanceof CanvasGradient?(0,_util_js__WEBPACK_IMPORTED_MODULE_2__.v6)(fill):"object"==typeof fill&&"src"in fill?fill.src+":"+fill.offset:(0,_color_js__WEBPACK_IMPORTED_MODULE_1__._j)(fill).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const __WEBPACK_DEFAULT_EXPORT__=Fill},"./node_modules/ol/style/Icon.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _ImageState_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/ImageState.js"),_asserts_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/asserts.js"),_color_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/color.js"),_events_EventType_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/events/EventType.js"),_util_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/util.js"),_IconImage_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/ol/style/IconImage.js"),_Image_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/ol/style/Image.js");function calculateScale(width,height,wantedWidth,wantedHeight){return void 0!==wantedWidth&&void 0!==wantedHeight?[wantedWidth/width,wantedHeight/height]:void 0!==wantedWidth?wantedWidth/width:void 0!==wantedHeight?wantedHeight/height:1}class Icon extends _Image_js__WEBPACK_IMPORTED_MODULE_6__.A{constructor(options){const opacity=void 0!==(options=options||{}).opacity?options.opacity:1,rotation=void 0!==options.rotation?options.rotation:0,scale=void 0!==options.scale?options.scale:1,rotateWithView=void 0!==options.rotateWithView&&options.rotateWithView;super({opacity,rotation,scale,displacement:void 0!==options.displacement?options.displacement:[0,0],rotateWithView,declutterMode:options.declutterMode}),this.anchor_=void 0!==options.anchor?options.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==options.anchorOrigin?options.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==options.anchorXUnits?options.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==options.anchorYUnits?options.anchorYUnits:"fraction",this.crossOrigin_=void 0!==options.crossOrigin?options.crossOrigin:null;const image=void 0!==options.img?options.img:null;let imageState,cacheKey=options.src;if((0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.v)(!(void 0!==cacheKey&&image),"`image` and `src` cannot be provided at the same time"),void 0!==cacheKey&&0!==cacheKey.length||!image||(cacheKey=image.src||(0,_util_js__WEBPACK_IMPORTED_MODULE_4__.v6)(image)),(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.v)(void 0!==cacheKey&&cacheKey.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.v)(!((void 0!==options.width||void 0!==options.height)&&void 0!==options.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==options.src?imageState=_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.IDLE:void 0!==image&&(imageState="complete"in image?image.complete?image.src?_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.LOADED:_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.IDLE:_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.LOADING:_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.LOADED),this.color_=void 0!==options.color?(0,_color_js__WEBPACK_IMPORTED_MODULE_2__._j)(options.color):null,this.iconImage_=(0,_IconImage_js__WEBPACK_IMPORTED_MODULE_5__.J)(image,cacheKey,this.crossOrigin_,imageState,this.color_),this.offset_=void 0!==options.offset?options.offset:[0,0],this.offsetOrigin_=void 0!==options.offsetOrigin?options.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==options.size?options.size:null,this.initialOptions_,void 0!==options.width||void 0!==options.height){let width,height;if(options.size)[width,height]=options.size;else{const image=this.getImage(1);if(image.width&&image.height)width=image.width,height=image.height;else if(image instanceof HTMLImageElement){this.initialOptions_=options;const onload=()=>{if(this.unlistenImageChange(onload),!this.initialOptions_)return;const imageSize=this.iconImage_.getSize();this.setScale(calculateScale(imageSize[0],imageSize[1],options.width,options.height))};return void this.listenImageChange(onload)}}void 0!==width&&this.setScale(calculateScale(width,height,options.width,options.height))}}clone(){let scale,width,height;return this.initialOptions_?(width=this.initialOptions_.width,height=this.initialOptions_.height):(scale=this.getScale(),scale=Array.isArray(scale)?scale.slice():scale),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale,width,height,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let anchor=this.normalizedAnchor_;if(!anchor){anchor=this.anchor_;const size=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!size)return null;anchor=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(anchor[0]*=size[0]),"fraction"==this.anchorYUnits_&&(anchor[1]*=size[1])}if("top-left"!=this.anchorOrigin_){if(!size)return null;anchor===this.anchor_&&(anchor=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(anchor[0]=-anchor[0]+size[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(anchor[1]=-anchor[1]+size[1])}this.normalizedAnchor_=anchor}const displacement=this.getDisplacement(),scale=this.getScaleArray();return[anchor[0]-displacement[0]/scale[0],anchor[1]+displacement[1]/scale[1]]}setAnchor(anchor){this.anchor_=anchor,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(pixelRatio){return this.iconImage_.getImage(pixelRatio)}getPixelRatio(pixelRatio){return this.iconImage_.getPixelRatio(pixelRatio)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let offset=this.offset_;if("top-left"!=this.offsetOrigin_){const size=this.getSize(),iconImageSize=this.iconImage_.getSize();if(!size||!iconImageSize)return null;offset=offset.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(offset[0]=iconImageSize[0]-size[0]-offset[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(offset[1]=iconImageSize[1]-size[1]-offset[1])}return this.origin_=offset,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(src){this.iconImage_=(0,_IconImage_js__WEBPACK_IMPORTED_MODULE_5__.J)(null,src,this.crossOrigin_,_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const scale=this.getScaleArray();return this.size_?this.size_[0]*scale[0]:this.iconImage_.getImageState()==_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.LOADED?this.iconImage_.getSize()[0]*scale[0]:void 0}getHeight(){const scale=this.getScaleArray();return this.size_?this.size_[1]*scale[1]:this.iconImage_.getImageState()==_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.LOADED?this.iconImage_.getSize()[1]*scale[1]:void 0}setScale(scale){delete this.initialOptions_,super.setScale(scale)}listenImageChange(listener){this.iconImage_.addEventListener(_events_EventType_js__WEBPACK_IMPORTED_MODULE_3__.A.CHANGE,listener)}load(){this.iconImage_.load()}unlistenImageChange(listener){this.iconImage_.removeEventListener(_events_EventType_js__WEBPACK_IMPORTED_MODULE_3__.A.CHANGE,listener)}ready(){return this.iconImage_.ready()}}const __WEBPACK_DEFAULT_EXPORT__=Icon},"./node_modules/ol/style/IconImage.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>style_IconImage,J:()=>get});var ImageState=__webpack_require__("./node_modules/ol/ImageState.js"),events_EventType=__webpack_require__("./node_modules/ol/events/EventType.js"),Target=__webpack_require__("./node_modules/ol/events/Target.js"),has=(__webpack_require__("./node_modules/ol/functions.js"),__webpack_require__("./node_modules/ol/has.js"));Target.A;function decodeFallback(image,src){return src&&(image.src=src),image.src&&has.DT?new Promise((resolve,reject)=>image.decode().then(()=>resolve(image)).catch(e=>image.complete&&image.width?resolve(image):reject(e))):function load(image,src){return new Promise((resolve,reject)=>{function handleLoad(){unlisten(),resolve(image)}function handleError(){unlisten(),reject(new Error("Image load error"))}function unlisten(){image.removeEventListener("load",handleLoad),image.removeEventListener("error",handleError)}image.addEventListener("load",handleLoad),image.addEventListener("error",handleError),src&&(image.src=src)})}(image)}var color=__webpack_require__("./node_modules/ol/color.js"),dom=__webpack_require__("./node_modules/ol/dom.js"),IconImageCache=__webpack_require__("./node_modules/ol/style/IconImageCache.js");let taintedTestContext=null;class IconImage extends Target.A{constructor(image,src,crossOrigin,imageState,color){super(),this.hitDetectionImage_=null,this.image_=image,this.crossOrigin_=crossOrigin,this.canvas_={},this.color_=color,this.imageState_=void 0===imageState?ImageState.A.IDLE:imageState,this.size_=image&&image.width&&image.height?[image.width,image.height]:null,this.src_=src,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===ImageState.A.LOADED){taintedTestContext||(taintedTestContext=(0,dom.Y)(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(events_EventType.A.CHANGE)}handleImageError_(){this.imageState_=ImageState.A.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.A.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(pixelRatio){return this.image_||this.initializeImage_(),this.replaceColor_(pixelRatio),this.canvas_[pixelRatio]?this.canvas_[pixelRatio]:this.image_}getPixelRatio(pixelRatio){return this.replaceColor_(pixelRatio),this.canvas_[pixelRatio]?pixelRatio:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const width=this.size_[0],height=this.size_[1],context=(0,dom.Y)(width,height);context.fillRect(0,0,width,height),this.hitDetectionImage_=context.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.A.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.A.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&decodeFallback(this.image_,this.src_).then(image=>{this.image_=image,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(pixelRatio){if(!this.color_||this.canvas_[pixelRatio]||this.imageState_!==ImageState.A.LOADED)return;const image=this.image_,ctx=(0,dom.Y)(Math.ceil(image.width*pixelRatio),Math.ceil(image.height*pixelRatio)),canvas=ctx.canvas;ctx.scale(pixelRatio,pixelRatio),ctx.drawImage(image,0,0),ctx.globalCompositeOperation="multiply",ctx.fillStyle=(0,color.oJ)(this.color_),ctx.fillRect(0,0,canvas.width/pixelRatio,canvas.height/pixelRatio),ctx.globalCompositeOperation="destination-in",ctx.drawImage(image,0,0),this.canvas_[pixelRatio]=canvas}ready(){return this.ready_||(this.ready_=new Promise(resolve=>{if(this.imageState_===ImageState.A.LOADED||this.imageState_===ImageState.A.ERROR)resolve();else{const onChange=()=>{this.imageState_!==ImageState.A.LOADED&&this.imageState_!==ImageState.A.ERROR||(this.removeEventListener(events_EventType.A.CHANGE,onChange),resolve())};this.addEventListener(events_EventType.A.CHANGE,onChange)}})),this.ready_}}function get(image,cacheKey,crossOrigin,imageState,color,pattern){let iconImage=void 0===cacheKey?void 0:IconImageCache.ue.get(cacheKey,crossOrigin,color);return iconImage||(iconImage=new IconImage(image,image&&"src"in image?image.src||void 0:cacheKey,crossOrigin,imageState,color),IconImageCache.ue.set(cacheKey,crossOrigin,color,iconImage,pattern)),pattern&&iconImage&&!IconImageCache.ue.getPattern(cacheKey,crossOrigin,color)&&IconImageCache.ue.set(cacheKey,crossOrigin,color,iconImage,pattern),iconImage}const style_IconImage=IconImage},"./node_modules/ol/style/IconImageCache.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{ue:()=>shared});var _ImageState_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/ImageState.js"),_color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/color.js"),_dom_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/dom.js");class IconImageCache{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let i=0;for(const key in this.cache_){const iconImage=this.cache_[key];3&i++||iconImage.hasListener()||(delete this.cache_[key],delete this.patternCache_[key],--this.cacheSize_)}}}get(src,crossOrigin,color){const key=getCacheKey(src,crossOrigin,color);return key in this.cache_?this.cache_[key]:null}getPattern(src,crossOrigin,color){const key=getCacheKey(src,crossOrigin,color);return key in this.patternCache_?this.patternCache_[key]:null}set(src,crossOrigin,color,iconImage,pattern){const key=getCacheKey(src,crossOrigin,color),update=key in this.cache_;this.cache_[key]=iconImage,pattern&&(iconImage.getImageState()===_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.IDLE&&iconImage.load(),iconImage.getImageState()===_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.LOADING?iconImage.ready().then(()=>{this.patternCache_[key]=(0,_dom_js__WEBPACK_IMPORTED_MODULE_2__.lr)().createPattern(iconImage.getImage(1),"repeat")}):this.patternCache_[key]=(0,_dom_js__WEBPACK_IMPORTED_MODULE_2__.lr)().createPattern(iconImage.getImage(1),"repeat")),update||++this.cacheSize_}setSize(maxCacheSize){this.maxCacheSize_=maxCacheSize,this.expire()}}function getCacheKey(src,crossOrigin,color){return crossOrigin+":"+src+":"+(color?(0,_color_js__WEBPACK_IMPORTED_MODULE_1__._j)(color):"null")}const shared=new IconImageCache},"./node_modules/ol/style/Image.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _size_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/size.js"),_util_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/util.js");class ImageStyle{constructor(options){this.opacity_=options.opacity,this.rotateWithView_=options.rotateWithView,this.rotation_=options.rotation,this.scale_=options.scale,this.scaleArray_=(0,_size_js__WEBPACK_IMPORTED_MODULE_0__.xq)(options.scale),this.displacement_=options.displacement,this.declutterMode_=options.declutterMode}clone(){const scale=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(scale)?scale.slice():scale,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.b0)()}getImage(pixelRatio){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.b0)()}getHitDetectionImage(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.b0)()}getPixelRatio(pixelRatio){return 1}getImageState(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.b0)()}getImageSize(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.b0)()}getOrigin(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.b0)()}getSize(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.b0)()}setDisplacement(displacement){this.displacement_=displacement}setOpacity(opacity){this.opacity_=opacity}setRotateWithView(rotateWithView){this.rotateWithView_=rotateWithView}setRotation(rotation){this.rotation_=rotation}setScale(scale){this.scale_=scale,this.scaleArray_=(0,_size_js__WEBPACK_IMPORTED_MODULE_0__.xq)(scale)}listenImageChange(listener){(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.b0)()}load(){(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.b0)()}unlistenImageChange(listener){(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.b0)()}ready(){return Promise.resolve()}}const __WEBPACK_DEFAULT_EXPORT__=ImageStyle},"./node_modules/ol/style/RegularShape.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _ImageState_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/ImageState.js"),_color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/color.js"),_colorlike_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/colorlike.js"),_dom_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/dom.js"),_render_canvas_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/render/canvas.js"),_IconImage_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/ol/style/IconImage.js"),_IconImageCache_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/ol/style/IconImageCache.js"),_Image_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/ol/style/Image.js");class RegularShape extends _Image_js__WEBPACK_IMPORTED_MODULE_7__.A{constructor(options){super({opacity:1,rotateWithView:void 0!==options.rotateWithView&&options.rotateWithView,rotation:void 0!==options.rotation?options.rotation:0,scale:void 0!==options.scale?options.scale:1,displacement:void 0!==options.displacement?options.displacement:[0,0],declutterMode:options.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=void 0!==options.fill?options.fill:null,this.origin_=[0,0],this.points_=options.points,this.radius=options.radius,this.radius2_=options.radius2,this.angle_=void 0!==options.angle?options.angle:0,this.stroke_=void 0!==options.stroke?options.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.LOADING:_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.LOADED,this.imageState_===_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.LOADING&&this.ready().then(()=>this.imageState_=_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.LOADED),this.render()}clone(){const scale=this.getScale(),style=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(scale)?scale.slice():scale,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return style.setOpacity(this.getOpacity()),style}getAnchor(){const size=this.size_,displacement=this.getDisplacement(),scale=this.getScaleArray();return[size[0]/2-displacement[0]/scale[0],size[1]/2+displacement[1]/scale[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(fill){this.fill_=fill,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(pixelRatio){const fillKey=this.fill_?.getKey(),cacheKey=`${pixelRatio},${this.angle_},${this.radius},${this.radius2_},${this.points_},${fillKey}`+Object.values(this.renderOptions_).join(",");let image=_IconImageCache_js__WEBPACK_IMPORTED_MODULE_6__.ue.get(cacheKey,null,null)?.getImage(1);if(!image){const renderOptions=this.renderOptions_,size=Math.ceil(renderOptions.size*pixelRatio),context=(0,_dom_js__WEBPACK_IMPORTED_MODULE_3__.Y)(size,size);this.draw_(renderOptions,context,pixelRatio),image=context.canvas,_IconImageCache_js__WEBPACK_IMPORTED_MODULE_6__.ue.set(cacheKey,null,null,new _IconImage_js__WEBPACK_IMPORTED_MODULE_5__.A(image,void 0,null,_ImageState_js__WEBPACK_IMPORTED_MODULE_0__.A.LOADED,null))}return image}getPixelRatio(pixelRatio){return pixelRatio}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(stroke){this.stroke_=stroke,this.render()}listenImageChange(listener){}load(){}unlistenImageChange(listener){}calculateLineJoinSize_(lineJoin,strokeWidth,miterLimit){if(0===strokeWidth||this.points_===1/0||"bevel"!==lineJoin&&"miter"!==lineJoin)return strokeWidth;let r1=this.radius,r2=void 0===this.radius2_?r1:this.radius2_;if(r1<r2){const tmp=r1;r1=r2,r2=tmp}const points=void 0===this.radius2_?this.points_:2*this.points_,alpha=2*Math.PI/points,a=r2*Math.sin(alpha),d=r1-Math.sqrt(r2*r2-a*a),e=Math.sqrt(a*a+d*d),miterRatio=e/a;if("miter"===lineJoin&&miterRatio<=miterLimit)return miterRatio*strokeWidth;const k=strokeWidth/2/miterRatio,l=strokeWidth/2*(d/e),bevelAdd=Math.sqrt((r1+k)*(r1+k)+l*l)-r1;if(void 0===this.radius2_||"bevel"===lineJoin)return 2*bevelAdd;const aa=r1*Math.sin(alpha),dd=r2-Math.sqrt(r1*r1-aa*aa),innerMiterRatio=Math.sqrt(aa*aa+dd*dd)/aa;if(innerMiterRatio<=miterLimit){const innerLength=innerMiterRatio*strokeWidth/2-r2-r1;return 2*Math.max(bevelAdd,innerLength)}return 2*bevelAdd}createRenderOptions(){let strokeStyle,lineCap=_render_canvas_js__WEBPACK_IMPORTED_MODULE_4__._m,lineJoin=_render_canvas_js__WEBPACK_IMPORTED_MODULE_4__._K,miterLimit=0,lineDash=null,lineDashOffset=0,strokeWidth=0;this.stroke_&&(strokeStyle=(0,_colorlike_js__WEBPACK_IMPORTED_MODULE_2__.F)(this.stroke_.getColor()??_render_canvas_js__WEBPACK_IMPORTED_MODULE_4__.NT),strokeWidth=this.stroke_.getWidth()??_render_canvas_js__WEBPACK_IMPORTED_MODULE_4__.aq,lineDash=this.stroke_.getLineDash(),lineDashOffset=this.stroke_.getLineDashOffset()??0,lineJoin=this.stroke_.getLineJoin()??_render_canvas_js__WEBPACK_IMPORTED_MODULE_4__._K,lineCap=this.stroke_.getLineCap()??_render_canvas_js__WEBPACK_IMPORTED_MODULE_4__._m,miterLimit=this.stroke_.getMiterLimit()??_render_canvas_js__WEBPACK_IMPORTED_MODULE_4__.eL);const add=this.calculateLineJoinSize_(lineJoin,strokeWidth,miterLimit),maxRadius=Math.max(this.radius,this.radius2_||0);return{strokeStyle,strokeWidth,size:Math.ceil(2*maxRadius+add),lineCap,lineDash,lineDashOffset,lineJoin,miterLimit}}render(){this.renderOptions_=this.createRenderOptions();const size=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[size,size]}draw_(renderOptions,context,pixelRatio){if(context.scale(pixelRatio,pixelRatio),context.translate(renderOptions.size/2,renderOptions.size/2),this.createPath_(context),this.fill_){let color=this.fill_.getColor();null===color&&(color=_render_canvas_js__WEBPACK_IMPORTED_MODULE_4__.qY),context.fillStyle=(0,_colorlike_js__WEBPACK_IMPORTED_MODULE_2__.F)(color),context.fill()}renderOptions.strokeStyle&&(context.strokeStyle=renderOptions.strokeStyle,context.lineWidth=renderOptions.strokeWidth,renderOptions.lineDash&&(context.setLineDash(renderOptions.lineDash),context.lineDashOffset=renderOptions.lineDashOffset),context.lineCap=renderOptions.lineCap,context.lineJoin=renderOptions.lineJoin,context.miterLimit=renderOptions.miterLimit,context.stroke())}createHitDetectionCanvas_(renderOptions){let context;if(this.fill_){let color=this.fill_.getColor(),opacity=0;"string"==typeof color&&(color=(0,_color_js__WEBPACK_IMPORTED_MODULE_1__._j)(color)),null===color?opacity=1:Array.isArray(color)&&(opacity=4===color.length?color[3]:1),0===opacity&&(context=(0,_dom_js__WEBPACK_IMPORTED_MODULE_3__.Y)(renderOptions.size,renderOptions.size),this.drawHitDetectionCanvas_(renderOptions,context))}return context?context.canvas:this.getImage(1)}createPath_(context){let points=this.points_;const radius=this.radius;if(points===1/0)context.arc(0,0,radius,0,2*Math.PI);else{const radius2=void 0===this.radius2_?radius:this.radius2_;void 0!==this.radius2_&&(points*=2);const startAngle=this.angle_-Math.PI/2,step=2*Math.PI/points;for(let i=0;i<points;i++){const angle0=startAngle+i*step,radiusC=i%2==0?radius:radius2;context.lineTo(radiusC*Math.cos(angle0),radiusC*Math.sin(angle0))}context.closePath()}}drawHitDetectionCanvas_(renderOptions,context){context.translate(renderOptions.size/2,renderOptions.size/2),this.createPath_(context),context.fillStyle=_render_canvas_js__WEBPACK_IMPORTED_MODULE_4__.qY,context.fill(),renderOptions.strokeStyle&&(context.strokeStyle=renderOptions.strokeStyle,context.lineWidth=renderOptions.strokeWidth,renderOptions.lineDash&&(context.setLineDash(renderOptions.lineDash),context.lineDashOffset=renderOptions.lineDashOffset),context.lineJoin=renderOptions.lineJoin,context.miterLimit=renderOptions.miterLimit,context.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const __WEBPACK_DEFAULT_EXPORT__=RegularShape},"./node_modules/ol/style/Stroke.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});class Stroke{constructor(options){options=options||{},this.color_=void 0!==options.color?options.color:null,this.lineCap_=options.lineCap,this.lineDash_=void 0!==options.lineDash?options.lineDash:null,this.lineDashOffset_=options.lineDashOffset,this.lineJoin_=options.lineJoin,this.miterLimit_=options.miterLimit,this.width_=options.width}clone(){const color=this.getColor();return new Stroke({color:Array.isArray(color)?color.slice():color||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(color){this.color_=color}setLineCap(lineCap){this.lineCap_=lineCap}setLineDash(lineDash){this.lineDash_=lineDash}setLineDashOffset(lineDashOffset){this.lineDashOffset_=lineDashOffset}setLineJoin(lineJoin){this.lineJoin_=lineJoin}setMiterLimit(miterLimit){this.miterLimit_=miterLimit}setWidth(width){this.width_=width}}const __WEBPACK_DEFAULT_EXPORT__=Stroke},"./node_modules/ol/style/Style.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,d1:()=>createDefaultStyle,mC:()=>toFunction,mY:()=>createEditingStyle});var _asserts_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/asserts.js"),_Circle_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/style/Circle.js"),_Fill_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/style/Fill.js"),_Stroke_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/style/Stroke.js");class Style{constructor(options){options=options||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,void 0!==options.geometry&&this.setGeometry(options.geometry),this.fill_=void 0!==options.fill?options.fill:null,this.image_=void 0!==options.image?options.image:null,this.renderer_=void 0!==options.renderer?options.renderer:null,this.hitDetectionRenderer_=void 0!==options.hitDetectionRenderer?options.hitDetectionRenderer:null,this.stroke_=void 0!==options.stroke?options.stroke:null,this.text_=void 0!==options.text?options.text:null,this.zIndex_=options.zIndex}clone(){let geometry=this.getGeometry();return geometry&&"object"==typeof geometry&&(geometry=geometry.clone()),new Style({geometry:geometry??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(renderer){this.renderer_=renderer}setHitDetectionRenderer(renderer){this.hitDetectionRenderer_=renderer}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(fill){this.fill_=fill}getImage(){return this.image_}setImage(image){this.image_=image}getStroke(){return this.stroke_}setStroke(stroke){this.stroke_=stroke}getText(){return this.text_}setText(text){this.text_=text}getZIndex(){return this.zIndex_}setGeometry(geometry){"function"==typeof geometry?this.geometryFunction_=geometry:"string"==typeof geometry?this.geometryFunction_=function(feature){return feature.get(geometry)}:geometry?void 0!==geometry&&(this.geometryFunction_=function(){return geometry}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=geometry}setZIndex(zIndex){this.zIndex_=zIndex}}function toFunction(obj){let styleFunction;if("function"==typeof obj)styleFunction=obj;else{let styles;if(Array.isArray(obj))styles=obj;else{(0,_asserts_js__WEBPACK_IMPORTED_MODULE_0__.v)("function"==typeof obj.getZIndex,"Expected an `Style` or an array of `Style`");styles=[obj]}styleFunction=function(){return styles}}return styleFunction}let defaultStyles=null;function createDefaultStyle(feature,resolution){if(!defaultStyles){const fill=new _Fill_js__WEBPACK_IMPORTED_MODULE_2__.A({color:"rgba(255,255,255,0.4)"}),stroke=new _Stroke_js__WEBPACK_IMPORTED_MODULE_3__.A({color:"#3399CC",width:1.25});defaultStyles=[new Style({image:new _Circle_js__WEBPACK_IMPORTED_MODULE_1__.A({fill,stroke,radius:5}),fill,stroke})]}return defaultStyles}function createEditingStyle(){const styles={},white=[255,255,255,1],blue=[0,153,255,1];return styles.Polygon=[new Style({fill:new _Fill_js__WEBPACK_IMPORTED_MODULE_2__.A({color:[255,255,255,.5]})})],styles.MultiPolygon=styles.Polygon,styles.LineString=[new Style({stroke:new _Stroke_js__WEBPACK_IMPORTED_MODULE_3__.A({color:white,width:5})}),new Style({stroke:new _Stroke_js__WEBPACK_IMPORTED_MODULE_3__.A({color:blue,width:3})})],styles.MultiLineString=styles.LineString,styles.Circle=styles.Polygon.concat(styles.LineString),styles.Point=[new Style({image:new _Circle_js__WEBPACK_IMPORTED_MODULE_1__.A({radius:6,fill:new _Fill_js__WEBPACK_IMPORTED_MODULE_2__.A({color:blue}),stroke:new _Stroke_js__WEBPACK_IMPORTED_MODULE_3__.A({color:white,width:1.5})}),zIndex:1/0})],styles.MultiPoint=styles.Point,styles.GeometryCollection=styles.Polygon.concat(styles.LineString,styles.Point),styles}function defaultGeometryFunction(feature){return feature.getGeometry()}const __WEBPACK_DEFAULT_EXPORT__=Style},"./node_modules/ol/transform.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Bb:()=>apply,T9:()=>makeInverse,Zz:()=>compose,dI:()=>toString,k3:()=>setFromArray,sH:()=>fromString,tI:()=>equivalent,vt:()=>create});var _asserts_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/asserts.js");new Array(6);function create(){return[1,0,0,1,0,0]}function setFromArray(transform1,transform2){return transform1[0]=transform2[0],transform1[1]=transform2[1],transform1[2]=transform2[2],transform1[3]=transform2[3],transform1[4]=transform2[4],transform1[5]=transform2[5],transform1}function apply(transform,coordinate){const x=coordinate[0],y=coordinate[1];return coordinate[0]=transform[0]*x+transform[2]*y+transform[4],coordinate[1]=transform[1]*x+transform[3]*y+transform[5],coordinate}function compose(transform,dx1,dy1,sx,sy,angle,dx2,dy2){const sin=Math.sin(angle),cos=Math.cos(angle);return transform[0]=sx*cos,transform[1]=sy*sin,transform[2]=-sx*sin,transform[3]=sy*cos,transform[4]=dx2*sx*cos-dy2*sx*sin+dx1,transform[5]=dx2*sy*sin+dy2*sy*cos+dy1,transform}function makeInverse(target,source){const det=function determinant(mat){return mat[0]*mat[3]-mat[1]*mat[2]}(source);(0,_asserts_js__WEBPACK_IMPORTED_MODULE_0__.v)(0!==det,"Transformation matrix cannot be inverted");const a=source[0],b=source[1],c=source[2],d=source[3],e=source[4],f=source[5];return target[0]=d/det,target[1]=-b/det,target[2]=-c/det,target[3]=a/det,target[4]=(c*f-d*e)/det,target[5]=-(a*f-b*e)/det,target}const matrixPrecision=[1e5,1e5,1e5,1e5,2,2];function toString(mat){return"matrix("+mat.join(", ")+")"}function fromString(cssTransform){return cssTransform.substring(7,cssTransform.length-1).split(",").map(parseFloat)}function equivalent(cssTransform1,cssTransform2){const mat1=fromString(cssTransform1),mat2=fromString(cssTransform2);for(let i=0;i<6;++i)if(0!==Math.round((mat1[i]-mat2[i])*matrixPrecision[i]))return!1;return!0}},"./node_modules/ol/util.js"(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function abstract(){throw new Error("Unimplemented abstract method.")}__webpack_require__.d(__webpack_exports__,{b0:()=>abstract,v6:()=>getUid});let uidCounter_=0;function getUid(obj){return obj.ol_uid||(obj.ol_uid=String(++uidCounter_))}}}]);