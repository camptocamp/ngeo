<div ng-if="authCtrl.gmfUser.username">
  <div class="form-group">
    <span>{{ ::authCtrl.translate('Logged in as') }}</span>
    <strong>{{ ::authCtrl.gmfUser.username }}</strong>.
  </div>

  <form
      name="logoutForm"
      role="form"
      ng-submit="authCtrl.logout()"
      ng-controller="GmfAuthenticationController"
      ng-class="{'has-error': authCtrl.error}"
      ng-if="!authCtrl.changingPassword">
    <div class="form-group">
      <input
          type="submit"
          class="form-control btn btn-primary"
          value="{{ ::authCtrl.translate('Logout') }}" />
    </div>
    <span
        ng-show="authCtrl.error"
        class="help-block">{{ authCtrl.error }}</span>
    <div class="form-group">
    <input
        type="button"
        class="form-control btn btn-default"
        value="{{ ::authCtrl.translate('Change password') }}"
        ng-click="authCtrl.changingPassword = true"/>
    </div>
  </form>

  <form
      name="changePasswordForm"
      role="form"
      ng-submit="authCtrl.changePassword()"
      ng-controller="GmfAuthenticationController"
      ng-class="{'has-error': authCtrl.error}"
      ng-if="authCtrl.changingPassword">
    <div class="form-group">
      <input
          type="password"
          class="form-control"
          name="oldpassword"
          ng-model="authCtrl.oldPwdVal"
          required="required"
          placeholder="{{ ::authCtrl.translate('Old password') }}"/>
    </div>
    <div class="form-group">
      <input
          type="password"
          class="form-control"
          name="newpassword"
          ng-model="authCtrl.newPwdVal"
          required="required"
          placeholder="{{ ::authCtrl.translate('New password') }}"/>
    </div>
    <div class="form-group">
      <input
          type="password"
          class="form-control"
          name="newpasswordconfirm"
          ng-model="authCtrl.newPwdConfVal"
          required="required"
          placeholder="{{ ::authCtrl.translate('Confirm new password') }}"/>
    </div>
    <div class="form-group">
      <input
          type="submit"
          class="form-control btn btn-primary"
          value="{{ ::authCtrl.translate('Change password') }}" />
    </div>
    <div class="form-group">
      <span ng-show="authCtrl.error"
            class="help-block">{{ authCtrl.error }}</span>
    <input
        type="button"
        class="form-control btn btn-default"
        value="{{ ::authCtrl.translate('Cancel') }}"
        ng-click="authCtrl.changePasswordReset()" />
    </div>
  </form>

  <ngeo-modal ng-model="authCtrl.changePasswordModalShown">
    <div class="modal-header">
      <button type="button"
              class="close"
              data-dismiss="modal"
              aria-label="{{ ::authCtrl.translate('Close') }}">
        <span aria-hidden="true">&times;</span>
      </button>
      <h4 class="modal-title">
        {{ ::authCtrl.translate('Password Changed') }}
      </h4>
    </div>
    <div class="modal-body">
      {{ ::authCtrl.translate('Your password has succesfully been changed.') }}
    </div>
    <div class="modal-footer">
      <button type="button"
              class="btn btn-default"
              data-dismiss="modal">{{ ::authCtrl.translate('OK') }}</button>
    </div>
  </ngeo-modal>

</div>

<div ng-if="!authCtrl.gmfUser.username">
  <form
      name="loginForm"
      role="form"
      ng-submit="authCtrl.login()"
      ng-controller="GmfAuthenticationController"
      ng-class="{'has-error': authCtrl.error}">
    <div class="form-group">
      <input
          type="text"
          class="form-control"
          name="login"
          ng-model="authCtrl.loginVal"
          required="required"
          placeholder="{{ ::authCtrl.translate('Username') }}" />
    </div>
    <div class="form-group">
      <input
          type="password"
          class="form-control"
          name="password"
          ng-model="authCtrl.pwdVal"
          required="required"
          placeholder="{{ ::authCtrl.translate('Password') }}"/>
    </div>
    <div class="form-group">
    <input
        type="submit"
        class="form-control btn btn-primary"
        value="{{ ::authCtrl.translate('Connect') }}" />
    </div>
    <span
        ng-show="authCtrl.error"
        class="help-block">{{ authCtrl.error }}</span>
    <div class="form-group">
      <a ng-click="authCtrl.resetPassword()"
         href="">{{ ::authCtrl.translate('Forgot password ?') }}</a>
    </div>
  </form>

  <ngeo-modal ng-model="authCtrl.resetPasswordModalShown">
    <div class="modal-header">
      <button type="button"
              class="close"
              data-dismiss="modal"
              aria-label="{{ ::authCtrl.translate('Close') }}">
        <span aria-hidden="true">&times;</span>
      </button>
      <h4 class="modal-title">
        {{ ::authCtrl.translate('Password Forgotten?') }}
      </h4>
    </div>
    <div class="modal-body">
      {{ ::authCtrl.translate(
      'A new password has just been sent to you by e-mail.') }}
    </div>
    <div class="modal-footer">
      <button type="button"
              class="btn btn-default"
              data-dismiss="modal">{{ ::authCtrl.translate('OK') }}</button>
    </div>
  </ngeo-modal>

</div>