(function(e){function r(r){var n=r[0];var i=r[1];var l=r[2];var c,s,p=0,h=[];for(;p<n.length;p++){s=n[p];if(o[s]){h.push(o[s][0])}o[s]=0}for(c in i){if(Object.prototype.hasOwnProperty.call(i,c)){e[c]=i[c]}}if(u)u(r);while(h.length){h.shift()()}a.push.apply(a,l||[]);return t()}function t(){var e;for(var r=0;r<a.length;r++){var t=a[r];var n=true;for(var l=1;l<t.length;l++){var c=t[l];if(o[c]!==0)n=false}if(n){a.splice(r--,1);e=i(i.s=t[0])}}return e}var n={};var o={4:0};var a=[];function i(r){if(n[r]){return n[r].exports}var t=n[r]={i:r,l:false,exports:{}};e[r].call(t.exports,t,t.exports,i);t.l=true;return t.exports}i.m=e;i.c=n;i.d=function(e,r,t){if(!i.o(e,r)){Object.defineProperty(e,r,{configurable:false,enumerable:true,get:t})}};i.r=function(e){Object.defineProperty(e,"__esModule",{value:true})};i.n=function(e){var r=e&&e.__esModule?function r(){return e["default"]}:function r(){return e};i.d(r,"a",r);return r};i.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)};i.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[];var c=l.push.bind(l);l.push=r;l=l.slice();for(var s=0;s<l.length;s++)r(l[s]);var u=c;a.push([347,0]);return t()})({346:function(e,r,t){"use strict";t.r(r);var n=t(473);var o=t.n(n);var a=t(2);var i=t(23);var l=t(92);var c=t(219);var s=t(19);var u=t(26);var p=t(17);var h=t(38);var f=t(7);var v=t(35);var d=t(34);var m={};m.module=angular.module("app",["gettext",i["a"].name,c["a"].name]);m.searchComponent={bindings:{map:"=appSearchMap"},controller:"AppSearchController",template:'<input type="text" placeholder="searchâ€¦" '+'ngeo-search="$ctrl.options" '+'ngeo-search-datasets="$ctrl.datasets" '+'ngeo-search-listeners="$ctrl.listeners">'};m.module.component("appSearch",m.searchComponent);m.SearchController=function(e,r,t,n){this.$element=e;this.map;this.vectorLayer_=this.createVectorLayer_();var o=this.createAndInitBloodhound_(n);this.options={highlight:true,hint:undefined,minLength:undefined};this.datasets=[{source:o.ttAdapter(),display:function e(r){var t=r;return t.get("label")},templates:{header:function e(){return'<div class="ngeo-header">Addresses</div>'},suggestion:function e(n){var o=n;var a=r.$new(true);a["feature"]=o;a["click"]=function(e){window.alert(o.get("label"));e.stopPropagation()};var i="<p>"+o.get("label")+'<button ng-click="click($event)">i</button></p>';return t(i)(a)}}}];this.listeners={select:m.SearchController.select_.bind(this)}};m.SearchController.$inject=["$element","$rootScope","$compile","ngeoSearchCreateGeoJSONBloodhound"];m.SearchController.prototype.$onInit=function(){var e=this.$element.find("input");e.on("focus blur",function(){e.val("")})};m.SearchController.prototype.createVectorLayer_=function(){var e=new h["a"]({source:new d["b"]});e.setMap(this.map);return e};m.SearchController.prototype.createAndInitBloodhound_=function(e){var r="https://geomapfish-demo.camptocamp.com/2.3/wsgi/fulltextsearch?query=%QUERY";var t=e(r,undefined,f["h"]("EPSG:3857"),l["a"]);t.initialize();return t};m.SearchController.select_=function(e,r,t){var n=r;var o=n.getGeometry();var i=this.map.getSize();a["a"].assert(i!==undefined);var l=this.vectorLayer_.getSource();l.clear(true);l.addFeature(n);this.map.getView().fit(o,{size:i,maxZoom:16})};m.module.controller("AppSearchController",m.SearchController);m.MainController=function(){this.map=new s["a"]({layers:[new p["a"]({source:new v["b"]})],view:new u["a"]({center:[0,0],zoom:4})})};m.module.controller("MainController",m.MainController);r["default"]=m},347:function(e,r,t){t(53);t(55);e.exports=t(346)},473:function(e,r){}});
//# sourceMappingURL=search.361f99.js.map