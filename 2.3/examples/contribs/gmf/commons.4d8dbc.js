(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[0],[function(t,e,n){"use strict";n.d(e,"a",function(){return r});n.d(e,"c",function(){return a});n.d(e,"d",function(){return o});n.d(e,"e",function(){return s});n.d(e,"g",function(){return u});n.d(e,"h",function(){return c});n.d(e,"f",function(){return f});n.d(e,"s",function(){return h});n.d(e,"i",function(){return d});n.d(e,"j",function(){return p});n.d(e,"o",function(){return v});n.d(e,"m",function(){return g});n.d(e,"n",function(){return m});n.d(e,"l",function(){return _});n.d(e,"k",function(){return y});n.d(e,"q",function(){return b});n.d(e,"b",function(){return w});n.d(e,"p",function(){return x});n.d(e,"r",function(){return S});n.d(e,"t",function(){return C});n.d(e,"u",function(){return E});n.d(e,"v",function(){return T});var i=n(7);var r=document.implementation.createDocument("","",null);var a="http://www.w3.org/2001/XMLSchema-instance";function o(t,e){return r.createElementNS(t,e)}function s(t,e){return l(t,e,[]).join("")}function l(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE){if(e){n.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,""))}else{n.push(t.nodeValue)}}else{var i=void 0;for(i=t.firstChild;i;i=i.nextSibling){l(i,e,n)}}return n}function u(t){return t instanceof Document}function c(t){return t instanceof Node}function f(t,e,n){return t.getAttributeNS(e,n)||""}function h(t){return(new DOMParser).parseFromString(t,"application/xml")}function d(t,e){return function(n,r){var a=t.call(e,n,r);if(a!==undefined){var o=r[r.length-1];Object(i["c"])(o,a)}}}function p(t,e){return function(n,i){var r=t.call(e!==undefined?e:this,n,i);if(r!==undefined){var a=i[i.length-1];a.push(r)}}}function v(t,e){return function(n,i){var r=t.call(e!==undefined?e:this,n,i);if(r!==undefined){i[i.length-1]=r}}}function g(t,e,n){return function(i,r){var a=t.call(n!==undefined?n:this,i,r);if(a!==undefined){var o=r[r.length-1];var s=e!==undefined?e:i.localName;var l=void 0;if(s in o){l=o[s]}else{l=o[s]=[]}l.push(a)}}}function m(t,e,n){return function(i,r){var a=t.call(n!==undefined?n:this,i,r);if(a!==undefined){var o=r[r.length-1];var s=e!==undefined?e:i.localName;o[s]=a}}}function _(t,e){return function(n,i,r){t.call(e!==undefined?e:this,n,i,r);var a=r[r.length-1];var o=a.node;o.appendChild(n)}}function y(t,e){var n=void 0,i=void 0;return function(e,r,a){if(n===undefined){n={};var o={};o[e.localName]=t;n[e.namespaceURI]=o;i=b(e.localName)}O(n,i,r,a)}}function b(t,e){var n=t;return function(t,i,r){var a=i[i.length-1];var s=a.node;var l=n;if(l===undefined){l=r}var u=e;if(e===undefined){u=s.namespaceURI}return o(u,l)}}var w=b();function x(t,e){var n=e.length;var i=new Array(n);for(var r=0;r<n;++r){i[r]=t[e[r]]}return i}function S(t,e,n){var i=n!==undefined?n:{};var r=void 0,a=void 0;for(r=0,a=t.length;r<a;++r){i[t[r]]=e}return i}function C(t,e,n,i){var r=void 0;for(r=e.firstElementChild;r;r=r.nextElementSibling){var a=t[r.namespaceURI];if(a!==undefined){var o=a[r.localName];if(o!==undefined){o.call(i,r,n)}}}}function E(t,e,n,i,r){i.push(t);C(e,n,i,r);return i.pop()}function O(t,e,n,i,r,a){var o=(r!==undefined?r:n).length;var s=void 0,l=void 0;for(var u=0;u<o;++u){s=n[u];if(s!==undefined){l=e.call(a,s,i,r!==undefined?r[u]:undefined);if(l!==undefined){t[l.namespaceURI][l.localName].call(a,l,s,i)}}}}function T(t,e,n,i,r,a,o){r.push(t);O(e,n,i,r,a,o);return r.pop()}},function(t,e,n){"use strict";var i=1;var r=770;var a=36064;var o=16384;var s=4;var l=5;var u=771;var c=34962;var f=34963;var h=35040;var d=35044;var p=35048;var v=2884;var g=3042;var m=2960;var _=2929;var y=3089;var b=5121;var w=5123;var x=5125;var S=5126;var C=6408;var E=35632;var O=35633;var T=35714;var M=9729;var I=10240;var R=10241;var N=10242;var A=10243;var L=3553;var P=33984;var D=33071;var j=35713;var k=36160;var F=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function $(t,e){var n=F.length;for(var i=0;i<n;++i){try{var r=t.getContext(F[i],e);if(r){return r}}catch(t){}}return null}n.d(e,"a",function(){return V});n.d(e,"b",function(){return B});n.d(e,"d",function(){return W});n.d(e,"c",function(){return X});var G=true;var U=void 0;var Y=void 0;var V=false;if(typeof window!=="undefined"&&"WebGLRenderingContext"in window){try{var H=document.createElement("CANVAS");var z=$(H,{failIfMajorPerformanceCaveat:true});if(z){V=true;U=z.getParameter(z.MAX_TEXTURE_SIZE);Y=z.getSupportedExtensions()}}catch(t){}}var B="v4.6.4";function W(t,e){t.prototype=Object.create(e.prototype);t.prototype.constructor=t}var q=0;function X(t){return t.ol_uid||(t.ol_uid=++q)}},function(t,e,n){"use strict";var i={};i.assert=function(t,e,n){return t};i.assertNumber=function(t,e,n){return t};i.assertString=function(t,e,n){return t};i.assertFunction=function(t,e,n){return t};i.assertObject=function(t,e,n){return t};i.assertArray=function(t,e,n){return t};i.assertBoolean=function(t,e,n){return t};i.assertElement=function(t,e,n){return t};i.assertInstanceof=function(t,e,n,i){return t};i.assertObjectPrototypeIsIntact=function(){};e["a"]=i},function(t,e,n){"use strict";n.d(e,"a",function(){return u});n.d(e,"b",function(){return c});n.d(e,"c",function(){return f});n.d(e,"e",function(){return h});n.d(e,"d",function(){return d});var i=n(9);function r(t){var e=function e(n){var i=t.listener;var r=t.bindTo||t.target;if(t.callOnce){h(t)}return i.call(r,n)};t.boundListener=e;return e}function a(t,e,n,i){var r=void 0;for(var a=0,o=t.length;a<o;++a){r=t[a];if(r.listener===e&&r.bindTo===n){if(i){r.deleteIndex=a}return r}}return undefined}function o(t,e){var n=t.ol_lm;return n?n[e]:undefined}function s(t){var e=t.ol_lm;if(!e){e=t.ol_lm={}}return e}function l(t,e){var n=o(t,e);if(n){for(var r=0,a=n.length;r<a;++r){t.removeEventListener(e,n[r].boundListener);Object(i["b"])(n[r])}n.length=0;var s=t.ol_lm;if(s){delete s[e];if(Object.keys(s).length===0){delete t.ol_lm}}}}function u(t,e,n,i,o){var l=s(t);var u=l[e];if(!u){u=l[e]=[]}var c=a(u,n,i,false);if(c){if(!o){c.callOnce=false}}else{c={bindTo:i,callOnce:!!o,listener:n,target:t,type:e};t.addEventListener(e,r(c));u.push(c)}return c}function c(t,e,n,i){return u(t,e,n,i,true)}function f(t,e,n,i){var r=o(t,e);if(r){var s=a(r,n,i,true);if(s){h(s)}}}function h(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=o(t.target,t.type);if(e){var n="deleteIndex"in t?t.deleteIndex:e.indexOf(t);if(n!==-1){e.splice(n,1)}if(e.length===0){l(t.target,t.type)}}Object(i["b"])(t)}}function d(t){var e=s(t);for(var n in e){l(t,n)}}},function(t,e,n){"use strict";n.d(e,"b",function(){return o});n.d(e,"c",function(){return l});n.d(e,"d",function(){return u});n.d(e,"e",function(){return c});n.d(e,"f",function(){return f});n.d(e,"g",function(){return h});n.d(e,"h",function(){return d});n.d(e,"i",function(){return p});n.d(e,"j",function(){return v});n.d(e,"k",function(){return g});n.d(e,"l",function(){return m});n.d(e,"m",function(){return _});n.d(e,"n",function(){return y});n.d(e,"o",function(){return b});n.d(e,"p",function(){return x});n.d(e,"q",function(){return S});n.d(e,"r",function(){return C});n.d(e,"s",function(){return O});n.d(e,"t",function(){return I});n.d(e,"u",function(){return R});n.d(e,"v",function(){return N});n.d(e,"w",function(){return A});n.d(e,"x",function(){return L});n.d(e,"y",function(){return P});n.d(e,"z",function(){return j});n.d(e,"A",function(){return k});n.d(e,"B",function(){return $});n.d(e,"C",function(){return Y});n.d(e,"D",function(){return V});n.d(e,"E",function(){return H});n.d(e,"F",function(){return z});n.d(e,"H",function(){return B});n.d(e,"I",function(){return W});n.d(e,"J",function(){return q});n.d(e,"G",function(){return X});n.d(e,"a",function(){return K});var i=n(27);var r=n(252);var a=n(111);function o(t){var e=v();for(var n=0,i=t.length;n<i;++n){C(e,t[n])}return e}function s(t,e,n){var i=Math.min.apply(null,t);var r=Math.min.apply(null,e);var a=Math.max.apply(null,t);var o=Math.max.apply(null,e);return g(i,r,a,o,n)}function l(t,e,n){if(n){n[0]=t[0]-e;n[1]=t[1]-e;n[2]=t[2]+e;n[3]=t[3]+e;return n}else{return[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}}function u(t,e){if(e){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];return e}else{return t.slice()}}function c(t,e,n){var i=void 0,r=void 0;if(e<t[0]){i=t[0]-e}else if(t[2]<e){i=e-t[2]}else{i=0}if(n<t[1]){r=t[1]-n}else if(t[3]<n){r=n-t[3]}else{r=0}return i*i+r*r}function f(t,e){return d(t,e[0],e[1])}function h(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function d(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function p(t,e){var n=t[0];var i=t[1];var r=t[2];var o=t[3];var s=e[0];var l=e[1];var u=a["a"].UNKNOWN;if(s<n){u=u|a["a"].LEFT}else if(s>r){u=u|a["a"].RIGHT}if(l<i){u=u|a["a"].BELOW}else if(l>o){u=u|a["a"].ABOVE}if(u===a["a"].UNKNOWN){u=a["a"].INTERSECTING}return u}function v(){return[Infinity,Infinity,-Infinity,-Infinity]}function g(t,e,n,i,r){if(r){r[0]=t;r[1]=e;r[2]=n;r[3]=i;return r}else{return[t,e,n,i]}}function m(t){return g(Infinity,Infinity,-Infinity,-Infinity,t)}function _(t,e){var n=t[0];var i=t[1];return g(n,i,n,i,e)}function y(t,e){var n=m(e);return E(n,t)}function b(t,e,n,i,r){var a=m(r);return O(a,t,e,n,i)}function w(t,e){var n=m(e);return T(n,t)}function x(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function S(t,e){if(e[0]<t[0]){t[0]=e[0]}if(e[2]>t[2]){t[2]=e[2]}if(e[1]<t[1]){t[1]=e[1]}if(e[3]>t[3]){t[3]=e[3]}return t}function C(t,e){if(e[0]<t[0]){t[0]=e[0]}if(e[0]>t[2]){t[2]=e[0]}if(e[1]<t[1]){t[1]=e[1]}if(e[1]>t[3]){t[3]=e[1]}}function E(t,e){for(var n=0,i=e.length;n<i;++n){C(t,e[n])}return t}function O(t,e,n,i,r){for(;n<i;n+=r){M(t,e[n],e[n+1])}return t}function T(t,e){for(var n=0,i=e.length;n<i;++n){E(t,e[n])}return t}function M(t,e,n){t[0]=Math.min(t[0],e);t[1]=Math.min(t[1],n);t[2]=Math.max(t[2],e);t[3]=Math.max(t[3],n)}function I(t,e,n){var i=void 0;i=e.call(n,N(t));if(i){return i}i=e.call(n,A(t));if(i){return i}i=e.call(n,V(t));if(i){return i}i=e.call(n,Y(t));if(i){return i}return false}function R(t){var e=0;if(!B(t)){e=H(t)*k(t)}return e}function N(t){return[t[0],t[1]]}function A(t){return[t[2],t[1]]}function L(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function P(t,e){var n=void 0;if(e===r["a"].BOTTOM_LEFT){n=N(t)}else if(e===r["a"].BOTTOM_RIGHT){n=A(t)}else if(e===r["a"].TOP_LEFT){n=Y(t)}else if(e===r["a"].TOP_RIGHT){n=V(t)}else{Object(i["a"])(false,13)}return n}function D(t,e){var n=Math.min(t[0],e[0]);var i=Math.min(t[1],e[1]);var r=Math.max(t[2],e[2]);var a=Math.max(t[3],e[3]);return(r-n)*(a-i)}function j(t,e,n,i,r){var a=e*i[0]/2;var o=e*i[1]/2;var s=Math.cos(n);var l=Math.sin(n);var u=a*s;var c=a*l;var f=o*s;var h=o*l;var d=t[0];var p=t[1];var v=d-u+h;var m=d-u-h;var _=d+u-h;var y=d+u+h;var b=p-c-f;var w=p-c+f;var x=p+c+f;var S=p+c-f;return g(Math.min(v,m,_,y),Math.min(b,w,x,S),Math.max(v,m,_,y),Math.max(b,w,x,S),r)}function k(t){return t[3]-t[1]}function F(t,e){var n=$(t,e);return R(n)}function $(t,e,n){var i=n?n:v();if(z(t,e)){if(t[0]>e[0]){i[0]=t[0]}else{i[0]=e[0]}if(t[1]>e[1]){i[1]=t[1]}else{i[1]=e[1]}if(t[2]<e[2]){i[2]=t[2]}else{i[2]=e[2]}if(t[3]<e[3]){i[3]=t[3]}else{i[3]=e[3]}}else{m(i)}return i}function G(t){return H(t)+k(t)}function U(t){return[t[2]-t[0],t[3]-t[1]]}function Y(t){return[t[0],t[3]]}function V(t){return[t[2],t[3]]}function H(t){return t[2]-t[0]}function z(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function B(t){return t[2]<t[0]||t[3]<t[1]}function W(t,e){if(e){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];return e}else{return t}}function q(t,e){var n=(t[2]-t[0])/2*(e-1);var i=(t[3]-t[1])/2*(e-1);t[0]-=n;t[2]+=n;t[1]-=i;t[3]+=i}function X(t,e,n){var i=false;var r=p(t,e);var o=p(t,n);if(r===a["a"].INTERSECTING||o===a["a"].INTERSECTING){i=true}else{var s=t[0];var l=t[1];var u=t[2];var c=t[3];var f=e[0];var h=e[1];var d=n[0];var v=n[1];var g=(v-h)/(d-f);var m=void 0,_=void 0;if(!!(o&a["a"].ABOVE)&&!(r&a["a"].ABOVE)){m=d-(v-c)/g;i=m>=s&&m<=u}if(!i&&!!(o&a["a"].RIGHT)&&!(r&a["a"].RIGHT)){_=v-(d-u)*g;i=_>=l&&_<=c}if(!i&&!!(o&a["a"].BELOW)&&!(r&a["a"].BELOW)){m=d-(v-l)/g;i=m>=s&&m<=u}if(!i&&!!(o&a["a"].LEFT)&&!(r&a["a"].LEFT)){_=v-(d-s)*g;i=_>=l&&_<=c}}return i}function K(t,e,n){var i=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];e(i,i,2);var r=[i[0],i[2],i[4],i[6]];var a=[i[1],i[3],i[5],i[7]];return s(r,a,n)}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});n.d(e,"b",function(){return o});n.d(e,"c",function(){return s});n.d(e,"d",function(){return l});n.d(e,"e",function(){return u});n.d(e,"f",function(){return c});n.d(e,"g",function(){return f});n.d(e,"h",function(){return h});n.d(e,"i",function(){return d});n.d(e,"j",function(){return p});n.d(e,"k",function(){return v});n.d(e,"l",function(){return g});n.d(e,"m",function(){return m});n.d(e,"n",function(){return _});var i=n(0);var r=n(142);function a(t){var e=Object(i["e"])(t,false);return o(e)}function o(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e){return e[1]!==undefined||false}else{return undefined}}function s(t){var e=Object(i["e"])(t,false);var n=Date.parse(e);return isNaN(n)?undefined:n/1e3}function l(t){var e=Object(i["e"])(t,false);return u(e)}function u(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e){return parseFloat(e[1])}else{return undefined}}function c(t){var e=Object(i["e"])(t,false);return f(e)}function f(t){var e=/^\s*(\d+)\s*$/.exec(t);if(e){return parseInt(e[1],10)}else{return undefined}}function h(t){return Object(i["e"])(t,false).trim()}function d(t,e){_(t,e?"1":"0")}function p(t,e){t.appendChild(i["a"].createCDATASection(e))}function v(t,e){var n=new Date(e*1e3);var a=n.getUTCFullYear()+"-"+Object(r["b"])(n.getUTCMonth()+1,2)+"-"+Object(r["b"])(n.getUTCDate(),2)+"T"+Object(r["b"])(n.getUTCHours(),2)+":"+Object(r["b"])(n.getUTCMinutes(),2)+":"+Object(r["b"])(n.getUTCSeconds(),2)+"Z";t.appendChild(i["a"].createTextNode(a))}function g(t,e){var n=e.toPrecision();t.appendChild(i["a"].createTextNode(n))}function m(t,e){var n=e.toString();t.appendChild(i["a"].createTextNode(n))}function _(t,e){t.appendChild(i["a"].createTextNode(e))}},function(t,e,n){"use strict";n.d(e,"c",function(){return a});n.d(e,"h",function(){return o});n.d(e,"i",function(){return s});n.d(e,"k",function(){return l});n.d(e,"m",function(){return u});n.d(e,"d",function(){return c});n.d(e,"j",function(){return f});n.d(e,"l",function(){return h});n.d(e,"e",function(){return d});n.d(e,"f",function(){return p});n.d(e,"g",function(){return v});n.d(e,"r",function(){return g});n.d(e,"p",function(){return m});n.d(e,"n",function(){return _});n.d(e,"o",function(){return y});n.d(e,"q",function(){return b});n.d(e,"s",function(){return w});n.d(e,"a",function(){return S});n.d(e,"b",function(){return C});n.d(e,"t",function(){return O});var i=n(71);var r=n(123);var a=/\d/;var o=/\d\d/;var s=/\d{3}/;var l=/\d{4}/;var u=/[+-]?\d{6}/;var c=/\d\d?/;var f=/\d\d\d\d?/;var h=/\d\d\d\d\d\d?/;var d=/\d{1,3}/;var p=/\d{1,4}/;var v=/[+-]?\d{1,6}/;var g=/\d+/;var m=/[+-]?\d+/;var _=/Z|[+-]\d\d:?\d\d/gi;var y=/Z|[+-]\d\d(?::?\d\d)?/gi;var b=/[+-]?\d+(\.\d{1,3})?/;var w=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var x={};function S(t,e,n){x[t]=Object(r["a"])(e)?e:function(t,i){return t&&n?n:e}}function C(t,e){if(!Object(i["a"])(x,t)){return new RegExp(E(t))}return x[t](e._strict,e._locale)}function E(t){return O(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r}))}function O(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});n.d(e,"i",function(){return r});n.d(e,"f",function(){return a});n.d(e,"h",function(){return o});n.d(e,"k",function(){return s});n.d(e,"c",function(){return l});n.d(e,"j",function(){return u});n.d(e,"d",function(){return c});n.d(e,"b",function(){return f});n.d(e,"l",function(){return h});n.d(e,"e",function(){return d});n.d(e,"g",function(){return p});function i(t,e,n){var i=void 0,a=void 0;var o=n||r;var s=0;var l=t.length;var u=false;while(s<l){i=s+(l-s>>1);a=+o(t[i],e);if(a<0){s=i+1}else{l=i;u=!a}}return u?s:~s}function r(t,e){return t>e?1:t<e?-1:0}function a(t,e){return t.indexOf(e)>=0}function o(t,e,n){var i=t.length;if(t[0]<=e){return 0}else if(e<=t[i-1]){return i-1}else{var r=void 0;if(n>0){for(r=1;r<i;++r){if(t[r]<e){return r-1}}}else if(n<0){for(r=1;r<i;++r){if(t[r]<=e){return r}}}else{for(r=1;r<i;++r){if(t[r]==e){return r}else if(t[r]<e){if(t[r-1]-e<e-t[r]){return r-1}else{return r}}}}return i-1}}function s(t,e,n){while(e<n){var i=t[e];t[e]=t[n];t[n]=i;++e;--n}}function l(t,e){var n=Array.isArray(e)?e:[e];var i=n.length;for(var r=0;r<i;r++){t[t.length]=n[r]}}function u(t,e){var n=t.indexOf(e);var i=n>-1;if(i){t.splice(n,1)}return i}function c(t,e){var n=t.length>>>0;var i=void 0;for(var r=0;r<n;r++){i=t[r];if(e(i,r,t)){return i}}return null}function f(t,e){var n=t.length;if(n!==e.length){return false}for(var i=0;i<n;i++){if(t[i]!==e[i]){return false}}return true}function h(t,e){var n=t.length;var i=Array(t.length);var r=void 0;for(r=0;r<n;r++){i[r]={index:r,value:t[r]}}i.sort(function(t,n){return e(t.value,n.value)||t.index-n.index});for(r=0;r<t.length;r++){t[r]=i[r].value}}function d(t,e){var n=void 0;var i=!t.every(function(i,r){n=r;return!e(i,r,t)});return i?n:-1}function p(t,e,n){var i=e||r;return t.every(function(e,r){if(r===0){return true}var a=i(t[r-1],e);return!(a>0||n&&a===0)})}},function(t,e,n){"use strict";e["a"]={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});n.d(e,"b",function(){return r});n.d(e,"c",function(){return a});n.d(e,"d",function(){return o});var i=typeof Object.assign==="function"?Object.assign:function(t,e){if(t===undefined||t===null){throw new TypeError("Cannot convert undefined or null to object")}var n=Object(t);for(var i=1,r=arguments.length;i<r;++i){var a=arguments[i];if(a!==undefined&&a!==null){for(var o in a){if(a.hasOwnProperty(o)){n[o]=a[o]}}}}return n};function r(t){for(var e in t){delete t[e]}}function a(t){var e=[];for(var n in t){e.push(t[n])}return e}function o(t){var e=void 0;for(e in t){return false}return!e}},function(t,e,n){"use strict";var i=n(230);var r=n(4);var a=n(15);var o=n(1);var s=n(166);var l=n(85);var u=6378137;var c=Math.PI*u;var f=[-c,-c,c,c];var h=[-180,-85,180,85];function d(t){s["a"].call(this,{code:t,units:l["b"].METERS,extent:f,global:true,worldExtent:h,getPointResolution:function t(e,n){return e/Object(a["b"])(n[1]/u)}})}Object(o["d"])(d,s["a"]);var p=[new d("EPSG:3857"),new d("EPSG:102100"),new d("EPSG:102113"),new d("EPSG:900913"),new d("urn:ogc:def:crs:EPSG:6.18:3:3857"),new d("urn:ogc:def:crs:EPSG::3857"),new d("http://www.opengis.net/gml/srs/epsg.xml#3857")];function v(t,e,n){var i=t.length;var r=n>1?n:2;var a=e;if(a===undefined){if(r>2){a=t.slice()}else{a=new Array(i)}}var o=c;for(var s=0;s<i;s+=r){a[s]=o*t[s]/180;var l=u*Math.log(Math.tan(Math.PI*(t[s+1]+90)/360));if(l>o){l=o}else if(l<-o){l=-o}a[s+1]=l}return a}function g(t,e,n){var i=t.length;var r=n>1?n:2;var a=e;if(a===undefined){if(r>2){a=t.slice()}else{a=new Array(i)}}for(var o=0;o<i;o+=r){a[o]=180*t[o]/c;a[o+1]=360*Math.atan(Math.exp(t[o+1]/u))/Math.PI-90}return a}var m=6378137;var _=[-180,-90,180,90];var y=Math.PI*m/180;function b(t,e){s["a"].call(this,{code:t,units:l["b"].DEGREES,extent:_,axisOrientation:e,global:true,metersPerUnit:y,worldExtent:_})}Object(o["d"])(b,s["a"]);var w=[new b("CRS:84"),new b("EPSG:4326","neu"),new b("urn:ogc:def:crs:EPSG::4326","neu"),new b("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new b("urn:ogc:def:crs:OGC:1.3:CRS84"),new b("urn:ogc:def:crs:OGC:2:84"),new b("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new b("urn:x-ogc:def:crs:EPSG:4326","neu")];var x={};function S(){x={}}function C(t){return x[t]||null}function E(t,e){x[t]=e}var O=n(181);n.d(e,"l",function(){return M});n.d(e,"d",function(){return I});n.d(e,"h",function(){return N});n.d(e,"i",function(){return A});n.d(e,"c",function(){return L});n.d(e,"e",function(){return j});n.d(e,"b",function(){return F});n.d(e,"g",function(){return $});n.d(e,"m",function(){return G});n.d(e,"f",function(){return U});n.d(e,"k",function(){return Y});n.d(e,"j",function(){return V});n.d(e,"n",function(){return H});n.d(e,"o",function(){return z});n.d(e,"a",function(){return l["a"]});function T(t,e,n){var i=void 0;if(e!==undefined){for(var r=0,a=t.length;r<a;++r){e[r]=t[r]}i=e}else{i=t.slice()}return i}function M(t,e,n){if(e!==undefined&&t!==e){for(var i=0,r=t.length;i<r;++i){e[i]=t[i]}t=e}return t}function I(t){E(t.getCode(),t);Object(O["a"])(t,t,T)}function R(t){t.forEach(I)}function N(t){var e=null;if(t instanceof s["a"]){e=t}else if(typeof t==="string"){var n=t;e=C(n)}return e}function A(t,e,n,r){t=N(t);var a=void 0;var o=t.getPointResolutionFunc();if(o){a=o(e,n)}else{var s=t.getUnits();if(s==l["b"].DEGREES&&!r||r==l["b"].DEGREES){a=e}else{var u=Y(t,N("EPSG:4326"));var c=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];c=u(c,c,2);var f=Object(i["b"])(c.slice(0,2),c.slice(2,4));var h=Object(i["b"])(c.slice(4,6),c.slice(6,8));a=(f+h)/2;var d=r?l["a"][r]:t.getMetersPerUnit();if(d!==undefined){a/=d}}}return a}function L(t){R(t);t.forEach(function(e){t.forEach(function(t){if(e!==t){Object(O["a"])(e,t,T)}})})}function P(t,e,n,i){t.forEach(function(t){e.forEach(function(e){Object(O["a"])(t,e,n);Object(O["a"])(e,t,i)})})}function D(){S();Object(O["b"])()}function j(t,e){if(!t){return N(e)}else if(typeof t==="string"){return N(t)}else{return t}}function k(t){return function(e,n,i){var r=e.length;var a=i!==undefined?i:2;var o=n!==undefined?n:new Array(r);var s=void 0,l=void 0,u=void 0;for(l=0;l<r;l+=a){s=t([e[l],e[l+1]]);o[l]=s[0];o[l+1]=s[1];for(u=a-1;u>=2;--u){o[l+u]=e[l+u]}}return o}}function F(t,e,n,i){var r=N(t);var a=N(e);Object(O["a"])(r,a,k(n));Object(O["a"])(a,r,k(i))}function $(t,e){return H(t,"EPSG:4326",e!==undefined?e:"EPSG:3857")}function G(t,e){var n=H(t,e!==undefined?e:"EPSG:3857","EPSG:4326");var i=n[0];if(i<-180||i>180){n[0]=Object(a["d"])(i+180,360)-180}return n}function U(t,e){if(t===e){return true}var n=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode()){return n}else{var i=Y(t,e);return i===T&&n}}function Y(t,e){var n=t.getCode();var i=e.getCode();var r=Object(O["c"])(n,i);if(!r){r=M}return r}function V(t,e){var n=N(t);var i=N(e);return Y(n,i)}function H(t,e,n){var i=V(e,n);return i(t,undefined,t.length)}function z(t,e,n){var i=V(e,n);return Object(r["a"])(t,i)}function B(t,e,n){var i=Y(e,n);return i(t)}function W(){L(p);L(w);P(w,p,v,g)}W()},function(t,e,n){"use strict";e["a"]={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},function(t,e,n){"use strict";n.d(e,"d",function(){return u});n.d(e,"a",function(){return f});n.d(e,"b",function(){return h});var i=n(27);var r=n(8);var a=n(68);var o=n(33);var s=n(35);var l=function t(e){var n=e||{};this.geometry_=null;this.geometryFunction_=d;if(n.geometry!==undefined){this.setGeometry(n.geometry)}this.fill_=n.fill!==undefined?n.fill:null;this.image_=n.image!==undefined?n.image:null;this.renderer_=n.renderer!==undefined?n.renderer:null;this.stroke_=n.stroke!==undefined?n.stroke:null;this.text_=n.text!==undefined?n.text:null;this.zIndex_=n.zIndex};l.prototype.clone=function(){var t=this.getGeometry();if(t&&t.clone){t=t.clone()}return new l({geometry:t,fill:this.getFill()?this.getFill().clone():undefined,image:this.getImage()?this.getImage().clone():undefined,stroke:this.getStroke()?this.getStroke().clone():undefined,text:this.getText()?this.getText().clone():undefined,zIndex:this.getZIndex()})};l.prototype.getRenderer=function(){return this.renderer_};l.prototype.setRenderer=function(t){this.renderer_=t};l.prototype.getGeometry=function(){return this.geometry_};l.prototype.getGeometryFunction=function(){return this.geometryFunction_};l.prototype.getFill=function(){return this.fill_};l.prototype.setFill=function(t){this.fill_=t};l.prototype.getImage=function(){return this.image_};l.prototype.setImage=function(t){this.image_=t};l.prototype.getStroke=function(){return this.stroke_};l.prototype.setStroke=function(t){this.stroke_=t};l.prototype.getText=function(){return this.text_};l.prototype.setText=function(t){this.text_=t};l.prototype.getZIndex=function(){return this.zIndex_};l.prototype.setGeometry=function(t){if(typeof t==="function"){this.geometryFunction_=t}else if(typeof t==="string"){this.geometryFunction_=function(e){return e.get(t)}}else if(!t){this.geometryFunction_=d}else if(t!==undefined){this.geometryFunction_=function(){return t}}this.geometry_=t};l.prototype.setZIndex=function(t){this.zIndex_=t};function u(t){var e=void 0;if(typeof t==="function"){e=t}else{var n=void 0;if(Array.isArray(t)){n=t}else{Object(i["a"])(t instanceof l,41);n=[t]}e=function t(){return n}}return e}var c=null;function f(t,e){if(!c){var n=new o["a"]({color:"rgba(255,255,255,0.4)"});var i=new s["a"]({color:"#3399CC",width:1.25});c=[new l({image:new a["a"]({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return c}function h(){var t={};var e=[255,255,255,1];var n=[0,153,255,1];var i=3;t[r["a"].POLYGON]=[new l({fill:new o["a"]({color:[255,255,255,.5]})})];t[r["a"].MULTI_POLYGON]=t[r["a"].POLYGON];t[r["a"].LINE_STRING]=[new l({stroke:new s["a"]({color:e,width:i+2})}),new l({stroke:new s["a"]({color:n,width:i})})];t[r["a"].MULTI_LINE_STRING]=t[r["a"].LINE_STRING];t[r["a"].CIRCLE]=t[r["a"].POLYGON].concat(t[r["a"].LINE_STRING]);t[r["a"].POINT]=[new l({image:new a["a"]({radius:i*2,fill:new o["a"]({color:n}),stroke:new s["a"]({color:e,width:i/2})}),zIndex:Infinity})];t[r["a"].MULTI_POINT]=t[r["a"].POINT];t[r["a"].GEOMETRY_COLLECTION]=t[r["a"].POLYGON].concat(t[r["a"].LINE_STRING],t[r["a"].POINT]);return t}function d(t){return t.getGeometry()}e["c"]=l},function(t,e,n){"use strict";var i={ANGLE:"a",COLOR:"c",IS_CIRCLE:"l",IS_RECTANGLE:"r",IS_TEXT:"t",NAME:"n",SHOW_LABEL:"b",OPACITY:"o",AZIMUT:"z",SHOW_MEASURE:"m",SIZE:"s",STROKE:"k"};e["a"]=i},function(t,e,n){"use strict";var i=n(27);var r=n(3);var a=n(11);var o=n(1);var s=n(39);var l=n(81);var u=n(12);var c=function t(e){s["a"].call(this);this.id_=undefined;this.geometryName_="geometry";this.style_=null;this.styleFunction_=undefined;this.geometryChangeKey_=null;Object(r["a"])(this,Object(s["b"])(this.geometryName_),this.handleGeometryChanged_,this);if(e!==undefined){if(e instanceof l["a"]||!e){var n=e;this.setGeometry(n)}else{var i=e;this.setProperties(i)}}};Object(o["d"])(c,s["a"]);c.prototype.clone=function(){var t=new c(this.getProperties());t.setGeometryName(this.getGeometryName());var e=this.getGeometry();if(e){t.setGeometry(e.clone())}var n=this.getStyle();if(n){t.setStyle(n)}return t};c.prototype.getGeometry=function(){return this.get(this.geometryName_)};c.prototype.getId=function(){return this.id_};c.prototype.getGeometryName=function(){return this.geometryName_};c.prototype.getStyle=function(){return this.style_};c.prototype.getStyleFunction=function(){return this.styleFunction_};c.prototype.handleGeometryChange_=function(){this.changed()};c.prototype.handleGeometryChanged_=function(){if(this.geometryChangeKey_){Object(r["e"])(this.geometryChangeKey_);this.geometryChangeKey_=null}var t=this.getGeometry();if(t){this.geometryChangeKey_=Object(r["a"])(t,a["a"].CHANGE,this.handleGeometryChange_,this)}this.changed()};c.prototype.setGeometry=function(t){this.set(this.geometryName_,t)};c.prototype.setStyle=function(t){this.style_=t;this.styleFunction_=!t?undefined:f(t);this.changed()};c.prototype.setId=function(t){this.id_=t;this.changed()};c.prototype.setGeometryName=function(t){Object(r["c"])(this,Object(s["b"])(this.geometryName_),this.handleGeometryChanged_,this);this.geometryName_=t;Object(r["a"])(this,Object(s["b"])(this.geometryName_),this.handleGeometryChanged_,this);this.handleGeometryChanged_()};function f(t){if(typeof t==="function"){return t}else{var e=void 0;if(Array.isArray(t)){e=t}else{Object(i["a"])(t instanceof u["c"],41);e=[t]}return function(){return e}}}e["a"]=c},function(t,e,n){"use strict";n.d(e,"a",function(){return r});n.d(e,"b",function(){return a});n.d(e,"g",function(){return s});n.d(e,"f",function(){return l});n.d(e,"e",function(){return u});n.d(e,"h",function(){return c});n.d(e,"i",function(){return f});n.d(e,"d",function(){return h});n.d(e,"c",function(){return d});var i=n(27);function r(t,e,n){return Math.min(Math.max(t,e),n)}var a=function(){var t=void 0;if("cosh"in Math){t=Math.cosh}else{t=function t(e){var n=Math.exp(e);return(n+1/n)/2}}return t}();function o(t){Object(i["a"])(0<t,29);return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function s(t,e,n,i,r,a){var o=r-n;var s=a-i;if(o!==0||s!==0){var u=((t-n)*o+(e-i)*s)/(o*o+s*s);if(u>1){n=r;i=a}else if(u>0){n+=o*u;i+=s*u}}return l(t,e,n,i)}function l(t,e,n,i){var r=n-t;var a=i-e;return r*r+a*a}function u(t){var e=t.length;for(var n=0;n<e;n++){var i=n;var r=Math.abs(t[n][n]);for(var a=n+1;a<e;a++){var o=Math.abs(t[a][n]);if(o>r){r=o;i=a}}if(r===0){return null}var s=t[i];t[i]=t[n];t[n]=s;for(var l=n+1;l<e;l++){var u=-t[l][n]/t[n][n];for(var c=n;c<e+1;c++){if(n==c){t[l][c]=0}else{t[l][c]+=u*t[n][c]}}}}var f=new Array(e);for(var h=e-1;h>=0;h--){f[h]=t[h][e]/t[h][h];for(var d=h-1;d>=0;d--){t[d][e]-=t[d][h]*f[h]}}return f}function c(t){return t*180/Math.PI}function f(t){return t*Math.PI/180}function h(t,e){var n=t%e;return n*e<0?n+e:n}function d(t,e,n){return t+n*(e-t)}},function(t,e,n){"use strict";n.d(e,"c",function(){return l});n.d(e,"b",function(){return u});n.d(e,"d",function(){return c});n.d(e,"e",function(){return f});n.d(e,"f",function(){return h});n.d(e,"g",function(){return d});n.d(e,"i",function(){return p});n.d(e,"k",function(){return v});n.d(e,"l",function(){return g});n.d(e,"m",function(){return m});n.d(e,"j",function(){return _});n.d(e,"h",function(){return y});n.d(e,"o",function(){return b});n.d(e,"a",function(){return C});n.d(e,"p",function(){return O});n.d(e,"q",function(){return T});n.d(e,"s",function(){return M});n.d(e,"r",function(){return I});n.d(e,"n",function(){return R});var i=n(62);var r=n(47);var a=n(9);var o=n(291);var s=n(40);var l="10px sans-serif";var u=[0,0,0,1];var c="round";var f=[];var h=0;var d="round";var p=10;var v=[0,0,0,1];var g="center";var m="middle";var _=[0,0,0,0];var y=1;var b=new o["a"];var w={};var x=null;var S={};var C=function(){var t=60;var e=w;var n="32px ";var r=["monospace","serif"];var o=r.length;var s="wmytzilWMYTZIL@#/&?$%10";var l=void 0,u=void 0;function c(t){var e=E();var i=true;for(var a=0;a<o;++a){var l=r[a];e.font=n+l;u=e.measureText(s).width;if(t!=l){e.font=n+t+","+l;var c=e.measureText(s).width;i=i&&c!=u}}return i}function f(){var n=true;for(var i in e){if(e[i]<t){if(c(i)){e[i]=t;Object(a["b"])(S);x=null;b.clear()}else{++e[i];n=false}}}if(n){clearInterval(l);l=undefined}}return function(n){var r=Object(i["g"])(n);if(!r){return}for(var a=0,o=r.length;a<o;++a){var s=r[a];if(!(s in e)){e[s]=t;if(!c(s)){e[s]=0;if(l===undefined){l=setInterval(f,32)}}}}}}();function E(){if(!x){x=Object(r["a"])(1,1)}return x}var O=function(){var t=void 0;var e=S;return function(n){var i=e[n];if(i==undefined){if(!t){t=document.createElement("span");t.textContent="M";t.style.margin=t.style.padding="0 !important";t.style.position="absolute !important";t.style.left="-99999px !important"}t.style.font=n;document.body.appendChild(t);i=e[n]=t.offsetHeight;document.body.removeChild(t)}return i}}();function T(t,e){var n=E();if(t!=n.font){n.font=t}return n.measureText(e).width}function M(t,e,n,i){if(e!==0){t.translate(n,i);t.rotate(e);t.translate(-n,-i)}}var I=Object(s["c"])();function R(t,e,n,i,r,a,o,s,l,u,c){var f=void 0;if(n!=1){f=t.globalAlpha;t.globalAlpha=f*n}if(e){t.setTransform.apply(t,e)}t.drawImage(i,r,a,o,s,l,u,o*c,s*c);if(f){t.globalAlpha=f}if(e){t.setTransform.apply(t,I)}}},function(t,e,n){"use strict";n.d(e,"i",function(){return i});n.d(e,"e",function(){return r});n.d(e,"a",function(){return a});n.d(e,"b",function(){return o});n.d(e,"d",function(){return s});n.d(e,"f",function(){return l});n.d(e,"c",function(){return u});n.d(e,"g",function(){return c});n.d(e,"h",function(){return f});var i=0;var r=1;var a=2;var o=3;var s=4;var l=5;var u=6;var c=7;var f=8},function(t,e,n){"use strict";n.d(e,"a",function(){return r});n.d(e,"b",function(){return a});var i;function r(){return i.apply(null,arguments)}function a(t){i=t}},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(1);var r=n(370);var a=n(82);var o=n(39);var s=n(42);var l={LENGTH:"length"};var u=function t(e,n){s["a"].call(this,e);this.element=n};Object(i["d"])(u,s["a"]);var c=function t(e,n){o["a"].call(this);var i=n||{};this.unique_=!!i.unique;this.array_=e?e:[];if(this.unique_){for(var r=0,a=this.array_.length;r<a;++r){this.assertUnique_(this.array_[r],r)}}this.updateLength_()};Object(i["d"])(c,o["a"]);c.prototype.clear=function(){while(this.getLength()>0){this.pop()}};c.prototype.extend=function(t){var e=void 0,n=void 0;for(e=0,n=t.length;e<n;++e){this.push(t[e])}return this};c.prototype.forEach=function(t){var e=this.array_;for(var n=0,i=e.length;n<i;++n){t(e[n],n,e)}};c.prototype.getArray=function(){return this.array_};c.prototype.item=function(t){return this.array_[t]};c.prototype.getLength=function(){return this.get(l.LENGTH)};c.prototype.insertAt=function(t,e){if(this.unique_){this.assertUnique_(e)}this.array_.splice(t,0,e);this.updateLength_();this.dispatchEvent(new u(a["a"].ADD,e))};c.prototype.pop=function(){return this.removeAt(this.getLength()-1)};c.prototype.push=function(t){if(this.unique_){this.assertUnique_(t)}var e=this.getLength();this.insertAt(e,t);return this.getLength()};c.prototype.remove=function(t){var e=this.array_;var n=void 0,i=void 0;for(n=0,i=e.length;n<i;++n){if(e[n]===t){return this.removeAt(n)}}return undefined};c.prototype.removeAt=function(t){var e=this.array_[t];this.array_.splice(t,1);this.updateLength_();this.dispatchEvent(new u(a["a"].REMOVE,e));return e};c.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){if(this.unique_){this.assertUnique_(e,t)}var i=this.array_[t];this.array_[t]=e;this.dispatchEvent(new u(a["a"].REMOVE,i));this.dispatchEvent(new u(a["a"].ADD,e))}else{var r=void 0;for(r=n;r<t;++r){this.insertAt(r,undefined)}this.insertAt(t,e)}};c.prototype.updateLength_=function(){this.set(l.LENGTH,this.array_.length)};c.prototype.assertUnique_=function(t,e){for(var n=0,i=this.array_.length;n<i;++n){if(this.array_[n]===t&&n!==e){throw new r["a"](58)}}};e["b"]=c},function(t,e,n){"use strict";n.d(e,"b",function(){return i});n.d(e,"a",function(){return r});n.d(e,"c",function(){return a});function i(){return true}function r(){return false}function a(){}},function(t,e,n){"use strict";var i=n(1);var r=n(4);var a=n(25);var o=n(8);var s=n(69);var l=n(134);var u=n(15);var c=function t(e,n){s["a"].call(this);this.setCoordinates(e,n)};Object(i["d"])(c,s["a"]);c.prototype.clone=function(){var t=new c(null);t.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return t};c.prototype.closestPointXY=function(t,e,n,i){var r=this.flatCoordinates;var a=Object(u["f"])(t,e,r[0],r[1]);if(a<i){var o=this.stride;for(var s=0;s<o;++s){n[s]=r[s]}n.length=o;return a}else{return i}};c.prototype.getCoordinates=function(){return!this.flatCoordinates?[]:this.flatCoordinates.slice()};c.prototype.computeExtent=function(t){return Object(r["m"])(this.flatCoordinates,t)};c.prototype.getType=function(){return o["a"].POINT};c.prototype.intersectsExtent=function(t){return Object(r["h"])(t,this.flatCoordinates[0],this.flatCoordinates[1])};c.prototype.setCoordinates=function(t,e){if(!t){this.setFlatCoordinates(a["a"].XY,null)}else{this.setLayout(e,t,0);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=Object(l["a"])(this.flatCoordinates,0,t,this.stride);this.changed()}};c.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e);this.changed()};e["a"]=c},function(t,e,n){"use strict";n.r(e);var i="http://www.w3.org/1999/xhtml";var r={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var a=function(t){var e=t+="",n=e.indexOf(":");if(n>=0&&(e=t.slice(0,n))!=="xmlns")t=t.slice(n+1);return r.hasOwnProperty(e)?{space:r[e],local:t}:t};function o(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===i&&e.documentElement.namespaceURI===i?e.createElement(t):e.createElementNS(n,t)}}function s(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var l=function(t){var e=a(t);return(e.local?s:o)(e)};function u(){}var c=function(t){return t==null?u:function(){return this.querySelector(t)}};var f=function(t){if(typeof t!=="function")t=c(t);for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r){for(var a=e[r],o=a.length,s=i[r]=new Array(o),l,u,f=0;f<o;++f){if((l=a[f])&&(u=t.call(l,l.__data__,f,a))){if("__data__"in l)u.__data__=l.__data__;s[f]=u}}}return new Wt(i,this._parents)};function h(){return[]}var d=function(t){return t==null?h:function(){return this.querySelectorAll(t)}};var p=function(t){if(typeof t!=="function")t=d(t);for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a){for(var o=e[a],s=o.length,l,u=0;u<s;++u){if(l=o[u]){i.push(t.call(l,l.__data__,u,o));r.push(l)}}}return new Wt(i,r)};var v=function(t){return function(){return this.matches(t)}};if(typeof document!=="undefined"){var g=document.documentElement;if(!g.matches){var m=g.webkitMatchesSelector||g.msMatchesSelector||g.mozMatchesSelector||g.oMatchesSelector;v=function(t){return function(){return m.call(this,t)}}}}var _=v;var y=function(t){if(typeof t!=="function")t=_(t);for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r){for(var a=e[r],o=a.length,s=i[r]=[],l,u=0;u<o;++u){if((l=a[u])&&t.call(l,l.__data__,u,a)){s.push(l)}}}return new Wt(i,this._parents)};var b=function(t){return new Array(t.length)};var w=function(){return new Wt(this._enter||this._groups.map(b),this._parents)};function x(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}x.prototype={constructor:x,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var S=function(t){return function(){return t}};var C="$";function E(t,e,n,i,r,a){var o=0,s,l=e.length,u=a.length;for(;o<u;++o){if(s=e[o]){s.__data__=a[o];i[o]=s}else{n[o]=new x(t,a[o])}}for(;o<l;++o){if(s=e[o]){r[o]=s}}}function O(t,e,n,i,r,a,o){var s,l,u={},c=e.length,f=a.length,h=new Array(c),d;for(s=0;s<c;++s){if(l=e[s]){h[s]=d=C+o.call(l,l.__data__,s,e);if(d in u){r[s]=l}else{u[d]=l}}}for(s=0;s<f;++s){d=C+o.call(t,a[s],s,a);if(l=u[d]){i[s]=l;l.__data__=a[s];u[d]=null}else{n[s]=new x(t,a[s])}}for(s=0;s<c;++s){if((l=e[s])&&u[h[s]]===l){r[s]=l}}}var T=function(t,e){if(!t){d=new Array(this.size()),u=-1;this.each(function(t){d[++u]=t});return d}var n=e?O:E,i=this._parents,r=this._groups;if(typeof t!=="function")t=S(t);for(var a=r.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=i[u],f=r[u],h=f.length,d=t.call(c,c&&c.__data__,u,i),p=d.length,v=s[u]=new Array(p),g=o[u]=new Array(p),m=l[u]=new Array(h);n(c,f,v,g,m,d,e);for(var _=0,y=0,b,w;_<p;++_){if(b=v[_]){if(_>=y)y=_+1;while(!(w=g[y])&&++y<p);b._next=w||null}}}o=new Wt(o,i);o._enter=s;o._exit=l;return o};var M=function(){return new Wt(this._exit||this._groups.map(b),this._parents)};var I=function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s){for(var l=e[s],u=n[s],c=l.length,f=o[s]=new Array(c),h,d=0;d<c;++d){if(h=l[d]||u[d]){f[d]=h}}}for(;s<i;++s){o[s]=e[s]}return new Wt(o,this._parents)};var R=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;){for(var i=t[e],r=i.length-1,a=i[r],o;--r>=0;){if(o=i[r]){if(a&&a!==o.nextSibling)a.parentNode.insertBefore(o,a);a=o}}}return this};var N=function(t){if(!t)t=A;function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o=n[a],s=o.length,l=r[a]=new Array(s),u,c=0;c<s;++c){if(u=o[c]){l[c]=u}}l.sort(e)}return new Wt(r,this._parents).order()};function A(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var L=function(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this};var P=function(){var t=new Array(this.size()),e=-1;this.each(function(){t[++e]=this});return t};var D=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e){for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}}return null};var j=function(){var t=0;this.each(function(){++t});return t};var k=function(){return!this.node()};var F=function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n){for(var r=e[n],a=0,o=r.length,s;a<o;++a){if(s=r[a])t.call(s,s.__data__,a,r)}}return this};function $(t){return function(){this.removeAttribute(t)}}function G(t){return function(){this.removeAttributeNS(t.space,t.local)}}function U(t,e){return function(){this.setAttribute(t,e)}}function Y(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function V(t,e){return function(){var n=e.apply(this,arguments);if(n==null)this.removeAttribute(t);else this.setAttribute(t,n)}}function H(t,e){return function(){var n=e.apply(this,arguments);if(n==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,n)}}var z=function(t,e){var n=a(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?G:$:typeof e==="function"?n.local?H:V:n.local?Y:U)(n,e))};var B=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function W(t){return function(){this.style.removeProperty(t)}}function q(t,e,n){return function(){this.style.setProperty(t,e,n)}}function X(t,e,n){return function(){var i=e.apply(this,arguments);if(i==null)this.style.removeProperty(t);else this.style.setProperty(t,i,n)}}var K=function(t,e,n){return arguments.length>1?this.each((e==null?W:typeof e==="function"?X:q)(t,e,n==null?"":n)):Z(this.node(),t)};function Z(t,e){return t.style.getPropertyValue(e)||B(t).getComputedStyle(t,null).getPropertyValue(e)}function Q(t){return function(){delete this[t]}}function J(t,e){return function(){this[t]=e}}function tt(t,e){return function(){var n=e.apply(this,arguments);if(n==null)delete this[t];else this[t]=n}}var et=function(t,e){return arguments.length>1?this.each((e==null?Q:typeof e==="function"?tt:J)(t,e)):this.node()[t]};function nt(t){return t.trim().split(/^|\s+/)}function it(t){return t.classList||new rt(t)}function rt(t){this._node=t;this._names=nt(t.getAttribute("class")||"")}rt.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function at(t,e){var n=it(t),i=-1,r=e.length;while(++i<r)n.add(e[i])}function ot(t,e){var n=it(t),i=-1,r=e.length;while(++i<r)n.remove(e[i])}function st(t){return function(){at(this,t)}}function lt(t){return function(){ot(this,t)}}function ut(t,e){return function(){(e.apply(this,arguments)?at:ot)(this,t)}}var ct=function(t,e){var n=nt(t+"");if(arguments.length<2){var i=it(this.node()),r=-1,a=n.length;while(++r<a)if(!i.contains(n[r]))return false;return true}return this.each((typeof e==="function"?ut:e?st:lt)(n,e))};function ft(){this.textContent=""}function ht(t){return function(){this.textContent=t}}function dt(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}var pt=function(t){return arguments.length?this.each(t==null?ft:(typeof t==="function"?dt:ht)(t)):this.node().textContent};function vt(){this.innerHTML=""}function gt(t){return function(){this.innerHTML=t}}function mt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}var _t=function(t){return arguments.length?this.each(t==null?vt:(typeof t==="function"?mt:gt)(t)):this.node().innerHTML};function yt(){if(this.nextSibling)this.parentNode.appendChild(this)}var bt=function(){return this.each(yt)};function wt(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}var xt=function(){return this.each(wt)};var St=function(t){var e=typeof t==="function"?t:l(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function Ct(){return null}var Et=function(t,e){var n=typeof t==="function"?t:l(t),i=e==null?Ct:typeof e==="function"?e:c(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})};function Ot(){var t=this.parentNode;if(t)t.removeChild(this)}var Tt=function(){return this.each(Ot)};function Mt(){return this.parentNode.insertBefore(this.cloneNode(false),this.nextSibling)}function It(){return this.parentNode.insertBefore(this.cloneNode(true),this.nextSibling)}var Rt=function(t){return this.select(t?It:Mt)};var Nt=function(t){return arguments.length?this.property("__data__",t):this.node().__data__};var At={};var Lt=null;if(typeof document!=="undefined"){var Pt=document.documentElement;if(!("onmouseenter"in Pt)){At={mouseenter:"mouseover",mouseleave:"mouseout"}}}function Dt(t,e,n){t=jt(t,e,n);return function(e){var n=e.relatedTarget;if(!n||n!==this&&!(n.compareDocumentPosition(this)&8)){t.call(this,e)}}}function jt(t,e,n){return function(i){var r=Lt;Lt=i;try{t.call(this,this.__data__,e,n)}finally{Lt=r}}}function kt(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0)e=t.slice(n+1),t=t.slice(0,n);return{type:t,name:e}})}function Ft(t){return function(){var e=this.__on;if(!e)return;for(var n=0,i=-1,r=e.length,a;n<r;++n){if(a=e[n],(!t.type||a.type===t.type)&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.capture)}else{e[++i]=a}}if(++i)e.length=i;else delete this.__on}}function $t(t,e,n){var i=At.hasOwnProperty(t.type)?Dt:jt;return function(r,a,o){var s=this.__on,l,u=i(e,a,o);if(s)for(var c=0,f=s.length;c<f;++c){if((l=s[c]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=n);l.value=e;return}}this.addEventListener(t.type,u,n);l={type:t.type,name:t.name,value:e,listener:u,capture:n};if(!s)this.__on=[l];else s.push(l)}}var Gt=function(t,e,n){var i=kt(t+""),r,a=i.length,o;if(arguments.length<2){var s=this.node().__on;if(s)for(var l=0,u=s.length,c;l<u;++l){for(r=0,c=s[l];r<a;++r){if((o=i[r]).type===c.type&&o.name===c.name){return c.value}}}return}s=e?$t:Ft;if(n==null)n=false;for(r=0;r<a;++r)this.each(s(i[r],e,n));return this};function Ut(t,e,n,i){var r=Lt;t.sourceEvent=Lt;Lt=t;try{return e.apply(n,i)}finally{Lt=r}}function Yt(t,e,n){var i=B(t),r=i.CustomEvent;if(typeof r==="function"){r=new r(e,n)}else{r=i.document.createEvent("Event");if(n)r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail;else r.initEvent(e,false,false)}t.dispatchEvent(r)}function Vt(t,e){return function(){return Yt(this,t,e)}}function Ht(t,e){return function(){return Yt(this,t,e.apply(this,arguments))}}var zt=function(t,e){return this.each((typeof e==="function"?Ht:Vt)(t,e))};var Bt=[null];function Wt(t,e){this._groups=t;this._parents=e}function qt(){return new Wt([[document.documentElement]],Bt)}Wt.prototype=qt.prototype={constructor:Wt,select:f,selectAll:p,filter:y,data:T,enter:w,exit:M,merge:I,order:R,sort:N,call:L,nodes:P,node:D,size:j,empty:k,each:F,attr:z,style:K,property:et,classed:ct,text:pt,html:_t,raise:bt,lower:xt,append:St,insert:Et,remove:Tt,clone:Rt,datum:Nt,on:Gt,dispatch:zt};var Xt=qt;var Kt=function(t){return typeof t==="string"?new Wt([[document.querySelector(t)]],[document.documentElement]):new Wt([[t]],Bt)};var Zt=function(t){return Kt(l(t).call(document.documentElement))};var Qt=0;function Jt(){return new te}function te(){this._="@"+(++Qt).toString(36)}te.prototype=Jt.prototype={constructor:te,get:function(t){var e=this._;while(!(e in t))if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var ee=function(){var t=Lt,e;while(e=t.sourceEvent)t=e;return t};var ne=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();i.x=e.clientX,i.y=e.clientY;i=i.matrixTransform(t.getScreenCTM().inverse());return[i.x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]};var ie=function(t){var e=ee();if(e.changedTouches)e=e.changedTouches[0];return ne(t,e)};var re=function(t){return typeof t==="string"?new Wt([document.querySelectorAll(t)],[document.documentElement]):new Wt([t==null?[]:t],Bt)};var ae=function(t,e,n){if(arguments.length<3)n=e,e=ee().changedTouches;for(var i=0,r=e?e.length:0,a;i<r;++i){if((a=e[i]).identifier===n){return ne(t,a)}}return null};var oe=function(t,e){if(e==null)e=ee().touches;for(var n=0,i=e?e.length:0,r=new Array(i);n<i;++n){r[n]=ne(t,e[n])}return r};n.d(e,"create",function(){return Zt});n.d(e,"creator",function(){return l});n.d(e,"local",function(){return Jt});n.d(e,"matcher",function(){return _});n.d(e,"mouse",function(){return ie});n.d(e,"namespace",function(){return a});n.d(e,"namespaces",function(){return r});n.d(e,"clientPoint",function(){return ne});n.d(e,"select",function(){return Kt});n.d(e,"selectAll",function(){return re});n.d(e,"selection",function(){return Xt});n.d(e,"selector",function(){return c});n.d(e,"selectorAll",function(){return d});n.d(e,"style",function(){return Z});n.d(e,"touch",function(){return ae});n.d(e,"touches",function(){return oe});n.d(e,"window",function(){return B});n.d(e,"event",function(){return Lt});n.d(e,"customEvent",function(){return Ut})},function(t,e,n){"use strict";var i=n(2);var r=n(95);var a=n(1);var o=n(7);var s=n(19);var l=n(80);var u=n(31);var c=function t(e,n,i,r,a,o){l["a"].call(this);this.addBlankBackgroundLayer_=true;if(o.addBlankBackgroundLayer!==undefined){this.addBlankBackgroundLayer_=o.addBlankBackgroundLayer}this.$q_=i;this.$http_=e;this.treeUrl_=undefined;if(n.has("gmfTreeUrl")){this.treeUrl_=n.get("gmfTreeUrl")}this.cacheVersion_="0";if(n.has("cacheVersion")){this.cacheVersion_=n.get("cacheVersion")}this.ngeoLocation_=null;if(n.has("ngeoLocation")){this.ngeoLocation_=n.get("ngeoLocation")}this.layerHelper_=r;this.gettextCatalog=a;this.deferred_=i.defer();this.promise_=this.deferred_.promise;this.loaded=false;this.bgLayerPromise_=null};c.$inject=["$http","$injector","$q","ngeoLayerHelper","gettextCatalog","gmfThemesOptions"];c.$inject=["$http","$injector","$q","ngeoLayerHelper","gettextCatalog","gmfThemesOptions"];a["d"](c,l["a"]);c.findGroupByLayerNodeName=function(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n];for(var a=0,o=r.children.length;a<o;a++){var s=r.children[a];var l=[];c.getFlatNodes(s,l);if(c.findObjectByName(l,e)){return s}}}return null};c.findGroupByName=function(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n];for(var a=0,o=r.children.length;a<o;a++){var s=r.children[a];var l=[];c.getFlatInternalNodes(s,l);if(c.findObjectByName(l,e)){return s}}}return null};c.findObjectByName=function(t,e){return o["d"](t,function(t){return t["name"]===e})};c.findThemeByName=function(t,e){return c.findObjectByName(t,e)};c.getFlatInternalNodes=function(t,e){var n=t.children;if(n!==undefined){e.push(t);for(var i=0;i<n.length;i++){c.getFlatInternalNodes(n[i],e)}}};c.getFlatNodes=function(t,e){var n=void 0;var i=t.children;if(i!==undefined){for(n=0;n<i.length;n++){c.getFlatNodes(i[n],e)}}else{e.push(t)}};c.prototype.getBgLayers=function(){var t=this;var e=this.gettextCatalog;if(this.bgLayerPromise_){return this.bgLayerPromise_}var n=this.$q_;var r=this.layerHelper_;var o=function t(e,n){n.push(a["c"](e));var i=e.children||[];i.forEach(function(e){t(e,n)})};var l=function t(e,n){n.set("label",e.name);n.set("metadata",e.metadata);n.set("dimensions",e.dimensions);var i=[];o(e,i);n.set("querySourceIds",i);return n};var c=function t(e,a){if(a.type==="WMTS"){var o=a;i["a"].assert(o.url,"Layer URL is required");return r.createWMTSLayerFromCapabilitites(o.url,o.layer||"",o.matrixSet,a.dimensions,o.metadata.customOpenLayersOptions).then(l.bind(null,a)).then(null,function(t){var e='Unable to build layer "'+o.layer+'" from WMTSCapabilities: '+o.url+"\n";e+='OpenLayers error is "'+t["message"];console.error(e);return n.resolve(undefined)})}else if(a.type==="WMS"){var s=a;i["a"].assert(s.ogcServer,"An OGC server is required");var u=e[s.ogcServer];i["a"].assert(u,"The OGC server was not found");i["a"].assert(u.url,"The server URL is required");i["a"].assert(u.imageType,"The server image type is required");var c={STYLES:s.styles};if(a.dimensions){for(var f=Object.entries(a.dimensions),h=Array.isArray(f),d=0,f=h?f:f[Symbol.iterator]();;){var p;if(h){if(d>=f.length)break;p=f[d++]}else{d=f.next();if(d.done)break;p=d.value}var v=p;var g=v[0];var m=v[1];c[g]=m}}return l(a,r.createBasicWMSLayer(u.url,s.layers||"",u.imageType,u.type,undefined,c,u.credential?"use-credentials":"anonymous",s.metadata.customOpenLayersOptions))}i["a"].fail("Unsupported type: "+a.type)};var f=function t(e,i){var a=i.children.map(function(t){return t}).reverse();var o=a.map(c.bind(null,e));return n.all(o).then(function(t){var e=void 0;if(t){t=t.filter(function(t){return t});e=new s["b"](t)}var n=r.createBasicGroup(e);l(i,n);return n})};var h=function(t){var e=t.background_layers.map(function(e){var n=e.type;if(n==="WMTS"||n==="WMS"){return c(t.ogcServers,e)}else if(e.children){return f(t.ogcServers,e)}else{return undefined}},this);return n.all(e)}.bind(this);this.bgLayerPromise_=this.promise_.then(h).then(function(n){var i=[];if(t.addBlankBackgroundLayer_){e.getString("blank");i.push(new u["a"]({label:"blank",metadata:{thumbnail:""}}))}n.forEach(function(t){if(t){i.push(t)}});return i});return this.bgLayerPromise_};c.prototype.getThemeObject=function(t){return this.promise_.then(function(e){return c.findThemeByName(e.themes,t)})};c.prototype.getThemesObject=function(){return this.promise_.then(function(t){return t.themes})};c.prototype.getBackgroundLayersObject=function(){i["a"].assert(this.promise_!==null);return this.promise_.then(function(t){return t.background_layers})};c.prototype.getOgcServersObject=function(){i["a"].assert(this.promise_!==null);return this.promise_.then(function(t){return t.ogcServers})};c.prototype.hasEditableLayers=function(){i["a"].assert(this.promise_!==null);return this.promise_.then(this.hasEditableLayers_.bind(this))};c.prototype.hasEditableLayers_=function(t){var e=this;return t.themes.some(function(t){var n=t.children.some(e.hasNodeEditableLayers_.bind(e));return n})};c.prototype.hasNodeEditableLayers_=function(t){if(t.editable){return true}var e=false;var n=t.children;if(n&&n.length){e=n.some(this.hasNodeEditableLayers_.bind(this))}return e};c.getSnappingConfig=function(t){var e=t.metadata&&t.metadata.snappingConfig!==undefined?t.metadata.snappingConfig:null;return e};c.getNodeMaxResolution=function(t){var e=t.metadata;var n=t.maxResolutionHint;if(n===undefined&&e!==undefined){n=e.maxResolution}return n};c.getNodeMinResolution=function(t){var e=t.metadata;var n=t.minResolutionHint;if(n===undefined&&e!==undefined){n=e.minResolution}return n};c.prototype.loadThemes=function(t){var e=this;i["a"].assert(this.treeUrl_,"gmfTreeUrl should be defined.");if(this.loaded){this.deferred_=this.$q_.defer();this.promise_=this.deferred_.promise;this.bgLayerPromise_=null;this.loaded=false}this.$http_.get(this.treeUrl_,{params:t!==undefined?{role:t,cache_version:this.cacheVersion_}:{cache_version:this.cacheVersion_},cache:false,withCredentials:true}).then(function(t){if(t.data.errors.length!=0){var n="The themes contain some errors:\n"+t.data.errors.join("\n");console.error(n);if(e.ngeoLocation_!==null&&e.ngeoLocation_.hasParam("debug")){window.alert(n)}}e.deferred_.resolve(t.data);e.dispatchEvent("change");e.loaded=true},function(t){e.deferred_.reject(t)})};c.NodeType={MIXED_GROUP:"MixedGroup",NOT_MIXED_GROUP:"NotMixedGroup",WMTS:"WMTS",WMS:"WMS"};c.module=angular.module("gmfThemes",[r["a"].module.name]);c.module.value("gmfThemesOptions",{});c.module.service("gmfThemes",c);e["a"]=c},function(t,e,n){"use strict";var i={CIRCLE:"Circle",LINE_STRING:"LineString",MULTI_LINE_STRING:"MultiLineString",MULTI_POINT:"MultiPoint",MULTI_POLYGON:"MultiPolygon",POINT:"Point",POLYGON:"Polygon",RECTANGLE:"Rectangle",TEXT:"Text"};e["a"]=i},function(t,e,n){"use strict";e["a"]={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},function(t,e,n){"use strict";n.d(e,"e",function(){return a});n.d(e,"d",function(){return l});n.d(e,"a",function(){return u});n.d(e,"c",function(){return h});n.d(e,"b",function(){return d});var i=n(173);var r=n(123);var a=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var o=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var s={};var l={};function u(t,e,n,r){var a=r;if(typeof r==="string"){a=function(){return this[r]()}}if(t){l[t]=a}if(e){l[e[0]]=function(){return Object(i["a"])(a.apply(this,arguments),e[1],e[2])}}if(n){l[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),t)}}}function c(t){if(t.match(/\[[\s\S]/)){return t.replace(/^\[|\]$/g,"")}return t.replace(/\\/g,"")}function f(t){var e=t.match(a),n,i;for(n=0,i=e.length;n<i;n++){if(l[e[n]]){e[n]=l[e[n]]}else{e[n]=c(e[n])}}return function(n){var a="",o;for(o=0;o<i;o++){a+=Object(r["a"])(e[o])?e[o].call(n,t):e[o]}return a}}function h(t,e){if(!t.isValid()){return t.localeData().invalidDate()}e=d(e,t.localeData());s[e]=s[e]||f(e);return s[e](t)}function d(t,e){var n=5;function i(t){return e.longDateFormat(t)||t}o.lastIndex=0;while(n>=0&&o.test(t)){t=t.replace(o,i);o.lastIndex=0;n-=1}return t}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(370);function r(t,e){if(!t){throw new i["a"](e)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return p});n.d(e,"c",function(){return g});var i=n(1);var r=n(20);var a=n(49);var o=n(127);var s=n(34);var l=n(9);var u=r["c"];var c=r["a"];var f=r["a"];var h=r["c"];var d=function t(e){var n=e?e:{};s["a"].call(this,{handleEvent:n.handleEvent||g});this.handleDownEvent_=n.handleDownEvent?n.handleDownEvent:f;this.handleDragEvent_=n.handleDragEvent?n.handleDragEvent:u;this.handleMoveEvent_=n.handleMoveEvent?n.handleMoveEvent:h;this.handleUpEvent_=n.handleUpEvent?n.handleUpEvent:c;this.handlingDownUpSequence=false;this.trackedPointers_={};this.targetPointers=[]};Object(i["d"])(d,s["a"]);function p(t){var e=t.length;var n=0;var i=0;for(var r=0;r<e;r++){n+=t[r].clientX;i+=t[r].clientY}return[n/e,i/e]}function v(t){var e=t.type;return e===a["a"].POINTERDOWN||e===a["a"].POINTERDRAG||e===a["a"].POINTERUP}d.prototype.updateTrackedPointers_=function(t){if(v(t)){var e=t.pointerEvent;var n=e.pointerId.toString();if(t.type==a["a"].POINTERUP){delete this.trackedPointers_[n]}else if(t.type==a["a"].POINTERDOWN){this.trackedPointers_[n]=e}else if(n in this.trackedPointers_){this.trackedPointers_[n]=e}this.targetPointers=Object(l["c"])(this.trackedPointers_)}};function g(t){if(!(t instanceof o["a"])){return true}var e=false;this.updateTrackedPointers_(t);if(this.handlingDownUpSequence){if(t.type==a["a"].POINTERDRAG){this.handleDragEvent_(t)}else if(t.type==a["a"].POINTERUP){var n=this.handleUpEvent_(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else{if(t.type==a["a"].POINTERDOWN){var i=this.handleDownEvent_(t);this.handlingDownUpSequence=i;e=this.shouldStopEvent(i)}else if(t.type==a["a"].POINTERMOVE){this.handleMoveEvent_(t)}}return!e}d.prototype.shouldStopEvent=function(t){return t};e["b"]=d},function(t,e,n){"use strict";n.d(e,"a",function(){return a});n.d(e,"b",function(){return o});n.d(e,"c",function(){return s});n.d(e,"e",function(){return f});n.d(e,"f",function(){return h});n.d(e,"g",function(){return d});n.d(e,"h",function(){return p});n.d(e,"d",function(){return v});n.d(e,"i",function(){return g});var i=n(15);var r=n(142);function a(t,e){t[0]+=e[0];t[1]+=e[1];return t}function o(t,e){var n=e.getRadius();var i=e.getCenter();var r=i[0];var a=i[1];var o=t[0];var s=t[1];var l=o-r;var u=s-a;if(l===0&&u===0){l=1}var c=Math.sqrt(l*l+u*u);var f=r+n*l/c;var h=a+n*u/c;return[f,h]}function s(t,e){var n=t[0];var i=t[1];var r=e[0];var a=e[1];var o=r[0];var s=r[1];var l=a[0];var u=a[1];var c=l-o;var f=u-s;var h=c===0&&f===0?0:(c*(n-o)+f*(i-s))/(c*c+f*f||0);var d=void 0,p=void 0;if(h<=0){d=o;p=s}else if(h>=1){d=l;p=u}else{d=o+h*c;p=s+h*f}return[d,p]}function l(t){return function(e){return _(e,t)}}function u(t,e,n){var a=Object(i["d"])(e+180,360)-180;var o=Math.abs(3600*a);var s=n||0;var l=Math.pow(10,s);var u=Math.floor(o/3600);var c=Math.floor((o-u*3600)/60);var f=o-u*3600-c*60;f=Math.ceil(f*l)/l;if(f>=60){f=0;c+=1}if(c>=60){c=0;u+=1}return u+"° "+Object(r["b"])(c,2)+"′ "+Object(r["b"])(f,2,s)+"″"+(a==0?"":" "+t.charAt(a<0?1:0))}function c(t,e,n){if(t){return e.replace("{x}",t[0].toFixed(n)).replace("{y}",t[1].toFixed(n))}else{return""}}function f(t,e){var n=true;for(var i=t.length-1;i>=0;--i){if(t[i]!=e[i]){n=false;break}}return n}function h(t,e){var n=Math.cos(e);var i=Math.sin(e);var r=t[0]*n-t[1]*i;var a=t[1]*n+t[0]*i;t[0]=r;t[1]=a;return t}function d(t,e){t[0]*=e;t[1]*=e;return t}function p(t,e){var n=t[0]-e[0];var i=t[1]-e[1];return n*n+i*i}function v(t,e){return Math.sqrt(p(t,e))}function g(t,e){return p(t,s(t,e))}function m(t,e){if(t){return u("NS",t[1],e)+" "+u("EW",t[0],e)}else{return""}}function _(t,e){return c(t,"{x}, {y}",e)}},function(t,e,n){"use strict";e["a"]={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5}},function(t,e,n){"use strict";var i=n(1);var r=n(139);var a=n(86);var o={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var s=n(9);var l=function t(e){var n=e?e:{};var i=Object(s["a"])({},n);delete i.preload;delete i.useInterimTilesOnError;a["a"].call(this,i);this.setPreload(n.preload!==undefined?n.preload:0);this.setUseInterimTilesOnError(n.useInterimTilesOnError!==undefined?n.useInterimTilesOnError:true);this.type=r["a"].TILE};Object(i["d"])(l,a["a"]);l.prototype.getPreload=function(){return this.get(o.PRELOAD)};l.prototype.getSource;l.prototype.setPreload=function(t){this.set(o.PRELOAD,t)};l.prototype.getUseInterimTilesOnError=function(){return this.get(o.USE_INTERIM_TILES_ON_ERROR)};l.prototype.setUseInterimTilesOnError=function(t){this.set(o.USE_INTERIM_TILES_ON_ERROR,t)};var u=e["a"]=l},function(t,e,n){"use strict";n.d(e,"c",function(){return C});n.d(e,"b",function(){return E});n.d(e,"d",function(){return O});var i=n(1);var r=n(7);var a=n(4);var o=n(25);var s=n(8);var l=n(246);var u=n(21);var c=n(69);var f=n(230);var h=n(267);var d=n(145);var p=n(171);var v=n(134);var g=n(138);var m=n(365);var _=n(219);var y=n(232);var b=n(162);var w=n(15);var x=function t(e,n){c["a"].call(this);this.ends_=[];this.flatInteriorPointRevision_=-1;this.flatInteriorPoint_=null;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.orientedRevision_=-1;this.orientedFlatCoordinates_=null;this.setCoordinates(e,n)};Object(i["d"])(x,c["a"]);x.prototype.appendLinearRing=function(t){if(!this.flatCoordinates){this.flatCoordinates=t.getFlatCoordinates().slice()}else{Object(r["c"])(this.flatCoordinates,t.getFlatCoordinates())}this.ends_.push(this.flatCoordinates.length);this.changed()};x.prototype.clone=function(){var t=new x(null);t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice());return t};x.prototype.closestPointXY=function(t,e,n,i){if(i<Object(a["e"])(this.getExtent(),t,e)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(d["a"])(this.flatCoordinates,0,this.ends_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(d["b"])(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,true,t,e,n,i)};x.prototype.containsXY=function(t,e){return Object(p["c"])(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)};x.prototype.getArea=function(){return Object(h["b"])(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)};x.prototype.getCoordinates=function(t){var e=void 0;if(t!==undefined){e=this.getOrientedFlatCoordinates().slice();Object(y["c"])(e,0,this.ends_,this.stride,t)}else{e=this.flatCoordinates}return Object(g["b"])(e,0,this.ends_,this.stride)};x.prototype.getEnds=function(){return this.ends_};x.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Object(a["x"])(this.getExtent());this.flatInteriorPoint_=Object(m["a"])(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0);this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_};x.prototype.getInteriorPoint=function(){return new u["a"](this.getFlatInteriorPoint(),o["a"].XYM)};x.prototype.getLinearRingCount=function(){return this.ends_.length};x.prototype.getLinearRing=function(t){if(t<0||this.ends_.length<=t){return null}var e=new l["a"](null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]));return e};x.prototype.getLinearRings=function(){var t=this.layout;var e=this.flatCoordinates;var n=this.ends_;var i=[];var r=0;for(var a=0,o=n.length;a<o;++a){var s=n[a];var u=new l["a"](null);u.setFlatCoordinates(t,e.slice(r,s));i.push(u);r=s}return i};x.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;if(Object(y["a"])(t,0,this.ends_,this.stride)){this.orientedFlatCoordinates_=t}else{this.orientedFlatCoordinates_=t.slice();this.orientedFlatCoordinates_.length=Object(y["c"])(this.orientedFlatCoordinates_,0,this.ends_,this.stride)}this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};x.prototype.getSimplifiedGeometryInternal=function(t){var e=[];var n=[];e.length=Object(b["c"])(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n);var i=new x(null);i.setFlatCoordinates(o["a"].XY,e,n);return i};x.prototype.getType=function(){return s["a"].POLYGON};x.prototype.intersectsExtent=function(t){return Object(_["c"])(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)};x.prototype.setCoordinates=function(t,e){if(!t){this.setFlatCoordinates(o["a"].XY,null,this.ends_)}else{this.setLayout(e,t,2);if(!this.flatCoordinates){this.flatCoordinates=[]}var n=Object(v["c"])(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1];this.changed()}};x.prototype.setFlatCoordinates=function(t,e,n){this.setFlatCoordinatesInternal(t,e);this.ends_=n;this.changed()};e["a"]=x;function S(t,e,n,i){var a=n?n:32;var s=[];for(var l=0;l<a;++l){Object(r["c"])(s,Object(f["c"])(t,e,2*Math.PI*l/a,i))}s.push(s[0],s[1]);var u=new x(null);u.setFlatCoordinates(o["a"].XY,s,[s.length]);return u}function C(t){var e=t[0];var n=t[1];var i=t[2];var r=t[3];var a=[e,n,e,r,i,r,i,n,e,n];var s=new x(null);s.setFlatCoordinates(o["a"].XY,a,[a.length]);return s}function E(t,e,n){var i=e?e:32;var r=t.getStride();var a=t.getLayout();var o=new x(null,a);var s=r*(i+1);var l=new Array(s);for(var u=0;u<s;u++){l[u]=0}var c=[l.length];o.setFlatCoordinates(a,l,c);O(o,t.getCenter(),t.getRadius(),n);return o}function O(t,e,n,i){var r=t.getFlatCoordinates();var a=t.getLayout();var o=t.getStride();var s=t.getEnds();var l=r.length/o-1;var u=i?i:0;for(var c=0;c<=l;++c){var f=c*o;var h=u+Object(w["d"])(c,l)*2*Math.PI/l;r[f]=e[0]+n*Math.cos(h);r[f+1]=e[1]+n*Math.sin(h)}t.setFlatCoordinates(a,r,s)}},function(t,e,n){"use strict";var i=n(1);var r=n(84);var a=function t(e){var n=e||{};this.color_=n.color!==undefined?n.color:null;this.checksum_=undefined};a.prototype.clone=function(){var t=this.getColor();return new a({color:t&&t.slice?t.slice():t||undefined})};a.prototype.getColor=function(){return this.color_};a.prototype.setColor=function(t){this.color_=t;this.checksum_=undefined};a.prototype.getChecksum=function(){if(this.checksum_===undefined){if(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient){this.checksum_=Object(i["c"])(this.color_).toString()}else{this.checksum_="f"+(this.color_?Object(r["b"])(this.color_):"-")}}return this.checksum_};e["a"]=a},function(t,e,n){"use strict";n.d(e,"b",function(){return u});n.d(e,"c",function(){return c});n.d(e,"d",function(){return f});n.d(e,"e",function(){return h});n.d(e,"f",function(){return d});n.d(e,"g",function(){return p});var i=n(1);var r=n(39);var a=n(92);var o=n(243);var s=n(15);var l=function t(e){r["a"].call(this);this.map_=null;this.setActive(true);this.handleEvent=e.handleEvent};Object(i["d"])(l,r["a"]);l.prototype.getActive=function(){return this.get(o["a"].ACTIVE)};l.prototype.getMap=function(){return this.map_};l.prototype.setActive=function(t){this.set(o["a"].ACTIVE,t)};l.prototype.setMap=function(t){this.map_=t};function u(t,e,n){var i=t.getCenter();if(i){var r=t.constrainCenter([i[0]+e[0],i[1]+e[1]]);if(n){t.animate({duration:n,easing:a["d"],center:r})}else{t.setCenter(r)}}}function c(t,e,n,i){e=t.constrainRotation(e,0);f(t,e,n,i)}function f(t,e,n,i){if(e!==undefined){var r=t.getRotation();var o=t.getCenter();if(r!==undefined&&o&&i>0){t.animate({rotation:e,anchor:n,duration:i,easing:a["b"]})}else{t.rotate(e,n)}}}function h(t,e,n,i,r){e=t.constrainResolution(e,0,r);p(t,e,n,i)}function d(t,e,n,i){var r=t.getResolution();var a=t.constrainResolution(r,e,0);if(a!==undefined){var o=t.getResolutions();a=Object(s["a"])(a,t.getMinResolution()||o[o.length-1],t.getMaxResolution()||o[0])}if(n&&a!==undefined&&a!==r){var l=t.getCenter();var u=t.calculateCenterZoom(a,n);u=t.constrainCenter(u);n=[(a*l[0]-r*u[0])/(a-r),(a*l[1]-r*u[1])/(a-r)]}p(t,a,n,i)}function p(t,e,n,i){if(e){var r=t.getResolution();var o=t.getCenter();if(r!==undefined&&o&&e!==r&&i){t.animate({resolution:e,anchor:n,duration:i,easing:a["b"]})}else{if(n){var s=t.calculateCenterZoom(e,n);t.setCenter(s)}t.setResolution(e)}}}e["a"]=l},function(t,e,n){"use strict";var i=n(1);var r=function t(e){var n=e||{};this.color_=n.color!==undefined?n.color:null;this.lineCap_=n.lineCap;this.lineDash_=n.lineDash!==undefined?n.lineDash:null;this.lineDashOffset_=n.lineDashOffset;this.lineJoin_=n.lineJoin;this.miterLimit_=n.miterLimit;this.width_=n.width;this.checksum_=undefined};r.prototype.clone=function(){var t=this.getColor();return new r({color:t&&t.slice?t.slice():t||undefined,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():undefined,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})};r.prototype.getColor=function(){return this.color_};r.prototype.getLineCap=function(){return this.lineCap_};r.prototype.getLineDash=function(){return this.lineDash_};r.prototype.getLineDashOffset=function(){return this.lineDashOffset_};r.prototype.getLineJoin=function(){return this.lineJoin_};r.prototype.getMiterLimit=function(){return this.miterLimit_};r.prototype.getWidth=function(){return this.width_};r.prototype.setColor=function(t){this.color_=t;this.checksum_=undefined};r.prototype.setLineCap=function(t){this.lineCap_=t;this.checksum_=undefined};r.prototype.setLineDash=function(t){this.lineDash_=t;this.checksum_=undefined};r.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t;this.checksum_=undefined};r.prototype.setLineJoin=function(t){this.lineJoin_=t;this.checksum_=undefined};r.prototype.setMiterLimit=function(t){this.miterLimit_=t;this.checksum_=undefined};r.prototype.setWidth=function(t){this.width_=t;this.checksum_=undefined};r.prototype.getChecksum=function(){if(this.checksum_===undefined){this.checksum_="s";if(this.color_){if(typeof this.color_==="string"){this.checksum_+=this.color_}else{this.checksum_+=Object(i["c"])(this.color_).toString()}}else{this.checksum_+="-"}this.checksum_+=","+(this.lineCap_!==undefined?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(this.lineDashOffset_!==undefined?this.lineDashOffset_:"-")+","+(this.lineJoin_!==undefined?this.lineJoin_:"-")+","+(this.miterLimit_!==undefined?this.miterLimit_.toString():"-")+","+(this.width_!==undefined?this.width_.toString():"-")}return this.checksum_};e["a"]=r},function(t,e,n){"use strict";var i=n(1);var r=n(7);var a=n(4);var o=n(25);var s=n(8);var l=n(69);var u=n(145);var c=n(134);var f=n(138);var h=n(274);var d=n(219);var p=n(362);var v=n(364);var g=n(162);var m=function t(e,n){l["a"].call(this);this.flatMidpoint_=null;this.flatMidpointRevision_=-1;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(e,n)};Object(i["d"])(m,l["a"]);m.prototype.appendCoordinate=function(t){if(!this.flatCoordinates){this.flatCoordinates=t.slice()}else{Object(r["c"])(this.flatCoordinates,t)}this.changed()};m.prototype.clone=function(){var t=new m(null);t.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return t};m.prototype.closestPointXY=function(t,e,n,i){if(i<Object(a["e"])(this.getExtent(),t,e)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(u["e"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(u["d"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,false,t,e,n,i)};m.prototype.forEachSegment=function(t){return Object(v["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)};m.prototype.getCoordinateAtM=function(t,e){if(this.layout!=o["a"].XYM&&this.layout!=o["a"].XYZM){return null}var n=e!==undefined?e:false;return Object(h["b"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)};m.prototype.getCoordinates=function(){return Object(f["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};m.prototype.getCoordinateAt=function(t,e){return Object(h["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)};m.prototype.getLength=function(){return Object(p["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};m.prototype.getFlatMidpoint=function(){if(this.flatMidpointRevision_!=this.getRevision()){this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_);this.flatMidpointRevision_=this.getRevision()}return this.flatMidpoint_};m.prototype.getSimplifiedGeometryInternal=function(t){var e=[];e.length=Object(g["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);var n=new m(null);n.setFlatCoordinates(o["a"].XY,e);return n};m.prototype.getType=function(){return s["a"].LINE_STRING};m.prototype.intersectsExtent=function(t){return Object(d["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)};m.prototype.setCoordinates=function(t,e){if(!t){this.setFlatCoordinates(o["a"].XY,null)}else{this.setLayout(e,t,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=Object(c["b"])(this.flatCoordinates,0,t,this.stride);this.changed()}};m.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e);this.changed()};e["a"]=m},function(t,e,n){"use strict";var i=n(1);var r=n(19);var a=n(82);var o=n(289);var s=n(70);var l=n(49);var u=n(127);var c=n(3);var f=n(80);var h={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var d=n(227);var p=n(169);var v=function t(e){var n={MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture};p["a"].call(this,e,n);this.pointerMap=e.pointerMap};Object(i["d"])(v,p["a"]);var g=["","unavailable","touch","pen","mouse"];v.prototype.prepareEvent_=function(t){var e=t;if(typeof t.pointerType==="number"){e=this.dispatcher.cloneEvent(t,t);e.pointerType=g[t.pointerType]}return e};v.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]};v.prototype.msPointerDown=function(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)};v.prototype.msPointerMove=function(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)};v.prototype.msPointerUp=function(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t);this.cleanup(t.pointerId)};v.prototype.msPointerOut=function(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)};v.prototype.msPointerOver=function(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)};v.prototype.msPointerCancel=function(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t);this.cleanup(t.pointerId)};v.prototype.msLostPointerCapture=function(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)};v.prototype.msGotPointerCapture=function(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)};var m=v;var _=function t(e){var n={pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture};p["a"].call(this,e,n)};Object(i["d"])(_,p["a"]);_.prototype.pointerDown=function(t){this.dispatcher.fireNativeEvent(t)};_.prototype.pointerMove=function(t){this.dispatcher.fireNativeEvent(t)};_.prototype.pointerUp=function(t){this.dispatcher.fireNativeEvent(t)};_.prototype.pointerOut=function(t){this.dispatcher.fireNativeEvent(t)};_.prototype.pointerOver=function(t){this.dispatcher.fireNativeEvent(t)};_.prototype.pointerCancel=function(t){this.dispatcher.fireNativeEvent(t)};_.prototype.lostPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)};_.prototype.gotPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)};var y=_;var b=n(42);var w=function t(e,n,i){b["a"].call(this,e);this.originalEvent=n;var r=i?i:{};this.buttons=this.getButtons_(r);this.pressure=this.getPressure_(r,this.buttons);this.bubbles="bubbles"in r?r["bubbles"]:false;this.cancelable="cancelable"in r?r["cancelable"]:false;this.view="view"in r?r["view"]:null;this.detail="detail"in r?r["detail"]:null;this.screenX="screenX"in r?r["screenX"]:0;this.screenY="screenY"in r?r["screenY"]:0;this.clientX="clientX"in r?r["clientX"]:0;this.clientY="clientY"in r?r["clientY"]:0;this.ctrlKey="ctrlKey"in r?r["ctrlKey"]:false;this.altKey="altKey"in r?r["altKey"]:false;this.shiftKey="shiftKey"in r?r["shiftKey"]:false;this.metaKey="metaKey"in r?r["metaKey"]:false;this.button="button"in r?r["button"]:0;this.relatedTarget="relatedTarget"in r?r["relatedTarget"]:null;this.pointerId="pointerId"in r?r["pointerId"]:0;this.width="width"in r?r["width"]:0;this.height="height"in r?r["height"]:0;this.tiltX="tiltX"in r?r["tiltX"]:0;this.tiltY="tiltY"in r?r["tiltY"]:0;this.pointerType="pointerType"in r?r["pointerType"]:"";this.hwTimestamp="hwTimestamp"in r?r["hwTimestamp"]:0;this.isPrimary="isPrimary"in r?r["isPrimary"]:false;if(n.preventDefault){this.preventDefault=function(){n.preventDefault()}}};Object(i["d"])(w,b["a"]);var x=false;w.prototype.getButtons_=function(t){var e=void 0;if(t.buttons||x){e=t.buttons}else{switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}}return e};w.prototype.getPressure_=function(t,e){var n=0;if(t.pressure){n=t.pressure}else{n=e?.5:0}return n};(function(){try{var t=new MouseEvent("click",{buttons:1});x=t.buttons===1}catch(t){}})();var S=w;var C=n(7);var E=function t(e,n){var i={touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel};p["a"].call(this,e,i);this.pointerMap=e.pointerMap;this.mouseSource=n;this.firstTouchId_=undefined;this.clickCount_=0;this.resetId_=undefined;this.dedupTimeout_=2500};Object(i["d"])(E,p["a"]);var O=200;var T="touch";E.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier};E.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;if(e===0||e===1&&d["a"].toString()in this.pointerMap){this.firstTouchId_=t.identifier;this.cancelResetClickCount_()}};E.prototype.removePrimaryPointer_=function(t){if(t.isPrimary){this.firstTouchId_=undefined;this.resetClickCount_()}};E.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),O)};E.prototype.resetClickCountHandler_=function(){this.clickCount_=0;this.resetId_=undefined};E.prototype.cancelResetClickCount_=function(){if(this.resetId_!==undefined){clearTimeout(this.resetId_)}};E.prototype.touchToPointer_=function(t,e){var n=this.dispatcher.cloneEvent(t,e);n.pointerId=e.identifier+2;n.bubbles=true;n.cancelable=true;n.detail=this.clickCount_;n.button=0;n.buttons=1;n.width=e.webkitRadiusX||e.radiusX||0;n.height=e.webkitRadiusY||e.radiusY||0;n.pressure=e.webkitForce||e.force||.5;n.isPrimary=this.isPrimaryTouch_(e);n.pointerType=T;n.clientX=e.clientX;n.clientY=e.clientY;n.screenX=e.screenX;n.screenY=e.screenY;return n};E.prototype.processTouches_=function(t,e){var n=Array.prototype.slice.call(t.changedTouches);var i=n.length;function r(){t.preventDefault()}var a=void 0,o=void 0;for(a=0;a<i;++a){o=this.touchToPointer_(t,n[a]);o.preventDefault=r;e.call(this,t,o)}};E.prototype.findTouch_=function(t,e){var n=t.length;var i=void 0;for(var r=0;r<n;r++){i=t[r];if(i.identifier===e){return true}}return false};E.prototype.vacuumTouches_=function(t){var e=t.touches;var n=Object.keys(this.pointerMap);var i=n.length;if(i>=e.length){var r=[];var a=void 0,o=void 0,s=void 0;for(a=0;a<i;++a){o=n[a];s=this.pointerMap[o];if(o!=d["a"]&&!this.findTouch_(e,o-2)){r.push(s.out)}}for(a=0;a<r.length;++a){this.cancelOut_(t,r[a])}}};E.prototype.touchstart=function(t){this.vacuumTouches_(t);this.setPrimaryTouch_(t.changedTouches[0]);this.dedupSynthMouse_(t);this.clickCount_++;this.processTouches_(t,this.overDown_)};E.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target};this.dispatcher.over(e,t);this.dispatcher.enter(e,t);this.dispatcher.down(e,t)};E.prototype.touchmove=function(t){t.preventDefault();this.processTouches_(t,this.moveOverOut_)};E.prototype.moveOverOut_=function(t,e){var n=e;var i=this.pointerMap[n.pointerId];if(!i){return}var r=i.out;var a=i.outTarget;this.dispatcher.move(n,t);if(r&&a!==n.target){r.relatedTarget=n.target;n.relatedTarget=a;r.target=a;if(n.target){this.dispatcher.leaveOut(r,t);this.dispatcher.enterOver(n,t)}else{n.target=a;n.relatedTarget=null;this.cancelOut_(t,n)}}i.out=n;i.outTarget=n.target};E.prototype.touchend=function(t){this.dedupSynthMouse_(t);this.processTouches_(t,this.upOut_)};E.prototype.upOut_=function(t,e){this.dispatcher.up(e,t);this.dispatcher.out(e,t);this.dispatcher.leave(e,t);this.cleanUpPointer_(e)};E.prototype.touchcancel=function(t){this.processTouches_(t,this.cancelOut_)};E.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t);this.dispatcher.out(e,t);this.dispatcher.leave(e,t);this.cleanUpPointer_(e)};E.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId];this.removePrimaryPointer_(t)};E.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches;var n=t.changedTouches[0];if(this.isPrimaryTouch_(n)){var i=[n.clientX,n.clientY];e.push(i);setTimeout(function(){Object(C["j"])(e,i)},this.dedupTimeout_)}};var M=E;var I=function t(e){f["a"].call(this);this.element_=e;this.pointerMap={};this.eventMap_={};this.eventSourceList_=[];this.registerSources()};Object(i["d"])(I,f["a"]);var R=[["bubbles",false],["cancelable",false],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",false],["altKey",false],["shiftKey",false],["metaKey",false],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",false],["type",""],["target",null],["currentTarget",null],["which",0]];I.prototype.registerSources=function(){if(s["f"]){this.registerSource("native",new y(this))}else if(s["e"]){this.registerSource("ms",new m(this))}else{var t=new d["c"](this);this.registerSource("mouse",t);if(s["h"]){this.registerSource("touch",new M(this,t))}}this.register_()};I.prototype.registerSource=function(t,e){var n=e;var i=n.getEvents();if(i){i.forEach(function(t){var e=n.getHandlerForEvent(t);if(e){this.eventMap_[t]=e.bind(n)}}.bind(this));this.eventSourceList_.push(n)}};I.prototype.register_=function(){var t=this.eventSourceList_.length;var e=void 0;for(var n=0;n<t;n++){e=this.eventSourceList_[n];this.addEvents_(e.getEvents())}};I.prototype.unregister_=function(){var t=this.eventSourceList_.length;var e=void 0;for(var n=0;n<t;n++){e=this.eventSourceList_[n];this.removeEvents_(e.getEvents())}};I.prototype.eventHandler_=function(t){var e=t.type;var n=this.eventMap_[e];if(n){n(t)}};I.prototype.addEvents_=function(t){t.forEach(function(t){Object(c["a"])(this.element_,t,this.eventHandler_,this)}.bind(this))};I.prototype.removeEvents_=function(t){t.forEach(function(t){Object(c["c"])(this.element_,t,this.eventHandler_,this)}.bind(this))};I.prototype.cloneEvent=function(t,e){var n={};for(var i=0,r=R.length;i<r;i++){var a=R[i][0];n[a]=t[a]||e[a]||R[i][1]}return n};I.prototype.down=function(t,e){this.fireEvent(h.POINTERDOWN,t,e)};I.prototype.move=function(t,e){this.fireEvent(h.POINTERMOVE,t,e)};I.prototype.up=function(t,e){this.fireEvent(h.POINTERUP,t,e)};I.prototype.enter=function(t,e){t.bubbles=false;this.fireEvent(h.POINTERENTER,t,e)};I.prototype.leave=function(t,e){t.bubbles=false;this.fireEvent(h.POINTERLEAVE,t,e)};I.prototype.over=function(t,e){t.bubbles=true;this.fireEvent(h.POINTEROVER,t,e)};I.prototype.out=function(t,e){t.bubbles=true;this.fireEvent(h.POINTEROUT,t,e)};I.prototype.cancel=function(t,e){this.fireEvent(h.POINTERCANCEL,t,e)};I.prototype.leaveOut=function(t,e){this.out(t,e);if(!this.contains_(t.target,t.relatedTarget)){this.leave(t,e)}};I.prototype.enterOver=function(t,e){this.over(t,e);if(!this.contains_(t.target,t.relatedTarget)){this.enter(t,e)}};I.prototype.contains_=function(t,e){if(!t||!e){return false}return t.contains(e)};I.prototype.makeEvent=function(t,e,n){return new S(t,n,e)};I.prototype.fireEvent=function(t,e,n){var i=this.makeEvent(t,e,n);this.dispatchEvent(i)};I.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)};I.prototype.wrapMouseEvent=function(t,e){var n=this.makeEvent(t,d["c"].prepareEvent(e,this),e);return n};I.prototype.disposeInternal=function(){this.unregister_();f["a"].prototype.disposeInternal.call(this)};var N=I;var A=function t(e,n){f["a"].call(this);this.map_=e;this.clickTimeoutId_=0;this.dragging_=false;this.dragListenerKeys_=[];this.moveTolerance_=n?n*s["b"]:s["b"];this.down_=null;var i=this.map_.getViewport();this.activePointers_=0;this.trackedTouches_={};this.pointerEventHandler_=new N(i);this.documentPointerEventHandler_=null;this.pointerdownListenerKey_=Object(c["a"])(this.pointerEventHandler_,h.POINTERDOWN,this.handlePointerDown_,this);this.relayedListenerKey_=Object(c["a"])(this.pointerEventHandler_,h.POINTERMOVE,this.relayEvent_,this)};Object(i["d"])(A,f["a"]);A.prototype.emulateClick_=function(t){var e=new u["a"](l["a"].CLICK,this.map_,t);this.dispatchEvent(e);if(this.clickTimeoutId_!==0){clearTimeout(this.clickTimeoutId_);this.clickTimeoutId_=0;e=new u["a"](l["a"].DBLCLICK,this.map_,t);this.dispatchEvent(e)}else{this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=0;var e=new u["a"](l["a"].SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)}};A.prototype.updateActivePointers_=function(t){var e=t;if(e.type==l["a"].POINTERUP||e.type==l["a"].POINTERCANCEL){delete this.trackedTouches_[e.pointerId]}else if(e.type==l["a"].POINTERDOWN){this.trackedTouches_[e.pointerId]=true}this.activePointers_=Object.keys(this.trackedTouches_).length};A.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new u["a"](l["a"].POINTERUP,this.map_,t);this.dispatchEvent(e);if(!e.propagationStopped&&!this.dragging_&&this.isMouseActionButton_(t)){this.emulateClick_(this.down_)}if(this.activePointers_===0){this.dragListenerKeys_.forEach(c["e"]);this.dragListenerKeys_.length=0;this.dragging_=false;this.down_=null;this.documentPointerEventHandler_.dispose();this.documentPointerEventHandler_=null}};A.prototype.isMouseActionButton_=function(t){return t.button===0};A.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new u["a"](l["a"].POINTERDOWN,this.map_,t);this.dispatchEvent(e);this.down_=t;if(this.dragListenerKeys_.length===0){this.documentPointerEventHandler_=new N(document);this.dragListenerKeys_.push(Object(c["a"])(this.documentPointerEventHandler_,l["a"].POINTERMOVE,this.handlePointerMove_,this),Object(c["a"])(this.documentPointerEventHandler_,l["a"].POINTERUP,this.handlePointerUp_,this),Object(c["a"])(this.pointerEventHandler_,l["a"].POINTERCANCEL,this.handlePointerUp_,this))}};A.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=true;var e=new u["a"](l["a"].POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()};A.prototype.relayEvent_=function(t){var e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new u["a"](t.type,this.map_,t,e))};A.prototype.isMoving_=function(t){return Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_};A.prototype.disposeInternal=function(){if(this.relayedListenerKey_){Object(c["e"])(this.relayedListenerKey_);this.relayedListenerKey_=null}if(this.pointerdownListenerKey_){Object(c["e"])(this.pointerdownListenerKey_);this.pointerdownListenerKey_=null}this.dragListenerKeys_.forEach(c["e"]);this.dragListenerKeys_.length=0;if(this.documentPointerEventHandler_){this.documentPointerEventHandler_.dispose();this.documentPointerEventHandler_=null}if(this.pointerEventHandler_){this.pointerEventHandler_.dispose();this.pointerEventHandler_=null}f["a"].prototype.disposeInternal.call(this)};var L=A;var P=n(208);var D=n(193);var j={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var k=n(39);var F=n(167);var $=n(30);var G=n(11);var U=n(27);var Y=n(9);var V=function t(e,n){this.priorityFunction_=e;this.keyFunction_=n;this.elements_=[];this.priorities_=[];this.queuedElements_={}};var H=Infinity;V.prototype.clear=function(){this.elements_.length=0;this.priorities_.length=0;Object(Y["b"])(this.queuedElements_)};V.prototype.dequeue=function(){var t=this.elements_;var e=this.priorities_;var n=t[0];if(t.length==1){t.length=0;e.length=0}else{t[0]=t.pop();e[0]=e.pop();this.siftUp_(0)}var i=this.keyFunction_(n);delete this.queuedElements_[i];return n};V.prototype.enqueue=function(t){Object(U["a"])(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);if(e!=H){this.elements_.push(t);this.priorities_.push(e);this.queuedElements_[this.keyFunction_(t)]=true;this.siftDown_(0,this.elements_.length-1);return true}return false};V.prototype.getCount=function(){return this.elements_.length};V.prototype.getLeftChildIndex_=function(t){return t*2+1};V.prototype.getRightChildIndex_=function(t){return t*2+2};V.prototype.getParentIndex_=function(t){return t-1>>1};V.prototype.heapify_=function(){var t=void 0;for(t=(this.elements_.length>>1)-1;t>=0;t--){this.siftUp_(t)}};V.prototype.isEmpty=function(){return this.elements_.length===0};V.prototype.isKeyQueued=function(t){return t in this.queuedElements_};V.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))};V.prototype.siftUp_=function(t){var e=this.elements_;var n=this.priorities_;var i=e.length;var r=e[t];var a=n[t];var o=t;while(t<i>>1){var s=this.getLeftChildIndex_(t);var l=this.getRightChildIndex_(t);var u=l<i&&n[l]<n[s]?l:s;e[t]=e[u];n[t]=n[u];t=u}e[t]=r;n[t]=a;this.siftDown_(o,t)};V.prototype.siftDown_=function(t,e){var n=this.elements_;var i=this.priorities_;var r=n[e];var a=i[e];while(e>t){var o=this.getParentIndex_(e);if(i[o]>a){n[e]=n[o];i[e]=i[o];e=o}else{break}}n[e]=r;i[e]=a};V.prototype.reprioritize=function(){var t=this.priorityFunction_;var e=this.elements_;var n=this.priorities_;var i=0;var r=e.length;var a=void 0,o=void 0,s=void 0;for(o=0;o<r;++o){a=e[o];s=t(a);if(s==H){delete this.queuedElements_[this.keyFunction_(a)]}else{n[i]=s;e[i++]=a}}e.length=i;n.length=i;this.heapify_()};var z=V;var B=function t(e,n){z.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()});this.tileChangeCallback_=n;this.tilesLoading_=0;this.tilesLoadingKeys_={}};Object(i["d"])(B,z);B.prototype.enqueue=function(t){var e=z.prototype.enqueue.call(this,t);if(e){var n=t[0];Object(c["a"])(n,G["a"].CHANGE,this.handleTileChange,this)}return e};B.prototype.getTilesLoading=function(){return this.tilesLoading_};B.prototype.handleTileChange=function(t){var e=t.target;var n=e.getState();if(n===$["a"].LOADED||n===$["a"].ERROR||n===$["a"].EMPTY||n===$["a"].ABORT){Object(c["c"])(e,G["a"].CHANGE,this.handleTileChange,this);var i=e.getKey();if(i in this.tilesLoadingKeys_){delete this.tilesLoadingKeys_[i];--this.tilesLoading_}this.tileChangeCallback_()}};B.prototype.loadMoreTiles=function(t,e){var n=0;var i=false;var r=void 0,a=void 0,o=void 0;while(this.tilesLoading_<t&&n<e&&this.getCount()>0){a=this.dequeue()[0];o=a.getKey();r=a.getState();if(r===$["a"].ABORT){i=true}else if(r===$["a"].IDLE&&!(o in this.tilesLoadingKeys_)){this.tilesLoadingKeys_[o]=true;++this.tilesLoading_;++n;a.load()}}if(n===0&&i){this.tileChangeCallback_()}};var W=B;var q=n(46);var X=n(58);var K=n(47);var Z=n(4);var Q=n(20);var J=n(93);var tt=n(104);var et=n(40);var nt=function t(e){k["a"].call(this);var n=it(e);this.maxTilesLoading_=e.maxTilesLoading!==undefined?e.maxTilesLoading:16;this.loadTilesWhileAnimating_=e.loadTilesWhileAnimating!==undefined?e.loadTilesWhileAnimating:false;this.loadTilesWhileInteracting_=e.loadTilesWhileInteracting!==undefined?e.loadTilesWhileInteracting:false;this.pixelRatio_=e.pixelRatio!==undefined?e.pixelRatio:s["b"];this.animationDelayKey_;this.animationDelay_=function(){this.animationDelayKey_=undefined;this.renderFrame_.call(this,Date.now())}.bind(this);this.coordinateToPixelTransform_=Object(et["c"])();this.pixelToCoordinateTransform_=Object(et["c"])();this.frameIndex_=0;this.frameState_=null;this.previousExtent_=null;this.viewPropertyListenerKey_=null;this.viewChangeListenerKey_=null;this.layerGroupPropertyListenerKeys_=null;this.viewport_=document.createElement("DIV");this.viewport_.className="ol-viewport"+(s["h"]?" ol-touch":"");this.viewport_.style.position="relative";this.viewport_.style.overflow="hidden";this.viewport_.style.width="100%";this.viewport_.style.height="100%";this.viewport_.style.msTouchAction="none";this.viewport_.style.touchAction="none";this.overlayContainer_=document.createElement("DIV");this.overlayContainer_.className="ol-overlaycontainer";this.viewport_.appendChild(this.overlayContainer_);this.overlayContainerStopEvent_=document.createElement("DIV");this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";var i=[G["a"].CLICK,G["a"].DBLCLICK,G["a"].MOUSEDOWN,G["a"].TOUCHSTART,G["a"].MSPOINTERDOWN,l["a"].POINTERDOWN,G["a"].MOUSEWHEEL,G["a"].WHEEL];for(var o=0,u=i.length;o<u;++o){Object(c["a"])(this.overlayContainerStopEvent_,i[o],b["b"])}this.viewport_.appendChild(this.overlayContainerStopEvent_);this.mapBrowserEventHandler_=new L(this,e.moveTolerance);for(var f in l["a"]){Object(c["a"])(this.mapBrowserEventHandler_,l["a"][f],this.handleMapBrowserEvent,this)}this.keyboardEventTarget_=n.keyboardEventTarget;this.keyHandlerKeys_=null;Object(c["a"])(this.viewport_,G["a"].CONTEXTMENU,this.handleBrowserEvent,this);Object(c["a"])(this.viewport_,G["a"].WHEEL,this.handleBrowserEvent,this);Object(c["a"])(this.viewport_,G["a"].MOUSEWHEEL,this.handleBrowserEvent,this);this.controls=n.controls||new r["b"];this.interactions=n.interactions||new r["b"];this.overlays_=n.overlays;this.overlayIdIndex_={};this.renderer_=this.createRenderer(this.viewport_,this);this.handleResize_;this.focus_=null;this.postRenderFunctions_=[];this.tileQueue_=new W(this.getTilePriority.bind(this),this.handleTileChange_.bind(this));this.skippedFeatureUids_={};Object(c["a"])(this,Object(k["b"])(j.LAYERGROUP),this.handleLayerGroupChanged_,this);Object(c["a"])(this,Object(k["b"])(j.VIEW),this.handleViewChanged_,this);Object(c["a"])(this,Object(k["b"])(j.SIZE),this.handleSizeChanged_,this);Object(c["a"])(this,Object(k["b"])(j.TARGET),this.handleTargetChanged_,this);this.setProperties(n.values);this.controls.forEach(function(t){t.setMap(this)}.bind(this));Object(c["a"])(this.controls,a["a"].ADD,function(t){t.element.setMap(this)},this);Object(c["a"])(this.controls,a["a"].REMOVE,function(t){t.element.setMap(null)},this);this.interactions.forEach(function(t){t.setMap(this)}.bind(this));Object(c["a"])(this.interactions,a["a"].ADD,function(t){t.element.setMap(this)},this);Object(c["a"])(this.interactions,a["a"].REMOVE,function(t){t.element.setMap(null)},this);this.overlays_.forEach(this.addOverlayInternal_.bind(this));Object(c["a"])(this.overlays_,a["a"].ADD,function(t){this.addOverlayInternal_(t.element)},this);Object(c["a"])(this.overlays_,a["a"].REMOVE,function(t){var e=t.element;var n=e.getId();if(n!==undefined){delete this.overlayIdIndex_[n.toString()]}t.element.setMap(null)},this)};Object(i["d"])(nt,k["a"]);nt.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")};nt.prototype.addControl=function(t){this.getControls().push(t)};nt.prototype.addInteraction=function(t){this.getInteractions().push(t)};nt.prototype.addLayer=function(t){var e=this.getLayerGroup().getLayers();e.push(t)};nt.prototype.addOverlay=function(t){this.getOverlays().push(t)};nt.prototype.addOverlayInternal_=function(t){var e=t.getId();if(e!==undefined){this.overlayIdIndex_[e.toString()]=t}t.setMap(this)};nt.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose();Object(c["c"])(this.viewport_,G["a"].CONTEXTMENU,this.handleBrowserEvent,this);Object(c["c"])(this.viewport_,G["a"].WHEEL,this.handleBrowserEvent,this);Object(c["c"])(this.viewport_,G["a"].MOUSEWHEEL,this.handleBrowserEvent,this);if(this.handleResize_!==undefined){removeEventListener(G["a"].RESIZE,this.handleResize_,false);this.handleResize_=undefined}if(this.animationDelayKey_){cancelAnimationFrame(this.animationDelayKey_);this.animationDelayKey_=undefined}this.setTarget(null);k["a"].prototype.disposeInternal.call(this)};nt.prototype.forEachFeatureAtPixel=function(t,e,n){if(!this.frameState_){return}var i=this.getCoordinateFromPixel(t);n=n!==undefined?n:{};var r=n.hitTolerance!==undefined?n.hitTolerance*this.frameState_.pixelRatio:0;var a=n.layerFilter!==undefined?n.layerFilter:Q["b"];return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,e,null,a,null)};nt.prototype.getFeaturesAtPixel=function(t,e){var n=null;this.forEachFeatureAtPixel(t,function(t){if(!n){n=[]}n.push(t)},e);return n};nt.prototype.forEachLayerAtPixel=function(t,e,n,i,r){if(!this.frameState_){return}var a=n!==undefined?n:null;var o=i!==undefined?i:Q["b"];var s=r!==undefined?r:null;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,e,a,o,s)};nt.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_){return false}var n=this.getCoordinateFromPixel(t);e=e!==undefined?e:{};var i=e.layerFilter!==undefined?e.layerFilter:Q["b"];var r=e.hitTolerance!==undefined?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,i,null)};nt.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))};nt.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect();var n=t.changedTouches?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]};nt.prototype.getTarget=function(){return this.get(j.TARGET)};nt.prototype.getTargetElement=function(){var t=this.getTarget();if(t!==undefined){return typeof t==="string"?document.getElementById(t):t}else{return null}};nt.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;if(!e){return null}else{return Object(et["a"])(e.pixelToCoordinateTransform,t.slice())}};nt.prototype.getControls=function(){return this.controls};nt.prototype.getOverlays=function(){return this.overlays_};nt.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return e!==undefined?e:null};nt.prototype.getInteractions=function(){return this.interactions};nt.prototype.getLayerGroup=function(){return this.get(j.LAYERGROUP)};nt.prototype.getLayers=function(){var t=this.getLayerGroup().getLayers();return t};nt.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;if(!e){return null}else{return Object(et["a"])(e.coordinateToPixelTransform,t.slice(0,2))}};nt.prototype.getRenderer=function(){return this.renderer_};nt.prototype.getSize=function(){return this.get(j.SIZE)};nt.prototype.getView=function(){return this.get(j.VIEW)};nt.prototype.getViewport=function(){return this.viewport_};nt.prototype.getOverlayContainer=function(){return this.overlayContainer_};nt.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_};nt.prototype.getTilePriority=function(t,e,n,i){var r=this.frameState_;if(!r||!(e in r.wantedTiles)){return H}if(!r.wantedTiles[e][t.getKey()]){return H}var a=n[0]-r.focus[0];var o=n[1]-r.focus[1];return 65536*Math.log(i)+Math.sqrt(a*a+o*o)/i};nt.prototype.handleBrowserEvent=function(t,e){var n=e||t.type;var i=new o["a"](n,this,t);this.handleMapBrowserEvent(i)};nt.prototype.handleMapBrowserEvent=function(t){if(!this.frameState_){return}this.focus_=t.coordinate;t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(this.dispatchEvent(t)!==false){for(var n=e.length-1;n>=0;n--){var i=e[n];if(!i.getActive()){continue}var r=i.handleEvent(t);if(!r){break}}}};nt.prototype.handlePostRender=function(){var t=this.frameState_;var e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_;var i=n;if(t){var r=t.viewHints;if(r[X["a"].ANIMATING]){n=this.loadTilesWhileAnimating_?8:0;i=2}if(r[X["a"].INTERACTING]){n=this.loadTilesWhileInteracting_?8:0;i=2}}if(e.getTilesLoading()<n){e.reprioritize();e.loadMoreTiles(n,i)}}var a=this.postRenderFunctions_;for(var o=0,s=a.length;o<s;++o){a[o](this,t)}a.length=0};nt.prototype.handleSizeChanged_=function(){this.render()};nt.prototype.handleTargetChanged_=function(){var t=void 0;if(this.getTarget()){t=this.getTargetElement()}if(this.keyHandlerKeys_){for(var e=0,n=this.keyHandlerKeys_.length;e<n;++e){Object(c["e"])(this.keyHandlerKeys_[e])}this.keyHandlerKeys_=null}if(!t){this.renderer_.removeLayerRenderers();Object(K["e"])(this.viewport_);if(this.handleResize_!==undefined){removeEventListener(G["a"].RESIZE,this.handleResize_,false);this.handleResize_=undefined}}else{t.appendChild(this.viewport_);var i=!this.keyboardEventTarget_?t:this.keyboardEventTarget_;this.keyHandlerKeys_=[Object(c["a"])(i,G["a"].KEYDOWN,this.handleBrowserEvent,this),Object(c["a"])(i,G["a"].KEYPRESS,this.handleBrowserEvent,this)];if(!this.handleResize_){this.handleResize_=this.updateSize.bind(this);addEventListener(G["a"].RESIZE,this.handleResize_,false)}}this.updateSize()};nt.prototype.handleTileChange_=function(){this.render()};nt.prototype.handleViewPropertyChanged_=function(){this.render()};nt.prototype.handleViewChanged_=function(){if(this.viewPropertyListenerKey_){Object(c["e"])(this.viewPropertyListenerKey_);this.viewPropertyListenerKey_=null}if(this.viewChangeListenerKey_){Object(c["e"])(this.viewChangeListenerKey_);this.viewChangeListenerKey_=null}var t=this.getView();if(t){this.viewport_.setAttribute("data-view",Object(i["c"])(t));this.viewPropertyListenerKey_=Object(c["a"])(t,F["a"].PROPERTYCHANGE,this.handleViewPropertyChanged_,this);this.viewChangeListenerKey_=Object(c["a"])(t,G["a"].CHANGE,this.handleViewPropertyChanged_,this)}this.render()};nt.prototype.handleLayerGroupChanged_=function(){if(this.layerGroupPropertyListenerKeys_){this.layerGroupPropertyListenerKeys_.forEach(c["e"]);this.layerGroupPropertyListenerKeys_=null}var t=this.getLayerGroup();if(t){this.layerGroupPropertyListenerKeys_=[Object(c["a"])(t,F["a"].PROPERTYCHANGE,this.render,this),Object(c["a"])(t,G["a"].CHANGE,this.render,this)]}this.render()};nt.prototype.isRendered=function(){return!!this.frameState_};nt.prototype.renderSync=function(){if(this.animationDelayKey_){cancelAnimationFrame(this.animationDelayKey_)}this.animationDelay_()};nt.prototype.render=function(){if(this.animationDelayKey_===undefined){this.animationDelayKey_=requestAnimationFrame(this.animationDelay_)}};nt.prototype.removeControl=function(t){return this.getControls().remove(t)};nt.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)};nt.prototype.removeLayer=function(t){var e=this.getLayerGroup().getLayers();return e.remove(t)};nt.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)};nt.prototype.renderFrame_=function(t){var e=void 0;var n=this.getSize();var r=this.getView();var a=Object(Z["j"])();var o=this.frameState_;var s=null;if(n!==undefined&&Object(tt["b"])(n)&&r&&r.isDef()){var l=r.getHints(this.frameState_?this.frameState_.viewHints:undefined);var u=this.getLayerGroup().getLayerStatesArray();var c={};for(var f=0,h=u.length;f<h;++f){c[Object(i["c"])(u[f].layer)]=u[f]}e=r.getState();var d=this.focus_;if(!d){d=e.center;var p=e.resolution/this.pixelRatio_;d[0]=Math.round(d[0]/p)*p;d[1]=Math.round(d[1]/p)*p}s={animate:false,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:a,focus:d,index:this.frameIndex_++,layerStates:c,layerStatesArray:u,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:l,wantedTiles:{}}}if(s){s.extent=Object(Z["z"])(e.center,e.resolution,e.rotation,s.size,a)}this.frameState_=s;this.renderer_.renderFrame(s);if(s){if(s.animate){this.render()}Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions);if(o){var v=!this.previousExtent_||!Object(Z["H"])(this.previousExtent_)&&!Object(Z["p"])(s.extent,this.previousExtent_);if(v){this.dispatchEvent(new P["a"](D["a"].MOVESTART,this,o));this.previousExtent_=Object(Z["l"])(this.previousExtent_)}}var g=this.previousExtent_&&!s.viewHints[X["a"].ANIMATING]&&!s.viewHints[X["a"].INTERACTING]&&!Object(Z["p"])(s.extent,this.previousExtent_);if(g){this.dispatchEvent(new P["a"](D["a"].MOVEEND,this,s));Object(Z["d"])(s.extent,this.previousExtent_)}}this.dispatchEvent(new P["a"](D["a"].POSTRENDER,this,s));setTimeout(this.handlePostRender.bind(this),0)};nt.prototype.setLayerGroup=function(t){this.set(j.LAYERGROUP,t)};nt.prototype.setSize=function(t){this.set(j.SIZE,t)};nt.prototype.setTarget=function(t){this.set(j.TARGET,t)};nt.prototype.setView=function(t){this.set(j.VIEW,t)};nt.prototype.skipFeature=function(t){var e=Object(i["c"])(t).toString();this.skippedFeatureUids_[e]=true;this.render()};nt.prototype.updateSize=function(){var t=this.getTargetElement();if(!t){this.setSize(undefined)}else{var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e["borderLeftWidth"])-parseFloat(e["paddingLeft"])-parseFloat(e["paddingRight"])-parseFloat(e["borderRightWidth"]),t.offsetHeight-parseFloat(e["borderTopWidth"])-parseFloat(e["paddingTop"])-parseFloat(e["paddingBottom"])-parseFloat(e["borderBottomWidth"])])}};nt.prototype.unskipFeature=function(t){var e=Object(i["c"])(t).toString();delete this.skippedFeatureUids_[e];this.render()};function it(t){var e=null;if(t.keyboardEventTarget!==undefined){e=typeof t.keyboardEventTarget==="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget}var n={};var i=t.layers instanceof J["a"]?t.layers:new J["a"]({layers:t.layers});n[j.LAYERGROUP]=i;n[j.TARGET]=t.target;n[j.VIEW]=t.view!==undefined?t.view:new q["a"];var a=void 0;if(t.controls!==undefined){if(Array.isArray(t.controls)){a=new r["b"](t.controls.slice())}else{Object(U["a"])(t.controls instanceof r["b"],47);a=t.controls}}var o=void 0;if(t.interactions!==undefined){if(Array.isArray(t.interactions)){o=new r["b"](t.interactions.slice())}else{Object(U["a"])(t.interactions instanceof r["b"],48);o=t.interactions}}var s=void 0;if(t.overlays!==undefined){if(Array.isArray(t.overlays)){s=new r["b"](t.overlays.slice())}else{Object(U["a"])(t.overlays instanceof r["b"],49);s=t.overlays}}else{s=new r["b"]}return{controls:a,interactions:o,keyboardEventTarget:e,overlays:s,values:n}}var rt=nt;var at=n(64);var ot=n(62);var st=n(86);var lt=function t(e){var n=e?e:{};this.ulElement_=document.createElement("UL");this.collapsed_=n.collapsed!==undefined?n.collapsed:true;this.collapsible_=n.collapsible!==undefined?n.collapsible:true;if(!this.collapsible_){this.collapsed_=false}var i=n.className!==undefined?n.className:"ol-attribution";var r=n.tipLabel!==undefined?n.tipLabel:"Attributions";var a=n.collapseLabel!==undefined?n.collapseLabel:"»";if(typeof a==="string"){this.collapseLabel_=document.createElement("span");this.collapseLabel_.textContent=a}else{this.collapseLabel_=a}var o=n.label!==undefined?n.label:"i";if(typeof o==="string"){this.label_=document.createElement("span");this.label_.textContent=o}else{this.label_=o}var s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;var l=document.createElement("button");l.setAttribute("type","button");l.title=r;l.appendChild(s);Object(c["a"])(l,G["a"].CLICK,this.handleClick_,this);var u=i+" "+ot["e"]+" "+ot["b"]+(this.collapsed_&&this.collapsible_?" "+ot["a"]:"")+(this.collapsible_?"":" ol-uncollapsible");var f=document.createElement("div");f.className=u;f.appendChild(this.ulElement_);f.appendChild(l);at["a"].call(this,{element:f,render:n.render||ut,target:n.target});this.renderedAttributions_=[];this.renderedVisible_=true};Object(i["d"])(lt,at["a"]);lt.prototype.getSourceAttributions_=function(t){var e={};var n=[];var i=t.layerStatesArray;var r=t.viewState.resolution;for(var a=0,o=i.length;a<o;++a){var s=i[a];if(!Object(st["b"])(s,r)){continue}var l=s.layer.getSource();if(!l){continue}var u=l.getAttributions();if(!u){continue}var c=u(t);if(!c){continue}if(Array.isArray(c)){for(var f=0,h=c.length;f<h;++f){if(!(c[f]in e)){n.push(c[f]);e[c[f]]=true}}}else{if(!(c in e)){n.push(c);e[c]=true}}}return n};function ut(t){this.updateElement_(t.frameState)}lt.prototype.updateElement_=function(t){if(!t){if(this.renderedVisible_){this.element.style.display="none";this.renderedVisible_=false}return}var e=this.getSourceAttributions_(t);if(Object(C["b"])(e,this.renderedAttributions_)){return}Object(K["d"])(this.ulElement_);for(var n=0,i=e.length;n<i;++n){var r=document.createElement("LI");r.innerHTML=e[n];this.ulElement_.appendChild(r)}var a=e.length>0;if(this.renderedVisible_!=a){this.element.style.display=a?"":"none";this.renderedVisible_=a}this.renderedAttributions_=e};lt.prototype.handleClick_=function(t){t.preventDefault();this.handleToggle_()};lt.prototype.handleToggle_=function(){this.element.classList.toggle(ot["a"]);if(this.collapsed_){Object(K["f"])(this.collapseLabel_,this.label_)}else{Object(K["f"])(this.label_,this.collapseLabel_)}this.collapsed_=!this.collapsed_};lt.prototype.getCollapsible=function(){return this.collapsible_};lt.prototype.setCollapsible=function(t){if(this.collapsible_===t){return}this.collapsible_=t;this.element.classList.toggle("ol-uncollapsible");if(!t&&this.collapsed_){this.handleToggle_()}};lt.prototype.setCollapsed=function(t){if(!this.collapsible_||this.collapsed_===t){return}this.handleToggle_()};lt.prototype.getCollapsed=function(){return this.collapsed_};var ct=lt;var ft=n(92);var ht=function t(e){var n=e?e:{};var i=n.className!==undefined?n.className:"ol-rotate";var r=n.label!==undefined?n.label:"⇧";this.label_=null;if(typeof r==="string"){this.label_=document.createElement("span");this.label_.className="ol-compass";this.label_.textContent=r}else{this.label_=r;this.label_.classList.add("ol-compass")}var a=n.tipLabel?n.tipLabel:"Reset rotation";var o=document.createElement("button");o.className=i+"-reset";o.setAttribute("type","button");o.title=a;o.appendChild(this.label_);Object(c["a"])(o,G["a"].CLICK,t.prototype.handleClick_,this);var s=i+" "+ot["e"]+" "+ot["b"];var l=document.createElement("div");l.className=s;l.appendChild(o);this.callResetNorth_=n.resetNorth?n.resetNorth:undefined;at["a"].call(this,{element:l,render:n.render||dt,target:n.target});this.duration_=n.duration!==undefined?n.duration:250;this.autoHide_=n.autoHide!==undefined?n.autoHide:true;this.rotation_=undefined;if(this.autoHide_){this.element.classList.add(ot["c"])}};Object(i["d"])(ht,at["a"]);ht.prototype.handleClick_=function(t){t.preventDefault();if(this.callResetNorth_!==undefined){this.callResetNorth_()}else{this.resetNorth_()}};ht.prototype.resetNorth_=function(){var t=this.getMap();var e=t.getView();if(!e){return}if(e.getRotation()!==undefined){if(this.duration_>0){e.animate({rotation:0,duration:this.duration_,easing:ft["b"]})}else{e.setRotation(0)}}};function dt(t){var e=t.frameState;if(!e){return}var n=e.viewState.rotation;if(n!=this.rotation_){var i="rotate("+n+"rad)";if(this.autoHide_){var r=this.element.classList.contains(ot["c"]);if(!r&&n===0){this.element.classList.add(ot["c"])}else if(r&&n!==0){this.element.classList.remove(ot["c"])}}this.label_.style.msTransform=i;this.label_.style.webkitTransform=i;this.label_.style.transform=i}this.rotation_=n}var pt=ht;var vt=function t(e){var n=e?e:{};var i=n.className!==undefined?n.className:"ol-zoom";var r=n.delta!==undefined?n.delta:1;var a=n.zoomInLabel!==undefined?n.zoomInLabel:"+";var o=n.zoomOutLabel!==undefined?n.zoomOutLabel:"−";var s=n.zoomInTipLabel!==undefined?n.zoomInTipLabel:"Zoom in";var l=n.zoomOutTipLabel!==undefined?n.zoomOutTipLabel:"Zoom out";var u=document.createElement("button");u.className=i+"-in";u.setAttribute("type","button");u.title=s;u.appendChild(typeof a==="string"?document.createTextNode(a):a);Object(c["a"])(u,G["a"].CLICK,t.prototype.handleClick_.bind(this,r));var f=document.createElement("button");f.className=i+"-out";f.setAttribute("type","button");f.title=l;f.appendChild(typeof o==="string"?document.createTextNode(o):o);Object(c["a"])(f,G["a"].CLICK,t.prototype.handleClick_.bind(this,-r));var h=i+" "+ot["e"]+" "+ot["b"];var d=document.createElement("div");d.className=h;d.appendChild(u);d.appendChild(f);at["a"].call(this,{element:d,target:n.target});this.duration_=n.duration!==undefined?n.duration:250};Object(i["d"])(vt,at["a"]);vt.prototype.handleClick_=function(t,e){e.preventDefault();this.zoomByDelta_(t)};vt.prototype.zoomByDelta_=function(t){var e=this.getMap();var n=e.getView();if(!n){return}var i=n.getResolution();if(i){var r=n.constrainResolution(i,t);if(this.duration_>0){if(n.getAnimating()){n.cancelAnimations()}n.animate({resolution:r,duration:this.duration_,easing:ft["b"]})}else{n.setResolution(r)}}};var gt=vt;var mt=function(){var t=void 0;return function(){if(!t){var e=document.body;if(e.webkitRequestFullscreen){t="webkitfullscreenchange"}else if(e.mozRequestFullScreen){t="mozfullscreenchange"}else if(e.msRequestFullscreen){t="MSFullscreenChange"}else if(e.requestFullscreen){t="fullscreenchange"}}return t}}();var _t=function t(e){var n=e?e:{};this.cssClassName_=n.className!==undefined?n.className:"ol-full-screen";var i=n.label!==undefined?n.label:"⤢";this.labelNode_=typeof i==="string"?document.createTextNode(i):i;var r=n.labelActive!==undefined?n.labelActive:"×";this.labelActiveNode_=typeof r==="string"?document.createTextNode(r):r;var a=n.tipLabel?n.tipLabel:"Toggle full-screen";var o=document.createElement("button");o.className=this.cssClassName_+"-"+bt();o.setAttribute("type","button");o.title=a;o.appendChild(this.labelNode_);Object(c["a"])(o,G["a"].CLICK,this.handleClick_,this);var s=this.cssClassName_+" "+ot["e"]+" "+ot["b"]+" "+(!yt()?ot["f"]:"");var l=document.createElement("div");l.className=s;l.appendChild(o);at["a"].call(this,{element:l,target:n.target});this.keys_=n.keys!==undefined?n.keys:false;this.source_=n.source};Object(i["d"])(_t,at["a"]);_t.prototype.handleClick_=function(t){t.preventDefault();this.handleFullScreen_()};_t.prototype.handleFullScreen_=function(){if(!yt()){return}var t=this.getMap();if(!t){return}if(bt()){St()}else{var e=void 0;if(this.source_){e=typeof this.source_==="string"?document.getElementById(this.source_):this.source_}else{e=t.getTargetElement()}if(this.keys_){xt(e)}else{wt(e)}}};_t.prototype.handleFullScreenChange_=function(){var t=this.element.firstElementChild;var e=this.getMap();if(bt()){t.className=this.cssClassName_+"-true";Object(K["f"])(this.labelActiveNode_,this.labelNode_)}else{t.className=this.cssClassName_+"-false";Object(K["f"])(this.labelNode_,this.labelActiveNode_)}if(e){e.updateSize()}};_t.prototype.setMap=function(t){at["a"].prototype.setMap.call(this,t);if(t){this.listenerKeys.push(Object(c["a"])(document,mt(),this.handleFullScreenChange_,this))}};function yt(){var t=document.body;return!!(t.webkitRequestFullscreen||t.mozRequestFullScreen&&document.mozFullScreenEnabled||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function bt(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}function wt(t){if(t.requestFullscreen){t.requestFullscreen()}else if(t.msRequestFullscreen){t.msRequestFullscreen()}else if(t.mozRequestFullScreen){t.mozRequestFullScreen()}else if(t.webkitRequestFullscreen){t.webkitRequestFullscreen()}}function xt(t){if(t.mozRequestFullScreenWithKeys){t.mozRequestFullScreenWithKeys()}else if(t.webkitRequestFullscreen){t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}else{wt(t)}}function St(){if(document.exitFullscreen){document.exitFullscreen()}else if(document.msExitFullscreen){document.msExitFullscreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}var Ct=_t;var Et=n(115);var Ot=n(129);var Tt=n(107);var Mt=n(29);var It=.75;var Rt=.1;var Nt=function t(e){var n=e?e:{};this.collapsed_=n.collapsed!==undefined?n.collapsed:true;this.collapsible_=n.collapsible!==undefined?n.collapsible:true;if(!this.collapsible_){this.collapsed_=false}var i=n.className!==undefined?n.className:"ol-overviewmap";var a=n.tipLabel!==undefined?n.tipLabel:"Overview map";var o=n.collapseLabel!==undefined?n.collapseLabel:"«";if(typeof o==="string"){this.collapseLabel_=document.createElement("span");this.collapseLabel_.textContent=o}else{this.collapseLabel_=o}var s=n.label!==undefined?n.label:"»";if(typeof s==="string"){this.label_=document.createElement("span");this.label_.textContent=s}else{this.label_=s}var l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;var u=document.createElement("button");u.setAttribute("type","button");u.title=a;u.appendChild(l);Object(c["a"])(u,G["a"].CLICK,this.handleClick_,this);this.ovmapDiv_=document.createElement("DIV");this.ovmapDiv_.className="ol-overviewmap-map";this.ovmap_=new br({controls:new r["b"],interactions:new r["b"],view:n.view});var f=this.ovmap_;if(n.layers){n.layers.forEach(function(t){f.addLayer(t)}.bind(this))}var h=document.createElement("DIV");h.className="ol-overviewmap-box";h.style.boxSizing="border-box";this.boxOverlay_=new Et["a"]({position:[0,0],positioning:Ot["a"].BOTTOM_LEFT,element:h});this.ovmap_.addOverlay(this.boxOverlay_);var d=i+" "+ot["e"]+" "+ot["b"]+(this.collapsed_&&this.collapsible_?" "+ot["a"]:"")+(this.collapsible_?"":" ol-uncollapsible");var p=document.createElement("div");p.className=d;p.appendChild(this.ovmapDiv_);p.appendChild(u);at["a"].call(this,{element:p,render:n.render||At,target:n.target});var v=this;var g=this.boxOverlay_;var m=this.boxOverlay_.getElement();var _=function t(e){return{clientX:e.clientX-m.offsetWidth/2,clientY:e.clientY+m.offsetHeight/2}};var y=function t(e){var n=f.getEventCoordinate(_(e));g.setPosition(n)};var b=function t(e){var n=f.getEventCoordinate(e);v.getMap().getView().setCenter(n);window.removeEventListener("mousemove",y);window.removeEventListener("mouseup",t)};m.addEventListener("mousedown",function(){window.addEventListener("mousemove",y);window.addEventListener("mouseup",b)})};Object(i["d"])(Nt,at["a"]);Nt.prototype.setMap=function(t){var e=this.getMap();if(t===e){return}if(e){var n=e.getView();if(n){this.unbindView_(n)}this.ovmap_.setTarget(null)}at["a"].prototype.setMap.call(this,t);if(t){this.ovmap_.setTarget(this.ovmapDiv_);this.listenerKeys.push(Object(c["a"])(t,F["a"].PROPERTYCHANGE,this.handleMapPropertyChange_,this));if(this.ovmap_.getLayers().getLength()===0){this.ovmap_.setLayerGroup(t.getLayerGroup())}var i=t.getView();if(i){this.bindView_(i);if(i.isDef()){this.ovmap_.updateSize();this.resetExtent_()}}}};Nt.prototype.handleMapPropertyChange_=function(t){if(t.key===j.VIEW){var e=t.oldValue;if(e){this.unbindView_(e)}var n=this.getMap().getView();this.bindView_(n)}};Nt.prototype.bindView_=function(t){Object(c["a"])(t,Object(k["b"])(Tt["a"].ROTATION),this.handleRotationChanged_,this)};Nt.prototype.unbindView_=function(t){Object(c["c"])(t,Object(k["b"])(Tt["a"].ROTATION),this.handleRotationChanged_,this)};Nt.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())};function At(t){this.validateExtent_();this.updateBox_()}Nt.prototype.validateExtent_=function(){var t=this.getMap();var e=this.ovmap_;if(!t.isRendered()||!e.isRendered()){return}var n=t.getSize();var i=t.getView();var r=i.calculateExtent(n);var a=e.getSize();var o=e.getView();var s=o.calculateExtent(a);var l=e.getPixelFromCoordinate(Object(Z["C"])(r));var u=e.getPixelFromCoordinate(Object(Z["w"])(r));var c=Math.abs(l[0]-u[0]);var f=Math.abs(l[1]-u[1]);var h=a[0];var d=a[1];if(c<h*Rt||f<d*Rt||c>h*It||f>d*It){this.resetExtent_()}else if(!Object(Z["g"])(s,r)){this.recenter_()}};Nt.prototype.resetExtent_=function(){if(It===0||Rt===0){return}var t=this.getMap();var e=this.ovmap_;var n=t.getSize();var i=t.getView();var r=i.calculateExtent(n);var a=e.getView();var o=Math.log(It/Rt)/Math.LN2;var s=1/(Math.pow(2,o/2)*Rt);Object(Z["J"])(r,s);a.fit(r)};Nt.prototype.recenter_=function(){var t=this.getMap();var e=this.ovmap_;var n=t.getView();var i=e.getView();i.setCenter(n.getCenter())};Nt.prototype.updateBox_=function(){var t=this.getMap();var e=this.ovmap_;if(!t.isRendered()||!e.isRendered()){return}var n=t.getSize();var i=t.getView();var r=e.getView();var a=i.getRotation();var o=this.boxOverlay_;var s=this.boxOverlay_.getElement();var l=i.calculateExtent(n);var u=r.getResolution();var c=Object(Z["v"])(l);var f=Object(Z["D"])(l);var h=this.calculateCoordinateRotate_(a,c);o.setPosition(h);if(s){s.style.width=Math.abs((c[0]-f[0])/u)+"px";s.style.height=Math.abs((f[1]-c[1])/u)+"px"}};Nt.prototype.calculateCoordinateRotate_=function(t,e){var n=void 0;var i=this.getMap();var r=i.getView();var a=r.getCenter();if(a){n=[e[0]-a[0],e[1]-a[1]];Object(Mt["f"])(n,t);Object(Mt["a"])(n,a)}return n};Nt.prototype.handleClick_=function(t){t.preventDefault();this.handleToggle_()};Nt.prototype.handleToggle_=function(){this.element.classList.toggle(ot["a"]);if(this.collapsed_){Object(K["f"])(this.collapseLabel_,this.label_)}else{Object(K["f"])(this.label_,this.collapseLabel_)}this.collapsed_=!this.collapsed_;var t=this.ovmap_;if(!this.collapsed_&&!t.isRendered()){t.updateSize();this.resetExtent_();Object(c["b"])(t,D["a"].POSTRENDER,function(t){this.updateBox_()},this)}};Nt.prototype.getCollapsible=function(){return this.collapsible_};Nt.prototype.setCollapsible=function(t){if(this.collapsible_===t){return}this.collapsible_=t;this.element.classList.toggle("ol-uncollapsible");if(!t&&this.collapsed_){this.handleToggle_()}};Nt.prototype.setCollapsed=function(t){if(!this.collapsible_||this.collapsed_===t){return}this.handleToggle_()};Nt.prototype.getCollapsed=function(){return this.collapsed_};Nt.prototype.getOverviewMap=function(){return this.ovmap_};var Lt=Nt;var Pt=n(295);var Dt=n(15);var jt={VERTICAL:0,HORIZONTAL:1};var kt=function t(e){var n=e?e:{};this.currentResolution_=undefined;this.direction_=jt.VERTICAL;this.dragging_;this.heightLimit_=0;this.widthLimit_=0;this.previousX_;this.previousY_;this.thumbSize_=null;this.sliderInitialized_=false;this.duration_=n.duration!==undefined?n.duration:200;var i=n.className!==undefined?n.className:"ol-zoomslider";var r=document.createElement("button");r.setAttribute("type","button");r.className=i+"-thumb "+ot["e"];var a=document.createElement("div");a.className=i+" "+ot["e"]+" "+ot["b"];a.appendChild(r);this.dragger_=new N(a);Object(c["a"])(this.dragger_,h.POINTERDOWN,this.handleDraggerStart_,this);Object(c["a"])(this.dragger_,h.POINTERMOVE,this.handleDraggerDrag_,this);Object(c["a"])(this.dragger_,h.POINTERUP,this.handleDraggerEnd_,this);Object(c["a"])(a,G["a"].CLICK,this.handleContainerClick_,this);Object(c["a"])(r,G["a"].CLICK,b["b"]);at["a"].call(this,{element:a,render:n.render||Ft})};Object(i["d"])(kt,at["a"]);kt.prototype.disposeInternal=function(){this.dragger_.dispose();at["a"].prototype.disposeInternal.call(this)};kt.prototype.setMap=function(t){at["a"].prototype.setMap.call(this,t);if(t){t.render()}};kt.prototype.initSlider_=function(){var t=this.element;var e={width:t.offsetWidth,height:t.offsetHeight};var n=t.firstElementChild;var i=getComputedStyle(n);var r=n.offsetWidth+parseFloat(i["marginRight"])+parseFloat(i["marginLeft"]);var a=n.offsetHeight+parseFloat(i["marginTop"])+parseFloat(i["marginBottom"]);this.thumbSize_=[r,a];if(e.width>e.height){this.direction_=jt.HORIZONTAL;this.widthLimit_=e.width-r}else{this.direction_=jt.VERTICAL;this.heightLimit_=e.height-a}this.sliderInitialized_=true};function Ft(t){if(!t.frameState){return}if(!this.sliderInitialized_){this.initSlider_()}var e=t.frameState.viewState.resolution;if(e!==this.currentResolution_){this.currentResolution_=e;this.setThumbPosition_(e)}}kt.prototype.handleContainerClick_=function(t){var e=this.getMap().getView();var n=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2);var i=this.getResolutionForPosition_(n);e.animate({resolution:e.constrainResolution(i),duration:this.duration_,easing:ft["b"]})};kt.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.originalEvent.target===this.element.firstElementChild){this.getMap().getView().setHint(X["a"].INTERACTING,1);this.previousX_=t.clientX;this.previousY_=t.clientY;this.dragging_=true}};kt.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=this.element.firstElementChild;var n=t.clientX-this.previousX_+parseInt(e.style.left,10);var i=t.clientY-this.previousY_+parseInt(e.style.top,10);var r=this.getRelativePosition_(n,i);this.currentResolution_=this.getResolutionForPosition_(r);this.getMap().getView().setResolution(this.currentResolution_);this.setThumbPosition_(this.currentResolution_);this.previousX_=t.clientX;this.previousY_=t.clientY}};kt.prototype.handleDraggerEnd_=function(t){if(this.dragging_){var e=this.getMap().getView();e.setHint(X["a"].INTERACTING,-1);e.animate({resolution:e.constrainResolution(this.currentResolution_),duration:this.duration_,easing:ft["b"]});this.dragging_=false;this.previousX_=undefined;this.previousY_=undefined}};kt.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t);var n=this.element.firstElementChild;if(this.direction_==jt.HORIZONTAL){n.style.left=this.widthLimit_*e+"px"}else{n.style.top=this.heightLimit_*e+"px"}};kt.prototype.getRelativePosition_=function(t,e){var n=void 0;if(this.direction_===jt.HORIZONTAL){n=t/this.widthLimit_}else{n=e/this.heightLimit_}return Object(Dt["a"])(n,0,1)};kt.prototype.getResolutionForPosition_=function(t){var e=this.getMap().getView().getResolutionForValueFunction();return e(1-t)};kt.prototype.getPositionForResolution_=function(t){var e=this.getMap().getView().getValueForResolutionFunction();return 1-e(t)};var $t=kt;var Gt=function t(e){var n=e?e:{};this.extent=n.extent?n.extent:null;var i=n.className!==undefined?n.className:"ol-zoom-extent";var r=n.label!==undefined?n.label:"E";var a=n.tipLabel!==undefined?n.tipLabel:"Fit to extent";var o=document.createElement("button");o.setAttribute("type","button");o.title=a;o.appendChild(typeof r==="string"?document.createTextNode(r):r);Object(c["a"])(o,G["a"].CLICK,this.handleClick_,this);var s=i+" "+ot["e"]+" "+ot["b"];var l=document.createElement("div");l.className=s;l.appendChild(o);at["a"].call(this,{element:l,target:n.target})};Object(i["d"])(Gt,at["a"]);Gt.prototype.handleClick_=function(t){t.preventDefault();this.handleZoomToExtent()};Gt.prototype.handleZoomToExtent=function(){var t=this.getMap();var e=t.getView();var n=!this.extent?e.getProjection().getExtent():this.extent;e.fit(n)};var Ut=Gt;function Yt(t){var e=t?t:{};var n=new r["b"];var i=e.zoom!==undefined?e.zoom:true;if(i){n.push(new gt(e.zoomOptions))}var a=e.rotate!==undefined?e.rotate:true;if(a){n.push(new pt(e.rotateOptions))}var o=e.attribution!==undefined?e.attribution:true;if(o){n.push(new ct(e.attributionOptions))}return n}var Vt=function t(e,n,i){this.decay_=e;this.minVelocity_=n;this.delay_=i;this.points_=[];this.angle_=0;this.initialVelocity_=0};Vt.prototype.begin=function(){this.points_.length=0;this.angle_=0;this.initialVelocity_=0};Vt.prototype.update=function(t,e){this.points_.push(t,e,Date.now())};Vt.prototype.end=function(){if(this.points_.length<6){return false}var t=Date.now()-this.delay_;var e=this.points_.length-3;if(this.points_[e+2]<t){return false}var n=e-3;while(n>0&&this.points_[n+2]>t){n-=3}var i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60){return false}var r=this.points_[e]-this.points_[n];var a=this.points_[e+1]-this.points_[n+1];this.angle_=Math.atan2(a,r);this.initialVelocity_=Math.sqrt(r*r+a*a)/i;return this.initialVelocity_>this.minVelocity_};Vt.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_};Vt.prototype.getAngle=function(){return this.angle_};var Ht=Vt;var zt=n(34);var Bt=function t(e){var n=e?e:{};this.delta_=n.delta?n.delta:1;zt["a"].call(this,{handleEvent:Wt});this.duration_=n.duration!==undefined?n.duration:250};Object(i["d"])(Bt,zt["a"]);function Wt(t){var e=false;var n=t.originalEvent;if(t.type==l["a"].DBLCLICK){var i=t.map;var r=t.coordinate;var a=n.shiftKey?-this.delta_:this.delta_;var o=i.getView();Object(zt["f"])(o,a,r,this.duration_);t.preventDefault();e=true}return!e}var qt=Bt;var Xt=n(50);var Kt=n(28);var Zt=function t(e){Kt["b"].call(this,{handleDownEvent:te,handleDragEvent:Qt,handleUpEvent:Jt});var n=e?e:{};this.kinetic_=n.kinetic;this.lastCentroid=null;this.lastPointersCount_;this.condition_=n.condition?n.condition:Xt["g"];this.noKinetic_=false};Object(i["d"])(Zt,Kt["b"]);function Qt(t){var e=this.targetPointers;var n=Object(Kt["a"])(e);if(e.length==this.lastPointersCount_){if(this.kinetic_){this.kinetic_.update(n[0],n[1])}if(this.lastCentroid){var i=this.lastCentroid[0]-n[0];var r=n[1]-this.lastCentroid[1];var a=t.map;var o=a.getView();var s=[i,r];Object(Mt["g"])(s,o.getResolution());Object(Mt["f"])(s,o.getRotation());Object(Mt["a"])(s,o.getCenter());s=o.constrainCenter(s);o.setCenter(s)}}else if(this.kinetic_){this.kinetic_.begin()}this.lastCentroid=n;this.lastPointersCount_=e.length}function Jt(t){var e=t.map;var n=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance();var r=this.kinetic_.getAngle();var a=n.getCenter();var o=e.getPixelFromCoordinate(a);var s=e.getCoordinateFromPixel([o[0]-i*Math.cos(r),o[1]-i*Math.sin(r)]);n.animate({center:n.constrainCenter(s),duration:500,easing:ft["b"]})}n.setHint(X["a"].INTERACTING,-1);return false}else{if(this.kinetic_){this.kinetic_.begin()}this.lastCentroid=null;return true}}function te(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map;var n=e.getView();this.lastCentroid=null;if(!this.handlingDownUpSequence){n.setHint(X["a"].INTERACTING,1)}if(n.getAnimating()){n.setCenter(t.frameState.viewState.center)}if(this.kinetic_){this.kinetic_.begin()}this.noKinetic_=this.targetPointers.length>1;return true}else{return false}}Zt.prototype.shouldStopEvent=Q["a"];var ee=Zt;var ne=n(172);var ie=function t(e){var n=e?e:{};Kt["b"].call(this,{handleDownEvent:oe,handleDragEvent:re,handleUpEvent:ae});this.condition_=n.condition?n.condition:Xt["b"];this.lastAngle_=undefined;this.duration_=n.duration!==undefined?n.duration:250};Object(i["d"])(ie,Kt["b"]);function re(t){if(!Object(Xt["e"])(t)){return}var e=t.map;var n=e.getView();if(n.getConstraints().rotation===ne["c"]){return}var i=e.getSize();var r=t.pixel;var a=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(this.lastAngle_!==undefined){var o=a-this.lastAngle_;var s=n.getRotation();Object(zt["d"])(n,s-o)}this.lastAngle_=a}function ae(t){if(!Object(Xt["e"])(t)){return true}var e=t.map;var n=e.getView();n.setHint(X["a"].INTERACTING,-1);var i=n.getRotation();Object(zt["c"])(n,i,undefined,this.duration_);return false}function oe(t){if(!Object(Xt["e"])(t)){return false}if(Object(Xt["d"])(t)&&this.condition_(t)){var e=t.map;e.getView().setHint(X["a"].INTERACTING,1);this.lastAngle_=undefined;return true}else{return false}}ie.prototype.shouldStopEvent=Q["a"];var se=ie;var le=n(237);var ue=function t(e){var n=e?e:{};var i=n.condition?n.condition:Xt["k"];this.duration_=n.duration!==undefined?n.duration:200;this.out_=n.out!==undefined?n.out:false;le["a"].call(this,{condition:i,className:n.className||"ol-dragzoom"})};Object(i["d"])(ue,le["a"]);ue.prototype.onBoxEnd=function(){var t=this.getMap();var e=t.getView();var n=t.getSize();var i=this.getGeometry().getExtent();if(this.out_){var r=e.calculateExtent(n);var a=Object(Z["n"])([t.getPixelFromCoordinate(Object(Z["v"])(i)),t.getPixelFromCoordinate(Object(Z["D"])(i))]);var o=e.getResolutionForExtent(a,n);Object(Z["J"])(r,1/o);i=r}var s=e.constrainResolution(e.getResolutionForExtent(i,n));var l=Object(Z["x"])(i);l=e.constrainCenter(l);e.animate({resolution:s,center:l,duration:this.duration_,easing:ft["b"]})};var ce=ue;var fe={LEFT:37,UP:38,RIGHT:39,DOWN:40};var he=function t(e){zt["a"].call(this,{handleEvent:de});var n=e||{};this.defaultCondition_=function(t){return Object(Xt["g"])(t)&&Object(Xt["m"])(t)};this.condition_=n.condition!==undefined?n.condition:this.defaultCondition_;this.duration_=n.duration!==undefined?n.duration:100;this.pixelDelta_=n.pixelDelta!==undefined?n.pixelDelta:128};Object(i["d"])(he,zt["a"]);function de(t){var e=false;if(t.type==G["a"].KEYDOWN){var n=t.originalEvent;var i=n.keyCode;if(this.condition_(t)&&(i==fe.DOWN||i==fe.LEFT||i==fe.RIGHT||i==fe.UP)){var r=t.map;var a=r.getView();var o=a.getResolution()*this.pixelDelta_;var s=0,l=0;if(i==fe.DOWN){l=-o}else if(i==fe.LEFT){s=-o}else if(i==fe.RIGHT){s=o}else{l=o}var u=[s,l];Object(Mt["f"])(u,a.getRotation());Object(zt["b"])(a,u,this.duration_);t.preventDefault();e=true}}return!e}var pe=he;var ve=function t(e){zt["a"].call(this,{handleEvent:ge});var n=e?e:{};this.condition_=n.condition?n.condition:Xt["m"];this.delta_=n.delta?n.delta:1;this.duration_=n.duration!==undefined?n.duration:100};Object(i["d"])(ve,zt["a"]);function ge(t){var e=false;if(t.type==G["a"].KEYDOWN||t.type==G["a"].KEYPRESS){var n=t.originalEvent;var i=n.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var r=t.map;var a=i=="+".charCodeAt(0)?this.delta_:-this.delta_;var o=r.getView();Object(zt["f"])(o,a,undefined,this.duration_);t.preventDefault();e=true}}return!e}var me=ve;var _e=1;var ye={TRACKPAD:"trackpad",WHEEL:"wheel"};var be=function t(e){zt["a"].call(this,{handleEvent:we});var n=e||{};this.delta_=0;this.duration_=n.duration!==undefined?n.duration:250;this.timeout_=n.timeout!==undefined?n.timeout:80;this.useAnchor_=n.useAnchor!==undefined?n.useAnchor:true;this.constrainResolution_=n.constrainResolution||false;this.condition_=n.condition?n.condition:Xt["c"];this.lastAnchor_=null;this.startTime_=undefined;this.timeoutId_=undefined;this.mode_=undefined;this.trackpadEventGap_=400;this.trackpadTimeoutId_=undefined;this.trackpadDeltaPerZoom_=300;this.trackpadZoomBuffer_=1.5};Object(i["d"])(be,zt["a"]);function we(t){if(!this.condition_(t)){return true}var e=t.type;if(e!==G["a"].WHEEL&&e!==G["a"].MOUSEWHEEL){return true}t.preventDefault();var n=t.map;var i=t.originalEvent;if(this.useAnchor_){this.lastAnchor_=t.coordinate}var r=void 0;if(t.type==G["a"].WHEEL){r=i.deltaY;if(s["c"]&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL){r/=s["b"]}if(i.deltaMode===WheelEvent.DOM_DELTA_LINE){r*=40}}else if(t.type==G["a"].MOUSEWHEEL){r=-i.wheelDeltaY;if(s["g"]){r/=3}}if(r===0){return false}var a=Date.now();if(this.startTime_===undefined){this.startTime_=a}if(!this.mode_||a-this.startTime_>this.trackpadEventGap_){this.mode_=Math.abs(r)<4?ye.TRACKPAD:ye.WHEEL}if(this.mode_===ye.TRACKPAD){var o=n.getView();if(this.trackpadTimeoutId_){clearTimeout(this.trackpadTimeoutId_)}else{o.setHint(X["a"].INTERACTING,1)}this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var l=o.getResolution()*Math.pow(2,r/this.trackpadDeltaPerZoom_);var u=o.getMinResolution();var c=o.getMaxResolution();var f=0;if(l<u){l=Math.max(l,u/this.trackpadZoomBuffer_);f=1}else if(l>c){l=Math.min(l,c*this.trackpadZoomBuffer_);f=-1}if(this.lastAnchor_){var h=o.calculateCenterZoom(l,this.lastAnchor_);o.setCenter(o.constrainCenter(h))}o.setResolution(l);if(f===0&&this.constrainResolution_){o.animate({resolution:o.constrainResolution(l,r>0?-1:1),easing:ft["b"],anchor:this.lastAnchor_,duration:this.duration_})}if(f>0){o.animate({resolution:u,easing:ft["b"],anchor:this.lastAnchor_,duration:500})}else if(f<0){o.animate({resolution:c,easing:ft["b"],anchor:this.lastAnchor_,duration:500})}this.startTime_=a;return false}this.delta_+=r;var d=Math.max(this.timeout_-(a-this.startTime_),0);clearTimeout(this.timeoutId_);this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),d);return false}be.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=undefined;var t=this.getMap().getView();t.setHint(X["a"].INTERACTING,-1)};be.prototype.handleWheelZoom_=function(t){var e=t.getView();if(e.getAnimating()){e.cancelAnimations()}var n=_e;var i=Object(Dt["a"])(this.delta_,-n,n);Object(zt["f"])(e,-i,this.lastAnchor_,this.duration_);this.mode_=undefined;this.delta_=0;this.lastAnchor_=null;this.startTime_=undefined;this.timeoutId_=undefined};be.prototype.setMouseAnchor=function(t){this.useAnchor_=t;if(!t){this.lastAnchor_=null}};var xe=be;var Se=function t(e){Kt["b"].call(this,{handleDownEvent:Oe,handleDragEvent:Ce,handleUpEvent:Ee});var n=e||{};this.anchor_=null;this.lastAngle_=undefined;this.rotating_=false;this.rotationDelta_=0;this.threshold_=n.threshold!==undefined?n.threshold:.3;this.duration_=n.duration!==undefined?n.duration:250};Object(i["d"])(Se,Kt["b"]);function Ce(t){var e=0;var n=this.targetPointers[0];var i=this.targetPointers[1];var r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(this.lastAngle_!==undefined){var a=r-this.lastAngle_;this.rotationDelta_+=a;if(!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_){this.rotating_=true}e=a}this.lastAngle_=r;var o=t.map;var s=o.getView();if(s.getConstraints().rotation===ne["c"]){return}var l=o.getViewport().getBoundingClientRect();var u=Object(Kt["a"])(this.targetPointers);u[0]-=l.left;u[1]-=l.top;this.anchor_=o.getCoordinateFromPixel(u);if(this.rotating_){var c=s.getRotation();o.render();Object(zt["d"])(s,c+e,this.anchor_)}}function Ee(t){if(this.targetPointers.length<2){var e=t.map;var n=e.getView();n.setHint(X["a"].INTERACTING,-1);if(this.rotating_){var i=n.getRotation();Object(zt["c"])(n,i,this.anchor_,this.duration_)}return false}else{return true}}function Oe(t){if(this.targetPointers.length>=2){var e=t.map;this.anchor_=null;this.lastAngle_=undefined;this.rotating_=false;this.rotationDelta_=0;if(!this.handlingDownUpSequence){e.getView().setHint(X["a"].INTERACTING,1)}return true}else{return false}}Se.prototype.shouldStopEvent=Q["a"];var Te=Se;var Me=function t(e){Kt["b"].call(this,{handleDownEvent:Ne,handleDragEvent:Ie,handleUpEvent:Re});var n=e?e:{};this.constrainResolution_=n.constrainResolution||false;this.anchor_=null;this.duration_=n.duration!==undefined?n.duration:400;this.lastDistance_=undefined;this.lastScaleDelta_=1};Object(i["d"])(Me,Kt["b"]);function Ie(t){var e=1;var n=this.targetPointers[0];var i=this.targetPointers[1];var r=n.clientX-i.clientX;var a=n.clientY-i.clientY;var o=Math.sqrt(r*r+a*a);if(this.lastDistance_!==undefined){e=this.lastDistance_/o}this.lastDistance_=o;var s=t.map;var l=s.getView();var u=l.getResolution();var c=l.getMaxResolution();var f=l.getMinResolution();var h=u*e;if(h>c){e=c/u;h=c}else if(h<f){e=f/u;h=f}if(e!=1){this.lastScaleDelta_=e}var d=s.getViewport().getBoundingClientRect();var p=Object(Kt["a"])(this.targetPointers);p[0]-=d.left;p[1]-=d.top;this.anchor_=s.getCoordinateFromPixel(p);s.render();Object(zt["g"])(l,h,this.anchor_)}function Re(t){if(this.targetPointers.length<2){var e=t.map;var n=e.getView();n.setHint(X["a"].INTERACTING,-1);var i=n.getResolution();if(this.constrainResolution_||i<n.getMinResolution()||i>n.getMaxResolution()){var r=this.lastScaleDelta_-1;Object(zt["e"])(n,i,this.anchor_,this.duration_,r)}return false}else{return true}}function Ne(t){if(this.targetPointers.length>=2){var e=t.map;this.anchor_=null;this.lastDistance_=undefined;this.lastScaleDelta_=1;if(!this.handlingDownUpSequence){e.getView().setHint(X["a"].INTERACTING,1)}return true}else{return false}}Me.prototype.shouldStopEvent=Q["a"];var Ae=Me;var Le=n(10);var Pe={ADD_FEATURES:"addfeatures"};var De=function t(e,n,i,r){b["a"].call(this,e);this.features=i;this.file=n;this.projection=r};Object(i["d"])(De,b["a"]);var je=function t(e){var n=e?e:{};zt["a"].call(this,{handleEvent:Q["b"]});this.formatConstructors_=n.formatConstructors?n.formatConstructors:[];this.projection_=n.projection?Object(Le["h"])(n.projection):null;this.dropListenKeys_=null;this.source_=n.source||null;this.target=n.target?n.target:null};Object(i["d"])(je,zt["a"]);function ke(t){var e=t.dataTransfer.files;for(var n=0,i=e.length;n<i;++n){var r=e.item(n);var a=new FileReader;a.addEventListener(G["a"].LOAD,this.handleResult_.bind(this,r));a.readAsText(r)}}function Fe(t){t.stopPropagation();t.preventDefault();t.dataTransfer.dropEffect="copy"}je.prototype.handleResult_=function(t,e){var n=e.target.result;var i=this.getMap();var r=this.projection_;if(!r){var a=i.getView();r=a.getProjection()}var o=this.formatConstructors_;var s=[];for(var l=0,u=o.length;l<u;++l){var c=o[l];var f=new c;s=this.tryReadFeatures_(f,n,{featureProjection:r});if(s&&s.length>0){break}}if(this.source_){this.source_.clear();this.source_.addFeatures(s)}this.dispatchEvent(new De(Pe.ADD_FEATURES,t,s,r))};je.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[Object(c["a"])(e,G["a"].DROP,ke,this),Object(c["a"])(e,G["a"].DRAGENTER,Fe,this),Object(c["a"])(e,G["a"].DRAGOVER,Fe,this),Object(c["a"])(e,G["a"].DROP,Fe,this)]}};je.prototype.setActive=function(t){zt["a"].prototype.setActive.call(this,t);if(t){this.registerListeners_()}else{this.unregisterListeners_()}};je.prototype.setMap=function(t){this.unregisterListeners_();zt["a"].prototype.setMap.call(this,t);if(this.getActive()){this.registerListeners_()}};je.prototype.tryReadFeatures_=function(t,e,n){try{return t.readFeatures(e,n)}catch(t){return null}};je.prototype.unregisterListeners_=function(){if(this.dropListenKeys_){this.dropListenKeys_.forEach(c["e"]);this.dropListenKeys_=null}};var $e=je;var Ge=function t(e){var n=e?e:{};Kt["b"].call(this,{handleDownEvent:Ve,handleDragEvent:Ue,handleUpEvent:Ye});this.condition_=n.condition?n.condition:Xt["k"];this.lastAngle_=undefined;this.lastMagnitude_=undefined;this.lastScaleDelta_=0;this.duration_=n.duration!==undefined?n.duration:400};Object(i["d"])(Ge,Kt["b"]);function Ue(t){if(!Object(Xt["e"])(t)){return}var e=t.map;var n=e.getSize();var i=t.pixel;var r=i[0]-n[0]/2;var a=n[1]/2-i[1];var o=Math.atan2(a,r);var s=Math.sqrt(r*r+a*a);var l=e.getView();if(l.getConstraints().rotation!==ne["c"]&&this.lastAngle_!==undefined){var u=o-this.lastAngle_;Object(zt["d"])(l,l.getRotation()-u)}this.lastAngle_=o;if(this.lastMagnitude_!==undefined){var c=this.lastMagnitude_*(l.getResolution()/s);Object(zt["g"])(l,c)}if(this.lastMagnitude_!==undefined){this.lastScaleDelta_=this.lastMagnitude_/s}this.lastMagnitude_=s}function Ye(t){if(!Object(Xt["e"])(t)){return true}var e=t.map;var n=e.getView();n.setHint(X["a"].INTERACTING,-1);var i=this.lastScaleDelta_-1;Object(zt["c"])(n,n.getRotation());Object(zt["e"])(n,n.getResolution(),undefined,this.duration_,i);this.lastScaleDelta_=0;return false}function Ve(t){if(!Object(Xt["e"])(t)){return false}if(this.condition_(t)){t.map.getView().setHint(X["a"].INTERACTING,1);this.lastAngle_=undefined;this.lastMagnitude_=undefined;return true}else{return false}}var He=Ge;var ze=n(113);var Be=n(14);var We=n(8);var qe=n(21);var Xe=n(32);var Ke=n(61);var Ze=n(57);var Qe=n(12);var Je={EXTENTCHANGED:"extentchanged"};var tn=function t(e){b["a"].call(this,Je.EXTENTCHANGED);this.extent=e};Object(i["d"])(tn,b["a"]);var en=function t(e){var n=e||{};this.extent_=null;this.pointerHandler_=null;this.pixelTolerance_=n.pixelTolerance!==undefined?n.pixelTolerance:10;this.snappedToVertex_=false;this.extentFeature_=null;this.vertexFeature_=null;if(!e){e={}}Kt["b"].call(this,{handleDownEvent:rn,handleDragEvent:an,handleEvent:nn,handleUpEvent:on});this.extentOverlay_=new Ke["a"]({source:new Ze["b"]({useSpatialIndex:false,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:sn(),updateWhileAnimating:true,updateWhileInteracting:true});this.vertexOverlay_=new Ke["a"]({source:new Ze["b"]({useSpatialIndex:false,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:ln(),updateWhileAnimating:true,updateWhileInteracting:true});if(e.extent){this.setExtent(e.extent)}};Object(i["d"])(en,Kt["b"]);function nn(t){if(!(t instanceof u["a"])){return true}if(t.type==l["a"].POINTERMOVE&&!this.handlingDownUpSequence){this.handlePointerMove_(t)}Kt["c"].call(this,t);return false}function rn(t){var e=t.pixel;var n=t.map;var i=this.getExtent();var r=this.snapToVertex_(e,n);var a=function t(e){var n=null;var r=null;if(e[0]==i[0]){n=i[2]}else if(e[0]==i[2]){n=i[0]}if(e[1]==i[1]){r=i[3]}else if(e[1]==i[3]){r=i[1]}if(n!==null&&r!==null){return[n,r]}return null};if(r&&i){var o=r[0]==i[0]||r[0]==i[2]?r[0]:null;var s=r[1]==i[1]||r[1]==i[3]?r[1]:null;if(o!==null&&s!==null){this.pointerHandler_=un(a(r))}else if(o!==null){this.pointerHandler_=cn(a([o,i[1]]),a([o,i[3]]))}else if(s!==null){this.pointerHandler_=cn(a([i[0],s]),a([i[2],s]))}}else{r=n.getCoordinateFromPixel(e);this.setExtent([r[0],r[1],r[0],r[1]]);this.pointerHandler_=un(r)}return true}function an(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e));this.createOrUpdatePointerFeature_(e)}return true}function on(t){this.pointerHandler_=null;var e=this.getExtent();if(!e||Object(Z["u"])(e)===0){this.setExtent(null)}return false}function sn(){var t=Object(Qe["b"])();return function(e,n){return t[We["a"].POLYGON]}}function ln(){var t=Object(Qe["b"])();return function(e,n){return t[We["a"].POINT]}}function un(t){return function(e){return Object(Z["b"])([t,e])}}function cn(t,e){if(t[0]==e[0]){return function(n){return Object(Z["b"])([t,[n[0],e[1]]])}}else if(t[1]==e[1]){return function(n){return Object(Z["b"])([t,[e[0],n[1]]])}}else{return null}}function fn(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}en.prototype.snapToVertex_=function(t,e){var n=e.getCoordinateFromPixel(t);var i=function t(e,i){return Object(Mt["i"])(n,e)-Object(Mt["i"])(n,i)};var r=this.getExtent();if(r){var a=fn(r);a.sort(i);var o=a[0];var s=Object(Mt["c"])(n,o);var l=e.getPixelFromCoordinate(s);if(Object(Mt["d"])(t,l)<=this.pixelTolerance_){var u=e.getPixelFromCoordinate(o[0]);var c=e.getPixelFromCoordinate(o[1]);var f=Object(Mt["h"])(l,u);var h=Object(Mt["h"])(l,c);var d=Math.sqrt(Math.min(f,h));this.snappedToVertex_=d<=this.pixelTolerance_;if(this.snappedToVertex_){s=f>h?o[1]:o[0]}return s}}return null};en.prototype.handlePointerMove_=function(t){var e=t.pixel;var n=t.map;var i=this.snapToVertex_(e,n);if(!i){i=n.getCoordinateFromPixel(e)}this.createOrUpdatePointerFeature_(i)};en.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;if(!e){if(!t){e=new Be["a"]({})}else{e=new Be["a"](Object(Xe["c"])(t))}this.extentFeature_=e;this.extentOverlay_.getSource().addFeature(e)}else{if(!t){e.setGeometry(undefined)}else{e.setGeometry(Object(Xe["c"])(t))}}return e};en.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;if(!e){e=new Be["a"](new qe["a"](t));this.vertexFeature_=e;this.vertexOverlay_.getSource().addFeature(e)}else{var n=e.getGeometry();n.setCoordinates(t)}return e};en.prototype.setMap=function(t){this.extentOverlay_.setMap(t);this.vertexOverlay_.setMap(t);Kt["b"].prototype.setMap.call(this,t)};en.prototype.getExtent=function(){return this.extent_};en.prototype.setExtent=function(t){this.extent_=t?t:null;this.createOrUpdateExtentFeature_(t);this.dispatchEvent(new tn(this.extent_))};var hn=en;var dn=n(209);var pn={SELECT:"select"};var vn=function t(e,n,i,r){b["a"].call(this,e);this.selected=n;this.deselected=i;this.mapBrowserEvent=r};Object(i["d"])(vn,b["a"]);var gn=function t(e){zt["a"].call(this,{handleEvent:mn});var n=e?e:{};this.condition_=n.condition?n.condition:Xt["l"];this.addCondition_=n.addCondition?n.addCondition:Xt["f"];this.removeCondition_=n.removeCondition?n.removeCondition:Xt["f"];this.toggleCondition_=n.toggleCondition?n.toggleCondition:Xt["k"];this.multi_=n.multi?n.multi:false;this.filter_=n.filter?n.filter:Q["b"];this.hitTolerance_=n.hitTolerance?n.hitTolerance:0;var i=new Ke["a"]({source:new Ze["b"]({useSpatialIndex:false,features:n.features,wrapX:n.wrapX}),style:n.style?n.style:_n(),updateWhileAnimating:true,updateWhileInteracting:true});this.featureOverlay_=i;var r=void 0;if(n.layers){if(typeof n.layers==="function"){r=n.layers}else{var o=n.layers;r=function t(e){return Object(C["f"])(o,e)}}}else{r=Q["b"]}this.layerFilter_=r;this.featureLayerAssociation_={};var s=this.featureOverlay_.getSource().getFeaturesCollection();Object(c["a"])(s,a["a"].ADD,this.addFeature_,this);Object(c["a"])(s,a["a"].REMOVE,this.removeFeature_,this)};Object(i["d"])(gn,zt["a"]);gn.prototype.addFeatureLayerAssociation_=function(t,e){var n=Object(i["c"])(t);this.featureLayerAssociation_[n]=e};gn.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()};gn.prototype.getHitTolerance=function(){return this.hitTolerance_};gn.prototype.getLayer=function(t){var e=Object(i["c"])(t);return this.featureLayerAssociation_[e]};function mn(t){if(!this.condition_(t)){return true}var e=this.addCondition_(t);var n=this.removeCondition_(t);var i=this.toggleCondition_(t);var r=!e&&!n&&!i;var a=t.map;var o=this.featureOverlay_.getSource().getFeaturesCollection();var s=[];var l=[];if(r){Object(Y["b"])(this.featureLayerAssociation_);a.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e)){l.push(t);this.addFeatureLayerAssociation_(t,e);return!this.multi_}}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var u=o.getLength()-1;u>=0;--u){var c=o.item(u);var f=l.indexOf(c);if(f>-1){l.splice(f,1)}else{o.remove(c);s.push(c)}}if(l.length!==0){o.extend(l)}}else{a.forEachFeatureAtPixel(t.pixel,function(t,r){if(this.filter_(t,r)){if((e||i)&&!Object(C["f"])(o.getArray(),t)){l.push(t);this.addFeatureLayerAssociation_(t,r)}else if((n||i)&&Object(C["f"])(o.getArray(),t)){s.push(t);this.removeFeatureLayerAssociation_(t)}return!this.multi_}}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var h=s.length-1;h>=0;--h){o.remove(s[h])}o.extend(l)}if(l.length>0||s.length>0){this.dispatchEvent(new vn(pn.SELECT,l,s,t))}return Object(Xt["i"])(t)}gn.prototype.setHitTolerance=function(t){this.hitTolerance_=t};gn.prototype.setMap=function(t){var e=this.getMap();var n=this.featureOverlay_.getSource().getFeaturesCollection();if(e){n.forEach(e.unskipFeature.bind(e))}zt["a"].prototype.setMap.call(this,t);this.featureOverlay_.setMap(t);if(t){n.forEach(t.skipFeature.bind(t))}};function _n(){var t=Object(Qe["b"])();Object(C["c"])(t[We["a"].POLYGON],t[We["a"].LINE_STRING]);Object(C["c"])(t[We["a"].GEOMETRY_COLLECTION],t[We["a"].LINE_STRING]);return function(e,n){if(!e.getGeometry()){return null}return t[e.getGeometry().getType()]}}gn.prototype.addFeature_=function(t){var e=this.getMap();if(e){e.skipFeature(t.element)}};gn.prototype.removeFeature_=function(t){var e=this.getMap();if(e){e.unskipFeature(t.element)}};gn.prototype.removeFeatureLayerAssociation_=function(t){var e=Object(i["c"])(t);delete this.featureLayerAssociation_[e]};var yn=gn;var bn=n(296);var wn=n(241);function xn(t){var e=t?t:{};var n=new r["b"];var i=new Ht(-.005,.05,100);var a=e.altShiftDragRotate!==undefined?e.altShiftDragRotate:true;if(a){n.push(new se)}var o=e.doubleClickZoom!==undefined?e.doubleClickZoom:true;if(o){n.push(new qt({delta:e.zoomDelta,duration:e.zoomDuration}))}var s=e.dragPan!==undefined?e.dragPan:true;if(s){n.push(new ee({kinetic:i}))}var l=e.pinchRotate!==undefined?e.pinchRotate:true;if(l){n.push(new Te)}var u=e.pinchZoom!==undefined?e.pinchZoom:true;if(u){n.push(new Ae({constrainResolution:e.constrainResolution,duration:e.zoomDuration}))}var c=e.keyboard!==undefined?e.keyboard:true;if(c){n.push(new pe);n.push(new me({delta:e.zoomDelta,duration:e.zoomDuration}))}var f=e.mouseWheelZoom!==undefined?e.mouseWheelZoom:true;if(f){n.push(new xe({constrainResolution:e.constrainResolution,duration:e.zoomDuration}))}var h=e.shiftDragZoom!==undefined?e.shiftDragZoom:true;if(h){n.push(new ce({duration:e.zoomDuration}))}return n}var Sn=n(128);var Cn=n(195);var En=n(43);var On=function t(e,n,i,r,a){this.loader_=a!==undefined?a:null;var o=a!==undefined?En["a"].IDLE:En["a"].LOADED;Cn["a"].call(this,e,n,i,o);this.canvas_=r;this.error_=null};Object(i["d"])(On,Cn["a"]);On.prototype.getError=function(){return this.error_};On.prototype.handleLoad_=function(t){if(t){this.error_=t;this.state=En["a"].ERROR}else{this.state=En["a"].LOADED}this.changed()};On.prototype.load=function(){if(this.state==En["a"].IDLE){this.state=En["a"].LOADING;this.changed();this.loader_(this.handleLoad_.bind(this))}};On.prototype.getImage=function(){return this.canvas_};var Tn=On;var Mn=n(139);var In=n(363);var Rn=function t(e,n,i,r,a){b["a"].call(this,e);this.vectorContext=n;this.frameState=i;this.context=r;this.glContext=a};Object(i["d"])(Rn,b["a"]);var Nn=Rn;var An=n(177);var Ln=n(16);var Pn=n(149);var Dn=n(69);var jn=n(146);var kn=function t(){};kn.prototype.drawCustom=function(t,e,n){};kn.prototype.drawGeometry=function(t){};kn.prototype.setStyle=function(t){};kn.prototype.drawCircle=function(t,e){};kn.prototype.drawFeature=function(t,e){};kn.prototype.drawGeometryCollection=function(t,e){};kn.prototype.drawLineString=function(t,e){};kn.prototype.drawMultiLineString=function(t,e){};kn.prototype.drawMultiPoint=function(t,e){};kn.prototype.drawMultiPolygon=function(t,e){};kn.prototype.drawPoint=function(t,e){};kn.prototype.drawPolygon=function(t,e){};kn.prototype.drawText=function(t,e){};kn.prototype.setFillStrokeStyle=function(t,e){};kn.prototype.setImageStyle=function(t,e){};kn.prototype.setTextStyle=function(t,e){};var Fn=kn;var $n=function t(e,n,i,r,a){Fn.call(this);this.context_=e;this.pixelRatio_=n;this.extent_=i;this.transform_=r;this.viewRotation_=a;this.contextFillState_=null;this.contextStrokeState_=null;this.contextTextState_=null;this.fillState_=null;this.strokeState_=null;this.image_=null;this.imageAnchorX_=0;this.imageAnchorY_=0;this.imageHeight_=0;this.imageOpacity_=0;this.imageOriginX_=0;this.imageOriginY_=0;this.imageRotateWithView_=false;this.imageRotation_=0;this.imageScale_=0;this.imageSnapToPixel_=false;this.imageWidth_=0;this.text_="";this.textOffsetX_=0;this.textOffsetY_=0;this.textRotateWithView_=false;this.textRotation_=0;this.textScale_=0;this.textFillState_=null;this.textStrokeState_=null;this.textState_=null;this.pixelCoordinates_=[];this.tmpLocalTransform_=Object(et["c"])()};Object(i["d"])($n,Fn);$n.prototype.drawImages_=function(t,e,n,i){if(!this.image_){return}var r=Object(jn["c"])(t,e,n,2,this.transform_,this.pixelCoordinates_);var a=this.context_;var o=this.tmpLocalTransform_;var s=a.globalAlpha;if(this.imageOpacity_!=1){a.globalAlpha=s*this.imageOpacity_}var l=this.imageRotation_;if(this.imageRotateWithView_){l+=this.viewRotation_}for(var u=0,c=r.length;u<c;u+=2){var f=r[u]-this.imageAnchorX_;var h=r[u+1]-this.imageAnchorY_;if(this.imageSnapToPixel_){f=Math.round(f);h=Math.round(h)}if(l!==0||this.imageScale_!=1){var d=f+this.imageAnchorX_;var p=h+this.imageAnchorY_;Object(et["b"])(o,d,p,this.imageScale_,this.imageScale_,l,-d,-p);a.setTransform.apply(a,o)}a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,h,this.imageWidth_,this.imageHeight_)}if(l!==0||this.imageScale_!=1){a.setTransform(1,0,0,1,0,0)}if(this.imageOpacity_!=1){a.globalAlpha=s}};$n.prototype.drawText_=function(t,e,n,i){if(!this.textState_||this.text_===""){return}if(this.textFillState_){this.setContextFillState_(this.textFillState_)}if(this.textStrokeState_){this.setContextStrokeState_(this.textStrokeState_)}this.setContextTextState_(this.textState_);var r=Object(jn["c"])(t,e,n,i,this.transform_,this.pixelCoordinates_);var a=this.context_;var o=this.textRotation_;if(this.textRotateWithView_){o+=this.viewRotation_}for(;e<n;e+=i){var s=r[e]+this.textOffsetX_;var l=r[e+1]+this.textOffsetY_;if(o!==0||this.textScale_!=1){var u=Object(et["b"])(this.tmpLocalTransform_,s,l,this.textScale_,this.textScale_,o,-s,-l);a.setTransform.apply(a,u)}if(this.textStrokeState_){a.strokeText(this.text_,s,l)}if(this.textFillState_){a.fillText(this.text_,s,l)}}if(o!==0||this.textScale_!=1){a.setTransform(1,0,0,1,0,0)}};$n.prototype.moveToLineTo_=function(t,e,n,i,r){var a=this.context_;var o=Object(jn["c"])(t,e,n,i,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);var s=o.length;if(r){s-=2}for(var l=2;l<s;l+=2){a.lineTo(o[l],o[l+1])}if(r){a.closePath()}return n};$n.prototype.drawRings_=function(t,e,n,i){for(var r=0,a=n.length;r<a;++r){e=this.moveToLineTo_(t,e,n[r],i,true)}return e};$n.prototype.drawCircle=function(t){if(!Object(Z["F"])(this.extent_,t.getExtent())){return}if(this.fillState_||this.strokeState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var e=Object(Dn["b"])(t,this.transform_,this.pixelCoordinates_);var n=e[2]-e[0];var i=e[3]-e[1];var r=Math.sqrt(n*n+i*i);var a=this.context_;a.beginPath();a.arc(e[0],e[1],r,0,2*Math.PI);if(this.fillState_){a.fill()}if(this.strokeState_){a.stroke()}}if(this.text_!==""){this.drawText_(t.getCenter(),0,2,2)}};$n.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke());this.setImageStyle(t.getImage());this.setTextStyle(t.getText())};$n.prototype.drawGeometry=function(t){var e=t.getType();switch(e){case We["a"].POINT:this.drawPoint(t);break;case We["a"].LINE_STRING:this.drawLineString(t);break;case We["a"].POLYGON:this.drawPolygon(t);break;case We["a"].MULTI_POINT:this.drawMultiPoint(t);break;case We["a"].MULTI_LINE_STRING:this.drawMultiLineString(t);break;case We["a"].MULTI_POLYGON:this.drawMultiPolygon(t);break;case We["a"].GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case We["a"].CIRCLE:this.drawCircle(t);break;default:}};$n.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);if(!n||!Object(Z["F"])(this.extent_,n.getExtent())){return}this.setStyle(e);this.drawGeometry(n)};$n.prototype.drawGeometryCollection=function(t){var e=t.getGeometriesArray();for(var n=0,i=e.length;n<i;++n){this.drawGeometry(e[n])}};$n.prototype.drawPoint=function(t){var e=t.getFlatCoordinates();var n=t.getStride();if(this.image_){this.drawImages_(e,0,e.length,n)}if(this.text_!==""){this.drawText_(e,0,e.length,n)}};$n.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates();var n=t.getStride();if(this.image_){this.drawImages_(e,0,e.length,n)}if(this.text_!==""){this.drawText_(e,0,e.length,n)}};$n.prototype.drawLineString=function(t){if(!Object(Z["F"])(this.extent_,t.getExtent())){return}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_;var n=t.getFlatCoordinates();e.beginPath();this.moveToLineTo_(n,0,n.length,t.getStride(),false);e.stroke()}if(this.text_!==""){var i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}};$n.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(!Object(Z["F"])(this.extent_,e)){return}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_;var i=t.getFlatCoordinates();var r=0;var a=t.getEnds();var o=t.getStride();n.beginPath();for(var s=0,l=a.length;s<l;++s){r=this.moveToLineTo_(i,r,a[s],o,false)}n.stroke()}if(this.text_!==""){var u=t.getFlatMidpoints();this.drawText_(u,0,u.length,2)}};$n.prototype.drawPolygon=function(t){if(!Object(Z["F"])(this.extent_,t.getExtent())){return}if(this.strokeState_||this.fillState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var e=this.context_;e.beginPath();this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride());if(this.fillState_){e.fill()}if(this.strokeState_){e.stroke()}}if(this.text_!==""){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}};$n.prototype.drawMultiPolygon=function(t){if(!Object(Z["F"])(this.extent_,t.getExtent())){return}if(this.strokeState_||this.fillState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var e=this.context_;var n=t.getOrientedFlatCoordinates();var i=0;var r=t.getEndss();var a=t.getStride();e.beginPath();for(var o=0,s=r.length;o<s;++o){var l=r[o];i=this.drawRings_(n,i,l,a)}if(this.fillState_){e.fill()}if(this.strokeState_){e.stroke()}}if(this.text_!==""){var u=t.getFlatInteriorPoints();this.drawText_(u,0,u.length,2)}};$n.prototype.setContextFillState_=function(t){var e=this.context_;var n=this.contextFillState_;if(!n){e.fillStyle=t.fillStyle;this.contextFillState_={fillStyle:t.fillStyle}}else{if(n.fillStyle!=t.fillStyle){n.fillStyle=e.fillStyle=t.fillStyle}}};$n.prototype.setContextStrokeState_=function(t){var e=this.context_;var n=this.contextStrokeState_;if(!n){e.lineCap=t.lineCap;if(s["a"]){e.setLineDash(t.lineDash);e.lineDashOffset=t.lineDashOffset}e.lineJoin=t.lineJoin;e.lineWidth=t.lineWidth;e.miterLimit=t.miterLimit;e.strokeStyle=t.strokeStyle;this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle}}else{if(n.lineCap!=t.lineCap){n.lineCap=e.lineCap=t.lineCap}if(s["a"]){if(!Object(C["b"])(n.lineDash,t.lineDash)){e.setLineDash(n.lineDash=t.lineDash)}if(n.lineDashOffset!=t.lineDashOffset){n.lineDashOffset=e.lineDashOffset=t.lineDashOffset}}if(n.lineJoin!=t.lineJoin){n.lineJoin=e.lineJoin=t.lineJoin}if(n.lineWidth!=t.lineWidth){n.lineWidth=e.lineWidth=t.lineWidth}if(n.miterLimit!=t.miterLimit){n.miterLimit=e.miterLimit=t.miterLimit}if(n.strokeStyle!=t.strokeStyle){n.strokeStyle=e.strokeStyle=t.strokeStyle}}};$n.prototype.setContextTextState_=function(t){var e=this.context_;var n=this.contextTextState_;var i=t.textAlign?t.textAlign:Ln["l"];if(!n){e.font=t.font;e.textAlign=i;e.textBaseline=t.textBaseline;this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline}}else{if(n.font!=t.font){n.font=e.font=t.font}if(n.textAlign!=i){n.textAlign=i}if(n.textBaseline!=t.textBaseline){n.textBaseline=e.textBaseline=t.textBaseline}}};$n.prototype.setFillStrokeStyle=function(t,e){if(!t){this.fillState_=null}else{var n=t.getColor();this.fillState_={fillStyle:Object(Pn["a"])(n?n:Ln["b"])}}if(!e){this.strokeState_=null}else{var i=e.getColor();var r=e.getLineCap();var a=e.getLineDash();var o=e.getLineDashOffset();var s=e.getLineJoin();var l=e.getWidth();var u=e.getMiterLimit();this.strokeState_={lineCap:r!==undefined?r:Ln["d"],lineDash:a?a:Ln["e"],lineDashOffset:o?o:Ln["f"],lineJoin:s!==undefined?s:Ln["g"],lineWidth:this.pixelRatio_*(l!==undefined?l:Ln["h"]),miterLimit:u!==undefined?u:Ln["i"],strokeStyle:Object(Pn["a"])(i?i:Ln["k"])}}};$n.prototype.setImageStyle=function(t){if(!t){this.image_=null}else{var e=t.getAnchor();var n=t.getImage(1);var i=t.getOrigin();var r=t.getSize();this.imageAnchorX_=e[0];this.imageAnchorY_=e[1];this.imageHeight_=r[1];this.image_=n;this.imageOpacity_=t.getOpacity();this.imageOriginX_=i[0];this.imageOriginY_=i[1];this.imageRotateWithView_=t.getRotateWithView();this.imageRotation_=t.getRotation();this.imageScale_=t.getScale()*this.pixelRatio_;this.imageSnapToPixel_=t.getSnapToPixel();this.imageWidth_=r[0]}};$n.prototype.setTextStyle=function(t){if(!t){this.text_=""}else{var e=t.getFill();if(!e){this.textFillState_=null}else{var n=e.getColor();this.textFillState_={fillStyle:Object(Pn["a"])(n?n:Ln["b"])}}var i=t.getStroke();if(!i){this.textStrokeState_=null}else{var r=i.getColor();var a=i.getLineCap();var o=i.getLineDash();var s=i.getLineDashOffset();var l=i.getLineJoin();var u=i.getWidth();var c=i.getMiterLimit();this.textStrokeState_={lineCap:a!==undefined?a:Ln["d"],lineDash:o?o:Ln["e"],lineDashOffset:s?s:Ln["f"],lineJoin:l!==undefined?l:Ln["g"],lineWidth:u!==undefined?u:Ln["h"],miterLimit:c!==undefined?c:Ln["i"],strokeStyle:Object(Pn["a"])(r?r:Ln["k"])}}var f=t.getFont();var h=t.getOffsetX();var d=t.getOffsetY();var p=t.getRotateWithView();var v=t.getRotation();var g=t.getScale();var m=t.getText();var _=t.getTextAlign();var y=t.getTextBaseline();this.textState_={font:f!==undefined?f:Ln["c"],textAlign:_!==undefined?_:Ln["l"],textBaseline:y!==undefined?y:Ln["m"]};this.text_=m!==undefined?m:"";this.textOffsetX_=h!==undefined?this.pixelRatio_*h:0;this.textOffsetY_=d!==undefined?this.pixelRatio_*d:0;this.textRotateWithView_=p!==undefined?p:false;this.textRotation_=v!==undefined?v:0;this.textScale_=this.pixelRatio_*(g!==undefined?g:1)}};var Gn=$n;var Un=n(204);var Yn=n(163);var Vn=function t(e){Un["a"].call(this);this.layer_=e};Object(i["d"])(Vn,Un["a"]);Vn.prototype.forEachFeatureAtCoordinate=Q["c"];Vn.prototype.hasFeatureAtCoordinate=Q["a"];Vn.prototype.createLoadedTileFinder=function(t,e,n){return function(i,r){function a(t){if(!n[i]){n[i]={}}n[i][t.tileCoord.toString()]=t}return t.forEachLoadedTile(e,i,r,a)}};Vn.prototype.getLayer=function(){return this.layer_};Vn.prototype.handleImageChange_=function(t){var e=t.target;if(e.getState()===En["a"].LOADED){this.renderIfReadyAndVisible()}};Vn.prototype.loadImage=function(t){var e=t.getState();if(e!=En["a"].LOADED&&e!=En["a"].ERROR){Object(c["a"])(t,G["a"].CHANGE,this.handleImageChange_,this)}if(e==En["a"].IDLE){t.load();e=t.getState()}return e==En["a"].LOADED};Vn.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();if(t.getVisible()&&t.getSourceState()==Yn["a"].READY){this.changed()}};Vn.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var r=Object(i["c"])(t).toString();if(r in n.usedTiles){t.expireCache(n.viewState.projection,n.usedTiles[r])}}.bind(null,e);t.postRenderFunctions.push(n)}};Vn.prototype.updateUsedTiles=function(t,e,n,r){var a=Object(i["c"])(e).toString();var o=n.toString();if(a in t){if(o in t[a]){t[a][o].extend(r)}else{t[a][o]=r}}else{t[a]={};t[a][o]=r}};Vn.prototype.manageTilePyramid=function(t,e,n,r,a,o,s,l,u,c){var f=Object(i["c"])(e).toString();if(!(f in t.wantedTiles)){t.wantedTiles[f]={}}var h=t.wantedTiles[f];var d=t.tileQueue;var p=n.getMinZoom();var v=void 0,g=void 0,m=void 0,_=void 0,y=void 0,b=void 0;for(b=p;b<=s;++b){g=n.getTileRangeForExtentAndZ(o,b,g);m=n.getResolution(b);for(_=g.minX;_<=g.maxX;++_){for(y=g.minY;y<=g.maxY;++y){if(s-b<=l){v=e.getTile(b,_,y,r,a);if(v.getState()==$["a"].IDLE){h[v.getKey()]=true;if(!d.isKeyQueued(v.getKey())){d.enqueue([v,f,n.getTileCoordCenter(v.tileCoord),m])}}if(u!==undefined){u.call(c,v)}}else{e.useTile(b,_,y,a)}}}}};var Hn=Vn;var zn=function t(e){Hn.call(this,e);this.renderedResolution;this.transform_=Object(et["c"])()};Object(i["d"])(zn,Hn);zn.prototype.clip=function(t,e,n){var i=e.pixelRatio;var r=e.size[0]*i;var a=e.size[1]*i;var o=e.viewState.rotation;var s=Object(Z["C"])(n);var l=Object(Z["D"])(n);var u=Object(Z["w"])(n);var c=Object(Z["v"])(n);Object(et["a"])(e.coordinateToPixelTransform,s);Object(et["a"])(e.coordinateToPixelTransform,l);Object(et["a"])(e.coordinateToPixelTransform,u);Object(et["a"])(e.coordinateToPixelTransform,c);t.save();Object(Ln["s"])(t,-o,r/2,a/2);t.beginPath();t.moveTo(s[0]*i,s[1]*i);t.lineTo(l[0]*i,l[1]*i);t.lineTo(u[0]*i,u[1]*i);t.lineTo(c[0]*i,c[1]*i);t.clip();Object(Ln["s"])(t,o,r/2,a/2)};zn.prototype.dispatchComposeEvent_=function(t,e,n,i){var r=this.getLayer();if(r.hasListener(t)){var a=n.size[0]*n.pixelRatio;var o=n.size[1]*n.pixelRatio;var s=n.viewState.rotation;Object(Ln["s"])(e,-s,a/2,o/2);var l=i!==undefined?i:this.getTransform(n,0);var u=new Gn(e,n.pixelRatio,n.extent,l,n.viewState.rotation);var c=new Nn(t,u,n,e,null);r.dispatchEvent(c);Object(Ln["s"])(e,s,a/2,o/2)}};zn.prototype.forEachLayerAtCoordinate=function(t,e,n,i){var r=this.forEachFeatureAtCoordinate(t,e,0,Q["b"],this);if(r){return n.call(i,this.getLayer(),null)}else{return undefined}};zn.prototype.postCompose=function(t,e,n,i){this.dispatchComposeEvent_(An["a"].POSTCOMPOSE,t,e,i)};zn.prototype.preCompose=function(t,e,n){this.dispatchComposeEvent_(An["a"].PRECOMPOSE,t,e,n)};zn.prototype.dispatchRenderEvent=function(t,e,n){this.dispatchComposeEvent_(An["a"].RENDER,t,e,n)};zn.prototype.getTransform=function(t,e){var n=t.viewState;var i=t.pixelRatio;var r=i*t.size[0]/2;var a=i*t.size[1]/2;var o=i/n.resolution;var s=-o;var l=-n.rotation;var u=-n.center[0]+e;var c=-n.center[1];return Object(et["b"])(this.transform_,r,a,o,s,l,u,c)};zn.prototype.composeFrame=function(t,e,n){};zn.prototype.prepareFrame=function(t,e){};var Bn=zn;var Wn=function t(e){Bn.call(this,e);this.coordinateToCanvasPixelTransform=Object(et["c"])();this.hitCanvasContext_=null};Object(i["d"])(Wn,Bn);Wn.prototype.composeFrame=function(t,e,n){this.preCompose(n,t);var i=this.getImage();if(i){var r=e.extent;var a=r!==undefined&&!Object(Z["g"])(r,t.extent)&&Object(Z["F"])(r,t.extent);if(a){this.clip(n,t,r)}var o=this.getImageTransform();var s=n.globalAlpha;n.globalAlpha=e.opacity;var l=o[4];var u=o[5];var c=i.width*o[0];var f=i.height*o[3];n.drawImage(i,0,0,+i.width,+i.height,Math.round(l),Math.round(u),Math.round(c),Math.round(f));n.globalAlpha=s;if(a){n.restore()}}this.postCompose(n,t,e)};Wn.prototype.getImage=function(){};Wn.prototype.getImageTransform=function(){};Wn.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){var a=this.getLayer();var o=a.getSource();var s=e.viewState.resolution;var l=e.viewState.rotation;var u=e.skippedFeatureUids;return o.forEachFeatureAtCoordinate(t,s,l,n,u,function(t){return i.call(r,t,a)})};Wn.prototype.forEachLayerAtCoordinate=function(t,e,n,i){if(!this.getImage()){return undefined}if(this.getLayer().getSource().forEachFeatureAtCoordinate!==Q["c"]){return Bn.prototype.forEachLayerAtCoordinate.apply(this,arguments)}else{var r=Object(et["a"])(this.coordinateToCanvasPixelTransform,t.slice());Object(Mt["g"])(r,e.viewState.resolution/this.renderedResolution);if(!this.hitCanvasContext_){this.hitCanvasContext_=Object(K["a"])(1,1)}this.hitCanvasContext_.clearRect(0,0,1,1);this.hitCanvasContext_.drawImage(this.getImage(),r[0],r[1],1,1,0,0,1,1);var a=this.hitCanvasContext_.getImageData(0,0,1,1).data;if(a[3]>0){return n.call(i,this.getLayer(),a)}else{return undefined}}};var qn=Wn;var Xn=function t(e){qn.call(this,e);this.image_=null;this.imageTransform_=Object(et["c"])();this.skippedFeatures_=[];this.vectorRenderer_=null};Object(i["d"])(Xn,qn);Xn["handles"]=function(t){return t.getType()===Mn["a"].IMAGE||t.getType()===Mn["a"].VECTOR&&t.getRenderMode()===In["a"].IMAGE};Xn["create"]=function(t,e){var n=new Xn(e);if(e.getType()===Mn["a"].VECTOR){var i=t.getLayerRendererConstructors();for(var r=0,a=i.length;r<a;++r){var o=i[r];if(o!==Xn&&o["handles"](e)){n.setVectorRenderer(o["create"](t,e));break}}}return n};Xn.prototype.disposeInternal=function(){if(this.vectorRenderer_){this.vectorRenderer_.dispose()}qn.prototype.disposeInternal.call(this)};Xn.prototype.getImage=function(){return!this.image_?null:this.image_.getImage()};Xn.prototype.getImageTransform=function(){return this.imageTransform_};Xn.prototype.prepareFrame=function(t,e){var n=t.pixelRatio;var i=t.size;var r=t.viewState;var a=r.center;var o=r.resolution;var s=void 0;var l=this.getLayer();var u=l.getSource();var c=t.viewHints;var f=t.extent;if(e.extent!==undefined){f=Object(Z["B"])(f,e.extent)}if(!c[X["a"].ANIMATING]&&!c[X["a"].INTERACTING]&&!Object(Z["H"])(f)){var h=r.projection;if(!Sn["a"]){var d=u.getProjection();if(d){h=d}}var p=this.vectorRenderer_;if(p){var v=p.context;var g=Object(Y["a"])({},t,{size:[Object(Z["E"])(f)/o,Object(Z["A"])(f)/o],viewState:Object(Y["a"])({},t.viewState,{rotation:0})});var m=Object.keys(g.skippedFeatureUids).sort();if(p.prepareFrame(g,e)&&(p.replayGroupChanged||!Object(C["b"])(m,this.skippedFeatures_))){v.canvas.width=g.size[0]*n;v.canvas.height=g.size[1]*n;p.composeFrame(g,e,v);this.image_=new Tn(f,o,n,v.canvas);this.skippedFeatures_=m}}else{s=u.getImage(f,o,n,h);if(s){var _=this.loadImage(s);if(_){this.image_=s}}}}if(this.image_){s=this.image_;var y=s.getExtent();var b=s.getResolution();var w=s.getPixelRatio();var x=n*b/(o*w);var S=Object(et["b"])(this.imageTransform_,n*i[0]/2,n*i[1]/2,x,x,0,w*(y[0]-a[0])/b,w*(a[1]-y[3])/b);Object(et["b"])(this.coordinateToCanvasPixelTransform,n*i[0]/2-S[4],n*i[1]/2-S[5],n/o,-n/o,0,-a[0],-a[1]);this.renderedResolution=b*n/w}return!!this.image_};Xn.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){if(this.vectorRenderer_){return this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,n,i,r)}else{return qn.prototype.forEachFeatureAtCoordinate.call(this,t,e,n,i,r)}};Xn.prototype.setVectorRenderer=function(t){if(this.vectorRenderer_){this.vectorRenderer_.dispose()}this.vectorRenderer_=t};var Kn=Xn;var Zn=n(231);var Qn=n(290);var Jn=function t(e){Zn["a"].call(this);this.map_=e;this.layerRenderers_={};this.layerRendererListeners_={};this.layerRendererConstructors_=[]};Object(i["d"])(Jn,Zn["a"]);Jn.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)};Jn.prototype.getLayerRendererConstructors=function(){return this.layerRendererConstructors_};Jn.prototype.calculateMatrices2D=function(t){var e=t.viewState;var n=t.coordinateToPixelTransform;var i=t.pixelToCoordinateTransform;Object(et["b"])(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]);Object(et["d"])(Object(et["g"])(i,n))};Jn.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_){this.removeLayerRendererByKey_(t).dispose()}};function ti(t,e){Qn["a"].expire()}Jn.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,a,o,s){var l=void 0;var u=e.viewState;var c=u.resolution;function f(t,n){var o=Object(i["c"])(t).toString();var s=e.layerStates[Object(i["c"])(n)].managed;if(!(o in e.skippedFeatureUids&&!s)){return r.call(a,t,s?n:null)}}var h=u.projection;var d=t;if(h.canWrapX()){var p=h.getExtent();var v=Object(Z["E"])(p);var g=t[0];if(g<p[0]||g>p[2]){var m=Math.ceil((p[0]-g)/v);d=[g+v*m,t[1]]}}var _=e.layerStatesArray;var y=_.length;var b=void 0;for(b=y-1;b>=0;--b){var w=_[b];var x=w.layer;if(Object(st["b"])(w,c)&&o.call(s,x)){var S=this.getLayerRenderer(x);if(x.getSource()){l=S.forEachFeatureAtCoordinate(x.getSource().getWrapX()?d:t,e,n,f,a)}if(l){return l}}}return undefined};Jn.prototype.forEachLayerAtPixel=function(t,e,n,i,r,a){};Jn.prototype.hasFeatureAtCoordinate=function(t,e,n,i,r){var a=this.forEachFeatureAtCoordinate(t,e,n,Q["b"],this,i,r);return a!==undefined};Jn.prototype.getLayerRenderer=function(t){var e=Object(i["c"])(t).toString();if(e in this.layerRenderers_){return this.layerRenderers_[e]}else{var n=void 0;for(var r=0,a=this.layerRendererConstructors_.length;r<a;++r){var o=this.layerRendererConstructors_[r];if(o["handles"](t)){n=o["create"](this,t);break}}if(n){this.layerRenderers_[e]=n;this.layerRendererListeners_[e]=Object(c["a"])(n,G["a"].CHANGE,this.handleLayerRendererChange_,this)}else{throw new Error("Unable to create renderer for layer: "+t.getType())}return n}};Jn.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]};Jn.prototype.getLayerRenderers=function(){return this.layerRenderers_};Jn.prototype.getMap=function(){return this.map_};Jn.prototype.handleLayerRendererChange_=function(){this.map_.render()};Jn.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];delete this.layerRenderers_[t];Object(c["e"])(this.layerRendererListeners_[t]);delete this.layerRendererListeners_[t];return e};Jn.prototype.renderFrame=Q["c"];Jn.prototype.removeUnusedLayerRenderers_=function(t,e){for(var n in this.layerRenderers_){if(!e||!(n in e.layerStates)){this.removeLayerRendererByKey_(n).dispose()}}};Jn.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(ti)};Jn.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_){if(!(e in t.layerStates)){t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this));return}}};function ei(t,e){return t.zIndex-e.zIndex}var ni=Jn;var ii=function t(e){ni.call(this,e);var n=e.getViewport();this.context_=Object(K["a"])();this.canvas_=this.context_.canvas;this.canvas_.style.width="100%";this.canvas_.style.height="100%";this.canvas_.style.display="block";this.canvas_.className=ot["e"];n.insertBefore(this.canvas_,n.childNodes[0]||null);this.renderedVisible_=true;this.transform_=Object(et["c"])()};Object(i["d"])(ii,ni);ii.prototype.dispatchComposeEvent_=function(t,e){var n=this.getMap();var i=this.context_;if(n.hasListener(t)){var r=e.extent;var a=e.pixelRatio;var o=e.viewState;var s=o.rotation;var l=this.getTransform(e);var u=new Gn(i,a,r,l,s);var c=new Nn(t,u,e,i,null);n.dispatchEvent(c)}};ii.prototype.getTransform=function(t){var e=t.viewState;var n=this.canvas_.width/2;var i=this.canvas_.height/2;var r=t.pixelRatio/e.resolution;var a=-r;var o=-e.rotation;var s=-e.center[0];var l=-e.center[1];return Object(et["b"])(this.transform_,n,i,r,a,o,s,l)};ii.prototype.renderFrame=function(t){if(!t){if(this.renderedVisible_){this.canvas_.style.display="none";this.renderedVisible_=false}return}var e=this.context_;var n=t.pixelRatio;var i=Math.round(t.size[0]*n);var r=Math.round(t.size[1]*n);if(this.canvas_.width!=i||this.canvas_.height!=r){this.canvas_.width=i;this.canvas_.height=r}else{e.clearRect(0,0,i,r)}var a=t.viewState.rotation;this.calculateMatrices2D(t);this.dispatchComposeEvent_(An["a"].PRECOMPOSE,t);var o=t.layerStatesArray;Object(C["l"])(o,ei);if(a){e.save();Object(Ln["s"])(e,a,i/2,r/2)}var s=t.viewState.resolution;var l=void 0,u=void 0,c=void 0,f=void 0,h=void 0;for(l=0,u=o.length;l<u;++l){h=o[l];c=h.layer;f=this.getLayerRenderer(c);if(!Object(st["b"])(h,s)||h.sourceState!=Yn["a"].READY){continue}if(f.prepareFrame(t,h)){f.composeFrame(t,h,e)}}if(a){e.restore()}this.dispatchComposeEvent_(An["a"].POSTCOMPOSE,t);if(!this.renderedVisible_){this.canvas_.style.display="";this.renderedVisible_=true}this.scheduleRemoveUnusedLayerRenderers(t);this.scheduleExpireIconCache(t)};ii.prototype.forEachLayerAtPixel=function(t,e,n,i,r,a){var o=void 0;var s=e.viewState;var l=s.resolution;var u=e.layerStatesArray;var c=u.length;var f=Object(et["a"])(e.pixelToCoordinateTransform,t.slice());var h=void 0;for(h=c-1;h>=0;--h){var d=u[h];var p=d.layer;if(Object(st["b"])(d,l)&&r.call(a,p)){var v=this.getLayerRenderer(p);o=v.forEachLayerAtCoordinate(f,e,n,i);if(o){return o}}}return undefined};var ri=ii;var ai=n(251);var oi=function t(e){qn.call(this,e);this.context=this.context===null?null:Object(K["a"])();this.oversampling_;this.renderedExtent_=null;this.renderedRevision;this.renderedTiles=[];this.tmpExtent=Object(Z["j"])();this.tmpTileRange_=new ai["b"](0,0,0,0);this.imageTransform_=Object(et["c"])();this.zDirection=0};Object(i["d"])(oi,qn);oi["handles"]=function(t){return t.getType()===Mn["a"].TILE};oi["create"]=function(t,e){return new oi(e)};oi.prototype.isDrawableTile_=function(t){var e=t.getState();var n=this.getLayer().getUseInterimTilesOnError();return e==$["a"].LOADED||e==$["a"].EMPTY||e==$["a"].ERROR&&!n};oi.prototype.prepareFrame=function(t,e){var n=t.pixelRatio;var r=t.size;var a=t.viewState;var o=a.projection;var s=a.resolution;var l=a.center;var u=this.getLayer();var c=u.getSource();var f=c.getRevision();var h=c.getTileGridForProjection(o);var d=h.getZForResolution(s,this.zDirection);var p=h.getResolution(d);var v=Math.round(s/p)||1;var g=t.extent;if(e.extent!==undefined){g=Object(Z["B"])(g,e.extent)}if(Object(Z["H"])(g)){return false}var m=h.getTileRangeForExtentAndZ(g,d);var _=h.getTileRangeExtent(d,m);var y=c.getTilePixelRatio(n);var b={};b[d]={};var w=this.createLoadedTileFinder(c,o,b);var x=this.tmpExtent;var S=this.tmpTileRange_;var C=false;var E=void 0,O=void 0,T=void 0;for(O=m.minX;O<=m.maxX;++O){for(T=m.minY;T<=m.maxY;++T){E=c.getTile(d,O,T,n,o);if(E.getState()==$["a"].ERROR){if(!u.getUseInterimTilesOnError()){E.setState($["a"].LOADED)}else if(u.getPreload()>0){C=true}}if(!this.isDrawableTile_(E)){E=E.getInterimTile()}if(this.isDrawableTile_(E)){var M=Object(i["c"])(this);if(E.getState()==$["a"].LOADED){b[d][E.tileCoord.toString()]=E;var I=E.inTransition(M);if(!C&&(I||this.renderedTiles.indexOf(E)===-1)){C=true}}if(E.getAlpha(M,t.time)===1){continue}}var R=h.getTileCoordChildTileRange(E.tileCoord,S,x);var N=false;if(R){N=w(d+1,R)}if(!N){h.forEachTileCoordParentTileRange(E.tileCoord,w,null,S,x)}}}var A=p*n/y*v;var L=t.viewHints;var P=L[X["a"].ANIMATING]||L[X["a"].INTERACTING];if(!(this.renderedResolution&&Date.now()-t.time>16&&P)&&(C||!(this.renderedExtent_&&Object(Z["g"])(this.renderedExtent_,g))||this.renderedRevision!=f||v!=this.oversampling_||!P&&A!=this.renderedResolution)){var D=this.context;if(D){var j=c.getTilePixelSize(d,n,o);var k=Math.round(m.getWidth()*j[0]/v);var F=Math.round(m.getHeight()*j[1]/v);var G=D.canvas;if(G.width!=k||G.height!=F){this.oversampling_=v;G.width=k;G.height=F}else{if(this.renderedExtent_&&!Object(Z["p"])(_,this.renderedExtent_)){D.clearRect(0,0,k,F)}v=this.oversampling_}}this.renderedTiles.length=0;var U=Object.keys(b).map(Number);U.sort(function(t,e){if(t===d){return 1}else if(e===d){return-1}else{return t>e?1:t<e?-1:0}});var Y=void 0,V=void 0,H=void 0,z=void 0,B=void 0,W=void 0;var q=void 0,K=void 0,Q=void 0,J=void 0,tt=void 0;for(B=0,W=U.length;B<W;++B){z=U[B];H=c.getTilePixelSize(z,n,o);Y=h.getResolution(z);V=Y/p;K=y*c.getGutter(o);Q=b[z];for(var nt in Q){E=Q[nt];q=h.getTileCoordExtent(E.getTileCoord(),x);O=(q[0]-_[0])/p*y/v;T=(_[3]-q[3])/p*y/v;J=H[0]*V/v;tt=H[1]*V/v;this.drawTileImage(E,t,e,O,T,J,tt,K,d===z);this.renderedTiles.push(E)}}this.renderedRevision=f;this.renderedResolution=p*n/y*v;this.renderedExtent_=_}var it=this.renderedResolution/s;var rt=Object(et["b"])(this.imageTransform_,n*r[0]/2,n*r[1]/2,it,it,0,(this.renderedExtent_[0]-l[0])/this.renderedResolution*n,(l[1]-this.renderedExtent_[3])/this.renderedResolution*n);Object(et["b"])(this.coordinateToCanvasPixelTransform,n*r[0]/2-rt[4],n*r[1]/2-rt[5],n/s,-n/s,0,-l[0],-l[1]);this.updateUsedTiles(t.usedTiles,c,d,m);this.manageTilePyramid(t,c,h,n,o,g,d,u.getPreload());this.scheduleExpireCache(t,c);return this.renderedTiles.length>0};oi.prototype.drawTileImage=function(t,e,n,r,a,o,s,l,u){var c=t.getImage(this.getLayer());if(!c){return}var f=Object(i["c"])(this);var h=u?t.getAlpha(f,e.time):1;if(h===1&&!this.getLayer().getSource().getOpaque(e.viewState.projection)){this.context.clearRect(r,a,o,s)}var d=h!==this.context.globalAlpha;if(d){this.context.save();this.context.globalAlpha=h}this.context.drawImage(c,l,l,c.width-2*l,c.height-2*l,r,a,o,s);if(d){this.context.restore()}if(h!==1){e.animate=true}else if(u){t.endTransition(f)}};oi.prototype.getImage=function(){var t=this.context;return t?t.canvas:null};oi.prototype.getLayer;oi.prototype.getImageTransform=function(){return this.imageTransform_};var si=oi;var li=n(266);var ui=n.n(li);var ci=function t(){};ci.prototype.getReplay=function(t,e){};ci.prototype.isEmpty=function(){};var fi=ci;var hi={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};var di=n(111);var pi=n(138);var vi=n(362);function gi(t,e,n,i,r,a,o,s){var l=[];var u=t[e]>t[n-i];var c=r.length;var f=t[e];var h=t[e+1];e+=i;var d=t[e];var p=t[e+1];var v=0;var g=Math.sqrt(Math.pow(d-f,2)+Math.pow(p-h,2));var m="";var _=0;var y=void 0,b=void 0,w=void 0;for(var x=0;x<c;++x){b=u?c-x-1:x;var S=r.charAt(b);m=u?S+m:m+S;var C=a(m)-_;_+=C;var E=o+C/2;while(e<n-i&&v+g<E){f=d;h=p;e+=i;d=t[e];p=t[e+1];v+=g;g=Math.sqrt(Math.pow(d-f,2)+Math.pow(p-h,2))}var O=E-v;var T=Math.atan2(p-h,d-f);if(u){T+=T>0?-Math.PI:Math.PI}if(w!==undefined){var M=T-w;M+=M>Math.PI?-2*Math.PI:M<-Math.PI?2*Math.PI:0;if(Math.abs(M)>s){return null}}var I=O/g;var R=Object(Dt["c"])(f,d,I);var N=Object(Dt["c"])(h,p,I);if(w==T){if(u){y[0]=R;y[1]=N;y[2]=C/2}y[4]=m}else{m=S;_=C;y=[R,N,C/2,T,m];if(u){l.unshift(y)}else{l.push(y)}w=T}o+=C}return l}var mi={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12};var _i=[mi.FILL];var yi=[mi.STROKE];var bi=[mi.BEGIN_PATH];var wi=[mi.CLOSE_PATH];var xi=mi;var Si=[hi.POLYGON,hi.CIRCLE,hi.LINE_STRING,hi.IMAGE,hi.TEXT,hi.DEFAULT];var Ci={};Ci["left"]=0;Ci["end"]=0;Ci["center"]=.5;Ci["right"]=1;Ci["start"]=1;Ci["top"]=0;Ci["middle"]=.5;Ci["hanging"]=.2;Ci["alphabetic"]=.8;Ci["ideographic"]=.8;Ci["bottom"]=1;var Ei=function t(e,n,i,r,a,o){Fn.call(this);this.declutterTree=o;this.tolerance=e;this.maxExtent=n;this.overlaps=a;this.pixelRatio=r;this.maxLineWidth=0;this.resolution=i;this.fillOrigin_;this.beginGeometryInstruction1_=null;this.beginGeometryInstruction2_=null;this.bufferedMaxExtent_=null;this.instructions=[];this.coordinates=[];this.coordinateCache_={};this.renderedTransform_=Object(et["c"])();this.hitDetectionInstructions=[];this.pixelCoordinates_=null;this.state={};this.viewRotation_=0};Object(i["d"])(Ei,Fn);var Oi=Object(Z["j"])();var Ti=Object(et["c"])();Ei.prototype.replayTextBackground_=function(t,e,n,i,r,a,o){t.beginPath();t.moveTo.apply(t,e);t.lineTo.apply(t,n);t.lineTo.apply(t,i);t.lineTo.apply(t,r);t.lineTo.apply(t,e);if(a){this.fillOrigin_=a[2];this.fill_(t)}if(o){this.setStrokeStyle_(t,o);t.stroke()}};Ei.prototype.replayImage_=function(t,e,n,i,r,a,o,s,l,u,c,f,h,d,p,v,g,m){var _=g||m;r*=h;a*=h;e-=r;n-=a;var y=p+u>i.width?i.width-u:p;var b=s+c>i.height?i.height-c:s;var w=v[3]+y*h+v[1];var x=v[0]+b*h+v[2];var S=e-v[3];var C=n-v[0];var E=void 0;var O=void 0;var T=void 0;var M=void 0;if(_||f!==0){E=[S,C];O=[S+w,C];T=[S+w,C+x];M=[S,C+x]}var I=null;if(f!==0){var R=e+r;var N=n+a;I=Object(et["b"])(Ti,R,N,1,1,f,-R,-N);Object(Z["l"])(Oi);Object(Z["r"])(Oi,Object(et["a"])(Ti,E));Object(Z["r"])(Oi,Object(et["a"])(Ti,O));Object(Z["r"])(Oi,Object(et["a"])(Ti,T));Object(Z["r"])(Oi,Object(et["a"])(Ti,M))}else{Object(Z["k"])(S,C,S+w,C+x,Oi)}var A=t.canvas;var L=m?m[2]*h/2:0;var P=Oi[0]-L<=A.width&&Oi[2]+L>=0&&Oi[1]-L<=A.height&&Oi[3]+L>=0;if(d){e=Math.round(e);n=Math.round(n)}if(o){if(!P&&o[4]==1){return}Object(Z["q"])(o,Oi);var D=P?[t,I?I.slice(0):null,l,i,u,c,y,b,e,n,h]:null;if(D&&_){D.push(g,m,E,O,T,M)}o.push(D)}else if(P){if(_){this.replayTextBackground_(t,E,O,T,M,g,m)}Object(Ln["n"])(t,I,l,i,u,c,y,b,e,n,h)}};Ei.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return e==1?t:t.map(function(t){return t*e})};Ei.prototype.appendFlatCoordinates=function(t,e,n,i,r,a){var o=this.coordinates.length;var s=this.getBufferedMaxExtent();if(a){e+=i}var l=[t[e],t[e+1]];var u=[NaN,NaN];var c=true;var f=void 0,h=void 0,d=void 0;for(f=e+i;f<n;f+=i){u[0]=t[f];u[1]=t[f+1];d=Object(Z["i"])(s,u);if(d!==h){if(c){this.coordinates[o++]=l[0];this.coordinates[o++]=l[1]}this.coordinates[o++]=u[0];this.coordinates[o++]=u[1];c=false}else if(d===di["a"].INTERSECTING){this.coordinates[o++]=u[0];this.coordinates[o++]=u[1];c=false}else{c=true}l[0]=u[0];l[1]=u[1];h=d}if(r&&c||f===e+i){this.coordinates[o++]=l[0];this.coordinates[o++]=l[1]}return o};Ei.prototype.drawCustomCoordinates_=function(t,e,n,i,r){for(var a=0,o=n.length;a<o;++a){var s=n[a];var l=this.appendFlatCoordinates(t,e,s,i,false,false);r.push(l);e=s}return e};Ei.prototype.drawCustom=function(t,e,n){this.beginGeometry(t,e);var i=t.getType();var r=t.getStride();var a=this.coordinates.length;var o=void 0,s=void 0,l=void 0,u=void 0;var c=void 0;if(i==We["a"].MULTI_POLYGON){t=t;o=t.getOrientedFlatCoordinates();u=[];var f=t.getEndss();c=0;for(var h=0,d=f.length;h<d;++h){var p=[];c=this.drawCustomCoordinates_(o,c,f[h],r,p);u.push(p)}this.instructions.push([xi.CUSTOM,a,u,t,n,pi["c"]])}else if(i==We["a"].POLYGON||i==We["a"].MULTI_LINE_STRING){l=[];o=i==We["a"].POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates();c=this.drawCustomCoordinates_(o,0,t.getEnds(),r,l);this.instructions.push([xi.CUSTOM,a,l,t,n,pi["b"]])}else if(i==We["a"].LINE_STRING||i==We["a"].MULTI_POINT){o=t.getFlatCoordinates();s=this.appendFlatCoordinates(o,0,o.length,r,false,false);this.instructions.push([xi.CUSTOM,a,s,t,n,pi["a"]])}else if(i==We["a"].POINT){o=t.getFlatCoordinates();this.coordinates.push(o[0],o[1]);s=this.coordinates.length;this.instructions.push([xi.CUSTOM,a,s,t,n])}this.endGeometry(t,e)};Ei.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[xi.BEGIN_GEOMETRY,e,0];this.instructions.push(this.beginGeometryInstruction1_);this.beginGeometryInstruction2_=[xi.BEGIN_GEOMETRY,e,0];this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)};Ei.prototype.fill_=function(t){if(this.fillOrigin_){var e=Object(et["a"])(this.renderedTransform_,this.fillOrigin_.slice());t.translate(e[0],e[1]);t.rotate(this.viewRotation_)}t.fill();if(this.fillOrigin_){t.setTransform.apply(t,Ln["r"])}};Ei.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1];t.lineWidth=e[2];t.lineCap=e[3];t.lineJoin=e[4];t.miterLimit=e[5];if(s["a"]){t.lineDashOffset=e[7];t.setLineDash(e[6])}};Ei.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var n=t[4];if(n==1||n==t.length-5){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(i)){this.declutterTree.insert(i);for(var r=5,a=t.length;r<a;++r){var o=t[r];if(o){if(o.length>11){this.replayTextBackground_(o[0],o[13],o[14],o[15],o[16],o[11],o[12])}Ln["n"].apply(undefined,o)}}}t.length=5;Object(Z["l"])(t)}}};Ei.prototype.replay_=function(t,e,n,r,a,o){var s=void 0;if(this.pixelCoordinates_&&Object(C["b"])(e,this.renderedTransform_)){s=this.pixelCoordinates_}else{if(!this.pixelCoordinates_){this.pixelCoordinates_=[]}s=Object(jn["c"])(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_);Object(et["g"])(this.renderedTransform_,e)}var l=!Object(Y["d"])(n);var u=0;var c=r.length;var f=0;var h=void 0;var d=void 0,p=void 0,v=void 0,g=void 0,m=void 0,_=void 0,y=void 0,b=void 0;var w=0;var x=0;var S=null;var E=null;var O=this.coordinateCache_;var T=this.viewRotation_;var M={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:T};var I=this.instructions!=r||this.overlaps?0:200;var R=void 0;var N=void 0,A=void 0;while(u<c){var L=r[u];var P=L[0];switch(P){case xi.BEGIN_GEOMETRY:R=L[1];if(l&&n[Object(i["c"])(R).toString()]||!R.getGeometry()){u=L[2]}else if(o!==undefined&&!Object(Z["F"])(o,R.getGeometry().getExtent())){u=L[2]+1}else{++u}break;case xi.BEGIN_PATH:if(w>I){this.fill_(t);w=0}if(x>I){t.stroke();x=0}if(!w&&!x){t.beginPath();v=g=NaN}++u;break;case xi.CIRCLE:f=L[1];var D=s[f];var j=s[f+1];var k=s[f+2];var F=s[f+3];var $=k-D;var G=F-j;var U=Math.sqrt($*$+G*G);t.moveTo(D+U,j);t.arc(D,j,U,0,2*Math.PI,true);++u;break;case xi.CLOSE_PATH:t.closePath();++u;break;case xi.CUSTOM:f=L[1];h=L[2];var V=L[3];var H=L[4];var z=L.length==6?L[5]:undefined;M.geometry=V;M.feature=R;if(!(u in O)){O[u]=[]}var B=O[u];if(z){z(s,f,h,2,B)}else{B[0]=s[f];B[1]=s[f+1];B.length=2}H(B,M);++u;break;case xi.DRAW_IMAGE:f=L[1];h=L[2];b=L[3];d=L[4];p=L[5];y=a?null:L[6];var W=L[7];var q=L[8];var X=L[9];var K=L[10];var Q=L[11];var J=L[12];var tt=L[13];var nt=L[14];var it=L[15];var rt=void 0,at=void 0,ot=void 0;if(L.length>16){rt=L[16];at=L[17];ot=L[18]}else{rt=Ln["j"];at=ot=false}if(Q){J+=T}for(;f<h;f+=2){this.replayImage_(t,s[f],s[f+1],b,d,p,y,W,q,X,K,J,tt,nt,it,rt,at?S:null,ot?E:null)}this.renderDeclutter_(y,R);++u;break;case xi.DRAW_CHARS:var st=L[1];var lt=L[2];var ut=L[3];y=a?null:L[4];var ct=L[5];var ft=L[6];var ht=L[7];var dt=L[8];var pt=L[9];var vt=L[10];var gt=L[11];var mt=L[12];var _t=L[13];var yt=L[14];var bt=Object(vi["a"])(s,st,lt,2);var wt=dt(mt);if(ct||wt<=bt){var xt=this.textStates[_t].textAlign;var St=(bt-wt)*Ci[xt];var Ct=gi(s,st,lt,2,mt,dt,St,ht);if(Ct){var Et=void 0,Ot=void 0,Tt=void 0,Mt=void 0,It=void 0;if(vt){for(Et=0,Ot=Ct.length;Et<Ot;++Et){It=Ct[Et];Tt=It[4];Mt=this.getImage(Tt,_t,"",vt);d=It[2]+gt;p=ut*Mt.height+(.5-ut)*2*gt-pt;this.replayImage_(t,It[0],It[1],Mt,d,p,y,Mt.height,1,0,0,It[3],yt,false,Mt.width,Ln["j"],null,null)}}if(ft){for(Et=0,Ot=Ct.length;Et<Ot;++Et){It=Ct[Et];Tt=It[4];Mt=this.getImage(Tt,_t,ft,"");d=It[2];p=ut*Mt.height-pt;this.replayImage_(t,It[0],It[1],Mt,d,p,y,Mt.height,1,0,0,It[3],yt,false,Mt.width,Ln["j"],null,null)}}}}this.renderDeclutter_(y,R);++u;break;case xi.END_GEOMETRY:if(a!==undefined){R=L[1];var Rt=a(R);if(Rt){return Rt}}++u;break;case xi.FILL:if(I){w++}else{this.fill_(t)}++u;break;case xi.MOVE_TO_LINE_TO:f=L[1];h=L[2];N=s[f];A=s[f+1];m=N+.5|0;_=A+.5|0;if(m!==v||_!==g){t.moveTo(N,A);v=m;g=_}for(f+=2;f<h;f+=2){N=s[f];A=s[f+1];m=N+.5|0;_=A+.5|0;if(f==h-2||m!==v||_!==g){t.lineTo(N,A);v=m;g=_}}++u;break;case xi.SET_FILL_STYLE:S=L;this.fillOrigin_=L[2];if(w){this.fill_(t);w=0;if(x){t.stroke();x=0}}t.fillStyle=L[1];++u;break;case xi.SET_STROKE_STYLE:E=L;if(x){t.stroke();x=0}this.setStrokeStyle_(t,L);++u;break;case xi.STROKE:if(I){x++}else{t.stroke()}++u;break;default:++u;break}}if(w){this.fill_(t)}if(x){t.stroke()}return undefined};Ei.prototype.replay=function(t,e,n,i){this.viewRotation_=n;this.replay_(t,e,i,this.instructions,undefined,undefined)};Ei.prototype.replayHitDetection=function(t,e,n,i,r,a){this.viewRotation_=n;return this.replay_(t,e,i,this.hitDetectionInstructions,r,a)};Ei.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var e=void 0;var n=t.length;var i=void 0;var r=void 0;var a=-1;for(e=0;e<n;++e){i=t[e];r=i[0];if(r==xi.END_GEOMETRY){a=e}else if(r==xi.BEGIN_GEOMETRY){i[2]=e;Object(C["k"])(this.hitDetectionInstructions,a,e);a=-1}}};Ei.prototype.setFillStrokeStyle=function(t,e){var n=this.state;if(t){var i=t.getColor();n.fillStyle=Object(Pn["a"])(i?i:Ln["b"])}else{n.fillStyle=undefined}if(e){var r=e.getColor();n.strokeStyle=Object(Pn["a"])(r?r:Ln["k"]);var a=e.getLineCap();n.lineCap=a!==undefined?a:Ln["d"];var o=e.getLineDash();n.lineDash=o?o.slice():Ln["e"];var s=e.getLineDashOffset();n.lineDashOffset=s?s:Ln["f"];var l=e.getLineJoin();n.lineJoin=l!==undefined?l:Ln["g"];var u=e.getWidth();n.lineWidth=u!==undefined?u:Ln["h"];var c=e.getMiterLimit();n.miterLimit=c!==undefined?c:Ln["i"];if(n.lineWidth>this.maxLineWidth){this.maxLineWidth=n.lineWidth;this.bufferedMaxExtent_=null}}else{n.strokeStyle=undefined;n.lineCap=undefined;n.lineDash=null;n.lineDashOffset=undefined;n.lineJoin=undefined;n.lineWidth=undefined;n.miterLimit=undefined}};Ei.prototype.createFill=function(t,e){var n=t.fillStyle;var i=[xi.SET_FILL_STYLE,n];if(typeof n!=="string"){var r=e.getExtent();i.push([r[0],r[3]])}return i};Ei.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))};Ei.prototype.createStroke=function(t){return[xi.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]};Ei.prototype.updateFillStyle=function(t,e,n){var i=t.fillStyle;if(typeof i!=="string"||t.currentFillStyle!=i){if(i!==undefined){this.instructions.push(e.call(this,t,n))}t.currentFillStyle=i}};Ei.prototype.updateStrokeStyle=function(t,e){var n=t.strokeStyle;var i=t.lineCap;var r=t.lineDash;var a=t.lineDashOffset;var o=t.lineJoin;var s=t.lineWidth;var l=t.miterLimit;if(t.currentStrokeStyle!=n||t.currentLineCap!=i||r!=t.currentLineDash&&!Object(C["b"])(t.currentLineDash,r)||t.currentLineDashOffset!=a||t.currentLineJoin!=o||t.currentLineWidth!=s||t.currentMiterLimit!=l){if(n!==undefined){e.call(this,t)}t.currentStrokeStyle=n;t.currentLineCap=i;t.currentLineDash=r;t.currentLineDashOffset=a;t.currentLineJoin=o;t.currentLineWidth=s;t.currentMiterLimit=l}};Ei.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length;this.beginGeometryInstruction1_=null;this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length;this.beginGeometryInstruction2_=null;var n=[xi.END_GEOMETRY,e];this.instructions.push(n);this.hitDetectionInstructions.push(n)};Ei.prototype.finish=Q["c"];Ei.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_){this.bufferedMaxExtent_=Object(Z["d"])(this.maxExtent);if(this.maxLineWidth>0){var t=this.resolution*(this.maxLineWidth+1)/2;Object(Z["c"])(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}}return this.bufferedMaxExtent_};var Mi=Ei;var Ii=function t(e,n,i,r,a,o){Mi.call(this,e,n,i,r,a,o);this.declutterGroup_=null;this.hitDetectionImage_=null;this.image_=null;this.anchorX_=undefined;this.anchorY_=undefined;this.height_=undefined;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.scale_=undefined;this.snapToPixel_=undefined;this.width_=undefined};Object(i["d"])(Ii,Mi);Ii.prototype.drawCoordinates_=function(t,e,n,i){return this.appendFlatCoordinates(t,e,n,i,false,false)};Ii.prototype.drawPoint=function(t,e){if(!this.image_){return}this.beginGeometry(t,e);var n=t.getFlatCoordinates();var i=t.getStride();var r=this.coordinates.length;var a=this.drawCoordinates_(n,0,n.length,i);this.instructions.push([xi.DRAW_IMAGE,r,a,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]);this.hitDetectionInstructions.push([xi.DRAW_IMAGE,r,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.endGeometry(t,e)};Ii.prototype.drawMultiPoint=function(t,e){if(!this.image_){return}this.beginGeometry(t,e);var n=t.getFlatCoordinates();var i=t.getStride();var r=this.coordinates.length;var a=this.drawCoordinates_(n,0,n.length,i);this.instructions.push([xi.DRAW_IMAGE,r,a,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]);this.hitDetectionInstructions.push([xi.DRAW_IMAGE,r,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.endGeometry(t,e)};Ii.prototype.finish=function(){this.reverseHitDetectionInstructions();this.anchorX_=undefined;this.anchorY_=undefined;this.hitDetectionImage_=null;this.image_=null;this.height_=undefined;this.scale_=undefined;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.snapToPixel_=undefined;this.width_=undefined};Ii.prototype.setImageStyle=function(t,e){var n=t.getAnchor();var i=t.getSize();var r=t.getHitDetectionImage(1);var a=t.getImage(1);var o=t.getOrigin();this.anchorX_=n[0];this.anchorY_=n[1];this.declutterGroup_=e;this.hitDetectionImage_=r;this.image_=a;this.height_=i[1];this.opacity_=t.getOpacity();this.originX_=o[0];this.originY_=o[1];this.rotateWithView_=t.getRotateWithView();this.rotation_=t.getRotation();this.scale_=t.getScale();this.snapToPixel_=t.getSnapToPixel();this.width_=i[0]};var Ri=Ii;var Ni=function t(e,n,i,r,a,o){Mi.call(this,e,n,i,r,a,o)};Object(i["d"])(Ni,Mi);Ni.prototype.drawFlatCoordinates_=function(t,e,n,i){var r=this.coordinates.length;var a=this.appendFlatCoordinates(t,e,n,i,false,false);var o=[xi.MOVE_TO_LINE_TO,r,a];this.instructions.push(o);this.hitDetectionInstructions.push(o);return n};Ni.prototype.drawLineString=function(t,e){var n=this.state;var i=n.strokeStyle;var r=n.lineWidth;if(i===undefined||r===undefined){return}this.updateStrokeStyle(n,this.applyStroke);this.beginGeometry(t,e);this.hitDetectionInstructions.push([xi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],bi);var a=t.getFlatCoordinates();var o=t.getStride();this.drawFlatCoordinates_(a,0,a.length,o);this.hitDetectionInstructions.push(yi);this.endGeometry(t,e)};Ni.prototype.drawMultiLineString=function(t,e){var n=this.state;var i=n.strokeStyle;var r=n.lineWidth;if(i===undefined||r===undefined){return}this.updateStrokeStyle(n,this.applyStroke);this.beginGeometry(t,e);this.hitDetectionInstructions.push([xi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],bi);var a=t.getEnds();var o=t.getFlatCoordinates();var s=t.getStride();var l=0;for(var u=0,c=a.length;u<c;++u){l=this.drawFlatCoordinates_(o,l,a[u],s)}this.hitDetectionInstructions.push(yi);this.endGeometry(t,e)};Ni.prototype.finish=function(){var t=this.state;if(t.lastStroke!=undefined&&t.lastStroke!=this.coordinates.length){this.instructions.push(yi)}this.reverseHitDetectionInstructions();this.state=null};Ni.prototype.applyStroke=function(t){if(t.lastStroke!=undefined&&t.lastStroke!=this.coordinates.length){this.instructions.push(yi);t.lastStroke=this.coordinates.length}t.lastStroke=0;Mi.prototype.applyStroke.call(this,t);this.instructions.push(bi)};var Ai=Ni;var Li=n(84);var Pi=n(162);var Di=function t(e,n,i,r,a,o){Mi.call(this,e,n,i,r,a,o)};Object(i["d"])(Di,Mi);Di.prototype.drawFlatCoordinatess_=function(t,e,n,i){var r=this.state;var a=r.fillStyle!==undefined;var o=r.strokeStyle!=undefined;var s=n.length;this.instructions.push(bi);this.hitDetectionInstructions.push(bi);for(var l=0;l<s;++l){var u=n[l];var c=this.coordinates.length;var f=this.appendFlatCoordinates(t,e,u,i,true,!o);var h=[xi.MOVE_TO_LINE_TO,c,f];this.instructions.push(h);this.hitDetectionInstructions.push(h);if(o){this.instructions.push(wi);this.hitDetectionInstructions.push(wi)}e=u}this.hitDetectionInstructions.push(_i);if(a){this.instructions.push(_i)}if(o){this.instructions.push(yi);this.hitDetectionInstructions.push(yi)}return e};Di.prototype.drawCircle=function(t,e){var n=this.state;var i=n.fillStyle;var r=n.strokeStyle;if(i===undefined&&r===undefined){return}this.setFillStrokeStyles_(t);this.beginGeometry(t,e);this.hitDetectionInstructions.push([xi.SET_FILL_STYLE,Object(Li["b"])(Ln["b"])]);if(n.strokeStyle!==undefined){this.hitDetectionInstructions.push([xi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset])}var a=t.getFlatCoordinates();var o=t.getStride();var s=this.coordinates.length;this.appendFlatCoordinates(a,0,a.length,o,false,false);var l=[xi.CIRCLE,s];this.instructions.push(bi,l);this.hitDetectionInstructions.push(bi,l);this.hitDetectionInstructions.push(_i);if(n.fillStyle!==undefined){this.instructions.push(_i)}if(n.strokeStyle!==undefined){this.instructions.push(yi);this.hitDetectionInstructions.push(yi)}this.endGeometry(t,e)};Di.prototype.drawPolygon=function(t,e){var n=this.state;this.setFillStrokeStyles_(t);this.beginGeometry(t,e);this.hitDetectionInstructions.push([xi.SET_FILL_STYLE,Object(Li["b"])(Ln["b"])]);if(n.strokeStyle!==undefined){this.hitDetectionInstructions.push([xi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset])}var i=t.getEnds();var r=t.getOrientedFlatCoordinates();var a=t.getStride();this.drawFlatCoordinatess_(r,0,i,a);this.endGeometry(t,e)};Di.prototype.drawMultiPolygon=function(t,e){var n=this.state;var i=n.fillStyle;var r=n.strokeStyle;if(i===undefined&&r===undefined){return}this.setFillStrokeStyles_(t);this.beginGeometry(t,e);this.hitDetectionInstructions.push([xi.SET_FILL_STYLE,Object(Li["b"])(Ln["b"])]);if(n.strokeStyle!==undefined){this.hitDetectionInstructions.push([xi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset])}var a=t.getEndss();var o=t.getOrientedFlatCoordinates();var s=t.getStride();var l=0;for(var u=0,c=a.length;u<c;++u){l=this.drawFlatCoordinatess_(o,l,a[u],s)}this.endGeometry(t,e)};Di.prototype.finish=function(){this.reverseHitDetectionInstructions();this.state=null;var t=this.tolerance;if(t!==0){var e=this.coordinates;for(var n=0,i=e.length;n<i;++n){e[n]=Object(Pi["e"])(e[n],t)}}};Di.prototype.setFillStrokeStyles_=function(t){var e=this.state;var n=e.fillStyle;if(n!==undefined){this.updateFillStyle(e,this.createFill,t)}if(e.strokeStyle!==undefined){this.updateStrokeStyle(e,this.applyStroke)}};var ji=Di;function ki(t,e,n,i,r){var a=n;var o=n;var s=0;var l=0;var u=n;var c=void 0,f=void 0,h=void 0,d=void 0,p=void 0,v=void 0,g=void 0,m=void 0,_=void 0,y=void 0;for(f=n;f<i;f+=r){var b=e[f];var w=e[f+1];if(p!==undefined){_=b-p;y=w-v;d=Math.sqrt(_*_+y*y);if(g!==undefined){l+=h;c=Math.acos((g*_+m*y)/(h*d));if(c>t){if(l>s){s=l;a=u;o=f}l=0;u=f-r}}h=d;g=_;m=y}p=b;v=w}l+=d;return l>s?[u,f]:[a,o]}var Fi=n(358);var $i=function t(e,n,i,r,a,o){Mi.call(this,e,n,i,r,a,o);this.declutterGroup_;this.labels_=null;this.text_="";this.textOffsetX_=0;this.textOffsetY_=0;this.textRotateWithView_=undefined;this.textRotation_=0;this.textFillState_=null;this.fillStates={};this.textStrokeState_=null;this.strokeStates={};this.textState_={};this.textStates={};this.textKey_="";this.fillKey_="";this.strokeKey_="";this.widths_={};Ln["o"].prune()};Object(i["d"])($i,Mi);function Gi(t,e,n){var i=e.length;var r=0;for(var a=0;a<i;++a){var o=Object(Ln["q"])(t,e[a]);r=Math.max(r,o);n.push(o)}return r}$i.prototype.drawText=function(t,e){var n=this.textFillState_;var i=this.textStrokeState_;var r=this.textState_;if(this.text_===""||!r||!n&&!i){return}var a=this.coordinates.length;var o=t.getType();var s=null;var l=2;var u=2;var c=void 0,f=void 0;if(r.placement===Fi["a"].LINE){if(!Object(Z["F"])(this.getBufferedMaxExtent(),t.getExtent())){return}var h=void 0;s=t.getFlatCoordinates();u=t.getStride();if(o==We["a"].LINE_STRING){h=[s.length]}else if(o==We["a"].MULTI_LINE_STRING){h=t.getEnds()}else if(o==We["a"].POLYGON){h=t.getEnds().slice(0,1)}else if(o==We["a"].MULTI_POLYGON){var d=t.getEndss();h=[];for(c=0,f=d.length;c<f;++c){h.push(d[c][0])}}this.beginGeometry(t,e);var p=r.textAlign;var v=0;var g=void 0;for(var m=0,_=h.length;m<_;++m){if(p==undefined){var y=ki(r.maxAngle,s,v,h[m],u);v=y[0];g=y[1]}else{g=h[m]}for(c=v;c<g;c+=u){this.coordinates.push(s[c],s[c+1])}l=this.coordinates.length;v=h[m];this.drawChars_(a,l,this.declutterGroup_);a=l}this.endGeometry(t,e)}else{var b=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_);var w=b.width/this.pixelRatio;switch(o){case We["a"].POINT:case We["a"].MULTI_POINT:s=t.getFlatCoordinates();l=s.length;break;case We["a"].LINE_STRING:s=t.getFlatMidpoint();break;case We["a"].CIRCLE:s=t.getCenter();break;case We["a"].MULTI_LINE_STRING:s=t.getFlatMidpoints();l=s.length;break;case We["a"].POLYGON:s=t.getFlatInteriorPoint();if(!r.overflow&&s[2]/this.resolution<w){return}u=3;break;case We["a"].MULTI_POLYGON:var x=t.getFlatInteriorPoints();s=[];for(c=0,f=x.length;c<f;c+=3){if(r.overflow||x[c+2]/this.resolution>=w){s.push(x[c],x[c+1])}}l=s.length;if(l==0){return}break;default:}l=this.appendFlatCoordinates(s,0,l,u,false,false);this.beginGeometry(t,e);if(r.backgroundFill||r.backgroundStroke){this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke);this.updateFillStyle(this.state,this.createFill,t);this.hitDetectionInstructions.push(this.createFill(this.state,t));this.updateStrokeStyle(this.state,this.applyStroke);this.hitDetectionInstructions.push(this.createStroke(this.state))}this.drawTextImage_(b,a,l);this.endGeometry(t,e)}};$i.prototype.getImage=function(t,e,n,i){var r=void 0;var a=i+e+t+n+this.pixelRatio;if(!Ln["o"].containsKey(a)){var o=i?this.strokeStates[i]||this.textStrokeState_:null;var l=n?this.fillStates[n]||this.textFillState_:null;var u=this.textStates[e]||this.textState_;var c=this.pixelRatio;var f=u.scale*c;var h=Ci[u.textAlign||Ln["l"]];var d=i&&o.lineWidth?o.lineWidth:0;var p=t.split("\n");var v=p.length;var g=[];var m=Gi(u.font,p,g);var _=Object(Ln["p"])(u.font);var y=_*v;var b=m+d;var w=Object(K["a"])(Math.ceil(b*f),Math.ceil((y+d)*f));r=w.canvas;Ln["o"].set(a,r);if(f!=1){w.scale(f,f)}w.font=u.font;if(i){w.strokeStyle=o.strokeStyle;w.lineWidth=d*(s["g"]?f:1);w.lineCap=o.lineCap;w.lineJoin=o.lineJoin;w.miterLimit=o.miterLimit;if(s["a"]&&o.lineDash.length){w.setLineDash(o.lineDash);w.lineDashOffset=o.lineDashOffset}}if(n){w.fillStyle=l.fillStyle}w.textBaseline="middle";w.textAlign="center";var x=.5-h;var S=h*r.width/f+x*d;var C=void 0;if(i){for(C=0;C<v;++C){w.strokeText(p[C],S+x*g[C],.5*(d+_)+C*_)}}if(n){for(C=0;C<v;++C){w.fillText(p[C],S+x*g[C],.5*(d+_)+C*_)}}}return Ln["o"].get(a)};$i.prototype.drawTextImage_=function(t,e,n){var i=this.textState_;var r=this.textStrokeState_;var a=this.pixelRatio;var o=Ci[i.textAlign||Ln["l"]];var s=Ci[i.textBaseline];var l=r&&r.lineWidth?r.lineWidth:0;var u=o*t.width/a+2*(.5-o)*l;var c=s*t.height/a+2*(.5-s)*l;this.instructions.push([xi.DRAW_IMAGE,e,n,t,(u-this.textOffsetX_)*a,(c-this.textOffsetY_)*a,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,true,t.width,i.padding==Ln["j"]?Ln["j"]:i.padding.map(function(t){return t*a}),!!i.backgroundFill,!!i.backgroundStroke]);this.hitDetectionInstructions.push([xi.DRAW_IMAGE,e,n,t,(u-this.textOffsetX_)*a,(c-this.textOffsetY_)*a,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/a,true,t.width,i.padding,!!i.backgroundFill,!!i.backgroundStroke])};$i.prototype.drawChars_=function(t,e,n){var i=this.textStrokeState_;var r=this.textState_;var a=this.textFillState_;var o=this.strokeKey_;if(i){if(!(o in this.strokeStates)){this.strokeStates[o]={strokeStyle:i.strokeStyle,lineCap:i.lineCap,lineDashOffset:i.lineDashOffset,lineWidth:i.lineWidth,lineJoin:i.lineJoin,miterLimit:i.miterLimit,lineDash:i.lineDash}}}var s=this.textKey_;if(!(this.textKey_ in this.textStates)){this.textStates[this.textKey_]={font:r.font,textAlign:r.textAlign||Ln["l"],scale:r.scale}}var l=this.fillKey_;if(a){if(!(l in this.fillStates)){this.fillStates[l]={fillStyle:a.fillStyle}}}var u=this.pixelRatio;var c=Ci[r.textBaseline];var f=this.textOffsetY_*u;var h=this.text_;var d=r.font;var p=r.scale;var v=i?i.lineWidth*p/2:0;var g=this.widths_[d];if(!g){this.widths_[d]=g={}}this.instructions.push([xi.DRAW_CHARS,t,e,c,n,r.overflow,l,r.maxAngle,function(t){var e=g[t];if(!e){e=g[t]=Object(Ln["q"])(d,t)}return e*p*u},f,o,v*u,h,s,1]);this.hitDetectionInstructions.push([xi.DRAW_CHARS,t,e,c,n,r.overflow,l,r.maxAngle,function(t){var e=g[t];if(!e){e=g[t]=Object(Ln["q"])(d,t)}return e*p},f,o,v,h,s,1/u])};$i.prototype.setTextStyle=function(t,e){var n=void 0,r=void 0,a=void 0;if(!t){this.text_=""}else{this.declutterGroup_=e;var o=t.getFill();if(!o){r=this.textFillState_=null}else{r=this.textFillState_;if(!r){r=this.textFillState_={}}r.fillStyle=Object(Pn["a"])(o.getColor()||Ln["b"])}var s=t.getStroke();if(!s){a=this.textStrokeState_=null}else{a=this.textStrokeState_;if(!a){a=this.textStrokeState_={}}var l=s.getLineDash();var u=s.getLineDashOffset();var c=s.getWidth();var f=s.getMiterLimit();a.lineCap=s.getLineCap()||Ln["d"];a.lineDash=l?l.slice():Ln["e"];a.lineDashOffset=u===undefined?Ln["f"]:u;a.lineJoin=s.getLineJoin()||Ln["g"];a.lineWidth=c===undefined?Ln["h"]:c;a.miterLimit=f===undefined?Ln["i"]:f;a.strokeStyle=Object(Pn["a"])(s.getColor()||Ln["k"])}n=this.textState_;var h=t.getFont()||Ln["c"];Object(Ln["a"])(h);var d=t.getScale();n.overflow=t.getOverflow();n.font=h;n.maxAngle=t.getMaxAngle();n.placement=t.getPlacement();n.textAlign=t.getTextAlign();n.textBaseline=t.getTextBaseline()||Ln["m"];n.backgroundFill=t.getBackgroundFill();n.backgroundStroke=t.getBackgroundStroke();n.padding=t.getPadding()||Ln["j"];n.scale=d===undefined?1:d;var p=t.getOffsetX();var v=t.getOffsetY();var g=t.getRotateWithView();var m=t.getRotation();this.text_=t.getText()||"";this.textOffsetX_=p===undefined?0:p;this.textOffsetY_=v===undefined?0:v;this.textRotateWithView_=g===undefined?false:g;this.textRotation_=m===undefined?0:m;this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:Object(i["c"])(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"";this.textKey_=n.font+n.scale+(n.textAlign||"?");this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+Object(i["c"])(r.fillStyle):""}};var Ui=$i;var Yi={Circle:ji,Default:Mi,Image:Ri,LineString:Ai,Polygon:ji,Text:Ui};var Vi=function t(e,n,i,r,a,o,s){fi.call(this);this.declutterTree_=o;this.declutterGroup_=null;this.tolerance_=e;this.maxExtent_=n;this.overlaps_=a;this.pixelRatio_=r;this.resolution_=i;this.renderBuffer_=s;this.replaysByZIndex_={};this.hitDetectionContext_=Object(K["a"])(1,1);this.hitDetectionTransform_=Object(et["c"])()};Object(i["d"])(Vi,fi);var Hi={0:[[true]]};function zi(t,e,n){var i=void 0;var r=Math.floor(t.length/2);if(e>=r){for(i=r;i<e;i++){t[i][n]=true}}else if(e<r){for(i=e+1;i<r;i++){t[i][n]=true}}}function Bi(t){if(Hi[t]!==undefined){return Hi[t]}var e=t*2+1;var n=new Array(e);for(var i=0;i<e;i++){n[i]=new Array(e)}var r=t;var a=0;var o=0;while(r>=a){zi(n,t+r,t+a);zi(n,t+a,t+r);zi(n,t-a,t+r);zi(n,t-r,t+a);zi(n,t-r,t-a);zi(n,t-a,t-r);zi(n,t+a,t-r);zi(n,t+r,t-a);a++;o+=1+2*a;if(2*(o-r)+1>0){r-=1;o+=1-2*r}}Hi[t]=n;return n}function Wi(t,e,n){var i=Object.keys(t).map(Number).sort(C["i"]);var r={};for(var a=0,o=i.length;a<o;++a){var s=t[i[a].toString()];for(var l=0,u=s.length;l<u;){var c=s[l++];var f=s[l++];c.replay(e,f,n,r)}}}Vi.prototype.addDeclutter=function(t){var e=null;if(this.declutterTree_){if(t){e=this.declutterGroup_;e[4]++}else{e=this.declutterGroup_=Object(Z["j"])();e.push(1)}}return e};Vi.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath();t.moveTo(n[0],n[1]);t.lineTo(n[2],n[3]);t.lineTo(n[4],n[5]);t.lineTo(n[6],n[7]);t.clip()};Vi.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_){var n=this.replaysByZIndex_[e];for(var i=0,r=t.length;i<r;++i){if(t[i]in n){return true}}}return false};Vi.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var n in e){e[n].finish()}}};Vi.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r,a,o){i=Math.round(i);var s=i*2+1;var l=Object(et["b"])(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]);var u=this.hitDetectionContext_;if(u.canvas.width!==s||u.canvas.height!==s){u.canvas.width=s;u.canvas.height=s}else{u.clearRect(0,0,s,s)}var c=void 0;if(this.renderBuffer_!==undefined){c=Object(Z["j"])();Object(Z["r"])(c,t);Object(Z["c"])(c,e*(this.renderBuffer_+i),c)}var f=Bi(i);var h=void 0;if(this.declutterTree_){h=this.declutterTree_.all().map(function(t){return t.value})}var d=void 0;function p(t){var e=u.getImageData(0,0,s,s).data;for(var n=0;n<s;n++){for(var i=0;i<s;i++){if(f[n][i]){if(e[(i*s+n)*4+3]>0){var r=void 0;if(!(h&&(d==hi.IMAGE||d==hi.TEXT))||h.indexOf(t)!==-1){r=a(t)}if(r){return r}else{u.clearRect(0,0,s,s);return undefined}}}}}}var v=Object.keys(this.replaysByZIndex_).map(Number);v.sort(C["i"]);var g=void 0,m=void 0,_=void 0,y=void 0,b=void 0;for(g=v.length-1;g>=0;--g){var w=v[g].toString();_=this.replaysByZIndex_[w];for(m=Si.length-1;m>=0;--m){d=Si[m];y=_[d];if(y!==undefined){if(o&&(d==hi.IMAGE||d==hi.TEXT)){var x=o[w];if(!x){o[w]=[y,l.slice(0)]}else{x.push(y,l.slice(0))}}else{b=y.replayHitDetection(u,l,n,r,p,c);if(b){return b}}}}}return undefined};Vi.prototype.getClipCoords=function(t){var e=this.maxExtent_;var n=e[0];var i=e[1];var r=e[2];var a=e[3];var o=[n,i,n,a,r,a,r,i];Object(jn["c"])(o,0,8,2,t,o);return o};Vi.prototype.getReplay=function(t,e){var n=t!==undefined?t.toString():"0";var i=this.replaysByZIndex_[n];if(i===undefined){i={};this.replaysByZIndex_[n]=i}var r=i[e];if(r===undefined){var a=Yi[e];r=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_);i[e]=r}return r};Vi.prototype.getReplays=function(){return this.replaysByZIndex_};Vi.prototype.isEmpty=function(){return Object(Y["d"])(this.replaysByZIndex_)};Vi.prototype.replay=function(t,e,n,i,r,a){var o=Object.keys(this.replaysByZIndex_).map(Number);o.sort(C["i"]);t.save();this.clip(t,e);var s=r?r:Si;var l=void 0,u=void 0,c=void 0,f=void 0,h=void 0,d=void 0;for(l=0,u=o.length;l<u;++l){var p=o[l].toString();h=this.replaysByZIndex_[p];for(c=0,f=s.length;c<f;++c){var v=s[c];d=h[v];if(d!==undefined){if(a&&(v==hi.IMAGE||v==hi.TEXT)){var g=a[p];if(!g){a[p]=[d,e.slice(0)]}else{g.push(d,e.slice(0))}}else{d.replay(t,e,n,i)}}}}t.restore()};var qi=Vi;var Xi=.5;var Ki={Point:lr,LineString:ar,Polygon:cr,MultiPoint:ur,MultiLineString:or,MultiPolygon:sr,GeometryCollection:rr,Circle:tr};function Zi(t,e){return Object(i["c"])(t)-Object(i["c"])(e)}function Qi(t,e){var n=Ji(t,e);return n*n}function Ji(t,e){return Xi*t/e}function tr(t,e,n,i){var r=n.getFill();var a=n.getStroke();if(r||a){var o=t.getReplay(n.getZIndex(),hi.CIRCLE);o.setFillStrokeStyle(r,a);o.drawCircle(e,i)}var s=n.getText();if(s){var l=t.getReplay(n.getZIndex(),hi.TEXT);l.setTextStyle(s,t.addDeclutter(false));l.drawText(e,i)}}function er(t,e,n,i,r,a){var o=false;var s=n.getImage();if(s){var l=s.getImageState();if(l==En["a"].LOADED||l==En["a"].ERROR){s.unlistenImageChange(r,a)}else{if(l==En["a"].IDLE){s.load()}l=s.getImageState();s.listenImageChange(r,a);o=true}}nr(t,e,n,i);return o}function nr(t,e,n,i){var r=n.getGeometryFunction()(e);if(!r){return}var a=r.getSimplifiedGeometry(i);var o=n.getRenderer();if(o){ir(t,a,n,e)}else{var s=Ki[a.getType()];s(t,a,n,e)}}function ir(t,e,n,i){if(e.getType()==We["a"].GEOMETRY_COLLECTION){var r=e.getGeometries();for(var a=0,o=r.length;a<o;++a){ir(t,r[a],n,i)}return}var s=t.getReplay(n.getZIndex(),hi.DEFAULT);s.drawCustom(e,i,n.getRenderer())}function rr(t,e,n,i){var r=e.getGeometriesArray();var a=void 0,o=void 0;for(a=0,o=r.length;a<o;++a){var s=Ki[r[a].getType()];s(t,r[a],n,i)}}function ar(t,e,n,i){var r=n.getStroke();if(r){var a=t.getReplay(n.getZIndex(),hi.LINE_STRING);a.setFillStrokeStyle(null,r);a.drawLineString(e,i)}var o=n.getText();if(o){var s=t.getReplay(n.getZIndex(),hi.TEXT);s.setTextStyle(o,t.addDeclutter(false));s.drawText(e,i)}}function or(t,e,n,i){var r=n.getStroke();if(r){var a=t.getReplay(n.getZIndex(),hi.LINE_STRING);a.setFillStrokeStyle(null,r);a.drawMultiLineString(e,i)}var o=n.getText();if(o){var s=t.getReplay(n.getZIndex(),hi.TEXT);s.setTextStyle(o,t.addDeclutter(false));s.drawText(e,i)}}function sr(t,e,n,i){var r=n.getFill();var a=n.getStroke();if(a||r){var o=t.getReplay(n.getZIndex(),hi.POLYGON);o.setFillStrokeStyle(r,a);o.drawMultiPolygon(e,i)}var s=n.getText();if(s){var l=t.getReplay(n.getZIndex(),hi.TEXT);l.setTextStyle(s,t.addDeclutter(false));l.drawText(e,i)}}function lr(t,e,n,i){var r=n.getImage();if(r){if(r.getImageState()!=En["a"].LOADED){return}var a=t.getReplay(n.getZIndex(),hi.IMAGE);a.setImageStyle(r,t.addDeclutter(false));a.drawPoint(e,i)}var o=n.getText();if(o){var s=t.getReplay(n.getZIndex(),hi.TEXT);s.setTextStyle(o,t.addDeclutter(!!r));s.drawText(e,i)}}function ur(t,e,n,i){var r=n.getImage();if(r){if(r.getImageState()!=En["a"].LOADED){return}var a=t.getReplay(n.getZIndex(),hi.IMAGE);a.setImageStyle(r,t.addDeclutter(false));a.drawMultiPoint(e,i)}var o=n.getText();if(o){var s=t.getReplay(n.getZIndex(),hi.TEXT);s.setTextStyle(o,t.addDeclutter(!!r));s.drawText(e,i)}}function cr(t,e,n,i){var r=n.getFill();var a=n.getStroke();if(r||a){var o=t.getReplay(n.getZIndex(),hi.POLYGON);o.setFillStrokeStyle(r,a);o.drawPolygon(e,i)}var s=n.getText();if(s){var l=t.getReplay(n.getZIndex(),hi.TEXT);l.setTextStyle(s,t.addDeclutter(false));l.drawText(e,i)}}var fr=function t(e){Bn.call(this,e);this.declutterTree_=e.getDeclutter()?ui()(9):null;this.dirty_=false;this.renderedRevision_=-1;this.renderedResolution_=NaN;this.renderedExtent_=Object(Z["j"])();this.renderedRenderOrder_=null;this.replayGroup_=null;this.replayGroupChanged=true;this.context=Object(K["a"])();Object(c["a"])(Ln["o"],G["a"].CLEAR,this.handleFontsChanged_,this)};Object(i["d"])(fr,Bn);fr["handles"]=function(t){return t.getType()===Mn["a"].VECTOR};fr["create"]=function(t,e){return new fr(e)};fr.prototype.disposeInternal=function(){Object(c["c"])(Ln["o"],G["a"].CLEAR,this.handleFontsChanged_,this);Bn.prototype.disposeInternal.call(this)};fr.prototype.composeFrame=function(t,e,n){var i=t.extent;var r=t.pixelRatio;var a=e.managed?t.skippedFeatureUids:{};var o=t.viewState;var s=o.projection;var l=o.rotation;var u=s.getExtent();var c=this.getLayer().getSource();var f=this.getTransform(t,0);this.preCompose(n,t,f);var h=e.extent;var d=h!==undefined;if(d){this.clip(n,t,h)}var p=this.replayGroup_;if(p&&!p.isEmpty()){if(this.declutterTree_){this.declutterTree_.clear()}var v=this.getLayer();var g=0;var m=0;var _=void 0;var y=e.opacity!==1;var b=v.hasListener(An["a"].RENDER);if(y||b){var w=n.canvas.width;var x=n.canvas.height;if(l){var S=Math.round(Math.sqrt(w*w+x*x));g=(S-w)/2;m=(S-x)/2;w=x=S}this.context.canvas.width=w;this.context.canvas.height=x;_=this.context}else{_=n}var C=_.globalAlpha;if(!y){_.globalAlpha=e.opacity}if(_!=n){_.translate(g,m)}var E=t.size[0]*r;var O=t.size[1]*r;Object(Ln["s"])(_,-l,E/2,O/2);p.replay(_,f,l,a);if(c.getWrapX()&&s.canWrapX()&&!Object(Z["g"])(u,i)){var T=i[0];var M=Object(Z["E"])(u);var I=0;var R=void 0;while(T<u[0]){--I;R=M*I;f=this.getTransform(t,R);p.replay(_,f,l,a);T+=M}I=0;T=i[2];while(T>u[2]){++I;R=M*I;f=this.getTransform(t,R);p.replay(_,f,l,a);T-=M}f=this.getTransform(t,0)}Object(Ln["s"])(_,l,E/2,O/2);if(_!=n){if(b){this.dispatchRenderEvent(_,t,f)}if(y){var N=n.globalAlpha;n.globalAlpha=e.opacity;n.drawImage(_.canvas,-g,-m);n.globalAlpha=N}else{n.drawImage(_.canvas,-g,-m)}_.translate(-g,-m)}if(!y){_.globalAlpha=C}}if(d){n.restore()}this.postCompose(n,t,e,f)};fr.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,a){if(!this.replayGroup_){return undefined}else{var o=e.viewState.resolution;var s=e.viewState.rotation;var l=this.getLayer();var u={};var c=this.replayGroup_.forEachFeatureAtCoordinate(t,o,s,n,{},function(t){var e=Object(i["c"])(t).toString();if(!(e in u)){u[e]=true;return r.call(a,t,l)}},null);return c}};fr.prototype.handleFontsChanged_=function(t){var e=this.getLayer();if(e.getVisible()&&this.replayGroup_){e.changed()}};fr.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()};fr.prototype.prepareFrame=function(t,e){var n=this.getLayer();var i=n.getSource();var r=t.viewHints[X["a"].ANIMATING];var a=t.viewHints[X["a"].INTERACTING];var o=n.getUpdateWhileAnimating();var s=n.getUpdateWhileInteracting();if(!this.dirty_&&!o&&r||!s&&a){return true}var l=t.extent;var u=t.viewState;var c=u.projection;var f=u.resolution;var h=t.pixelRatio;var d=n.getRevision();var p=n.getRenderBuffer();var v=n.getRenderOrder();if(v===undefined){v=Zi}var g=Object(Z["c"])(l,p*f);var m=u.projection.getExtent();if(i.getWrapX()&&u.projection.canWrapX()&&!Object(Z["g"])(m,t.extent)){var _=Object(Z["E"])(m);var y=Math.max(Object(Z["E"])(g)/2,_);g[0]=m[0]-y;g[2]=m[2]+y}if(!this.dirty_&&this.renderedResolution_==f&&this.renderedRevision_==d&&this.renderedRenderOrder_==v&&Object(Z["g"])(this.renderedExtent_,g)){this.replayGroupChanged=false;return true}this.replayGroup_=null;this.dirty_=false;var b=new qi(Ji(f,h),g,f,h,i.getOverlaps(),this.declutterTree_,n.getRenderBuffer());i.loadFeatures(g,f,c);var w=function(t){var e=void 0;var i=t.getStyleFunction()||n.getStyleFunction();if(i){e=i(t,f)}if(e){var r=this.renderFeature(t,f,h,e,b);this.dirty_=this.dirty_||r}}.bind(this);if(v){var x=[];i.forEachFeatureInExtent(g,function(t){x.push(t)},this);x.sort(v);for(var S=0,C=x.length;S<C;++S){w(x[S])}}else{i.forEachFeatureInExtent(g,w,this)}b.finish();this.renderedResolution_=f;this.renderedRevision_=d;this.renderedRenderOrder_=v;this.renderedExtent_=g;this.replayGroup_=b;this.replayGroupChanged=true;return true};fr.prototype.renderFeature=function(t,e,n,i,r){if(!i){return false}var a=false;if(Array.isArray(i)){for(var o=0,s=i.length;o<s;++o){a=er(r,t,i[o],Qi(e,n),this.handleStyleImageChange_,this)||a}}else{a=er(r,t,i,Qi(e,n),this.handleStyleImageChange_,this)}return a};var hr=fr;var dr={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"};var pr=n(85);var vr={image:[hi.POLYGON,hi.CIRCLE,hi.LINE_STRING,hi.IMAGE,hi.TEXT],hybrid:[hi.POLYGON,hi.LINE_STRING]};var gr={image:[hi.DEFAULT],hybrid:[hi.IMAGE,hi.TEXT,hi.DEFAULT],vector:Si};var mr=function t(e){this.context=null;si.call(this,e);this.declutterTree_=e.getDeclutter()?ui()(9):null;this.dirty_=false;this.renderedLayerRevision_;this.tmpTransform_=Object(et["c"])();this.zDirection=e.getRenderMode()==dr.VECTOR?1:0;Object(c["a"])(Ln["o"],G["a"].CLEAR,this.handleFontsChanged_,this)};Object(i["d"])(mr,si);mr["handles"]=function(t){return t.getType()===Mn["a"].VECTOR_TILE};mr["create"]=function(t,e){return new mr(e)};mr.prototype.disposeInternal=function(){Object(c["c"])(Ln["o"],G["a"].CLEAR,this.handleFontsChanged_,this);si.prototype.disposeInternal.call(this)};mr.prototype.prepareFrame=function(t,e){var n=this.getLayer();var i=n.getRevision();if(this.renderedLayerRevision_!=i){this.renderedTiles.length=0;var r=n.getRenderMode();if(!this.context&&r!=dr.VECTOR){this.context=Object(K["a"])()}if(this.context&&r==dr.VECTOR){this.context=null}}this.renderedLayerRevision_=i;return si.prototype.prepareFrame.apply(this,arguments)};mr.prototype.createReplayGroup_=function(t,e){var n=this;var i=this.getLayer();var r=e.pixelRatio;var a=e.viewState.projection;var o=i.getRevision();var s=i.getRenderOrder()||null;var l=t.getReplayState(i);if(!l.dirty&&l.renderedRevision==o&&l.renderedRenderOrder==s){return}var u=i.getSource();var c=u.getTileGrid();var f=u.getTileGridForProjection(a);var h=f.getResolution(t.tileCoord[0]);var d=f.getTileCoordExtent(t.wrappedTileCoord);var p={};var v=function e(o,f){var v=t.getTile(t.tileKeys[o]);if(v.getState()!=$["a"].LOADED){return"continue"}var g=v.tileCoord;var m=c.getTileCoordExtent(g);var _=Object(Z["B"])(d,m);var y=Object(Z["p"])(m,_)?null:Object(Z["c"])(_,i.getRenderBuffer()*h,n.tmpExtent);var b=v.getProjection();var w=false;if(!Object(Le["f"])(a,b)){w=true;v.setProjection(a)}l.dirty=false;var x=new qi(0,_,h,r,u.getOverlaps(),n.declutterTree_,i.getRenderBuffer());var S=Qi(h,r);var C=function t(e){var n=void 0;var r=e.getStyleFunction()||i.getStyleFunction();if(r){n=r(e,h)}if(n){var a=this.renderFeature(e,S,n,x);this.dirty_=this.dirty_||a;l.dirty=l.dirty||a}};var E=v.getFeatures();if(s&&s!==l.renderedRenderOrder){E.sort(s)}for(var O=0,T=E.length;O<T;++O){var M=E[O];if(w){if(b.getUnits()==pr["b"].TILE_PIXELS){b.setWorldExtent(m);b.setExtent(v.getExtent())}M.getGeometry().transform(b,a)}if(!y||Object(Z["F"])(y,M.getGeometry().getExtent())){C.call(n,M)}}x.finish();for(var I in x.getReplays()){p[I]=true}v.setReplayGroup(i,t.tileCoord.toString(),x)};for(var g=0,m=t.tileKeys.length;g<m;++g){var _=v(g,m);if(_==="continue")continue}l.renderedRevision=o;l.renderedRenderOrder=s};mr.prototype.drawTileImage=function(t,e,n,i,r,a,o,s,l){var u=t;this.createReplayGroup_(u,e);if(this.context){this.renderTileImage_(u,e,n);si.prototype.drawTileImage.apply(this,arguments)}};mr.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,a){var o=e.viewState.resolution;var s=e.viewState.rotation;n=n==undefined?0:n;var l=this.getLayer();var u={};var c=this.renderedTiles;var f=l.getSource();var h=f.getTileGridForProjection(e.viewState.projection);var d=void 0,p=void 0;var v=void 0,g=void 0,m=void 0;var _=void 0,y=void 0,b=void 0;for(v=0,g=c.length;v<g;++v){_=c[v];y=_.wrappedTileCoord;b=h.getTileCoordExtent(y,this.tmpExtent);d=Object(Z["c"])(b,n*o,d);if(!Object(Z["f"])(d,t)){continue}for(var w=0,x=_.tileKeys.length;w<x;++w){var S=_.getTile(_.tileKeys[w]);if(S.getState()!=$["a"].LOADED){continue}m=S.getReplayGroup(l,_.tileCoord.toString());p=p||m.forEachFeatureAtCoordinate(t,o,s,n,{},function(t){var e=Object(i["c"])(t).toString();if(!(e in u)){u[e]=true;return r.call(a,t,l)}},null)}}return p};mr.prototype.getReplayTransform_=function(t,e){var n=this.getLayer();var i=n.getSource();var r=i.getTileGrid();var a=t.tileCoord;var o=r.getResolution(a[0]);var s=e.viewState;var l=e.pixelRatio;var u=s.resolution/l;var c=r.getTileCoordExtent(a,this.tmpExtent);var f=s.center;var h=Object(Z["C"])(c);var d=e.size;var p=Math.round(l*d[0]/2);var v=Math.round(l*d[1]/2);return Object(et["b"])(this.tmpTransform_,p,v,o/u,o/u,s.rotation,(h[0]-f[0])/o,(f[1]-h[1])/o)};mr.prototype.handleFontsChanged_=function(t){var e=this.getLayer();if(e.getVisible()&&this.renderedLayerRevision_!==undefined){e.changed()}};mr.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()};mr.prototype.postCompose=function(t,e,n){var i=this.getLayer();var r=i.getDeclutter()?{}:null;var a=i.getSource();var o=i.getRenderMode();var s=gr[o];var l=e.pixelRatio;var u=e.viewState.rotation;var c=e.size;var f=void 0,h=void 0;if(u){f=Math.round(l*c[0]/2);h=Math.round(l*c[1]/2);Object(Ln["s"])(t,-u,f,h)}if(r){this.declutterTree_.clear()}var d=this.renderedTiles;var p=a.getTileGridForProjection(e.viewState.projection);var v=[];var g=[];for(var m=d.length-1;m>=0;--m){var _=d[m];if(_.getState()==$["a"].ABORT){continue}var y=_.tileCoord;var b=p.getTileCoordExtent(y,this.tmpExtent)[0]-p.getTileCoordExtent(_.wrappedTileCoord,this.tmpExtent)[0];var w=undefined;for(var x=0,S=_.tileKeys.length;x<S;++x){var C=_.getTile(_.tileKeys[x]);if(C.getState()!=$["a"].LOADED){continue}var E=C.getReplayGroup(i,y.toString());if(o!=dr.VECTOR&&!E.hasReplays(s)){continue}if(!w){w=this.getTransform(e,b)}var O=C.tileCoord[0];var T=E.getClipCoords(w);t.save();t.globalAlpha=n.opacity;for(var M=0,I=v.length;M<I;++M){var R=v[M];if(O<g[M]){t.beginPath();t.moveTo(T[0],T[1]);t.lineTo(T[2],T[3]);t.lineTo(T[4],T[5]);t.lineTo(T[6],T[7]);t.moveTo(R[6],R[7]);t.lineTo(R[4],R[5]);t.lineTo(R[2],R[3]);t.lineTo(R[0],R[1]);t.clip()}}E.replay(t,w,u,{},s,r);t.restore();v.push(T);g.push(O)}}if(r){Wi(r,t,u)}if(u){Object(Ln["s"])(t,u,f,h)}si.prototype.postCompose.apply(this,arguments)};mr.prototype.renderFeature=function(t,e,n,i){if(!n){return false}var r=false;if(Array.isArray(n)){for(var a=0,o=n.length;a<o;++a){r=er(i,t,n[a],e,this.handleStyleImageChange_,this)||r}}else{r=er(i,t,n,e,this.handleStyleImageChange_,this)}return r};mr.prototype.renderTileImage_=function(t,e,n){var i=this.getLayer();var r=t.getReplayState(i);var a=i.getRevision();var o=vr[i.getRenderMode()];if(o&&r.renderedTileRevision!==a){r.renderedTileRevision=a;var s=t.wrappedTileCoord;var l=s[0];var u=e.pixelRatio;var c=i.getSource();var f=c.getTileGridForProjection(e.viewState.projection);var h=f.getResolution(l);var d=t.getContext(i);var p=c.getTilePixelSize(l,u,e.viewState.projection);d.canvas.width=p[0];d.canvas.height=p[1];var v=f.getTileCoordExtent(s,this.tmpExtent);for(var g=0,m=t.tileKeys.length;g<m;++g){var _=t.getTile(t.tileKeys[g]);if(_.getState()!=$["a"].LOADED){continue}var y=u/h;var b=Object(et["e"])(this.tmpTransform_);Object(et["f"])(b,y,-y);Object(et["h"])(b,-v[0],-v[3]);var w=_.getReplayGroup(i,t.tileCoord.toString());w.replay(d,b,0,{},o)}}};var _r=mr;var yr=function t(e){e=Object(Y["a"])({},e);if(!e.controls){e.controls=Yt()}if(!e.interactions){e.interactions=xn()}rt.call(this,e)};Object(i["d"])(yr,rt);yr.prototype.createRenderer=function(){var t=new ri(this);t.registerLayerRenderers([Kn,si,hr,_r]);return t};var br=e["a"]=yr},function(t,e,n){var i,r;
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
(function(e,n){"use strict";if(typeof t==="object"&&typeof t.exports==="object"){t.exports=e.document?n(e,true):function(t){if(!t.document){throw new Error("jQuery requires a window with a document")}return n(t)}}else{n(e)}})(typeof window!=="undefined"?window:this,function(n,a){"use strict";var o=[];var s=n.document;var l=Object.getPrototypeOf;var u=o.slice;var c=o.concat;var f=o.push;var h=o.indexOf;var d={};var p=d.toString;var v=d.hasOwnProperty;var g=v.toString;var m=g.call(Object);var _={};var y=function t(e){return typeof e==="function"&&typeof e.nodeType!=="number"};var b=function t(e){return e!=null&&e===e.window};var w={type:true,src:true,noModule:true};function x(t,e,n){e=e||s;var i,r=e.createElement("script");r.text=t;if(n){for(i in w){if(n[i]){r[i]=n[i]}}}e.head.appendChild(r).parentNode.removeChild(r)}function S(t){if(t==null){return t+""}return typeof t==="object"||typeof t==="function"?d[p.call(t)]||"object":typeof t}var C="3.3.1",E=function(t,e){return new E.fn.init(t,e)},O=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;E.fn=E.prototype={jquery:C,constructor:E,length:0,toArray:function(){return u.call(this)},get:function(t){if(t==null){return u.call(this)}return t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);e.prevObject=this;return e},each:function(t){return E.each(this,t)},map:function(t){return this.pushStack(E.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:f,sort:o.sort,splice:o.splice};E.extend=E.fn.extend=function(){var t,e,n,i,r,a,o=arguments[0]||{},s=1,l=arguments.length,u=false;if(typeof o==="boolean"){u=o;o=arguments[s]||{};s++}if(typeof o!=="object"&&!y(o)){o={}}if(s===l){o=this;s--}for(;s<l;s++){if((t=arguments[s])!=null){for(e in t){n=o[e];i=t[e];if(o===i){continue}if(u&&i&&(E.isPlainObject(i)||(r=Array.isArray(i)))){if(r){r=false;a=n&&Array.isArray(n)?n:[]}else{a=n&&E.isPlainObject(n)?n:{}}o[e]=E.extend(u,a,i)}else if(i!==undefined){o[e]=i}}}}return o};E.extend({expando:"jQuery"+(C+Math.random()).replace(/\D/g,""),isReady:true,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;if(!t||p.call(t)!=="[object Object]"){return false}e=l(t);if(!e){return true}n=v.call(e,"constructor")&&e.constructor;return typeof n==="function"&&g.call(n)===m},isEmptyObject:function(t){var e;for(e in t){return false}return true},globalEval:function(t){x(t)},each:function(t,e){var n,i=0;if(T(t)){n=t.length;for(;i<n;i++){if(e.call(t[i],i,t[i])===false){break}}}else{for(i in t){if(e.call(t[i],i,t[i])===false){break}}}return t},trim:function(t){return t==null?"":(t+"").replace(O,"")},makeArray:function(t,e){var n=e||[];if(t!=null){if(T(Object(t))){E.merge(n,typeof t==="string"?[t]:t)}else{f.call(n,t)}}return n},inArray:function(t,e,n){return e==null?-1:h.call(e,t,n)},merge:function(t,e){var n=+e.length,i=0,r=t.length;for(;i<n;i++){t[r++]=e[i]}t.length=r;return t},grep:function(t,e,n){var i,r=[],a=0,o=t.length,s=!n;for(;a<o;a++){i=!e(t[a],a);if(i!==s){r.push(t[a])}}return r},map:function(t,e,n){var i,r,a=0,o=[];if(T(t)){i=t.length;for(;a<i;a++){r=e(t[a],a,n);if(r!=null){o.push(r)}}}else{for(a in t){r=e(t[a],a,n);if(r!=null){o.push(r)}}}return c.apply([],o)},guid:1,support:_});if(typeof Symbol==="function"){E.fn[Symbol.iterator]=o[Symbol.iterator]}E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){d["[object "+e+"]"]=e.toLowerCase()});function T(t){var e=!!t&&"length"in t&&t.length,n=S(t);if(y(t)||b(t)){return false}return n==="array"||e===0||typeof e==="number"&&e>0&&e-1 in t}var M=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(t){var e,n,i,r,a,o,s,l,u,c,f,h,d,p,v,g,m,_,y,b="sizzle"+1*new Date,w=t.document,x=0,S=0,C=ot(),E=ot(),O=ot(),T=function(t,e){if(t===e){f=true}return 0},M={}.hasOwnProperty,I=[],R=I.pop,N=I.push,A=I.push,L=I.slice,P=function(t,e){var n=0,i=t.length;for(;n<i;n++){if(t[n]===e){return n}}return-1},D="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",k="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+j+"*("+k+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+k+"))|)"+j+"*\\]",$=":("+k+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|"+".*"+")\\)|)",G=new RegExp(j+"+","g"),U=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),Y=new RegExp("^"+j+"*,"+j+"*"),V=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),H=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),z=new RegExp($),B=new RegExp("^"+k+"$"),W={ID:new RegExp("^#("+k+")"),CLASS:new RegExp("^\\.("+k+")"),TAG:new RegExp("^("+k+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+D+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},q=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),tt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){if(e){if(t==="\0"){return"�"}return t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" "}return"\\"+t},it=function(){h()},rt=_t(function(t){return t.disabled===true&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{A.apply(I=L.call(w.childNodes),w.childNodes);I[w.childNodes.length].nodeType}catch(t){A={apply:I.length?function(t,e){N.apply(t,L.call(e))}:function(t,e){var n=t.length,i=0;while(t[n++]=e[i++]){}t.length=n-1}}}function at(t,e,i,r){var a,s,u,c,f,p,m,_=e&&e.ownerDocument,x=e?e.nodeType:9;i=i||[];if(typeof t!=="string"||!t||x!==1&&x!==9&&x!==11){return i}if(!r){if((e?e.ownerDocument||e:w)!==d){h(e)}e=e||d;if(v){if(x!==11&&(f=Z.exec(t))){if(a=f[1]){if(x===9){if(u=e.getElementById(a)){if(u.id===a){i.push(u);return i}}else{return i}}else{if(_&&(u=_.getElementById(a))&&y(e,u)&&u.id===a){i.push(u);return i}}}else if(f[2]){A.apply(i,e.getElementsByTagName(t));return i}else if((a=f[3])&&n.getElementsByClassName&&e.getElementsByClassName){A.apply(i,e.getElementsByClassName(a));return i}}if(n.qsa&&!O[t+" "]&&(!g||!g.test(t))){if(x!==1){_=e;m=t}else if(e.nodeName.toLowerCase()!=="object"){if(c=e.getAttribute("id")){c=c.replace(et,nt)}else{e.setAttribute("id",c=b)}p=o(t);s=p.length;while(s--){p[s]="#"+c+" "+mt(p[s])}m=p.join(",");_=Q.test(t)&&vt(e.parentNode)||e}if(m){try{A.apply(i,_.querySelectorAll(m));return i}catch(t){}finally{if(c===b){e.removeAttribute("id")}}}}}}return l(t.replace(U,"$1"),e,i,r)}function ot(){var t=[];function e(n,r){if(t.push(n+" ")>i.cacheLength){delete e[t.shift()]}return e[n+" "]=r}return e}function st(t){t[b]=true;return t}function lt(t){var e=d.createElement("fieldset");try{return!!t(e)}catch(t){return false}finally{if(e.parentNode){e.parentNode.removeChild(e)}e=null}}function ut(t,e){var n=t.split("|"),r=n.length;while(r--){i.attrHandle[n[r]]=e}}function ct(t,e){var n=e&&t,i=n&&t.nodeType===1&&e.nodeType===1&&t.sourceIndex-e.sourceIndex;if(i){return i}if(n){while(n=n.nextSibling){if(n===e){return-1}}}return t?1:-1}function ft(t){return function(e){var n=e.nodeName.toLowerCase();return n==="input"&&e.type===t}}function ht(t){return function(e){var n=e.nodeName.toLowerCase();return(n==="input"||n==="button")&&e.type===t}}function dt(t){return function(e){if("form"in e){if(e.parentNode&&e.disabled===false){if("label"in e){if("label"in e.parentNode){return e.parentNode.disabled===t}else{return e.disabled===t}}return e.isDisabled===t||e.isDisabled!==!t&&rt(e)===t}return e.disabled===t}else if("label"in e){return e.disabled===t}return false}}function pt(t){return st(function(e){e=+e;return st(function(n,i){var r,a=t([],n.length,e),o=a.length;while(o--){if(n[r=a[o]]){n[r]=!(i[r]=n[r])}}})})}function vt(t){return t&&typeof t.getElementsByTagName!=="undefined"&&t}n=at.support={};a=at.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?e.nodeName!=="HTML":false};h=at.setDocument=function(t){var e,r,o=t?t.ownerDocument||t:w;if(o===d||o.nodeType!==9||!o.documentElement){return d}d=o;p=d.documentElement;v=!a(d);if(w!==d&&(r=d.defaultView)&&r.top!==r){if(r.addEventListener){r.addEventListener("unload",it,false)}else if(r.attachEvent){r.attachEvent("onunload",it)}}n.attributes=lt(function(t){t.className="i";return!t.getAttribute("className")});n.getElementsByTagName=lt(function(t){t.appendChild(d.createComment(""));return!t.getElementsByTagName("*").length});n.getElementsByClassName=K.test(d.getElementsByClassName);n.getById=lt(function(t){p.appendChild(t).id=b;return!d.getElementsByName||!d.getElementsByName(b).length});if(n.getById){i.filter["ID"]=function(t){var e=t.replace(J,tt);return function(t){return t.getAttribute("id")===e}};i.find["ID"]=function(t,e){if(typeof e.getElementById!=="undefined"&&v){var n=e.getElementById(t);return n?[n]:[]}}}else{i.filter["ID"]=function(t){var e=t.replace(J,tt);return function(t){var n=typeof t.getAttributeNode!=="undefined"&&t.getAttributeNode("id");return n&&n.value===e}};i.find["ID"]=function(t,e){if(typeof e.getElementById!=="undefined"&&v){var n,i,r,a=e.getElementById(t);if(a){n=a.getAttributeNode("id");if(n&&n.value===t){return[a]}r=e.getElementsByName(t);i=0;while(a=r[i++]){n=a.getAttributeNode("id");if(n&&n.value===t){return[a]}}}return[]}}}i.find["TAG"]=n.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName(t)}else if(n.qsa){return e.querySelectorAll(t)}}:function(t,e){var n,i=[],r=0,a=e.getElementsByTagName(t);if(t==="*"){while(n=a[r++]){if(n.nodeType===1){i.push(n)}}return i}return a};i.find["CLASS"]=n.getElementsByClassName&&function(t,e){if(typeof e.getElementsByClassName!=="undefined"&&v){return e.getElementsByClassName(t)}};m=[];g=[];if(n.qsa=K.test(d.querySelectorAll)){lt(function(t){p.appendChild(t).innerHTML="<a id='"+b+"'></a>"+"<select id='"+b+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(t.querySelectorAll("[msallowcapture^='']").length){g.push("[*^$]="+j+"*(?:''|\"\")")}if(!t.querySelectorAll("[selected]").length){g.push("\\["+j+"*(?:value|"+D+")")}if(!t.querySelectorAll("[id~="+b+"-]").length){g.push("~=")}if(!t.querySelectorAll(":checked").length){g.push(":checked")}if(!t.querySelectorAll("a#"+b+"+*").length){g.push(".#.+[+~]")}});lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var e=d.createElement("input");e.setAttribute("type","hidden");t.appendChild(e).setAttribute("name","D");if(t.querySelectorAll("[name=d]").length){g.push("name"+j+"*[*^$|!~]?=")}if(t.querySelectorAll(":enabled").length!==2){g.push(":enabled",":disabled")}p.appendChild(t).disabled=true;if(t.querySelectorAll(":disabled").length!==2){g.push(":enabled",":disabled")}t.querySelectorAll("*,:x");g.push(",.*:")})}if(n.matchesSelector=K.test(_=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)){lt(function(t){n.disconnectedMatch=_.call(t,"*");_.call(t,"[s!='']:x");m.push("!=",$)})}g=g.length&&new RegExp(g.join("|"));m=m.length&&new RegExp(m.join("|"));e=K.test(p.compareDocumentPosition);y=e||K.test(p.contains)?function(t,e){var n=t.nodeType===9?t.documentElement:t,i=e&&e.parentNode;return t===i||!!(i&&i.nodeType===1&&(n.contains?n.contains(i):t.compareDocumentPosition&&t.compareDocumentPosition(i)&16))}:function(t,e){if(e){while(e=e.parentNode){if(e===t){return true}}}return false};T=e?function(t,e){if(t===e){f=true;return 0}var i=!t.compareDocumentPosition-!e.compareDocumentPosition;if(i){return i}i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1;if(i&1||!n.sortDetached&&e.compareDocumentPosition(t)===i){if(t===d||t.ownerDocument===w&&y(w,t)){return-1}if(e===d||e.ownerDocument===w&&y(w,e)){return 1}return c?P(c,t)-P(c,e):0}return i&4?-1:1}:function(t,e){if(t===e){f=true;return 0}var n,i=0,r=t.parentNode,a=e.parentNode,o=[t],s=[e];if(!r||!a){return t===d?-1:e===d?1:r?-1:a?1:c?P(c,t)-P(c,e):0}else if(r===a){return ct(t,e)}n=t;while(n=n.parentNode){o.unshift(n)}n=e;while(n=n.parentNode){s.unshift(n)}while(o[i]===s[i]){i++}return i?ct(o[i],s[i]):o[i]===w?-1:s[i]===w?1:0};return d};at.matches=function(t,e){return at(t,null,null,e)};at.matchesSelector=function(t,e){if((t.ownerDocument||t)!==d){h(t)}e=e.replace(H,"='$1']");if(n.matchesSelector&&v&&!O[e+" "]&&(!m||!m.test(e))&&(!g||!g.test(e))){try{var i=_.call(t,e);if(i||n.disconnectedMatch||t.document&&t.document.nodeType!==11){return i}}catch(t){}}return at(e,d,null,[t]).length>0};at.contains=function(t,e){if((t.ownerDocument||t)!==d){h(t)}return y(t,e)};at.attr=function(t,e){if((t.ownerDocument||t)!==d){h(t)}var r=i.attrHandle[e.toLowerCase()],a=r&&M.call(i.attrHandle,e.toLowerCase())?r(t,e,!v):undefined;return a!==undefined?a:n.attributes||!v?t.getAttribute(e):(a=t.getAttributeNode(e))&&a.specified?a.value:null};at.escape=function(t){return(t+"").replace(et,nt)};at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)};at.uniqueSort=function(t){var e,i=[],r=0,a=0;f=!n.detectDuplicates;c=!n.sortStable&&t.slice(0);t.sort(T);if(f){while(e=t[a++]){if(e===t[a]){r=i.push(a)}}while(r--){t.splice(i[r],1)}}c=null;return t};r=at.getText=function(t){var e,n="",i=0,a=t.nodeType;if(!a){while(e=t[i++]){n+=r(e)}}else if(a===1||a===9||a===11){if(typeof t.textContent==="string"){return t.textContent}else{for(t=t.firstChild;t;t=t.nextSibling){n+=r(t)}}}else if(a===3||a===4){return t.nodeValue}return n};i=at.selectors={cacheLength:50,createPseudo:st,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){t[1]=t[1].replace(J,tt);t[3]=(t[3]||t[4]||t[5]||"").replace(J,tt);if(t[2]==="~="){t[3]=" "+t[3]+" "}return t.slice(0,4)},CHILD:function(t){t[1]=t[1].toLowerCase();if(t[1].slice(0,3)==="nth"){if(!t[3]){at.error(t[0])}t[4]=+(t[4]?t[5]+(t[6]||1):2*(t[3]==="even"||t[3]==="odd"));t[5]=+(t[7]+t[8]||t[3]==="odd")}else if(t[3]){at.error(t[0])}return t},PSEUDO:function(t){var e,n=!t[6]&&t[2];if(W["CHILD"].test(t[0])){return null}if(t[3]){t[2]=t[4]||t[5]||""}else if(n&&z.test(n)&&(e=o(n,true))&&(e=n.indexOf(")",n.length-e)-n.length)){t[0]=t[0].slice(0,e);t[2]=n.slice(0,e)}return t.slice(0,3)}},filter:{TAG:function(t){var e=t.replace(J,tt).toLowerCase();return t==="*"?function(){return true}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|"+j+")"+t+"("+j+"|$)"))&&C(t,function(t){return e.test(typeof t.className==="string"&&t.className||typeof t.getAttribute!=="undefined"&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=at.attr(i,t);if(r==null){return e==="!="}if(!e){return true}r+="";return e==="="?r===n:e==="!="?r!==n:e==="^="?n&&r.indexOf(n)===0:e==="*="?n&&r.indexOf(n)>-1:e==="$="?n&&r.slice(-n.length)===n:e==="~="?(" "+r.replace(G," ")+" ").indexOf(n)>-1:e==="|="?r===n||r.slice(0,n.length+1)===n+"-":false}},CHILD:function(t,e,n,i,r){var a=t.slice(0,3)!=="nth",o=t.slice(-4)!=="last",s=e==="of-type";return i===1&&r===0?function(t){return!!t.parentNode}:function(e,n,l){var u,c,f,h,d,p,v=a!==o?"nextSibling":"previousSibling",g=e.parentNode,m=s&&e.nodeName.toLowerCase(),_=!l&&!s,y=false;if(g){if(a){while(v){h=e;while(h=h[v]){if(s?h.nodeName.toLowerCase()===m:h.nodeType===1){return false}}p=v=t==="only"&&!p&&"nextSibling"}return true}p=[o?g.firstChild:g.lastChild];if(o&&_){h=g;f=h[b]||(h[b]={});c=f[h.uniqueID]||(f[h.uniqueID]={});u=c[t]||[];d=u[0]===x&&u[1];y=d&&u[2];h=d&&g.childNodes[d];while(h=++d&&h&&h[v]||(y=d=0)||p.pop()){if(h.nodeType===1&&++y&&h===e){c[t]=[x,d,y];break}}}else{if(_){h=e;f=h[b]||(h[b]={});c=f[h.uniqueID]||(f[h.uniqueID]={});u=c[t]||[];d=u[0]===x&&u[1];y=d}if(y===false){while(h=++d&&h&&h[v]||(y=d=0)||p.pop()){if((s?h.nodeName.toLowerCase()===m:h.nodeType===1)&&++y){if(_){f=h[b]||(h[b]={});c=f[h.uniqueID]||(f[h.uniqueID]={});c[t]=[x,y]}if(h===e){break}}}}}y-=r;return y===i||y%i===0&&y/i>=0}}},PSEUDO:function(t,e){var n,r=i.pseudos[t]||i.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);if(r[b]){return r(e)}if(r.length>1){n=[t,t,"",e];return i.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,n){var i,a=r(t,e),o=a.length;while(o--){i=P(t,a[o]);t[i]=!(n[i]=a[o])}}):function(t){return r(t,0,n)}}return r}},pseudos:{not:st(function(t){var e=[],n=[],i=s(t.replace(U,"$1"));return i[b]?st(function(t,e,n,r){var a,o=i(t,null,r,[]),s=t.length;while(s--){if(a=o[s]){t[s]=!(e[s]=a)}}}):function(t,r,a){e[0]=t;i(e,null,a,n);e[0]=null;return!n.pop()}}),has:st(function(t){return function(e){return at(t,e).length>0}}),contains:st(function(t){t=t.replace(J,tt);return function(e){return(e.textContent||e.innerText||r(e)).indexOf(t)>-1}}),lang:st(function(t){if(!B.test(t||"")){at.error("unsupported lang: "+t)}t=t.replace(J,tt).toLowerCase();return function(e){var n;do{if(n=v?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang")){n=n.toLowerCase();return n===t||n.indexOf(t+"-")===0}}while((e=e.parentNode)&&e.nodeType===1);return false}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:dt(false),disabled:dt(true),checked:function(t){var e=t.nodeName.toLowerCase();return e==="input"&&!!t.checked||e==="option"&&!!t.selected},selected:function(t){if(t.parentNode){t.parentNode.selectedIndex}return t.selected===true},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling){if(t.nodeType<6){return false}}return true},parent:function(t){return!i.pseudos["empty"](t)},header:function(t){return X.test(t.nodeName)},input:function(t){return q.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return e==="input"&&t.type==="button"||e==="button"},text:function(t){var e;return t.nodeName.toLowerCase()==="input"&&t.type==="text"&&((e=t.getAttribute("type"))==null||e.toLowerCase()==="text")},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,n){return[n<0?n+e:n]}),even:pt(function(t,e){var n=0;for(;n<e;n+=2){t.push(n)}return t}),odd:pt(function(t,e){var n=1;for(;n<e;n+=2){t.push(n)}return t}),lt:pt(function(t,e,n){var i=n<0?n+e:n;for(;--i>=0;){t.push(i)}return t}),gt:pt(function(t,e,n){var i=n<0?n+e:n;for(;++i<e;){t.push(i)}return t})}};i.pseudos["nth"]=i.pseudos["eq"];for(e in{radio:true,checkbox:true,file:true,password:true,image:true}){i.pseudos[e]=ft(e)}for(e in{submit:true,reset:true}){i.pseudos[e]=ht(e)}function gt(){}gt.prototype=i.filters=i.pseudos;i.setFilters=new gt;o=at.tokenize=function(t,e){var n,r,a,o,s,l,u,c=E[t+" "];if(c){return e?0:c.slice(0)}s=t;l=[];u=i.preFilter;while(s){if(!n||(r=Y.exec(s))){if(r){s=s.slice(r[0].length)||s}l.push(a=[])}n=false;if(r=V.exec(s)){n=r.shift();a.push({value:n,type:r[0].replace(U," ")});s=s.slice(n.length)}for(o in i.filter){if((r=W[o].exec(s))&&(!u[o]||(r=u[o](r)))){n=r.shift();a.push({value:n,type:o,matches:r});s=s.slice(n.length)}}if(!n){break}}return e?s.length:s?at.error(t):E(t,l).slice(0)};function mt(t){var e=0,n=t.length,i="";for(;e<n;e++){i+=t[e].value}return i}function _t(t,e,n){var i=e.dir,r=e.next,a=r||i,o=n&&a==="parentNode",s=S++;return e.first?function(e,n,r){while(e=e[i]){if(e.nodeType===1||o){return t(e,n,r)}}return false}:function(e,n,l){var u,c,f,h=[x,s];if(l){while(e=e[i]){if(e.nodeType===1||o){if(t(e,n,l)){return true}}}}else{while(e=e[i]){if(e.nodeType===1||o){f=e[b]||(e[b]={});c=f[e.uniqueID]||(f[e.uniqueID]={});if(r&&r===e.nodeName.toLowerCase()){e=e[i]||e}else if((u=c[a])&&u[0]===x&&u[1]===s){return h[2]=u[2]}else{c[a]=h;if(h[2]=t(e,n,l)){return true}}}}}return false}}function yt(t){return t.length>1?function(e,n,i){var r=t.length;while(r--){if(!t[r](e,n,i)){return false}}return true}:t[0]}function bt(t,e,n){var i=0,r=e.length;for(;i<r;i++){at(t,e[i],n)}return n}function wt(t,e,n,i,r){var a,o=[],s=0,l=t.length,u=e!=null;for(;s<l;s++){if(a=t[s]){if(!n||n(a,i,r)){o.push(a);if(u){e.push(s)}}}}return o}function xt(t,e,n,i,r,a){if(i&&!i[b]){i=xt(i)}if(r&&!r[b]){r=xt(r,a)}return st(function(a,o,s,l){var u,c,f,h=[],d=[],p=o.length,v=a||bt(e||"*",s.nodeType?[s]:s,[]),g=t&&(a||!e)?wt(v,h,t,s,l):v,m=n?r||(a?t:p||i)?[]:o:g;if(n){n(g,m,s,l)}if(i){u=wt(m,d);i(u,[],s,l);c=u.length;while(c--){if(f=u[c]){m[d[c]]=!(g[d[c]]=f)}}}if(a){if(r||t){if(r){u=[];c=m.length;while(c--){if(f=m[c]){u.push(g[c]=f)}}r(null,m=[],u,l)}c=m.length;while(c--){if((f=m[c])&&(u=r?P(a,f):h[c])>-1){a[u]=!(o[u]=f)}}}}else{m=wt(m===o?m.splice(p,m.length):m);if(r){r(null,o,m,l)}else{A.apply(o,m)}}})}function St(t){var e,n,r,a=t.length,o=i.relative[t[0].type],s=o||i.relative[" "],l=o?1:0,c=_t(function(t){return t===e},s,true),f=_t(function(t){return P(e,t)>-1},s,true),h=[function(t,n,i){var r=!o&&(i||n!==u)||((e=n).nodeType?c(t,n,i):f(t,n,i));e=null;return r}];for(;l<a;l++){if(n=i.relative[t[l].type]){h=[_t(yt(h),n)]}else{n=i.filter[t[l].type].apply(null,t[l].matches);if(n[b]){r=++l;for(;r<a;r++){if(i.relative[t[r].type]){break}}return xt(l>1&&yt(h),l>1&&mt(t.slice(0,l-1).concat({value:t[l-2].type===" "?"*":""})).replace(U,"$1"),n,l<r&&St(t.slice(l,r)),r<a&&St(t=t.slice(r)),r<a&&mt(t))}h.push(n)}}return yt(h)}function Ct(t,e){var n=e.length>0,r=t.length>0,a=function(a,o,s,l,c){var f,p,g,m=0,_="0",y=a&&[],b=[],w=u,S=a||r&&i.find["TAG"]("*",c),C=x+=w==null?1:Math.random()||.1,E=S.length;if(c){u=o===d||o||c}for(;_!==E&&(f=S[_])!=null;_++){if(r&&f){p=0;if(!o&&f.ownerDocument!==d){h(f);s=!v}while(g=t[p++]){if(g(f,o||d,s)){l.push(f);break}}if(c){x=C}}if(n){if(f=!g&&f){m--}if(a){y.push(f)}}}m+=_;if(n&&_!==m){p=0;while(g=e[p++]){g(y,b,o,s)}if(a){if(m>0){while(_--){if(!(y[_]||b[_])){b[_]=R.call(l)}}}b=wt(b)}A.apply(l,b);if(c&&!a&&b.length>0&&m+e.length>1){at.uniqueSort(l)}}if(c){x=C;u=w}return y};return n?st(a):a}s=at.compile=function(t,e){var n,i=[],r=[],a=O[t+" "];if(!a){if(!e){e=o(t)}n=e.length;while(n--){a=St(e[n]);if(a[b]){i.push(a)}else{r.push(a)}}a=O(t,Ct(r,i));a.selector=t}return a};l=at.select=function(t,e,n,r){var a,l,u,c,f,h=typeof t==="function"&&t,d=!r&&o(t=h.selector||t);n=n||[];if(d.length===1){l=d[0]=d[0].slice(0);if(l.length>2&&(u=l[0]).type==="ID"&&e.nodeType===9&&v&&i.relative[l[1].type]){e=(i.find["ID"](u.matches[0].replace(J,tt),e)||[])[0];if(!e){return n}else if(h){e=e.parentNode}t=t.slice(l.shift().value.length)}a=W["needsContext"].test(t)?0:l.length;while(a--){u=l[a];if(i.relative[c=u.type]){break}if(f=i.find[c]){if(r=f(u.matches[0].replace(J,tt),Q.test(l[0].type)&&vt(e.parentNode)||e)){l.splice(a,1);t=r.length&&mt(l);if(!t){A.apply(n,r);return n}break}}}}(h||s(t,d))(r,e,!v,n,!e||Q.test(t)&&vt(e.parentNode)||e);return n};n.sortStable=b.split("").sort(T).join("")===b;n.detectDuplicates=!!f;h();n.sortDetached=lt(function(t){return t.compareDocumentPosition(d.createElement("fieldset"))&1});if(!lt(function(t){t.innerHTML="<a href='#'></a>";return t.firstChild.getAttribute("href")==="#"})){ut("type|href|height|width",function(t,e,n){if(!n){return t.getAttribute(e,e.toLowerCase()==="type"?1:2)}})}if(!n.attributes||!lt(function(t){t.innerHTML="<input/>";t.firstChild.setAttribute("value","");return t.firstChild.getAttribute("value")===""})){ut("value",function(t,e,n){if(!n&&t.nodeName.toLowerCase()==="input"){return t.defaultValue}})}if(!lt(function(t){return t.getAttribute("disabled")==null})){ut(D,function(t,e,n){var i;if(!n){return t[e]===true?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}})}return at}(n);E.find=M;E.expr=M.selectors;E.expr[":"]=E.expr.pseudos;E.uniqueSort=E.unique=M.uniqueSort;E.text=M.getText;E.isXMLDoc=M.isXML;E.contains=M.contains;E.escapeSelector=M.escape;var I=function(t,e,n){var i=[],r=n!==undefined;while((t=t[e])&&t.nodeType!==9){if(t.nodeType===1){if(r&&E(t).is(n)){break}i.push(t)}}return i};var R=function(t,e){var n=[];for(;t;t=t.nextSibling){if(t.nodeType===1&&t!==e){n.push(t)}}return n};var N=E.expr.match.needsContext;function A(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var L=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(t,e,n){if(y(e)){return E.grep(t,function(t,i){return!!e.call(t,i,t)!==n})}if(e.nodeType){return E.grep(t,function(t){return t===e!==n})}if(typeof e!=="string"){return E.grep(t,function(t){return h.call(e,t)>-1!==n})}return E.filter(e,t,n)}E.filter=function(t,e,n){var i=e[0];if(n){t=":not("+t+")"}if(e.length===1&&i.nodeType===1){return E.find.matchesSelector(i,t)?[i]:[]}return E.find.matches(t,E.grep(e,function(t){return t.nodeType===1}))};E.fn.extend({find:function(t){var e,n,i=this.length,r=this;if(typeof t!=="string"){return this.pushStack(E(t).filter(function(){for(e=0;e<i;e++){if(E.contains(r[e],this)){return true}}}))}n=this.pushStack([]);for(e=0;e<i;e++){E.find(t,r[e],n)}return i>1?E.uniqueSort(n):n},filter:function(t){return this.pushStack(P(this,t||[],false))},not:function(t){return this.pushStack(P(this,t||[],true))},is:function(t){return!!P(this,typeof t==="string"&&N.test(t)?E(t):t||[],false).length}});var D,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,k=E.fn.init=function(t,e,n){var i,r;if(!t){return this}n=n||D;if(typeof t==="string"){if(t[0]==="<"&&t[t.length-1]===">"&&t.length>=3){i=[null,t,null]}else{i=j.exec(t)}if(i&&(i[1]||!e)){if(i[1]){e=e instanceof E?e[0]:e;E.merge(this,E.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:s,true));if(L.test(i[1])&&E.isPlainObject(e)){for(i in e){if(y(this[i])){this[i](e[i])}else{this.attr(i,e[i])}}}return this}else{r=s.getElementById(i[2]);if(r){this[0]=r;this.length=1}return this}}else if(!e||e.jquery){return(e||n).find(t)}else{return this.constructor(e).find(t)}}else if(t.nodeType){this[0]=t;this.length=1;return this}else if(y(t)){return n.ready!==undefined?n.ready(t):t(E)}return E.makeArray(t,this)};k.prototype=E.fn;D=E(s);var F=/^(?:parents|prev(?:Until|All))/,$={children:true,contents:true,next:true,prev:true};E.fn.extend({has:function(t){var e=E(t,this),n=e.length;return this.filter(function(){var t=0;for(;t<n;t++){if(E.contains(this,e[t])){return true}}})},closest:function(t,e){var n,i=0,r=this.length,a=[],o=typeof t!=="string"&&E(t);if(!N.test(t)){for(;i<r;i++){for(n=this[i];n&&n!==e;n=n.parentNode){if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&E.find.matchesSelector(n,t))){a.push(n);break}}}}return this.pushStack(a.length>1?E.uniqueSort(a):a)},index:function(t){if(!t){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof t==="string"){return h.call(E(t),this[0])}return h.call(this,t.jquery?t[0]:t)},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(t==null?this.prevObject:this.prevObject.filter(t))}});function G(t,e){while((t=t[e])&&t.nodeType!==1){}return t}E.each({parent:function(t){var e=t.parentNode;return e&&e.nodeType!==11?e:null},parents:function(t){return I(t,"parentNode")},parentsUntil:function(t,e,n){return I(t,"parentNode",n)},next:function(t){return G(t,"nextSibling")},prev:function(t){return G(t,"previousSibling")},nextAll:function(t){return I(t,"nextSibling")},prevAll:function(t){return I(t,"previousSibling")},nextUntil:function(t,e,n){return I(t,"nextSibling",n)},prevUntil:function(t,e,n){return I(t,"previousSibling",n)},siblings:function(t){return R((t.parentNode||{}).firstChild,t)},children:function(t){return R(t.firstChild)},contents:function(t){if(A(t,"iframe")){return t.contentDocument}if(A(t,"template")){t=t.content||t}return E.merge([],t.childNodes)}},function(t,e){E.fn[t]=function(n,i){var r=E.map(this,e,n);if(t.slice(-5)!=="Until"){i=n}if(i&&typeof i==="string"){r=E.filter(i,r)}if(this.length>1){if(!$[t]){E.uniqueSort(r)}if(F.test(t)){r.reverse()}}return this.pushStack(r)}});var U=/[^\x20\t\r\n\f]+/g;function Y(t){var e={};E.each(t.match(U)||[],function(t,n){e[n]=true});return e}E.Callbacks=function(t){t=typeof t==="string"?Y(t):E.extend({},t);var e,n,i,r,a=[],o=[],s=-1,l=function(){r=r||t.once;i=e=true;for(;o.length;s=-1){n=o.shift();while(++s<a.length){if(a[s].apply(n[0],n[1])===false&&t.stopOnFalse){s=a.length;n=false}}}if(!t.memory){n=false}e=false;if(r){if(n){a=[]}else{a=""}}},u={add:function(){if(a){if(n&&!e){s=a.length-1;o.push(n)}(function e(n){E.each(n,function(n,i){if(y(i)){if(!t.unique||!u.has(i)){a.push(i)}}else if(i&&i.length&&S(i)!=="string"){e(i)}})})(arguments);if(n&&!e){l()}}return this},remove:function(){E.each(arguments,function(t,e){var n;while((n=E.inArray(e,a,n))>-1){a.splice(n,1);if(n<=s){s--}}});return this},has:function(t){return t?E.inArray(t,a)>-1:a.length>0},empty:function(){if(a){a=[]}return this},disable:function(){r=o=[];a=n="";return this},disabled:function(){return!a},lock:function(){r=o=[];if(!n&&!e){a=n=""}return this},locked:function(){return!!r},fireWith:function(t,n){if(!r){n=n||[];n=[t,n.slice?n.slice():n];o.push(n);if(!e){l()}}return this},fire:function(){u.fireWith(this,arguments);return this},fired:function(){return!!i}};return u};function V(t){return t}function H(t){throw t}function z(t,e,n,i){var r;try{if(t&&y(r=t.promise)){r.call(t).done(e).fail(n)}else if(t&&y(r=t.then)){r.call(t,e,n)}else{e.apply(undefined,[t].slice(i))}}catch(t){n.apply(undefined,[t])}}E.extend({Deferred:function(t){var e=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){a.done(arguments).fail(arguments);return this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return E.Deferred(function(n){E.each(e,function(e,i){var r=y(t[i[4]])&&t[i[4]];a[i[1]](function(){var t=r&&r.apply(this,arguments);if(t&&y(t.promise)){t.promise().progress(n.notify).done(n.resolve).fail(n.reject)}else{n[i[0]+"With"](this,r?[t]:arguments)}})});t=null}).promise()},then:function(t,i,r){var a=0;function o(t,e,i,r){return function(){var s=this,l=arguments,u=function(){var n,u;if(t<a){return}n=i.apply(s,l);if(n===e.promise()){throw new TypeError("Thenable self-resolution")}u=n&&(typeof n==="object"||typeof n==="function")&&n.then;if(y(u)){if(r){u.call(n,o(a,e,V,r),o(a,e,H,r))}else{a++;u.call(n,o(a,e,V,r),o(a,e,H,r),o(a,e,V,e.notifyWith))}}else{if(i!==V){s=undefined;l=[n]}(r||e.resolveWith)(s,l)}},c=r?u:function(){try{u()}catch(n){if(E.Deferred.exceptionHook){E.Deferred.exceptionHook(n,c.stackTrace)}if(t+1>=a){if(i!==H){s=undefined;l=[n]}e.rejectWith(s,l)}}};if(t){c()}else{if(E.Deferred.getStackHook){c.stackTrace=E.Deferred.getStackHook()}n.setTimeout(c)}}}return E.Deferred(function(n){e[0][3].add(o(0,n,y(r)?r:V,n.notifyWith));e[1][3].add(o(0,n,y(t)?t:V));e[2][3].add(o(0,n,y(i)?i:H))}).promise()},promise:function(t){return t!=null?E.extend(t,r):r}},a={};E.each(e,function(t,n){var o=n[2],s=n[5];r[n[1]]=o.add;if(s){o.add(function(){i=s},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock)}o.add(n[3].fire);a[n[0]]=function(){a[n[0]+"With"](this===a?undefined:this,arguments);return this};a[n[0]+"With"]=o.fireWith});r.promise(a);if(t){t.call(a,a)}return a},when:function(t){var e=arguments.length,n=e,i=Array(n),r=u.call(arguments),a=E.Deferred(),o=function(t){return function(n){i[t]=this;r[t]=arguments.length>1?u.call(arguments):n;if(!--e){a.resolveWith(i,r)}}};if(e<=1){z(t,a.done(o(n)).resolve,a.reject,!e);if(a.state()==="pending"||y(r[n]&&r[n].then)){return a.then()}}while(n--){z(r[n],o(n),a.reject)}return a.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){if(n.console&&n.console.warn&&t&&B.test(t.name)){n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)}};E.readyException=function(t){n.setTimeout(function(){throw t})};var W=E.Deferred();E.fn.ready=function(t){W.then(t).catch(function(t){E.readyException(t)});return this};E.extend({isReady:false,readyWait:1,ready:function(t){if(t===true?--E.readyWait:E.isReady){return}E.isReady=true;if(t!==true&&--E.readyWait>0){return}W.resolveWith(s,[E])}});E.ready.then=W.then;function q(){s.removeEventListener("DOMContentLoaded",q);n.removeEventListener("load",q);E.ready()}if(s.readyState==="complete"||s.readyState!=="loading"&&!s.documentElement.doScroll){n.setTimeout(E.ready)}else{s.addEventListener("DOMContentLoaded",q);n.addEventListener("load",q)}var X=function(t,e,n,i,r,a,o){var s=0,l=t.length,u=n==null;if(S(n)==="object"){r=true;for(s in n){X(t,e,s,n[s],true,a,o)}}else if(i!==undefined){r=true;if(!y(i)){o=true}if(u){if(o){e.call(t,i);e=null}else{u=e;e=function(t,e,n){return u.call(E(t),n)}}}if(e){for(;s<l;s++){e(t[s],n,o?i:i.call(t[s],s,e(t[s],n)))}}}if(r){return t}if(u){return e.call(t)}return l?e(t[0],n):a};var K=/^-ms-/,Z=/-([a-z])/g;function Q(t,e){return e.toUpperCase()}function J(t){return t.replace(K,"ms-").replace(Z,Q)}var tt=function(t){return t.nodeType===1||t.nodeType===9||!+t.nodeType};function et(){this.expando=E.expando+et.uid++}et.uid=1;et.prototype={cache:function(t){var e=t[this.expando];if(!e){e={};if(tt(t)){if(t.nodeType){t[this.expando]=e}else{Object.defineProperty(t,this.expando,{value:e,configurable:true})}}}return e},set:function(t,e,n){var i,r=this.cache(t);if(typeof e==="string"){r[J(e)]=n}else{for(i in e){r[J(i)]=e[i]}}return r},get:function(t,e){return e===undefined?this.cache(t):t[this.expando]&&t[this.expando][J(e)]},access:function(t,e,n){if(e===undefined||e&&typeof e==="string"&&n===undefined){return this.get(t,e)}this.set(t,e,n);return n!==undefined?n:e},remove:function(t,e){var n,i=t[this.expando];if(i===undefined){return}if(e!==undefined){if(Array.isArray(e)){e=e.map(J)}else{e=J(e);e=e in i?[e]:e.match(U)||[]}n=e.length;while(n--){delete i[e[n]]}}if(e===undefined||E.isEmptyObject(i)){if(t.nodeType){t[this.expando]=undefined}else{delete t[this.expando]}}},hasData:function(t){var e=t[this.expando];return e!==undefined&&!E.isEmptyObject(e)}};var nt=new et;var it=new et;var rt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,at=/[A-Z]/g;function ot(t){if(t==="true"){return true}if(t==="false"){return false}if(t==="null"){return null}if(t===+t+""){return+t}if(rt.test(t)){return JSON.parse(t)}return t}function st(t,e,n){var i;if(n===undefined&&t.nodeType===1){i="data-"+e.replace(at,"-$&").toLowerCase();n=t.getAttribute(i);if(typeof n==="string"){try{n=ot(n)}catch(t){}it.set(t,e,n)}else{n=undefined}}return n}E.extend({hasData:function(t){return it.hasData(t)||nt.hasData(t)},data:function(t,e,n){return it.access(t,e,n)},removeData:function(t,e){it.remove(t,e)},_data:function(t,e,n){return nt.access(t,e,n)},_removeData:function(t,e){nt.remove(t,e)}});E.fn.extend({data:function(t,e){var n,i,r,a=this[0],o=a&&a.attributes;if(t===undefined){if(this.length){r=it.get(a);if(a.nodeType===1&&!nt.get(a,"hasDataAttrs")){n=o.length;while(n--){if(o[n]){i=o[n].name;if(i.indexOf("data-")===0){i=J(i.slice(5));st(a,i,r[i])}}}nt.set(a,"hasDataAttrs",true)}}return r}if(typeof t==="object"){return this.each(function(){it.set(this,t)})}return X(this,function(e){var n;if(a&&e===undefined){n=it.get(a,t);if(n!==undefined){return n}n=st(a,t);if(n!==undefined){return n}return}this.each(function(){it.set(this,t,e)})},null,e,arguments.length>1,null,true)},removeData:function(t){return this.each(function(){it.remove(this,t)})}});E.extend({queue:function(t,e,n){var i;if(t){e=(e||"fx")+"queue";i=nt.get(t,e);if(n){if(!i||Array.isArray(n)){i=nt.access(t,e,E.makeArray(n))}else{i.push(n)}}return i||[]}},dequeue:function(t,e){e=e||"fx";var n=E.queue(t,e),i=n.length,r=n.shift(),a=E._queueHooks(t,e),o=function(){E.dequeue(t,e)};if(r==="inprogress"){r=n.shift();i--}if(r){if(e==="fx"){n.unshift("inprogress")}delete a.stop;r.call(t,o,a)}if(!i&&a){a.empty.fire()}},_queueHooks:function(t,e){var n=e+"queueHooks";return nt.get(t,n)||nt.access(t,n,{empty:E.Callbacks("once memory").add(function(){nt.remove(t,[e+"queue",n])})})}});E.fn.extend({queue:function(t,e){var n=2;if(typeof t!=="string"){e=t;t="fx";n--}if(arguments.length<n){return E.queue(this[0],t)}return e===undefined?this:this.each(function(){var n=E.queue(this,t,e);E._queueHooks(this,t);if(t==="fx"&&n[0]!=="inprogress"){E.dequeue(this,t)}})},dequeue:function(t){return this.each(function(){E.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=E.Deferred(),a=this,o=this.length,s=function(){if(!--i){r.resolveWith(a,[a])}};if(typeof t!=="string"){e=t;t=undefined}t=t||"fx";while(o--){n=nt.get(a[o],t+"queueHooks");if(n&&n.empty){i++;n.empty.add(s)}}s();return r.promise(e)}});var lt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var ut=new RegExp("^(?:([+-])=|)("+lt+")([a-z%]*)$","i");var ct=["Top","Right","Bottom","Left"];var ft=function(t,e){t=e||t;return t.style.display==="none"||t.style.display===""&&E.contains(t.ownerDocument,t)&&E.css(t,"display")==="none"};var ht=function(t,e,n,i){var r,a,o={};for(a in e){o[a]=t.style[a];t.style[a]=e[a]}r=n.apply(t,i||[]);for(a in e){t.style[a]=o[a]}return r};function dt(t,e,n,i){var r,a,o=20,s=i?function(){return i.cur()}:function(){return E.css(t,e,"")},l=s(),u=n&&n[3]||(E.cssNumber[e]?"":"px"),c=(E.cssNumber[e]||u!=="px"&&+l)&&ut.exec(E.css(t,e));if(c&&c[3]!==u){l=l/2;u=u||c[3];c=+l||1;while(o--){E.style(t,e,c+u);if((1-a)*(1-(a=s()/l||.5))<=0){o=0}c=c/a}c=c*2;E.style(t,e,c+u);n=n||[]}if(n){c=+c||+l||0;r=n[1]?c+(n[1]+1)*n[2]:+n[2];if(i){i.unit=u;i.start=c;i.end=r}}return r}var pt={};function vt(t){var e,n=t.ownerDocument,i=t.nodeName,r=pt[i];if(r){return r}e=n.body.appendChild(n.createElement(i));r=E.css(e,"display");e.parentNode.removeChild(e);if(r==="none"){r="block"}pt[i]=r;return r}function gt(t,e){var n,i,r=[],a=0,o=t.length;for(;a<o;a++){i=t[a];if(!i.style){continue}n=i.style.display;if(e){if(n==="none"){r[a]=nt.get(i,"display")||null;if(!r[a]){i.style.display=""}}if(i.style.display===""&&ft(i)){r[a]=vt(i)}}else{if(n!=="none"){r[a]="none";nt.set(i,"display",n)}}}for(a=0;a<o;a++){if(r[a]!=null){t[a].style.display=r[a]}}return t}E.fn.extend({show:function(){return gt(this,true)},hide:function(){return gt(this)},toggle:function(t){if(typeof t==="boolean"){return t?this.show():this.hide()}return this.each(function(){if(ft(this)){E(this).show()}else{E(this).hide()}})}});var mt=/^(?:checkbox|radio)$/i;var _t=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;var yt=/^$|^module$|\/(?:java|ecma)script/i;var bt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};bt.optgroup=bt.option;bt.tbody=bt.tfoot=bt.colgroup=bt.caption=bt.thead;bt.th=bt.td;function wt(t,e){var n;if(typeof t.getElementsByTagName!=="undefined"){n=t.getElementsByTagName(e||"*")}else if(typeof t.querySelectorAll!=="undefined"){n=t.querySelectorAll(e||"*")}else{n=[]}if(e===undefined||e&&A(t,e)){return E.merge([t],n)}return n}function xt(t,e){var n=0,i=t.length;for(;n<i;n++){nt.set(t[n],"globalEval",!e||nt.get(e[n],"globalEval"))}}var St=/<|&#?\w+;/;function Ct(t,e,n,i,r){var a,o,s,l,u,c,f=e.createDocumentFragment(),h=[],d=0,p=t.length;for(;d<p;d++){a=t[d];if(a||a===0){if(S(a)==="object"){E.merge(h,a.nodeType?[a]:a)}else if(!St.test(a)){h.push(e.createTextNode(a))}else{o=o||f.appendChild(e.createElement("div"));s=(_t.exec(a)||["",""])[1].toLowerCase();l=bt[s]||bt._default;o.innerHTML=l[1]+E.htmlPrefilter(a)+l[2];c=l[0];while(c--){o=o.lastChild}E.merge(h,o.childNodes);o=f.firstChild;o.textContent=""}}}f.textContent="";d=0;while(a=h[d++]){if(i&&E.inArray(a,i)>-1){if(r){r.push(a)}continue}u=E.contains(a.ownerDocument,a);o=wt(f.appendChild(a),"script");if(u){xt(o)}if(n){c=0;while(a=o[c++]){if(yt.test(a.type||"")){n.push(a)}}}}return f}(function(){var t=s.createDocumentFragment(),e=t.appendChild(s.createElement("div")),n=s.createElement("input");n.setAttribute("type","radio");n.setAttribute("checked","checked");n.setAttribute("name","t");e.appendChild(n);_.checkClone=e.cloneNode(true).cloneNode(true).lastChild.checked;e.innerHTML="<textarea>x</textarea>";_.noCloneChecked=!!e.cloneNode(true).lastChild.defaultValue})();var Et=s.documentElement;var Ot=/^key/,Tt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Mt=/^([^.]*)(?:\.(.+)|)/;function It(){return true}function Rt(){return false}function Nt(){try{return s.activeElement}catch(t){}}function At(t,e,n,i,r,a){var o,s;if(typeof e==="object"){if(typeof n!=="string"){i=i||n;n=undefined}for(s in e){At(t,s,n,i,e[s],a)}return t}if(i==null&&r==null){r=n;i=n=undefined}else if(r==null){if(typeof n==="string"){r=i;i=undefined}else{r=i;i=n;n=undefined}}if(r===false){r=Rt}else if(!r){return t}if(a===1){o=r;r=function(t){E().off(t);return o.apply(this,arguments)};r.guid=o.guid||(o.guid=E.guid++)}return t.each(function(){E.event.add(this,e,r,i,n)})}E.event={global:{},add:function(t,e,n,i,r){var a,o,s,l,u,c,f,h,d,p,v,g=nt.get(t);if(!g){return}if(n.handler){a=n;n=a.handler;r=a.selector}if(r){E.find.matchesSelector(Et,r)}if(!n.guid){n.guid=E.guid++}if(!(l=g.events)){l=g.events={}}if(!(o=g.handle)){o=g.handle=function(e){return typeof E!=="undefined"&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):undefined}}e=(e||"").match(U)||[""];u=e.length;while(u--){s=Mt.exec(e[u])||[];d=v=s[1];p=(s[2]||"").split(".").sort();if(!d){continue}f=E.event.special[d]||{};d=(r?f.delegateType:f.bindType)||d;f=E.event.special[d]||{};c=E.extend({type:d,origType:v,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:p.join(".")},a);if(!(h=l[d])){h=l[d]=[];h.delegateCount=0;if(!f.setup||f.setup.call(t,i,p,o)===false){if(t.addEventListener){t.addEventListener(d,o)}}}if(f.add){f.add.call(t,c);if(!c.handler.guid){c.handler.guid=n.guid}}if(r){h.splice(h.delegateCount++,0,c)}else{h.push(c)}E.event.global[d]=true}},remove:function(t,e,n,i,r){var a,o,s,l,u,c,f,h,d,p,v,g=nt.hasData(t)&&nt.get(t);if(!g||!(l=g.events)){return}e=(e||"").match(U)||[""];u=e.length;while(u--){s=Mt.exec(e[u])||[];d=v=s[1];p=(s[2]||"").split(".").sort();if(!d){for(d in l){E.event.remove(t,d+e[u],n,i,true)}continue}f=E.event.special[d]||{};d=(i?f.delegateType:f.bindType)||d;h=l[d]||[];s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");o=a=h.length;while(a--){c=h[a];if((r||v===c.origType)&&(!n||n.guid===c.guid)&&(!s||s.test(c.namespace))&&(!i||i===c.selector||i==="**"&&c.selector)){h.splice(a,1);if(c.selector){h.delegateCount--}if(f.remove){f.remove.call(t,c)}}}if(o&&!h.length){if(!f.teardown||f.teardown.call(t,p,g.handle)===false){E.removeEvent(t,d,g.handle)}delete l[d]}}if(E.isEmptyObject(l)){nt.remove(t,"handle events")}},dispatch:function(t){var e=E.event.fix(t);var n,i,r,a,o,s,l=new Array(arguments.length),u=(nt.get(this,"events")||{})[e.type]||[],c=E.event.special[e.type]||{};l[0]=e;for(n=1;n<arguments.length;n++){l[n]=arguments[n]}e.delegateTarget=this;if(c.preDispatch&&c.preDispatch.call(this,e)===false){return}s=E.event.handlers.call(this,e,u);n=0;while((a=s[n++])&&!e.isPropagationStopped()){e.currentTarget=a.elem;i=0;while((o=a.handlers[i++])&&!e.isImmediatePropagationStopped()){if(!e.rnamespace||e.rnamespace.test(o.namespace)){e.handleObj=o;e.data=o.data;r=((E.event.special[o.origType]||{}).handle||o.handler).apply(a.elem,l);if(r!==undefined){if((e.result=r)===false){e.preventDefault();e.stopPropagation()}}}}}if(c.postDispatch){c.postDispatch.call(this,e)}return e.result},handlers:function(t,e){var n,i,r,a,o,s=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!(t.type==="click"&&t.button>=1)){for(;u!==this;u=u.parentNode||this){if(u.nodeType===1&&!(t.type==="click"&&u.disabled===true)){a=[];o={};for(n=0;n<l;n++){i=e[n];r=i.selector+" ";if(o[r]===undefined){o[r]=i.needsContext?E(r,this).index(u)>-1:E.find(r,this,null,[u]).length}if(o[r]){a.push(i)}}if(a.length){s.push({elem:u,handlers:a})}}}}u=this;if(l<e.length){s.push({elem:u,handlers:e.slice(l)})}return s},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:true,configurable:true,get:y(e)?function(){if(this.originalEvent){return e(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[t]}},set:function(e){Object.defineProperty(this,t,{enumerable:true,configurable:true,writable:true,value:e})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==Nt()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===Nt()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&A(this,"input")){this.click();return false}},_default:function(t){return A(t.target,"a")}},beforeunload:{postDispatch:function(t){if(t.result!==undefined&&t.originalEvent){t.originalEvent.returnValue=t.result}}}}};E.removeEvent=function(t,e,n){if(t.removeEventListener){t.removeEventListener(e,n)}};E.Event=function(t,e){if(!(this instanceof E.Event)){return new E.Event(t,e)}if(t&&t.type){this.originalEvent=t;this.type=t.type;this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===undefined&&t.returnValue===false?It:Rt;this.target=t.target&&t.target.nodeType===3?t.target.parentNode:t.target;this.currentTarget=t.currentTarget;this.relatedTarget=t.relatedTarget}else{this.type=t}if(e){E.extend(this,e)}this.timeStamp=t&&t.timeStamp||Date.now();this[E.expando]=true};E.Event.prototype={constructor:E.Event,isDefaultPrevented:Rt,isPropagationStopped:Rt,isImmediatePropagationStopped:Rt,isSimulated:false,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=It;if(t&&!this.isSimulated){t.preventDefault()}},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=It;if(t&&!this.isSimulated){t.stopPropagation()}},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=It;if(t&&!this.isSimulated){t.stopImmediatePropagation()}this.stopPropagation()}};E.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(t){var e=t.button;if(t.which==null&&Ot.test(t.type)){return t.charCode!=null?t.charCode:t.keyCode}if(!t.which&&e!==undefined&&Tt.test(t.type)){if(e&1){return 1}if(e&2){return 3}if(e&4){return 2}return 0}return t.which}},E.event.addProp);E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){E.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,a=t.handleObj;if(!r||r!==i&&!E.contains(i,r)){t.type=a.origType;n=a.handler.apply(this,arguments);t.type=e}return n}}});E.fn.extend({on:function(t,e,n,i){return At(this,t,e,n,i)},one:function(t,e,n,i){return At(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj){i=t.handleObj;E(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler);return this}if(typeof t==="object"){for(r in t){this.off(r,e,t[r])}return this}if(e===false||typeof e==="function"){n=e;e=undefined}if(n===false){n=Rt}return this.each(function(){E.event.remove(this,t,n,e)})}});var Lt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Pt=/<script|<style|<link/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,jt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function kt(t,e){if(A(t,"table")&&A(e.nodeType!==11?e:e.firstChild,"tr")){return E(t).children("tbody")[0]||t}return t}function Ft(t){t.type=(t.getAttribute("type")!==null)+"/"+t.type;return t}function $t(t){if((t.type||"").slice(0,5)==="true/"){t.type=t.type.slice(5)}else{t.removeAttribute("type")}return t}function Gt(t,e){var n,i,r,a,o,s,l,u;if(e.nodeType!==1){return}if(nt.hasData(t)){a=nt.access(t);o=nt.set(e,a);u=a.events;if(u){delete o.handle;o.events={};for(r in u){for(n=0,i=u[r].length;n<i;n++){E.event.add(e,r,u[r][n])}}}}if(it.hasData(t)){s=it.access(t);l=E.extend({},s);it.set(e,l)}}function Ut(t,e){var n=e.nodeName.toLowerCase();if(n==="input"&&mt.test(t.type)){e.checked=t.checked}else if(n==="input"||n==="textarea"){e.defaultValue=t.defaultValue}}function Yt(t,e,n,i){e=c.apply([],e);var r,a,o,s,l,u,f=0,h=t.length,d=h-1,p=e[0],v=y(p);if(v||h>1&&typeof p==="string"&&!_.checkClone&&Dt.test(p)){return t.each(function(r){var a=t.eq(r);if(v){e[0]=p.call(this,r,a.html())}Yt(a,e,n,i)})}if(h){r=Ct(e,t[0].ownerDocument,false,t,i);a=r.firstChild;if(r.childNodes.length===1){r=a}if(a||i){o=E.map(wt(r,"script"),Ft);s=o.length;for(;f<h;f++){l=r;if(f!==d){l=E.clone(l,true,true);if(s){E.merge(o,wt(l,"script"))}}n.call(t[f],l,f)}if(s){u=o[o.length-1].ownerDocument;E.map(o,$t);for(f=0;f<s;f++){l=o[f];if(yt.test(l.type||"")&&!nt.access(l,"globalEval")&&E.contains(u,l)){if(l.src&&(l.type||"").toLowerCase()!=="module"){if(E._evalUrl){E._evalUrl(l.src)}}else{x(l.textContent.replace(jt,""),u,l)}}}}}}return t}function Vt(t,e,n){var i,r=e?E.filter(e,t):t,a=0;for(;(i=r[a])!=null;a++){if(!n&&i.nodeType===1){E.cleanData(wt(i))}if(i.parentNode){if(n&&E.contains(i.ownerDocument,i)){xt(wt(i,"script"))}i.parentNode.removeChild(i)}}return t}E.extend({htmlPrefilter:function(t){return t.replace(Lt,"<$1></$2>")},clone:function(t,e,n){var i,r,a,o,s=t.cloneNode(true),l=E.contains(t.ownerDocument,t);if(!_.noCloneChecked&&(t.nodeType===1||t.nodeType===11)&&!E.isXMLDoc(t)){o=wt(s);a=wt(t);for(i=0,r=a.length;i<r;i++){Ut(a[i],o[i])}}if(e){if(n){a=a||wt(t);o=o||wt(s);for(i=0,r=a.length;i<r;i++){Gt(a[i],o[i])}}else{Gt(t,s)}}o=wt(s,"script");if(o.length>0){xt(o,!l&&wt(t,"script"))}return s},cleanData:function(t){var e,n,i,r=E.event.special,a=0;for(;(n=t[a])!==undefined;a++){if(tt(n)){if(e=n[nt.expando]){if(e.events){for(i in e.events){if(r[i]){E.event.remove(n,i)}else{E.removeEvent(n,i,e.handle)}}}n[nt.expando]=undefined}if(n[it.expando]){n[it.expando]=undefined}}}}});E.fn.extend({detach:function(t){return Vt(this,t,true)},remove:function(t){return Vt(this,t)},text:function(t){return X(this,function(t){return t===undefined?E.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=t}})},null,t,arguments.length)},append:function(){return Yt(this,arguments,function(t){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var e=kt(this,t);e.appendChild(t)}})},prepend:function(){return Yt(this,arguments,function(t){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var e=kt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Yt(this,arguments,function(t){if(this.parentNode){this.parentNode.insertBefore(t,this)}})},after:function(){return Yt(this,arguments,function(t){if(this.parentNode){this.parentNode.insertBefore(t,this.nextSibling)}})},empty:function(){var t,e=0;for(;(t=this[e])!=null;e++){if(t.nodeType===1){E.cleanData(wt(t,false));t.textContent=""}}return this},clone:function(t,e){t=t==null?false:t;e=e==null?t:e;return this.map(function(){return E.clone(this,t,e)})},html:function(t){return X(this,function(t){var e=this[0]||{},n=0,i=this.length;if(t===undefined&&e.nodeType===1){return e.innerHTML}if(typeof t==="string"&&!Pt.test(t)&&!bt[(_t.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<i;n++){e=this[n]||{};if(e.nodeType===1){E.cleanData(wt(e,false));e.innerHTML=t}}e=0}catch(t){}}if(e){this.empty().append(t)}},null,t,arguments.length)},replaceWith:function(){var t=[];return Yt(this,arguments,function(e){var n=this.parentNode;if(E.inArray(this,t)<0){E.cleanData(wt(this));if(n){n.replaceChild(e,this)}}},t)}});E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){E.fn[t]=function(t){var n,i=[],r=E(t),a=r.length-1,o=0;for(;o<=a;o++){n=o===a?this:this.clone(true);E(r[o])[e](n);f.apply(i,n.get())}return this.pushStack(i)}});var Ht=new RegExp("^("+lt+")(?!px)[a-z%]+$","i");var zt=function(t){var e=t.ownerDocument.defaultView;if(!e||!e.opener){e=n}return e.getComputedStyle(t)};var Bt=new RegExp(ct.join("|"),"i");(function(){function t(){if(!c){return}u.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";Et.appendChild(u).appendChild(c);var t=n.getComputedStyle(c);i=t.top!=="1%";l=e(t.marginLeft)===12;c.style.right="60%";o=e(t.right)===36;r=e(t.width)===36;c.style.position="absolute";a=c.offsetWidth===36||"absolute";Et.removeChild(u);c=null}function e(t){return Math.round(parseFloat(t))}var i,r,a,o,l,u=s.createElement("div"),c=s.createElement("div");if(!c.style){return}c.style.backgroundClip="content-box";c.cloneNode(true).style.backgroundClip="";_.clearCloneStyle=c.style.backgroundClip==="content-box";E.extend(_,{boxSizingReliable:function(){t();return r},pixelBoxStyles:function(){t();return o},pixelPosition:function(){t();return i},reliableMarginLeft:function(){t();return l},scrollboxSize:function(){t();return a}})})();function Wt(t,e,n){var i,r,a,o,s=t.style;n=n||zt(t);if(n){o=n.getPropertyValue(e)||n[e];if(o===""&&!E.contains(t.ownerDocument,t)){o=E.style(t,e)}if(!_.pixelBoxStyles()&&Ht.test(o)&&Bt.test(e)){i=s.width;r=s.minWidth;a=s.maxWidth;s.minWidth=s.maxWidth=s.width=o;o=n.width;s.width=i;s.minWidth=r;s.maxWidth=a}}return o!==undefined?o+"":o}function qt(t,e){return{get:function(){if(t()){delete this.get;return}return(this.get=e).apply(this,arguments)}}}var Xt=/^(none|table(?!-c[ea]).+)/,Kt=/^--/,Zt={position:"absolute",visibility:"hidden",display:"block"},Qt={letterSpacing:"0",fontWeight:"400"},Jt=["Webkit","Moz","ms"],te=s.createElement("div").style;function ee(t){if(t in te){return t}var e=t[0].toUpperCase()+t.slice(1),n=Jt.length;while(n--){t=Jt[n]+e;if(t in te){return t}}}function ne(t){var e=E.cssProps[t];if(!e){e=E.cssProps[t]=ee(t)||t}return e}function ie(t,e,n){var i=ut.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function re(t,e,n,i,r,a){var o=e==="width"?1:0,s=0,l=0;if(n===(i?"border":"content")){return 0}for(;o<4;o+=2){if(n==="margin"){l+=E.css(t,n+ct[o],true,r)}if(!i){l+=E.css(t,"padding"+ct[o],true,r);if(n!=="padding"){l+=E.css(t,"border"+ct[o]+"Width",true,r)}else{s+=E.css(t,"border"+ct[o]+"Width",true,r)}}else{if(n==="content"){l-=E.css(t,"padding"+ct[o],true,r)}if(n!=="margin"){l-=E.css(t,"border"+ct[o]+"Width",true,r)}}}if(!i&&a>=0){l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-a-l-s-.5))}return l}function ae(t,e,n){var i=zt(t),r=Wt(t,e,i),a=E.css(t,"boxSizing",false,i)==="border-box",o=a;if(Ht.test(r)){if(!n){return r}r="auto"}o=o&&(_.boxSizingReliable()||r===t.style[e]);if(r==="auto"||!parseFloat(r)&&E.css(t,"display",false,i)==="inline"){r=t["offset"+e[0].toUpperCase()+e.slice(1)];o=true}r=parseFloat(r)||0;return r+re(t,e,n||(a?"border":"content"),o,i,r)+"px"}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Wt(t,"opacity");return n===""?"1":n}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{},style:function(t,e,n,i){if(!t||t.nodeType===3||t.nodeType===8||!t.style){return}var r,a,o,s=J(e),l=Kt.test(e),u=t.style;if(!l){e=ne(s)}o=E.cssHooks[e]||E.cssHooks[s];if(n!==undefined){a=typeof n;if(a==="string"&&(r=ut.exec(n))&&r[1]){n=dt(t,e,r);a="number"}if(n==null||n!==n){return}if(a==="number"){n+=r&&r[3]||(E.cssNumber[s]?"":"px")}if(!_.clearCloneStyle&&n===""&&e.indexOf("background")===0){u[e]="inherit"}if(!o||!("set"in o)||(n=o.set(t,n,i))!==undefined){if(l){u.setProperty(e,n)}else{u[e]=n}}}else{if(o&&"get"in o&&(r=o.get(t,false,i))!==undefined){return r}return u[e]}},css:function(t,e,n,i){var r,a,o,s=J(e),l=Kt.test(e);if(!l){e=ne(s)}o=E.cssHooks[e]||E.cssHooks[s];if(o&&"get"in o){r=o.get(t,true,n)}if(r===undefined){r=Wt(t,e,i)}if(r==="normal"&&e in Qt){r=Qt[e]}if(n===""||n){a=parseFloat(r);return n===true||isFinite(a)?a||0:r}return r}});E.each(["height","width"],function(t,e){E.cssHooks[e]={get:function(t,n,i){if(n){return Xt.test(E.css(t,"display"))&&(!t.getClientRects().length||!t.getBoundingClientRect().width)?ht(t,Zt,function(){return ae(t,e,i)}):ae(t,e,i)}},set:function(t,n,i){var r,a=zt(t),o=E.css(t,"boxSizing",false,a)==="border-box",s=i&&re(t,e,i,o,a);if(o&&_.scrollboxSize()===a.position){s-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-re(t,e,"border",false,a)-.5)}if(s&&(r=ut.exec(n))&&(r[3]||"px")!=="px"){t.style[e]=n;n=E.css(t,e)}return ie(t,n,s)}}});E.cssHooks.marginLeft=qt(_.reliableMarginLeft,function(t,e){if(e){return(parseFloat(Wt(t,"marginLeft"))||t.getBoundingClientRect().left-ht(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}});E.each({margin:"",padding:"",border:"Width"},function(t,e){E.cssHooks[t+e]={expand:function(n){var i=0,r={},a=typeof n==="string"?n.split(" "):[n];for(;i<4;i++){r[t+ct[i]+e]=a[i]||a[i-2]||a[0]}return r}};if(t!=="margin"){E.cssHooks[t+e].set=ie}});E.fn.extend({css:function(t,e){return X(this,function(t,e,n){var i,r,a={},o=0;if(Array.isArray(e)){i=zt(t);r=e.length;for(;o<r;o++){a[e[o]]=E.css(t,e[o],false,i)}return a}return n!==undefined?E.style(t,e,n):E.css(t,e)},t,e,arguments.length>1)}});function oe(t,e,n,i,r){return new oe.prototype.init(t,e,n,i,r)}E.Tween=oe;oe.prototype={constructor:oe,init:function(t,e,n,i,r,a){this.elem=t;this.prop=n;this.easing=r||E.easing._default;this.options=e;this.start=this.now=this.cur();this.end=i;this.unit=a||(E.cssNumber[n]?"":"px")},cur:function(){var t=oe.propHooks[this.prop];return t&&t.get?t.get(this):oe.propHooks._default.get(this)},run:function(t){var e,n=oe.propHooks[this.prop];if(this.options.duration){this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration)}else{this.pos=e=t}this.now=(this.end-this.start)*e+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(n&&n.set){n.set(this)}else{oe.propHooks._default.set(this)}return this}};oe.prototype.init.prototype=oe.prototype;oe.propHooks={_default:{get:function(t){var e;if(t.elem.nodeType!==1||t.elem[t.prop]!=null&&t.elem.style[t.prop]==null){return t.elem[t.prop]}e=E.css(t.elem,t.prop,"");return!e||e==="auto"?0:e},set:function(t){if(E.fx.step[t.prop]){E.fx.step[t.prop](t)}else if(t.elem.nodeType===1&&(t.elem.style[E.cssProps[t.prop]]!=null||E.cssHooks[t.prop])){E.style(t.elem,t.prop,t.now+t.unit)}else{t.elem[t.prop]=t.now}}}};oe.propHooks.scrollTop=oe.propHooks.scrollLeft={set:function(t){if(t.elem.nodeType&&t.elem.parentNode){t.elem[t.prop]=t.now}}};E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"};E.fx=oe.prototype.init;E.fx.step={};var se,le,ue=/^(?:toggle|show|hide)$/,ce=/queueHooks$/;function fe(){if(le){if(s.hidden===false&&n.requestAnimationFrame){n.requestAnimationFrame(fe)}else{n.setTimeout(fe,E.fx.interval)}E.fx.tick()}}function he(){n.setTimeout(function(){se=undefined});return se=Date.now()}function de(t,e){var n,i=0,r={height:t};e=e?1:0;for(;i<4;i+=2-e){n=ct[i];r["margin"+n]=r["padding"+n]=t}if(e){r.opacity=r.width=t}return r}function pe(t,e,n){var i,r=(me.tweeners[e]||[]).concat(me.tweeners["*"]),a=0,o=r.length;for(;a<o;a++){if(i=r[a].call(n,e,t)){return i}}}function ve(t,e,n){var i,r,a,o,s,l,u,c,f="width"in e||"height"in e,h=this,d={},p=t.style,v=t.nodeType&&ft(t),g=nt.get(t,"fxshow");if(!n.queue){o=E._queueHooks(t,"fx");if(o.unqueued==null){o.unqueued=0;s=o.empty.fire;o.empty.fire=function(){if(!o.unqueued){s()}}}o.unqueued++;h.always(function(){h.always(function(){o.unqueued--;if(!E.queue(t,"fx").length){o.empty.fire()}})})}for(i in e){r=e[i];if(ue.test(r)){delete e[i];a=a||r==="toggle";if(r===(v?"hide":"show")){if(r==="show"&&g&&g[i]!==undefined){v=true}else{continue}}d[i]=g&&g[i]||E.style(t,i)}}l=!E.isEmptyObject(e);if(!l&&E.isEmptyObject(d)){return}if(f&&t.nodeType===1){n.overflow=[p.overflow,p.overflowX,p.overflowY];u=g&&g.display;if(u==null){u=nt.get(t,"display")}c=E.css(t,"display");if(c==="none"){if(u){c=u}else{gt([t],true);u=t.style.display||u;c=E.css(t,"display");gt([t])}}if(c==="inline"||c==="inline-block"&&u!=null){if(E.css(t,"float")==="none"){if(!l){h.done(function(){p.display=u});if(u==null){c=p.display;u=c==="none"?"":c}}p.display="inline-block"}}}if(n.overflow){p.overflow="hidden";h.always(function(){p.overflow=n.overflow[0];p.overflowX=n.overflow[1];p.overflowY=n.overflow[2]})}l=false;for(i in d){if(!l){if(g){if("hidden"in g){v=g.hidden}}else{g=nt.access(t,"fxshow",{display:u})}if(a){g.hidden=!v}if(v){gt([t],true)}h.done(function(){if(!v){gt([t])}nt.remove(t,"fxshow");for(i in d){E.style(t,i,d[i])}})}l=pe(v?g[i]:0,i,h);if(!(i in g)){g[i]=l.start;if(v){l.end=l.start;l.start=0}}}}function ge(t,e){var n,i,r,a,o;for(n in t){i=J(n);r=e[i];a=t[n];if(Array.isArray(a)){r=a[1];a=t[n]=a[0]}if(n!==i){t[i]=a;delete t[n]}o=E.cssHooks[i];if(o&&"expand"in o){a=o.expand(a);delete t[i];for(n in a){if(!(n in t)){t[n]=a[n];e[n]=r}}}else{e[i]=r}}}function me(t,e,n){var i,r,a=0,o=me.prefilters.length,s=E.Deferred().always(function(){delete l.elem}),l=function(){if(r){return false}var e=se||he(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,a=1-i,o=0,l=u.tweens.length;for(;o<l;o++){u.tweens[o].run(a)}s.notifyWith(t,[u,a,n]);if(a<1&&l){return n}if(!l){s.notifyWith(t,[u,1,0])}s.resolveWith(t,[u]);return false},u=s.promise({elem:t,props:E.extend({},e),opts:E.extend(true,{specialEasing:{},easing:E.easing._default},n),originalProperties:e,originalOptions:n,startTime:se||he(),duration:n.duration,tweens:[],createTween:function(e,n){var i=E.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);u.tweens.push(i);return i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r){return this}r=true;for(;n<i;n++){u.tweens[n].run(1)}if(e){s.notifyWith(t,[u,1,0]);s.resolveWith(t,[u,e])}else{s.rejectWith(t,[u,e])}return this}}),c=u.props;ge(c,u.opts.specialEasing);for(;a<o;a++){i=me.prefilters[a].call(u,t,c,u.opts);if(i){if(y(i.stop)){E._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)}return i}}E.map(c,pe,u);if(y(u.opts.start)){u.opts.start.call(t,u)}u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always);E.fx.timer(E.extend(l,{elem:t,anim:u,queue:u.opts.queue}));return u}E.Animation=E.extend(me,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);dt(n.elem,t,ut.exec(e),n);return n}]},tweener:function(t,e){if(y(t)){e=t;t=["*"]}else{t=t.match(U)}var n,i=0,r=t.length;for(;i<r;i++){n=t[i];me.tweeners[n]=me.tweeners[n]||[];me.tweeners[n].unshift(e)}},prefilters:[ve],prefilter:function(t,e){if(e){me.prefilters.unshift(t)}else{me.prefilters.push(t)}}});E.speed=function(t,e,n){var i=t&&typeof t==="object"?E.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};if(E.fx.off){i.duration=0}else{if(typeof i.duration!=="number"){if(i.duration in E.fx.speeds){i.duration=E.fx.speeds[i.duration]}else{i.duration=E.fx.speeds._default}}}if(i.queue==null||i.queue===true){i.queue="fx"}i.old=i.complete;i.complete=function(){if(y(i.old)){i.old.call(this)}if(i.queue){E.dequeue(this,i.queue)}};return i};E.fn.extend({fadeTo:function(t,e,n,i){return this.filter(ft).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=E.isEmptyObject(t),a=E.speed(e,n,i),o=function(){var e=me(this,E.extend({},t),a);if(r||nt.get(this,"finish")){e.stop(true)}};o.finish=o;return r||a.queue===false?this.each(o):this.queue(a.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop;e(n)};if(typeof t!=="string"){n=e;e=t;t=undefined}if(e&&t!==false){this.queue(t||"fx",[])}return this.each(function(){var e=true,r=t!=null&&t+"queueHooks",a=E.timers,o=nt.get(this);if(r){if(o[r]&&o[r].stop){i(o[r])}}else{for(r in o){if(o[r]&&o[r].stop&&ce.test(r)){i(o[r])}}}for(r=a.length;r--;){if(a[r].elem===this&&(t==null||a[r].queue===t)){a[r].anim.stop(n);e=false;a.splice(r,1)}}if(e||!n){E.dequeue(this,t)}})},finish:function(t){if(t!==false){t=t||"fx"}return this.each(function(){var e,n=nt.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],a=E.timers,o=i?i.length:0;n.finish=true;E.queue(this,t,[]);if(r&&r.stop){r.stop.call(this,true)}for(e=a.length;e--;){if(a[e].elem===this&&a[e].queue===t){a[e].anim.stop(true);a.splice(e,1)}}for(e=0;e<o;e++){if(i[e]&&i[e].finish){i[e].finish.call(this)}}delete n.finish})}});E.each(["toggle","show","hide"],function(t,e){var n=E.fn[e];E.fn[e]=function(t,i,r){return t==null||typeof t==="boolean"?n.apply(this,arguments):this.animate(de(e,true),t,i,r)}});E.each({slideDown:de("show"),slideUp:de("hide"),slideToggle:de("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){E.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}});E.timers=[];E.fx.tick=function(){var t,e=0,n=E.timers;se=Date.now();for(;e<n.length;e++){t=n[e];if(!t()&&n[e]===t){n.splice(e--,1)}}if(!n.length){E.fx.stop()}se=undefined};E.fx.timer=function(t){E.timers.push(t);E.fx.start()};E.fx.interval=13;E.fx.start=function(){if(le){return}le=true;fe()};E.fx.stop=function(){le=null};E.fx.speeds={slow:600,fast:200,_default:400};E.fn.delay=function(t,e){t=E.fx?E.fx.speeds[t]||t:t;e=e||"fx";return this.queue(e,function(e,i){var r=n.setTimeout(e,t);i.stop=function(){n.clearTimeout(r)}})};(function(){var t=s.createElement("input"),e=s.createElement("select"),n=e.appendChild(s.createElement("option"));t.type="checkbox";_.checkOn=t.value!=="";_.optSelected=n.selected;t=s.createElement("input");t.value="t";t.type="radio";_.radioValue=t.value==="t"})();var _e,ye=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return X(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){E.removeAttr(this,t)})}});E.extend({attr:function(t,e,n){var i,r,a=t.nodeType;if(a===3||a===8||a===2){return}if(typeof t.getAttribute==="undefined"){return E.prop(t,e,n)}if(a!==1||!E.isXMLDoc(t)){r=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?_e:undefined)}if(n!==undefined){if(n===null){E.removeAttr(t,e);return}if(r&&"set"in r&&(i=r.set(t,n,e))!==undefined){return i}t.setAttribute(e,n+"");return n}if(r&&"get"in r&&(i=r.get(t,e))!==null){return i}i=E.find.attr(t,e);return i==null?undefined:i},attrHooks:{type:{set:function(t,e){if(!_.radioValue&&e==="radio"&&A(t,"input")){var n=t.value;t.setAttribute("type",e);if(n){t.value=n}return e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(U);if(r&&t.nodeType===1){while(n=r[i++]){t.removeAttribute(n)}}}});_e={set:function(t,e,n){if(e===false){E.removeAttr(t,n)}else{t.setAttribute(n,n)}return n}};E.each(E.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ye[e]||E.find.attr;ye[e]=function(t,e,i){var r,a,o=e.toLowerCase();if(!i){a=ye[o];ye[o]=r;r=n(t,e,i)!=null?o:null;ye[o]=a}return r}});var be=/^(?:input|select|textarea|button)$/i,we=/^(?:a|area)$/i;E.fn.extend({prop:function(t,e){return X(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[E.propFix[t]||t]})}});E.extend({prop:function(t,e,n){var i,r,a=t.nodeType;if(a===3||a===8||a===2){return}if(a!==1||!E.isXMLDoc(t)){e=E.propFix[e]||e;r=E.propHooks[e]}if(n!==undefined){if(r&&"set"in r&&(i=r.set(t,n,e))!==undefined){return i}return t[e]=n}if(r&&"get"in r&&(i=r.get(t,e))!==null){return i}return t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");if(e){return parseInt(e,10)}if(be.test(t.nodeName)||we.test(t.nodeName)&&t.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!_.optSelected){E.propHooks.selected={get:function(t){var e=t.parentNode;if(e&&e.parentNode){e.parentNode.selectedIndex}return null},set:function(t){var e=t.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}}}}E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this});function xe(t){var e=t.match(U)||[];return e.join(" ")}function Se(t){return t.getAttribute&&t.getAttribute("class")||""}function Ce(t){if(Array.isArray(t)){return t}if(typeof t==="string"){return t.match(U)||[]}return[]}E.fn.extend({addClass:function(t){var e,n,i,r,a,o,s,l=0;if(y(t)){return this.each(function(e){E(this).addClass(t.call(this,e,Se(this)))})}e=Ce(t);if(e.length){while(n=this[l++]){r=Se(n);i=n.nodeType===1&&" "+xe(r)+" ";if(i){o=0;while(a=e[o++]){if(i.indexOf(" "+a+" ")<0){i+=a+" "}}s=xe(i);if(r!==s){n.setAttribute("class",s)}}}}return this},removeClass:function(t){var e,n,i,r,a,o,s,l=0;if(y(t)){return this.each(function(e){E(this).removeClass(t.call(this,e,Se(this)))})}if(!arguments.length){return this.attr("class","")}e=Ce(t);if(e.length){while(n=this[l++]){r=Se(n);i=n.nodeType===1&&" "+xe(r)+" ";if(i){o=0;while(a=e[o++]){while(i.indexOf(" "+a+" ")>-1){i=i.replace(" "+a+" "," ")}}s=xe(i);if(r!==s){n.setAttribute("class",s)}}}}return this},toggleClass:function(t,e){var n=typeof t,i=n==="string"||Array.isArray(t);if(typeof e==="boolean"&&i){return e?this.addClass(t):this.removeClass(t)}if(y(t)){return this.each(function(n){E(this).toggleClass(t.call(this,n,Se(this),e),e)})}return this.each(function(){var e,r,a,o;if(i){r=0;a=E(this);o=Ce(t);while(e=o[r++]){if(a.hasClass(e)){a.removeClass(e)}else{a.addClass(e)}}}else if(t===undefined||n==="boolean"){e=Se(this);if(e){nt.set(this,"__className__",e)}if(this.setAttribute){this.setAttribute("class",e||t===false?"":nt.get(this,"__className__")||"")}}})},hasClass:function(t){var e,n,i=0;e=" "+t+" ";while(n=this[i++]){if(n.nodeType===1&&(" "+xe(Se(n))+" ").indexOf(e)>-1){return true}}return false}});var Ee=/\r/g;E.fn.extend({val:function(t){var e,n,i,r=this[0];if(!arguments.length){if(r){e=E.valHooks[r.type]||E.valHooks[r.nodeName.toLowerCase()];if(e&&"get"in e&&(n=e.get(r,"value"))!==undefined){return n}n=r.value;if(typeof n==="string"){return n.replace(Ee,"")}return n==null?"":n}return}i=y(t);return this.each(function(n){var r;if(this.nodeType!==1){return}if(i){r=t.call(this,n,E(this).val())}else{r=t}if(r==null){r=""}else if(typeof r==="number"){r+=""}else if(Array.isArray(r)){r=E.map(r,function(t){return t==null?"":t+""})}e=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()];if(!e||!("set"in e)||e.set(this,r,"value")===undefined){this.value=r}})}});E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return e!=null?e:xe(E.text(t))}},select:{get:function(t){var e,n,i,r=t.options,a=t.selectedIndex,o=t.type==="select-one",s=o?null:[],l=o?a+1:r.length;if(a<0){i=l}else{i=o?a:0}for(;i<l;i++){n=r[i];if((n.selected||i===a)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){e=E(n).val();if(o){return e}s.push(e)}}return s},set:function(t,e){var n,i,r=t.options,a=E.makeArray(e),o=r.length;while(o--){i=r[o];if(i.selected=E.inArray(E.valHooks.option.get(i),a)>-1){n=true}}if(!n){t.selectedIndex=-1}return a}}}});E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e)){return t.checked=E.inArray(E(t).val(),e)>-1}}};if(!_.checkOn){E.valHooks[this].get=function(t){return t.getAttribute("value")===null?"on":t.value}}});_.focusin="onfocusin"in n;var Oe=/^(?:focusinfocus|focusoutblur)$/,Te=function(t){t.stopPropagation()};E.extend(E.event,{trigger:function(t,e,i,r){var a,o,l,u,c,f,h,d,p=[i||s],g=v.call(t,"type")?t.type:t,m=v.call(t,"namespace")?t.namespace.split("."):[];o=d=l=i=i||s;if(i.nodeType===3||i.nodeType===8){return}if(Oe.test(g+E.event.triggered)){return}if(g.indexOf(".")>-1){m=g.split(".");g=m.shift();m.sort()}c=g.indexOf(":")<0&&"on"+g;t=t[E.expando]?t:new E.Event(g,typeof t==="object"&&t);t.isTrigger=r?2:3;t.namespace=m.join(".");t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;t.result=undefined;if(!t.target){t.target=i}e=e==null?[t]:E.makeArray(e,[t]);h=E.event.special[g]||{};if(!r&&h.trigger&&h.trigger.apply(i,e)===false){return}if(!r&&!h.noBubble&&!b(i)){u=h.delegateType||g;if(!Oe.test(u+g)){o=o.parentNode}for(;o;o=o.parentNode){p.push(o);l=o}if(l===(i.ownerDocument||s)){p.push(l.defaultView||l.parentWindow||n)}}a=0;while((o=p[a++])&&!t.isPropagationStopped()){d=o;t.type=a>1?u:h.bindType||g;f=(nt.get(o,"events")||{})[t.type]&&nt.get(o,"handle");if(f){f.apply(o,e)}f=c&&o[c];if(f&&f.apply&&tt(o)){t.result=f.apply(o,e);if(t.result===false){t.preventDefault()}}}t.type=g;if(!r&&!t.isDefaultPrevented()){if((!h._default||h._default.apply(p.pop(),e)===false)&&tt(i)){if(c&&y(i[g])&&!b(i)){l=i[c];if(l){i[c]=null}E.event.triggered=g;if(t.isPropagationStopped()){d.addEventListener(g,Te)}i[g]();if(t.isPropagationStopped()){d.removeEventListener(g,Te)}E.event.triggered=undefined;if(l){i[c]=l}}}}return t.result},simulate:function(t,e,n){var i=E.extend(new E.Event,n,{type:t,isSimulated:true});E.event.trigger(i,null,e)}});E.fn.extend({trigger:function(t,e){return this.each(function(){E.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n){return E.event.trigger(t,e,n,true)}}});if(!_.focusin){E.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){E.event.simulate(e,t.target,E.event.fix(t))};E.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=nt.access(i,e);if(!r){i.addEventListener(t,n,true)}nt.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=nt.access(i,e)-1;if(!r){i.removeEventListener(t,n,true);nt.remove(i,e)}else{nt.access(i,e,r)}}}})}var Me=n.location;var Ie=Date.now();var Re=/\?/;E.parseXML=function(t){var e;if(!t||typeof t!=="string"){return null}try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=undefined}if(!e||e.getElementsByTagName("parsererror").length){E.error("Invalid XML: "+t)}return e};var Ne=/\[\]$/,Ae=/\r?\n/g,Le=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;function De(t,e,n,i){var r;if(Array.isArray(e)){E.each(e,function(e,r){if(n||Ne.test(t)){i(t,r)}else{De(t+"["+(typeof r==="object"&&r!=null?e:"")+"]",r,n,i)}})}else if(!n&&S(e)==="object"){for(r in e){De(t+"["+r+"]",e[r],n,i)}}else{i(t,e)}}E.param=function(t,e){var n,i=[],r=function(t,e){var n=y(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(n==null?"":n)};if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t)){E.each(t,function(){r(this.name,this.value)})}else{for(n in t){De(n,t[n],e,r)}}return i.join("&")};E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&Pe.test(this.nodeName)&&!Le.test(t)&&(this.checked||!mt.test(t))}).map(function(t,e){var n=E(this).val();if(n==null){return null}if(Array.isArray(n)){return E.map(n,function(t){return{name:e.name,value:t.replace(Ae,"\r\n")}})}return{name:e.name,value:n.replace(Ae,"\r\n")}}).get()}});var je=/%20/g,ke=/#.*$/,Fe=/([?&])_=[^&]*/,$e=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ge=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ue=/^(?:GET|HEAD)$/,Ye=/^\/\//,Ve={},He={},ze="*/".concat("*"),Be=s.createElement("a");Be.href=Me.href;function We(t){return function(e,n){if(typeof e!=="string"){n=e;e="*"}var i,r=0,a=e.toLowerCase().match(U)||[];if(y(n)){while(i=a[r++]){if(i[0]==="+"){i=i.slice(1)||"*";(t[i]=t[i]||[]).unshift(n)}else{(t[i]=t[i]||[]).push(n)}}}}}function qe(t,e,n,i){var r={},a=t===He;function o(s){var l;r[s]=true;E.each(t[s]||[],function(t,s){var u=s(e,n,i);if(typeof u==="string"&&!a&&!r[u]){e.dataTypes.unshift(u);o(u);return false}else if(a){return!(l=u)}});return l}return o(e.dataTypes[0])||!r["*"]&&o("*")}function Xe(t,e){var n,i,r=E.ajaxSettings.flatOptions||{};for(n in e){if(e[n]!==undefined){(r[n]?t:i||(i={}))[n]=e[n]}}if(i){E.extend(true,t,i)}return t}function Ke(t,e,n){var i,r,a,o,s=t.contents,l=t.dataTypes;while(l[0]==="*"){l.shift();if(i===undefined){i=t.mimeType||e.getResponseHeader("Content-Type")}}if(i){for(r in s){if(s[r]&&s[r].test(i)){l.unshift(r);break}}}if(l[0]in n){a=l[0]}else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){a=r;break}if(!o){o=r}}a=a||o}if(a){if(a!==l[0]){l.unshift(a)}return n[a]}}function Ze(t,e,n,i){var r,a,o,s,l,u={},c=t.dataTypes.slice();if(c[1]){for(o in t.converters){u[o.toLowerCase()]=t.converters[o]}}a=c.shift();while(a){if(t.responseFields[a]){n[t.responseFields[a]]=e}if(!l&&i&&t.dataFilter){e=t.dataFilter(e,t.dataType)}l=a;a=c.shift();if(a){if(a==="*"){a=l}else if(l!=="*"&&l!==a){o=u[l+" "+a]||u["* "+a];if(!o){for(r in u){s=r.split(" ");if(s[1]===a){o=u[l+" "+s[0]]||u["* "+s[0]];if(o){if(o===true){o=u[r]}else if(u[r]!==true){a=s[0];c.unshift(s[1])}break}}}}if(o!==true){if(o&&t.throws){e=o(e)}else{try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+a}}}}}}}return{state:"success",data:e}}E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Me.href,type:"GET",isLocal:Ge.test(Me.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ze,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(t,e){return e?Xe(Xe(t,E.ajaxSettings),e):Xe(E.ajaxSettings,t)},ajaxPrefilter:We(Ve),ajaxTransport:We(He),ajax:function(t,e){if(typeof t==="object"){e=t;t=undefined}e=e||{};var i,r,a,o,l,u,c,f,h,d,p=E.ajaxSetup({},e),v=p.context||p,g=p.context&&(v.nodeType||v.jquery)?E(v):E.event,m=E.Deferred(),_=E.Callbacks("once memory"),y=p.statusCode||{},b={},w={},x="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(c){if(!o){o={};while(e=$e.exec(a)){o[e[1].toLowerCase()]=e[2]}}e=o[t.toLowerCase()]}return e==null?null:e},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(t,e){if(c==null){t=w[t.toLowerCase()]=w[t.toLowerCase()]||t;b[t]=e}return this},overrideMimeType:function(t){if(c==null){p.mimeType=t}return this},statusCode:function(t){var e;if(t){if(c){S.always(t[S.status])}else{for(e in t){y[e]=[y[e],t[e]]}}}return this},abort:function(t){var e=t||x;if(i){i.abort(e)}C(0,e);return this}};m.promise(S);p.url=((t||p.url||Me.href)+"").replace(Ye,Me.protocol+"//");p.type=e.method||e.type||p.method||p.type;p.dataTypes=(p.dataType||"*").toLowerCase().match(U)||[""];if(p.crossDomain==null){u=s.createElement("a");try{u.href=p.url;u.href=u.href;p.crossDomain=Be.protocol+"//"+Be.host!==u.protocol+"//"+u.host}catch(t){p.crossDomain=true}}if(p.data&&p.processData&&typeof p.data!=="string"){p.data=E.param(p.data,p.traditional)}qe(Ve,p,e,S);if(c){return S}f=E.event&&p.global;if(f&&E.active++===0){E.event.trigger("ajaxStart")}p.type=p.type.toUpperCase();p.hasContent=!Ue.test(p.type);r=p.url.replace(ke,"");if(!p.hasContent){d=p.url.slice(r.length);if(p.data&&(p.processData||typeof p.data==="string")){r+=(Re.test(r)?"&":"?")+p.data;delete p.data}if(p.cache===false){r=r.replace(Fe,"$1");d=(Re.test(r)?"&":"?")+"_="+Ie+++d}p.url=r+d}else if(p.data&&p.processData&&(p.contentType||"").indexOf("application/x-www-form-urlencoded")===0){p.data=p.data.replace(je,"+")}if(p.ifModified){if(E.lastModified[r]){S.setRequestHeader("If-Modified-Since",E.lastModified[r])}if(E.etag[r]){S.setRequestHeader("If-None-Match",E.etag[r])}}if(p.data&&p.hasContent&&p.contentType!==false||e.contentType){S.setRequestHeader("Content-Type",p.contentType)}S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(p.dataTypes[0]!=="*"?", "+ze+"; q=0.01":""):p.accepts["*"]);for(h in p.headers){S.setRequestHeader(h,p.headers[h])}if(p.beforeSend&&(p.beforeSend.call(v,S,p)===false||c)){return S.abort()}x="abort";_.add(p.complete);S.done(p.success);S.fail(p.error);i=qe(He,p,e,S);if(!i){C(-1,"No Transport")}else{S.readyState=1;if(f){g.trigger("ajaxSend",[S,p])}if(c){return S}if(p.async&&p.timeout>0){l=n.setTimeout(function(){S.abort("timeout")},p.timeout)}try{c=false;i.send(b,C)}catch(t){if(c){throw t}C(-1,t)}}function C(t,e,o,s){var u,h,d,b,w,x=e;if(c){return}c=true;if(l){n.clearTimeout(l)}i=undefined;a=s||"";S.readyState=t>0?4:0;u=t>=200&&t<300||t===304;if(o){b=Ke(p,S,o)}b=Ze(p,b,S,u);if(u){if(p.ifModified){w=S.getResponseHeader("Last-Modified");if(w){E.lastModified[r]=w}w=S.getResponseHeader("etag");if(w){E.etag[r]=w}}if(t===204||p.type==="HEAD"){x="nocontent"}else if(t===304){x="notmodified"}else{x=b.state;h=b.data;d=b.error;u=!d}}else{d=x;if(t||!x){x="error";if(t<0){t=0}}}S.status=t;S.statusText=(e||x)+"";if(u){m.resolveWith(v,[h,x,S])}else{m.rejectWith(v,[S,x,d])}S.statusCode(y);y=undefined;if(f){g.trigger(u?"ajaxSuccess":"ajaxError",[S,p,u?h:d])}_.fireWith(v,[S,x]);if(f){g.trigger("ajaxComplete",[S,p]);if(!--E.active){E.event.trigger("ajaxStop")}}}return S},getJSON:function(t,e,n){return E.get(t,e,n,"json")},getScript:function(t,e){return E.get(t,undefined,e,"script")}});E.each(["get","post"],function(t,e){E[e]=function(t,n,i,r){if(y(n)){r=r||i;i=n;n=undefined}return E.ajax(E.extend({url:t,type:e,dataType:r,data:n,success:i},E.isPlainObject(t)&&t))}});E._evalUrl=function(t){return E.ajax({url:t,type:"GET",dataType:"script",cache:true,async:false,global:false,throws:true})};E.fn.extend({wrapAll:function(t){var e;if(this[0]){if(y(t)){t=t.call(this[0])}e=E(t,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){e.insertBefore(this[0])}e.map(function(){var t=this;while(t.firstElementChild){t=t.firstElementChild}return t}).append(this)}return this},wrapInner:function(t){if(y(t)){return this.each(function(e){E(this).wrapInner(t.call(this,e))})}return this.each(function(){var e=E(this),n=e.contents();if(n.length){n.wrapAll(t)}else{e.append(t)}})},wrap:function(t){var e=y(t);return this.each(function(n){E(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){this.parent(t).not("body").each(function(){E(this).replaceWith(this.childNodes)});return this}});E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)};E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)};E.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var Qe={0:200,1223:204},Je=E.ajaxSettings.xhr();_.cors=!!Je&&"withCredentials"in Je;_.ajax=Je=!!Je;E.ajaxTransport(function(t){var e,i;if(_.cors||Je&&!t.crossDomain){return{send:function(r,a){var o,s=t.xhr();s.open(t.type,t.url,t.async,t.username,t.password);if(t.xhrFields){for(o in t.xhrFields){s[o]=t.xhrFields[o]}}if(t.mimeType&&s.overrideMimeType){s.overrideMimeType(t.mimeType)}if(!t.crossDomain&&!r["X-Requested-With"]){r["X-Requested-With"]="XMLHttpRequest"}for(o in r){s.setRequestHeader(o,r[o])}e=function(t){return function(){if(e){e=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null;if(t==="abort"){s.abort()}else if(t==="error"){if(typeof s.status!=="number"){a(0,"error")}else{a(s.status,s.statusText)}}else{a(Qe[s.status]||s.status,s.statusText,(s.responseType||"text")!=="text"||typeof s.responseText!=="string"?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders())}}}};s.onload=e();i=s.onerror=s.ontimeout=e("error");if(s.onabort!==undefined){s.onabort=i}else{s.onreadystatechange=function(){if(s.readyState===4){n.setTimeout(function(){if(e){i()}})}}}e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e){throw t}}},abort:function(){if(e){e()}}}}});E.ajaxPrefilter(function(t){if(t.crossDomain){t.contents.script=false}});E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){E.globalEval(t);return t}}});E.ajaxPrefilter("script",function(t){if(t.cache===undefined){t.cache=false}if(t.crossDomain){t.type="GET"}});E.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=E("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove();n=null;if(t){r(t.type==="error"?404:200,t.type)}});s.head.appendChild(e[0])},abort:function(){if(n){n()}}}}});var tn=[],en=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=tn.pop()||E.expando+"_"+Ie++;this[t]=true;return t}});E.ajaxPrefilter("json jsonp",function(t,e,i){var r,a,o,s=t.jsonp!==false&&(en.test(t.url)?"url":typeof t.data==="string"&&(t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&en.test(t.data)&&"data");if(s||t.dataTypes[0]==="jsonp"){r=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback;if(s){t[s]=t[s].replace(en,"$1"+r)}else if(t.jsonp!==false){t.url+=(Re.test(t.url)?"&":"?")+t.jsonp+"="+r}t.converters["script json"]=function(){if(!o){E.error(r+" was not called")}return o[0]};t.dataTypes[0]="json";a=n[r];n[r]=function(){o=arguments};i.always(function(){if(a===undefined){E(n).removeProp(r)}else{n[r]=a}if(t[r]){t.jsonpCallback=e.jsonpCallback;tn.push(r)}if(o&&y(a)){a(o[0])}o=a=undefined});return"script"}});_.createHTMLDocument=function(){var t=s.implementation.createHTMLDocument("").body;t.innerHTML="<form></form><form></form>";return t.childNodes.length===2}();E.parseHTML=function(t,e,n){if(typeof t!=="string"){return[]}if(typeof e==="boolean"){n=e;e=false}var i,r,a;if(!e){if(_.createHTMLDocument){e=s.implementation.createHTMLDocument("");i=e.createElement("base");i.href=s.location.href;e.head.appendChild(i)}else{e=s}}r=L.exec(t);a=!n&&[];if(r){return[e.createElement(r[1])]}r=Ct([t],e,a);if(a&&a.length){E(a).remove()}return E.merge([],r.childNodes)};E.fn.load=function(t,e,n){var i,r,a,o=this,s=t.indexOf(" ");if(s>-1){i=xe(t.slice(s));t=t.slice(0,s)}if(y(e)){n=e;e=undefined}else if(e&&typeof e==="object"){r="POST"}if(o.length>0){E.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){a=arguments;o.html(i?E("<div>").append(E.parseHTML(t)).find(i):t)}).always(n&&function(t,e){o.each(function(){n.apply(this,a||[t.responseText,e,t])})})}return this};E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){E.fn[e]=function(t){return this.on(e,t)}});E.expr.pseudos.animated=function(t){return E.grep(E.timers,function(e){return t===e.elem}).length};E.offset={setOffset:function(t,e,n){var i,r,a,o,s,l,u,c=E.css(t,"position"),f=E(t),h={};if(c==="static"){t.style.position="relative"}s=f.offset();a=E.css(t,"top");l=E.css(t,"left");u=(c==="absolute"||c==="fixed")&&(a+l).indexOf("auto")>-1;if(u){i=f.position();o=i.top;r=i.left}else{o=parseFloat(a)||0;r=parseFloat(l)||0}if(y(e)){e=e.call(t,n,E.extend({},s))}if(e.top!=null){h.top=e.top-s.top+o}if(e.left!=null){h.left=e.left-s.left+r}if("using"in e){e.using.call(t,h)}else{f.css(h)}}};E.fn.extend({offset:function(t){if(arguments.length){return t===undefined?this:this.each(function(e){E.offset.setOffset(this,t,e)})}var e,n,i=this[0];if(!i){return}if(!i.getClientRects().length){return{top:0,left:0}}e=i.getBoundingClientRect();n=i.ownerDocument.defaultView;return{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}},position:function(){if(!this[0]){return}var t,e,n,i=this[0],r={top:0,left:0};if(E.css(i,"position")==="fixed"){e=i.getBoundingClientRect()}else{e=this.offset();n=i.ownerDocument;t=i.offsetParent||n.documentElement;while(t&&(t===n.body||t===n.documentElement)&&E.css(t,"position")==="static"){t=t.parentNode}if(t&&t!==i&&t.nodeType===1){r=E(t).offset();r.top+=E.css(t,"borderTopWidth",true);r.left+=E.css(t,"borderLeftWidth",true)}}return{top:e.top-r.top-E.css(i,"marginTop",true),left:e.left-r.left-E.css(i,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var t=this.offsetParent;while(t&&E.css(t,"position")==="static"){t=t.offsetParent}return t||Et})}});E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;E.fn[t]=function(i){return X(this,function(t,i,r){var a;if(b(t)){a=t}else if(t.nodeType===9){a=t.defaultView}if(r===undefined){return a?a[e]:t[i]}if(a){a.scrollTo(!n?r:a.pageXOffset,n?r:a.pageYOffset)}else{t[i]=r}},t,i,arguments.length)}});E.each(["top","left"],function(t,e){E.cssHooks[e]=qt(_.pixelPosition,function(t,n){if(n){n=Wt(t,e);return Ht.test(n)?E(t).position()[e]+"px":n}})});E.each({Height:"height",Width:"width"},function(t,e){E.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){E.fn[i]=function(r,a){var o=arguments.length&&(n||typeof r!=="boolean"),s=n||(r===true||a===true?"margin":"border");return X(this,function(e,n,r){var a;if(b(e)){return i.indexOf("outer")===0?e["inner"+t]:e.document.documentElement["client"+t]}if(e.nodeType===9){a=e.documentElement;return Math.max(e.body["scroll"+t],a["scroll"+t],e.body["offset"+t],a["offset"+t],a["client"+t])}return r===undefined?E.css(e,n,s):E.style(e,n,r,s)},e,o?r:undefined,o)}})});E.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(t,e){E.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}});E.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}});E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return arguments.length===1?this.off(t,"**"):this.off(e,t||"**",n)}});E.proxy=function(t,e){var n,i,r;if(typeof e==="string"){n=t[e];e=t;t=n}if(!y(t)){return undefined}i=u.call(arguments,2);r=function(){return t.apply(e||this,i.concat(u.call(arguments)))};r.guid=t.guid=t.guid||E.guid++;return r};E.holdReady=function(t){if(t){E.readyWait++}else{E.ready(true)}};E.isArray=Array.isArray;E.parseJSON=JSON.parse;E.nodeName=A;E.isFunction=y;E.isWindow=b;E.camelCase=J;E.type=S;E.now=Date.now;E.isNumeric=function(t){var e=E.type(t);return(e==="number"||e==="string")&&!isNaN(t-parseFloat(t))};if(true){!(i=[],r=function(){return E}.apply(e,i),r!==undefined&&(t.exports=r))}var nn=n.jQuery,rn=n.$;E.noConflict=function(t){if(n.$===E){n.$=rn}if(t&&n.jQuery===E){n.jQuery=nn}return E};if(!a){n.jQuery=n.$=E}return E})},function(t,e,n){"use strict";n.d(e,"b",function(){return f});var i=n(1);var r=n(167);var a=n(204);var o=n(42);var s=n(9);var l=function t(e,n,i){o["a"].call(this,e);this.key=n;this.oldValue=i};Object(i["d"])(l,o["a"]);var u=function t(e){a["a"].call(this);Object(i["c"])(this);this.values_={};if(e!==undefined){this.setProperties(e)}};Object(i["d"])(u,a["a"]);var c={};function f(t){return c.hasOwnProperty(t)?c[t]:c[t]="change:"+t}u.prototype.get=function(t){var e=void 0;if(this.values_.hasOwnProperty(t)){e=this.values_[t]}return e};u.prototype.getKeys=function(){return Object.keys(this.values_)};u.prototype.getProperties=function(){return Object(s["a"])({},this.values_)};u.prototype.notify=function(t,e){var n=void 0;n=f(t);this.dispatchEvent(new l(n,t,e));n=r["a"].PROPERTYCHANGE;this.dispatchEvent(new l(n,t,e))};u.prototype.set=function(t,e,n){if(n){this.values_[t]=e}else{var i=this.values_[t];this.values_[t]=e;if(i!==e){this.notify(t,i)}}};u.prototype.setProperties=function(t,e){for(var n in t){this.set(n,t[n],e)}};u.prototype.unset=function(t,e){if(t in this.values_){var n=this.values_[t];delete this.values_[t];if(!e){this.notify(t,n)}}};e["a"]=u},function(t,e,n){"use strict";n.d(e,"c",function(){return a});n.d(e,"e",function(){return o});n.d(e,"g",function(){return u});n.d(e,"a",function(){return c});n.d(e,"f",function(){return h});n.d(e,"h",function(){return d});n.d(e,"b",function(){return p});n.d(e,"d",function(){return v});var i=n(27);var r=new Array(6);function a(){return[1,0,0,1,0,0]}function o(t){return l(t,1,0,0,1,0,0)}function s(t,e){var n=t[0];var i=t[1];var r=t[2];var a=t[3];var o=t[4];var s=t[5];var l=e[0];var u=e[1];var c=e[2];var f=e[3];var h=e[4];var d=e[5];t[0]=n*l+r*u;t[1]=i*l+a*u;t[2]=n*c+r*f;t[3]=i*c+a*f;t[4]=n*h+r*d+o;t[5]=i*h+a*d+s;return t}function l(t,e,n,i,r,a,o){t[0]=e;t[1]=n;t[2]=i;t[3]=r;t[4]=a;t[5]=o;return t}function u(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];return t}function c(t,e){var n=e[0];var i=e[1];e[0]=t[0]*n+t[2]*i+t[4];e[1]=t[1]*n+t[3]*i+t[5];return e}function f(t,e){var n=Math.cos(e);var i=Math.sin(e);return s(t,l(r,n,i,-i,n,0,0))}function h(t,e,n){return s(t,l(r,e,0,0,n,0,0))}function d(t,e,n){return s(t,l(r,1,0,0,1,e,n))}function p(t,e,n,i,r,a,o,s){var l=Math.sin(a);var u=Math.cos(a);t[0]=i*u;t[1]=r*l;t[2]=-i*l;t[3]=r*u;t[4]=o*i*u-s*i*l+e;t[5]=o*r*l+s*r*u+n;return t}function v(t){var e=g(t);Object(i["a"])(e!==0,32);var n=t[0];var r=t[1];var a=t[2];var o=t[3];var s=t[4];var l=t[5];t[0]=o/e;t[1]=-r/e;t[2]=-a/e;t[3]=n/e;t[4]=(a*l-o*s)/e;t[5]=-(n*l-r*s)/e;return t}function g(t){return t[0]*t[3]-t[1]*t[2]}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(132);function r(t){var e=+t,n=0;if(e!==0&&isFinite(e)){n=Object(i["a"])(e)}return n}},function(t,e,n){"use strict";n.d(e,"b",function(){return r});var i=function t(e){this.propagationStopped;this.type=e;this.target=null};i.prototype.preventDefault=i.prototype.stopPropagation=function(){this.propagationStopped=true};function r(t){t.stopPropagation()}function a(t){t.preventDefault()}e["a"]=i},function(t,e,n){"use strict";e["a"]={IDLE:0,LOADING:1,LOADED:2,ERROR:3}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});n.d(e,"c",function(){return o});n.d(e,"b",function(){return s});var i=n(71);var r={};function a(t,e){var n=t.toLowerCase();r[n]=r[n+"s"]=r[e]=t}function o(t){return typeof t==="string"?r[t]||r[t.toLowerCase()]:undefined}function s(t){var e={},n,r;for(r in t){if(Object(i["a"])(t,r)){n=o(r);if(n){e[n]=t[r]}}}return e}},function(t,e,n){"use strict";var i={BOOLEAN:"boolean",DATE:"date",DATETIME:"datetime",TIME:"time",GEOMETRY:"geometry",NUMBER:"number",SELECT:"select",TEXT:"text"};e["a"]=i},function(t,e,n){"use strict";var i=n(247);var r=n(1);var a=n(20);var o=n(15);function s(t){return function(e){if(e){return[Object(o["a"])(e[0],t[0],t[2]),Object(o["a"])(e[1],t[1],t[3])]}else{return undefined}}}function l(t){return t}var u=n(39);var c=n(7);function f(t){return function(e,n,i){if(e!==undefined){var r=Object(c["h"])(t,e,i);r=Object(o["a"])(r+n,0,t.length-1);var a=Math.floor(r);if(r!=a&&a<t.length-1){var s=t[a]/t[a+1];return t[a]/Math.pow(s,r-a)}else{return t[a]}}else{return undefined}}}function h(t,e,n){return function(i,r,a){if(i!==undefined){var o=-a/2+.5;var s=Math.floor(Math.log(e/i)/Math.log(t)+o);var l=Math.max(s+r,0);if(n!==undefined){l=Math.min(l,n)}return e/Math.pow(t,l)}else{return undefined}}}var d=n(172);var p=n(58);var v=n(107);var g=n(27);var m=n(29);var _=n(92);var y=n(4);var b=n(8);var w=n(32);var x=n(69);var S=n(9);var C=n(10);var E=n(85);var O=0;var T=function t(e){u["a"].call(this);var n=Object(S["a"])({},e);this.hints_=[0,0];this.animations_=[];this.updateAnimationKey_;this.updateAnimations_=this.updateAnimations_.bind(this);this.projection_=Object(C["e"])(n.projection,"EPSG:3857");this.applyOptions_(n)};Object(r["d"])(T,u["a"]);T.prototype.applyOptions_=function(t){var e={};e[v["a"].CENTER]=t.center!==undefined?t.center:null;var n=I(t);this.maxResolution_=n.maxResolution;this.minResolution_=n.minResolution;this.zoomFactor_=n.zoomFactor;this.resolutions_=t.resolutions;this.minZoom_=n.minZoom;var i=M(t);var r=n.constraint;var a=R(t);this.constraints_={center:i,resolution:r,rotation:a};if(t.resolution!==undefined){e[v["a"].RESOLUTION]=t.resolution}else if(t.zoom!==undefined){e[v["a"].RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_);if(this.resolutions_){e[v["a"].RESOLUTION]=Object(o["a"])(Number(this.getResolution()||e[v["a"].RESOLUTION]),this.minResolution_,this.maxResolution_)}}e[v["a"].ROTATION]=t.rotation!==undefined?t.rotation:0;this.setProperties(e);this.options_=t};T.prototype.getUpdatedOptions_=function(t){var e=Object(S["a"])({},this.options_);if(e.resolution!==undefined){e.resolution=this.getResolution()}else{e.zoom=this.getZoom()}e.center=this.getCenter();e.rotation=this.getRotation();return Object(S["a"])({},e,t)};T.prototype.animate=function(t){var e=arguments.length;var n=void 0;if(e>1&&typeof arguments[e-1]==="function"){n=arguments[e-1];--e}if(!this.isDef()){var i=arguments[e-1];if(i.center){this.setCenter(i.center)}if(i.zoom!==undefined){this.setZoom(i.zoom)}if(i.rotation!==undefined){this.setRotation(i.rotation)}if(n){setTimeout(function(){n(true)},0)}return}var r=Date.now();var a=this.getCenter().slice();var s=this.getResolution();var l=this.getRotation();var u=[];for(var c=0;c<e;++c){var f=arguments[c];var h={start:r,complete:false,anchor:f.anchor,duration:f.duration!==undefined?f.duration:1e3,easing:f.easing||_["c"]};if(f.center){h.sourceCenter=a;h.targetCenter=f.center;a=h.targetCenter}if(f.zoom!==undefined){h.sourceResolution=s;h.targetResolution=this.constrainResolution(this.maxResolution_,f.zoom-this.minZoom_,0);s=h.targetResolution}else if(f.resolution){h.sourceResolution=s;h.targetResolution=f.resolution;s=h.targetResolution}if(f.rotation!==undefined){h.sourceRotation=l;var d=Object(o["d"])(f.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d;l=h.targetRotation}h.callback=n;if(N(h)){h.complete=true}else{r+=h.duration}u.push(h)}this.animations_.push(u);this.setHint(p["a"].ANIMATING,1);this.updateAnimations_()};T.prototype.getAnimating=function(){return this.hints_[p["a"].ANIMATING]>0};T.prototype.getInteracting=function(){return this.hints_[p["a"].INTERACTING]>0};T.prototype.cancelAnimations=function(){this.setHint(p["a"].ANIMATING,-this.hints_[p["a"].ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var n=this.animations_[t];if(n[0].callback){n[0].callback(false)}}this.animations_.length=0};T.prototype.updateAnimations_=function(){var t=this;if(this.updateAnimationKey_!==undefined){cancelAnimationFrame(this.updateAnimationKey_);this.updateAnimationKey_=undefined}if(!this.getAnimating()){return}var e=Date.now();var n=false;for(var i=this.animations_.length-1;i>=0;--i){var r=this.animations_[i];var a=true;for(var s=0,l=r.length;s<l;++s){var u=r[s];if(u.complete){continue}var c=e-u.start;var f=u.duration>0?c/u.duration:1;if(f>=1){u.complete=true;f=1}else{a=false}var h=u.easing(f);if(u.sourceCenter){var d=u.sourceCenter[0];var g=u.sourceCenter[1];var m=u.targetCenter[0];var _=u.targetCenter[1];var y=d+h*(m-d);var b=g+h*(_-g);this.set(v["a"].CENTER,[y,b])}if(u.sourceResolution&&u.targetResolution){var w=h===1?u.targetResolution:u.sourceResolution+h*(u.targetResolution-u.sourceResolution);if(u.anchor){this.set(v["a"].CENTER,this.calculateCenterZoom(w,u.anchor))}this.set(v["a"].RESOLUTION,w)}if(u.sourceRotation!==undefined&&u.targetRotation!==undefined){var x=h===1?Object(o["d"])(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+h*(u.targetRotation-u.sourceRotation);if(u.anchor){this.set(v["a"].CENTER,this.calculateCenterRotate(x,u.anchor))}this.set(v["a"].ROTATION,x)}n=true;if(!u.complete){break}}if(a){(function(){t.animations_[i]=null;t.setHint(p["a"].ANIMATING,-1);var e=r[0].callback;if(e){setTimeout(function(){e(true)},0)}})()}}this.animations_=this.animations_.filter(Boolean);if(n&&this.updateAnimationKey_===undefined){this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_)}};T.prototype.calculateCenterRotate=function(t,e){var n=void 0;var i=this.getCenter();if(i!==undefined){n=[i[0]-e[0],i[1]-e[1]];Object(m["f"])(n,t-this.getRotation());Object(m["a"])(n,e)}return n};T.prototype.calculateCenterZoom=function(t,e){var n=void 0;var i=this.getCenter();var r=this.getResolution();if(i!==undefined&&r!==undefined){var a=e[0]-t*(e[0]-i[0])/r;var o=e[1]-t*(e[1]-i[1])/r;n=[a,o]}return n};T.prototype.getSizeFromViewport_=function(){var t=[100,100];var e='.ol-viewport[data-view="'+Object(r["c"])(this)+'"]';var n=document.querySelector(e);if(n){var i=getComputedStyle(n);t[0]=parseInt(i.width,10);t[1]=parseInt(i.height,10)}return t};T.prototype.constrainCenter=function(t){return this.constraints_.center(t)};T.prototype.constrainResolution=function(t,e,n){var i=e||0;var r=n||0;return this.constraints_.resolution(t,i,r)};T.prototype.constrainRotation=function(t,e){var n=e||0;return this.constraints_.rotation(t,n)};T.prototype.getCenter=function(){return this.get(v["a"].CENTER)};T.prototype.getConstraints=function(){return this.constraints_};T.prototype.getHints=function(t){if(t!==undefined){t[0]=this.hints_[0];t[1]=this.hints_[1];return t}else{return this.hints_.slice()}};T.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_();var n=this.getCenter();Object(g["a"])(n,1);var i=this.getResolution();Object(g["a"])(i!==undefined,2);var r=this.getRotation();Object(g["a"])(r!==undefined,3);return Object(y["z"])(n,i,r,e)};T.prototype.getMaxResolution=function(){return this.maxResolution_};T.prototype.getMinResolution=function(){return this.minResolution_};T.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)};T.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))};T.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)};T.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))};T.prototype.getProjection=function(){return this.projection_};T.prototype.getResolution=function(){return this.get(v["a"].RESOLUTION)};T.prototype.getResolutions=function(){return this.resolutions_};T.prototype.getResolutionForExtent=function(t,e){var n=e||this.getSizeFromViewport_();var i=Object(y["E"])(t)/n[0];var r=Object(y["A"])(t)/n[1];return Math.max(i,r)};T.prototype.getResolutionForValueFunction=function(t){var e=t||2;var n=this.maxResolution_;var i=this.minResolution_;var r=Math.log(n/i)/Math.log(e);return function(t){var i=n/Math.pow(e,t*r);return i}};T.prototype.getRotation=function(){return this.get(v["a"].ROTATION)};T.prototype.getValueForResolutionFunction=function(t){var e=t||2;var n=this.maxResolution_;var i=this.minResolution_;var r=Math.log(n/i)/Math.log(e);return function(t){var i=Math.log(n/t)/Math.log(e)/r;return i}};T.prototype.getState=function(){var t=this.getCenter();var e=this.getProjection();var n=this.getResolution();var i=this.getRotation();return{center:t.slice(),projection:e!==undefined?e:null,resolution:n,rotation:i,zoom:this.getZoom()}};T.prototype.getZoom=function(){var t=void 0;var e=this.getResolution();if(e!==undefined){t=this.getZoomForResolution(e)}return t};T.prototype.getZoomForResolution=function(t){var e=this.minZoom_||0;var n=void 0,i=void 0;if(this.resolutions_){var r=Object(c["h"])(this.resolutions_,t,1);e=r;n=this.resolutions_[r];if(r==this.resolutions_.length-1){i=2}else{i=n/this.resolutions_[r+1]}}else{n=this.maxResolution_;i=this.zoomFactor_}return e+Math.log(n/t)/Math.log(i)};T.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)};T.prototype.fit=function(t,e){var n=e||{};var i=n.size;if(!i){i=this.getSizeFromViewport_()}var r=void 0;if(!(t instanceof x["a"])){Object(g["a"])(Array.isArray(t),24);Object(g["a"])(!Object(y["H"])(t),25);r=Object(w["c"])(t)}else if(t.getType()===b["a"].CIRCLE){t=t.getExtent();r=Object(w["c"])(t);r.rotate(this.getRotation(),Object(y["x"])(t))}else{r=t}var o=n.padding!==undefined?n.padding:[0,0,0,0];var s=n.constrainResolution!==undefined?n.constrainResolution:true;var l=n.nearest!==undefined?n.nearest:false;var u=void 0;if(n.minResolution!==undefined){u=n.minResolution}else if(n.maxZoom!==undefined){u=this.constrainResolution(this.maxResolution_,n.maxZoom-this.minZoom_,0)}else{u=0}var c=r.getFlatCoordinates();var f=this.getRotation();var h=Math.cos(-f);var d=Math.sin(-f);var p=+Infinity;var v=+Infinity;var m=-Infinity;var _=-Infinity;var S=r.getStride();for(var C=0,E=c.length;C<E;C+=S){var O=c[C]*h-c[C+1]*d;var T=c[C]*d+c[C+1]*h;p=Math.min(p,O);v=Math.min(v,T);m=Math.max(m,O);_=Math.max(_,T)}var M=this.getResolutionForExtent([p,v,m,_],[i[0]-o[1]-o[3],i[1]-o[0]-o[2]]);M=isNaN(M)?u:Math.max(M,u);if(s){var I=this.constrainResolution(M,0,0);if(!l&&I<M){I=this.constrainResolution(I,-1,0)}M=I}d=-d;var R=(p+m)/2;var N=(v+_)/2;R+=(o[1]-o[3])/2*M;N+=(o[0]-o[2])/2*M;var A=R*h-N*d;var L=N*h+R*d;var P=[A,L];var D=n.callback?n.callback:a["c"];if(n.duration!==undefined){this.animate({resolution:M,center:P,duration:n.duration,easing:n.easing},D)}else{this.setResolution(M);this.setCenter(P);setTimeout(D.bind(undefined,true),0)}};T.prototype.centerOn=function(t,e,n){var i=this.getRotation();var r=Math.cos(-i);var a=Math.sin(-i);var o=t[0]*r-t[1]*a;var s=t[1]*r+t[0]*a;var l=this.getResolution();o+=(e[0]/2-n[0])*l;s+=(n[1]-e[1]/2)*l;a=-a;var u=o*r-s*a;var c=s*r+o*a;this.setCenter([u,c])};T.prototype.isDef=function(){return!!this.getCenter()&&this.getResolution()!==undefined};T.prototype.rotate=function(t,e){if(e!==undefined){var n=this.calculateCenterRotate(t,e);this.setCenter(n)}this.setRotation(t)};T.prototype.setCenter=function(t){this.set(v["a"].CENTER,t);if(this.getAnimating()){this.cancelAnimations()}};T.prototype.setHint=function(t,e){this.hints_[t]+=e;this.changed();return this.hints_[t]};T.prototype.setResolution=function(t){this.set(v["a"].RESOLUTION,t);if(this.getAnimating()){this.cancelAnimations()}};T.prototype.setRotation=function(t){this.set(v["a"].ROTATION,t);if(this.getAnimating()){this.cancelAnimations()}};T.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))};function M(t){if(t.extent!==undefined){return s(t.extent)}else{return l}}function I(t){var e=void 0;var n=void 0;var r=void 0;var a=28;var o=2;var s=t.minZoom!==undefined?t.minZoom:O;var l=t.maxZoom!==undefined?t.maxZoom:a;var u=t.zoomFactor!==undefined?t.zoomFactor:o;if(t.resolutions!==undefined){var c=t.resolutions;n=c[s];r=c[l]!==undefined?c[l]:c[c.length-1];e=f(c)}else{var d=Object(C["e"])(t.projection,"EPSG:3857");var p=d.getExtent();var v=!p?360*C["a"][E["b"].DEGREES]/d.getMetersPerUnit():Math.max(Object(y["E"])(p),Object(y["A"])(p));var g=v/i["b"]/Math.pow(o,O);var m=g/Math.pow(o,a-O);n=t.maxResolution;if(n!==undefined){s=0}else{n=g/Math.pow(u,s)}r=t.minResolution;if(r===undefined){if(t.maxZoom!==undefined){if(t.maxResolution!==undefined){r=n/Math.pow(u,l)}else{r=g/Math.pow(u,l)}}else{r=m}}l=s+Math.floor(Math.log(n/r)/Math.log(u));r=n/Math.pow(u,l-s);e=h(u,n,l-s)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:s,zoomFactor:u}}function R(t){var e=t.enableRotation!==undefined?t.enableRotation:true;if(e){var n=t.constrainRotation;if(n===undefined||n===true){return Object(d["b"])()}else if(n===false){return d["d"]}else if(typeof n==="number"){return Object(d["a"])(n)}else{return d["d"]}}else{return d["c"]}}function N(t){if(t.sourceCenter&&t.targetCenter){if(!Object(m["e"])(t.sourceCenter,t.targetCenter)){return false}}if(t.sourceResolution!==t.targetResolution){return false}if(t.sourceRotation!==t.targetRotation){return false}return true}var A=e["a"]=T},function(t,e,n){"use strict";n.d(e,"a",function(){return i});n.d(e,"c",function(){return r});n.d(e,"b",function(){return a});n.d(e,"f",function(){return o});n.d(e,"e",function(){return s});n.d(e,"d",function(){return l});function i(t,e){var n=document.createElement("CANVAS");if(t){n.width=t}if(e){n.height=e}return n.getContext("2d")}function r(t){var e=t.offsetWidth;var n=getComputedStyle(t);e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10);return e}function a(t){var e=t.offsetHeight;var n=getComputedStyle(t);e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10);return e}function o(t,e){var n=e.parentNode;if(n){n.replaceChild(t,e)}}function s(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function l(t){while(t.lastChild){t.removeChild(t.lastChild)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});function i(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false}}function r(t){if(t._pf==null){t._pf=i()}return t._pf}},function(t,e,n){"use strict";var i=n(11);e["a"]={SINGLECLICK:"singleclick",CLICK:i["a"].CLICK,DBLCLICK:i["a"].DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});n.d(e,"b",function(){return l});n.d(e,"c",function(){return c});n.d(e,"d",function(){return h});n.d(e,"f",function(){return d});n.d(e,"i",function(){return p});n.d(e,"l",function(){return v});n.d(e,"g",function(){return m});n.d(e,"h",function(){return _});n.d(e,"k",function(){return y});n.d(e,"m",function(){return b});n.d(e,"e",function(){return w});n.d(e,"j",function(){return x});var i=n(49);var r=n(27);var a=n(20);var o=n(70);var s=function t(e){var n=e.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey};var l=function t(e){var n=e.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey};var u=function t(e){return e.target.getTargetElement()===document.activeElement};var c=a["b"];var f=function t(e){return e.type==i["a"].CLICK};var h=function t(e){var n=e.originalEvent;return n.button==0&&!(o["i"]&&o["d"]&&n.ctrlKey)};var d=a["a"];var p=function t(e){return e.type=="pointermove"};var v=function t(e){return e.type==i["a"].SINGLECLICK};var g=function t(e){return e.type==i["a"].DBLCLICK};var m=function t(e){var n=e.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey};var _=function t(e){var n=e.originalEvent;return!n.altKey&&(o["d"]?n.metaKey:n.ctrlKey)&&!n.shiftKey};var y=function t(e){var n=e.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey};var b=function t(e){var n=e.originalEvent.target;var i=n.tagName;return i!=="INPUT"&&i!=="SELECT"&&i!=="TEXTAREA"};var w=function t(e){Object(r["a"])(e.pointerEvent,56);return e.pointerEvent.pointerType=="mouse"};var x=function t(e){var n=e.pointerEvent;return n.isPrimary&&n.button===0}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});n.d(e,"c",function(){return l});n.d(e,"b",function(){return u});var i=n(71);var r=n(164);var a=n(41);var o={};function s(t,e){var n,i=e;if(typeof t==="string"){t=[t]}if(Object(r["a"])(e)){i=function(t,n){n[e]=Object(a["a"])(t)}}for(n=0;n<t.length;n++){o[t[n]]=i}}function l(t,e){s(t,function(t,n,i,r){i._w=i._w||{};e(t,i._w,i,r)})}function u(t,e,n){if(e!=null&&Object(i["a"])(o,t)){o[t](e,n._a,n,t)}}},function(t,e,n){"use strict";var i=n(1);var r=n(202);var a=n(229);var o=function t(e){var n=e||{};var i=n.projection!==undefined?n.projection:"EPSG:3857";var o=n.tileGrid!==undefined?n.tileGrid:Object(a["a"])({extent:Object(a["b"])(i),maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});r["a"].call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:n.opaque,projection:i,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX!==undefined?n.wrapX:true,transition:n.transition})};Object(i["d"])(o,r["a"]);var s=o;var l="&copy; "+'<a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> '+"contributors.";var u=function t(e){var n=e||{};var i=void 0;if(n.attributions!==undefined){i=n.attributions}else{i=[l]}var r=n.crossOrigin!==undefined?n.crossOrigin:"anonymous";var a=n.url!==undefined?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";s.call(this,{attributions:i,cacheSize:n.cacheSize,crossOrigin:r,opaque:n.opaque!==undefined?n.opaque:true,maxZoom:n.maxZoom!==undefined?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:a,wrapX:n.wrapX})};Object(i["d"])(u,s);var c=e["a"]=u},function(t,e,n){"use strict";var i=n(2);var r=n(201);var a=n(180);var o=n(45);var s=n(244);var l=n(197);var u=n(153);var c=n(361);var f=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function h(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function d(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var v=function(t){p(e,t);function e(n){h(this,e);var r=d(this,t.call(this,n));r.dimensionsConfig_=n.dimensionsConfig||null;r.dimensionsFiltersConfig_=n.dimensionsFiltersConfig||null;r.filterCondition_=n.filterCondition||a["a"].AND;r.filterRules_=n.filterRules||null;r.filtrable_=n.filtrable||null;r.copyable_=n.copyable===true;r.dimensions_=n.dimensions||null;r.geometryName_=n.geometryName||e.DEFAULT_GEOMETRY_NAME_;r.ogcImageType_=n.ogcImageType||"image/png";r.ogcLayers_=n.ogcLayers||null;r.ogcServerType_=n.ogcServerType||e.ServerType.MAPSERVER;r.ogcType_=n.ogcType||e.Type.WMS;r.snappable_=n.snappable===true;r.snappingToEdges_=n.snappingToEdges!==false;r.snappingToVertice_=n.snappingToVertice!==false;r.snappingTolerance_=n.snappingTolerance!==undefined?n.snappingTolerance:10;r.timeAttributeName_=n.timeAttributeName;r.timeLowerValue_=n.timeLowerValue;r.timeProperty_=n.timeProperty!==undefined?n.timeProperty:null;r.timeUpperValue_=n.timeUpperValue;r.wfsFeatureNS_=n.wfsFeatureNS||e.WFSFeatureNS[r.ogcServerType_];r.wfsFeaturePrefix_=n.wfsFeaturePrefix||e.WFSFeaturePrefix.FEATURE;r.wfsOutputFormat_=n.wfsOutputFormat||e.WFSOutputFormat.GML3;r.wfsUrl_=n.wfsUrl;r.wmsInfoFormat_=n.wmsInfoFormat||e.WMSInfoFormat.GML;r.wmsIsSingleTile_=n.wmsIsSingleTile===true;r.wmsUrl_=n.wmsUrl;r.wmtsLayer_=n.wmtsLayer;r.wmtsUrl_=n.wmtsUrl;var o=[];if(r.queryable&&r.ogcLayers){for(var f=r.ogcLayers,p=Array.isArray(f),v=0,f=p?f:f[Symbol.iterator]();;){var g;if(p){if(v>=f.length)break;g=f[v++]}else{v=f.next();if(v.done)break;g=v.value}var m=g;if(m.queryable){o.push(m.name)}}}var _=null;if(r.supportsWFS&&o.length){var y=undefined;if(r.wfsOutputFormat_===e.WFSOutputFormat.GML3){y=new l["a"]}else if(r.wfsOutputFormat_===e.WFSOutputFormat.GML2){y=new s["a"]}i["a"].assert(y);_=new u["a"]({featureNS:r.wfsFeatureNS,featureType:o,gmlFormat:y})}r.wfsFormat_=_;var b=null;if(r.supportsWMS&&o.length){if(r.wmsInfoFormat===e.WMSInfoFormat.GML){b=new c["a"]({layers:o})}}r.wmsFormat_=b;return r}e.prototype.getAttributes=function e(){return t.prototype.attributes};e.prototype.setAttributes=function e(n){t.prototype.setAttributes.call(this,n);this.updateGeometryNameFromAttributes_()};e.prototype.combinableWithDataSourceForWFS=function t(e){return this.combinableForWFS&&e.combinableForWFS&&this.supportsWFS&&e.supportsWFS&&this.queryable&&e.queryable&&this.wfsUrl===e.wfsUrl&&this.haveTheSameActiveDimensions(e)};e.prototype.combinableWithDataSourceForWMS=function t(e){return this.combinableForWMS&&e.combinableForWMS&&this.supportsWMS&&e.supportsWMS&&this.queryable&&e.queryable&&this.wmsUrl===e.wmsUrl&&this.haveTheSameActiveDimensions(e)};e.prototype.isAnyOGCLayerInRange=function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return!!this.getInRangeOGCLayerNames(e,n).length};e.prototype.getInRangeOGCLayerNames=function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=[];if(this.ogcLayers){for(var r=this.ogcLayers,a=Array.isArray(r),o=0,r=a?r:r[Symbol.iterator]();;){var s;if(a){if(o>=r.length)break;s=r[o++]}else{o=r.next();if(o.done)break;s=o.value}var l=s;var u=l.maxResolution;var c=l.minResolution;var f=c===undefined||e>=c;var h=u===undefined||e<=u;var d=f&&h;if(d&&(!n||l.queryable)){i.push(l.name)}}}return i};e.prototype.getOGCLayerNames=function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var n=[];if(this.ogcLayers){for(var i=this.ogcLayers,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(!e||s.queryable){n.push(s.name)}}}return n};e.prototype.getFiltrableOGCLayerName=function t(){i["a"].assert(this.filtrable);var e=this.getOGCLayerNames();i["a"].assert(e.length===1);return e[0]};e.prototype.updateGeometryNameFromAttributes_=function t(){var n=e.DEFAULT_GEOMETRY_NAME_;if(this.attributes){for(var i=this.attributes,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var s;if(r){if(a>=i.length)break;s=i[a++]}else{a=i.next();if(a.done)break;s=a.value}var l=s;if(l.type===o["a"].GEOMETRY){n=l.name;break}}}this.geometryName_=n};e.prototype.haveTheSameActiveDimensions=function t(e){var n=true;var i=this.activeDimensions;var r=e.activeDimensions;for(var a in i){if(i[a]!==r[a]){n=false;break}}if(n){for(var o in r){if(r[o]!==i[o]){n=false;break}}}return n};f(e,[{key:"dimensions",get:function t(){return this.dimensions_}},{key:"dimensionsConfig",get:function t(){return this.dimensionsConfig_},set:function t(e){this.dimensionsConfig_=e}},{key:"dimensionsFiltersConfig",get:function t(){return this.dimensionsFiltersConfig_},set:function t(e){this.dimensionsFiltersConfig_=e}},{key:"filterCondition",get:function t(){return this.filterCondition_},set:function t(e){this.filterCondition_=e}},{key:"filterRules",get:function t(){return this.filterRules_},set:function t(e){this.filterRules_=e}},{key:"timeLowerValue",get:function t(){return this.timeLowerValue_},set:function t(e){this.timeLowerValue_=e}},{key:"timeRangeValue",get:function t(){var e=null;var n=this.timeLowerValue;var i=this.timeUpperValue;if(n!==undefined){e={end:i,start:n}}return e},set:function t(e){if(e){this.timeUpperValue=e.end;this.timeLowerValue=e.start}else{this.timeUpperValue=undefined;this.timeLowerValue=undefined}}},{key:"timeUpperValue",get:function t(){return this.timeUpperValue_},set:function t(e){this.timeUpperValue_=e}},{key:"copyable",get:function t(){return this.copyable_}},{key:"filtrable",get:function t(){return this.filtrable_},set:function t(e){this.filtrable_=e}},{key:"geometryName",get:function t(){return this.geometryName_}},{key:"ogcImageType",get:function t(){return this.ogcImageType_}},{key:"ogcLayers",get:function t(){return this.ogcLayers_}},{key:"ogcServerType",get:function t(){return this.ogcServerType_}},{key:"ogcType",get:function t(){return this.ogcType_}},{key:"snappable",get:function t(){return this.snappable_}},{key:"snappingToEdges",get:function t(){return this.snappingToEdges_}},{key:"snappingToVertice",get:function t(){return this.snappingToVertice_}},{key:"snappingTolerance",get:function t(){return this.snappingTolerance_}},{key:"timeAttributeName",get:function t(){return this.timeAttributeName_}},{key:"timeProperty",get:function t(){return this.timeProperty_}},{key:"wfsFeatureNS",get:function t(){return this.wfsFeatureNS_}},{key:"wfsFeaturePrefix",get:function t(){return this.wfsFeaturePrefix_}},{key:"wfsOutputFormat",get:function t(){return this.wfsOutputFormat_}},{key:"wfsUrl",get:function t(){return this.wfsUrl_}},{key:"wmsInfoFormat",get:function t(){return this.wmsInfoFormat_}},{key:"wmsIsSingleTile",get:function t(){return this.wmsIsSingleTile_}},{key:"wmsUrl",get:function t(){return this.wmsUrl_}},{key:"wmtsLayer",get:function t(){return this.wmtsLayer_}},{key:"wmtsUrl",get:function t(){return this.wmtsUrl_}},{key:"activeDimensions",get:function t(){var e={};var n=this.dimensions_||{};var i=this.dimensionsConfig||{};for(var r in i){if(i[r]===null){if(n[r]!==undefined&&n[r]!==null){e[r]=n[r]}}else{e[r]=i[r]}}return e}},{key:"combinableForWFS",get:function t(){return this.filterRules_===null&&this.timeRangeValue===null}},{key:"combinableForWMS",get:function t(){return this.filterRules_===null&&this.timeRangeValue===null}},{key:"queryable",get:function t(){var e=false;var n=this.supportsWMS||this.supportsWFS;if(n&&this.ogcLayers){for(var i=this.ogcLayers,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.queryable===true){e=true;break}}}return e}},{key:"supportsWFS",get:function t(){return this.wfsUrl!==undefined}},{key:"supportsAttributes",get:function t(){return this.attributes!==null||this.supportsWFS&&this.ogcLayers!==null&&this.ogcLayers.length===1&&this.ogcLayers[0].queryable===true}},{key:"supportsWMS",get:function t(){return this.wmsUrl!==undefined}},{key:"supportsWMTS",get:function t(){return this.wmtsUrl!==undefined}},{key:"wfsFormat",get:function t(){return this.wfsFormat_}},{key:"wmsFormat",get:function t(){return this.wmsFormat_}}]);return e}(r["a"]);v.guessServiceTypeByUrl=function(t){var e=void 0;if(/(wmts)/i.test(t)){e=v.Type.WMTS}else{e=v.Type.WMS}return e};v.DEFAULT_GEOMETRY_NAME_="the_geom";v.ServerType={GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGISSERVER:"qgisserver"};v.Type={WMS:"WMS",WMTS:"WMTS"};v.WFSFeatureNS={geoserver:"http://www.opengis.net/gml/3.2",mapserver:"http://mapserver.gis.umn.edu/mapserver",qgisserver:"http://www.qgis.org/gml"};v.WFSFeaturePrefix={FEATURE:"feature"};v.WFSOutputFormat={GML2:"GML2",GML3:"GML3"};v.WMSInfoFormat={GML:"application/vnd.ogc.gml"};e["a"]=v},function(t,e,n){"use strict";var i=n(2);var r=n(3);var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function t(e){o(this,t);this.active_=e.active===true;this.expression=e.expression!==undefined?e.expression:null;this.lowerBoundary_=e.lowerBoundary!==undefined?e.lowerBoundary:null;this.operator_=e.operator||null;this.upperBoundary_=e.upperBoundary!==undefined?e.upperBoundary:null;this.isCustom_=e.isCustom!==false;this.name_=e.name;this.operators_=e.operators||null;this.propertyName_=e.propertyName;this.type_=i["a"].assert(e.type);this.listenerKeys=[]}t.prototype.getExpression=function t(){return this.expression};t.prototype.setExpression=function t(e){this.expression=e};t.prototype.reset=function t(){if(this.getExpression()!==null){this.setExpression(null)}if(this.lowerBoundary!==null){this.lowerBoundary=null}if(this.upperBoundary!==null){this.upperBoundary=null}};t.prototype.destroy=function t(){this.listenerKeys.forEach(r["e"]);this.listenerKeys.length=0};a(t,[{key:"active",get:function t(){return this.active_},set:function t(e){this.active_=e}},{key:"lowerBoundary",get:function t(){return this.lowerBoundary_},set:function t(e){this.lowerBoundary_=e}},{key:"operator",get:function t(){return this.operator_},set:function t(e){this.operator_=e}},{key:"upperBoundary",get:function t(){return this.upperBoundary_},set:function t(e){this.upperBoundary_=e}},{key:"isCustom",get:function t(){return this.isCustom_}},{key:"name",get:function t(){return this.name_}},{key:"operators",get:function t(){return this.operators_}},{key:"propertyName",get:function t(){return this.propertyName_}},{key:"type",get:function t(){return this.type_}},{key:"value",get:function e(){var n=null;var i=this.getExpression();var r=this.lowerBoundary;var a=this.operator;var o=this.propertyName;var s=this.upperBoundary;if(a){if(a===t.OperatorType.BETWEEN||a===t.TemporalOperatorType.DURING){if(r!==null&&s!==null){n={operator:a,lowerBoundary:r,propertyName:o,upperBoundary:s}}}else{if(i!==null){n={expression:i,operator:a,propertyName:o}}}}return n}}]);return t}();s.OperatorType={BETWEEN:"..",EQUAL_TO:"=",GREATER_THAN:">",GREATER_THAN_OR_EQUAL_TO:">=",LESSER_THAN:"<",LESSER_THAN_OR_EQUAL_TO:"<=",LIKE:"~",NOT_EQUAL_TO:"!="};s.SpatialOperatorType={CONTAINS:"contains",INTERSECTS:"intersects",WITHIN:"within"};s.TemporalOperatorType={BEGINS:"time_start",DURING:"time_during",ENDS:"time_end",EQUALS:"time_equal"};e["a"]=s},function(t,e,n){"use strict";var i={};i.DATALAYERGROUP_NAME="data";i.EXTERNALLAYERGROUP_NAME="external";i.COORDINATES_LAYER_NAME="gmfCoordinatesLayerName";i.PermalinkParam={BG_LAYER:"baselayer_ref",BG_LAYER_OPACITY:"baselayer_opacity",EXTERNAL_DATASOURCES_NAMES:"eds_n",EXTERNAL_DATASOURCES_URLS:"eds_u",FEATURES:"rl_features",MAP_CROSSHAIR:"map_crosshair",MAP_TOOLTIP:"map_tooltip",MAP_X:"map_x",MAP_Y:"map_y",MAP_Z:"map_zoom",TREE_GROUPS:"tree_groups",WFS_LAYER:"wfs_layer",WFS_NGROUPS:"wfs_ngroups",WFS_SHOW_FEATURES:"wfs_showFeatures"};e["a"]=i},function(t,e,n){"use strict";var i=n(329);var r=n(259);var a=n(119);var o=n(109);var s=angular.module("gmfMapComponent",[i["a"].name,r["a"].module.name,a["a"].name,o["a"].module.name]);s.run(["$templateCache",function(t){t.put("gmf/map",n(489))}]);s.directive_=function(){return{scope:{map:"<gmfMapMap",manageResize:"<gmfMapManageResize",resizeTransition:"<gmfMapResizeTransition"},controller:"GmfMapController as ctrl",bindToController:true,templateUrl:"gmf/map"}};s.directive("gmfMap",s.directive_);s.Controller_=function(t,e,n){this.map;this.manageResize;this.resizeTransition;this.ngeoFeatureOverlayMgr_=t;this.gmfPermalink_=e;this.gmfSnapping_=n};s.Controller_.$inject=["ngeoFeatureOverlayMgr","gmfPermalink","gmfSnapping"];s.Controller_.prototype.$onInit=function(){this.ngeoFeatureOverlayMgr_.init(this.map);this.gmfPermalink_.setMap(this.map);this.gmfSnapping_.setMap(this.map)};s.controller("GmfMapController",s.Controller_);e["a"]=s},function(t,e,n){"use strict";var i=n(1);var r=n(19);var a=n(82);var o=n(167);var s=n(7);var l=n(27);var u=n(3);var c=n(42);var f=n(11);var h=n(4);var d=n(20);var p=n(170);function v(t,e,n,i){return function(r,a,o){var s=new XMLHttpRequest;s.open("GET",typeof t==="function"?t(r,a,o):t,true);if(e.getType()==p["a"].ARRAY_BUFFER){s.responseType="arraybuffer"}s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var r=e.getType();var a=void 0;if(r==p["a"].JSON||r==p["a"].TEXT){a=s.responseText}else if(r==p["a"].XML){a=s.responseXML;if(!a){a=(new DOMParser).parseFromString(s.responseText,"application/xml")}}else if(r==p["a"].ARRAY_BUFFER){a=s.response}if(a){n.call(this,e.readFeatures(a,{featureProjection:o}),e.readProjection(a),e.getLastExtent())}else{i.call(this)}}else{i.call(this)}}.bind(this);s.onerror=function(){i.call(this)}.bind(this);s.send()}}function g(t,e){return v(t,e,function(t,e){this.addFeatures(t)},d["c"])}function m(t,e){return[[-Infinity,-Infinity,Infinity,Infinity]]}function _(t,e){return[t]}function y(t){return function(e,n){var i=t.getZForResolution(n);var r=t.getTileRangeForExtentAndZ(e,i);var a=[];var o=[i,0,0];for(o[1]=r.minX;o[1]<=r.maxX;++o[1]){for(o[2]=r.minY;o[2]<=r.maxY;++o[2]){a.push(t.getTileCoordExtent(o))}}return a}}var b=n(9);var w=n(203);var x=n(163);var S=n(151);var C=n(200);n.d(e,"a",function(){return E});var E=function t(e,n){c["a"].call(this,e);this.feature=n};Object(i["d"])(E,c["a"]);var O=function t(e){var n=e||{};w["a"].call(this,{attributions:n.attributions,projection:undefined,state:x["a"].READY,wrapX:n.wrapX!==undefined?n.wrapX:true});this.loader_=d["c"];this.format_=n.format;this.overlaps_=n.overlaps==undefined?true:n.overlaps;this.url_=n.url;if(n.loader!==undefined){this.loader_=n.loader}else if(this.url_!==undefined){Object(l["a"])(this.format_,7);this.loader_=g(this.url_,this.format_)}this.strategy_=n.strategy!==undefined?n.strategy:m;var i=n.useSpatialIndex!==undefined?n.useSpatialIndex:true;this.featuresRtree_=i?new C["a"]:null;this.loadedExtentsRtree_=new C["a"];this.nullGeometryFeatures_={};this.idIndex_={};this.undefIdIndex_={};this.featureChangeKeys_={};this.featuresCollection_=null;var a=void 0,o=void 0;if(n.features instanceof r["b"]){a=n.features;o=a.getArray()}else if(Array.isArray(n.features)){o=n.features}if(!i&&a===undefined){a=new r["b"](o)}if(o!==undefined){this.addFeaturesInternal(o)}if(a!==undefined){this.bindFeaturesCollection_(a)}};Object(i["d"])(O,w["a"]);O.prototype.addFeature=function(t){this.addFeatureInternal(t);this.changed()};O.prototype.addFeatureInternal=function(t){var e=Object(i["c"])(t).toString();if(!this.addToIndex_(e,t)){return}this.setupChangeEvents_(e,t);var n=t.getGeometry();if(n){var r=n.getExtent();if(this.featuresRtree_){this.featuresRtree_.insert(r,t)}}else{this.nullGeometryFeatures_[e]=t}this.dispatchEvent(new E(S["a"].ADDFEATURE,t))};O.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(u["a"])(e,f["a"].CHANGE,this.handleFeatureChange_,this),Object(u["a"])(e,o["a"].PROPERTYCHANGE,this.handleFeatureChange_,this)]};O.prototype.addToIndex_=function(t,e){var n=true;var i=e.getId();if(i!==undefined){if(!(i.toString()in this.idIndex_)){this.idIndex_[i.toString()]=e}else{n=false}}else{Object(l["a"])(!(t in this.undefIdIndex_),30);this.undefIdIndex_[t]=e}return n};O.prototype.addFeatures=function(t){this.addFeaturesInternal(t);this.changed()};O.prototype.addFeaturesInternal=function(t){var e=[];var n=[];var r=[];for(var a=0,o=t.length;a<o;a++){var s=t[a];var l=Object(i["c"])(s).toString();if(this.addToIndex_(l,s)){n.push(s)}}for(var u=0,c=n.length;u<c;u++){var f=n[u];var h=Object(i["c"])(f).toString();this.setupChangeEvents_(h,f);var d=f.getGeometry();if(d){var p=d.getExtent();e.push(p);r.push(f)}else{this.nullGeometryFeatures_[h]=f}}if(this.featuresRtree_){this.featuresRtree_.load(e,r)}for(var v=0,g=n.length;v<g;v++){this.dispatchEvent(new E(S["a"].ADDFEATURE,n[v]))}};O.prototype.bindFeaturesCollection_=function(t){var e=false;Object(u["a"])(this,S["a"].ADDFEATURE,function(n){if(!e){e=true;t.push(n.feature);e=false}});Object(u["a"])(this,S["a"].REMOVEFEATURE,function(n){if(!e){e=true;t.remove(n.feature);e=false}});Object(u["a"])(t,a["a"].ADD,function(t){if(!e){e=true;this.addFeature(t.element);e=false}},this);Object(u["a"])(t,a["a"].REMOVE,function(t){if(!e){e=true;this.removeFeature(t.element);e=false}},this);this.featuresCollection_=t};O.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){var n=this.featureChangeKeys_[e];n.forEach(u["e"])}if(!this.featuresCollection_){this.featureChangeKeys_={};this.idIndex_={};this.undefIdIndex_={}}}else{if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal,this);for(var i in this.nullGeometryFeatures_){this.removeFeatureInternal(this.nullGeometryFeatures_[i])}}}if(this.featuresCollection_){this.featuresCollection_.clear()}if(this.featuresRtree_){this.featuresRtree_.clear()}this.loadedExtentsRtree_.clear();this.nullGeometryFeatures_={};var r=new E(S["a"].CLEAR);this.dispatchEvent(r);this.changed()};O.prototype.forEachFeature=function(t){if(this.featuresRtree_){return this.featuresRtree_.forEach(t)}else if(this.featuresCollection_){return this.featuresCollection_.forEach(t)}};O.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(n){var i=n.getGeometry();if(i.intersectsCoordinate(t)){return e(n)}else{return undefined}})};O.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_){return this.featuresRtree_.forEachInExtent(t,e)}else if(this.featuresCollection_){return this.featuresCollection_.forEach(e)}};O.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(n){var i=n.getGeometry();if(i.intersectsExtent(t)){var r=e(n);if(r){return r}}})};O.prototype.getFeaturesCollection=function(){return this.featuresCollection_};O.prototype.getFeatures=function(){var t=void 0;if(this.featuresCollection_){t=this.featuresCollection_.getArray()}else if(this.featuresRtree_){t=this.featuresRtree_.getAll();if(!Object(b["d"])(this.nullGeometryFeatures_)){Object(s["c"])(t,Object(b["c"])(this.nullGeometryFeatures_))}}return t};O.prototype.getFeaturesAtCoordinate=function(t){var e=[];this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)});return e};O.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)};O.prototype.getClosestFeatureToCoordinate=function(t,e){var n=t[0];var i=t[1];var r=null;var a=[NaN,NaN];var o=Infinity;var s=[-Infinity,-Infinity,Infinity,Infinity];var l=e?e:d["b"];this.featuresRtree_.forEachInExtent(s,function(t){if(l(t)){var e=t.getGeometry();var u=o;o=e.closestPointXY(n,i,a,o);if(o<u){r=t;var c=Math.sqrt(o);s[0]=n-c;s[1]=i-c;s[2]=n+c;s[3]=i+c}}});return r};O.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)};O.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return e!==undefined?e:null};O.prototype.getFormat=function(){return this.format_};O.prototype.getOverlaps=function(){return this.overlaps_};O.prototype.getResolutions=function(){};O.prototype.getUrl=function(){return this.url_};O.prototype.handleFeatureChange_=function(t){var e=t.target;var n=Object(i["c"])(e).toString();var r=e.getGeometry();if(!r){if(!(n in this.nullGeometryFeatures_)){if(this.featuresRtree_){this.featuresRtree_.remove(e)}this.nullGeometryFeatures_[n]=e}}else{var a=r.getExtent();if(n in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[n];if(this.featuresRtree_){this.featuresRtree_.insert(a,e)}}else{if(this.featuresRtree_){this.featuresRtree_.update(a,e)}}}var o=e.getId();if(o!==undefined){var s=o.toString();if(n in this.undefIdIndex_){delete this.undefIdIndex_[n];this.idIndex_[s]=e}else{if(this.idIndex_[s]!==e){this.removeFromIdIndex_(e);this.idIndex_[s]=e}}}else{if(!(n in this.undefIdIndex_)){this.removeFromIdIndex_(e);this.undefIdIndex_[n]=e}}this.changed();this.dispatchEvent(new E(S["a"].CHANGEFEATURE,e))};O.prototype.hasFeature=function(t){var e=t.getId();if(e!==undefined){return e in this.idIndex_}else{var n=Object(i["c"])(t).toString();return n in this.undefIdIndex_}};O.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(b["d"])(this.nullGeometryFeatures_)};O.prototype.loadFeatures=function(t,e,n){var i=this;var r=this.loadedExtentsRtree_;var a=this.strategy_(t,e);var o=function t(o,s){var l=a[o];var u=r.forEachInExtent(l,function(t){return Object(h["g"])(t.extent,l)});if(!u){i.loader_.call(i,l,e,n);r.insert(l,{extent:l.slice()})}};for(var s=0,l=a.length;s<l;++s){o(s,l)}};O.prototype.removeLoadedExtent=function(t){var e=this.loadedExtentsRtree_;var n=void 0;e.forEachInExtent(t,function(e){if(Object(h["p"])(e.extent,t)){n=e;return true}});if(n){e.remove(n)}};O.prototype.removeFeature=function(t){var e=Object(i["c"])(t).toString();if(e in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[e]}else{if(this.featuresRtree_){this.featuresRtree_.remove(t)}}this.removeFeatureInternal(t);this.changed()};O.prototype.removeFeatureInternal=function(t){var e=Object(i["c"])(t).toString();this.featureChangeKeys_[e].forEach(u["e"]);delete this.featureChangeKeys_[e];var n=t.getId();if(n!==undefined){delete this.idIndex_[n.toString()]}else{delete this.undefIdIndex_[e]}this.dispatchEvent(new E(S["a"].REMOVEFEATURE,t))};O.prototype.removeFromIdIndex_=function(t){var e=false;for(var n in this.idIndex_){if(this.idIndex_[n]===t){delete this.idIndex_[n];e=true;break}}return e};O.prototype.setLoader=function(t){this.loader_=t};var T=e["b"]=O},function(t,e,n){"use strict";e["a"]={ANIMATING:0,INTERACTING:1}},function(t,e,n){"use strict";var i=n(10);var r=n(322);var a=n(321);var o=n(225);var s=["+proj="+a["a"],"+lat_0=46.95240555555556","+lon_0=7.439583333333333","+k_0=1","+x_0=600000","+y_0=200000","+ellps=bessel","+towgs84=674.374,15.056,405.346,0,0,0,0","+units=m","+no_defs"].join(" ");var l=[42e4,3e4,9e5,35e4];o["a"].defs("EPSG:21781",s);r["a"](o["a"]);i["h"]("EPSG:21781").setExtent(l);var u="EPSG:21781";e["a"]=u},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n(50);var r=n(36);var a=n(83);var o=n(88);var s=n(89);var l=n(21);var u=n(32);var c=n(4);var f={};f.toMulti=function(t){var e=void 0;if(t instanceof l["a"]){e=new a["a"]([]);e.appendPoint(t)}else if(t instanceof r["a"]){e=new o["a"]([]);e.appendLineString(t)}else if(t instanceof u["a"]){e=new s["a"]([]);e.appendPolygon(t)}else{e=t}return e};f.isSafari=function(){return navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1};f.colorZeroPadding=function(t){return t.length==1?"0"+t:t};f.rgbArrayToHex=function(t){var e=t[0];var n=t[1];var i=t[2];if(e!=(e&255)||n!=(n&255)||i!=(i&255)){throw Error('"('+e+","+n+","+i+')" is not a valid RGB color')}var r=f.colorZeroPadding(e.toString(16));var a=f.colorZeroPadding(n.toString(16));var o=f.colorZeroPadding(i.toString(16));return"#"+r+a+o};f.decodeQueryString=function(t){var e={};if(t){var n=t.substring(1).split("&");for(var i=n,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;var l=s.indexOf("=");if(l>=0){var u=s.substring(0,l);var c=s.substring(l+1);e[decodeURIComponent(u)]=decodeURIComponent(c)}else{e[s]=""}}}return e};f.encodeQueryString=function(t){var e=[];for(var n in t){var i=t[n];e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}return e.join("&")};f.deleteCondition=function(t){return i["g"](t)&&i["l"](t)};function h(t){return[Object(c["C"])(t),Object(c["D"])(t),Object(c["w"])(t),Object(c["v"])(t),Object(c["C"])(t)]}var d={mousedown:false};document.addEventListener("mousedown",function(t){d.mousedown=true});document.addEventListener("mouseup",function(t){d.mousedown=false});e["b"]=f},function(t,e,n){"use strict";var i=n(1);var r=n(139);var a=n(86);var o=n(363);var s=n(9);var l=n(12);var u={IMAGE:"image",VECTOR:"vector"};var c={RENDER_ORDER:"renderOrder"};var f=function t(e){var n=e?e:{};var i=Object(s["a"])({},n);delete i.style;delete i.renderBuffer;delete i.updateWhileAnimating;delete i.updateWhileInteracting;a["a"].call(this,i);this.declutter_=n.declutter!==undefined?n.declutter:false;this.renderBuffer_=n.renderBuffer!==undefined?n.renderBuffer:100;this.style_=null;this.styleFunction_=undefined;this.setStyle(n.style);this.updateWhileAnimating_=n.updateWhileAnimating!==undefined?n.updateWhileAnimating:false;this.updateWhileInteracting_=n.updateWhileInteracting!==undefined?n.updateWhileInteracting:false;this.renderMode_=n.renderMode||o["a"].VECTOR;this.type=r["a"].VECTOR};Object(i["d"])(f,a["a"]);f.prototype.getDeclutter=function(){return this.declutter_};f.prototype.setDeclutter=function(t){this.declutter_=t};f.prototype.getRenderBuffer=function(){return this.renderBuffer_};f.prototype.getRenderOrder=function(){return this.get(c.RENDER_ORDER)};f.prototype.getSource;f.prototype.getStyle=function(){return this.style_};f.prototype.getStyleFunction=function(){return this.styleFunction_};f.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_};f.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_};f.prototype.setRenderOrder=function(t){this.set(c.RENDER_ORDER,t)};f.prototype.setStyle=function(t){this.style_=t!==undefined?t:l["a"];this.styleFunction_=t===null?undefined:Object(l["d"])(this.style_);this.changed()};f.prototype.getRenderMode=function(){return this.renderMode_};e["a"]=f},function(t,e,n){"use strict";n.d(e,"c",function(){return i});n.d(e,"d",function(){return r});n.d(e,"e",function(){return a});n.d(e,"f",function(){return o});n.d(e,"b",function(){return s});n.d(e,"a",function(){return l});n.d(e,"g",function(){return u});var i="ol-hidden";var r="ol-selectable";var a="ol-unselectable";var o="ol-unsupported";var s="ol-control";var l="ol-collapsed";var u=function(){var t=void 0;var e={};return function(n){if(!t){t=document.createElement("div").style}if(!(n in e)){t.font=n;var i=t.fontFamily;t.font="";if(!i){return null}e[n]=i.split(/,\s?/)}return e[n]}}()},function(t,e,n){"use strict";var i=function t(e,n){this.getActive=function(){return e[n]};this.setActive=function(t){e[n]=t}};e["a"]=i},function(t,e,n){"use strict";var i=n(1);var r=n(20);var a=n(193);var o=n(39);var s=n(47);var l=n(3);var u=function t(e){o["a"].call(this);this.element=e.element?e.element:null;this.target_=null;this.map_=null;this.listenerKeys=[];this.render=e.render?e.render:r["c"];if(e.target){this.setTarget(e.target)}};Object(i["d"])(u,o["a"]);u.prototype.disposeInternal=function(){Object(s["e"])(this.element);o["a"].prototype.disposeInternal.call(this)};u.prototype.getMap=function(){return this.map_};u.prototype.setMap=function(t){if(this.map_){Object(s["e"])(this.element)}for(var e=0,n=this.listenerKeys.length;e<n;++e){Object(l["e"])(this.listenerKeys[e])}this.listenerKeys.length=0;this.map_=t;if(this.map_){var i=this.target_?this.target_:t.getOverlayContainerStopEvent();i.appendChild(this.element);if(this.render!==r["c"]){this.listenerKeys.push(Object(l["a"])(t,a["a"].POSTRENDER,this.render,this))}t.render()}};u.prototype.setTarget=function(t){this.target_=typeof t==="string"?document.getElementById(t):t};e["a"]=u},function(t,e,n){"use strict";var i=n(2);var r=n(122);var a=n(218);var o=n(13);var s=n(24);var l=n(105);var u=n(238);var c=n(7);var f=n(84);var h=n(4);var d=n(14);var p=n(36);var v=n(88);var g=n(83);var m=n(21);var _=n(32);var y=n(89);var b=n(360);var w=n(359);var x=n(68);var S=n(33);var C=n(124);var E=n(35);var O=n(12);var T=n(140);var M=function t(e,n){this.$filter_=n;this.decimals_=undefined;if(e.has("ngeoMeasureDecimals")){this.decimals_=e.get("ngeoMeasureDecimals")}this.precision_=undefined;if(e.has("ngeoMeasurePrecision")){this.precision_=e.get("ngeoMeasurePrecision")}this.numberFormat_=n("number");this.unitPrefixFormat_=n("ngeoUnitPrefix");this.ngeoNumberCoordinates_=n("ngeoNumberCoordinates");this.pointFilterFn_=null;this.pointFilterArgs_=[];if(e.has("ngeoPointfilter")){var r=e.get("ngeoPointfilter").split(":");var a=r.shift();var o=this.$filter_(a);i["a"].assertFunction(o);this.pointFilterFn_=o;this.pointFilterArgs_=r}else{this.pointFilterFn_=null}this.projection_;this.download_=e.get("ngeoDownload")};M.$inject=["$injector","$filter"];M.$inject=["$injector","$filter"];M.prototype.setProjection=function(t){this.projection_=t};M.prototype.setStyle=function(t,e){var n=this.getStyle(t);if(e){if(this.supportsVertex_(t)){n.push(this.getVertexStyle())}n.unshift(this.getHaloStyle_(t))}t.setStyle(n)};M.prototype.getStyle=function(t){var e=this.getType(t);var n=void 0;switch(e){case s["a"].LINE_STRING:n=this.getLineStringStyle_(t);break;case s["a"].POINT:n=this.getPointStyle_(t);break;case s["a"].CIRCLE:case s["a"].POLYGON:case s["a"].RECTANGLE:n=this.getPolygonStyle_(t);break;case s["a"].TEXT:n=this.getTextStyle_(t);break;default:break}i["a"].assert(n,"Style should be thruthy");var r=void 0;if(n.constructor===Array){r=n}else{r=[n]}return r};M.prototype.getLineStringStyle_=function(t){var e=this.getStrokeProperty(t);var n=this.getShowLabelProperty(t);var i=this.getShowMeasureProperty(t);var r=this.getRGBAColorProperty(t);var a=[new O["c"]({stroke:new E["a"]({color:r,width:e})})];var o=[];if(i){o.push(this.getMeasure(t))}if(n){o.push(this.getNameProperty(t))}if(n||i){var s=o.join("\n");a.push(new O["c"]({text:this.createTextStyle_({text:s})}))}return a};M.prototype.getPointStyle_=function(t){var e=this.getSizeProperty(t);var n=this.getRGBAColorProperty(t);var i=this.getShowLabelProperty(t);var r=this.getShowMeasureProperty(t);var a=[new O["c"]({image:new x["a"]({radius:e,fill:new S["a"]({color:n})})})];var o=[];if(r){o.push(this.getMeasure(t))}if(i){o.push(this.getNameProperty(t))}if(i||r){var s=o.join("\n");var l=10;var u=1.3;a.push(new O["c"]({text:this.createTextStyle_({text:s,size:l,offsetY:-(e+l/2*o.length*u+4)})}))}return a};M.prototype.optNumber=function(t,e){var n=t.get(e);if(n!==undefined){if(typeof n=="string"){return+n}else{return i["a"].assertNumber(n)}}else{return undefined}};M.prototype.getNumber=function(t,e){var n=t.get(e);if(typeof n=="string"){return+n}else{return i["a"].assertNumber(n)}};M.prototype.getPolygonStyle_=function(t){var e=this.getStrokeProperty(t);var n=this.getOpacityProperty(t);var i=this.getRGBAColorProperty(t);var r=this.getShowLabelProperty(t);var a=this.getShowMeasureProperty(t);var s=i.slice();s[3]=n;var u=this.optNumber(t,o["a"].AZIMUT);var c=[new O["c"]({fill:new S["a"]({color:s}),stroke:new E["a"]({color:i,width:e})})];if(a||r){if(a&&u!==undefined){var f=this.getRadiusLine(t,u);var h=l["a"].getFormattedLength(f,this.projection_,this.precision_,this.unitPrefixFormat_);c.push(new O["c"]({geometry:f,fill:new S["a"]({color:s}),stroke:new E["a"]({color:i,width:e}),text:this.createTextStyle_({text:h,angle:(u%180+180)%180-90})}));c.push(new O["c"]({geometry:new m["a"](f.getLastCoordinate()),text:this.createTextStyle_({text:this.numberFormat_(u,this.decimals_)+"°",size:10,offsetX:Math.cos((u-90)*Math.PI/180)*20,offsetY:Math.sin((u-90)*Math.PI/180)*20})}));if(r){c.push(new O["c"]({text:this.createTextStyle_({text:this.getNameProperty(t),offsetY:-8,exceedLength:true})}))}}else{var d=[];if(a){d.push(this.getMeasure(t))}if(r){d.push(this.getNameProperty(t))}if(r||a){var p=d.join("\n");c.push(new O["c"]({text:this.createTextStyle_({text:p,exceedLength:true})}))}}}return c};M.prototype.getTextStyle_=function(t){return new O["c"]({text:this.createTextStyle_({text:this.getNameProperty(t),size:this.getSizeProperty(t),angle:this.getAngleProperty(t),color:this.getRGBAColorProperty(t),width:this.getStrokeProperty(t)})})};M.prototype.createEditingStyles=function(t){var e=[255,255,255,1];var n=[0,153,255,1];var i=3;var r=[];var a=t.getGeometry();console.assert(a);var o=a.getType();if(o==="Point"){r.push(new O["c"]({image:new x["a"]({radius:i*2,fill:new S["a"]({color:n}),stroke:new E["a"]({color:e,width:i/2})}),zIndex:Infinity}))}else{if(o==="LineString"){r.push(new O["c"]({stroke:new E["a"]({color:e,width:i+2})}));r.push(new O["c"]({stroke:new E["a"]({color:n,width:i})}))}else{r.push(new O["c"]({stroke:new E["a"]({color:n,width:i/2}),fill:new S["a"]({color:[255,255,255,.5]})}))}r.push(this.getVertexStyle(true))}return r};M.prototype.getVertexStyle=function(t){var e=t!==undefined?t:true;var n={image:new C["a"]({radius:6,points:4,angle:Math.PI/4,fill:new S["a"]({color:[255,255,255,.5]}),stroke:new E["a"]({color:[0,0,0,1]})})};if(e){n.geometry=function(t){var e=t.getGeometry();if(e.getType()=="Point"){return}var n=void 0;var i=[];var r=[];var a=void 0,o=void 0;if(e instanceof p["a"]){r=e.getCoordinates()}else if(e instanceof v["a"]){i=e.getCoordinates()}else if(e instanceof _["a"]){r=e.getCoordinates()[0]}else if(e instanceof y["a"]){n=e.getCoordinates()}if(n){for(a=0,o=n.length;a<o;a++){i=i.concat(n[a])}}for(a=0,o=i.length;a<o;a++){r=r.concat(i[a])}if(r.length){return new g["a"](r)}else{return e}}}return new O["c"](n)};M.prototype.supportsVertex_=function(t){var e=[s["a"].LINE_STRING,s["a"].POLYGON,s["a"].RECTANGLE];var n=this.getType(t);return c["f"](e,n)};M.prototype.getHaloStyle_=function(t){var e=this.getType(t);var n=void 0;var r=3;switch(e){case s["a"].POINT:var a=this.getSizeProperty(t);n=new O["c"]({image:new x["a"]({radius:a+r,fill:new S["a"]({color:[255,255,255,1]})})});break;case s["a"].LINE_STRING:case s["a"].CIRCLE:case s["a"].POLYGON:case s["a"].RECTANGLE:var o=this.getStrokeProperty(t);n=new O["c"]({stroke:new E["a"]({color:[255,255,255,1],width:o+r*2})});break;case s["a"].TEXT:n=new O["c"]({text:this.createTextStyle_({text:this.getNameProperty(t),size:this.getSizeProperty(t),angle:this.getAngleProperty(t),width:r*3})});break;default:break}i["a"].assert(n,"Style should be thruthy");return n};M.getFilteredFeatureValues=function(t){var e=t.getProperties();delete e["boundedBy"];delete e[t.getGeometryName()];delete e["ngeo_feature_type_"];return e};M.prototype.getAngleProperty=function(t){var e=+t.get(o["a"].ANGLE);i["a"].assertNumber(e);return e};M.prototype.getColorProperty=function(t){var e=i["a"].assertString(t.get(o["a"].COLOR));i["a"].assertString(e);return e};M.prototype.getRGBAColorProperty=function(t){return f["c"](this.getColorProperty(t))};M.prototype.getNameProperty=function(t){var e=i["a"].assertString(t.get(o["a"].NAME));i["a"].assertString(e);return e};M.prototype.getOpacityProperty=function(t){return this.getNumber(t,o["a"].OPACITY)};M.prototype.getShowMeasureProperty=function(t){var e=t.get(o["a"].SHOW_MEASURE);if(e===undefined){e=false}else if(typeof e==="string"){e=e==="true"?true:false}return i["a"].assertBoolean(e)};M.prototype.getShowLabelProperty=function(t){var e=t.get(o["a"].SHOW_LABEL);if(e===undefined){e=false}else if(typeof e==="string"){e=e==="true"?true:false}return i["a"].assertBoolean(e)};M.prototype.getSizeProperty=function(t){return this.getNumber(t,o["a"].SIZE)};M.prototype.getStrokeProperty=function(t){return this.getNumber(t,o["a"].STROKE)};M.prototype.export=function(t,e){switch(e){case M.FormatType.GPX:this.exportGPX(t);break;case M.FormatType.KML:this.exportKML(t);break;default:break}};M.prototype.exportGPX=function(t){var e=new b["a"];var n="application/gpx+xml";var i="export.gpx";this.export_(t,e,i,n)};M.prototype.exportKML=function(t){var e=new w["a"];var n="application/vnd.google-earth.kml+xml";var i="export.kml";this.export_(t,e,i,n)};M.prototype.export_=function(t,e,n,i){var r=this;var a=i!==undefined?i:"text/plain";var o=[];var s=void 0;t.forEach(function(t){s=new d["a"](t.getProperties());r.setStyle(s,false);o.push(s)});var l=this.projection_?{dataProjection:"EPSG:4326",featureProjection:this.projection_}:{};var u=e.writeFeatures(o,l);this.download_(u,n,a+";charset=utf-8")};M.prototype.createTextStyle_=function(t){if(t.angle){var e=t.angle!==undefined?t.angle:0;var n=e*Math.PI/180;t.rotation=n;delete t.angle}t.font=["normal",(t.size||10)+"pt","Arial"].join(" ");if(t.color){t.fill=new S["a"]({color:t.color||[0,0,0,1]});delete t.color}t.stroke=new E["a"]({color:[255,255,255,1],width:t.width||3});delete t.width;return new T["a"](t)};M.prototype.getMeasure=function(t){var e=t.getGeometry();i["a"].assert(e,"Geometry should be truthy");var n="";if(e instanceof _["a"]){if(this.getType(t)===s["a"].CIRCLE){var r=this.optNumber(t,o["a"].AZIMUT);i["a"].assertNumber(r);var a=this.getRadiusLine(t,r);n=u["a"].getFormattedAzimutRadius(a,this.projection_,this.decimals_,this.precision_,this.unitPrefixFormat_,this.numberFormat_)}else{n=l["a"].getFormattedArea(e,this.projection_,this.precision_,this.unitPrefixFormat_)}}else if(e instanceof p["a"]){n=l["a"].getFormattedLength(e,this.projection_,this.precision_,this.unitPrefixFormat_)}else if(e instanceof m["a"]){if(this.pointFilterFn_===null){n=l["a"].getFormattedPoint(e,this.decimals_,this.ngeoNumberCoordinates_)}else{var c=e.getCoordinates();var f=this.pointFilterArgs_.slice(0);f.unshift(c);n=this.pointFilterFn_.apply(this,f)}}return n};M.prototype.getType=function(t){var e=t.getGeometry();i["a"].assert(e,"Geometry should be thruthy");var n=void 0;if(e instanceof m["a"]){if(t.get(o["a"].IS_TEXT)){n=s["a"].TEXT}else{n=s["a"].POINT}}else if(e instanceof g["a"]){n=s["a"].MULTI_POINT}else if(e instanceof _["a"]){if(t.get(o["a"].IS_CIRCLE)){n=s["a"].CIRCLE}else if(t.get(o["a"].IS_RECTANGLE)){n=s["a"].RECTANGLE}else{n=s["a"].POLYGON}}else if(e instanceof y["a"]){n=s["a"].MULTI_POLYGON}else if(e instanceof p["a"]){n=s["a"].LINE_STRING}else if(e instanceof v["a"]){n=s["a"].MULTI_LINE_STRING}i["a"].assert(n,"Type should be thruthy");return n};M.prototype.panMapToFeature=function(t,e,n){var r=n!==undefined?n:250;var a=e.getSize();i["a"].assertArray(a);var o=e.getView();var s=o.calculateExtent(a);var l=t.getGeometry();if(!l.intersectsExtent(s)){var u=o.getCenter();i["a"].assertArray(u);var c=void 0;if(l instanceof p["a"]){c=l.getCoordinateAt(.5)}else if(l instanceof _["a"]){c=l.getInteriorPoint().getCoordinates()}else if(l instanceof m["a"]){c=l.getCoordinates()}else{c=h["x"](l.getExtent())}o.animate({center:u,duration:r},{center:c,duration:r})}};M.prototype.getRadiusLine=function(t,e){var n=t.getGeometry();var i=n.getExtent();var r=(i[3]-i[1])/2;var a=h["x"](n.getExtent());var o=Math.cos((e-90)*Math.PI/180)*r;var s=-Math.sin((e-90)*Math.PI/180)*r;var l=[o+a[0],s+a[1]];return new p["a"]([a,l])};M.prototype.getNonSpatialProperties=function(t){var e=t.getGeometryName();var n={};var i=t.getProperties();for(var r in i){if(r!==e){n[r]=i[r]}}return n};M.prototype.clearNonSpatialProperties=function(t){var e=t.getGeometryName();var n=t.getProperties();for(var i in n){if(i!==e){t.set(i,undefined)}}};M.FormatType={GPX:"GPX",KML:"KML"};M.module=angular.module("ngeoFeatureHelper",[a["a"].name,r["a"].name]);M.module.service("ngeoFeatureHelper",M);e["a"]=M},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(254);function r(t,e,n,r){return Object(i["a"])(t,e,n,r,false)}},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var i=n(1);var r=n(7);var a=n(14);var o=n(77);var s=n(144);var l=n(25);var u=n(36);var c=n(246);var f=n(88);var h=n(83);var d=n(89);var p=n(21);var v=n(32);var g=n(9);var m=n(10);var _=n(0);var y="http://www.opengis.net/gml";var b=function t(e){var n=e?e:{};this.featureType=n.featureType;this.featureNS=n.featureNS;this.srsName=n.srsName;this.schemaLocation="";this.FEATURE_COLLECTION_PARSERS={};this.FEATURE_COLLECTION_PARSERS[y]={featureMember:Object(_["o"])(t.prototype.readFeaturesInternal),featureMembers:Object(_["o"])(t.prototype.readFeaturesInternal)};s["a"].call(this)};Object(i["d"])(b,s["a"]);var w=/^[\s\xa0]*$/;b.prototype.readFeaturesInternal=function(t,e){var n=t.localName;var i=null;if(n=="FeatureCollection"){if(t.namespaceURI==="http://www.opengis.net/wfs"){i=Object(_["u"])([],this.FEATURE_COLLECTION_PARSERS,t,e,this)}else{i=Object(_["u"])(null,this.FEATURE_COLLECTION_PARSERS,t,e,this)}}else if(n=="featureMembers"||n=="featureMember"){var r=e[0];var a=r["featureType"];var o=r["featureNS"];var s="p";var l="p0";if(!a&&t.childNodes){a=[],o={};for(var u=0,c=t.childNodes.length;u<c;++u){var f=t.childNodes[u];if(f.nodeType===1){var h=f.nodeName.split(":").pop();if(a.indexOf(h)===-1){var d="";var p=0;var v=f.namespaceURI;for(var g in o){if(o[g]===v){d=g;break}++p}if(!d){d=s+p;o[d]=v}a.push(d+":"+h)}}}if(n!="featureMember"){r["featureType"]=a;r["featureNS"]=o}}if(typeof o==="string"){var m=o;o={};o[l]=m}var y={};var b=Array.isArray(a)?a:[a];for(var w in o){var x={};for(var S=0,C=b.length;S<C;++S){var E=b[S].indexOf(":")===-1?l:b[S].split(":")[0];if(E===w){x[b[S].split(":").pop()]=n=="featureMembers"?Object(_["j"])(this.readFeatureElement,this):Object(_["o"])(this.readFeatureElement,this)}}y[o[w]]=x}if(n=="featureMember"){i=Object(_["u"])(undefined,y,t,e)}else{i=Object(_["u"])([],y,t,e)}}if(i===null){i=[]}return i};b.prototype.readGeometryElement=function(t,e){var n=e[0];n["srsName"]=t.firstElementChild.getAttribute("srsName");n["srsDimension"]=t.firstElementChild.getAttribute("srsDimension");var i=Object(_["u"])(null,this.GEOMETRY_PARSERS_,t,e,this);if(i){return Object(o["b"])(i,false,n)}else{return undefined}};b.prototype.readFeatureElement=function(t,e){var n=void 0;var i=t.getAttribute("fid")||Object(_["f"])(t,y,"id");var r={};var o=void 0;for(n=t.firstElementChild;n;n=n.nextElementSibling){var s=n.localName;if(n.childNodes.length===0||n.childNodes.length===1&&(n.firstChild.nodeType===3||n.firstChild.nodeType===4)){var l=Object(_["e"])(n,false);if(w.test(l)){l=undefined}r[s]=l}else{if(s!=="boundedBy"){o=s}r[s]=this.readGeometryElement(n,e)}}var u=new a["a"](r);if(o){u.setGeometryName(o)}if(i){u.setId(i)}return u};b.prototype.readPoint=function(t,e){var n=this.readFlatCoordinatesFromNode_(t,e);if(n){var i=new p["a"](null);i.setFlatCoordinates(l["a"].XYZ,n);return i}};b.prototype.readMultiPoint=function(t,e){var n=Object(_["u"])([],this.MULTIPOINT_PARSERS_,t,e,this);if(n){return new h["a"](n)}else{return undefined}};b.prototype.readMultiLineString=function(t,e){var n=Object(_["u"])([],this.MULTILINESTRING_PARSERS_,t,e,this);if(n){var i=new f["a"](null);i.setLineStrings(n);return i}else{return undefined}};b.prototype.readMultiPolygon=function(t,e){var n=Object(_["u"])([],this.MULTIPOLYGON_PARSERS_,t,e,this);if(n){var i=new d["a"](null);i.setPolygons(n);return i}else{return undefined}};b.prototype.pointMemberParser_=function(t,e){Object(_["t"])(this.POINTMEMBER_PARSERS_,t,e,this)};b.prototype.lineStringMemberParser_=function(t,e){Object(_["t"])(this.LINESTRINGMEMBER_PARSERS_,t,e,this)};b.prototype.polygonMemberParser_=function(t,e){Object(_["t"])(this.POLYGONMEMBER_PARSERS_,t,e,this)};b.prototype.readLineString=function(t,e){var n=this.readFlatCoordinatesFromNode_(t,e);if(n){var i=new u["a"](null);i.setFlatCoordinates(l["a"].XYZ,n);return i}else{return undefined}};b.prototype.readFlatLinearRing_=function(t,e){var n=Object(_["u"])(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,t,e,this);if(n){return n}else{return undefined}};b.prototype.readLinearRing=function(t,e){var n=this.readFlatCoordinatesFromNode_(t,e);if(n){var i=new c["a"](null);i.setFlatCoordinates(l["a"].XYZ,n);return i}else{return undefined}};b.prototype.readPolygon=function(t,e){var n=Object(_["u"])([null],this.FLAT_LINEAR_RINGS_PARSERS_,t,e,this);if(n&&n[0]){var i=new v["a"](null);var a=n[0];var o=[a.length];var s=void 0,u=void 0;for(s=1,u=n.length;s<u;++s){Object(r["c"])(a,n[s]);o.push(a.length)}i.setFlatCoordinates(l["a"].XYZ,a,o);return i}else{return undefined}};b.prototype.readFlatCoordinatesFromNode_=function(t,e){return Object(_["u"])(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,t,e,this)};b.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:Object(_["j"])(b.prototype.pointMemberParser_),pointMembers:Object(_["j"])(b.prototype.pointMemberParser_)}};b.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:Object(_["j"])(b.prototype.lineStringMemberParser_),lineStringMembers:Object(_["j"])(b.prototype.lineStringMemberParser_)}};b.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:Object(_["j"])(b.prototype.polygonMemberParser_),polygonMembers:Object(_["j"])(b.prototype.polygonMemberParser_)}};b.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:Object(_["j"])(b.prototype.readFlatCoordinatesFromNode_)}};b.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Object(_["j"])(b.prototype.readLineString)}};b.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Object(_["j"])(b.prototype.readPolygon)}};b.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Object(_["o"])(b.prototype.readFlatLinearRing_)}};b.prototype.readGeometryFromNode=function(t,e){var n=this.readGeometryElement(t,[this.getReadOptions(t,e?e:{})]);return n?n:null};b.prototype.readFeatures;b.prototype.readFeaturesFromNode=function(t,e){var n={featureType:this.featureType,featureNS:this.featureNS};if(e){Object(g["a"])(n,this.getReadOptions(t,e))}var i=this.readFeaturesInternal(t,[n]);return i||[]};b.prototype.readProjectionFromNode=function(t){return Object(m["h"])(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))};e["b"]=b},function(t,e,n){"use strict";var i=n(1);var r=n(124);var a=function t(e){var n=e||{};r["a"].call(this,{points:Infinity,fill:n.fill,radius:n.radius,snapToPixel:n.snapToPixel,stroke:n.stroke,atlasManager:n.atlasManager})};Object(i["d"])(a,r["a"]);a.prototype.clone=function(){var t=new a({fill:this.getFill()?this.getFill().clone():undefined,stroke:this.getStroke()?this.getStroke().clone():undefined,radius:this.getRadius(),snapToPixel:this.getSnapToPixel(),atlasManager:this.atlasManager_});t.setOpacity(this.getOpacity());t.setScale(this.getScale());return t};a.prototype.setRadius=function(t){this.radius_=t;this.render_(this.atlasManager_)};e["a"]=a},function(t,e,n){"use strict";n.d(e,"b",function(){return d});var i=n(1);var r=n(20);var a=n(4);var o=n(81);var s=n(25);var l=n(146);var u=n(9);var c=function t(){o["a"].call(this);this.layout=s["a"].XY;this.stride=2;this.flatCoordinates=null};Object(i["d"])(c,o["a"]);function f(t){var e=void 0;if(t==2){e=s["a"].XY}else if(t==3){e=s["a"].XYZ}else if(t==4){e=s["a"].XYZM}return e}function h(t){var e=void 0;if(t==s["a"].XY){e=2}else if(t==s["a"].XYZ||t==s["a"].XYM){e=3}else if(t==s["a"].XYZM){e=4}return e}c.prototype.containsXY=r["a"];c.prototype.computeExtent=function(t){return Object(a["o"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)};c.prototype.getCoordinates=function(){};c.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)};c.prototype.getFlatCoordinates=function(){return this.flatCoordinates};c.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)};c.prototype.getLayout=function(){return this.layout};c.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()){Object(u["b"])(this.simplifiedGeometryCache);this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=this.getRevision()}if(t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance){return this}var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e)){return this.simplifiedGeometryCache[e]}else{var n=this.getSimplifiedGeometryInternal(t);var i=n.getFlatCoordinates();if(i.length<this.flatCoordinates.length){this.simplifiedGeometryCache[e]=n;return n}else{this.simplifiedGeometryMaxMinSquaredTolerance=t;return this}}};c.prototype.getSimplifiedGeometryInternal=function(t){return this};c.prototype.getStride=function(){return this.stride};c.prototype.setFlatCoordinatesInternal=function(t,e){this.stride=h(t);this.layout=t;this.flatCoordinates=e};c.prototype.setCoordinates=function(t,e){};c.prototype.setLayout=function(t,e,n){var i=void 0;if(t){i=h(t)}else{for(var r=0;r<n;++r){if(e.length===0){this.layout=s["a"].XY;this.stride=2;return}else{e=e[0]}}i=e.length;t=f(i)}this.layout=t;this.stride=i};c.prototype.applyTransform=function(t){if(this.flatCoordinates){t(this.flatCoordinates,this.flatCoordinates,this.stride);this.changed()}};c.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();Object(l["a"])(n,0,n.length,i,t,e,n);this.changed()}};c.prototype.scale=function(t,e,n){var i=e;if(i===undefined){i=t}var r=n;if(!r){r=Object(a["x"])(this.getExtent())}var o=this.getFlatCoordinates();if(o){var s=this.getStride();Object(l["b"])(o,0,o.length,s,t,i,r,o);this.changed()}};c.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();Object(l["d"])(n,0,n.length,i,t,e,n);this.changed()}};function d(t,e,n){var i=t.getFlatCoordinates();if(!i){return null}else{var r=t.getStride();return Object(l["c"])(i,0,i.length,r,e,n)}}e["a"]=c},function(t,e,n){"use strict";n.d(e,"c",function(){return a});n.d(e,"g",function(){return o});n.d(e,"i",function(){return s});n.d(e,"d",function(){return l});n.d(e,"b",function(){return u});n.d(e,"a",function(){return c});n.d(e,"h",function(){return h});n.d(e,"f",function(){return d});n.d(e,"e",function(){return p});var i=n(1);var r=typeof navigator!=="undefined"?navigator.userAgent.toLowerCase():"";var a=r.indexOf("firefox")!==-1;var o=r.indexOf("safari")!==-1&&r.indexOf("chrom")==-1;var s=r.indexOf("webkit")!==-1&&r.indexOf("edge")==-1;var l=r.indexOf("macintosh")!==-1;var u=window.devicePixelRatio||1;var c=function(){var t=false;try{t=!!document.createElement("CANVAS").getContext("2d").setLineDash}catch(t){}return t}();var f="geolocation"in navigator;var h="ontouchstart"in window;var d="PointerEvent"in window;var p=!!navigator.msPointerEnabled;var v=i["a"]},function(t,e,n){"use strict";n.d(e,"a",function(){return i});function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},function(t,e,n){"use strict";n.r(e);var i=n(1);var r=n(27);var a=function t(e){this.tagName_=e};a.prototype.getTagName=function(){return this.tagName_};var o=a;var s=function t(e,n){o.call(this,e);this.conditions=Array.prototype.slice.call(arguments,1);Object(r["a"])(this.conditions.length>=2,57)};Object(i["d"])(s,o);var l=s;var u=function t(e){var n=["And"].concat(Array.prototype.slice.call(arguments));l.apply(this,n)};Object(i["d"])(u,l);var c=u;var f=function t(e,n,i){o.call(this,"BBOX");this.geometryName=e;this.extent=n;this.srsName=i};Object(i["d"])(f,o);var h=f;var d=function t(e,n,i,r){o.call(this,e);this.geometryName=n||"the_geom";this.geometry=i;this.srsName=r};Object(i["d"])(d,o);var p=d;var v=function t(e,n,i){p.call(this,"Contains",e,n,i)};Object(i["d"])(v,p);var g=v;var m=function t(e,n){o.call(this,e);this.propertyName=n};Object(i["d"])(m,o);var _=m;var y=function t(e,n,i){_.call(this,"During",e);this.begin=n;this.end=i};Object(i["d"])(y,_);var b=y;var w=function t(e,n,i,r){_.call(this,e,n);this.expression=i;this.matchCase=r};Object(i["d"])(w,_);var x=w;var S=function t(e,n,i){x.call(this,"PropertyIsEqualTo",e,n,i)};Object(i["d"])(S,x);var C=S;var E=function t(e,n){x.call(this,"PropertyIsGreaterThan",e,n)};Object(i["d"])(E,x);var O=E;var T=function t(e,n){x.call(this,"PropertyIsGreaterThanOrEqualTo",e,n)};Object(i["d"])(T,x);var M=T;var I=function t(e,n,i){p.call(this,"Intersects",e,n,i)};Object(i["d"])(I,p);var R=I;var N=function t(e,n,i){_.call(this,"PropertyIsBetween",e);this.lowerBoundary=n;this.upperBoundary=i};Object(i["d"])(N,_);var A=N;var L=function t(e,n,i,r,a,o){_.call(this,"PropertyIsLike",e);this.pattern=n;this.wildCard=i!==undefined?i:"*";this.singleChar=r!==undefined?r:".";this.escapeChar=a!==undefined?a:"!";this.matchCase=o};Object(i["d"])(L,_);var P=L;var D=function t(e){_.call(this,"PropertyIsNull",e)};Object(i["d"])(D,_);var j=D;var k=function t(e,n){x.call(this,"PropertyIsLessThan",e,n)};Object(i["d"])(k,x);var F=k;var $=function t(e,n){x.call(this,"PropertyIsLessThanOrEqualTo",e,n)};Object(i["d"])($,x);var G=$;var U=function t(e){o.call(this,"Not");this.condition=e};Object(i["d"])(U,o);var Y=U;var V=function t(e,n,i){x.call(this,"PropertyIsNotEqualTo",e,n,i)};Object(i["d"])(V,x);var H=V;var z=function t(e){var n=["Or"].concat(Array.prototype.slice.call(arguments));l.apply(this,n)};Object(i["d"])(z,l);var B=z;var W=function t(e,n,i){p.call(this,"Within",e,n,i)};Object(i["d"])(W,p);var q=W;n.d(e,"and",function(){return X});n.d(e,"or",function(){return K});n.d(e,"not",function(){return Z});n.d(e,"bbox",function(){return Q});n.d(e,"contains",function(){return J});n.d(e,"intersects",function(){return tt});n.d(e,"within",function(){return et});n.d(e,"equalTo",function(){return nt});n.d(e,"notEqualTo",function(){return it});n.d(e,"lessThan",function(){return rt});n.d(e,"lessThanOrEqualTo",function(){return at});n.d(e,"greaterThan",function(){return ot});n.d(e,"greaterThanOrEqualTo",function(){return st});n.d(e,"isNull",function(){return lt});n.d(e,"between",function(){return ut});n.d(e,"like",function(){return ct});n.d(e,"during",function(){return ft});function X(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(c,e))}function K(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(B,e))}function Z(t){return new Y(t)}function Q(t,e,n){return new h(t,e,n)}function J(t,e,n){return new g(t,e,n)}function tt(t,e,n){return new R(t,e,n)}function et(t,e,n){return new q(t,e,n)}function nt(t,e,n){return new C(t,e,n)}function it(t,e,n){return new H(t,e,n)}function rt(t,e){return new F(t,e)}function at(t,e){return new G(t,e)}function ot(t,e){return new O(t,e)}function st(t,e){return new M(t,e)}function lt(t){return new j(t)}function ut(t,e,n){return new A(t,e,n)}function ct(t,e,n,i,r,a){return new P(t,e,n,i,r,a)}function ft(t,e,n){return new b(t,e,n)}},function(t,e,n){"use strict";n.r(e);var i=n(183);var r=n(303);var a=n(300);var o=n(268);var s=n(184);var l=n(357);var u=n(190);var c=n(349);var f=angular.module("gmfDatasourceModule",[o["a"].module.name,s["a"].module.name,l["a"].module.name,u["a"].module.name,c["a"].module.name]);var h=f;var d=n(253);var p=n(299);var v=n(188);var g=n(196);var m=n(341);var _=n(356);var y=n(259);var b=n(215);var w=angular.module("gmfEditingModule",[v["a"].module.name,g["a"].name,m["a"].name,_["a"].module.name,y["a"].module.name,b["a"].module.name]);var x=w;var S=n(307);var C=n(338);var E=n(337);var O=n(336);var T=n(579);var M=angular.module("gmfImportModule",[C["a"].name,E["a"].name,O["a"].name]);var I=M;var R=n(108);var N=n(334);var A=n(154);var L=n(332);var P=n(75);var D=n(577);var j=angular.module("gmfLayertreeModule",[R["a"].name,N["a"].name,A["a"].module.name,L["a"].name,P["a"].module.name]);var k=j;var F=n(310);var $=n(212);var G=n(313);var U=n(327);var Y=n(179);var V=n(255);var H=n(248);var z=angular.module("gmfObjecteditingModule",[G["a"].name,U["a"].name,Y["a"].module.name,V["a"].module.name,H["a"].name]);var B=z;var W=n(329);var q=n(326);var X=n(574);var K=angular.module("gmfPrintModule",[q["a"].name]);var Z=K;var Q=n(298);var J=n(306);var tt=n(325);var et=n(297);var nt=n(135);var it=n(210);var rt=angular.module("ngeoDatasourceModule",[nt["a"].module.name,it["a"].module.name]);var at=rt;var ot=n(213);var st=n(218);var lt=angular.module("ngeoDownloadModule",[ot["a"].module.name,st["a"].name]);var ut=lt;var ct=n(263);var ft=n(189);var ht=n(262);var dt=n(347);var pt=n(346);var vt=n(345);var gt=angular.module("ngeoDrawModule",[ft["a"].module.name,ct["a"].name,ht["a"].name,dt["a"].name,pt["a"].name,vt["a"].name]);var mt=gt;var _t=n(258);var yt=n(257);var bt=n(304);var wt=angular.module("ngeoEditingModule",[_t["a"].name,yt["a"].name,bt["a"].name]);var xt=wt;var St=n(340);var Ct=n(158);var Et=n(339);var Ot=angular.module("ngeoFilterModule",[St["a"].name,Ct["a"].module.name,Et["a"].name]);var Tt=Ot;var Mt=n(2);var It=n(109);var Rt=n(7);var Nt=n(3);var At=n(10);var Lt=n(14);var Pt=n(21);function Dt(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var jt=angular.module("ngeoGooglestreetview",[It["a"].module.name]);jt.value("ngeoGooglestreetviewTemplateUrl",function(t){var e=t["ngeoGooglestreetviewTemplateUrl"];return e!==undefined?e:"ngeo/googlestreetview"});jt.run(["$templateCache",function(t){t.put("ngeo/googlestreetview",n(474))}]);kt.$inject=["$attrs","ngeoGooglestreetviewTemplateUrl"];function kt(t,e){return e(t)}jt.Controller_=function(){t.$inject=["$element","$scope","ngeoFeatureOverlayMgr"];function t(e,n,i){var r=this;Dt(this,t);this.active;n.$watch(function(){return r.active},this.handleActiveChange_.bind(this));this.featureStyle;this.map;this.radius;this.scope_=n;this.feature_=new Lt["a"];this.featureOverlay_=Mt["a"].assert(i.getFeatureOverlay());this.listenerKeys_=[];this.location=null;this.noDataAtLocation=false;this.panorama_=new google.maps.StreetViewPanorama(e[0],{pov:{heading:0,pitch:0},visible:false,zoom:1});this.panoramaListener_=null;this.point_=new Pt["a"]([0,0]);this.feature_.setGeometry(this.point_);this.streetViewService_=new google.maps.StreetViewService;this.panoramaPositionChanging_=false}t.prototype.$onInit=function t(){var e=this;this.scope_.$watch(function(){return e.location},this.handleLocationChange_.bind(this));this.scope_.$watch(function(){var t=e.active;var n=e.location!==null;return t&&n},this.handleReadyChange_.bind(this));this.scope_.$watch(function(){var t=e.active;var n=e.location!==null;var i=e.noDataAtLocation===false;return t&&n&&i},function(t,n){if(t===n){return}e.panorama_.setVisible(t);if(t){e.panoramaListener_=google.maps.event.addListener(e.panorama_,"position_changed",e.handlePanoramaPositionChange_.bind(e))}else if(e.panoramaListener_){google.maps.event.removeListener(e.panoramaListener_);e.panoramaListener_=null}});if(this.featureStyle){this.feature_.setStyle(this.featureStyle)}};t.prototype.handleActiveChange_=function t(e){var n=this.listenerKeys_;if(e){n.push(Nt["a"](this.map,"click",this.handleMapClick_,this))}else{n.forEach(Nt["e"]);n.length=0}};t.prototype.handleLocationChange_=function t(e,n){if(e===n||Array.isArray(e)&&Array.isArray(n)&&Rt["b"](e,n)){return}this.point_.setCoordinates(e);if(e&&!this.panoramaPositionChanging_){var i=this.toLonLat_(e);this.streetViewService_.getPanorama({location:{lat:i[1],lng:i[0]},radius:this.radius},this.handleStreetViewServiceGetPanorama_.bind(this))}};t.prototype.handleMapClick_=function t(e){this.location=e.coordinate;this.scope_.$apply()};t.prototype.handleReadyChange_=function t(e,n){if(e===n){return}if(e){this.featureOverlay_.addFeature(this.feature_)}else{this.featureOverlay_.removeFeature(this.feature_)}};t.prototype.handleStreetViewServiceGetPanorama_=function t(e,n){var i=this.panorama_;if(n===google.maps.StreetViewStatus.OK){this.noDataAtLocation=false;i.setPosition(e.location.latLng)}else{this.noDataAtLocation=true}this.scope_.$apply()};t.prototype.handlePanoramaPositionChange_=function t(){this.panoramaPositionChanging_=true;var e=this.panorama_.getPosition();var n=[e.lng(),e.lat()];var i=this.fromLonLat_(n);this.location=i;this.scope_.$apply();this.panoramaPositionChanging_=false};t.prototype.fromLonLat_=function t(e){return At["g"](e,this.map.getView().getProjection())};t.prototype.toLonLat_=function t(e){return At["m"](e,this.map.getView().getProjection())};return t}();jt.component("ngeoGooglestreetview",{bindings:{active:"<",featureStyle:"<?",map:"<",radius:"<?"},controller:jt.Controller_,templateUrl:kt});var Ft=jt;var $t=angular.module("ngeoGooglestreetviewModule",[Ft.name]);var Gt=$t;var Ut=n(318);var Yt=n(316);var Vt=n(119);var Ht=n(95);var zt=n(344);var Bt=n(343);var Wt=n(342);var qt=angular.module("ngeoMeasureModule",[zt["a"].name,Bt["a"].name,Wt["a"].name]);var Xt=qt;var Kt=n(305);var Zt=n(234);var Qt=angular.module("ngeoPrintModule",[Kt["a"].module.name,Zt["a"].module.name]);var Jt=Qt;var te=n(312);var ee=angular.module("ngeoProfileModule",[te["a"].name]);var ne=ee;var ie=n(211);var re=n(147);var ae=n(186);var oe=n(185);var se=angular.module("ngeoQueryModule",[ie["a"].module.name,re["a"].module.name,ae["a"].name,oe["a"].name]);var le=se;var ue=n(309);var ce=n(335);var fe=n(315);var he=n(323);var de=n(120);var pe=n(37);var ve=n(64);var ge=angular.module("ngeoControl",[]);ge.component_=function(){return{restrict:"A",link:function t(e,n,i){var r=e.$eval(i["ngeoControl"]);Mt["a"].assertInstanceof(r,ve["a"]);var a=e.$eval(i["ngeoControlMap"]);Mt["a"].assertInstanceof(a,pe["a"]);r.setTarget(n[0]);a.addControl(r)}}};ge.directive("ngeoControl",ge.component_);var me=ge;var _e=n(256);var ye=n(159);var be=n(148);var we=n(65);var xe=n(366);var Se=angular.module("ngeoFilereader",[]);Se.component_=function(t){return{restrict:"A",scope:{fileContent:"=ngeoFilereader",supported:"=?ngeoFilereaderSupported"},link:function e(n,i,r){var a="FileReader"in t;n["supported"]=a;if(!a){return}i.on("change",function(e){var i=new t.FileReader;i.onload=function(t){n.$apply(function(){n["fileContent"]=t.target.result})};i.readAsText(e.target.files[0])})}}};Se.component_.$inject=["$window"];Se.directive("ngeoFilereader",Se.component_);var Ce=Se;var Ee=n(122);var Oe=angular.module("ngeoGetBrowserLanguage",[]);Oe.factory_=function(t){return function(e){var n=t.navigator;var i=n.languages||n.language||n.browserLanguage||n.systemLanguage||n.userLanguage;if(!Array.isArray(i)){i=[i]}i=i.map(function(t){return t.substring(0,2)});i=i.filter(function(t,e,n){return n.indexOf(t)==e});var r=i.filter(function(t){return e.indexOf(t)!=-1});return r[0]}};Oe.factory_.$inject=["$window"];Oe.factory("ngeoGetBrowserLanguage",Oe.factory_);var Te=Oe;var Me=n(387);var Ie=n(228);var Re=n(94);var Ne=n(121);var Ae=angular.module("ngeoMiscExtraModule",[he["a"].module.name,de["a"].name,me.name,_e["a"].name,ye["a"].name,be["a"].module.name,we["a"].module.name,xe["a"].module.name,Ce.name,Ee["a"].name,Te.name,Me["a"].name,Ie["a"].module.name,Re["a"].module.name,Ne["a"].module.name]);var Le=Ae;var Pe=angular.module("ngeo",[at.name,ut.name,mt.name,xt.name,Tt.name,Gt.name,Ut["a"].name,Yt["a"].name,Vt["a"].name,Ht["a"].module.name,Xt.name,Jt.name,ne.name,le.name,ue["a"].name,ce["a"].name,fe["a"].module.name,Le.name]);var De=Pe;var je=angular.module("gmf",[i["a"].name,r["a"].name,a["a"].name,h.name,d["a"].name,p["a"].name,x.name,S["a"].name,I.name,k.name,F["a"].name,$["a"].name,B.name,W["a"].name,Z.name,Q["a"].name,J["a"].name,tt["a"].name,et["a"].name,De.name]);var ke=e["default"]=je},function(t,e,n){"use strict";n.r(e);var i=n(38);var r=n.n(i);var a=n(385);var o=n.n(a);var s=n(534);var l=n.n(s);var u=n(625);var c=n.n(u);var f=n(623);var h=n.n(f);if(window.location.protocol=="http:"&&window.location.hostname!="localhost"){var d=window.location.href.substr(5);window.location="https:"+d}},function(t,e,n){"use strict";(function(t){var i=n(55);var r=n(23);var a=n(2);var o=n(126);var s=n(87);var l=n(222);var u=n(216);var c=n(7);var f=n(3);var h=n(9);var d=function t(e,n,i,r,a,o,s){this.$timeout_=e;this.$injector_=n;this.gettextCatalog_=i;this.layerHelper_=r;this.ngeoNotification_=a;this.gmfThemes_=o;this.root={children:[]};this.rootCtrl=null;this.numberOfGroupsToAddInThisDigestLoop=0;this.groupsToAddInThisDigestLoop_=[];this.promiseForGroupsToAddInThisDigestLoop_=null;this.ngeoStateManager_=s;this.ogcServers_=null;f["a"](this.gmfThemes_,"change",this.handleThemesChange_,this)};d.$inject=["$timeout","$injector","gettextCatalog","ngeoLayerHelper","ngeoNotification","gmfThemes","ngeoStateManager"];d.$inject=["$timeout","$injector","gettextCatalog","ngeoLayerHelper","ngeoNotification","gmfThemes","ngeoStateManager"];d.prototype.handleThemesChange_=function(){var t=this;this.gmfThemes_.getOgcServersObject().then(function(e){t.ogcServers_=e});if(this.rootCtrl&&this.rootCtrl.children){this.gmfThemes_.getThemesObject().then(function(e){t.refreshFirstLevelGroups_(e)})}};d.prototype.setFirstLevelGroups=function(t){this.root.children.length=0;this.ngeoStateManager_.deleteParam(i["a"].PermalinkParam.TREE_GROUPS);return this.addFirstLevelGroups(t)};d.prototype.addFirstLevelGroups=function(t,e,n){var i=this;var r=[];t.slice().reverse().forEach(function(t){if(!i.addFirstLevelGroup_(t)){r.push(t)}});if(r.length>0&&!n){this.notifyCantAddGroups_(r)}return r.length===0};d.prototype.updateTreeGroupsState_=function(t){var e={};e[i["a"].PermalinkParam.TREE_GROUPS]=t.map(function(t){return t.name}).join(",");this.ngeoStateManager_.updateState(e);if(this.$injector_.has("gmfPermalink")){this.$injector_.get("gmfPermalink").cleanParams(t)}};d.prototype.addFirstLevelGroup_=function(t){var e=this;var n=false;var i=t.id;this.root.children.some(function(t){if(i===t.id){return n=true}},this);this.groupsToAddInThisDigestLoop_.some(function(t){if(i===t.id){return n=true}},this);if(n){return false}this.groupsToAddInThisDigestLoop_.push(t);this.numberOfGroupsToAddInThisDigestLoop=0;if(this.promiseForGroupsToAddInThisDigestLoop_!==null){this.$timeout_.cancel(this.promiseForGroupsToAddInThisDigestLoop_)}this.promiseForGroupsToAddInThisDigestLoop_=this.$timeout_(function(){e.numberOfGroupsToAddInThisDigestLoop=e.groupsToAddInThisDigestLoop_.length;e.groupsToAddInThisDigestLoop_.forEach(function(t){e.root.children.unshift(t)});e.updateTreeGroupsState_(e.root.children);e.groupsToAddInThisDigestLoop_.length=0;e.promiseForGroupsToAddInThisDigestLoop_=null});return true};d.prototype.addGroupByName=function(t,e){var n=this;this.gmfThemes_.getThemesObject().then(function(i){var a=r["a"].findGroupByName(i,t);if(a){n.addFirstLevelGroups([a],e,false)}})};d.prototype.addGroupByLayerName=function(t,e,n){var i=this;this.gmfThemes_.getThemesObject().then(function(a){var s=r["a"].findGroupByLayerNodeName(a,t);if(s){var l=i.addFirstLevelGroups([s],e,n);i.$timeout_(function(){var e=i.getTreeCtrlByNodeId(s.id);if(!e){console.warn("Tree controller not found, unable to add the group");return}var n=void 0;e.traverseDepthFirst(function(e){if(e.node.name===t){n=e;return o["a"].VisitorDecision.STOP}});if(l){e.setState("off")}if(n){n.setState("on")}})}})};d.prototype.removeGroup=function(t){var e=this.root.children;var n=0,i=false;e.some(function(e){if(e.name===t.name){return i=true}n++});if(i){e.splice(n,1);this.updateTreeGroupsState_(e)}};d.prototype.removeAll=function(){while(this.root.children.length){this.removeGroup(this.root.children[0])}};d.prototype.cloneGroupNode_=function(t,e){var n=h["a"]({},t);this.toggleNodeCheck_(n,e);return n};d.prototype.toggleNodeCheck_=function(t,e){var n=this;if(!t.children){return}t.children.forEach(function(t){if(t.children){n.toggleNodeCheck_(t,e)}else if(t.metadata){t.metadata.isChecked=c["f"](e,t.name)}})};d.prototype.notifyCantAddGroups_=function(t){var e=[];var n=this.gettextCatalog_;t.forEach(function(t){e.push(n.getString(t.name))});var i=e.length<2?n.getString("group is already loaded."):n.getString("groups are already loaded.");this.ngeoNotification_.notify({msg:e.join(", ")+" "+i,type:s["a"].Type.INFORMATION})};d.prototype.getTreeCtrlByNodeId=function(t){var e=null;if(this.rootCtrl&&this.rootCtrl.traverseDepthFirst){this.rootCtrl.traverseDepthFirst(function(n){if(n.node.id===t){e=n;return o["a"].VisitorDecision.STOP}})}return e};d.prototype.getOgcServer=function(t){if(t.parent.node.mixed){var e=t.node;a["a"].assert(e.ogcServer);return this.ogcServers_[e.ogcServer]}else{var n=t;while(!n.parent.isRoot){n=n.parent}var i=n.node;a["a"].assert(i.ogcServer);return this.ogcServers_[i.ogcServer]}};d.prototype.refreshFirstLevelGroups_=function(t){var e=this;var n={};this.rootCtrl.children.map(function(t){var i=t.node.name;n[i]=e.getFirstLevelGroupFullState_(t)});var i=[];this.root.children.map(function(a){var o=a.name;var s=r["a"].findGroupByName(t,o);if(s){var l=n[o];if(l){e.setNodeMetadataFromFullState_(s,l)}i.push(s)}});this.setFirstLevelGroups(i);this.$timeout_(function(){e.updateTreeGroupsState_(e.root.children)})};d.prototype.getFirstLevelGroupFullState_=function(e){var n=this;var i={};e.children.map(function(t){i[t.node.name]=n.getFirstLevelGroupFullState_(t)});var r=void 0,a=void 0,o=void 0;if(e.children.length>0){var s=t("#gmf-layertree-layer-group-"+e.uid);if(s){a=s.hasClass("in")}}else{r=e.getState();if(r==="on"){r=true}else if(r==="off"){r=false}else{r=undefined}var l=t("#gmf-layertree-node-"+e.uid+"-legend");if(l){o=l.is(":visible")}}return{children:i,isChecked:r,isExpanded:a,isLegendExpanded:o}};d.prototype.setNodeMetadataFromFullState_=function(t,e){var n=this;if(!e){return t}if(t.children){t.children.map(function(t){n.setNodeMetadataFromFullState_(t,e.children[t.name])})}var i=t.metadata;i.isChecked=e.isChecked;i.isExpanded=e.isExpanded;i.isLegendExpanded=e.isLegendExpanded;return t};d.module=angular.module("gmfTreeManager",[r["a"].module.name,o["a"].module.name,l["a"].module.name,u["a"].module.name]);d.module.service("gmfTreeManager",d);e["a"]=d}).call(this,n(38))},function(t,e,n){"use strict";n.d(e,"a",function(){return r});n.d(e,"b",function(){return a});var i={};function r(t,e){i[t]=e}function a(t){var e=[];for(var n in t){e.push({unit:n,priority:i[n]})}e.sort(function(t,e){return t.priority-e.priority});return e}},function(t,e,n){"use strict";n.d(e,"b",function(){return s});var i=n(81);var r=n(9);var a=n(10);var o=function t(){this.defaultDataProjection=null;this.defaultFeatureProjection=null};o.prototype.getReadOptions=function(t,e){var n=void 0;if(e){n={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}}return this.adaptOptions(n)};o.prototype.adaptOptions=function(t){return Object(r["a"])({dataProjection:this.defaultDataProjection,featureProjection:this.defaultFeatureProjection},t)};o.prototype.getLastExtent=function(){return null};o.prototype.getType=function(){};o.prototype.readFeature=function(t,e){};o.prototype.readFeatures=function(t,e){};o.prototype.readGeometry=function(t,e){};o.prototype.readProjection=function(t){};o.prototype.writeFeature=function(t,e){};o.prototype.writeFeatures=function(t,e){};o.prototype.writeGeometry=function(t,e){};e["a"]=o;function s(t,e,n){var r=n?Object(a["h"])(n.featureProjection):null;var o=n?Object(a["h"])(n.dataProjection):null;var s=void 0;if(r&&o&&!Object(a["f"])(r,o)){if(t instanceof i["a"]){s=(e?t.clone():t).transform(e?r:o,e?o:r)}else{s=Object(a["o"])(t,o,r)}}else{s=t}if(e&&n&&n.decimals!==undefined){var l=Math.pow(10,n.decimals);var u=function t(e){for(var n=0,i=e.length;n<i;++n){e[n]=Math.round(e[n]*l)/l}return e};if(s===t){s=s.clone()}s.applyTransform(u)}return s}},function(t,e,n){"use strict";var i=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var r=function(t){if(t.length===1)t=a(t);return{left:function(e,n,i,r){if(i==null)i=0;if(r==null)r=e.length;while(i<r){var a=i+r>>>1;if(t(e[a],n)<0)i=a+1;else r=a}return i},right:function(e,n,i,r){if(i==null)i=0;if(r==null)r=e.length;while(i<r){var a=i+r>>>1;if(t(e[a],n)>0)r=a;else i=a+1}return i}}};function a(t){return function(e,n){return i(t(e),n)}}var o=r(i);var s=o.right;var l=o.left;var u=s;var c=function(t,e){if(e==null)e=f;var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);while(n<i)a[n]=e(r,r=t[++n]);return a};function f(t,e){return[t,e]}var h=function(t,e,n){var i=t.length,r=e.length,a=new Array(i*r),o,s,l,u;if(n==null)n=f;for(o=l=0;o<i;++o){for(u=t[o],s=0;s<r;++s,++l){a[l]=n(u,e[s])}}return a};var d=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN};var p=function(t){return t===null?NaN:+t};var v=function(t,e){var n=t.length,i=0,r=-1,a=0,o,s,l=0;if(e==null){while(++r<n){if(!isNaN(o=p(t[r]))){s=o-a;a+=s/++i;l+=s*(o-a)}}}else{while(++r<n){if(!isNaN(o=p(e(t[r],r,t)))){s=o-a;a+=s/++i;l+=s*(o-a)}}}if(i>1)return l/(i-1)};var g=function(t,e){var n=v(t,e);return n?Math.sqrt(n):n};var m=function(t,e){var n=t.length,i=-1,r,a,o;if(e==null){while(++i<n){if((r=t[i])!=null&&r>=r){a=o=r;while(++i<n){if((r=t[i])!=null){if(a>r)a=r;if(o<r)o=r}}}}}else{while(++i<n){if((r=e(t[i],i,t))!=null&&r>=r){a=o=r;while(++i<n){if((r=e(t[i],i,t))!=null){if(a>r)a=r;if(o<r)o=r}}}}}return[a,o]};var _=Array.prototype;var y=_.slice;var b=_.map;var w=function(t){return function(){return t}};var x=function(t){return t};var S=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(r);while(++i<r){a[i]=t+i*n}return a};var C=Math.sqrt(50),E=Math.sqrt(10),O=Math.sqrt(2);var T=function(t,e,n){var i,r=-1,a,o,s;e=+e,t=+t,n=+n;if(t===e&&n>0)return[t];if(i=e<t)a=t,t=e,e=a;if((s=M(t,e,n))===0||!isFinite(s))return[];if(s>0){t=Math.ceil(t/s);e=Math.floor(e/s);o=new Array(a=Math.ceil(e-t+1));while(++r<a)o[r]=(t+r)*s}else{t=Math.floor(t*s);e=Math.ceil(e*s);o=new Array(a=Math.ceil(t-e+1));while(++r<a)o[r]=(t-r)/s}if(i)o.reverse();return o};function M(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return r>=0?(a>=C?10:a>=E?5:a>=O?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(a>=C?10:a>=E?5:a>=O?2:1)}function I(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;if(a>=C)r*=10;else if(a>=E)r*=5;else if(a>=O)r*=2;return e<t?-r:r}var R=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1};var N=function(){var t=x,e=m,n=R;function i(i){var r,a=i.length,o,s=new Array(a);for(r=0;r<a;++r){s[r]=t(i[r],r,i)}var l=e(s),c=l[0],f=l[1],h=n(s,c,f);if(!Array.isArray(h)){h=I(c,f,h);h=S(Math.ceil(c/h)*h,Math.floor(f/h)*h,h)}var d=h.length;while(h[0]<=c)h.shift(),--d;while(h[d-1]>f)h.pop(),--d;var p=new Array(d+1),v;for(r=0;r<=d;++r){v=p[r]=[];v.x0=r>0?h[r-1]:c;v.x1=r<d?h[r]:f}for(r=0;r<a;++r){o=s[r];if(c<=o&&o<=f){p[u(h,o,0,d)].push(i[r])}}return p}i.value=function(e){return arguments.length?(t=typeof e==="function"?e:w(e),i):t};i.domain=function(t){return arguments.length?(e=typeof t==="function"?t:w([t[0],t[1]]),i):e};i.thresholds=function(t){return arguments.length?(n=typeof t==="function"?t:Array.isArray(t)?w(y.call(t)):w(t),i):n};return i};var A=function(t,e,n){if(n==null)n=p;if(!(i=t.length))return;if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,a=Math.floor(r),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(r-a)};var L=function(t,e,n){t=b.call(t,p).sort(i);return Math.ceil((n-e)/(2*(A(t,.75)-A(t,.25))*Math.pow(t.length,-1/3)))};var P=function(t,e,n){return Math.ceil((n-e)/(3.5*g(t)*Math.pow(t.length,-1/3)))};var D=function(t,e){var n=t.length,i=-1,r,a;if(e==null){while(++i<n){if((r=t[i])!=null&&r>=r){a=r;while(++i<n){if((r=t[i])!=null&&r>a){a=r}}}}}else{while(++i<n){if((r=e(t[i],i,t))!=null&&r>=r){a=r;while(++i<n){if((r=e(t[i],i,t))!=null&&r>a){a=r}}}}}return a};var j=function(t,e){var n=t.length,i=n,r=-1,a,o=0;if(e==null){while(++r<n){if(!isNaN(a=p(t[r])))o+=a;else--i}}else{while(++r<n){if(!isNaN(a=p(e(t[r],r,t))))o+=a;else--i}}if(i)return o/i};var k=function(t,e){var n=t.length,r=-1,a,o=[];if(e==null){while(++r<n){if(!isNaN(a=p(t[r]))){o.push(a)}}}else{while(++r<n){if(!isNaN(a=p(e(t[r],r,t)))){o.push(a)}}}return A(o.sort(i),.5)};var F=function(t){var e=t.length,n,i=-1,r=0,a,o;while(++i<e)r+=t[i].length;a=new Array(r);while(--e>=0){o=t[e];n=o.length;while(--n>=0){a[--r]=o[n]}}return a};var $=function(t,e){var n=t.length,i=-1,r,a;if(e==null){while(++i<n){if((r=t[i])!=null&&r>=r){a=r;while(++i<n){if((r=t[i])!=null&&a>r){a=r}}}}}else{while(++i<n){if((r=e(t[i],i,t))!=null&&r>=r){a=r;while(++i<n){if((r=e(t[i],i,t))!=null&&a>r){a=r}}}}}return a};var G=function(t,e){var n=e.length,i=new Array(n);while(n--)i[n]=t[e[n]];return i};var U=function(t,e){if(!(n=t.length))return;var n,r=0,a=0,o,s=t[a];if(e==null)e=i;while(++r<n){if(e(o=t[r],s)<0||e(s,s)!==0){s=o,a=r}}if(e(s,s)===0)return a};var Y=function(t,e,n){var i=(n==null?t.length:n)-(e=e==null?0:+e),r,a;while(i){a=Math.random()*i--|0;r=t[i+e];t[i+e]=t[a+e];t[a+e]=r}return t};var V=function(t,e){var n=t.length,i=-1,r,a=0;if(e==null){while(++i<n){if(r=+t[i])a+=r}}else{while(++i<n){if(r=+e(t[i],i,t))a+=r}}return a};var H=function(t){if(!(a=t.length))return[];for(var e=-1,n=$(t,z),i=new Array(n);++e<n;){for(var r=-1,a,o=i[e]=new Array(a);++r<a;){o[r]=t[r][e]}}return i};function z(t){return t.length}var B=function(){return H(arguments)};n.d(e,"b",function(){return u});n.d(e,false,function(){return s});n.d(e,false,function(){return l});n.d(e,"a",function(){return i});n.d(e,"c",function(){return r});n.d(e,false,function(){return h});n.d(e,false,function(){return d});n.d(e,false,function(){return g});n.d(e,"d",function(){return m});n.d(e,false,function(){return N});n.d(e,false,function(){return L});n.d(e,false,function(){return P});n.d(e,false,function(){return R});n.d(e,false,function(){return D});n.d(e,false,function(){return j});n.d(e,false,function(){return k});n.d(e,false,function(){return F});n.d(e,false,function(){return $});n.d(e,false,function(){return c});n.d(e,false,function(){return G});n.d(e,"e",function(){return A});n.d(e,"f",function(){return S});n.d(e,false,function(){return U});n.d(e,false,function(){return Y});n.d(e,false,function(){return V});n.d(e,"i",function(){return T});n.d(e,"g",function(){return M});n.d(e,"h",function(){return I});n.d(e,false,function(){return H});n.d(e,false,function(){return v});n.d(e,false,function(){return B})},function(t,e,n){"use strict";var i=n(1);var r=n(42);var a=function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};r["a"].call(this,e);this.detail=n};i["d"](a,r["a"]);e["a"]=a},function(t,e,n){"use strict";var i=n(1);var r=n(231);var a=n(3);var o=n(20);var s=n(42);var l=function t(){r["a"].call(this);this.pendingRemovals_={};this.dispatching_={};this.listeners_={}};Object(i["d"])(l,r["a"]);l.prototype.addEventListener=function(t,e){var n=this.listeners_[t];if(!n){n=this.listeners_[t]=[]}if(n.indexOf(e)===-1){n.push(e)}};l.prototype.dispatchEvent=function(t){var e=typeof t==="string"?new s["a"](t):t;var n=e.type;e.target=this;var i=this.listeners_[n];var r=void 0;if(i){if(!(n in this.dispatching_)){this.dispatching_[n]=0;this.pendingRemovals_[n]=0}++this.dispatching_[n];for(var a=0,l=i.length;a<l;++a){if(i[a].call(this,e)===false||e.propagationStopped){r=false;break}}--this.dispatching_[n];if(this.dispatching_[n]===0){var u=this.pendingRemovals_[n];delete this.pendingRemovals_[n];while(u--){this.removeEventListener(n,o["c"])}delete this.dispatching_[n]}return r}};l.prototype.disposeInternal=function(){Object(a["d"])(this)};l.prototype.getListeners=function(t){return this.listeners_[t]};l.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0};l.prototype.removeEventListener=function(t,e){var n=this.listeners_[t];if(n){var i=n.indexOf(e);if(t in this.pendingRemovals_){n[i]=o["c"];++this.pendingRemovals_[t]}else{n.splice(i,1);if(n.length===0){delete this.listeners_[t]}}}};e["a"]=l},function(t,e,n){"use strict";var i=n(1);var r=n(39);var a=n(4);var o=n(20);var s=n(146);var l=n(10);var u=n(85);var c=n(40);var f=function t(){r["a"].call(this);this.extent_=Object(a["j"])();this.extentRevision_=-1;this.simplifiedGeometryCache={};this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=0};Object(i["d"])(f,r["a"]);var h=Object(c["c"])();f.prototype.clone=function(){};f.prototype.closestPointXY=function(t,e,n,i){};f.prototype.getClosestPoint=function(t,e){var n=e?e:[NaN,NaN];this.closestPointXY(t[0],t[1],n,Infinity);return n};f.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])};f.prototype.computeExtent=function(t){};f.prototype.containsXY=o["a"];f.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){this.extent_=this.computeExtent(this.extent_);this.extentRevision_=this.getRevision()}return Object(a["I"])(this.extent_,t)};f.prototype.rotate=function(t,e){};f.prototype.scale=function(t,e,n){};f.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)};f.prototype.getSimplifiedGeometry=function(t){};f.prototype.getType=function(){};f.prototype.applyTransform=function(t){};f.prototype.intersectsExtent=function(t){};f.prototype.translate=function(t,e){};f.prototype.transform=function(t,e){t=Object(l["h"])(t);var n=t.getUnits()==u["b"].TILE_PIXELS?function(n,i,r){var o=t.getExtent();var u=t.getWorldExtent();var f=Object(a["A"])(u)/Object(a["A"])(o);Object(c["b"])(h,u[0],u[3],f,-f,0,0,0);Object(s["c"])(n,0,n.length,r,h,i);return Object(l["j"])(t,e)(n,i,r)}:Object(l["j"])(t,e);this.applyTransform(n);return this};e["a"]=f},function(t,e,n){"use strict";e["a"]={ADD:"add",REMOVE:"remove"}},function(t,e,n){"use strict";var i=n(1);var r=n(7);var a=n(4);var o=n(25);var s=n(8);var l=n(21);var u=n(69);var c=n(134);var f=n(138);var h=n(15);var d=function t(e,n){u["a"].call(this);this.setCoordinates(e,n)};Object(i["d"])(d,u["a"]);d.prototype.appendPoint=function(t){if(!this.flatCoordinates){this.flatCoordinates=t.getFlatCoordinates().slice()}else{Object(r["c"])(this.flatCoordinates,t.getFlatCoordinates())}this.changed()};d.prototype.clone=function(){var t=new d(null);t.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return t};d.prototype.closestPointXY=function(t,e,n,i){if(i<Object(a["e"])(this.getExtent(),t,e)){return i}var r=this.flatCoordinates;var o=this.stride;for(var s=0,l=r.length;s<l;s+=o){var u=Object(h["f"])(t,e,r[s],r[s+1]);if(u<i){i=u;for(var c=0;c<o;++c){n[c]=r[s+c]}n.length=o}}return i};d.prototype.getCoordinates=function(){return Object(f["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};d.prototype.getPoint=function(t){var e=!this.flatCoordinates?0:this.flatCoordinates.length/this.stride;if(t<0||e<=t){return null}var n=new l["a"](null);n.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride));return n};d.prototype.getPoints=function(){var t=this.flatCoordinates;var e=this.layout;var n=this.stride;var i=[];for(var r=0,a=t.length;r<a;r+=n){var o=new l["a"](null);o.setFlatCoordinates(e,t.slice(r,r+n));i.push(o)}return i};d.prototype.getType=function(){return s["a"].MULTI_POINT};d.prototype.intersectsExtent=function(t){var e=this.flatCoordinates;var n=this.stride;for(var i=0,r=e.length;i<r;i+=n){var o=e[i];var s=e[i+1];if(Object(a["h"])(t,o,s)){return true}}return false};d.prototype.setCoordinates=function(t,e){if(!t){this.setFlatCoordinates(o["a"].XY,null)}else{this.setLayout(e,t,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=Object(c["b"])(this.flatCoordinates,0,t,this.stride);this.changed()}};d.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e);this.changed()};e["a"]=d},function(t,e,n){"use strict";n.d(e,"b",function(){return s});n.d(e,"c",function(){return u});n.d(e,"a",function(){return c});n.d(e,"d",function(){return d});var i=n(27);var r=n(15);var a=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;var o=/^([a-z]*)$/i;function s(t){if(typeof t==="string"){return t}else{return d(t)}}function l(t){var e=document.createElement("div");e.style.color=t;if(e.style.color!==""){document.body.appendChild(e);var n=getComputedStyle(e).color;document.body.removeChild(e);return n}else{return""}}var u=function(){var t=1024;var e={};var n=0;return function(i){var r=void 0;if(e.hasOwnProperty(i)){r=e[i]}else{if(n>=t){var a=0;for(var o in e){if((a++&3)===0){delete e[o];--n}}}r=f(i);e[i]=r;++n}return r}}();function c(t){if(Array.isArray(t)){return t}else{return u(t)}}function f(t){var e=void 0,n=void 0,r=void 0,s=void 0,u=void 0;if(o.exec(t)){t=l(t)}if(a.exec(t)){var c=t.length-1;var f=void 0;if(c<=4){f=1}else{f=2}var d=c===4||c===8;e=parseInt(t.substr(1+0*f,f),16);n=parseInt(t.substr(1+1*f,f),16);r=parseInt(t.substr(1+2*f,f),16);if(d){s=parseInt(t.substr(1+3*f,f),16)}else{s=255}if(f==1){e=(e<<4)+e;n=(n<<4)+n;r=(r<<4)+r;if(d){s=(s<<4)+s}}u=[e,n,r,s/255]}else if(t.indexOf("rgba(")==0){u=t.slice(5,-1).split(",").map(Number);h(u)}else if(t.indexOf("rgb(")==0){u=t.slice(4,-1).split(",").map(Number);u.push(1);h(u)}else{Object(i["a"])(false,14)}return u}function h(t){t[0]=Object(r["a"])(t[0]+.5|0,0,255);t[1]=Object(r["a"])(t[1]+.5|0,0,255);t[2]=Object(r["a"])(t[2]+.5|0,0,255);t[3]=Object(r["a"])(t[3],0,1);return t}function d(t){var e=t[0];if(e!=(e|0)){e=e+.5|0}var n=t[1];if(n!=(n|0)){n=n+.5|0}var i=t[2];if(i!=(i|0)){i=i+.5|0}var r=t[3]===undefined?1:t[3];return"rgba("+e+","+n+","+i+","+r+")"}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"};var r={};r[i.DEGREES]=2*Math.PI*6370997/360;r[i.FEET]=.3048;r[i.METERS]=1;r[i.USFEET]=1200/3937;e["b"]=i},function(t,e,n){"use strict";n.d(e,"b",function(){return d});var i=n(3);var r=n(11);var a=n(1);var o=n(39);var s=n(178);var l=n(100);var u=n(9);var c=n(177);var f=n(163);var h=function t(e){var n=Object(u["a"])({},e);delete n.source;s["a"].call(this,n);this.mapPrecomposeKey_=null;this.mapRenderKey_=null;this.sourceChangeKey_=null;if(e.map){this.setMap(e.map)}Object(i["a"])(this,Object(o["b"])(l["a"].SOURCE),this.handleSourcePropertyChange_,this);var r=e.source?e.source:null;this.setSource(r)};Object(a["d"])(h,s["a"]);function d(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}h.prototype.getLayersArray=function(t){var e=t?t:[];e.push(this);return e};h.prototype.getLayerStatesArray=function(t){var e=t?t:[];e.push(this.getLayerState());return e};h.prototype.getSource=function(){var t=this.get(l["a"].SOURCE);return t||null};h.prototype.getSourceState=function(){var t=this.getSource();return!t?f["a"].UNDEFINED:t.getState()};h.prototype.handleSourceChange_=function(){this.changed()};h.prototype.handleSourcePropertyChange_=function(){if(this.sourceChangeKey_){Object(i["e"])(this.sourceChangeKey_);this.sourceChangeKey_=null}var t=this.getSource();if(t){this.sourceChangeKey_=Object(i["a"])(t,r["a"].CHANGE,this.handleSourceChange_,this)}this.changed()};h.prototype.setMap=function(t){if(this.mapPrecomposeKey_){Object(i["e"])(this.mapPrecomposeKey_);this.mapPrecomposeKey_=null}if(!t){this.changed()}if(this.mapRenderKey_){Object(i["e"])(this.mapRenderKey_);this.mapRenderKey_=null}if(t){this.mapPrecomposeKey_=Object(i["a"])(t,c["a"].PRECOMPOSE,function(t){var e=this.getLayerState();e.managed=false;e.zIndex=Infinity;t.frameState.layerStatesArray.push(e);t.frameState.layerStates[Object(a["c"])(this)]=e},this);this.mapRenderKey_=Object(i["a"])(this,r["a"].CHANGE,t.render,t);this.changed()}};h.prototype.setSource=function(t){this.set(l["a"].SOURCE,t)};e["a"]=h},function(t,e,n){"use strict";var i=function t(){};i.prototype.showMessage=function(t){};i.prototype.show=function(t){var e=this.getMessageObjects(t);e.forEach(this.showMessage,this)};i.prototype.error=function(t){this.show(this.getMessageObjects(t,i.Type.ERROR))};i.prototype.info=function(t){this.show(this.getMessageObjects(t,i.Type.INFORMATION))};i.prototype.success=function(t){this.show(this.getMessageObjects(t,i.Type.SUCCESS))};i.prototype.warn=function(t){this.show(this.getMessageObjects(t,i.Type.WARNING))};i.prototype.getMessageObjects=function(t,e){var n=[];var r=null;var a=i.Type.INFORMATION;if(typeof t==="string"){n.push({msg:t,type:e!==undefined?e:a})}else if(Array.isArray(t)){t.forEach(function(i){if(typeof t==="string"){r={msg:i,type:e!==undefined?e:a}}else{r=i;if(e!==undefined){r.type=e}}n.push(r)},this)}else{r=t;if(e!==undefined){r.type=e}if(r.type===undefined){r.type=a}n.push(r)}return n};i.Type={ERROR:"error",INFORMATION:"information",SUCCESS:"success",WARNING:"warning"};e["a"]=i},function(t,e,n){"use strict";var i=n(1);var r=n(7);var a=n(4);var o=n(25);var s=n(8);var l=n(36);var u=n(69);var c=n(145);var f=n(134);var h=n(138);var d=n(274);var p=n(219);var v=n(162);var g=function t(e,n){u["a"].call(this);this.ends_=[];this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(e,n)};Object(i["d"])(g,u["a"]);g.prototype.appendLineString=function(t){if(!this.flatCoordinates){this.flatCoordinates=t.getFlatCoordinates().slice()}else{Object(r["c"])(this.flatCoordinates,t.getFlatCoordinates().slice())}this.ends_.push(this.flatCoordinates.length);this.changed()};g.prototype.clone=function(){var t=new g(null);t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice());return t};g.prototype.closestPointXY=function(t,e,n,i){if(i<Object(a["e"])(this.getExtent(),t,e)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(c["a"])(this.flatCoordinates,0,this.ends_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(c["b"])(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,false,t,e,n,i)};g.prototype.getCoordinateAtM=function(t,e,n){if(this.layout!=o["a"].XYM&&this.layout!=o["a"].XYZM||this.flatCoordinates.length===0){return null}var i=e!==undefined?e:false;var r=n!==undefined?n:false;return Object(d["c"])(this.flatCoordinates,0,this.ends_,this.stride,t,i,r)};g.prototype.getCoordinates=function(){return Object(h["b"])(this.flatCoordinates,0,this.ends_,this.stride)};g.prototype.getEnds=function(){return this.ends_};g.prototype.getLineString=function(t){if(t<0||this.ends_.length<=t){return null}var e=new l["a"](null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]));return e};g.prototype.getLineStrings=function(){var t=this.flatCoordinates;var e=this.ends_;var n=this.layout;var i=[];var r=0;for(var a=0,o=e.length;a<o;++a){var s=e[a];var u=new l["a"](null);u.setFlatCoordinates(n,t.slice(r,s));i.push(u);r=s}return i};g.prototype.getFlatMidpoints=function(){var t=[];var e=this.flatCoordinates;var n=0;var i=this.ends_;var a=this.stride;for(var o=0,s=i.length;o<s;++o){var l=i[o];var u=Object(d["a"])(e,n,l,a,.5);Object(r["c"])(t,u);n=l}return t};g.prototype.getSimplifiedGeometryInternal=function(t){var e=[];var n=[];e.length=Object(v["b"])(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n);var i=new g(null);i.setFlatCoordinates(o["a"].XY,e,n);return i};g.prototype.getType=function(){return s["a"].MULTI_LINE_STRING};g.prototype.intersectsExtent=function(t){return Object(p["b"])(this.flatCoordinates,0,this.ends_,this.stride,t)};g.prototype.setCoordinates=function(t,e){if(!t){this.setFlatCoordinates(o["a"].XY,null,this.ends_)}else{this.setLayout(e,t,2);if(!this.flatCoordinates){this.flatCoordinates=[]}var n=Object(f["c"])(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1];this.changed()}};g.prototype.setFlatCoordinates=function(t,e,n){this.setFlatCoordinatesInternal(t,e);this.ends_=n;this.changed()};g.prototype.setLineStrings=function(t){var e=this.getLayout();var n=[];var i=[];for(var a=0,o=t.length;a<o;++a){var s=t[a];if(a===0){e=s.getLayout()}Object(r["c"])(n,s.getFlatCoordinates());i.push(n.length)}this.setFlatCoordinates(e,n,i)};e["a"]=g},function(t,e,n){"use strict";var i=n(1);var r=n(7);var a=n(4);var o=n(25);var s=n(8);var l=n(83);var u=n(32);var c=n(69);var f=n(267);function h(t,e,n,i){var r=[];var o=Object(a["j"])();for(var s=0,l=n.length;s<l;++s){var u=n[s];o=Object(a["o"])(t,e,u[0],i);r.push((o[0]+o[2])/2,(o[1]+o[3])/2);e=u[u.length-1]}return r}var d=n(145);var p=n(171);var v=n(134);var g=n(138);var m=n(365);var _=n(219);var y=n(232);var b=n(162);var w=function t(e,n){c["a"].call(this);this.endss_=[];this.flatInteriorPointsRevision_=-1;this.flatInteriorPoints_=null;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.orientedRevision_=-1;this.orientedFlatCoordinates_=null;this.setCoordinates(e,n)};Object(i["d"])(w,c["a"]);w.prototype.appendPolygon=function(t){var e=void 0;if(!this.flatCoordinates){this.flatCoordinates=t.getFlatCoordinates().slice();e=t.getEnds().slice();this.endss_.push()}else{var n=this.flatCoordinates.length;Object(r["c"])(this.flatCoordinates,t.getFlatCoordinates());e=t.getEnds().slice();for(var i=0,a=e.length;i<a;++i){e[i]+=n}}this.endss_.push(e);this.changed()};w.prototype.clone=function(){var t=new w(null);var e=this.endss_.length;var n=new Array(e);for(var i=0;i<e;++i){n[i]=this.endss_[i].slice()}t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),n);return t};w.prototype.closestPointXY=function(t,e,n,i){if(i<Object(a["e"])(this.getExtent(),t,e)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(d["f"])(this.flatCoordinates,0,this.endss_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(d["c"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,true,t,e,n,i)};w.prototype.containsXY=function(t,e){return Object(p["d"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)};w.prototype.getArea=function(){return Object(f["c"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)};w.prototype.getCoordinates=function(t){var e=void 0;if(t!==undefined){e=this.getOrientedFlatCoordinates().slice();Object(y["d"])(e,0,this.endss_,this.stride,t)}else{e=this.flatCoordinates}return Object(g["c"])(e,0,this.endss_,this.stride)};w.prototype.getEndss=function(){return this.endss_};w.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=h(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(m["b"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t);this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_};w.prototype.getInteriorPoints=function(){var t=new l["a"](null);t.setFlatCoordinates(o["a"].XYM,this.getFlatInteriorPoints().slice());return t};w.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;if(Object(y["b"])(t,0,this.endss_,this.stride)){this.orientedFlatCoordinates_=t}else{this.orientedFlatCoordinates_=t.slice();this.orientedFlatCoordinates_.length=Object(y["d"])(this.orientedFlatCoordinates_,0,this.endss_,this.stride)}this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};w.prototype.getSimplifiedGeometryInternal=function(t){var e=[];var n=[];e.length=Object(b["d"])(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n);var i=new w(null);i.setFlatCoordinates(o["a"].XY,e,n);return i};w.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t){return null}var e=void 0;if(t===0){e=0}else{var n=this.endss_[t-1];e=n[n.length-1]}var i=this.endss_[t].slice();var r=i[i.length-1];if(e!==0){for(var a=0,o=i.length;a<o;++a){i[a]-=e}}var s=new u["a"](null);s.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e,r),i);return s};w.prototype.getPolygons=function(){var t=this.layout;var e=this.flatCoordinates;var n=this.endss_;var i=[];var r=0;for(var a=0,o=n.length;a<o;++a){var s=n[a].slice();var l=s[s.length-1];if(r!==0){for(var c=0,f=s.length;c<f;++c){s[c]-=r}}var h=new u["a"](null);h.setFlatCoordinates(t,e.slice(r,l),s);i.push(h);r=l}return i};w.prototype.getType=function(){return s["a"].MULTI_POLYGON};w.prototype.intersectsExtent=function(t){return Object(_["d"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)};w.prototype.setCoordinates=function(t,e){if(!t){this.setFlatCoordinates(o["a"].XY,null,this.endss_)}else{this.setLayout(e,t,3);if(!this.flatCoordinates){this.flatCoordinates=[]}var n=Object(v["d"])(this.flatCoordinates,0,t,this.stride,this.endss_);if(n.length===0){this.flatCoordinates.length=0}else{var i=n[n.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}};w.prototype.setFlatCoordinates=function(t,e,n){this.setFlatCoordinatesInternal(t,e);this.endss_=n;this.changed()};w.prototype.setPolygons=function(t){var e=this.getLayout();var n=[];var i=[];for(var a=0,o=t.length;a<o;++a){var s=t[a];if(a===0){e=s.getLayout()}var l=n.length;var u=s.getEnds();for(var c=0,f=u.length;c<f;++c){u[c]+=l}Object(r["c"])(n,s.getFlatCoordinates());i.push(u)}this.setFlatCoordinates(e,n,i)};var x=e["a"]=w},function(t,e,n){"use strict";n.d(e,"b",function(){return l});n.d(e,"a",function(){return c});n.d(e,"c",function(){return f});var i=n(18);var r=n(71);var a=n(98);var o=n(48);var s=i["a"].momentProperties=[];function l(t,e){var n,i,r;if(!Object(a["a"])(e._isAMomentObject)){t._isAMomentObject=e._isAMomentObject}if(!Object(a["a"])(e._i)){t._i=e._i}if(!Object(a["a"])(e._f)){t._f=e._f}if(!Object(a["a"])(e._l)){t._l=e._l}if(!Object(a["a"])(e._strict)){t._strict=e._strict}if(!Object(a["a"])(e._tzm)){t._tzm=e._tzm}if(!Object(a["a"])(e._isUTC)){t._isUTC=e._isUTC}if(!Object(a["a"])(e._offset)){t._offset=e._offset}if(!Object(a["a"])(e._pf)){t._pf=Object(o["a"])(e)}if(!Object(a["a"])(e._locale)){t._locale=e._locale}if(s.length>0){for(n=0;n<s.length;n++){i=s[n];r=e[i];if(!Object(a["a"])(r)){t[i]=r}}}return t}var u=false;function c(t){l(this,t);this._d=new Date(t._d!=null?t._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(u===false){u=true;i["a"].updateOffset(this);u=false}}function f(t){return t instanceof c||t!=null&&t._isAMomentObject!=null}},function(t,e,n){(function(t,i){true?i(e,n(157)):undefined})(this,function(t,e){"use strict";function n(t,e,n,i,r){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*i+o*r)/6}function i(t){var e=t.length-1;return function(i){var r=i<=0?i=0:i>=1?(i=1,e-1):Math.floor(i*e),a=t[r],o=t[r+1],s=r>0?t[r-1]:2*a-o,l=r<e-1?t[r+2]:2*o-a;return n((i-r/e)*e,s,a,o,l)}}function r(t){var e=t.length;return function(i){var r=Math.floor(((i%=1)<0?++i:i)*e),a=t[(r+e-1)%e],o=t[r%e],s=t[(r+1)%e],l=t[(r+2)%e];return n((i-r/e)*e,a,o,s,l)}}function a(t){return function(){return t}}function o(t,e){return function(n){return t+n*e}}function s(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function l(t,e){var n=e-t;return n?o(t,n>180||n<-180?n-360*Math.round(n/360):n):a(isNaN(t)?e:t)}function u(t){return(t=+t)===1?c:function(e,n){return n-e?s(e,n,t):a(isNaN(e)?n:e)}}function c(t,e){var n=e-t;return n?o(t,n):a(isNaN(t)?e:t)}var f=function t(n){var i=u(n);function r(t,n){var r=i((t=e.rgb(t)).r,(n=e.rgb(n)).r),a=i(t.g,n.g),o=i(t.b,n.b),s=c(t.opacity,n.opacity);return function(e){t.r=r(e);t.g=a(e);t.b=o(e);t.opacity=s(e);return t+""}}r.gamma=t;return r}(1);function h(t){return function(n){var i=n.length,r=new Array(i),a=new Array(i),o=new Array(i),s,l;for(s=0;s<i;++s){l=e.rgb(n[s]);r[s]=l.r||0;a[s]=l.g||0;o[s]=l.b||0}r=t(r);a=t(a);o=t(o);l.opacity=1;return function(t){l.r=r(t);l.g=a(t);l.b=o(t);return l+""}}}var d=h(i);var p=h(r);function v(t,e){if(!e)e=[];var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=t[r]*(1-a)+e[r]*a;return i}}function g(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function m(t,e){return(g(e)?v:_)(t,e)}function _(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),a=new Array(n),o;for(o=0;o<i;++o)r[o]=T(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(t){for(o=0;o<i;++o)a[o]=r[o](t);return a}}function y(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function b(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function w(t,e){var n={},i={},r;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(r in e){if(r in t){n[r]=T(t[r],e[r])}else{i[r]=e[r]}}return function(t){for(r in n)i[r]=n[r](t);return i}}var x=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,S=new RegExp(x.source,"g");function C(t){return function(){return t}}function E(t){return function(e){return t(e)+""}}function O(t,e){var n=x.lastIndex=S.lastIndex=0,i,r,a,o=-1,s=[],l=[];t=t+"",e=e+"";while((i=x.exec(t))&&(r=S.exec(e))){if((a=r.index)>n){a=e.slice(n,a);if(s[o])s[o]+=a;else s[++o]=a}if((i=i[0])===(r=r[0])){if(s[o])s[o]+=r;else s[++o]=r}else{s[++o]=null;l.push({i:o,x:b(i,r)})}n=S.lastIndex}if(n<e.length){a=e.slice(n);if(s[o])s[o]+=a;else s[++o]=a}return s.length<2?l[0]?E(l[0].x):C(e):(e=l.length,function(t){for(var n=0,i;n<e;++n)s[(i=l[n]).i]=i.x(t);return s.join("")})}function T(t,n){var i=typeof n,r;return n==null||i==="boolean"?a(n):(i==="number"?b:i==="string"?(r=e.color(n))?(n=r,f):O:n instanceof e.color?f:n instanceof Date?y:g(n)?v:Array.isArray(n)?_:typeof n.valueOf!=="function"&&typeof n.toString!=="function"||isNaN(n)?w:b)(t,n)}function M(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function I(t,e){var n=l(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}}function R(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var N=180/Math.PI;var A={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function L(t,e,n,i,r,a){var o,s,l;if(o=Math.sqrt(t*t+e*e))t/=o,e/=o;if(l=t*n+e*i)n-=t*l,i-=e*l;if(s=Math.sqrt(n*n+i*i))n/=s,i/=s,l/=s;if(t*i<e*n)t=-t,e=-e,l=-l,o=-o;return{translateX:r,translateY:a,rotate:Math.atan2(e,t)*N,skewX:Math.atan(l)*N,scaleX:o,scaleY:s}}var P,D,j,k;function F(t){if(t==="none")return A;if(!P)P=document.createElement("DIV"),D=document.documentElement,j=document.defaultView;P.style.transform=t;t=j.getComputedStyle(D.appendChild(P),null).getPropertyValue("transform");D.removeChild(P);t=t.slice(7,-1).split(",");return L(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function $(t){if(t==null)return A;if(!k)k=document.createElementNS("http://www.w3.org/2000/svg","g");k.setAttribute("transform",t);if(!(t=k.transform.baseVal.consolidate()))return A;t=t.matrix;return L(t.a,t.b,t.c,t.d,t.e,t.f)}function G(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}function a(t,i,r,a,o,s){if(t!==r||i!==a){var l=o.push("translate(",null,e,null,n);s.push({i:l-4,x:b(t,r)},{i:l-2,x:b(i,a)})}else if(r||a){o.push("translate("+r+e+a+n)}}function o(t,e,n,a){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;a.push({i:n.push(r(n)+"rotate(",null,i)-2,x:b(t,e)})}else if(e){n.push(r(n)+"rotate("+e+i)}}function s(t,e,n,a){if(t!==e){a.push({i:n.push(r(n)+"skewX(",null,i)-2,x:b(t,e)})}else if(e){n.push(r(n)+"skewX("+e+i)}}function l(t,e,n,i,a,o){if(t!==n||e!==i){var s=a.push(r(a)+"scale(",null,",",null,")");o.push({i:s-4,x:b(t,n)},{i:s-2,x:b(e,i)})}else if(n!==1||i!==1){a.push(r(a)+"scale("+n+","+i+")")}}return function(e,n){var i=[],r=[];e=t(e),n=t(n);a(e.translateX,e.translateY,n.translateX,n.translateY,i,r);o(e.rotate,n.rotate,i,r);s(e.skewX,n.skewX,i,r);l(e.scaleX,e.scaleY,n.scaleX,n.scaleY,i,r);e=n=null;return function(t){var e=-1,n=r.length,a;while(++e<n)i[(a=r[e]).i]=a.x(t);return i.join("")}}}var U=G(F,"px, ","px)","deg)");var Y=G($,", ",")",")");var V=Math.SQRT2,H=2,z=4,B=1e-12;function W(t){return((t=Math.exp(t))+1/t)/2}function q(t){return((t=Math.exp(t))-1/t)/2}function X(t){return((t=Math.exp(2*t))-1)/(t+1)}function K(t,e){var n=t[0],i=t[1],r=t[2],a=e[0],o=e[1],s=e[2],l=a-n,u=o-i,c=l*l+u*u,f,h;if(c<B){h=Math.log(s/r)/V;f=function(t){return[n+t*l,i+t*u,r*Math.exp(V*t*h)]}}else{var d=Math.sqrt(c),p=(s*s-r*r+z*c)/(2*r*H*d),v=(s*s-r*r-z*c)/(2*s*H*d),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);h=(m-g)/V;f=function(t){var e=t*h,a=W(g),o=r/(H*d)*(a*X(V*e+g)-q(g));return[n+o*l,i+o*u,r*a/W(V*e+g)]}}f.duration=h*1e3;return f}function Z(t){return function(n,i){var r=t((n=e.hsl(n)).h,(i=e.hsl(i)).h),a=c(n.s,i.s),o=c(n.l,i.l),s=c(n.opacity,i.opacity);return function(t){n.h=r(t);n.s=a(t);n.l=o(t);n.opacity=s(t);return n+""}}}var Q=Z(l);var J=Z(c);function tt(t,n){var i=c((t=e.lab(t)).l,(n=e.lab(n)).l),r=c(t.a,n.a),a=c(t.b,n.b),o=c(t.opacity,n.opacity);return function(e){t.l=i(e);t.a=r(e);t.b=a(e);t.opacity=o(e);return t+""}}function et(t){return function(n,i){var r=t((n=e.hcl(n)).h,(i=e.hcl(i)).h),a=c(n.c,i.c),o=c(n.l,i.l),s=c(n.opacity,i.opacity);return function(t){n.h=r(t);n.c=a(t);n.l=o(t);n.opacity=s(t);return n+""}}}var nt=et(l);var it=et(c);function rt(t){return function n(i){i=+i;function r(n,r){var a=t((n=e.cubehelix(n)).h,(r=e.cubehelix(r)).h),o=c(n.s,r.s),s=c(n.l,r.l),l=c(n.opacity,r.opacity);return function(t){n.h=a(t);n.s=o(t);n.l=s(Math.pow(t,i));n.opacity=l(t);return n+""}}r.gamma=n;return r}(1)}var at=rt(l);var ot=rt(c);function st(t,e){var n=0,i=e.length-1,r=e[0],a=new Array(i<0?0:i);while(n<i)a[n]=t(r,r=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return a[e](t-e)}}function lt(t,e){var n=new Array(e);for(var i=0;i<e;++i)n[i]=t(i/(e-1));return n}t.interpolate=T;t.interpolateArray=m;t.interpolateBasis=i;t.interpolateBasisClosed=r;t.interpolateCubehelix=at;t.interpolateCubehelixLong=ot;t.interpolateDate=y;t.interpolateDiscrete=M;t.interpolateHcl=nt;t.interpolateHclLong=it;t.interpolateHsl=Q;t.interpolateHslLong=J;t.interpolateHue=I;t.interpolateLab=tt;t.interpolateNumber=b;t.interpolateNumberArray=v;t.interpolateObject=w;t.interpolateRgb=f;t.interpolateRgbBasis=d;t.interpolateRgbBasisClosed=p;t.interpolateRound=R;t.interpolateString=O;t.interpolateTransformCss=U;t.interpolateTransformSvg=Y;t.interpolateZoom=K;t.piecewise=st;t.quantize=lt;Object.defineProperty(t,"__esModule",{value:true})})},function(t,e,n){"use strict";n.d(e,"a",function(){return i});n.d(e,"b",function(){return r});n.d(e,"c",function(){return a});n.d(e,"d",function(){return o});function i(t){return Math.pow(t,3)}function r(t){return 1-i(1-t)}function a(t){return 3*t*t-2*t*t*t}function o(t){return t}function s(t){if(t<.5){return a(2*t)}else{return 1-a(2*(t-.5))}}},function(t,e,n){"use strict";var i=n(1);var r=n(19);var a=n(82);var o=n(39);var s=n(167);var l=n(27);var u=n(3);var c=n(11);var f=n(4);var h=n(178);var d=n(9);var p=n(163);var v={LAYERS:"layers"};var g=function t(e){var n=e||{};var i=Object(d["a"])({},n);delete i.layers;var a=n.layers;h["a"].call(this,i);this.layersListenerKeys_=[];this.listenerKeys_={};Object(u["a"])(this,Object(o["b"])(v.LAYERS),this.handleLayersChanged_,this);if(a){if(Array.isArray(a)){a=new r["b"](a.slice(),{unique:true})}else{Object(l["a"])(a instanceof r["b"],43);a=a}}else{a=new r["b"](undefined,{unique:true})}this.setLayers(a)};Object(i["d"])(g,h["a"]);g.prototype.handleLayerChange_=function(){this.changed()};g.prototype.handleLayersChanged_=function(t){this.layersListenerKeys_.forEach(u["e"]);this.layersListenerKeys_.length=0;var e=this.getLayers();this.layersListenerKeys_.push(Object(u["a"])(e,a["a"].ADD,this.handleLayersAdd_,this),Object(u["a"])(e,a["a"].REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_){this.listenerKeys_[n].forEach(u["e"])}Object(d["b"])(this.listenerKeys_);var r=e.getArray();for(var o=0,l=r.length;o<l;o++){var f=r[o];this.listenerKeys_[Object(i["c"])(f).toString()]=[Object(u["a"])(f,s["a"].PROPERTYCHANGE,this.handleLayerChange_,this),Object(u["a"])(f,c["a"].CHANGE,this.handleLayerChange_,this)]}this.changed()};g.prototype.handleLayersAdd_=function(t){var e=t.element;var n=Object(i["c"])(e).toString();this.listenerKeys_[n]=[Object(u["a"])(e,s["a"].PROPERTYCHANGE,this.handleLayerChange_,this),Object(u["a"])(e,c["a"].CHANGE,this.handleLayerChange_,this)];this.changed()};g.prototype.handleLayersRemove_=function(t){var e=t.element;var n=Object(i["c"])(e).toString();this.listenerKeys_[n].forEach(u["e"]);delete this.listenerKeys_[n];this.changed()};g.prototype.getLayers=function(){return this.get(v.LAYERS)};g.prototype.setLayers=function(t){this.set(v.LAYERS,t)};g.prototype.getLayersArray=function(t){var e=t!==undefined?t:[];this.getLayers().forEach(function(t){t.getLayersArray(e)});return e};g.prototype.getLayerStatesArray=function(t){var e=t!==undefined?t:[];var n=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});var i=this.getLayerState();for(var r=n,a=e.length;r<a;r++){var o=e[r];o.opacity*=i.opacity;o.visible=o.visible&&i.visible;o.maxResolution=Math.min(o.maxResolution,i.maxResolution);o.minResolution=Math.max(o.minResolution,i.minResolution);if(i.extent!==undefined){if(o.extent!==undefined){o.extent=Object(f["B"])(o.extent,i.extent)}else{o.extent=i.extent}}}return e};g.prototype.getSourceState=function(){return p["a"].READY};e["a"]=g},function(t,e,n){"use strict";var i=n(2);var r=function t(e){this.groups_={};this.scope_=e};r.$inject=["$rootScope"];r.$inject=["$rootScope"];r.prototype.registerTool=function(t,e,n){var r=this;var a=this.groups_[t];if(!a){a=this.groups_[t]=[]}var o=this.scope_.$watch(e.getActive,function(n,i){if(n===i){return}if(n){r.deactivateTools_(t,e)}else{r.activateDefault_(t)}});a.push({tool:e,defaultTool:n||false,unlisten:o});if(i["a"].ENABLE_ASSERTS){var s=0;a.forEach(function(t){if(t.defaultTool){s++}});i["a"].assert(s<=1,"more than one default tool in group "+t)}};r.prototype.unregisterTool=function(t,e){var n=this.groups_[t];if(n){for(var i=0;i<n.length;i++){if(n[i].tool==e){n[i].unlisten();n.splice(i,1);break}}}};r.prototype.unregisterGroup=function(t){var e=this.groups_[t];if(e){for(var n=0;n<e.length;n++){e[n].unlisten()}delete this.groups_[t]}};r.prototype.activateTool=function(t){t.setActive(true)};r.prototype.deactivateTool=function(t){t.setActive(false)};r.prototype.deactivateTools_=function(t,e){var n=this.groups_[t];for(var i=0;i<n.length;i++){if(e!=n[i].tool){n[i].tool.setActive(false)}}};r.prototype.activateDefault_=function(t){var e=this.groups_[t];var n=null;var i=false;for(var r=0;r<e.length;r++){i=i||e[r].tool.getActive();if(e[r].defaultTool){n=e[r].tool}}if(!i&&n!==null){n.setActive(true)}};r.module=angular.module("ngeoToolActivateMgr",[]);r.module.service("ngeoToolActivateMgr",r);e["a"]=r},function(t,e,n){"use strict";var i=n(2);var r=n(7);var a=n(302);var o=n(93);var s=n(103);var l=n(31);var u=n(9);var c=n(114);var f=n(176);var h=n(168);var d=n(131);var p=function t(e,n,i){this.$q_=e;this.$http_=n;this.tilesPreloadingLimit_=i};p.$inject=["$q","$http","ngeoTilesPreloadingLimit"];p.$inject=["$q","$http","ngeoTilesPreloadingLimit"];p.GROUP_KEY="groupName";p.REFRESH_PARAM="random";p.prototype.createBasicWMSLayer=function(t,e,n,i,r,a,o,l,u){var f={FORMAT:n,LAYERS:e};var h=void 0;if(r){f["TIME"]=r}if(i){f["SERVERTYPE"]=i;h=i.replace("qgisserver","qgis")}var d=Object.assign({},l,{url:t,params:f,serverType:h,crossOrigin:o});var p=new c["a"](d);if(a){p.updateParams(a)}var v=Object.assign({},u,{source:p});return new s["a"](v)};p.prototype.createBasicWMSLayerFromDataSource=function(t,e){var n=t.wmsUrl;i["a"].assert(n);var r=t.getOGCLayerNames().join(",");var a=t.ogcServerType;var o=t.ogcImageType;var s=this.createBasicWMSLayer(n,r,o,a,undefined,undefined,e);s.setVisible(t.visible);s.set("querySourceIds",[t.id]);return s};p.prototype.createWMTSLayerFromCapabilitites=function(t,e,n,i,o){var s=new a["a"];var c=new l["a"]({preload:this.tilesPreloadingLimit_});var f=this.$q_;return this.$http_.get(t,{cache:true}).then(function(a){var l=void 0;if(a.data){l=s.read(a.data)}if(l){var d=Object.assign({},o,Object(h["b"])(l,{matrixSet:n,crossOrigin:"anonymous",layer:e}));var p=new h["a"](d);if(i&&!u["d"](i)){p.updateDimensions(i)}c.setSource(p);var v=l["Contents"]["Layer"];var g=r["d"](v,function(t,n,i){return t["Identifier"]==e});c.set("capabilitiesStyles",g["Style"]);return f.resolve(c)}return f.reject("Failed to get WMTS capabilities from "+t)})};p.prototype.createWMTSLayerFromCapabilititesObj=function(t,e,n){var r=Object(h["b"])(t,{crossOrigin:"anonymous",layer:e["Identifier"]});i["a"].assert(r);var a=new h["a"](r);if(n&&!u["d"](n)){a.updateDimensions(n)}return new l["a"]({capabilitiesStyles:e["Style"],preload:Infinity,source:a})};p.prototype.createBasicGroup=function(t){var e=new o["a"];if(t){e.setLayers(t)}return e};p.prototype.getGroupFromMap=function(t,e){var n=t.getLayerGroup().getLayers();var i=void 0;n.getArray().some(function(t){if(t.get(p.GROUP_KEY)===e){i=t;return true}else{return false}});if(!i){i=this.createBasicGroup();i.set(p.GROUP_KEY,e);t.addLayer(i)}return i};p.prototype.getFlatLayers=function(t){if(t instanceof o["a"]){var e=t.getLayers().getArray();var n=e.some(function(t){return t instanceof o["a"]});if(!n){return e.slice()}}return this.getFlatLayers_(t,[],undefined)};p.prototype.getFlatLayers_=function(t,e,n){var i=this;var r=t.getOpacity();if(n!==undefined){n*=r}else{n=r}if(t instanceof o["a"]){var a=t.getLayers();a.forEach(function(t){i.getFlatLayers_(t,e,n)})}else{if(e.indexOf(t)<0){t.set("inheritedOpacity",n,true);e.push(t)}}return e};p.prototype.getLayerByName=function(t,e){var n=this;var i=null;e.some(function(e){if(e instanceof o["a"]){var r=e.getLayers().getArray();i=n.getLayerByName(t,r)}else if(e.get("layerNodeName")===t){i=e}return!!i});return i};p.prototype.getWMTSLegendURL=function(t){var e=void 0;var n=t.get("capabilitiesStyles");if(n!==undefined){var i=n[0]["legendURL"];if(i!==undefined){e=i[0]["href"]}}return e};p.prototype.getWMSLegendURL=function(t,e,n,i,r,a,o,s,l,u,c){if(!t){return undefined}var f={FORMAT:"image/png",TRANSPARENT:true,SERVICE:"WMS",VERSION:"1.1.1",REQUEST:"GetLegendGraphic",LAYER:e};if(n!==undefined){f["SCALE"]=n}if(i!==undefined){f["RULE"]=i;if(r!==undefined){f["WIDTH"]=r}if(a!==undefined){f["HEIGHT"]=a}}if(o=="qgis"){if(s!=undefined){f["DPI"]=s}if(l!=undefined&&u!=undefined&&n!=undefined&&s!=undefined&&i==undefined){f["BBOX"]=l.join(",");f["SRS"]=u;f["WIDTH"]=Math.round((l[2]-l[0])/n*39.37*s);f["HEIGHT"]=Math.round((l[3]-l[1])/n*39.37*s)}}if(c){Object.assign(f,c)}return d["a"](t,f)};p.prototype.isLayerVisible=function(t,e){if(!t.getVisible()){return false}var n=e.getView().getResolution();return n>t.getMinResolution()&&n<t.getMaxResolution()};p.prototype.refreshWMSLayer=function(t){var e=t.getSource();i["a"].assert(e instanceof c["a"]||e instanceof f["a"]);var n=e;var r=n.getParams();r[p.REFRESH_PARAM]=Math.random();n.updateParams(r)};p.prototype.setZIndexToFirstLevelChildren=function(t,e){if(!(t instanceof o["a"])){return}var n=t.getLayers();n.forEach(function(t){return t.setZIndex(e)})};p.prototype.updateWMSLayerState=function(t,e,n){if(e.length<=0){t.setVisible(false)}else{t.setVisible(true);var i=t.getSource();if(n){i.updateParams({LAYERS:e,TIME:n})}else{i.updateParams({LAYERS:e})}}};p.prototype.getQuerySourceIds=function(t){return t.get("querySourceIds")};p.module=angular.module("ngeoLayerHelper",[]).service("ngeoLayerHelper",p).value("ngeoTilesPreloadingLimit",Infinity);e["a"]=p},function(t,e,n){"use strict";var i=n(102);var r=n(71);var a=n(26);var o=n(44);var s=n(76);var l=n(6);var u=n(51);var c=n(18);var f=n(17);var h=n(41);var d=n(141);var p=n(164);function v(t,e){return(t%e+e)%e}var g=n(99);var m=n(137);var _=n(48);var y=n(130);n.d(e,"a",function(){return b});n.d(e,"b",function(){return x});n.d(e,"f",function(){return S});n.d(e,"c",function(){return C});n.d(e,"h",function(){return E});n.d(e,"g",function(){return T});n.d(e,"k",function(){return M});n.d(e,"e",function(){return I});n.d(e,"d",function(){return R});n.d(e,"j",function(){return A});n.d(e,"i",function(){return P});function b(t,e){if(isNaN(t)||isNaN(e)){return NaN}var n=v(e,12);t+=(e-n)/12;return n===1?Object(y["d"])(t)?29:28:31-n%7%2}Object(a["a"])("M",["MM",2],"Mo",function(){return this.month()+1});Object(a["a"])("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});Object(a["a"])("MMMM",0,0,function(t){return this.localeData().months(this,t)});Object(o["a"])("month","M");Object(s["a"])("month",8);Object(l["a"])("M",l["d"]);Object(l["a"])("MM",l["d"],l["h"]);Object(l["a"])("MMM",function(t,e){return e.monthsShortRegex(t)});Object(l["a"])("MMMM",function(t,e){return e.monthsRegex(t)});Object(u["a"])(["M","MM"],function(t,e){e[f["e"]]=Object(h["a"])(t)-1});Object(u["a"])(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);if(r!=null){e[f["e"]]=r}else{Object(_["a"])(n).invalidMonth=t}});var w=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var x="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function S(t,e){if(!t){return Object(d["a"])(this._months)?this._months:this._months["standalone"]}return Object(d["a"])(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||w).test(e)?"format":"standalone"][t.month()]}var C="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function E(t,e){if(!t){return Object(d["a"])(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return Object(d["a"])(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[w.test(e)?"format":"standalone"][t.month()]}function O(t,e,n){var i,r,a,o=t.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(i=0;i<12;++i){a=Object(m["a"])([2e3,i]);this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase();this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase()}}if(n){if(e==="MMM"){r=g["a"].call(this._shortMonthsParse,o);return r!==-1?r:null}else{r=g["a"].call(this._longMonthsParse,o);return r!==-1?r:null}}else{if(e==="MMM"){r=g["a"].call(this._shortMonthsParse,o);if(r!==-1){return r}r=g["a"].call(this._longMonthsParse,o);return r!==-1?r:null}else{r=g["a"].call(this._longMonthsParse,o);if(r!==-1){return r}r=g["a"].call(this._shortMonthsParse,o);return r!==-1?r:null}}}function T(t,e,n){var i,r,a;if(this._monthsParseExact){return O.call(this,t,e,n)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(i=0;i<12;i++){r=Object(m["a"])([2e3,i]);if(n&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")}if(!n&&!this._monthsParse[i]){a="^"+this.months(r,"")+"|^"+this.monthsShort(r,"");this._monthsParse[i]=new RegExp(a.replace(".",""),"i")}if(n&&e==="MMMM"&&this._longMonthsParse[i].test(t)){return i}else if(n&&e==="MMM"&&this._shortMonthsParse[i].test(t)){return i}else if(!n&&this._monthsParse[i].test(t)){return i}}}function M(t,e){var n;if(!t.isValid()){return t}if(typeof e==="string"){if(/^\d+$/.test(e)){e=Object(h["a"])(e)}else{e=t.localeData().monthsParse(e);if(!Object(p["a"])(e)){return t}}}n=Math.min(t.date(),b(t.year(),e));t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n);return t}function I(t){if(t!=null){M(this,t);c["a"].updateOffset(this,true);return this}else{return Object(i["a"])(this,"Month")}}function R(){return b(this.year(),this.month())}var N=l["s"];function A(t){if(this._monthsParseExact){if(!Object(r["a"])(this,"_monthsRegex")){D.call(this)}if(t){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!Object(r["a"])(this,"_monthsShortRegex")){this._monthsShortRegex=N}return this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex}}var L=l["s"];function P(t){if(this._monthsParseExact){if(!Object(r["a"])(this,"_monthsRegex")){D.call(this)}if(t){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!Object(r["a"])(this,"_monthsRegex")){this._monthsRegex=L}return this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex}}function D(){function t(t,e){return e.length-t.length}var e=[],n=[],i=[],r,a;for(r=0;r<12;r++){a=Object(m["a"])([2e3,r]);e.push(this.monthsShort(a,""));n.push(this.months(a,""));i.push(this.months(a,""));i.push(this.monthsShort(a,""))}e.sort(t);n.sort(t);i.sort(t);for(r=0;r<12;r++){e[r]=Object(l["t"])(e[r]);n[r]=Object(l["t"])(n[r])}for(r=0;r<24;r++){i[r]=Object(l["t"])(i[r])}this._monthsRegex=new RegExp("^("+i.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});n.d(e,"b",function(){return u});var i=n(155);var r=n(18);var a=n(98);function o(t){if(r["a"].suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+t)}}function s(t,e){var n=true;return Object(i["a"])(function(){if(r["a"].deprecationHandler!=null){r["a"].deprecationHandler(null,t)}if(n){var i=[];var a;for(var s=0;s<arguments.length;s++){a="";if(typeof arguments[s]==="object"){a+="\n["+s+"] ";for(var l in arguments[0]){a+=l+": "+arguments[0][l]+", "}a=a.slice(0,-2)}else{a=arguments[s]}i.push(a)}o(t+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack);n=false}return e.apply(this,arguments)},e)}var l={};function u(t,e){if(r["a"].deprecationHandler!=null){r["a"].deprecationHandler(t,e)}if(!l[t]){o(e);l[t]=true}}r["a"].suppressDeprecationWarnings=false;r["a"].deprecationHandler=null},function(t,e,n){"use strict";n.d(e,"a",function(){return i});function i(t){return t===void 0}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i;if(Array.prototype.indexOf){i=Array.prototype.indexOf}else{i=function(t){var e;for(e=0;e<this.length;++e){if(this[e]===t){return e}}return-1}}},function(t,e,n){"use strict";e["a"]={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"}},function(t,e,n){"use strict";var i=n(2);var r=n(34);var a=n(178);var o=n(93);var s=n(86);var l=n(270);var u=n(277);var c={};c.interaction=function(t){i["a"].assertInstanceof(t,r["a"]);Object.defineProperty(t,"active",{get:function e(){return t.getActive()},set:function e(n){t.setActive(n)}})};c.layer=function(t){i["a"].assertInstanceof(t,a["a"]);Object.defineProperty(t,"visible",{configurable:true,get:function e(){return t.getVisible()},set:function e(n){t.setVisible(n)}});Object.defineProperty(t,"opacity",{configurable:true,get:function e(){return t.getOpacity()},set:function e(n){t.setOpacity(n)}})};c.layerLoading=function(t,e){var n=void 0;var r=null;var a=null;var c=h;var f=d;t.set("load_count",0,true);if(t instanceof o["a"]){t.getLayers().on("add",function(e){var n=e.element;n.set("parent_group",t)})}if(t instanceof s["a"]){n=t.getSource();if(n===null){return}else if(n instanceof u["b"]){r=["tileloadstart"];a=["tileloadend","tileloaderror"]}else if(n instanceof l["a"]){r=["imageloadstart"];a=["imageloadend","imageloaderror"]}else{i["a"].fail("unsupported source type")}n.on(r,function(){c(t);e.$applyAsync()});n.on(a,function(){f(t);e.$applyAsync()})}Object.defineProperty(t,"loading",{configurable:true,get:function e(){return t.get("load_count")>0}});function h(t){var e=t.get("load_count");var n=t.get("parent_group");t.set("load_count",++e,true);if(n){h(n)}}function d(t){var e=t.get("load_count");var n=t.get("parent_group");t.set("load_count",--e,true);if(n){d(n)}}};e["a"]=c},function(t,e,n){"use strict";n.d(e,"b",function(){return u});n.d(e,"a",function(){return c});n.d(e,"c",function(){return f});n.d(e,"d",function(){return h});n.d(e,"e",function(){return d});var i=n(44);var r=n(76);var a=n(18);var o=n(123);var s=n(96);var l=n(130);function u(t,e){return function(n){if(n!=null){f(this,t,n);a["a"].updateOffset(this,e);return this}else{return c(this,t)}}}function c(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function f(t,e,n){if(t.isValid()&&!isNaN(n)){if(e==="FullYear"&&Object(l["d"])(t.year())&&t.month()===1&&t.date()===29){t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Object(s["a"])(n,t.month()))}else{t._d["set"+(t._isUTC?"UTC":"")+e](n)}}}function h(t){t=Object(i["c"])(t);if(Object(o["a"])(this[t])){return this[t]()}return this}function d(t,e){if(typeof t==="object"){t=Object(i["b"])(t);var n=Object(r["b"])(t);for(var a=0;a<n.length;a++){this[n[a].unit](t[n[a].unit])}}else{t=Object(i["c"])(t);if(Object(o["a"])(this[t])){return this[t](e)}}return this}},function(t,e,n){"use strict";var i=n(1);var r=n(139);var a=n(86);var o=function t(e){var n=e?e:{};a["a"].call(this,n);this.type=r["a"].IMAGE};Object(i["d"])(o,a["a"]);o.prototype.getSource;e["a"]=o},function(t,e,n){"use strict";n.d(e,"a",function(){return i});n.d(e,"b",function(){return r});n.d(e,"c",function(){return a});n.d(e,"d",function(){return o});function i(t,e,n){if(n===undefined){n=[0,0]}n[0]=t[0]+2*e;n[1]=t[1]+2*e;return n}function r(t){return t[0]>0&&t[1]>0}function a(t,e,n){if(n===undefined){n=[0,0]}n[0]=t[0]*e+.5|0;n[1]=t[1]*e+.5|0;return n}function o(t,e){if(Array.isArray(t)){return t}else{if(e===undefined){e=[t,t]}else{e[0]=e[1]=t}return e}}},function(t,e,n){"use strict";var i=n(2);var r=n(79);var a=n(60);var o=n(1);var s=n(47);var l=n(10);var u=n(115);var c=n(230);var f=n(3);var h=n(34);var d=n(61);var p=n(57);var v=n(33);var g=n(35);var m=n(12);var _=function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};h["a"].call(this,{handleEvent:t.handleEvent_});this.helpTooltipElement_=null;this.helpTooltipOverlay_=null;this.measureTooltipElement_=null;this.measureTooltipOverlay_=null;this.measureTooltipOverlayCoord_=null;this.sketchFeature=null;this.continueMsg=null;this.decimals=e.decimals;this.precision=e.precision;this.displayHelpTooltip_=e.displayHelpTooltip!==undefined?e.displayHelpTooltip:true;this.startMsg;if(e.startMsg!==undefined){this.startMsg=e.startMsg}else{this.startMsg=document.createElement("span");this.startMsg.textContent="Click to start drawing."}this.changeEventKey_=null;this.postcomposeEventKey_=null;var n=e.style!==undefined?e.style:[new m["c"]({fill:new v["a"]({color:"rgba(255, 255, 255, 0.2)"})}),new m["c"]({stroke:new g["a"]({color:"white",width:5})}),new m["c"]({stroke:new g["a"]({color:"#ffcc33",width:3})})];this.vectorLayer_=new d["a"]({source:new p["b"],style:n});this.drawInteraction_=this.createDrawInteraction(e.sketchStyle,this.vectorLayer_.getSource());this.shouldHandleDrawInteractionActiveChange_=true;f["a"](this.drawInteraction_,"change:active",this.handleDrawInteractionActiveChange_,this);f["a"](this.drawInteraction_,"drawstart",this.onDrawStart_,this);f["a"](this.drawInteraction_,"drawend",this.onDrawEnd_,this);f["a"](this,"change:active",this.updateState_,this)};o["d"](_,h["a"]);_.getFormattedArea=function(t,e,n,i){var r=t.clone().transform(e,"EPSG:4326");var a=Math.abs(c["a"](r,{projection:"EPSG:4326"}));return i(a,"m²","square",n)};_.getFormattedCircleArea=function(t,e,n){var i=Math.PI*Math.pow(t.getRadius(),2);return n(i,"m²","square",e)};_.getFormattedLength=function(t,e,n,i){var r=0;var a=t.getCoordinates();for(var o=0,s=a.length-1;o<s;++o){var u=l["n"](a[o],e,"EPSG:4326");var f=l["n"](a[o+1],e,"EPSG:4326");r+=c["b"](u,f)}return i(r,"m","unit",n)};_.getFormattedPoint=function(t,e,n,i){return n(t.getCoordinates(),e,i)};_.handleEvent_=function(t){if(t.type!="pointermove"||t.dragging){return true}var e=this.sketchFeature===null?this.startMsg:this.continueMsg;if(this.displayHelpTooltip_){s["d"](this.helpTooltipElement_);this.helpTooltipElement_.appendChild(e);this.helpTooltipOverlay_.setPosition(t.coordinate)}return true};_.prototype.getDrawInteraction=function(){return this.drawInteraction_};_.prototype.createDrawInteraction=function(t,e){};_.prototype.setMap=function(t){h["a"].prototype.setMap.call(this,t);this.vectorLayer_.setMap(t);var e=this.drawInteraction_.getMap();if(e!==null){e.removeInteraction(this.drawInteraction_)}if(t!==null){t.addInteraction(this.drawInteraction_)}};_.prototype.onDrawStart_=function(t){var e=this;this.sketchFeature=t.feature||t.detail.feature;this.vectorLayer_.getSource().clear(true);this.createMeasureTooltip_();var n=this.sketchFeature.getGeometry();i["a"].assert(n!==undefined);this.changeEventKey_=f["a"](n,"change",function(){e.handleMeasure(function(t,n){if(n!==null){e.measureTooltipElement_.innerHTML=t;e.measureTooltipOverlayCoord_=n}})});this.cancelEventKey_=f["a"](document.body,"keydown",function(t){e.handleEscapeKeyDown_(t)});this.postcomposeEventKey_=f["a"](this.getMap(),"postcompose",function(){e.measureTooltipOverlay_.setPosition(e.measureTooltipOverlayCoord_)})};_.prototype.onDrawEnd_=function(t){this.measureTooltipElement_.classList.add("ngeo-tooltip-static");this.measureTooltipOverlay_.setOffset([0,-7]);var e=new r["a"]("measureend",{feature:this.sketchFeature});this.dispatchEvent(e);this.sketchFeature=null;this.unlistenerEvent_()};_.prototype.unlistenerEvent_=function(){if(this.changeEventKey_!==null&&this.postcomposeEventKey_!==null){f["e"](this.changeEventKey_);f["e"](this.postcomposeEventKey_);f["e"](this.cancelEventKey_);this.changeEventKey_=null;this.postcomposeEventKey_=null;this.cancelEventKey_=null}};_.prototype.createHelpTooltip_=function(){this.removeHelpTooltip_();if(this.displayHelpTooltip_){this.helpTooltipElement_=document.createElement("div");this.helpTooltipElement_.classList.add("tooltip");this.helpTooltipOverlay_=new u["a"]({element:this.helpTooltipElement_,offset:[15,0],positioning:"center-left"});this.getMap().addOverlay(this.helpTooltipOverlay_)}};_.prototype.removeHelpTooltip_=function(){if(this.displayHelpTooltip_){this.getMap().removeOverlay(this.helpTooltipOverlay_);if(this.helpTooltipElement_!==null){this.helpTooltipElement_.parentNode.removeChild(this.helpTooltipElement_)}this.helpTooltipElement_=null;this.helpTooltipOverlay_=null}};_.prototype.createMeasureTooltip_=function(){this.removeMeasureTooltip_();this.measureTooltipElement_=document.createElement("div");this.measureTooltipElement_.classList.add("tooltip");this.measureTooltipElement_.classList.add("ngeo-tooltip-measure");this.measureTooltipOverlay_=new u["a"]({element:this.measureTooltipElement_,offset:[0,-15],positioning:"bottom-center",stopEvent:false});this.getMap().addOverlay(this.measureTooltipOverlay_)};_.prototype.removeMeasureTooltip_=function(){if(this.measureTooltipElement_!==null){this.measureTooltipElement_.parentNode.removeChild(this.measureTooltipElement_);this.measureTooltipElement_=null;this.measureTooltipOverlay_=null;this.measureTooltipOverlayCoord_=null}};_.prototype.updateState_=function(){var t=this.getActive();this.shouldHandleDrawInteractionActiveChange_=false;this.drawInteraction_.setActive(t);this.shouldHandleDrawInteractionActiveChange_=true;if(!this.getMap()){return}if(t){if(!this.measureTooltipOverlay_){this.createMeasureTooltip_();this.createHelpTooltip_()}}else{this.vectorLayer_.getSource().clear(true);this.getMap().removeOverlay(this.measureTooltipOverlay_);this.removeMeasureTooltip_();this.removeHelpTooltip_();this.unlistenerEvent_()}};_.prototype.handleMeasure=function(t){};_.prototype.getTooltipElement=function(){return this.measureTooltipElement_};_.prototype.handleDrawInteractionActiveChange_=function(){if(this.shouldHandleDrawInteractionActiveChange_){this.setActive(this.drawInteraction_.getActive())}};_.prototype.handleEscapeKeyDown_=function(t){var e=t.keyCode===27;if(!a["a"].mousedown&&this.drawInteraction_.getActive()&&e){this.drawInteraction_.setActive(false);this.drawInteraction_.setActive(true)}};e["a"]=_},function(t,e,n){"use strict";e["a"]={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e,n){"use strict";e["a"]={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},function(t,e,n){"use strict";(function(t){var i=n(55);var r=n(268);var a=n(184);var o=n(214);var s=n(334);var l=n(154);var u=n(75);var c=n(23);var f=n(2);var h=n(53);var d=n(333);var p=n(126);var v=n(95);var g=n(392);var m=n(121);var _=n(31);var y=n(86);var b=n(9);var w=n(114);var x=n(176);var S=n(168);var C=n(292);var E=n.n(C);var O=angular.module("gmfLayertreeComponent",[r["a"].module.name,a["a"].module.name,o["a"].module.name,s["a"].name,l["a"].module.name,u["a"].module.name,c["a"].module.name,d["a"].name,p["a"].module.name,v["a"].module.name,m["a"].module.name]);O.value("ngeoLayertreeTemplateUrl",function(t,e){return"gmf/layertree"});O.run(["$templateCache",function(t){t.put("gmf/layertree",n(498))}]);O.value("gmfLayertreeTemplate",function(t,e){var n="gmf/layertree";return'<div ngeo-layertree="gmfLayertreeCtrl.root" '+'ngeo-layertree-map="gmfLayertreeCtrl.map" '+'ngeo-layertree-nodelayer="gmfLayertreeCtrl.getLayer(treeCtrl)" '+'ngeo-layertree-listeners="gmfLayertreeCtrl.listeners(treeScope, treeCtrl)" '+('ngeo-layertree-templateurl="'+n+'">')+"</div>"});T.$inject=["$element","$attrs","gmfLayertreeTemplate"];function T(t,e,n){return n(t,e)}O.component_={controller:"GmfLayertreeController as gmfLayertreeCtrl",bindings:{map:"=gmfLayertreeMap",dimensions:"=?gmfLayertreeDimensions",openLinksInNewWindow:"<?gmfLayertreeOpenlinksinnewwindow"},template:T};O.component("gmfLayertree",O.component_);O.Controller_=function(t,e,n,i,r,a,o,s,l,u){var c=this;this.map;this.dimensions;this.scope_=e;this.layerHelper_=n;this.gmfDataSourceBeingFiltered=i;this.gmfExternalDataSourcesManager=r;this.gmfPermalink_=a;this.gmfTreeManager_=o;var h=o.root;f["a"].assert(h);this.root=h;this.gmfSyncLayertreeMap_=s;this.ngeoWMSTime_=l;this.groupNodeStates_={};this.openLinksInNewWindow;this.dataLayerGroup_=null;this.layers=[];this.gmfThemes_=u;t.on("shown.bs.collapse",function(){c.scope_.$apply()})};O.Controller_.$inject=["$element","$scope","ngeoLayerHelper","gmfDataSourceBeingFiltered","gmfExternalDataSourcesManager","gmfPermalink","gmfTreeManager","gmfSyncLayertreeMap","ngeoWMSTime","gmfThemes"];O.Controller_.prototype.$onInit=function(){var t=this;this.openLinksInNewWindow=this.openLinksInNewWindow===true;this.dataLayerGroup_=this.layerHelper_.getGroupFromMap(this.map,i["a"].DATALAYERGROUP_NAME);Object(g["a"])(this.dataLayerGroup_.getLayers().getArray(),this.layers,true,this.scope_,function(){return true});this.scope_.$watchCollection(function(){return t.layers},function(){t.map.render()});this.scope_.$watchCollection(function(){if(t.gmfTreeManager_.rootCtrl){return t.dimensions}},function(e){if(e){t.updateDimensions_(t.gmfTreeManager_.rootCtrl)}})};O.Controller_.prototype.updateDimensions_=function(t){var e=this;t.traverseDepthFirst(function(t){if(t.node.dimensions){var n=t.layer;f["a"].assertInstanceof(n,y["a"]);e.updateLayerDimensions_(n,t.node)}})};O.Controller_.prototype.updateLayerDimensions_=function(t,e){var n=this;if(this.dimensions&&e.dimensions){var i={};for(var r in e.dimensions){if(e.dimensions[r]===null){var a=this.dimensions[r];if(a!==undefined){i[r]=a}}else{i[r]=e.dimensions[r]}}if(!b["d"](i)){var o=t.getSource();if(o instanceof S["a"]){o.updateDimensions(i)}else if(o instanceof x["a"]||o instanceof w["a"]){o.updateParams(i)}else{t.once("change:source",function(){f["a"].assertInstanceof(t,y["a"]);n.updateLayerDimensions_(t,e)})}}}};O.Controller_.prototype.getLayer=function(t){var e=void 0;if(t.parent.isRoot){this.gmfTreeManager_.rootCtrl=t.parent;e=this.gmfTreeManager_.root.children.length-this.gmfTreeManager_.numberOfGroupsToAddInThisDigestLoop||0}var n=this.gmfSyncLayertreeMap_.createLayer(t,this.map,this.dataLayerGroup_,e);if(n instanceof y["a"]){var i=t.node;this.updateLayerDimensions_(n,i)}return n};O.Controller_.prototype.listeners=function(t,e){var n=this.dataLayerGroup_;t.$on("$destroy",function(){n.getLayers().remove(e.layer)})};O.Controller_.prototype.toggleActive=function(t){t.setState(t.getState()==="on"?"off":"on")};O.Controller_.prototype.getNodeState=function(t){return t.getState()};O.Controller_.prototype.updateWMSTimeLayerState=function(t,e){if(!e){return}var n=t.getDataSource();if(n){f["a"].assertInstanceof(n,h["a"]);n.timeRangeValue=e}else if(t.children){for(var i=0,r=t.children.length;i<r;i++){this.updateWMSTimeLayerState(t.children[i],e)}}};O.Controller_.prototype.getLegendIconURL=function(t){var e=t.node.metadata.iconUrl;if(e!==undefined){return e}if(t.node.children!==undefined){return undefined}var n=t.node;if(n.type!=="WMS"){return undefined}var i=n;var r=i.metadata.legendRule;if(r===undefined){return undefined}var a=i.layers.split(",")[0];var o=this.gmfTreeManager_.getOgcServer(t);return this.layerHelper_.getWMSLegendURL(o.url,a,undefined,r,20,20)};O.Controller_.prototype.getLegendsObject=function(t){var e=this;var n={};if(t.node.children!==undefined){return null}var i=t.node;var r=i.name;if(i.metadata.legendImage){n[r]=i.metadata.legendImage;return n}var a=t.layer;if(i.type==="WMTS"){f["a"].assertInstanceof(a,_["a"]);var o=this.layerHelper_.getWMTSLegendURL(a);n[r]=o;return o?n:null}else{var s=i;var l=s.layers;var u=this.gmfTreeManager_.getOgcServer(t);var c=this.getScale_();if(u.type===h["a"].ServerType.QGISSERVER){l=[l]}else{l=l.split(",")}l.forEach(function(t){n[t]=e.layerHelper_.getWMSLegendURL(u.url,t,c)});return n}};O.Controller_.prototype.getNumberOfLegendsObject=function(t){var e=this.getLegendsObject(t);return e?Object.keys(e).length:0};O.Controller_.prototype.getScale_=function(){var t=this.map.getView();var e=t.getResolution();var n=t.getProjection().getMetersPerUnit();var i=25.4/.28;return e*n*39.37*i};O.Controller_.prototype.displayMetadata=function(t){var e=t.node;var n=e.metadata["metadataUrl"];if(n!==undefined){var i=window.gmfx;if(i.openIframePopup){i.openIframePopup(n,e.name,undefined,undefined,false)}}};O.Controller_.prototype.afterReorder=function(){var t=this;var e=this.gmfTreeManager_.rootCtrl.node.children;var n=this.gmfTreeManager_.rootCtrl.children;var i=[];e.forEach(function(t){n.some(function(e){if(e.node===t){i.push(e);return}})});this.gmfTreeManager_.rootCtrl.children=i;this.layers.length=0;this.gmfTreeManager_.rootCtrl.children.forEach(function(e){t.layers.push(e.layer)});this.gmfPermalink_.refreshFirstLevelGroups()};O.Controller_.prototype.removeNode=function(t){this.gmfTreeManager_.removeGroup(t)};O.Controller_.prototype.removeAllNodes=function(){this.gmfTreeManager_.removeAll()};O.Controller_.prototype.nodesCount=function(){return this.gmfTreeManager_.root.children.length};O.Controller_.prototype.getResolutionStyle=function(t){var e=this.map.getView().getResolution();var n=c["a"].getNodeMinResolution(t);if(n!==undefined&&e<n){return"out-of-resolution"}var i=c["a"].getNodeMaxResolution(t);if(i!==undefined&&e>i){return"out-of-resolution"}return undefined};O.Controller_.prototype.zoomToResolution=function(t){var e=t.node;var n=this.map.getView();var i=n.getResolution();var r=c["a"].getNodeMinResolution(e);if(r!==undefined&&i<r){n.setResolution(n.constrainResolution(r,0,1))}else{var a=c["a"].getNodeMaxResolution(e);if(a!==undefined&&i>a){n.setResolution(n.constrainResolution(a,0,-1))}}};O.Controller_.prototype.toggleNodeLegend=function(e){t(e).toggle({toggle:true})};O.Controller_.prototype.toggleFiltrableDataSource=function(t){this.gmfDataSourceBeingFiltered.dataSource=t};O.Controller_.prototype.isNodeLegendVisible=function(e){return t(e).is(":visible")};O.Controller_.prototype.supportsCustomization=function(t){return!t.isRoot&&(this.supportsLegend(t)||this.supportsOpacityChange(t))};O.Controller_.prototype.supportsLegend=function(t){var e=t.node;return!!e.metadata&&!!e.metadata.legend&&!!this.getLegendsObject(t)};O.Controller_.prototype.supportsOpacityChange=function(t){var e=t.node;var n=t.parent.node;return!!t.layer&&(t.depth===1&&!e.mixed||t.depth>1&&n.mixed)};O.controller("GmfLayertreeController",O.Controller_);e["a"]=O}).call(this,n(38))},function(t,e,n){"use strict";var i=n(2);var r=n(240);var a=n(1);var o=n(61);var s=n(9);var l=n(57);var u=n(12);var c=function t(){this.featureUidToGroupIndex_={};this.groups_=[];this.source_=new l["b"]({useSpatialIndex:false});this.layer_=new o["a"]({source:this.source_,style:this.styleFunction_.bind(this),updateWhileAnimating:true,updateWhileInteracting:true})};c.prototype.addFeature=function(t,e){i["a"].assert(e>=0);i["a"].assert(e<this.groups_.length);var n=a["c"](t).toString();this.featureUidToGroupIndex_[n]=e;this.groups_[e].features[n]=t;this.source_.addFeature(t)};c.prototype.removeFeature=function(t,e){i["a"].assert(e>=0);i["a"].assert(e<this.groups_.length);var n=a["c"](t).toString();delete this.featureUidToGroupIndex_[n];delete this.groups_[e].features[n];this.source_.removeFeature(t)};c.prototype.clear=function(t){i["a"].assert(t>=0);i["a"].assert(t<this.groups_.length);var e=this.groups_[t];for(var n in e.features){this.removeFeature(e.features[n],t)}i["a"].assert(s["d"](e.features))};c.prototype.getLayer=function(){return this.layer_};c.prototype.getFeatureOverlay=function(){var t=this.groups_.length;this.groups_.push({styleFunction:u["a"],features:{}});return new r["a"](this,t)};c.prototype.init=function(t){this.layer_.setMap(t)};c.prototype.setStyle=function(t,e){i["a"].assert(e>=0);i["a"].assert(e<this.groups_.length);this.groups_[e].styleFunction=t===null?u["c"].defaultFunction:Object(u["d"])(t)};c.prototype.styleFunction_=function(t,e){var n=a["c"](t).toString();i["a"].assert(n in this.featureUidToGroupIndex_);var r=this.featureUidToGroupIndex_[n];var o=this.groups_[r];return o.styleFunction(t,e)};c.module=angular.module("ngeoFeatureOverlayMgr",[r["a"].module.name]);c.module.service("ngeoFeatureOverlayMgr",c);e["a"]=c},function(t,e,n){"use strict";var i=n(2);var r=n(45);var a=n(54);var o=n(3);var s=n(14);var l=n(136);var u=n(81);var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function f(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function h(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function d(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var p=function(t){d(e,t);function e(n){f(this,e);n.type=r["a"].GEOMETRY;var i=h(this,t.call(this,n));var a=n.featureProperties||{};i.feature_=new s["a"](a);i.format_=new l["a"];i.updatingExpression_=false;i.updatingGeometry_=false;i.geometryChangeListenerKey_=null;i.listenerKeys.push(o["a"](i.feature_,"change:"+i.feature.getGeometryName(),i.handleFeatureGeometryChange_,i));i.setGeometryFromExpression_();return i}e.prototype.setExpression=function e(n){this.updatingExpression_=true;t.prototype.setExpression.call(this,n);if(!this.updatingGeometry_){this.setGeometryFromExpression_()}this.registerGeometryChange_();this.updatingExpression_=false};e.prototype.handleFeatureGeometryChange_=function t(){if(this.updatingExpression_){return}this.updatingGeometry_=true;var e=this.feature_.getGeometry();if(e){this.expression=this.format_.writeGeometry(e)}else{this.expression=null}this.registerGeometryChange_();this.updatingGeometry_=false};e.prototype.handleGeometryChange_=function t(e){var n=i["a"].assertInstanceof(e.target,u["a"]);this.updatingGeometry_=true;this.expression=this.format_.writeGeometry(n);this.updatingGeometry_=false};e.prototype.setGeometryFromExpression_=function t(){var e=null;if(this.expression){var n=i["a"].assertString(this.expression);e=this.format_.readGeometry(n)}this.geometry=e};e.prototype.registerGeometryChange_=function t(){if(this.geometryChangeListenerKey_!==null){o["e"](this.geometryChangeListenerKey_);this.geometryChangeListenerKey_=null}var e=this.feature_.getGeometry();if(e){this.geometryChangeListenerKey_=o["a"](e,"change",this.handleGeometryChange_,this)}};c(e,[{key:"feature",get:function t(){return this.feature_}},{key:"geometry",get:function t(){return this.feature_.getGeometry()||null},set:function t(e){this.feature_.setGeometry(e)}}]);return e}(a["a"]);e["a"]=p},function(t,e,n){"use strict";e["a"]={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function(t,e,n){"use strict";(function(t){n.d(e,"c",function(){return y});n.d(e,"a",function(){return b});n.d(e,"e",function(){return w});n.d(e,"b",function(){return x});n.d(e,"d",function(){return S});var i=n(141);var r=n(71);var a=n(98);var o=n(353);var s=n(97);var l=n(288);var u=n(287);var c=n(397);var f=n(374);var h;var d={};var p={};var v;function g(t){return t?t.toLowerCase().replace("_","-"):t}function m(t){var e=0,n,i,r,a;while(e<t.length){a=g(t[e]).split("-");n=a.length;i=g(t[e+1]);i=i?i.split("-"):null;while(n>0){r=_(a.slice(0,n).join("-"));if(r){return r}if(i&&i.length>=n&&Object(o["a"])(a,i,true)>=n-1){break}n--}e++}return v}function _(e){var n=null;if(!d[e]&&typeof t!=="undefined"&&t&&t.exports){try{n=v._abbr;var i=h;!function t(){var e=new Error('Cannot find module "undefined"');e.code="MODULE_NOT_FOUND";throw e}();y(n)}catch(t){}}return d[e]}function y(t,e){var n;if(t){if(Object(a["a"])(e)){n=x(t)}else{n=b(t,e)}if(n){v=n}else{if(typeof console!=="undefined"&&console.warn){console.warn("Locale "+t+" not found. Did you forget to load it?")}}}return v._abbr}function b(t,e){if(e!==null){var n,i=f["a"];e.abbr=t;if(d[t]!=null){Object(s["b"])("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");i=d[t]._config}else if(e.parentLocale!=null){if(d[e.parentLocale]!=null){i=d[e.parentLocale]._config}else{n=_(e.parentLocale);if(n!=null){i=n._config}else{if(!p[e.parentLocale]){p[e.parentLocale]=[]}p[e.parentLocale].push({name:t,config:e});return null}}}d[t]=new u["a"](Object(l["a"])(i,e));if(p[t]){p[t].forEach(function(t){b(t.name,t.config)})}y(t);return d[t]}else{delete d[t];return null}}function w(t,e){if(e!=null){var n,i,r=f["a"];i=_(t);if(i!=null){r=i._config}e=Object(l["a"])(r,e);n=new u["a"](e);n.parentLocale=d[t];d[t]=n;y(t)}else{if(d[t]!=null){if(d[t].parentLocale!=null){d[t]=d[t].parentLocale}else if(d[t]!=null){delete d[t]}}}return d[t]}function x(t){var e;if(t&&t._locale&&t._locale._abbr){t=t._locale._abbr}if(!t){return v}if(!Object(i["a"])(t)){e=_(t);if(e){return e}t=[t]}return m(t)}function S(){return Object(c["a"])(d)}}).call(this,n(523)(t))},function(t,e,n){"use strict";var i=n(1);var r=n(11);var a=n(14);var o=n(49);var s=n(127);var l=n(39);var u=n(29);var c=n(3);var f=n(42);var h=n(50);var d=n(4);var p=n(20);var v=n(165);var g=n(8);var m=n(36);var _=n(88);var y=n(83);var b=n(89);var w=n(227);var x=n(21);var S=n(32);var C=n(28);var E=n(243);var O=n(61);var T=n(57);var M=n(12);var I={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"};var R={DRAWSTART:"drawstart",DRAWEND:"drawend"};var N=function t(e,n){f["a"].call(this,e);this.feature=n};Object(i["d"])(N,f["a"]);var A=function t(e){C["b"].call(this,{handleDownEvent:D,handleEvent:P,handleUpEvent:j});this.shouldHandle_=false;this.downPx_=null;this.downTimeout_;this.lastDragTime_;this.freehand_=false;this.source_=e.source?e.source:null;this.features_=e.features?e.features:null;this.snapTolerance_=e.snapTolerance?e.snapTolerance:12;this.type_=e.type;this.mode_=$(this.type_);this.stopClick_=!!e.stopClick;this.minPoints_=e.minPoints?e.minPoints:this.mode_===I.POLYGON?3:2;this.maxPoints_=e.maxPoints?e.maxPoints:Infinity;this.finishCondition_=e.finishCondition?e.finishCondition:p["b"];var n=e.geometryFunction;if(!n){if(this.type_===g["a"].CIRCLE){n=function t(e,n){var i=n?n:new v["a"]([NaN,NaN]);var r=Object(u["h"])(e[0],e[1]);i.setCenterAndRadius(e[0],Math.sqrt(r));return i}}else{var i=void 0;var r=this.mode_;if(r===I.POINT){i=x["a"]}else if(r===I.LINE_STRING){i=m["a"]}else if(r===I.POLYGON){i=S["a"]}n=function t(e,n){var a=n;if(a){if(r===I.POLYGON){if(e[0].length){a.setCoordinates([e[0].concat([e[0][0]])])}else{a.setCoordinates([])}}else{a.setCoordinates(e)}}else{a=new i(e)}return a}}}this.geometryFunction_=n;this.dragVertexDelay_=e.dragVertexDelay!==undefined?e.dragVertexDelay:500;this.finishCoordinate_=null;this.sketchFeature_=null;this.sketchPoint_=null;this.sketchCoords_=null;this.sketchLine_=null;this.sketchLineCoords_=null;this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36;this.overlay_=new O["a"]({source:new T["b"]({useSpatialIndex:false,wrapX:e.wrapX?e.wrapX:false}),style:e.style?e.style:L(),updateWhileInteracting:true});this.geometryName_=e.geometryName;this.condition_=e.condition?e.condition:h["g"];this.freehandCondition_;if(e.freehand){this.freehandCondition_=h["c"]}else{this.freehandCondition_=e.freehandCondition?e.freehandCondition:h["k"]}Object(c["a"])(this,Object(l["b"])(E["a"].ACTIVE),this.updateState_,this)};Object(i["d"])(A,C["b"]);function L(){var t=Object(M["b"])();return function(e,n){return t[e.getGeometry().getType()]}}A.prototype.setMap=function(t){C["b"].prototype.setMap.call(this,t);this.updateState_()};function P(t){if(t.originalEvent.type===r["a"].CONTEXTMENU){t.preventDefault()}this.freehand_=this.mode_!==I.POINT&&this.freehandCondition_(t);var e=t.type===o["a"].POINTERMOVE;var n=true;if(this.lastDragTime_&&t.type===o["a"].POINTERDRAG){var i=Date.now();if(i-this.lastDragTime_>=this.dragVertexDelay_){this.downPx_=t.pixel;this.shouldHandle_=!this.freehand_;e=true}else{this.lastDragTime_=undefined}if(this.shouldHandle_&&this.downTimeout_){clearTimeout(this.downTimeout_);this.downTimeout_=undefined}}if(this.freehand_&&t.type===o["a"].POINTERDRAG&&this.sketchFeature_!==null){this.addToDrawing_(t);n=false}else if(this.freehand_&&t.type===o["a"].POINTERDOWN){n=false}else if(e){n=t.type===o["a"].POINTERMOVE;if(n&&this.freehand_){n=this.handlePointerMove_(t)}else if(t.pointerEvent.pointerType==w["b"]||t.type===o["a"].POINTERDRAG&&!this.downTimeout_){this.handlePointerMove_(t)}}else if(t.type===o["a"].DBLCLICK){n=false}return C["c"].call(this,t)&&n}function D(t){this.shouldHandle_=!this.freehand_;if(this.freehand_){this.downPx_=t.pixel;if(!this.finishCoordinate_){this.startDrawing_(t)}return true}else if(this.condition_(t)){this.lastDragTime_=Date.now();this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new s["a"](o["a"].POINTERMOVE,t.map,t.pointerEvent,t.frameState))}.bind(this),this.dragVertexDelay_);this.downPx_=t.pixel;return true}else{return false}}function j(t){var e=true;if(this.downTimeout_){clearTimeout(this.downTimeout_);this.downTimeout_=undefined}this.handlePointerMove_(t);var n=this.mode_===I.CIRCLE;if(this.shouldHandle_){if(!this.finishCoordinate_){this.startDrawing_(t);if(this.mode_===I.POINT){this.finishDrawing()}}else if(this.freehand_||n){this.finishDrawing()}else if(this.atFinish_(t)){if(this.finishCondition_(t)){this.finishDrawing()}}else{this.addToDrawing_(t)}e=false}else if(this.freehand_){this.finishCoordinate_=null;this.abortDrawing_()}if(!e&&this.stopClick_){t.stopPropagation()}return e}A.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_;var n=t.pixel;var i=e[0]-n[0];var r=e[1]-n[1];var a=i*i+r*r;this.shouldHandle_=this.freehand_?a>this.squaredClickTolerance_:a<=this.squaredClickTolerance_;if(!this.shouldHandle_){return true}}if(this.finishCoordinate_){this.modifyDrawing_(t)}else{this.createOrUpdateSketchPoint_(t)}return true};A.prototype.atFinish_=function(t){var e=false;if(this.sketchFeature_){var n=false;var i=[this.finishCoordinate_];if(this.mode_===I.LINE_STRING){n=this.sketchCoords_.length>this.minPoints_}else if(this.mode_===I.POLYGON){n=this.sketchCoords_[0].length>this.minPoints_;i=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]}if(n){var r=t.map;for(var a=0,o=i.length;a<o;a++){var s=i[a];var l=r.getPixelFromCoordinate(s);var u=t.pixel;var c=u[0]-l[0];var f=u[1]-l[1];var h=this.freehand_?1:this.snapTolerance_;e=Math.sqrt(c*c+f*f)<=h;if(e){this.finishCoordinate_=s;break}}}}return e};A.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();if(!this.sketchPoint_){this.sketchPoint_=new a["a"](new x["a"](e));this.updateSketchFeatures_()}else{var n=this.sketchPoint_.getGeometry();n.setCoordinates(e)}};A.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e;if(this.mode_===I.POINT){this.sketchCoords_=e.slice()}else if(this.mode_===I.POLYGON){this.sketchCoords_=[[e.slice(),e.slice()]];this.sketchLineCoords_=this.sketchCoords_[0]}else{this.sketchCoords_=[e.slice(),e.slice()]}if(this.sketchLineCoords_){this.sketchLine_=new a["a"](new m["a"](this.sketchLineCoords_))}var n=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new a["a"];if(this.geometryName_){this.sketchFeature_.setGeometryName(this.geometryName_)}this.sketchFeature_.setGeometry(n);this.updateSketchFeatures_();this.dispatchEvent(new N(R.DRAWSTART,this.sketchFeature_))};A.prototype.modifyDrawing_=function(t){var e=t.coordinate;var n=this.sketchFeature_.getGeometry();var i=void 0,r=void 0;if(this.mode_===I.POINT){r=this.sketchCoords_}else if(this.mode_===I.POLYGON){i=this.sketchCoords_[0];r=i[i.length-1];if(this.atFinish_(t)){e=this.finishCoordinate_.slice()}}else{i=this.sketchCoords_;r=i[i.length-1]}r[0]=e[0];r[1]=e[1];this.geometryFunction_(this.sketchCoords_,n);if(this.sketchPoint_){var o=this.sketchPoint_.getGeometry();o.setCoordinates(e)}var s=void 0;if(n instanceof S["a"]&&this.mode_!==I.POLYGON){if(!this.sketchLine_){this.sketchLine_=new a["a"](new m["a"](null))}var l=n.getLinearRing(0);s=this.sketchLine_.getGeometry();s.setFlatCoordinates(l.getLayout(),l.getFlatCoordinates())}else if(this.sketchLineCoords_){s=this.sketchLine_.getGeometry();s.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()};A.prototype.addToDrawing_=function(t){var e=t.coordinate;var n=this.sketchFeature_.getGeometry();var i=void 0;var r=void 0;if(this.mode_===I.LINE_STRING){this.finishCoordinate_=e.slice();r=this.sketchCoords_;if(r.length>=this.maxPoints_){if(this.freehand_){r.pop()}else{i=true}}r.push(e.slice());this.geometryFunction_(r,n)}else if(this.mode_===I.POLYGON){r=this.sketchCoords_[0];if(r.length>=this.maxPoints_){if(this.freehand_){r.pop()}else{i=true}}r.push(e.slice());if(i){this.finishCoordinate_=r[0]}this.geometryFunction_(this.sketchCoords_,n)}this.updateSketchFeatures_();if(i){this.finishDrawing()}};A.prototype.removeLastPoint=function(){if(!this.sketchFeature_){return}var t=this.sketchFeature_.getGeometry();var e=void 0,n=void 0;if(this.mode_===I.LINE_STRING){e=this.sketchCoords_;e.splice(-2,1);this.geometryFunction_(e,t);if(e.length>=2){this.finishCoordinate_=e[e.length-2].slice()}}else if(this.mode_===I.POLYGON){e=this.sketchCoords_[0];e.splice(-2,1);n=this.sketchLine_.getGeometry();n.setCoordinates(e);this.geometryFunction_(this.sketchCoords_,t)}if(e.length===0){this.finishCoordinate_=null}this.updateSketchFeatures_()};A.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(!t){return}var e=this.sketchCoords_;var n=t.getGeometry();if(this.mode_===I.LINE_STRING){e.pop();this.geometryFunction_(e,n)}else if(this.mode_===I.POLYGON){e[0].pop();this.geometryFunction_(e,n);e=n.getCoordinates()}if(this.type_===g["a"].MULTI_POINT){t.setGeometry(new y["a"]([e]))}else if(this.type_===g["a"].MULTI_LINE_STRING){t.setGeometry(new _["a"]([e]))}else if(this.type_===g["a"].MULTI_POLYGON){t.setGeometry(new b["a"]([e]))}this.dispatchEvent(new N(R.DRAWEND,t));if(this.features_){this.features_.push(t)}if(this.source_){this.source_.addFeature(t)}};A.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;if(t){this.sketchFeature_=null;this.sketchPoint_=null;this.sketchLine_=null;this.overlay_.getSource().clear(true)}return t};A.prototype.extend=function(t){var e=t.getGeometry();var n=e;this.sketchFeature_=t;this.sketchCoords_=n.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice();this.sketchCoords_.push(i.slice());this.updateSketchFeatures_();this.dispatchEvent(new N(R.DRAWSTART,this.sketchFeature_))};A.prototype.shouldStopEvent=p["a"];A.prototype.updateSketchFeatures_=function(){var t=[];if(this.sketchFeature_){t.push(this.sketchFeature_)}if(this.sketchLine_){t.push(this.sketchLine_)}if(this.sketchPoint_){t.push(this.sketchPoint_)}var e=this.overlay_.getSource();e.clear(true);e.addFeatures(t)};A.prototype.updateState_=function(){var t=this.getMap();var e=this.getActive();if(!t||!e){this.abortDrawing_()}this.overlay_.setMap(e?t:null)};function k(t,e){return function(n,i){var r=n[0];var a=n[1];var o=Math.sqrt(Object(u["h"])(r,a));var s=i?i:Object(S["b"])(new v["a"](r),t);var l=e?e:Math.atan((a[1]-r[1])/(a[0]-r[0]));Object(S["d"])(s,r,o,l);return s}}function F(){return function(t,e){var n=Object(d["b"])(t);var i=e||new S["a"](null);i.setCoordinates([[Object(d["v"])(n),Object(d["w"])(n),Object(d["D"])(n),Object(d["C"])(n),Object(d["v"])(n)]]);return i}}function $(t){var e=void 0;if(t===g["a"].POINT||t===g["a"].MULTI_POINT){e=I.POINT}else if(t===g["a"].LINE_STRING||t===g["a"].MULTI_LINE_STRING){e=I.LINE_STRING}else if(t===g["a"].POLYGON||t===g["a"].MULTI_POLYGON){e=I.POLYGON}else if(t===g["a"].CIRCLE){e=I.CIRCLE}return e}e["a"]=A},function(t,e,n){"use strict";var i=n(235);var r=n(1);var a=n(195);var o=n(43);var s=n(3);var l=n(11);var u=n(4);var c=function t(e,n,i,r,s,l){a["a"].call(this,e,n,i,o["a"].IDLE);this.src_=r;this.image_=new Image;if(s!==null){this.image_.crossOrigin=s}this.imageListenerKeys_=null;this.state=o["a"].IDLE;this.imageLoadFunction_=l};Object(r["d"])(c,a["a"]);c.prototype.getImage=function(){return this.image_};c.prototype.handleImageError_=function(){this.state=o["a"].ERROR;this.unlistenImage_();this.changed()};c.prototype.handleImageLoad_=function(){if(this.resolution===undefined){this.resolution=Object(u["A"])(this.extent)/this.image_.height}this.state=o["a"].LOADED;this.unlistenImage_();this.changed()};c.prototype.load=function(){if(this.state==o["a"].IDLE||this.state==o["a"].ERROR){this.state=o["a"].LOADING;this.changed();this.imageListenerKeys_=[Object(s["b"])(this.image_,l["a"].ERROR,this.handleImageError_,this),Object(s["b"])(this.image_,l["a"].LOAD,this.handleImageLoad_,this)];this.imageLoadFunction_(this,this.src_)}};c.prototype.setImage=function(t){this.image_=t};c.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s["e"]);this.imageListenerKeys_=null};var f=c;var h=n(27);var d=n(9);var p=n(10);var v=n(194);var g=n(270);var m=n(199);var _=n(142);var y=n(131);var b=function t(e){var n=e||{};g["a"].call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions});this.crossOrigin_=n.crossOrigin!==undefined?n.crossOrigin:null;this.url_=n.url;this.imageLoadFunction_=n.imageLoadFunction!==undefined?n.imageLoadFunction:g["b"];this.params_=n.params||{};this.v13_=true;this.updateV13_();this.serverType_=n.serverType;this.hidpi_=n.hidpi!==undefined?n.hidpi:true;this.image_=null;this.imageSize_=[0,0];this.renderedRevision_=0;this.ratio_=n.ratio!==undefined?n.ratio:1.5};Object(r["d"])(b,g["a"]);var w=[101,101];b.prototype.getGetFeatureInfoUrl=function(t,e,n,r){if(this.url_===undefined){return undefined}var a=Object(p["h"])(n);var o=this.getProjection();if(o&&o!==a){e=Object(v["a"])(o,a,t,e);t=Object(p["n"])(t,a,o)}var s=Object(u["z"])(t,e,0,w);var l={SERVICE:"WMS",VERSION:i["a"],REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:true,QUERY_LAYERS:this.params_["LAYERS"]};Object(d["a"])(l,this.params_,r);var c=Math.floor((t[0]-s[0])/e);var f=Math.floor((s[3]-t[1])/e);l[this.v13_?"I":"X"]=c;l[this.v13_?"J":"Y"]=f;return this.getRequestUrl_(s,w,1,o||a,l)};b.prototype.getParams=function(){return this.params_};b.prototype.getImageInternal=function(t,e,n,r){if(this.url_===undefined){return null}e=this.findNearestResolution(e);if(n!=1&&(!this.hidpi_||this.serverType_===undefined)){n=1}var a=e/n;var o=Object(u["x"])(t);var c=Math.ceil(Object(u["E"])(t)/a);var h=Math.ceil(Object(u["A"])(t)/a);var p=Object(u["z"])(o,a,0,[c,h]);var v=Math.ceil(this.ratio_*Object(u["E"])(t)/a);var g=Math.ceil(this.ratio_*Object(u["A"])(t)/a);var m=Object(u["z"])(o,a,0,[v,g]);var _=this.image_;if(_&&this.renderedRevision_==this.getRevision()&&_.getResolution()==e&&_.getPixelRatio()==n&&Object(u["g"])(_.getExtent(),p)){return _}var y={SERVICE:"WMS",VERSION:i["a"],REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:true};Object(d["a"])(y,this.params_);this.imageSize_[0]=Math.round(Object(u["E"])(m)/a);this.imageSize_[1]=Math.round(Object(u["A"])(m)/a);var b=this.getRequestUrl_(m,this.imageSize_,n,r,y);this.image_=new f(m,e,n,b,this.crossOrigin_,this.imageLoadFunction_);this.renderedRevision_=this.getRevision();Object(s["a"])(this.image_,l["a"].CHANGE,this.handleImageChange,this);return this.image_};b.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_};b.prototype.getRequestUrl_=function(t,e,n,i,r){Object(h["a"])(this.url_!==undefined,9);r[this.v13_?"CRS":"SRS"]=i.getCode();if(!("STYLES"in this.params_)){r["STYLES"]=""}if(n!=1){switch(this.serverType_){case m["a"].GEOSERVER:var a=90*n+.5|0;if("FORMAT_OPTIONS"in r){r["FORMAT_OPTIONS"]+=";dpi:"+a}else{r["FORMAT_OPTIONS"]="dpi:"+a}break;case m["a"].MAPSERVER:r["MAP_RESOLUTION"]=90*n;break;case m["a"].CARMENTA_SERVER:case m["a"].QGIS:r["DPI"]=90*n;break;default:Object(h["a"])(false,8);break}}r["WIDTH"]=e[0];r["HEIGHT"]=e[1];var o=i.getAxisOrientation();var s=void 0;if(this.v13_&&o.substr(0,2)=="ne"){s=[t[1],t[0],t[3],t[2]]}else{s=t}r["BBOX"]=s.join(",");return Object(y["a"])(this.url_,r)};b.prototype.getUrl=function(){return this.url_};b.prototype.setImageLoadFunction=function(t){this.image_=null;this.imageLoadFunction_=t;this.changed()};b.prototype.setUrl=function(t){if(t!=this.url_){this.url_=t;this.image_=null;this.changed()}};b.prototype.updateParams=function(t){Object(d["a"])(this.params_,t);this.updateV13_();this.image_=null;this.changed()};b.prototype.updateV13_=function(){var t=this.params_["VERSION"]||i["a"];this.v13_=Object(_["a"])(t,"1.3")>=0};var x=e["a"]=b},function(t,e,n){"use strict";var i=n(1);var r=n(193);var a=n(39);var o=n(129);var s=n(62);var l=n(47);var u=n(3);var c=n(4);var f={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};var h=function t(e){a["a"].call(this);this.options=e;this.id=e.id;this.insertFirst=e.insertFirst!==undefined?e.insertFirst:true;this.stopEvent=e.stopEvent!==undefined?e.stopEvent:true;this.element=document.createElement("DIV");this.element.className=e.className!==undefined?e.className:"ol-overlay-container "+s["d"];this.element.style.position="absolute";this.autoPan=e.autoPan!==undefined?e.autoPan:false;this.autoPanAnimation=e.autoPanAnimation||{};this.autoPanMargin=e.autoPanMargin!==undefined?e.autoPanMargin:20;this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:true};this.mapPostrenderListenerKey=null;Object(u["a"])(this,Object(a["b"])(f.ELEMENT),this.handleElementChanged,this);Object(u["a"])(this,Object(a["b"])(f.MAP),this.handleMapChanged,this);Object(u["a"])(this,Object(a["b"])(f.OFFSET),this.handleOffsetChanged,this);Object(u["a"])(this,Object(a["b"])(f.POSITION),this.handlePositionChanged,this);Object(u["a"])(this,Object(a["b"])(f.POSITIONING),this.handlePositioningChanged,this);if(e.element!==undefined){this.setElement(e.element)}this.setOffset(e.offset!==undefined?e.offset:[0,0]);this.setPositioning(e.positioning!==undefined?e.positioning:o["a"].TOP_LEFT);if(e.position!==undefined){this.setPosition(e.position)}};Object(i["d"])(h,a["a"]);h.prototype.getElement=function(){return this.get(f.ELEMENT)};h.prototype.getId=function(){return this.id};h.prototype.getMap=function(){return this.get(f.MAP)};h.prototype.getOffset=function(){return this.get(f.OFFSET)};h.prototype.getPosition=function(){return this.get(f.POSITION)};h.prototype.getPositioning=function(){return this.get(f.POSITIONING)};h.prototype.handleElementChanged=function(){Object(l["d"])(this.element);var t=this.getElement();if(t){this.element.appendChild(t)}};h.prototype.handleMapChanged=function(){if(this.mapPostrenderListenerKey){Object(l["e"])(this.element);Object(u["e"])(this.mapPostrenderListenerKey);this.mapPostrenderListenerKey=null}var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(u["a"])(t,r["a"].POSTRENDER,this.render,this);this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();if(this.insertFirst){e.insertBefore(this.element,e.childNodes[0]||null)}else{e.appendChild(this.element)}}};h.prototype.render=function(){this.updatePixelPosition()};h.prototype.handleOffsetChanged=function(){this.updatePixelPosition()};h.prototype.handlePositionChanged=function(){this.updatePixelPosition();if(this.get(f.POSITION)&&this.autoPan){this.panIntoView()}};h.prototype.handlePositioningChanged=function(){this.updatePixelPosition()};h.prototype.setElement=function(t){this.set(f.ELEMENT,t)};h.prototype.setMap=function(t){this.set(f.MAP,t)};h.prototype.setOffset=function(t){this.set(f.OFFSET,t)};h.prototype.setPosition=function(t){this.set(f.POSITION,t)};h.prototype.panIntoView=function(){var t=this.getMap();if(!t||!t.getTargetElement()){return}var e=this.getRect(t.getTargetElement(),t.getSize());var n=this.getElement();var i=this.getRect(n,[Object(l["c"])(n),Object(l["b"])(n)]);var r=this.autoPanMargin;if(!Object(c["g"])(e,i)){var a=i[0]-e[0];var o=e[2]-i[2];var s=i[1]-e[1];var u=e[3]-i[3];var f=[0,0];if(a<0){f[0]=a-r}else if(o<0){f[0]=Math.abs(o)+r}if(s<0){f[1]=s-r}else if(u<0){f[1]=Math.abs(u)+r}if(f[0]!==0||f[1]!==0){var h=t.getView().getCenter();var d=t.getPixelFromCoordinate(h);var p=[d[0]+f[0],d[1]+f[1]];t.getView().animate({center:t.getCoordinateFromPixel(p),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}};h.prototype.getRect=function(t,e){var n=t.getBoundingClientRect();var i=n.left+window.pageXOffset;var r=n.top+window.pageYOffset;return[i,r,i+e[0],r+e[1]]};h.prototype.setPositioning=function(t){this.set(f.POSITIONING,t)};h.prototype.setVisible=function(t){if(this.rendered.visible!==t){this.element.style.display=t?"":"none";this.rendered.visible=t}};h.prototype.updatePixelPosition=function(){var t=this.getMap();var e=this.getPosition();if(!t||!t.isRendered()||!e){this.setVisible(false);return}var n=t.getPixelFromCoordinate(e);var i=t.getSize();this.updateRenderedPosition(n,i)};h.prototype.updateRenderedPosition=function(t,e){var n=this.element.style;var i=this.getOffset();var r=this.getPositioning();this.setVisible(true);var a=i[0];var s=i[1];if(r==o["a"].BOTTOM_RIGHT||r==o["a"].CENTER_RIGHT||r==o["a"].TOP_RIGHT){if(this.rendered.left_!==""){this.rendered.left_=n.left=""}var l=Math.round(e[0]-t[0]-a)+"px";if(this.rendered.right_!=l){this.rendered.right_=n.right=l}}else{if(this.rendered.right_!==""){this.rendered.right_=n.right=""}if(r==o["a"].BOTTOM_CENTER||r==o["a"].CENTER_CENTER||r==o["a"].TOP_CENTER){a-=this.element.offsetWidth/2}var u=Math.round(t[0]+a)+"px";if(this.rendered.left_!=u){this.rendered.left_=n.left=u}}if(r==o["a"].BOTTOM_LEFT||r==o["a"].BOTTOM_CENTER||r==o["a"].BOTTOM_RIGHT){if(this.rendered.top_!==""){this.rendered.top_=n.top=""}var c=Math.round(e[1]-t[1]-s)+"px";if(this.rendered.bottom_!=c){this.rendered.bottom_=n.bottom=c}}else{if(this.rendered.bottom_!==""){this.rendered.bottom_=n.bottom=""}if(r==o["a"].CENTER_LEFT||r==o["a"].CENTER_CENTER||r==o["a"].CENTER_RIGHT){s-=this.element.offsetHeight/2}var f=Math.round(t[1]+s)+"px";if(this.rendered.top_!=f){this.rendered.top_=n.top=f}}};h.prototype.getOptions=function(){return this.options};e["a"]=h},function(t,e,n){"use strict";n.d(e,"a",function(){return g});n.d(e,"g",function(){return m});n.d(e,"c",function(){return _});n.d(e,"j",function(){return y});n.d(e,"b",function(){return b});n.d(e,"h",function(){return w});n.d(e,"i",function(){return S});n.d(e,"d",function(){return C});n.d(e,"f",function(){return E});n.d(e,"e",function(){return O});n.d(e,"l",function(){return M});n.d(e,"m",function(){return R});n.d(e,"k",function(){return A});var i=n(26);var r=n(44);var a=n(76);var o=n(6);var s=n(51);var l=n(41);var u=n(141);var c=n(99);var f=n(71);var h=n(137);var d=n(48);Object(i["a"])("d",0,"do","day");Object(i["a"])("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});Object(i["a"])("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});Object(i["a"])("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});Object(i["a"])("e",0,0,"weekday");Object(i["a"])("E",0,0,"isoWeekday");Object(r["a"])("day","d");Object(r["a"])("weekday","e");Object(r["a"])("isoWeekday","E");Object(a["a"])("day",11);Object(a["a"])("weekday",11);Object(a["a"])("isoWeekday",11);Object(o["a"])("d",o["d"]);Object(o["a"])("e",o["d"]);Object(o["a"])("E",o["d"]);Object(o["a"])("dd",function(t,e){return e.weekdaysMinRegex(t)});Object(o["a"])("ddd",function(t,e){return e.weekdaysShortRegex(t)});Object(o["a"])("dddd",function(t,e){return e.weekdaysRegex(t)});Object(s["c"])(["dd","ddd","dddd"],function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);if(r!=null){e.d=r}else{Object(d["a"])(n).invalidWeekday=t}});Object(s["c"])(["d","e","E"],function(t,e,n,i){e[i]=Object(l["a"])(t)});function p(t,e){if(typeof t!=="string"){return t}if(!isNaN(t)){return parseInt(t,10)}t=e.weekdaysParse(t);if(typeof t==="number"){return t}return null}function v(t,e){if(typeof t==="string"){return e.weekdaysParse(t)%7||7}return isNaN(t)?null:t}var g="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function m(t,e){if(!t){return Object(u["a"])(this._weekdays)?this._weekdays:this._weekdays["standalone"]}return Object(u["a"])(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]}var _="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function y(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}var b="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function w(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function x(t,e,n){var i,r,a,o=t.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(i=0;i<7;++i){a=Object(h["a"])([2e3,1]).day(i);this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase();this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase();this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase()}}if(n){if(e==="dddd"){r=c["a"].call(this._weekdaysParse,o);return r!==-1?r:null}else if(e==="ddd"){r=c["a"].call(this._shortWeekdaysParse,o);return r!==-1?r:null}else{r=c["a"].call(this._minWeekdaysParse,o);return r!==-1?r:null}}else{if(e==="dddd"){r=c["a"].call(this._weekdaysParse,o);if(r!==-1){return r}r=c["a"].call(this._shortWeekdaysParse,o);if(r!==-1){return r}r=c["a"].call(this._minWeekdaysParse,o);return r!==-1?r:null}else if(e==="ddd"){r=c["a"].call(this._shortWeekdaysParse,o);if(r!==-1){return r}r=c["a"].call(this._weekdaysParse,o);if(r!==-1){return r}r=c["a"].call(this._minWeekdaysParse,o);return r!==-1?r:null}else{r=c["a"].call(this._minWeekdaysParse,o);if(r!==-1){return r}r=c["a"].call(this._weekdaysParse,o);if(r!==-1){return r}r=c["a"].call(this._shortWeekdaysParse,o);return r!==-1?r:null}}}function S(t,e,n){var i,r,a;if(this._weekdaysParseExact){return x.call(this,t,e,n)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(i=0;i<7;i++){r=Object(h["a"])([2e3,1]).day(i);if(n&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i");this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[i]){a="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,"");this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")}if(n&&e==="dddd"&&this._fullWeekdaysParse[i].test(t)){return i}else if(n&&e==="ddd"&&this._shortWeekdaysParse[i].test(t)){return i}else if(n&&e==="dd"&&this._minWeekdaysParse[i].test(t)){return i}else if(!n&&this._weekdaysParse[i].test(t)){return i}}}function C(t){if(!this.isValid()){return t!=null?this:NaN}var e=this._isUTC?this._d.getUTCDay():this._d.getDay();if(t!=null){t=p(t,this.localeData());return this.add(t-e,"d")}else{return e}}function E(t){if(!this.isValid()){return t!=null?this:NaN}var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function O(t){if(!this.isValid()){return t!=null?this:NaN}if(t!=null){var e=v(t,this.localeData());return this.day(this.day()%7?e:e-7)}else{return this.day()||7}}var T=o["s"];function M(t){if(this._weekdaysParseExact){if(!Object(f["a"])(this,"_weekdaysRegex")){L.call(this)}if(t){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!Object(f["a"])(this,"_weekdaysRegex")){this._weekdaysRegex=T}return this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex}}var I=o["s"];function R(t){if(this._weekdaysParseExact){if(!Object(f["a"])(this,"_weekdaysRegex")){L.call(this)}if(t){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!Object(f["a"])(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=I}return this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var N=o["s"];function A(t){if(this._weekdaysParseExact){if(!Object(f["a"])(this,"_weekdaysRegex")){L.call(this)}if(t){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!Object(f["a"])(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=N}return this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function L(){function t(t,e){return e.length-t.length}var e=[],n=[],i=[],r=[],a,s,l,u,c;for(a=0;a<7;a++){s=Object(h["a"])([2e3,1]).day(a);l=this.weekdaysMin(s,"");u=this.weekdaysShort(s,"");c=this.weekdays(s,"");e.push(l);n.push(u);i.push(c);r.push(l);r.push(u);r.push(c)}e.sort(t);n.sort(t);i.sort(t);r.sort(t);for(a=0;a<7;a++){n[a]=Object(o["t"])(n[a]);i[a]=Object(o["t"])(i[a]);r[a]=Object(o["t"])(r[a])}this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}},function(t,e,n){(function(t,n){true?n(e):undefined})(this,function(t){"use strict";var e=new Date,n=new Date;function i(t,r,a,o){function s(e){return t(e=arguments.length===0?new Date:new Date(+e)),e}s.floor=function(e){return t(e=new Date(+e)),e};s.ceil=function(e){return t(e=new Date(e-1)),r(e,1),t(e),e};s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n};s.offset=function(t,e){return r(t=new Date(+t),e==null?1:Math.floor(e)),t};s.range=function(e,n,i){var a=[],o;e=s.ceil(e);i=i==null?1:Math.floor(i);if(!(e<n)||!(i>0))return a;do{a.push(o=new Date(+e)),r(e,i),t(e)}while(o<e&&e<n);return a};s.filter=function(e){return i(function(n){if(n>=n)while(t(n),!e(n))n.setTime(n-1)},function(t,n){if(t>=t){if(n<0)while(++n<=0){while(r(t,-1),!e(t)){}}else while(--n>=0){while(r(t,+1),!e(t)){}}}})};if(a){s.count=function(i,r){e.setTime(+i),n.setTime(+r);t(e),t(n);return Math.floor(a(e,n))};s.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?s:s.filter(o?function(e){return o(e)%t===0}:function(e){return s.count(0,e)%t===0})}}return s}var r=i(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});r.every=function(t){t=Math.floor(t);if(!isFinite(t)||!(t>0))return null;if(!(t>1))return r;return i(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t})};var a=r.range;var o=1e3;var s=6e4;var l=36e5;var u=864e5;var c=6048e5;var f=i(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*o)},function(t,e){return(e-t)/o},function(t){return t.getUTCSeconds()});var h=f.range;var d=i(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*o)},function(t,e){t.setTime(+t+e*s)},function(t,e){return(e-t)/s},function(t){return t.getMinutes()});var p=d.range;var v=i(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*o-t.getMinutes()*s)},function(t,e){t.setTime(+t+e*l)},function(t,e){return(e-t)/l},function(t){return t.getHours()});var g=v.range;var m=i(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*s)/u},function(t){return t.getDate()-1});var _=m.range;function y(t){return i(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e*7)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*s)/c})}var b=y(0);var w=y(1);var x=y(2);var S=y(3);var C=y(4);var E=y(5);var O=y(6);var T=b.range;var M=w.range;var I=x.range;var R=S.range;var N=C.range;var A=E.range;var L=O.range;var P=i(function(t){t.setDate(1);t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});var D=P.range;var j=i(function(t){t.setMonth(0,1);t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});j.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:i(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t);e.setMonth(0,1);e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};var k=j.range;var F=i(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*s)},function(t,e){return(e-t)/s},function(t){return t.getUTCMinutes()});var $=F.range;var G=i(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*l)},function(t,e){return(e-t)/l},function(t){return t.getUTCHours()});var U=G.range;var Y=i(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/u},function(t){return t.getUTCDate()-1});var V=Y.range;function H(t){return i(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7);e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e*7)},function(t,e){return(e-t)/c})}var z=H(0);var B=H(1);var W=H(2);var q=H(3);var X=H(4);var K=H(5);var Z=H(6);var Q=z.range;var J=B.range;var tt=W.range;var et=q.range;var nt=X.range;var it=K.range;var rt=Z.range;var at=i(function(t){t.setUTCDate(1);t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});var ot=at.range;var st=i(function(t){t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});st.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:i(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t);e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};var lt=st.range;t.timeDay=m;t.timeDays=_;t.timeFriday=E;t.timeFridays=A;t.timeHour=v;t.timeHours=g;t.timeInterval=i;t.timeMillisecond=r;t.timeMilliseconds=a;t.timeMinute=d;t.timeMinutes=p;t.timeMonday=w;t.timeMondays=M;t.timeMonth=P;t.timeMonths=D;t.timeSaturday=O;t.timeSaturdays=L;t.timeSecond=f;t.timeSeconds=h;t.timeSunday=b;t.timeSundays=T;t.timeThursday=C;t.timeThursdays=N;t.timeTuesday=x;t.timeTuesdays=I;t.timeWednesday=S;t.timeWednesdays=R;t.timeWeek=b;t.timeWeeks=T;t.timeYear=j;t.timeYears=k;t.utcDay=Y;t.utcDays=V;t.utcFriday=K;t.utcFridays=it;t.utcHour=G;t.utcHours=U;t.utcMillisecond=r;t.utcMilliseconds=a;t.utcMinute=F;t.utcMinutes=$;t.utcMonday=B;t.utcMondays=J;t.utcMonth=at;t.utcMonths=ot;t.utcSaturday=Z;t.utcSaturdays=rt;t.utcSecond=f;t.utcSeconds=h;t.utcSunday=z;t.utcSundays=Q;t.utcThursday=X;t.utcThursdays=nt;t.utcTuesday=W;t.utcTuesdays=tt;t.utcWednesday=q;t.utcWednesdays=et;t.utcWeek=z;t.utcWeeks=Q;t.utcYear=st;t.utcYears=lt;Object.defineProperty(t,"__esModule",{value:true})})},function(t,e,n){var i,r,a;(function(o){if(true){!(r=[n(38)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){t.ui=t.ui||{};return t.ui.version="1.12.1"})},function(t,e,n){"use strict";var i=n(269);var r=n(2);var a=n(3);var o=n(37);var s=angular.module("ngeoMap",[]);s.directive_=function(t){return{restrict:"A",link:function e(n,i,s){var l="ngeoMap";var u=s[l];var c=n.$eval(u);r["a"].assertInstanceof(c,o["a"]);c.setTarget(i[0]);var f="ngeoMapManageResize";var h=s[f];var d=n.$eval(h);if(d){var p="ngeoMapResizeTransition";var v=s[p];var g=n.$eval(v);a["a"](t,"resize",function(){if(g){var e=Date.now();var n=true;var i=function i(){c.updateSize();c.renderSync();if(n){t.requestAnimationFrame(i)}if(Date.now()-e>g){n=false}};i()}else{c.updateSize()}})}}}};s.directive_.$inject=["$window"];s.directive("ngeoMap",s.directive_);var l=s;var u=n(109);var c=n(390);var f=angular.module("ngeoResizemap",[]);f.directive_=function(t){var e=1e3;return{restrict:"A",link:function n(i,a,s){var l="ngeoResizemap";var u=s[l];var c=i.$eval(u);r["a"].assertInstanceof(c,o["a"]);var f=s["ngeoResizemapState"];r["a"].assert(f!==undefined);var h=void 0;var d=void 0;var p=function n(){c.updateSize();c.renderSync();if(Date.now()-h<e){d=t.requestAnimationFrame(n)}};a.on("transitionend",function(){c.updateSize();c.renderSync()});i.$watch(f,function(e,n){if(e!=n){h=Date.now();t.cancelAnimationFrame(d);d=t.requestAnimationFrame(p)}})}}};f.directive_.$inject=["$window"];f.directive("ngeoResizemap",f.directive_);var h=f;var d=n(7);var p=n(182);var v=angular.module("ngeoScaleselector",[]);v.value("ngeoScaleselectorTemplateUrl",function(t,e){var n=e["ngeoScaleselectorTemplateurl"];return n!==undefined?n:"ngeo/map/scaleselector"});v.run(["$templateCache",function(t){t.put("ngeo/map/scaleselector",n(490))}]);var g=function t(e){return{restrict:"A",scope:true,controller:"NgeoScaleselectorController",templateUrl:e}};g.$inject=["ngeoScaleselectorTemplateUrl"];g.$inject=["ngeoScaleselectorTemplateUrl"];v.directive("ngeoScaleselector",g);var m=function t(e,n,i){var s=this;var l=i["ngeoScaleselector"];this.scales=e.$eval(l);r["a"].assert(this.scales!==undefined);this.zoomLevels;e.$watch(function(){return Object.keys(s.scales).length},function(t){s.zoomLevels=Object.keys(s.scales).map(Number);s.zoomLevels.sort(d["i"])});var u=i["ngeoScaleselectorMap"];this.map_=e.$eval(u);r["a"].assertInstanceof(this.map_,o["a"]);var c=i["ngeoScaleselectorOptions"];var f=e.$eval(c);this.options=t.getOptions_(f);this.$scope_=e;this.resolutionChangeKey_=null;this.currentScale=undefined;var h=this.map_.getView();if(h!==null){var p=this.map_.getView().getZoom();if(p!==undefined){this.currentScale=this.getScale(p)}}a["a"](this.map_,"change:view",this.handleViewChange_,this);this.registerResolutionChangeListener_();e["scaleselectorCtrl"]=this};m.$inject=["$scope","$element","$attrs"];m.$inject=["$scope","$element","$attrs"];m.getOptions_=function(t){var e=false;if(t!==undefined){e=t["dropup"]==true}return{dropup:e}};m.prototype.getScale=function(t){return this.scales[t]};m.prototype.changeZoom=function(t){this.map_.getView().setZoom(t)};m.prototype.handleResolutionChange_=function(t){var e=this;var n=this.map_.getView();var i=this.scales[n.getZoom()];if(i!==undefined){this.$scope_.$applyAsync(function(){e.currentScale=i})}};m.prototype.handleViewChange_=function(t){this.registerResolutionChangeListener_();this.handleResolutionChange_(null)};m.prototype.registerResolutionChangeListener_=function(){if(this.resolutionChangeKey_!==null){a["e"](this.resolutionChangeKey_)}var t=this.map_.getView();this.resolutionChangeKey_=a["a"](t,"change:resolution",this.handleResolutionChange_,this)};v.controller("NgeoScaleselectorController",m);var _=v;var y=angular.module("ngeoMapModule",[i["a"].module.name,l.name,u["a"].module.name,c["a"].name,h.name,_.name]);var b=e["a"]=y},function(t,e,n){"use strict";var i=angular.module("ngeoBtnComponent",[]);i.btnGroupComponent_=function(t){return{restrict:"A",controller:"ngeoBtnGroupController",link:function e(n,i,r,a){var o=t(r["ngeoBtnGroupActive"]).assign;if(o){n.$watch(function(){return a.buttons_.some(function(t){return t(n)===true})},function(t){o(n,t)})}}}};i.btnGroupComponent_.$inject=["$parse"];i.directive("ngeoBtnGroup",i.btnGroupComponent_);i.BtnGroupController=function(t){this.buttons_=[];this.scope_=t};i.BtnGroupController.$inject=["$scope"];i.BtnGroupController.prototype.activate=function(t){var e=this;this.buttons_.forEach(function(n,i){if(i!=t){n.assign(e.scope_,false)}})};i.BtnGroupController.prototype.addButton=function(t){this.buttons_.push(t);return this.buttons_.length-1};i.controller("ngeoBtnGroupController",i.BtnGroupController);i.btnComponent_=function(t){return{require:["?^ngeoBtnGroup","ngModel"],restrict:"A",link:function e(n,i,r,a){var o=a[0];var s=a[1];var l=-1;var u=t(r["ngModel"]);var c=u.assign;if(u(n)===undefined){c(n,false)}if(o!==null){l=o.addButton(u)}i.on("click",function(){n.$apply(function(){s.$setViewValue(!s.$viewValue);s.$render()})});s.$render=function(){if(s.$viewValue&&o!==null){o.activate(l)}i.toggleClass("active",s.$viewValue)}}}};i.btnComponent_.$inject=["$parse"];i.directive("ngeoBtn",i.btnComponent_);e["a"]=i},function(t,e,n){"use strict";var i=n(2);var r=n(228);var a=n(1);var o=function t(e,n){this.$filter_=e;this.gettextCatalog_=n;r["a"].call(this)};o.$inject=["$filter","gettextCatalog"];o.$inject=["$filter","gettextCatalog"];a["d"](o,r["a"]);o.prototype.formatTimeValue=function(t,e,n,i){var r=new Date(t);var a=i?"UTC":undefined;var o="yyyy";var s="yyyy-MM";var l="yyyy-MM-dd";var u=undefined;if(!n){var c=this.gettextCatalog_;o=c.getString("yyyy");s=c.getString("M/yyyy");l=c.getString("M/d/yyyy");u=c.getString("M/d/yyyy HH:MM:ss")}switch(e){case"year":return this.$filter_("date")(r,o,a);case"month":return this.$filter_("date")(r,s,a);case"day":return this.$filter_("date")(r,l,a);case"second":if(u){return this.$filter_("date")(r,u,a)}else{return r.toISOString().replace(/\.\d{3}/,"")}default:return r.toISOString().replace(/\.\d{3}/,"")}};o.prototype.formatWMSTimeParam=function(t,e,n){i["a"].assert(t.resolution!==undefined);if(t.mode==="range"){i["a"].assert(e.end!==undefined);return this.formatTimeValue(e.start,t.resolution,true,n)+"/"+this.formatTimeValue(e.end,t.resolution,true,n)}else{return this.formatTimeValue(e.start,t.resolution,true,n)}};o.module=angular.module("ngeoWMSTime",[r["a"].module.name]);o.module.service("ngeoWMSTime",o);e["a"]=o},function(t,e,n){"use strict";var i=n(15);var r=n(142);var a=angular.module("ngeoAngularFilters",[]);a.Scalify=function(t){var e=t("number");var n=function t(n){var i=e(n,0);return i?"1 : "+i:""};n["$stateful"]=true;return n};a.Scalify.$inject=["$filter"];a.filter("ngeoScalify",a.Scalify);a.Number=function(t){var e=t.NUMBER_FORMATS;var n=function t(n,i){var r=e.GROUP_SEP;var a=e.DECIMAL_SEP;if(i===undefined){i=3}if(n===Infinity){return"∞"}else if(n===-Infinity){return"-∞"}else if(n===0){return"0"}var o=n<0;n=Math.abs(n);var s=i-Math.floor(Math.log(n)/Math.log(10))-1;var l=Math.pow(10,s);n=Math.round(n*l);var u="";var c=Math.floor(n/l);if(s>0){var f=""+n;while(f.length<s){f="0"+f}u=f.substring(f.length-s);while(u[u.length-1]==="0"){u=u.substring(0,u.length-1)}}var h=[];var d=""+c;while(d.length>3){var p=d.length-3;h.unshift(d.substring(p));d=d.substring(0,p)}h.unshift(d);return(o?"-":"")+h.join(r)+(u.length===0?"":a+u)};return n};a.Number.$inject=["$locale"];a.filter("ngeoNumber",a.Number);a.UnitPrefix=function(t){var e=t("ngeoNumber");var n=["","k","M","G","T","P"];var i=["","Ki","Mi","Gi","Ti","Pi"];var r=function t(r,a,o,s){if(a===undefined){a=""}var l=1e3;var u=n;if(o==="square"){l=1e6}else if(o==="binary"){l=1024;u=i}var c=0;var f=u.length-1;while(r>=l&&c<f){r=r/l;c++}var h=u[c]+a;var d=h.length==0?"":" ";return e(r,s)+d+h};return r};a.UnitPrefix.$inject=["$filter"];a.filter("ngeoUnitPrefix",a.UnitPrefix);a.NumberCoordinates=function(t){var e=function e(n,i,r){var a=r?r:"{x} {y}";var o=n[0];var s=n[1];var l=parseInt(i,10)|0;o=t("number")(o,l);s=t("number")(s,l);return a.replace("{x}",o).replace("{y}",s)};return e};a.NumberCoordinates.$inject=["$filter"];a.filter("ngeoNumberCoordinates",a.NumberCoordinates);a.DMSCoordinates=function(){var t=function t(e,n,a){var o=i["d"](e+180,360)-180;var s=Math.abs(3600*o);var l=Math.floor(s/3600);var u=Math.floor(s/60%60);var c=s%60;return l+"° "+r["b"](u,2)+"′ "+r["b"](c,2,a)+"″ "+n.charAt(o<0?1:0)};var e=function e(n,i,r){var a=parseInt(i,10)|0;var o=r?r:"{x} {y}";var s=t(n[0],"EW",a);var l=t(n[1],"NS",a);return o.replace("{x}",s).replace("{y}",l)};return e};a.filter("ngeoDMSCoordinates",a.DMSCoordinates);a.trustHtmlFilter=function(t){return function(e){if(e!==undefined&&e!==null){return t.trustAsHtml(""+e)}else{return t.trustAsHtml("&nbsp;")}}};a.trustHtmlFilter.$inject=["$sce"];a.filter("ngeoTrustHtml",a.trustHtmlFilter);a.Duration=function(t){var e=Object.freeze({SECONDS:Symbol("seconds"),MINUTES:Symbol("minutes"),HOURS:Symbol("hours"),DAYS:Symbol("days")});var n=function n(i,r){var a="";switch(r){case e.SECONDS:a=t.getPlural(i,"second","seconds");break;case e.MINUTES:a=t.getPlural(i,"minute","minutes");break;case e.HOURS:a=t.getPlural(i,"hour","hours");break;case e.DAYS:a=t.getPlural(i,"day","days");break;default:break}return i+" "+a};var i=function t(i){i=Math.round(i);var r=void 0;if(i<60){return n(i,e.SECONDS)}var a=i%60;i=Math.floor(i/60);if(i<60){r=n(i,e.MINUTES);if(a>0){r+=" "+n(a,e.SECONDS)}return r}a=i%60;i=Math.floor(i/60);if(i<24){r=n(i,e.HOURS);if(a>0){r+=" "+n(a,e.MINUTES)}return r}a=i%24;i=Math.floor(i/24);r=n(i,e.DAYS);if(a>0){r+=" "+n(a,e.HOURS)}return r};return i};a.Duration.$inject=["gettextCatalog"];a.filter("ngeoDuration",a.Duration);var o=function t(){return function(t){if(t){return t.replace(/<!\[CDATA\[(.*)\]\]>/,"$1")}}};a.filter("removeCDATA",o);e["a"]=a},function(t,e,n){"use strict";n.d(e,"a",function(){return i});function i(t){return t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}},function(t,e,n){"use strict";var i=n(1);var r=n(149);var a=n(47);var o=n(70);var s=n(43);var l=n(16);var u=n(275);var c=function t(e){this.checksums_=null;this.canvas_=null;this.hitDetectionCanvas_=null;this.fill_=e.fill!==undefined?e.fill:null;this.origin_=[0,0];this.points_=e.points;this.radius_=e.radius!==undefined?e.radius:e.radius1;this.radius2_=e.radius2;this.angle_=e.angle!==undefined?e.angle:0;this.stroke_=e.stroke!==undefined?e.stroke:null;this.anchor_=null;this.size_=null;this.imageSize_=null;this.hitDetectionImageSize_=null;this.atlasManager_=e.atlasManager;this.render_(this.atlasManager_);var n=e.snapToPixel!==undefined?e.snapToPixel:true;var i=e.rotateWithView!==undefined?e.rotateWithView:false;u["a"].call(this,{opacity:1,rotateWithView:i,rotation:e.rotation!==undefined?e.rotation:0,scale:1,snapToPixel:n})};Object(i["d"])(c,u["a"]);c.prototype.clone=function(){var t=new c({fill:this.getFill()?this.getFill().clone():undefined,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),snapToPixel:this.getSnapToPixel(),stroke:this.getStroke()?this.getStroke().clone():undefined,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});t.setOpacity(this.getOpacity());t.setScale(this.getScale());return t};c.prototype.getAnchor=function(){return this.anchor_};c.prototype.getAngle=function(){return this.angle_};c.prototype.getFill=function(){return this.fill_};c.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_};c.prototype.getImage=function(t){return this.canvas_};c.prototype.getImageSize=function(){return this.imageSize_};c.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_};c.prototype.getImageState=function(){return s["a"].LOADED};c.prototype.getOrigin=function(){return this.origin_};c.prototype.getPoints=function(){return this.points_};c.prototype.getRadius=function(){return this.radius_};c.prototype.getRadius2=function(){return this.radius2_};c.prototype.getSize=function(){return this.size_};c.prototype.getStroke=function(){return this.stroke_};c.prototype.listenImageChange=function(t,e){};c.prototype.load=function(){};c.prototype.unlistenImageChange=function(t,e){};c.prototype.render_=function(t){var e=void 0;var n="";var i="";var s=0;var u=null;var c=0;var f=void 0;var h=0;if(this.stroke_){f=this.stroke_.getColor();if(f===null){f=l["k"]}f=Object(r["a"])(f);h=this.stroke_.getWidth();if(h===undefined){h=l["h"]}u=this.stroke_.getLineDash();c=this.stroke_.getLineDashOffset();if(!o["a"]){u=null;c=0}i=this.stroke_.getLineJoin();if(i===undefined){i=l["g"]}n=this.stroke_.getLineCap();if(n===undefined){n=l["d"]}s=this.stroke_.getMiterLimit();if(s===undefined){s=l["i"]}}var d=2*(this.radius_+h)+1;var p={strokeStyle:f,strokeWidth:h,size:d,lineCap:n,lineDash:u,lineDashOffset:c,lineJoin:i,miterLimit:s};if(t===undefined){var v=Object(a["a"])(d,d);this.canvas_=v.canvas;d=this.canvas_.width;e=d;this.draw_(p,v,0,0);this.createHitDetectionCanvas_(p)}else{d=Math.round(d);var g=!this.fill_;var m=void 0;if(g){m=this.drawHitDetectionCanvas_.bind(this,p)}var _=this.getChecksum();var y=t.add(_,d,d,this.draw_.bind(this,p),m);this.canvas_=y.image;this.origin_=[y.offsetX,y.offsetY];e=y.image.width;if(g){this.hitDetectionCanvas_=y.hitImage;this.hitDetectionImageSize_=[y.hitImage.width,y.hitImage.height]}else{this.hitDetectionCanvas_=this.canvas_;this.hitDetectionImageSize_=[e,e]}}this.anchor_=[d/2,d/2];this.size_=[d,d];this.imageSize_=[e,e]};c.prototype.draw_=function(t,e,n,i){var a=void 0,o=void 0,s=void 0;e.setTransform(1,0,0,1,0,0);e.translate(n,i);e.beginPath();var u=this.points_;if(u===Infinity){e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,true)}else{var c=this.radius2_!==undefined?this.radius2_:this.radius_;if(c!==this.radius_){u=2*u}for(a=0;a<=u;a++){o=a*2*Math.PI/u-Math.PI/2+this.angle_;s=a%2===0?this.radius_:c;e.lineTo(t.size/2+s*Math.cos(o),t.size/2+s*Math.sin(o))}}if(this.fill_){var f=this.fill_.getColor();if(f===null){f=l["b"]}e.fillStyle=Object(r["a"])(f);e.fill()}if(this.stroke_){e.strokeStyle=t.strokeStyle;e.lineWidth=t.strokeWidth;if(t.lineDash){e.setLineDash(t.lineDash);e.lineDashOffset=t.lineDashOffset}e.lineCap=t.lineCap;e.lineJoin=t.lineJoin;e.miterLimit=t.miterLimit;e.stroke()}e.closePath()};c.prototype.createHitDetectionCanvas_=function(t){this.hitDetectionImageSize_=[t.size,t.size];if(this.fill_){this.hitDetectionCanvas_=this.canvas_;return}var e=Object(a["a"])(t.size,t.size);this.hitDetectionCanvas_=e.canvas;this.drawHitDetectionCanvas_(t,e,0,0)};c.prototype.drawHitDetectionCanvas_=function(t,e,n,i){e.setTransform(1,0,0,1,0,0);e.translate(n,i);e.beginPath();var r=this.points_;if(r===Infinity){e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,true)}else{var a=this.radius2_!==undefined?this.radius2_:this.radius_;if(a!==this.radius_){r=2*r}var o=void 0,s=void 0,u=void 0;for(o=0;o<=r;o++){u=o*2*Math.PI/r-Math.PI/2+this.angle_;s=o%2===0?this.radius_:a;e.lineTo(t.size/2+s*Math.cos(u),t.size/2+s*Math.sin(u))}}e.fillStyle=l["b"];e.fill();if(this.stroke_){e.strokeStyle=t.strokeStyle;e.lineWidth=t.strokeWidth;if(t.lineDash){e.setLineDash(t.lineDash);e.lineDashOffset=t.lineDashOffset}e.stroke()}e.closePath()};c.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-";var e=this.fill_?this.fill_.getChecksum():"-";var n=!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6];if(n){var i="r"+t+e+(this.radius_!==undefined?this.radius_.toString():"-")+(this.radius2_!==undefined?this.radius2_.toString():"-")+(this.angle_!==undefined?this.angle_.toString():"-")+(this.points_!==undefined?this.points_.toString():"-");this.checksums_=[i,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]};e["a"]=c},function(t,e,n){"use strict";n.d(e,"a",function(){return i});n.d(e,"d",function(){return r});n.d(e,"c",function(){return a});n.d(e,"b",function(){return o});n.d(e,"e",function(){return s});n.d(e,"f",function(){return u});function i(t,e,n,i){if(i!==undefined){i[0]=t;i[1]=e;i[2]=n;return i}else{return[t,e,n]}}function r(t,e,n){return t+"/"+e+"/"+n}function a(t){return r(t[0],t[1],t[2])}function o(t){return t.split("/").map(Number)}function s(t){return(t[1]<<t[0])+t[2]}function l(t){var e=t[0];var n=new Array(e);var i=1<<e-1;var r=void 0,a=void 0;for(r=0;r<e;++r){a=48;if(t[1]&i){a+=1}if(t[2]&i){a+=2}n[r]=String.fromCharCode(a);i>>=1}return n.join("")}function u(t,e){var n=t[0];var i=t[1];var r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom()){return false}var a=e.getExtent();var o=void 0;if(!a){o=e.getFullTileRange(n)}else{o=e.getTileRangeForExtentAndZ(a,n)}if(!o){return true}else{return o.containsXY(i,r)}}},function(t,e,n){"use strict";var i=n(2);var r=n(101);var a=n(1);var o=n(3);var s=n(93);var l=n(86);var u=function t(e,n,u){var c=this;var f=u["ngeoLayertreeNotroot"]===undefined;this.isRoot=f;var h=u["ngeoLayertree"];this.rootScope_=n;this.properties={};this.state_="off";this.node;if(f){e.$watch(h,function(t,e){c.node=t})}else{this.node=e.$eval(h);i["a"].assert(this.node!==undefined)}var d=u["ngeoLayertreeMap"];var p=e.$eval(d);i["a"].assert(p!==undefined);this.parent=e.$parent["layertreeCtrl"];this.children=[];if(this.parent){this.parent.children.push(this)}e.$on("$destroy",function(){if(c.parent){var t=c.parent.children.indexOf(c);i["a"].assert(t>=0);c.parent.children.splice(t,1)}});this.uid=a["c"](this);this.depth=f?0:this.parent.depth+1;e["uid"]=this.uid;e["depth"]=this.depth;this.map=p;var v=u["ngeoLayertreeNodelayer"];if(v===undefined){var g=u["ngeoLayertreeNodelayerexpr"];var m=e.$eval(g);i["a"].assertString(m);v=m}i["a"].assert(v!==undefined);this.nodelayerExpr=v;this.layer=null;if(!f){var _=e.$eval(v,{treeCtrl:this})||null;if(_){i["a"].assert(_ instanceof l["a"]||_ instanceof s["a"]);this.layer=_}}this.dataSource_=null;if(this.layer){r["a"].layerLoading(this.layer,e);r["a"].layer(this.layer);o["a"](this.layer,"change:opacity",function(){c.rootScope_.$broadcast("ngeo-layertree-opacity",c)})}var y=u["ngeoLayertreeListeners"];if(y===undefined){var b=u["ngeoLayertreeListenersexpr"];y=e.$eval(b)}if(y!==undefined){i["a"].assertString(y)}this.listenersExpr=y;if(y){e.$eval(y,{treeScope:e,treeCtrl:this})}e["layertreeCtrl"]=this};u.$inject=["$scope","$rootScope","$attrs"];u.$inject=["$scope","$rootScope","$attrs"];u.prototype.getState=function(){return this.state_};u.prototype.setState=function(t,e){var n=this;if(t===this.state_){return}this.setStateInternal_(t);if(this.parent){this.parent.refreshState()}var i=this.isRoot?this.children:[u.getFirstParentTree(this)];if(e===undefined||e){i.forEach(function(t){n.rootScope_.$broadcast("ngeo-layertree-state",n,t)})}};u.prototype.setStateInternal_=function(t){var e=this;this.state_=t==="on"?"on":"off";this.children.forEach(function(t){t.setStateInternal_(e.state_)})};u.prototype.refreshState=function(){var t=this.getCalculateState();if(this.state_===t){return}this.state_=t;if(this.parent){this.parent.refreshState()}};u.prototype.getCalculateState=function(){if(this.node.children===undefined){return this.state_}var t=void 0;var e=void 0;this.children.some(function(n){t=n.getCalculateState();if(e){if(e!==t){return t="indeterminate"}}e=t});return t};u.prototype.getSetActive=function(t){var e=this.layer;var n=this.map;if(!e){return}if(t!==undefined){if(!t){n.removeLayer(e)}else{n.addLayer(e)}}else{return n.getLayers().getArray().indexOf(e)>=0}};u.prototype.getDataSource=function(){return this.dataSource_};u.prototype.setDataSource=function(t){this.dataSource_=t};u.getFirstParentTree=function(t){var e=t;while(!e.parent.isRoot){e=e.parent}return e};u.VisitorDecision={STOP:"STOP",SKIP:"SKIP",DESCEND:"DESCEND"};u.Visitor;u.prototype.traverseDepthFirst=function(t){var e=t(this)||u.VisitorDecision.DESCEND;switch(e){case u.VisitorDecision.STOP:return true;case u.VisitorDecision.SKIP:return false;case u.VisitorDecision.DESCEND:for(var n=0;n<this.children.length;++n){var r=this.children[n];var a=r.traverseDepthFirst(t);if(a){return true}}return false;default:i["a"].fail("Unhandled case")}};u.module=angular.module("ngeoLayertreeController",[]);u.module.controller("ngeoLayertreeController",u);e["a"]=u},function(t,e,n){"use strict";var i=n(1);var r=n(289);var a=function t(e,n,i,a,o){r["a"].call(this,e,n,i.originalEvent,a,o);this.pointerEvent=i};Object(i["d"])(a,r["a"]);e["a"]=a},function(t,e,n){"use strict";n.d(e,"b",function(){return i});n.d(e,"a",function(){return r});var i=.5;var r=true},function(t,e,n){"use strict";e["a"]={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},function(t,e,n){"use strict";n.d(e,"a",function(){return h});n.d(e,"d",function(){return d});n.d(e,"c",function(){return p});n.d(e,"b",function(){return v});var i=n(102);var r=n(26);var a=n(44);var o=n(76);var s=n(6);var l=n(51);var u=n(18);var c=n(17);var f=n(41);Object(r["a"])("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t});Object(r["a"])(0,["YY",2],0,function(){return this.year()%100});Object(r["a"])(0,["YYYY",4],0,"year");Object(r["a"])(0,["YYYYY",5],0,"year");Object(r["a"])(0,["YYYYYY",6,true],0,"year");Object(a["a"])("year","y");Object(o["a"])("year",1);Object(s["a"])("Y",s["p"]);Object(s["a"])("YY",s["d"],s["h"]);Object(s["a"])("YYYY",s["f"],s["k"]);Object(s["a"])("YYYYY",s["g"],s["m"]);Object(s["a"])("YYYYYY",s["g"],s["m"]);Object(l["a"])(["YYYYY","YYYYYY"],c["i"]);Object(l["a"])("YYYY",function(t,e){e[c["i"]]=t.length===2?u["a"].parseTwoDigitYear(t):Object(f["a"])(t)});Object(l["a"])("YY",function(t,e){e[c["i"]]=u["a"].parseTwoDigitYear(t)});Object(l["a"])("Y",function(t,e){e[c["i"]]=parseInt(t,10)});function h(t){return d(t)?366:365}function d(t){return t%4===0&&t%100!==0||t%400===0}u["a"].parseTwoDigitYear=function(t){return Object(f["a"])(t)+(Object(f["a"])(t)>68?1900:2e3)};var p=Object(i["b"])("FullYear",true);function v(){return d(this.year())}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});function i(t,e){var n=[];Object.keys(e).forEach(function(t){if(e[t]!==null&&e[t]!==undefined){n.push(t+"="+encodeURIComponent(e[t]))}});var i=n.join("&");t=t.replace(/[?&]$/,"");t=t.indexOf("?")===-1?t+"?":t+"&";return t+i}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});function i(t){if(t<0){return Math.ceil(t)||0}else{return Math.floor(t)}}},function(t,e,n){"use strict";e["a"]={FRACTION:"fraction",PIXELS:"pixels"}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});n.d(e,"b",function(){return r});n.d(e,"c",function(){return a});n.d(e,"d",function(){return o});function i(t,e,n,i){for(var r=0,a=n.length;r<a;++r){t[e++]=n[r]}return e}function r(t,e,n,i){for(var r=0,a=n.length;r<a;++r){var o=n[r];for(var s=0;s<i;++s){t[e++]=o[s]}}return e}function a(t,e,n,i,a){var o=a?a:[];var s=0;for(var l=0,u=n.length;l<u;++l){var c=r(t,e,n[l],i);o[s++]=c;e=c}o.length=s;return o}function o(t,e,n,i,r){var o=r?r:[];var s=0;for(var l=0,u=n.length;l<u;++l){var c=a(t,e,n[l],i,o[s]);o[s++]=c;e=c[c.length-1]}o.length=s;return o}},function(t,e,n){"use strict";var i=n(2);var r=n(201);var a=n(19);var o=n(3);var s=n(46);var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var c=function(){function t(){u(this,t);this.collection_=new a["b"];this.map_=null;this.listenerKeys_=[];o["a"](this.collection_,"add",this.handleDataSourcesAdd_,this)}t.prototype.bindMap_=function t(e){var n=e.getView();this.listenerKeys_.push(o["a"](n,"change:resolution",this.handleViewResolutionChange_,this));var r=n.getResolution();i["a"].assertNumber(r);this.syncDataSourcesToResolution_(r)};t.prototype.unbindMap_=function t(e){this.listenerKeys_.forEach(o["e"]);this.listenerKeys_=[]};t.prototype.handleViewResolutionChange_=function t(e){var n=e.target;i["a"].assertInstanceof(n,s["a"]);var r=n.getResolution();i["a"].assertNumber(r);this.syncDataSourcesToResolution_(r)};t.prototype.syncDataSourcesToResolution_=function t(e){var n=this;this.collection_.forEach(function(t){n.syncDataSourceToResolution_(t,e)})};t.prototype.syncDataSourceToResolution_=function t(e,n){if(!e.supportsDynamicInRange){return}var i=e.maxResolution;var r=e.minResolution;var a=r===null||r===undefined||n>=r;var o=i===null||i===undefined||n<=i;var s=a&&o;e.inRange=s};t.prototype.handleDataSourcesAdd_=function t(e){var n=i["a"].assertInstanceof(e.element,r["a"]);if(this.map_){var a=this.map_.getView().getResolution();i["a"].assertNumber(a);this.syncDataSourceToResolution_(n,a)}};l(t,[{key:"map",set:function t(e){if(this.map_===e){return}if(this.map_){this.unbindMap_(this.map_)}this.map_=e;if(e){this.bindMap_(e)}}},{key:"collection",get:function t(){return this.collection_}}]);return t}();c.module=angular.module("ngeoDataSources",[]);c.module.service("ngeoDataSources",c);e["a"]=c},function(t,e,n){"use strict";var i=n(1);var r=n(27);var a=n(14);var o=n(77);var s=n(170);var l=function t(){o["a"].call(this)};Object(i["d"])(l,o["a"]);function u(t){if(typeof t==="string"){var e=JSON.parse(t);return e?e:null}else if(t!==null){return t}else{return null}}l.prototype.getType=function(){return s["a"].JSON};l.prototype.readFeature=function(t,e){return this.readFeatureFromObject(u(t),this.getReadOptions(t,e))};l.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(u(t),this.getReadOptions(t,e))};l.prototype.readFeatureFromObject=function(t,e){};l.prototype.readFeaturesFromObject=function(t,e){};l.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(u(t),this.getReadOptions(t,e))};l.prototype.readGeometryFromObject=function(t,e){};l.prototype.readProjection=function(t){return this.readProjectionFromObject(u(t))};l.prototype.readProjectionFromObject=function(t){};l.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))};l.prototype.writeFeatureObject=function(t,e){};l.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))};l.prototype.writeFeaturesObject=function(t,e){};l.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))};l.prototype.writeGeometryObject=function(t,e){};var c=l;var f=n(156);var h=n(36);var d=n(88);var p=n(83);var v=n(89);var g=n(21);var m=n(32);var _=n(9);var y=n(10);var b=function t(e){var n=e?e:{};c.call(this);this.defaultDataProjection=Object(y["h"])(n.defaultDataProjection?n.defaultDataProjection:"EPSG:4326");if(n.featureProjection){this.defaultFeatureProjection=Object(y["h"])(n.featureProjection)}this.geometryName_=n.geometryName;this.extractGeometryName_=n.extractGeometryName};Object(i["d"])(b,c);var w={Point:E,LineString:O,Polygon:R,MultiPoint:M,MultiLineString:T,MultiPolygon:I,GeometryCollection:C};var x={Point:F,LineString:P,Polygon:$,MultiPoint:j,MultiLineString:D,MultiPolygon:k,GeometryCollection:L,Circle:A};function S(t,e){if(!t){return null}var n=w[t.type];return Object(o["b"])(n(t),false,e)}function C(t,e){var n=t.geometries.map(function(t){return S(t,e)});return new f["a"](n)}function E(t){return new g["a"](t.coordinates)}function O(t){return new h["a"](t.coordinates)}function T(t){return new d["a"](t.coordinates)}function M(t){return new p["a"](t.coordinates)}function I(t){return new v["a"](t.coordinates)}function R(t){return new m["a"](t.coordinates)}function N(t,e){var n=x[t.getType()];return n(Object(o["b"])(t,true,e),e)}function A(t){return{type:"GeometryCollection",geometries:[]}}function L(t,e){var n=t.getGeometriesArray().map(function(t){var n=Object(_["a"])({},e);delete n.featureProjection;return N(t,n)});return{type:"GeometryCollection",geometries:n}}function P(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function D(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function j(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function k(t,e){var n=void 0;if(e){n=e.rightHanded}return{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}function F(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function $(t,e){var n=void 0;if(e){n=e.rightHanded}return{type:"Polygon",coordinates:t.getCoordinates(n)}}b.prototype.readFeature;b.prototype.readFeatures;b.prototype.readFeatureFromObject=function(t,e){var n=null;if(t.type==="Feature"){n=t}else{n={type:"Feature",geometry:t}}var i=S(n.geometry,e);var r=new a["a"];if(this.geometryName_){r.setGeometryName(this.geometryName_)}else if(this.extractGeometryName_&&n.geometry_name!==undefined){r.setGeometryName(n.geometry_name)}r.setGeometry(i);if(n.id!==undefined){r.setId(n.id)}if(n.properties){r.setProperties(n.properties)}return r};b.prototype.readFeaturesFromObject=function(t,e){var n=t;var i=null;if(n.type==="FeatureCollection"){var r=t;i=[];var a=r.features;for(var o=0,s=a.length;o<s;++o){i.push(this.readFeatureFromObject(a[o],e))}}else{i=[this.readFeatureFromObject(t,e)]}return i};b.prototype.readGeometry;b.prototype.readGeometryFromObject=function(t,e){return S(t,e)};b.prototype.readProjection;b.prototype.readProjectionFromObject=function(t){var e=t;var n=e.crs;var i=void 0;if(n){if(n.type=="name"){i=Object(y["h"])(n.properties.name)}else{Object(r["a"])(false,36)}}else{i=this.defaultDataProjection}return i};b.prototype.writeFeature;b.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var n={type:"Feature"};var i=t.getId();if(i!==undefined){n.id=i}var r=t.getGeometry();if(r){n.geometry=N(r,e)}else{n.geometry=null}var a=t.getProperties();delete a[t.getGeometryName()];if(!Object(_["d"])(a)){n.properties=a}else{n.properties=null}return n};b.prototype.writeFeatures;b.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);var n=[];for(var i=0,r=t.length;i<r;++i){n.push(this.writeFeatureObject(t[i],e))}return{type:"FeatureCollection",features:n}};b.prototype.writeGeometry;b.prototype.writeGeometryObject=function(t,e){return N(t,this.adaptOptions(e))};var G=e["a"]=b},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(254);function r(t,e,n,r){return Object(i["a"])(t,e,n,r,true).utc()}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});n.d(e,"b",function(){return r});n.d(e,"c",function(){return a});function i(t,e,n,i,r){var a=r!==undefined?r:[];var o=0;for(var s=e;s<n;s+=i){a[o++]=t.slice(s,s+i)}a.length=o;return a}function r(t,e,n,r,a){var o=a!==undefined?a:[];var s=0;for(var l=0,u=n.length;l<u;++l){var c=n[l];o[s++]=i(t,e,c,r,o[s]);e=c}o.length=s;return o}function a(t,e,n,i,a){var o=a!==undefined?a:[];var s=0;for(var l=0,u=n.length;l<u;++l){var c=n[l];o[s++]=r(t,e,c,i,o[s]);e=c[c.length-1]}o.length=s;return o}},function(t,e,n){"use strict";e["a"]={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"}},function(t,e,n){"use strict";var i=n(33);var r=n(358);var a="#333";var o=function t(e){var n=e||{};this.font_=n.font;this.rotation_=n.rotation;this.rotateWithView_=n.rotateWithView;this.scale_=n.scale;this.text_=n.text;this.textAlign_=n.textAlign;this.textBaseline_=n.textBaseline;this.fill_=n.fill!==undefined?n.fill:new i["a"]({color:a});this.maxAngle_=n.maxAngle!==undefined?n.maxAngle:Math.PI/4;this.placement_=n.placement!==undefined?n.placement:r["a"].POINT;this.overflow_=!!n.overflow;this.stroke_=n.stroke!==undefined?n.stroke:null;this.offsetX_=n.offsetX!==undefined?n.offsetX:0;this.offsetY_=n.offsetY!==undefined?n.offsetY:0;this.backgroundFill_=n.backgroundFill?n.backgroundFill:null;this.backgroundStroke_=n.backgroundStroke?n.backgroundStroke:null;this.padding_=n.padding===undefined?null:n.padding};o.prototype.clone=function(){return new o({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():undefined,stroke:this.getStroke()?this.getStroke().clone():undefined,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():undefined,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():undefined})};o.prototype.getOverflow=function(){return this.overflow_};o.prototype.getFont=function(){return this.font_};o.prototype.getMaxAngle=function(){return this.maxAngle_};o.prototype.getPlacement=function(){return this.placement_};o.prototype.getOffsetX=function(){return this.offsetX_};o.prototype.getOffsetY=function(){return this.offsetY_};o.prototype.getFill=function(){return this.fill_};o.prototype.getRotateWithView=function(){return this.rotateWithView_};o.prototype.getRotation=function(){return this.rotation_};o.prototype.getScale=function(){return this.scale_};o.prototype.getStroke=function(){return this.stroke_};o.prototype.getText=function(){return this.text_};o.prototype.getTextAlign=function(){return this.textAlign_};o.prototype.getTextBaseline=function(){return this.textBaseline_};o.prototype.getBackgroundFill=function(){return this.backgroundFill_};o.prototype.getBackgroundStroke=function(){return this.backgroundStroke_};o.prototype.getPadding=function(){return this.padding_};o.prototype.setOverflow=function(t){this.overflow_=t};o.prototype.setFont=function(t){this.font_=t};o.prototype.setMaxAngle=function(t){this.maxAngle_=t};o.prototype.setOffsetX=function(t){this.offsetX_=t};o.prototype.setOffsetY=function(t){this.offsetY_=t};o.prototype.setPlacement=function(t){this.placement_=t};o.prototype.setFill=function(t){this.fill_=t};o.prototype.setRotation=function(t){this.rotation_=t};o.prototype.setScale=function(t){this.scale_=t};o.prototype.setStroke=function(t){this.stroke_=t};o.prototype.setText=function(t){this.text_=t};o.prototype.setTextAlign=function(t){this.textAlign_=t};o.prototype.setTextBaseline=function(t){this.textBaseline_=t};o.prototype.setBackgroundFill=function(t){this.backgroundFill_=t};o.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t};o.prototype.setPadding=function(t){this.padding_=t};e["a"]=o},function(t,e,n){"use strict";n.d(e,"a",function(){return i});function i(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}},function(t,e,n){"use strict";n.d(e,"b",function(){return i});n.d(e,"a",function(){return r});function i(t,e,n){var i=n!==undefined?t.toFixed(n):""+t;var r=i.indexOf(".");r=r===-1?i.length:r;return r>e?i:new Array(1+e-r).join("0")+i}function r(t,e){var n=(""+t).split(".");var i=(""+e).split(".");for(var r=0;r<Math.max(n.length,i.length);r++){var a=parseInt(n[r]||"0",10);var o=parseInt(i[r]||"0",10);if(a>o){return 1}if(o>a){return-1}}return 0}},function(t,e,n){"use strict";var i=n(0);var r=function t(){};r.prototype.read=function(t){if(Object(i["g"])(t)){return this.readFromDocument(t)}else if(Object(i["h"])(t)){return this.readFromNode(t)}else if(typeof t==="string"){var e=Object(i["s"])(t);return this.readFromDocument(e)}else{return null}};r.prototype.readFromDocument=function(t){};r.prototype.readFromNode=function(t){};e["a"]=r},function(t,e,n){"use strict";var i=n(1);var r=n(7);var a=n(77);var o=n(170);var s=n(0);var l=function t(){this.xmlSerializer_=new XMLSerializer;a["a"].call(this)};Object(i["d"])(l,a["a"]);l.prototype.getType=function(){return o["a"].XML};l.prototype.readFeature=function(t,e){if(Object(s["g"])(t)){return this.readFeatureFromDocument(t,e)}else if(Object(s["h"])(t)){return this.readFeatureFromNode(t,e)}else if(typeof t==="string"){var n=Object(s["s"])(t);return this.readFeatureFromDocument(n,e)}else{return null}};l.prototype.readFeatureFromDocument=function(t,e){var n=this.readFeaturesFromDocument(t,e);if(n.length>0){return n[0]}else{return null}};l.prototype.readFeatureFromNode=function(t,e){return null};l.prototype.readFeatures=function(t,e){if(Object(s["g"])(t)){return this.readFeaturesFromDocument(t,e)}else if(Object(s["h"])(t)){return this.readFeaturesFromNode(t,e)}else if(typeof t==="string"){var n=Object(s["s"])(t);return this.readFeaturesFromDocument(n,e)}else{return[]}};l.prototype.readFeaturesFromDocument=function(t,e){var n=[];for(var i=t.firstChild;i;i=i.nextSibling){if(i.nodeType==Node.ELEMENT_NODE){Object(r["c"])(n,this.readFeaturesFromNode(i,e))}}return n};l.prototype.readFeaturesFromNode=function(t,e){};l.prototype.readGeometry=function(t,e){if(Object(s["g"])(t)){return this.readGeometryFromDocument(t,e)}else if(Object(s["h"])(t)){return this.readGeometryFromNode(t,e)}else if(typeof t==="string"){var n=Object(s["s"])(t);return this.readGeometryFromDocument(n,e)}else{return null}};l.prototype.readGeometryFromDocument=function(t,e){return null};l.prototype.readGeometryFromNode=function(t,e){return null};l.prototype.readProjection=function(t){if(Object(s["g"])(t)){return this.readProjectionFromDocument(t)}else if(Object(s["h"])(t)){return this.readProjectionFromNode(t)}else if(typeof t==="string"){var e=Object(s["s"])(t);return this.readProjectionFromDocument(e)}else{return null}};l.prototype.readProjectionFromDocument=function(t){return this.defaultDataProjection};l.prototype.readProjectionFromNode=function(t){return this.defaultDataProjection};l.prototype.writeFeature=function(t,e){var n=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(n)};l.prototype.writeFeatureNode=function(t,e){return null};l.prototype.writeFeatures=function(t,e){var n=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(n)};l.prototype.writeFeaturesNode=function(t,e){return null};l.prototype.writeGeometry=function(t,e){var n=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(n)};l.prototype.writeGeometryNode=function(t,e){return null};e["a"]=l},function(t,e,n){"use strict";n.d(e,"e",function(){return a});n.d(e,"a",function(){return o});n.d(e,"f",function(){return s});n.d(e,"d",function(){return l});n.d(e,"b",function(){return u});n.d(e,"c",function(){return c});var i=n(15);function r(t,e,n,r,a,o,s){var l=t[e];var u=t[e+1];var c=t[n]-l;var f=t[n+1]-u;var h=void 0;if(c===0&&f===0){h=e}else{var d=((a-l)*c+(o-u)*f)/(c*c+f*f);if(d>1){h=n}else if(d>0){for(var p=0;p<r;++p){s[p]=Object(i["c"])(t[e+p],t[n+p],d)}s.length=r;return}else{h=e}}for(var v=0;v<r;++v){s[v]=t[h+v]}s.length=r}function a(t,e,n,r,a){var o=t[e];var s=t[e+1];for(e+=r;e<n;e+=r){var l=t[e];var u=t[e+1];var c=Object(i["f"])(o,s,l,u);if(c>a){a=c}o=l;s=u}return a}function o(t,e,n,i,r){for(var o=0,s=n.length;o<s;++o){var l=n[o];r=a(t,e,l,i,r);e=l}return r}function s(t,e,n,i,r){for(var a=0,s=n.length;a<s;++a){var l=n[a];r=o(t,e,l,i,r);e=l[l.length-1]}return r}function l(t,e,n,a,o,s,l,u,c,f,h){if(e==n){return f}var d=void 0,p=void 0;if(o===0){p=Object(i["f"])(l,u,t[e],t[e+1]);if(p<f){for(d=0;d<a;++d){c[d]=t[e+d]}c.length=a;return p}else{return f}}var v=h?h:[NaN,NaN];var g=e+a;while(g<n){r(t,g-a,g,a,l,u,v);p=Object(i["f"])(l,u,v[0],v[1]);if(p<f){f=p;for(d=0;d<a;++d){c[d]=v[d]}c.length=a;g+=a}else{g+=a*Math.max((Math.sqrt(p)-Math.sqrt(f))/o|0,1)}}if(s){r(t,n-a,e,a,l,u,v);p=Object(i["f"])(l,u,v[0],v[1]);if(p<f){f=p;for(d=0;d<a;++d){c[d]=v[d]}c.length=a}}return f}function u(t,e,n,i,r,a,o,s,u,c,f){var h=f?f:[NaN,NaN];for(var d=0,p=n.length;d<p;++d){var v=n[d];c=l(t,e,v,i,r,a,o,s,u,c,h);e=v}return c}function c(t,e,n,i,r,a,o,s,l,c,f){var h=f?f:[NaN,NaN];for(var d=0,p=n.length;d<p;++d){var v=n[d];c=u(t,e,v,i,r,a,o,s,l,c,h);e=v[v.length-1]}return c}},function(t,e,n){"use strict";n.d(e,"c",function(){return i});n.d(e,"a",function(){return r});n.d(e,"b",function(){return a});n.d(e,"d",function(){return o});function i(t,e,n,i,r,a){var o=a?a:[];var s=0;for(var l=e;l<n;l+=i){var u=t[l];var c=t[l+1];o[s++]=r[0]*u+r[2]*c+r[4];o[s++]=r[1]*u+r[3]*c+r[5]}if(a&&o.length!=s){o.length=s}return o}function r(t,e,n,i,r,a,o){var s=o?o:[];var l=Math.cos(r);var u=Math.sin(r);var c=a[0];var f=a[1];var h=0;for(var d=e;d<n;d+=i){var p=t[d]-c;var v=t[d+1]-f;s[h++]=c+p*l-v*u;s[h++]=f+p*u+v*l;for(var g=d+2;g<d+i;++g){s[h++]=t[g]}}if(o&&s.length!=h){s.length=h}return s}function a(t,e,n,i,r,a,o,s){var l=s?s:[];var u=o[0];var c=o[1];var f=0;for(var h=e;h<n;h+=i){var d=t[h]-u;var p=t[h+1]-c;l[f++]=u+r*d;l[f++]=c+a*p;for(var v=h+2;v<h+i;++v){l[f++]=t[v]}}if(s&&l.length!=f){l.length=f}return l}function o(t,e,n,i,r,a,o){var s=o?o:[];var l=0;for(var u=e;u<n;u+=i){s[l++]=t[u]+r;s[l++]=t[u+1]+a;for(var c=u+2;c<u+i;++c){s[l++]=t[c]}}if(o&&s.length!=l){s.length=l}return s}},function(t,e,n){"use strict";var i=n(2);var r=n(211);var a=n(135);var o=n(210);var s=n(9);function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var u=function(){t.$inject=["$injector","ngeoDataSources","ngeoDataSourcesHelper","ngeoQuerent","ngeoQueryResult"];function t(e,n,i,r,a){l(this,t);var o=e.has("ngeoQueryOptions")?e.get("ngeoQueryOptions"):{};this.dataSources_=n.collection;this.ngeoDataSourcesHelper_=i;this.ngeoQuerent_=r;this.result_=a;this.limit_=o.limit!==undefined?o.limit:50;this.queryCountFirst_=o.queryCountFirst!==undefined?o.queryCountFirst:false;this.tolerancePx_=o.tolerance!==undefined?o.tolerance:3;this.bboxAsGETParam_=o.bboxAsGETParam||false;this.dataSourceNames_={}}t.prototype.issue=function t(e){this.clear();var n=void 0;if(e.dataSources===undefined&&e.queryableDataSources===undefined){n=this.ngeoQuerent_.getQueryableDataSources(this.dataSources_.getArray(),e.map)}var i=e.limit!==undefined?e.limit:this.limit_;s["a"](e,{queryableDataSources:n,limit:i,tolerancePx:this.tolerancePx_,wfsCount:this.queryCountFirst_,bboxAsGETParam:this.bboxAsGETParam_});this.result_.pending=true;this.ngeoQuerent_.issue(e).then(this.handleResult_.bind(this))};t.prototype.clear=function t(){this.result_.total=0;for(var e=this.result_.sources,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{i=e.next();if(i.done)break;r=i.value}var a=r;a.features.length=0;a.pending=false;a.queried=false;a.tooManyResults=false;a.totalFeatureCount=undefined}this.result_.sources.length=0;this.result_.pending=false};t.prototype.handleResult_=function t(e){var n=this;var r=0;var a=function t(a){var o=Number(a);var s=n.ngeoDataSourcesHelper_.getDataSource(o);var l=s.name;i["a"].assert(s);var u=e[o];var c=u.features;var f=u.limit;var h=u.tooManyFeatures===true;var d=u.totalFeatureCount;var p={};c.forEach(function(t){var e=i["a"].assertString(t.get("ngeo_feature_type_"));if(!p[e]){p[e]=[]}if(s.attributes&&s.attributes.length){var n=t.getProperties();var r={};s.attributes.forEach(function(e){if(e.alias){r[e.alias]=n[e.name];t.unset(e.name,true)}else{r[e.name]=n[e.name]}});t.setProperties(r,true)}p[e].push(t)});for(var v in p){l=v?v:l;var g=p[v];n.result_.sources.push({features:g,id:o,label:l,limit:f,pending:false,queried:true,tooManyResults:h,totalFeatureCount:d});r+=c.length}};for(var o in e){a(o)}this.result_.total=r;this.result_.pending=false};return t}();u.module=angular.module("ngeoMapQuerent",[a["a"].module.name,o["a"].module.name,r["a"].module.name]);u.module.service("ngeoMapQuerent",u);u.module.value("ngeoQueryResult",{sources:[],total:0,pending:false});e["a"]=u},function(t,e,n){"use strict";var i=n(3);var r=function t(){this.listenerKeys_={}};r.prototype.addListenerKey=function(t,e){if(!this.listenerKeys_[t]){this.initListenerKey_(t)}this.listenerKeys_[t].push(e)};r.prototype.clearListenerKey=function(t){this.initListenerKey_(t)};r.prototype.initListenerKey_=function(t){if(!this.listenerKeys_[t]){this.listenerKeys_[t]=[]}else{if(this.listenerKeys_[t].length){this.listenerKeys_[t].forEach(i["e"]);this.listenerKeys_[t].length=0}}};r.module=angular.module("ngeoEventHelper",[]);r.module.service("ngeoEventHelper",r);e["a"]=r},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(84);function r(t){if(a(t)){return t}else{return Object(i["d"])(t)}}function a(t){return typeof t==="string"||t instanceof CanvasPattern||t instanceof CanvasGradient}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});n.d(e,"b",function(){return l});n.d(e,"c",function(){return u});var i=n(130);var r=n(66);var a=n(161);function o(t,e,n){var i=7+e-n,r=(7+Object(a["b"])(t,0,i).getUTCDay()-e)%7;return-r+i-1}function s(t,e,n,r,a){var s=(7+n-r)%7,l=o(t,r,a),u=1+7*(e-1)+s+l,c,f;if(u<=0){c=t-1;f=Object(i["a"])(c)+u}else if(u>Object(i["a"])(t)){c=t+1;f=u-Object(i["a"])(t)}else{c=t;f=u}return{year:c,dayOfYear:f}}function l(t,e,n){var i=o(t.year(),e,n),r=Math.floor((t.dayOfYear()-i-1)/7)+1,a,s;if(r<1){s=t.year()-1;a=r+u(s,e,n)}else if(r>u(t.year(),e,n)){a=r-u(t.year(),e,n);s=t.year()+1}else{s=t.year();a=r}return{week:a,year:s}}function u(t,e,n){var r=o(t,e,n),a=o(t+1,e,n);return(Object(i["a"])(t)-r+a)/7}},function(t,e,n){"use strict";e["a"]={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"}},function(t,e,n){"use strict";var i=n(155);var r=n(137);var a=n(48);var o;if(Array.prototype.some){o=Array.prototype.some}else{o=function(t){var e=Object(this);var n=e.length>>>0;for(var i=0;i<n;i++){if(i in e&&t.call(this,e[i],i,e)){return true}}return false}}n.d(e,"b",function(){return s});n.d(e,"a",function(){return l});function s(t){if(t._isValid==null){var e=Object(a["a"])(t);var n=o.call(e.parsedDateParts,function(t){return t!=null});var i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict){i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(t)){t._isValid=i}else{return i}}return t._isValid}function l(t){var e=Object(r["a"])(NaN);if(t!=null){Object(i["a"])(Object(a["a"])(e),t)}else{Object(a["a"])(e).userInvalidated=true}return e}},function(t,e,n){"use strict";n.d(e,"b",function(){return rt});var i=n(1);var r=n(27);var a=n(244);var o=n(197);var s=n(67);var l=n(72);var u=n(144);var c=n(5);var f=n(81);var h=n(9);var d=n(10);var p=n(0);var v="feature";var g="http://www.w3.org/2000/xmlns/";var m="http://www.opengis.net/ogc";var _="http://www.opengis.net/wfs";var y="http://www.opengis.net/fes";var b={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"};var w="1.1.0";var x=function t(e){var n=e?e:{};this.featureType_=n.featureType;this.featureNS_=n.featureNS;this.gmlFormat_=n.gmlFormat?n.gmlFormat:new o["a"];this.schemaLocation_=n.schemaLocation?n.schemaLocation:b[w];u["a"].call(this)};Object(i["d"])(x,u["a"]);x.prototype.getFeatureType=function(){return this.featureType_};x.prototype.setFeatureType=function(t){this.featureType_=t};x.prototype.readFeatures;x.prototype.readFeaturesFromNode=function(t,e){var n={featureType:this.featureType_,featureNS:this.featureNS_};Object(h["a"])(n,this.getReadOptions(t,e?e:{}));var i=[n];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[s["a"]]["featureMember"]=Object(p["j"])(s["b"].prototype.readFeaturesInternal);var r=Object(p["u"])([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,i,this.gmlFormat_);if(!r){r=[]}return r};x.prototype.readTransactionResponse=function(t){if(Object(p["g"])(t)){return this.readTransactionResponseFromDocument(t)}else if(Object(p["h"])(t)){return this.readTransactionResponseFromNode(t)}else if(typeof t==="string"){var e=Object(p["s"])(t);return this.readTransactionResponseFromDocument(e)}else{return undefined}};x.prototype.readFeatureCollectionMetadata=function(t){if(Object(p["g"])(t)){return this.readFeatureCollectionMetadataFromDocument(t)}else if(Object(p["h"])(t)){return this.readFeatureCollectionMetadataFromNode(t)}else if(typeof t==="string"){var e=Object(p["s"])(t);return this.readFeatureCollectionMetadataFromDocument(e)}else{return undefined}};x.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling){if(e.nodeType==Node.ELEMENT_NODE){return this.readFeatureCollectionMetadataFromNode(e)}}return undefined};var S={"http://www.opengis.net/gml":{boundedBy:Object(p["n"])(s["b"].prototype.readGeometryElement,"bounds")}};x.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={};var n=Object(c["g"])(t.getAttribute("numberOfFeatures"));e["numberOfFeatures"]=n;return Object(p["u"])(e,S,t,[],this.gmlFormat_)};var C={"http://www.opengis.net/wfs":{totalInserted:Object(p["n"])(c["f"]),totalUpdated:Object(p["n"])(c["f"]),totalDeleted:Object(p["n"])(c["f"])}};function E(t,e){return Object(p["u"])({},C,t,e)}var O={"http://www.opengis.net/ogc":{FeatureId:Object(p["j"])(function(t,e){return t.getAttribute("fid")})}};function T(t,e){Object(p["t"])(O,t,e)}var M={"http://www.opengis.net/wfs":{Feature:T}};function I(t,e){return Object(p["u"])([],M,t,e)}var R={"http://www.opengis.net/wfs":{TransactionSummary:Object(p["n"])(E,"transactionSummary"),InsertResults:Object(p["n"])(I,"insertIds")}};x.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling){if(e.nodeType==Node.ELEMENT_NODE){return this.readTransactionResponseFromNode(e)}}return undefined};x.prototype.readTransactionResponseFromNode=function(t){return Object(p["u"])({},R,t,[])};var N={"http://www.opengis.net/wfs":{PropertyName:Object(p["l"])(c["n"])}};function A(t,e,n){var i=n[n.length-1];var r=i["featureType"];var s=i["featureNS"];var l=i["gmlVersion"];var u=Object(p["d"])(s,r);t.appendChild(u);if(l===2){a["a"].prototype.writeFeatureElement(u,e,n)}else{o["a"].prototype.writeFeatureElement(u,e,n)}}function L(t,e,n){var i=Object(p["d"])(m,"Filter");var r=Object(p["d"])(m,"FeatureId");i.appendChild(r);r.setAttribute("fid",e);t.appendChild(i)}function P(t,e){t=t?t:v;var n=t+":";if(e.indexOf(n)===0){return e}else{return n+e}}function D(t,e,n){var i=n[n.length-1];Object(r["a"])(e.getId()!==undefined,26);var a=i["featureType"];var o=i["featurePrefix"];var s=i["featureNS"];var l=P(o,a);t.setAttribute("typeName",l);t.setAttributeNS(g,"xmlns:"+o,s);var u=e.getId();if(u!==undefined){L(t,u,n)}}var j={"http://www.opengis.net/wfs":{Insert:Object(p["l"])(A),Update:Object(p["l"])(k),Delete:Object(p["l"])(D),Property:Object(p["l"])(F),Native:Object(p["l"])($)}};function k(t,e,n){var i=n[n.length-1];Object(r["a"])(e.getId()!==undefined,27);var a=i["featureType"];var o=i["featurePrefix"];var s=i["featureNS"];var l=P(o,a);var u=e.getGeometryName();t.setAttribute("typeName",l);t.setAttributeNS(g,"xmlns:"+o,s);var c=e.getId();if(c!==undefined){var h=e.getKeys();var d=[];for(var v=0,m=h.length;v<m;v++){var _=e.get(h[v]);if(_!==undefined){var y=h[v];if(_ instanceof f["a"]){y=u}d.push({name:y,value:_})}}Object(p["v"])({gmlVersion:i["gmlVersion"],node:t,hasZ:i["hasZ"],srsName:i["srsName"]},j,Object(p["q"])("Property"),d,n);L(t,c,n)}}function F(t,e,n){var i=Object(p["d"])(_,"Name");var r=n[n.length-1];var s=r["gmlVersion"];t.appendChild(i);Object(c["n"])(i,e.name);if(e.value!==undefined&&e.value!==null){var l=Object(p["d"])(_,"Value");t.appendChild(l);if(e.value instanceof f["a"]){if(s===2){a["a"].prototype.writeGeometryElement(l,e.value,n)}else{o["a"].prototype.writeGeometryElement(l,e.value,n)}}else{Object(c["n"])(l,e.value)}}}function $(t,e,n){if(e.vendorId){t.setAttribute("vendorId",e.vendorId)}if(e.safeToIgnore!==undefined){t.setAttribute("safeToIgnore",e.safeToIgnore)}if(e.value!==undefined){Object(c["n"])(t,e.value)}}var G={"http://www.opengis.net/wfs":{Query:Object(p["l"])(U)},"http://www.opengis.net/ogc":{During:Object(p["l"])(W),And:Object(p["l"])(q),Or:Object(p["l"])(q),Not:Object(p["l"])(X),BBOX:Object(p["l"])(V),Contains:Object(p["l"])(H),Intersects:Object(p["l"])(z),Within:Object(p["l"])(B),PropertyIsEqualTo:Object(p["l"])(K),PropertyIsNotEqualTo:Object(p["l"])(K),PropertyIsLessThan:Object(p["l"])(K),PropertyIsLessThanOrEqualTo:Object(p["l"])(K),PropertyIsGreaterThan:Object(p["l"])(K),PropertyIsGreaterThanOrEqualTo:Object(p["l"])(K),PropertyIsNull:Object(p["l"])(Z),PropertyIsBetween:Object(p["l"])(Q),PropertyIsLike:Object(p["l"])(J)}};function U(t,e,n){var i=n[n.length-1];var r=i["featurePrefix"];var a=i["featureNS"];var o=i["propertyNames"];var s=i["srsName"];var l=void 0;if(r){l=P(r,e)}else{l=e}t.setAttribute("typeName",l);if(s){t.setAttribute("srsName",s)}if(a){t.setAttributeNS(g,"xmlns:"+r,a)}var u=Object(h["a"])({},i);u.node=t;Object(p["v"])(u,N,Object(p["q"])("PropertyName"),o,n);var c=i["filter"];if(c){var f=Object(p["d"])(m,"Filter");t.appendChild(f);Y(f,c,n)}}function Y(t,e,n){var i={node:t};Object(p["v"])(i,G,Object(p["q"])(e.getTagName()),[e],n)}function V(t,e,n){var i=n[n.length-1];i["srsName"]=e.srsName;et(t,e.geometryName);o["a"].prototype.writeGeometryElement(t,e.extent,n)}function H(t,e,n){var i=n[n.length-1];i["srsName"]=e.srsName;et(t,e.geometryName);o["a"].prototype.writeGeometryElement(t,e.geometry,n)}function z(t,e,n){var i=n[n.length-1];i["srsName"]=e.srsName;et(t,e.geometryName);o["a"].prototype.writeGeometryElement(t,e.geometry,n)}function B(t,e,n){var i=n[n.length-1];i["srsName"]=e.srsName;et(t,e.geometryName);o["a"].prototype.writeGeometryElement(t,e.geometry,n)}function W(t,e,n){var i=Object(p["d"])(y,"ValueReference");Object(c["n"])(i,e.propertyName);t.appendChild(i);var r=Object(p["d"])(s["a"],"TimePeriod");t.appendChild(r);var a=Object(p["d"])(s["a"],"begin");r.appendChild(a);it(a,e.begin);var o=Object(p["d"])(s["a"],"end");r.appendChild(o);it(o,e.end)}function q(t,e,n){var i={node:t};var r=e.conditions;for(var a=0,o=r.length;a<o;++a){var s=r[a];Object(p["v"])(i,G,Object(p["q"])(s.getTagName()),[s],n)}}function X(t,e,n){var i={node:t};var r=e.condition;Object(p["v"])(i,G,Object(p["q"])(r.getTagName()),[r],n)}function K(t,e,n){if(e.matchCase!==undefined){t.setAttribute("matchCase",e.matchCase.toString())}et(t,e.propertyName);nt(t,""+e.expression)}function Z(t,e,n){et(t,e.propertyName)}function Q(t,e,n){et(t,e.propertyName);var i=Object(p["d"])(m,"LowerBoundary");t.appendChild(i);nt(i,""+e.lowerBoundary);var r=Object(p["d"])(m,"UpperBoundary");t.appendChild(r);nt(r,""+e.upperBoundary)}function J(t,e,n){t.setAttribute("wildCard",e.wildCard);t.setAttribute("singleChar",e.singleChar);t.setAttribute("escapeChar",e.escapeChar);if(e.matchCase!==undefined){t.setAttribute("matchCase",e.matchCase.toString())}et(t,e.propertyName);nt(t,""+e.pattern)}function tt(t,e,n){var i=Object(p["d"])(m,t);Object(c["n"])(i,n);e.appendChild(i)}function et(t,e){tt("PropertyName",t,e)}function nt(t,e){tt("Literal",t,e)}function it(t,e){var n=Object(p["d"])(s["a"],"TimeInstant");t.appendChild(n);var i=Object(p["d"])(s["a"],"timePosition");n.appendChild(i);Object(c["n"])(i,e)}function rt(t){var e=Object(p["d"])(m,"Filter");Y(e,t,[]);return e}function at(t,e,n){var i=n[n.length-1];var r=Object(h["a"])({},i);r.node=t;Object(p["v"])(r,G,Object(p["q"])("Query"),e,n)}x.prototype.writeGetFeature=function(t){var e=Object(p["d"])(_,"GetFeature");e.setAttribute("service","WFS");e.setAttribute("version","1.1.0");var n=void 0;if(t){if(t.handle){e.setAttribute("handle",t.handle)}if(t.outputFormat){e.setAttribute("outputFormat",t.outputFormat)}if(t.maxFeatures!==undefined){e.setAttribute("maxFeatures",t.maxFeatures)}if(t.resultType){e.setAttribute("resultType",t.resultType)}if(t.startIndex!==undefined){e.setAttribute("startIndex",t.startIndex)}if(t.count!==undefined){e.setAttribute("count",t.count)}n=t.filter;if(t.bbox){Object(r["a"])(t.geometryName,12);var i=Object(l["bbox"])(t.geometryName,t.bbox,t.srsName);if(n){n=Object(l["and"])(n,i)}else{n=i}}}e.setAttributeNS(p["c"],"xsi:schemaLocation",this.schemaLocation_);var a={node:e,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:n,propertyNames:t.propertyNames?t.propertyNames:[]};Object(r["a"])(Array.isArray(t.featureTypes),11);at(e,t.featureTypes,[a]);return e};x.prototype.writeTransaction=function(t,e,n,i){var r=[];var a=Object(p["d"])(_,"Transaction");var o=i.version?i.version:w;var s=o==="1.0.0"?2:3;a.setAttribute("service","WFS");a.setAttribute("version",o);var l=void 0;var u=void 0;if(i){l=i.gmlOptions?i.gmlOptions:{};if(i.handle){a.setAttribute("handle",i.handle)}}var c=b[o];a.setAttributeNS(p["c"],"xsi:schemaLocation",c);var f=i.featurePrefix?i.featurePrefix:v;if(t){u={node:a,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:f,gmlVersion:s,hasZ:i.hasZ,srsName:i.srsName};Object(h["a"])(u,l);Object(p["v"])(u,j,Object(p["q"])("Insert"),t,r)}if(e){u={node:a,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:f,gmlVersion:s,hasZ:i.hasZ,srsName:i.srsName};Object(h["a"])(u,l);Object(p["v"])(u,j,Object(p["q"])("Update"),e,r)}if(n){Object(p["v"])({node:a,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:f,gmlVersion:s,srsName:i.srsName},j,Object(p["q"])("Delete"),n,r)}if(i.nativeElements){Object(p["v"])({node:a,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:f,gmlVersion:s,srsName:i.srsName},j,Object(p["q"])("Native"),i.nativeElements,r)}return a};x.prototype.readProjection;x.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling){if(e.nodeType==Node.ELEMENT_NODE){return this.readProjectionFromNode(e)}}return null};x.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild){t=t.firstElementChild.firstElementChild;for(var e=t.firstElementChild;e;e=e.nextElementSibling){if(!(e.childNodes.length===0||e.childNodes.length===1&&e.firstChild.nodeType===3)){var n=[{}];this.gmlFormat_.readGeometryElement(e,n);return Object(d["h"])(n.pop().srsName)}}}return null};e["a"]=x},function(t,e,n){"use strict";var i=n(23);var r=n(2);var a=n(126);var o=n(121);var s=n(1);var l=n(103);var u=n(31);var c=function t(e,n,i,r){var a=this;this.layerHelper_=n;this.ngeoWMSTime_=i;this.ogcServersObject_;r.getOgcServersObject().then(function(t){a.ogcServersObject_=t});e.$on("ngeo-layertree-state",function(t,e,n){a.sync_(t,n)})};c.$inject=["$rootScope","ngeoLayerHelper","ngeoWMSTime","gmfThemes"];c.$inject=["$rootScope","ngeoLayerHelper","ngeoWMSTime","gmfThemes"];c.prototype.createLayer=function(t,e,n,i){var r=null;if(t.node.children!==undefined&&t.node.mixed){r=this.createGroup_(t,e,n,i)}else if(t.node.children===undefined&&t.parent.node.mixed){r=this.createLeafInAMixedGroup_(t,e)}else if(t.node.children===undefined){this.initGmfLayerInANotMixedGroup_(t,e)}else if(t.depth===1&&!t.node.mixed){r=this.createGroup_(t,e,n,i)}if(r&&t.node.metadata.opacity){r.setOpacity(t.node.metadata.opacity)}return r};c.prototype.sync_=function(t,e){var n=this;e.traverseDepthFirst(function(t){if(t.layer&&!t.node.mixed){n.updateLayerState_(t.layer,t)}})};c.prototype.updateLayerState_=function(t,e){var n=e.getState()==="on";if(e.node.type==="WMTS"){t.setVisible(n)}else if(!e.node.mixed&&e.depth===1){r["a"].assertInstanceof(t,l["a"]);var i=[];var a=[];e.traverseDepthFirst(function(t){if(t.node.children===undefined&&t.getState()==="on"){i.push(t.node.layers);var e=t.node.style!==undefined?t.node.style:"";a.push(e)}});if(i.length===0){t.setVisible(false)}t.getSource().updateParams({LAYERS:i.reverse().join(","),STYLES:a.reverse().join(",")});if(i.length!==0){t.setVisible(true)}}else{r["a"].assertInstanceof(t,l["a"]);t.setVisible(n)}};c.prototype.createGroup_=function(t,e,n,i){var r=t.node;var a=null;var o=t.parent.isRoot;var s=true;if(r.metadata.printNativeAngle!==undefined){s=r.metadata.printNativeAngle}if(o){a=this.createLayerFromGroup_(t,!!r.mixed);var l=i|0;n.getLayers().insertAt(l,a)}else{var u=!this.isOneParentNotMixed_(t);if(u){a=this.createLayerFromGroup_(t,true);var f=c.getLayer(t.parent);f.getLayers().insertAt(0,a)}}a.set("printNativeAngle",s);return a};c.prototype.createLayerFromGroup_=function(t,e){var n=this;var i=void 0;var a=t.node;if(e){i=this.layerHelper_.createBasicGroup()}else{var o=this.getTimeParam_(t);var s=this.ogcServersObject_[a.ogcServer||""];r["a"].assert(s);r["a"].assert(s.url);r["a"].assert(s.type);r["a"].assert(s.imageType);i=this.layerHelper_.createBasicWMSLayer(s.url,"",s.imageType,s.type,o,undefined,s.credential?"use-credentials":"anonymous");var l=false;t.traverseDepthFirst(function(t){n.updateLayerReferences_(t.node,i);if(t.node.metadata.isChecked){t.setState("on",false);n.updateLayerState_(i,t);l=true}});i.setVisible(l);i.set("layerNodeName",a.name)}return i};c.prototype.createLeafInAMixedGroup_=function(t,e){var n=t.node;var i=void 0;if(n.type==="WMTS"){i=this.createWMTSLayer_(n)}else{var a=n;var o=this.getTimeParam_(t);var s=this.ogcServersObject_[a.ogcServer];r["a"].assert(s);r["a"].assert(s.url);r["a"].assert(s.type);r["a"].assert(a.layers);r["a"].assert(s.imageType);var l={STYLES:a.style};i=this.layerHelper_.createBasicWMSLayer(s.url,a.layers,s.imageType,s.type,o,l,s.credential?"use-credentials":"anonymous")}i.set("layerNodeName",n.name);this.updateLayerReferences_(n,i);var u=n.metadata.isChecked===true;if(u){t.setState("on",false)}i.setVisible(u);var f=c.getLayer(t.parent);f.getLayers().insertAt(0,i);return i};c.prototype.initGmfLayerInANotMixedGroup_=function(t,e){var n=t.node;var i=this.getFirstLevelGroupCtrl_(t);r["a"].assert(i);var a=i.layer;r["a"].assertInstanceof(a,l["a"]);this.updateLayerReferences_(n,a);if(n.metadata.isChecked){t.setState("on",false);this.updateLayerState_(a,i)}else{t.parent.refreshState()}};c.prototype.createWMTSLayer_=function(t){var e=new u["a"];r["a"].assert(t.url);r["a"].assert(t.layer);this.layerHelper_.createWMTSLayerFromCapabilitites(t.url,t.layer,t.matrixSet,t.dimensions).then(function(t){e.setSource(t.getSource());e.set("capabilitiesStyles",t.get("capabilitiesStyles"))});return e};c.prototype.updateLayerReferences_=function(t,e){var n=s["c"](t);var i=e.get("querySourceIds")||[];i.push(n);e.set("querySourceIds",i);var r=t.metadata.disclaimer;if(r){var a=e.get("disclaimers")||[];a.push(t.metadata.disclaimer);e.set("disclaimers",a)}};c.prototype.getTimeParam_=function(t){var e=void 0;var n=void 0;var i=t.node;if(i.time){e=i.time}else if(i.children){t.traverseDepthFirst(function(t){if(t.node.children===undefined&&t.node.time){e=t.node.time;return a["a"].VisitorDecision.STOP}})}if(e){var r=this.ngeoWMSTime_.getOptions(e)["values"];n=this.ngeoWMSTime_.formatWMSTimeParam(e,{start:r[0]||r,end:r[1]})}return n};c.prototype.isOneParentNotMixed_=function(t){var e=t.parent;var n=false;do{n=e.node.mixed===false;e=e.parent}while(e.parent&&!n);return n};c.prototype.getFirstLevelGroupCtrl_=function(t){var e=t;while(!e.parent.isRoot){e=e.parent}return e};c.getLayer=function(t){var e=t;var n=null;while(!e.isRoot&&n===null){if(e.layer){n=e.layer}e=e.parent}return n};c.module=angular.module("gmfSyncLayertreeMap",[i["a"].module.name,a["a"].module.name,o["a"].module.name]);c.module.service("gmfSyncLayertreeMap",c);e["a"]=c},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(71);function r(t,e){for(var n in e){if(Object(i["a"])(e,n)){t[n]=e[n]}}if(Object(i["a"])(e,"toString")){t.toString=e.toString}if(Object(i["a"])(e,"valueOf")){t.valueOf=e.valueOf}return t}},function(t,e,n){"use strict";var i=n(1);var r=n(3);var a=n(11);var o=n(4);var s=n(81);var l=n(8);var u=n(9);var c=function t(e){s["a"].call(this);this.geometries_=e?e:null;this.listenGeometriesChange_()};Object(i["d"])(c,s["a"]);function f(t){var e=[];for(var n=0,i=t.length;n<i;++n){e.push(t[n].clone())}return e}c.prototype.unlistenGeometriesChange_=function(){if(!this.geometries_){return}for(var t=0,e=this.geometries_.length;t<e;++t){Object(r["c"])(this.geometries_[t],a["a"].CHANGE,this.changed,this)}};c.prototype.listenGeometriesChange_=function(){if(!this.geometries_){return}for(var t=0,e=this.geometries_.length;t<e;++t){Object(r["a"])(this.geometries_[t],a["a"].CHANGE,this.changed,this)}};c.prototype.clone=function(){var t=new c(null);t.setGeometries(this.geometries_);return t};c.prototype.closestPointXY=function(t,e,n,i){if(i<Object(o["e"])(this.getExtent(),t,e)){return i}var r=this.geometries_;for(var a=0,s=r.length;a<s;++a){i=r[a].closestPointXY(t,e,n,i)}return i};c.prototype.containsXY=function(t,e){var n=this.geometries_;for(var i=0,r=n.length;i<r;++i){if(n[i].containsXY(t,e)){return true}}return false};c.prototype.computeExtent=function(t){Object(o["l"])(t);var e=this.geometries_;for(var n=0,i=e.length;n<i;++n){Object(o["q"])(t,e[n].getExtent())}return t};c.prototype.getGeometries=function(){return f(this.geometries_)};c.prototype.getGeometriesArray=function(){return this.geometries_};c.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()){Object(u["b"])(this.simplifiedGeometryCache);this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=this.getRevision()}if(t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance){return this}var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e)){return this.simplifiedGeometryCache[e]}else{var n=[];var i=this.geometries_;var r=false;for(var a=0,o=i.length;a<o;++a){var s=i[a];var l=s.getSimplifiedGeometry(t);n.push(l);if(l!==s){r=true}}if(r){var f=new c(null);f.setGeometriesArray(n);this.simplifiedGeometryCache[e]=f;return f}else{this.simplifiedGeometryMaxMinSquaredTolerance=t;return this}}};c.prototype.getType=function(){return l["a"].GEOMETRY_COLLECTION};c.prototype.intersectsExtent=function(t){var e=this.geometries_;for(var n=0,i=e.length;n<i;++n){if(e[n].intersectsExtent(t)){return true}}return false};c.prototype.isEmpty=function(){return this.geometries_.length===0};c.prototype.rotate=function(t,e){var n=this.geometries_;for(var i=0,r=n.length;i<r;++i){n[i].rotate(t,e)}this.changed()};c.prototype.scale=function(t,e,n){var i=n;if(!i){i=Object(o["x"])(this.getExtent())}var r=this.geometries_;for(var a=0,s=r.length;a<s;++a){r[a].scale(t,e,i)}this.changed()};c.prototype.setGeometries=function(t){this.setGeometriesArray(f(t))};c.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_();this.geometries_=t;this.listenGeometriesChange_();this.changed()};c.prototype.applyTransform=function(t){var e=this.geometries_;for(var n=0,i=e.length;n<i;++n){e[n].applyTransform(t)}this.changed()};c.prototype.translate=function(t,e){var n=this.geometries_;for(var i=0,r=n.length;i<r;++i){n[i].translate(t,e)}this.changed()};c.prototype.disposeInternal=function(){this.unlistenGeometriesChange_();s["a"].prototype.disposeInternal.call(this)};e["a"]=c},function(t,e,n){(function(t,n){true?n(e):undefined})(this,function(t){"use strict";function e(t,e,n){t.prototype=e.prototype=n;n.constructor=t}function n(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function i(){}var r=.7;var a=1/r;var o="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u=/^#([0-9a-f]{3,8})$/,c=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),f=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),h=new RegExp("^rgba\\("+[o,o,o,s]+"\\)$"),d=new RegExp("^rgba\\("+[l,l,l,s]+"\\)$"),p=new RegExp("^hsl\\("+[s,l,l]+"\\)$"),v=new RegExp("^hsla\\("+[s,l,l,s]+"\\)$");var g={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e(i,b,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:m,formatHex:m,formatHsl:_,formatRgb:y,toString:y});function m(){return this.rgb().formatHex()}function _(){return R(this).formatHsl()}function y(){return this.rgb().formatRgb()}function b(t){var e,n;t=(t+"").trim().toLowerCase();return(e=u.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?w(e):n===3?new E(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?x(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?x(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=c.exec(t))?new E(e[1],e[2],e[3],1):(e=f.exec(t))?new E(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=h.exec(t))?x(e[1],e[2],e[3],e[4]):(e=d.exec(t))?x(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=p.exec(t))?I(e[1],e[2]/100,e[3]/100,1):(e=v.exec(t))?I(e[1],e[2]/100,e[3]/100,e[4]):g.hasOwnProperty(t)?w(g[t]):t==="transparent"?new E(NaN,NaN,NaN,0):null}function w(t){return new E(t>>16&255,t>>8&255,t&255,1)}function x(t,e,n,i){if(i<=0)t=e=n=NaN;return new E(t,e,n,i)}function S(t){if(!(t instanceof i))t=b(t);if(!t)return new E;t=t.rgb();return new E(t.r,t.g,t.b,t.opacity)}function C(t,e,n,i){return arguments.length===1?S(t):new E(t,e,n,i==null?1:i)}function E(t,e,n,i){this.r=+t;this.g=+e;this.b=+n;this.opacity=+i}e(E,C,n(i,{brighter:function(t){t=t==null?a:Math.pow(a,t);return new E(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?r:Math.pow(r,t);return new E(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:O,formatHex:O,formatRgb:T,toString:T}));function O(){return"#"+M(this.r)+M(this.g)+M(this.b)}function T(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function M(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function I(t,e,n,i){if(i<=0)t=e=n=NaN;else if(n<=0||n>=1)t=e=NaN;else if(e<=0)t=NaN;return new A(t,e,n,i)}function R(t){if(t instanceof A)return new A(t.h,t.s,t.l,t.opacity);if(!(t instanceof i))t=b(t);if(!t)return new A;if(t instanceof A)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,l=o-a,u=(o+a)/2;if(l){if(e===o)s=(n-r)/l+(n<r)*6;else if(n===o)s=(r-e)/l+2;else s=(e-n)/l+4;l/=u<.5?o+a:2-o-a;s*=60}else{l=u>0&&u<1?0:s}return new A(s,l,u,t.opacity)}function N(t,e,n,i){return arguments.length===1?R(t):new A(t,e,n,i==null?1:i)}function A(t,e,n,i){this.h=+t;this.s=+e;this.l=+n;this.opacity=+i}e(A,N,n(i,{brighter:function(t){t=t==null?a:Math.pow(a,t);return new A(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?r:Math.pow(r,t);return new A(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new E(L(t>=240?t-240:t+120,r,i),L(t,r,i),L(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function L(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var P=Math.PI/180;var D=180/Math.PI;var j=18,k=.96422,F=1,$=.82521,G=4/29,U=6/29,Y=3*U*U,V=U*U*U;function H(t){if(t instanceof W)return new W(t.l,t.a,t.b,t.opacity);if(t instanceof et)return nt(t);if(!(t instanceof E))t=S(t);var e=Z(t.r),n=Z(t.g),i=Z(t.b),r=q((.2225045*e+.7168786*n+.0606169*i)/F),a,o;if(e===n&&n===i)a=o=r;else{a=q((.4360747*e+.3850649*n+.1430804*i)/k);o=q((.0139322*e+.0971045*n+.7141733*i)/$)}return new W(116*r-16,500*(a-r),200*(r-o),t.opacity)}function z(t,e){return new W(t,0,0,e==null?1:e)}function B(t,e,n,i){return arguments.length===1?H(t):new W(t,e,n,i==null?1:i)}function W(t,e,n,i){this.l=+t;this.a=+e;this.b=+n;this.opacity=+i}e(W,B,n(i,{brighter:function(t){return new W(this.l+j*(t==null?1:t),this.a,this.b,this.opacity)},darker:function(t){return new W(this.l-j*(t==null?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;e=k*X(e);t=F*X(t);n=$*X(n);return new E(K(3.1338561*e-1.6168667*t-.4906146*n),K(-.9787684*e+1.9161415*t+.033454*n),K(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function q(t){return t>V?Math.pow(t,1/3):t/Y+G}function X(t){return t>U?t*t*t:Y*(t-G)}function K(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Z(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Q(t){if(t instanceof et)return new et(t.h,t.c,t.l,t.opacity);if(!(t instanceof W))t=H(t);if(t.a===0&&t.b===0)return new et(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*D;return new et(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function J(t,e,n,i){return arguments.length===1?Q(t):new et(n,e,t,i==null?1:i)}function tt(t,e,n,i){return arguments.length===1?Q(t):new et(t,e,n,i==null?1:i)}function et(t,e,n,i){this.h=+t;this.c=+e;this.l=+n;this.opacity=+i}function nt(t){if(isNaN(t.h))return new W(t.l,0,0,t.opacity);var e=t.h*P;return new W(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}e(et,tt,n(i,{brighter:function(t){return new et(this.h,this.c,this.l+j*(t==null?1:t),this.opacity)},darker:function(t){return new et(this.h,this.c,this.l-j*(t==null?1:t),this.opacity)},rgb:function(){return nt(this).rgb()}}));var it=-.14861,rt=+1.78277,at=-.29227,ot=-.90649,st=+1.97294,lt=st*ot,ut=st*rt,ct=rt*at-ot*it;function ft(t){if(t instanceof dt)return new dt(t.h,t.s,t.l,t.opacity);if(!(t instanceof E))t=S(t);var e=t.r/255,n=t.g/255,i=t.b/255,r=(ct*i+lt*e-ut*n)/(ct+lt-ut),a=i-r,o=(st*(n-r)-at*a)/ot,s=Math.sqrt(o*o+a*a)/(st*r*(1-r)),l=s?Math.atan2(o,a)*D-120:NaN;return new dt(l<0?l+360:l,s,r,t.opacity)}function ht(t,e,n,i){return arguments.length===1?ft(t):new dt(t,e,n,i==null?1:i)}function dt(t,e,n,i){this.h=+t;this.s=+e;this.l=+n;this.opacity=+i}e(dt,ht,n(i,{brighter:function(t){t=t==null?a:Math.pow(a,t);return new dt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?r:Math.pow(r,t);return new dt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*P,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new E(255*(e+n*(it*i+rt*r)),255*(e+n*(at*i+ot*r)),255*(e+n*(st*i)),this.opacity)}}));t.color=b;t.cubehelix=ht;t.gray=z;t.hcl=tt;t.hsl=N;t.lab=B;t.lch=J;t.rgb=C;Object.defineProperty(t,"__esModule",{value:true})})},function(t,e,n){"use strict";var i=n(2);var r=n(180);var a=n(45);var o=n(65);var s=n(121);var l=n(54);function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function c(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function f(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var h=function(t){f(e,t);function e(n){u(this,e);n.type=n.type||a["a"].DATE;return c(this,t.call(this,n))}return e}(l["a"]);var d=h;var p=n(110);var v=n(207);function g(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function m(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function _(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var y=function(t){_(e,t);function e(n){g(this,e);n.operator=n.operator||l["a"].OperatorType.LIKE;n.type=a["a"].TEXT;return m(this,t.call(this,n))}return e}(l["a"]);var b=y;var w=n(153);var x=n(72);var S=n(7);var C=n(18);var E=n(66);var O=n(137);var T=n(152);var M=n(90);var I=n(97);var R=n(141);var N=Object(I["a"])("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=E["a"].apply(null,arguments);if(this.isValid()&&t.isValid()){return t<this?this:t}else{return Object(T["a"])()}});var A=Object(I["a"])("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=E["a"].apply(null,arguments);if(this.isValid()&&t.isValid()){return t>this?this:t}else{return Object(T["a"])()}});function L(t,e){var n,i;if(e.length===1&&Object(R["a"])(e[0])){e=e[0]}if(!e.length){return Object(E["a"])()}n=e[0];for(i=1;i<e.length;++i){if(!e[i].isValid()||e[i][t](n)){n=e[i]}}return n}function P(){var t=[].slice.call(arguments,0);return L("isBefore",t)}function D(){var t=[].slice.call(arguments,0);return L("isAfter",t)}var j=function(){return Date.now?Date.now():+new Date};var k=n(102);var F=n(96);var $=n(44);var G=n(112);var U=n(41);var Y=n(99);var V=["year","quarter","month","week","day","hour","minute","second","millisecond"];function H(t){for(var e in t){if(!(Y["a"].call(V,e)!==-1&&(t[e]==null||!isNaN(t[e])))){return false}}var n=false;for(var i=0;i<V.length;++i){if(t[V[i]]){if(n){return false}if(parseFloat(t[V[i]])!==Object(U["a"])(t[V[i]])){n=true}}}return true}function z(){return this._isValid}function B(){return Et(NaN)}function W(t){var e=Object($["b"])(t),n=e.year||0,i=e.quarter||0,r=e.month||0,a=e.week||0,o=e.day||0,s=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._isValid=H(e);this._milliseconds=+c+u*1e3+l*6e4+s*1e3*60*60;this._days=+o+a*7;this._months=+r+i*3+n*12;this._data={};this._locale=Object(G["b"])();this._bubble()}function q(t){return t instanceof W}var X=n(164);function K(t){if(t<0){return Math.round(-1*t)*-1}else{return Math.round(t)}}var Z=n(71);var Q=n(17);var J=n(173);var tt=n(26);var et=n(6);var nt=n(51);var it=n(254);var rt=n(242);var at=n(98);var ot=n(353);function st(t,e){Object(tt["a"])(t,0,0,function(){var t=this.utcOffset();var n="+";if(t<0){t=-t;n="-"}return n+Object(J["a"])(~~(t/60),2)+e+Object(J["a"])(~~t%60,2)})}st("Z",":");st("ZZ","");Object(et["a"])("Z",et["o"]);Object(et["a"])("ZZ",et["o"]);Object(nt["a"])(["Z","ZZ"],function(t,e,n){n._useUTC=true;n._tzm=ut(et["o"],t)});var lt=/([\+\-]|\d\d)/gi;function ut(t,e){var n=(e||"").match(t);if(n===null){return null}var i=n[n.length-1]||[];var r=(i+"").match(lt)||["-",0,0];var a=+(r[1]*60)+Object(U["a"])(r[2]);return a===0?0:r[0]==="+"?a:-a}function ct(t,e){var n,i;if(e._isUTC){n=e.clone();i=(Object(M["c"])(t)||Object(rt["a"])(t)?t.valueOf():Object(E["a"])(t).valueOf())-n.valueOf();n._d.setTime(n._d.valueOf()+i);C["a"].updateOffset(n,false);return n}else{return Object(E["a"])(t).local()}}function ft(t){return-Math.round(t._d.getTimezoneOffset()/15)*15}C["a"].updateOffset=function(){};function ht(t,e,n){var i=this._offset||0,r;if(!this.isValid()){return t!=null?this:NaN}if(t!=null){if(typeof t==="string"){t=ut(et["o"],t);if(t===null){return this}}else if(Math.abs(t)<16&&!n){t=t*60}if(!this._isUTC&&e){r=ft(this)}this._offset=t;this._isUTC=true;if(r!=null){this.add(r,"m")}if(i!==t){if(!e||this._changeInProgress){Rt(this,Et(t-i,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;C["a"].updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?i:ft(this)}}function dt(t,e){if(t!=null){if(typeof t!=="string"){t=-t}this.utcOffset(t,e);return this}else{return-this.utcOffset()}}function pt(t){return this.utcOffset(0,t)}function vt(t){if(this._isUTC){this.utcOffset(0,t);this._isUTC=false;if(t){this.subtract(ft(this),"m")}}return this}function gt(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var t=ut(et["n"],this._i);if(t!=null){this.utcOffset(t)}else{this.utcOffset(0,true)}}return this}function mt(t){if(!this.isValid()){return false}t=t?Object(E["a"])(t).utcOffset():0;return(this.utcOffset()-t)%60===0}function _t(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function yt(){if(!Object(at["a"])(this._isDSTShifted)){return this._isDSTShifted}var t={};Object(M["b"])(t,this);t=Object(it["b"])(t);if(t._a){var e=t._isUTC?Object(O["a"])(t._a):Object(E["a"])(t._a);this._isDSTShifted=this.isValid()&&Object(ot["a"])(t._a,e.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function bt(){return this.isValid()?!this._isUTC:false}function wt(){return this.isValid()?this._isUTC:false}function xt(){return this.isValid()?this._isUTC&&this._offset===0:false}var St=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var Ct=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Et(t,e){var n=t,i=null,r,a,o;if(q(t)){n={ms:t._milliseconds,d:t._days,M:t._months}}else if(Object(X["a"])(t)){n={};if(e){n[e]=t}else{n.milliseconds=t}}else if(!!(i=St.exec(t))){r=i[1]==="-"?-1:1;n={y:0,d:Object(U["a"])(i[Q["a"]])*r,h:Object(U["a"])(i[Q["b"]])*r,m:Object(U["a"])(i[Q["d"]])*r,s:Object(U["a"])(i[Q["f"]])*r,ms:Object(U["a"])(K(i[Q["c"]]*1e3))*r}}else if(!!(i=Ct.exec(t))){r=i[1]==="-"?-1:i[1]==="+"?1:1;n={y:Ot(i[2],r),M:Ot(i[3],r),w:Ot(i[4],r),d:Ot(i[5],r),h:Ot(i[6],r),m:Ot(i[7],r),s:Ot(i[8],r)}}else if(n==null){n={}}else if(typeof n==="object"&&("from"in n||"to"in n)){o=Mt(Object(E["a"])(n.from),Object(E["a"])(n.to));n={};n.ms=o.milliseconds;n.M=o.months}a=new W(n);if(q(t)&&Object(Z["a"])(t,"_locale")){a._locale=t._locale}return a}Et.fn=W.prototype;Et.invalid=B;function Ot(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Tt(t,e){var n={milliseconds:0,months:0};n.months=e.month()-t.month()+(e.year()-t.year())*12;if(t.clone().add(n.months,"M").isAfter(e)){--n.months}n.milliseconds=+e-+t.clone().add(n.months,"M");return n}function Mt(t,e){var n;if(!(t.isValid()&&e.isValid())){return{milliseconds:0,months:0}}e=ct(e,t);if(t.isBefore(e)){n=Tt(t,e)}else{n=Tt(e,t);n.milliseconds=-n.milliseconds;n.months=-n.months}return n}function It(t,e){return function(n,i){var r,a;if(i!==null&&!isNaN(+i)){Object(I["b"])(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");a=n;n=i;i=a}n=typeof n==="string"?+n:n;r=Et(n,i);Rt(this,r,t);return this}}function Rt(t,e,n,i){var r=e._milliseconds,a=K(e._days),o=K(e._months);if(!t.isValid()){return}i=i==null?true:i;if(o){Object(F["k"])(t,Object(k["a"])(t,"Month")+o*n)}if(a){Object(k["c"])(t,"Date",Object(k["a"])(t,"Date")+a*n)}if(r){t._d.setTime(t._d.valueOf()+r*n)}if(i){C["a"].updateOffset(t,a||o)}}var Nt=It(1,"add");var At=It(-1,"subtract");var Lt=n(123);function Pt(t,e){var n=t.diff(e,"days",true);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Dt(t,e){var n=t||Object(E["a"])(),i=ct(n,this).startOf("day"),r=C["a"].calendarFormat(this,i)||"sameElse";var a=e&&(Object(Lt["a"])(e[r])?e[r].call(this,n):e[r]);return this.format(a||this.localeData().calendar(r,this,Object(E["a"])(n)))}function jt(){return new M["a"](this)}function kt(t,e){var n=Object(M["c"])(t)?t:Object(E["a"])(t);if(!(this.isValid()&&n.isValid())){return false}e=Object($["c"])(!Object(at["a"])(e)?e:"millisecond");if(e==="millisecond"){return this.valueOf()>n.valueOf()}else{return n.valueOf()<this.clone().startOf(e).valueOf()}}function Ft(t,e){var n=Object(M["c"])(t)?t:Object(E["a"])(t);if(!(this.isValid()&&n.isValid())){return false}e=Object($["c"])(!Object(at["a"])(e)?e:"millisecond");if(e==="millisecond"){return this.valueOf()<n.valueOf()}else{return this.clone().endOf(e).valueOf()<n.valueOf()}}function $t(t,e,n,i){i=i||"()";return(i[0]==="("?this.isAfter(t,n):!this.isBefore(t,n))&&(i[1]===")"?this.isBefore(e,n):!this.isAfter(e,n))}function Gt(t,e){var n=Object(M["c"])(t)?t:Object(E["a"])(t),i;if(!(this.isValid()&&n.isValid())){return false}e=Object($["c"])(e||"millisecond");if(e==="millisecond"){return this.valueOf()===n.valueOf()}else{i=n.valueOf();return this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()}}function Ut(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Yt(t,e){return this.isSame(t,e)||this.isBefore(t,e)}var Vt=n(132);function Ht(t,e,n){var i,r,a,o;if(!this.isValid()){return NaN}i=ct(t,this);if(!i.isValid()){return NaN}r=(i.utcOffset()-this.utcOffset())*6e4;e=Object($["c"])(e);switch(e){case"year":o=zt(this,i)/12;break;case"month":o=zt(this,i);break;case"quarter":o=zt(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:Object(Vt["a"])(o)}function zt(t,e){var n=(e.year()-t.year())*12+(e.month()-t.month()),i=t.clone().add(n,"months"),r,a;if(e-i<0){r=t.clone().add(n-1,"months");a=(e-i)/(i-r)}else{r=t.clone().add(n+1,"months");a=(e-i)/(r-i)}return-(n+a)||0}C["a"].defaultFormat="YYYY-MM-DDTHH:mm:ssZ";C["a"].defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Bt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Wt(t){if(!this.isValid()){return null}var e=t!==true;var n=e?this.clone().utc():this;if(n.year()<0||n.year()>9999){return Object(tt["c"])(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ")}if(Object(Lt["a"])(Date.prototype.toISOString)){if(e){return this.toDate().toISOString()}else{return new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Object(tt["c"])(n,"Z"))}}return Object(tt["c"])(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function qt(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var t="moment";var e="";if(!this.isLocal()){t=this.utcOffset()===0?"moment.utc":"moment.parseZone";e="Z"}var n="["+t+'("]';var i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";var r="-MM-DD[T]HH:mm:ss.SSS";var a=e+'[")]';return this.format(n+i+r+a)}function Xt(t){if(!t){t=this.isUtc()?C["a"].defaultFormatUtc:C["a"].defaultFormat}var e=Object(tt["c"])(this,t);return this.localeData().postformat(e)}function Kt(t,e){if(this.isValid()&&(Object(M["c"])(t)&&t.isValid()||Object(E["a"])(t).isValid())){return Et({to:this,from:t}).locale(this.locale()).humanize(!e)}else{return this.localeData().invalidDate()}}function Zt(t){return this.from(Object(E["a"])(),t)}function Qt(t,e){if(this.isValid()&&(Object(M["c"])(t)&&t.isValid()||Object(E["a"])(t).isValid())){return Et({from:this,to:t}).locale(this.locale()).humanize(!e)}else{return this.localeData().invalidDate()}}function Jt(t){return this.to(Object(E["a"])(),t)}function te(t){var e;if(t===undefined){return this._locale._abbr}else{e=Object(G["b"])(t);if(e!=null){this._locale=e}return this}}var ee=Object(I["a"])("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){if(t===undefined){return this.localeData()}else{return this.locale(t)}});function ne(){return this._locale}function ie(t){t=Object($["c"])(t);switch(t){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(t==="week"){this.weekday(0)}if(t==="isoWeek"){this.isoWeekday(1)}if(t==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function re(t){t=Object($["c"])(t);if(t===undefined||t==="millisecond"){return this}if(t==="date"){t="day"}return this.startOf(t).add(1,t==="isoWeek"?"week":t).subtract(1,"ms")}function ae(){return this._d.valueOf()-(this._offset||0)*6e4}function oe(){return Math.floor(this.valueOf()/1e3)}function se(){return new Date(this.valueOf())}function le(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function ue(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function ce(){return this.isValid()?this.toISOString():null}var fe=n(155);var he=n(48);function de(){return Object(T["b"])(this)}function pe(){return Object(fe["a"])({},Object(he["a"])(this))}function ve(){return Object(he["a"])(this).overflow}function ge(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}var me=n(130);var _e=n(76);var ye=n(150);var be=n(161);Object(tt["a"])(0,["gg",2],0,function(){return this.weekYear()%100});Object(tt["a"])(0,["GG",2],0,function(){return this.isoWeekYear()%100});function we(t,e){Object(tt["a"])(0,[t,t.length],0,e)}we("gggg","weekYear");we("ggggg","weekYear");we("GGGG","isoWeekYear");we("GGGGG","isoWeekYear");Object($["a"])("weekYear","gg");Object($["a"])("isoWeekYear","GG");Object(_e["a"])("weekYear",1);Object(_e["a"])("isoWeekYear",1);Object(et["a"])("G",et["p"]);Object(et["a"])("g",et["p"]);Object(et["a"])("GG",et["d"],et["h"]);Object(et["a"])("gg",et["d"],et["h"]);Object(et["a"])("GGGG",et["f"],et["k"]);Object(et["a"])("gggg",et["f"],et["k"]);Object(et["a"])("GGGGG",et["g"],et["m"]);Object(et["a"])("ggggg",et["g"],et["m"]);Object(nt["c"])(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=Object(U["a"])(t)});Object(nt["c"])(["gg","GG"],function(t,e,n,i){e[i]=C["a"].parseTwoDigitYear(t)});function xe(t){return Oe.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Se(t){return Oe.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Ce(){return Object(ye["c"])(this.year(),1,4)}function Ee(){var t=this.localeData()._week;return Object(ye["c"])(this.year(),t.dow,t.doy)}function Oe(t,e,n,i,r){var a;if(t==null){return Object(ye["b"])(this,i,r).year}else{a=Object(ye["c"])(t,i,r);if(e>a){e=a}return Te.call(this,t,e,n,i,r)}}function Te(t,e,n,i,r){var a=Object(ye["a"])(t,e,n,i,r),o=Object(be["b"])(a.year,0,a.dayOfYear);this.year(o.getUTCFullYear());this.month(o.getUTCMonth());this.date(o.getUTCDate());return this}Object(tt["a"])("Q",0,"Qo","quarter");Object($["a"])("quarter","Q");Object(_e["a"])("quarter",7);Object(et["a"])("Q",et["c"]);Object(nt["a"])("Q",function(t,e){e[Q["e"]]=(Object(U["a"])(t)-1)*3});function Me(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}var Ie=n(192);Object(tt["a"])("D",["DD",2],"Do","date");Object($["a"])("date","D");Object(_e["a"])("date",9);Object(et["a"])("D",et["d"]);Object(et["a"])("DD",et["d"],et["h"]);Object(et["a"])("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Object(nt["a"])(["D","DD"],Q["a"]);Object(nt["a"])("Do",function(t,e){e[Q["a"]]=Object(U["a"])(t.match(et["d"])[0])});var Re=Object(k["b"])("Date",true);var Ne=n(116);Object(tt["a"])("DDD",["DDDD",3],"DDDo","dayOfYear");Object($["a"])("dayOfYear","DDD");Object(_e["a"])("dayOfYear",4);Object(et["a"])("DDD",et["e"]);Object(et["a"])("DDDD",et["i"]);Object(nt["a"])(["DDD","DDDD"],function(t,e,n){n._dayOfYear=Object(U["a"])(t)});function Ae(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}var Le=n(217);Object(tt["a"])("m",["mm",2],0,"minute");Object($["a"])("minute","m");Object(_e["a"])("minute",14);Object(et["a"])("m",et["d"]);Object(et["a"])("mm",et["d"],et["h"]);Object(nt["a"])(["m","mm"],Q["d"]);var Pe=Object(k["b"])("Minutes",false);Object(tt["a"])("s",["ss",2],0,"second");Object($["a"])("second","s");Object(_e["a"])("second",15);Object(et["a"])("s",et["d"]);Object(et["a"])("ss",et["d"],et["h"]);Object(nt["a"])(["s","ss"],Q["f"]);var De=Object(k["b"])("Seconds",false);Object(tt["a"])("S",0,0,function(){return~~(this.millisecond()/100)});Object(tt["a"])(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Object(tt["a"])(0,["SSS",3],0,"millisecond");Object(tt["a"])(0,["SSSS",4],0,function(){return this.millisecond()*10});Object(tt["a"])(0,["SSSSS",5],0,function(){return this.millisecond()*100});Object(tt["a"])(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Object(tt["a"])(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Object(tt["a"])(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Object(tt["a"])(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Object($["a"])("millisecond","ms");Object(_e["a"])("millisecond",16);Object(et["a"])("S",et["e"],et["c"]);Object(et["a"])("SS",et["e"],et["h"]);Object(et["a"])("SSS",et["e"],et["i"]);var je;for(je="SSSS";je.length<=9;je+="S"){Object(et["a"])(je,et["r"])}function ke(t,e){e[Q["c"]]=Object(U["a"])(("0."+t)*1e3)}for(je="S";je.length<=9;je+="S"){Object(nt["a"])(je,ke)}var Fe=Object(k["b"])("Milliseconds",false);Object(tt["a"])("z",0,0,"zoneAbbr");Object(tt["a"])("zz",0,0,"zoneName");function $e(){return this._isUTC?"UTC":""}function Ge(){return this._isUTC?"Coordinated Universal Time":""}var Ue=M["a"].prototype;Ue.add=Nt;Ue.calendar=Dt;Ue.clone=jt;Ue.diff=Ht;Ue.endOf=re;Ue.format=Xt;Ue.from=Kt;Ue.fromNow=Zt;Ue.to=Qt;Ue.toNow=Jt;Ue.get=k["d"];Ue.invalidAt=ve;Ue.isAfter=kt;Ue.isBefore=Ft;Ue.isBetween=$t;Ue.isSame=Gt;Ue.isSameOrAfter=Ut;Ue.isSameOrBefore=Yt;Ue.isValid=de;Ue.lang=ee;Ue.locale=te;Ue.localeData=ne;Ue.max=A;Ue.min=N;Ue.parsingFlags=pe;Ue.set=k["e"];Ue.startOf=ie;Ue.subtract=At;Ue.toArray=le;Ue.toObject=ue;Ue.toDate=se;Ue.toISOString=Wt;Ue.inspect=qt;Ue.toJSON=ce;Ue.toString=Bt;Ue.unix=oe;Ue.valueOf=ae;Ue.creationData=ge;Ue.year=me["c"];Ue.isLeapYear=me["b"];Ue.weekYear=xe;Ue.isoWeekYear=Se;Ue.quarter=Ue.quarters=Me;Ue.month=F["e"];Ue.daysInMonth=F["d"];Ue.week=Ue.weeks=Ie["c"];Ue.isoWeek=Ue.isoWeeks=Ie["b"];Ue.weeksInYear=Ee;Ue.isoWeeksInYear=Ce;Ue.date=Re;Ue.day=Ue.days=Ne["d"];Ue.weekday=Ne["f"];Ue.isoWeekday=Ne["e"];Ue.dayOfYear=Ae;Ue.hour=Ue.hours=Le["b"];Ue.minute=Ue.minutes=Pe;Ue.second=Ue.seconds=De;Ue.millisecond=Ue.milliseconds=Fe;Ue.utcOffset=ht;Ue.utc=pt;Ue.local=vt;Ue.parseZone=gt;Ue.hasAlignedHourOffset=mt;Ue.isDST=_t;Ue.isLocal=bt;Ue.isUtcOffset=wt;Ue.isUtc=xt;Ue.isUTC=xt;Ue.zoneAbbr=$e;Ue.zoneName=Ge;Ue.dates=Object(I["a"])("dates accessor is deprecated. Use date instead.",Re);Ue.months=Object(I["a"])("months accessor is deprecated. Use month instead",F["e"]);Ue.years=Object(I["a"])("years accessor is deprecated. Use year instead",me["c"]);Ue.zone=Object(I["a"])("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",dt);Ue.isDSTShifted=Object(I["a"])("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",yt);var Ye=Ue;function Ve(t){return Object(E["a"])(t*1e3)}function He(){return E["a"].apply(null,arguments).parseZone()}var ze=n(287);var Be=n(352);var We=n(351);var qe=n(350);var Xe=n(286);function Ke(t){return t}var Ze=n(285);var Qe=n(288);var Je=ze["a"].prototype;Je.calendar=Be["a"];Je.longDateFormat=We["b"];Je.invalidDate=qe["b"];Je.ordinal=Xe["c"];Je.preparse=Ke;Je.postformat=Ke;Je.relativeTime=Ze["c"];Je.pastFuture=Ze["b"];Je.set=Qe["b"];Je.months=F["f"];Je.monthsShort=F["h"];Je.monthsParse=F["g"];Je.monthsRegex=F["i"];Je.monthsShortRegex=F["j"];Je.week=Ie["f"];Je.firstDayOfYear=Ie["e"];Je.firstDayOfWeek=Ie["d"];Je.weekdays=Ne["g"];Je.weekdaysMin=Ne["h"];Je.weekdaysShort=Ne["j"];Je.weekdaysParse=Ne["i"];Je.weekdaysRegex=Ne["l"];Je.weekdaysShortRegex=Ne["m"];Je.weekdaysMinRegex=Ne["k"];Je.isPM=Le["c"];Je.meridiem=Le["d"];function tn(t,e,n,i){var r=Object(G["b"])();var a=Object(O["a"])().set(i,e);return r[n](a,t)}function en(t,e,n){if(Object(X["a"])(t)){e=t;t=undefined}t=t||"";if(e!=null){return tn(t,e,n,"month")}var i;var r=[];for(i=0;i<12;i++){r[i]=tn(t,i,n,"month")}return r}function nn(t,e,n,i){if(typeof t==="boolean"){if(Object(X["a"])(e)){n=e;e=undefined}e=e||""}else{e=t;n=e;t=false;if(Object(X["a"])(e)){n=e;e=undefined}e=e||""}var r=Object(G["b"])(),a=t?r._week.dow:0;if(n!=null){return tn(e,(n+a)%7,i,"day")}var o;var s=[];for(o=0;o<7;o++){s[o]=tn(e,(o+a)%7,i,"day")}return s}function rn(t,e){return en(t,e,"months")}function an(t,e){return en(t,e,"monthsShort")}function on(t,e,n){return nn(t,e,n,"weekdays")}function sn(t,e,n){return nn(t,e,n,"weekdaysShort")}function ln(t,e,n){return nn(t,e,n,"weekdaysMin")}Object(G["c"])("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=Object(U["a"])(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});C["a"].lang=Object(I["a"])("moment.lang is deprecated. Use moment.locale instead.",G["c"]);C["a"].langData=Object(I["a"])("moment.langData is deprecated. Use moment.localeData instead.",G["b"]);var un=Math.abs;function cn(){var t=this._data;this._milliseconds=un(this._milliseconds);this._days=un(this._days);this._months=un(this._months);t.milliseconds=un(t.milliseconds);t.seconds=un(t.seconds);t.minutes=un(t.minutes);t.hours=un(t.hours);t.months=un(t.months);t.years=un(t.years);return this}function fn(t,e,n,i){var r=Et(e,n);t._milliseconds+=i*r._milliseconds;t._days+=i*r._days;t._months+=i*r._months;return t._bubble()}function hn(t,e){return fn(this,t,e,1)}function dn(t,e){return fn(this,t,e,-1)}function pn(t){if(t<0){return Math.floor(t)}else{return Math.ceil(t)}}function vn(){var t=this._milliseconds;var e=this._days;var n=this._months;var i=this._data;var r,a,o,s,l;if(!(t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0)){t+=pn(mn(n)+e)*864e5;e=0;n=0}i.milliseconds=t%1e3;r=Object(Vt["a"])(t/1e3);i.seconds=r%60;a=Object(Vt["a"])(r/60);i.minutes=a%60;o=Object(Vt["a"])(a/60);i.hours=o%24;e+=Object(Vt["a"])(o/24);l=Object(Vt["a"])(gn(e));n+=l;e-=pn(mn(l));s=Object(Vt["a"])(n/12);n%=12;i.days=e;i.months=n;i.years=s;return this}function gn(t){return t*4800/146097}function mn(t){return t*146097/4800}function _n(t){if(!this.isValid()){return NaN}var e;var n;var i=this._milliseconds;t=Object($["c"])(t);if(t==="month"||t==="year"){e=this._days+i/864e5;n=this._months+gn(e);return t==="month"?n:n/12}else{e=this._days+Math.round(mn(this._months));switch(t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+t)}}}function yn(){if(!this.isValid()){return NaN}return this._milliseconds+this._days*864e5+this._months%12*2592e6+Object(U["a"])(this._months/12)*31536e6}function bn(t){return function(){return this.as(t)}}var wn=bn("ms");var xn=bn("s");var Sn=bn("m");var Cn=bn("h");var En=bn("d");var On=bn("w");var Tn=bn("M");var Mn=bn("y");function In(){return Et(this)}function Rn(t){t=Object($["c"])(t);return this.isValid()?this[t+"s"]():NaN}function Nn(t){return function(){return this.isValid()?this._data[t]:NaN}}var An=Nn("milliseconds");var Ln=Nn("seconds");var Pn=Nn("minutes");var Dn=Nn("hours");var jn=Nn("days");var kn=Nn("months");var Fn=Nn("years");function $n(){return Object(Vt["a"])(this.days()/7)}var Gn=Math.round;var Un={ss:44,s:45,m:45,h:22,d:26,M:11};function Yn(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function Vn(t,e,n){var i=Et(t).abs();var r=Gn(i.as("s"));var a=Gn(i.as("m"));var o=Gn(i.as("h"));var s=Gn(i.as("d"));var l=Gn(i.as("M"));var u=Gn(i.as("y"));var c=r<=Un.ss&&["s",r]||r<Un.s&&["ss",r]||a<=1&&["m"]||a<Un.m&&["mm",a]||o<=1&&["h"]||o<Un.h&&["hh",o]||s<=1&&["d"]||s<Un.d&&["dd",s]||l<=1&&["M"]||l<Un.M&&["MM",l]||u<=1&&["y"]||["yy",u];c[2]=e;c[3]=+t>0;c[4]=n;return Yn.apply(null,c)}function Hn(t){if(t===undefined){return Gn}if(typeof t==="function"){Gn=t;return true}return false}function zn(t,e){if(Un[t]===undefined){return false}if(e===undefined){return Un[t]}Un[t]=e;if(t==="s"){Un.ss=e-1}return true}function Bn(t){if(!this.isValid()){return this.localeData().invalidDate()}var e=this.localeData();var n=Vn(this,!t,e);if(t){n=e.pastFuture(+this,n)}return e.postformat(n)}var Wn=Math.abs;function qn(t){return(t>0)-(t<0)||+t}function Xn(){if(!this.isValid()){return this.localeData().invalidDate()}var t=Wn(this._milliseconds)/1e3;var e=Wn(this._days);var n=Wn(this._months);var i,r,a;i=Object(Vt["a"])(t/60);r=Object(Vt["a"])(i/60);t%=60;i%=60;a=Object(Vt["a"])(n/12);n%=12;var o=a;var s=n;var l=e;var u=r;var c=i;var f=t?t.toFixed(3).replace(/\.?0+$/,""):"";var h=this.asSeconds();if(!h){return"P0D"}var d=h<0?"-":"";var p=qn(this._months)!==qn(h)?"-":"";var v=qn(this._days)!==qn(h)?"-":"";var g=qn(this._milliseconds)!==qn(h)?"-":"";return d+"P"+(o?p+o+"Y":"")+(s?p+s+"M":"")+(l?v+l+"D":"")+(u||c||f?"T":"")+(u?g+u+"H":"")+(c?g+c+"M":"")+(f?g+f+"S":"")}var Kn=W.prototype;Kn.isValid=z;Kn.abs=cn;Kn.add=hn;Kn.subtract=dn;Kn.as=_n;Kn.asMilliseconds=wn;Kn.asSeconds=xn;Kn.asMinutes=Sn;Kn.asHours=Cn;Kn.asDays=En;Kn.asWeeks=On;Kn.asMonths=Tn;Kn.asYears=Mn;Kn.valueOf=yn;Kn._bubble=vn;Kn.clone=In;Kn.get=Rn;Kn.milliseconds=An;Kn.seconds=Ln;Kn.minutes=Pn;Kn.hours=Dn;Kn.days=jn;Kn.weeks=$n;Kn.months=kn;Kn.years=Fn;Kn.humanize=Bn;Kn.toISOString=Xn;Kn.toString=Xn;Kn.toJSON=Xn;Kn.locale=te;Kn.localeData=ne;Kn.toIsoString=Object(I["a"])("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Xn);Kn.lang=ee;Object(tt["a"])("X",0,0,"unix");Object(tt["a"])("x",0,0,"valueOf");Object(et["a"])("x",et["p"]);Object(et["a"])("X",et["q"]);Object(nt["a"])("X",function(t,e,n){n._d=new Date(parseFloat(t,10)*1e3)});Object(nt["a"])("x",function(t,e,n){n._d=new Date(Object(U["a"])(t))});
//! moment.js
//! version : 2.22.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
C["a"].version="2.22.1";Object(C["b"])(E["a"]);C["a"].fn=Ye;C["a"].min=P;C["a"].max=D;C["a"].now=j;C["a"].utc=O["a"];C["a"].unix=Ve;C["a"].months=rn;C["a"].isDate=rt["a"];C["a"].locale=G["c"];C["a"].invalid=T["a"];C["a"].duration=Et;C["a"].isMoment=M["c"];C["a"].weekdays=on;C["a"].parseZone=He;C["a"].localeData=G["b"];C["a"].isDuration=q;C["a"].monthsShort=an;C["a"].weekdaysMin=ln;C["a"].defineLocale=G["a"];C["a"].updateLocale=G["e"];C["a"].locales=G["d"];C["a"].weekdaysShort=sn;C["a"].normalizeUnits=$["c"];C["a"].relativeTimeRounding=Hn;C["a"].relativeTimeThreshold=zn;C["a"].calendarFormat=Pt;C["a"].prototype=Ye;C["a"].HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};var Zn=C["a"];function Qn(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var Jn=function(){t.$inject=["gettextCatalog","ngeoFeatureHelper","ngeoWMSTime"];function t(e,n,i){Qn(this,t);this.gettextCatalog_=e;this.ngeoFeatureHelper_=n;this.ngeoWMSTime_=i}t.prototype.createRulesFromAttributes=function t(e,n){var i=[];for(var r=e,a=Array.isArray(r),o=0,r=a?r:r[Symbol.iterator]();;){var s;if(a){if(o>=r.length)break;s=r[o++]}else{o=r.next();if(o.done)break;s=o.value}var l=s;i.push(this.createRuleFromAttribute(l,n))}return i};t.prototype.createRuleFromAttribute=function t(e,n){var r=void 0;var o=n===true;var s=this.gettextCatalog_.getString(e.name);switch(e.type){case a["a"].DATE:case a["a"].DATETIME:if(o){r=new d({name:s,operator:l["a"].TemporalOperatorType.EQUALS,operators:[l["a"].TemporalOperatorType.EQUALS,l["a"].TemporalOperatorType.BEGINS,l["a"].TemporalOperatorType.ENDS],propertyName:e.name,type:e.type})}else{r=new d({name:s,operator:l["a"].TemporalOperatorType.DURING,propertyName:e.name,type:e.type})}break;case a["a"].GEOMETRY:r=new p["a"]({name:s,operator:l["a"].SpatialOperatorType.WITHIN,operators:[l["a"].SpatialOperatorType.CONTAINS,l["a"].SpatialOperatorType.INTERSECTS,l["a"].SpatialOperatorType.WITHIN],propertyName:e.name,type:e.type});break;case a["a"].NUMBER:if(o){r=new l["a"]({name:s,operator:l["a"].OperatorType.EQUAL_TO,operators:[l["a"].OperatorType.EQUAL_TO,l["a"].OperatorType.GREATER_THAN,l["a"].OperatorType.GREATER_THAN_OR_EQUAL_TO,l["a"].OperatorType.LESSER_THAN,l["a"].OperatorType.LESSER_THAN_OR_EQUAL_TO,l["a"].OperatorType.NOT_EQUAL_TO],propertyName:e.name,type:a["a"].NUMBER})}else{r=new l["a"]({name:s,operator:l["a"].OperatorType.BETWEEN,propertyName:e.name,type:a["a"].NUMBER})}break;case a["a"].SELECT:r=new v["a"]({choices:i["a"].assert(e.choices),name:s,propertyName:e.name});break;default:if(o){r=new b({name:s,operator:l["a"].OperatorType.LIKE,operators:[l["a"].OperatorType.LIKE,l["a"].OperatorType.EQUAL_TO,l["a"].OperatorType.NOT_EQUAL_TO],propertyName:e.name})}else{r=new b({name:s,operator:l["a"].OperatorType.LIKE,propertyName:e.name})}break}return r};t.prototype.createRules=function t(e){var n=[];for(var i=e,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;n.push(this.createRule(s))}return n};t.prototype.createRule=function t(e){var n=void 0;switch(e.type){case a["a"].DATE:case a["a"].DATETIME:n=new d(e);break;case a["a"].GEOMETRY:n=new p["a"](e);break;case a["a"].SELECT:var r=e;i["a"].assert(r.choices);n=new v["a"](r);break;default:n=new b(e);break}return n};t.prototype.cloneRule=function t(e){var n=void 0;var i=e.getExpression();if(i===null){i=undefined}var r=e.isCustom;var a=e.lowerBoundary!==null?e.lowerBoundary:undefined;var o=e.name;var s=e.operator!==null?e.operator:undefined;var u=e.operators?e.operators.slice(0):undefined;var c=e.propertyName;var f=e.type!==null?e.type:undefined;var h=e.upperBoundary!==null?e.upperBoundary:undefined;var g={expression:i,isCustom:r,lowerBoundary:a,name:o,operator:s,operators:u,propertyName:c,type:f,upperBoundary:h};if(e instanceof d){n=new d(g)}else if(e instanceof p["a"]){n=new p["a"](g);n.feature.setProperties(this.ngeoFeatureHelper_.getNonSpatialProperties(e.feature))}else if(e instanceof v["a"]){g.choices=e.choices.slice(0);n=new v["a"](g)}else if(e instanceof b){n=new b(g)}else{n=new l["a"](g)}return n};t.prototype.extendRule=function t(e,n){if(n.getExpression()!==e.getExpression()){n.setExpression(e.getExpression())}if(n.lowerBoundary!==e.lowerBoundary){n.lowerBoundary=e.lowerBoundary}if(n.operator!==e.operator){n.operator=e.operator}if(n.upperBoundary!==e.upperBoundary){n.upperBoundary=e.upperBoundary}if(e instanceof p["a"]&&n instanceof p["a"]){this.ngeoFeatureHelper_.clearNonSpatialProperties(n.feature);n.feature.setProperties(this.ngeoFeatureHelper_.getNonSpatialProperties(e.feature))}};t.prototype.serializeRules=function t(e){var n=this;return e.map(function(t){var e=n.serializeRule(t);return e})};t.prototype.serializeRule=function t(e){var n={name:e.name,propertyName:e.propertyName,type:e.type};if(e.expression!==null){n.expression=e.expression}if(e.lowerBoundary!==null){n.lowerBoundary=e.lowerBoundary}if(e.operator!==null){n.operator=e.operator}if(e.operators!==null){n.operators=e.operators.slice(0)}if(e.upperBoundary!==null){n.upperBoundary=e.upperBoundary}if(e instanceof p["a"]){n.featureProperties=this.ngeoFeatureHelper_.getNonSpatialProperties(e.feature)}if(e instanceof v["a"]){n.choices=e.choices}return n};t.prototype.createFilter=function t(e){var n=e.dataSource;var i=null;if(e.filter){i=e.filter}else{var a=e.filterRules||n.filterRules;var o=[];if(a&&a.length){for(var s=a,l=Array.isArray(s),u=0,s=l?s:s[Symbol.iterator]();;){var c;if(l){if(u>=s.length)break;c=s[u++]}else{u=s.next();if(u.done)break;c=u.value}var f=c;var h=this.createFilterFromRule_(f,n,e.srsName);if(h){o.push(h)}}}var d=n.filterCondition;if(o.length===1){i=o[0]}else if(o.length>=2){if(d===r["a"].AND){i=x["and"].apply(null,o)}else if(d===r["a"].OR||d===r["a"].NOT){i=x["or"].apply(null,o)}}if(i&&d===r["a"].NOT){i=x["not"](i)}}if(e.incTime){var p=this.createTimeFilterFromDataSource_(n);if(p){if(i){i=x["and"].apply(null,[i,p])}else{i=p}}}if(e.incDimensions){var v=this.createDimensionsFilterFromDataSource_(n);if(v){if(i){i=x["and"].apply(null,[i,v])}else{i=v}}}return i};t.prototype.createFilterString=function t(e){var n=null;var i=this.createFilter(e);if(i){var r=Object(w["b"])(i);var a=new XMLSerializer;n=a.serializeToString(r)}return n};t.prototype.createFilterFromRule_=function t(e,n,r){var a=null;var o=e.value;if(!o){return null}var s=o.expression;var u=o.lowerBoundary;var c=o.operator;var f=o.propertyName;var h=o.upperBoundary;var g=l["a"].OperatorType;var m=l["a"].SpatialOperatorType;var _=l["a"].TemporalOperatorType;var y=[m.CONTAINS,m.INTERSECTS,m.WITHIN];var b=[g.GREATER_THAN,g.GREATER_THAN_OR_EQUAL_TO,g.LESSER_THAN,g.LESSER_THAN_OR_EQUAL_TO];if(e instanceof d){var w=void 0;var C=void 0;if(c===_.DURING){w=Zn(u).format("YYYY-MM-DD");C=Zn(h).format("YYYY-MM-DD")}else if(c===_.EQUALS){w=Zn(s).format("YYYY-MM-DD");C=w}else if(c===_.BEGINS){w=Zn(s).format("YYYY-MM-DD");C=Zn(s).add(30,"years").format("YYYY-MM-DD")}else if(c===_.ENDS){w="1970-01-01";C=Zn(s).format("YYYY-MM-DD")}if(w&&C){a=x["during"](f,w,C)}}else if(e instanceof v["a"]){var E=e.selectedChoices;if(E.length===1){a=x["equalTo"](f,E[0])}else if(E.length>=2){var O=[];for(var T=E,M=Array.isArray(T),I=0,T=M?T:T[Symbol.iterator]();;){var R;if(M){if(I>=T.length)break;R=T[I++]}else{I=T.next();if(I.done)break;R=I.value}var N=R;O.push(x["equalTo"](f,N))}a=x["or"].apply(null,O)}}else if(S["f"](y,c)){var A=n.geometryName;i["a"].assertInstanceof(e,p["a"]);var L=i["a"].assert(e.geometry);if(c===m.CONTAINS){a=x["contains"](A,L,r)}else if(c===m.INTERSECTS){a=x["intersects"](A,L,r)}else if(c===m.WITHIN){a=x["within"](A,L,r)}}else if(S["f"](b,c)){var P=i["a"].assertNumber(s);if(c===g.GREATER_THAN){a=x["greaterThan"](f,P)}else if(c===g.GREATER_THAN_OR_EQUAL_TO){a=x["greaterThanOrEqualTo"](f,P)}else if(c===g.LESSER_THAN){a=x["lessThan"](f,P)}else if(c===g.LESSER_THAN_OR_EQUAL_TO){a=x["lessThanOrEqualTo"](f,P)}}else if(c===g.BETWEEN){a=x["between"](f,u,h)}else if(c===g.EQUAL_TO){a=x["equalTo"](f,s)}else if(c===g.LIKE){var D=String(s).replace(/!/g,"!!").replace(/\./g,"!.").replace(/\*/g,"!*");a=x["like"](f,"*"+D+"*","*",".","!",false)}else if(c===g.NOT_EQUAL_TO){a=x["notEqualTo"](f,s)}return a};t.prototype.createDimensionsFilterFromDataSource_=function t(e){var n=e.dimensionsFiltersConfig;var i=e.dimensions;var r=[];for(var a in n){var o=n[a].value;if(o===null){if(i[a]!==undefined&&i[a]!==null){o=i[a]}}if(o!==null){r.push(x["equalTo"](n[a].field,o,true))}}if(r.length===1){return r[0]}else if(r.length>=2){return x["and"].apply(null,r)}return null};t.prototype.createTimeFilterFromDataSource_=function t(e){var n=null;var i=e.timeRangeValue;var r=e.timeProperty;var a=e.timeAttributeName;if(i&&r&&a){if(i.end!==undefined){var o=this.ngeoWMSTime_.formatWMSTimeParam(r,i).split("/");n=x["during"](a,o[0],o[1])}else{var s=r.resolution||"seconds";var l=this.ngeoWMSTime_.formatWMSTimeParam(r,i);var u=void 0;switch(s){case"year":u=Zn(l).add(1,"years").subtract(1,"seconds");break;case"month":u=Zn(l).add(1,"months").subtract(1,"seconds");break;case"day":u=Zn(l).add(1,"days").subtract(1,"seconds");break;default:}if(u){var c=Zn(l).utc().format("YYYY-MM-DD HH:mm:ss");var f=u.utc().format("YYYY-MM-DD HH:mm:ss");n=x["during"](a,c,f)}}}return n};return t}();Jn.module=angular.module("ngeoRuleHelper",[o["a"].module.name,s["a"].module.name]);Jn.module.service("ngeoRuleHelper",Jn);var ti=e["a"]=Jn},function(t,e,n){"use strict";var i=angular.module("ngeoDebounce",[]);i.factory_=function(t){return function(e,n,i){var r=null;return function(){for(var a=arguments.length,o=Array(a),s=0;s<a;s++){o[s]=arguments[s]}var l=this;var u=function t(){r=null;e.apply(l,o)};if(r!==null){t.cancel(r)}r=t(u,n,i)}}};i.factory_.$inject=["$timeout"];i.factory("ngeoDebounce",i.factory_);e["a"]=i},function(t,e,n){"use strict";var i=n(2);var r=n(60);var a=function t(e,n){this.history_=n;this.schema_=e.protocol.substring(0,e.protocol.length-1);this.domain_=e.hostname;this.port_=e.port?parseInt(e.port,10):undefined;this.path_=e.pathname;this.queryData_=r["b"].decodeQueryString(e.search);this.fragment_=r["b"].decodeQueryString(e.hash)};a.replaceState=function(t,e){try{t.replaceState(null,"",e)}catch(t){}};a.prototype.getPath=function(){return this.path_};a.prototype.getUriString=function(){var t=[];if(this.schema_){t.push(this.schema_,":")}if(this.domain_||this.schema_==="file"){t.push("//");t.push(this.domain_);if(this.port_!==undefined){t.push(":",String(this.port_))}}if(this.path_){if(this.domain_&&this.path_.charAt(0)!=="/"){t.push("/")}t.push(this.path_)}var e=r["b"].encodeQueryString(this.queryData_);if(e.length>0){t.push("?",e)}var n=r["b"].encodeQueryString(this.fragment_);if(n.length>0){t.push("#",n)}return t.join("")};a.prototype.hasParam=function(t){return t in this.queryData_};a.prototype.hasFragmentParam=function(t){return t in this.fragment_};a.prototype.getParam=function(t){return this.queryData_[t]};a.prototype.getFragmentParam=function(t){return this.fragment_[t]};a.prototype.getParamAsInt=function(t){var e=this.getParam(t);if(e===undefined){return undefined}i["a"].assertString(e);var n=parseInt(e,10);return isNaN(n)?undefined:n};a.prototype.getParamAsFloat=function(t){var e=this.getParam(t);if(e===undefined){return undefined}i["a"].assertString(e);var n=parseFloat(e);return isNaN(n)?undefined:n};a.prototype.getFragmentParamAsInt=function(t){var e=this.getFragmentParam(t);if(e===undefined){return undefined}i["a"].assertString(e);var n=parseInt(e,10);return isNaN(n)?undefined:n};a.prototype.getParamKeys=function(){var t=[];for(var e in this.queryData_){t.push(e)}return t};a.prototype.getFragmentParamKeys=function(){var t=[];for(var e in this.fragment_){t.push(e)}return t};a.prototype.getParamKeysWithPrefix=function(t){var e=[];for(var n in this.queryData_){if(n.indexOf(t)==0){e.push(n)}}return e};a.prototype.getFragmentParamKeysWithPrefix=function(t){var e=[];for(var n in this.fragment_){if(n.indexOf(t)==0){e.push(n)}}return e};a.prototype.updateParams=function(t){for(var e in t){this.queryData_[e]=t[e]}};a.prototype.updateFragmentParams=function(t){for(var e in t){this.fragment_[e]=t[e]}};a.prototype.deleteParam=function(t){delete this.queryData_[t]};a.prototype.deleteFragmentParam=function(t){delete this.fragment_[t]};a.prototype.refresh=function(){a.replaceState(this.history_,this.getUriString())};a.prototype.setPath=function(t){this.path_=t};a.LocationFactory=function(t,e){var n=e.history;var i=new a(e.location,e.history);var r=i.getUriString();t.$watch(function(){var e=i.getUriString();if(r!==e){t.$evalAsync(function(){r=e;if(n!==undefined&&n.replaceState!==undefined){a.replaceState(n,e)}t.$broadcast("ngeoLocationChange")})}});return i};a.LocationFactory.$inject=["$rootScope","$window"];a.MockProvider=function(t){t["$get"]=function(){var t={absUrl:function t(){return""},hash:function t(e){return e!==undefined?this:""},host:function t(){return""},path:function t(e){return e!==undefined?this:""},port:function t(){return 0},protocol:function t(){return""},replace:function t(){},search:function t(e,n){return e!==undefined?this:{}},url:function t(e){return""}};return t}};a.MockProvider.$inject=["$locationProvider"];a.module=angular.module("ngeoLocation",[]);a.module.factory("ngeoLocation",a.LocationFactory);e["a"]=a},function(t,e,n){"use strict";n.d(e,"a",function(){return i});n.d(e,"b",function(){return r});function i(t,e,n,i,r,a,o){var s=new Date(t,e,n,i,r,a,o);if(t<100&&t>=0&&isFinite(s.getFullYear())){s.setFullYear(t)}return s}function r(t){var e=new Date(Date.UTC.apply(null,arguments));if(t<100&&t>=0&&isFinite(e.getUTCFullYear())){e.setUTCFullYear(t)}return e}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});n.d(e,"b",function(){return o});n.d(e,"e",function(){return u});n.d(e,"c",function(){return f});n.d(e,"d",function(){return h});var i=n(15);function r(t,e,n,i,r,o,s){var u=s!==undefined?s:[];if(!o){n=l(t,e,n,i,r,u,0);t=u;e=0;i=2}u.length=a(t,e,n,i,r,u,0);return u}function a(t,e,n,r,a,o,s){var l=(n-e)/r;if(l<3){for(;e<n;e+=r){o[s++]=t[e];o[s++]=t[e+1]}return s}var u=new Array(l);u[0]=1;u[l-1]=1;var c=[e,n-r];var f=0;while(c.length>0){var h=c.pop();var d=c.pop();var p=0;var v=t[d];var g=t[d+1];var m=t[h];var _=t[h+1];for(var y=d+r;y<h;y+=r){var b=t[y];var w=t[y+1];var x=Object(i["g"])(b,w,v,g,m,_);if(x>p){f=y;p=x}}if(p>a){u[(f-e)/r]=1;if(d+r<f){c.push(d,f)}if(f+r<h){c.push(f,h)}}}for(var S=0;S<l;++S){if(u[S]){o[s++]=t[e+S*r];o[s++]=t[e+S*r+1]}}return s}function o(t,e,n,i,r,o,s,l){for(var u=0,c=n.length;u<c;++u){var f=n[u];s=a(t,e,f,i,r,o,s);l.push(s);e=f}return s}function s(t,e,n,i,r,a,s,l){for(var u=0,c=n.length;u<c;++u){var f=n[u];var h=[];s=o(t,e,f,i,r,a,s,h);l.push(h);e=f[f.length-1]}return s}function l(t,e,n,r,a,o,s){if(n<=e+r){for(;e<n;e+=r){o[s++]=t[e];o[s++]=t[e+1]}return s}var l=t[e];var u=t[e+1];o[s++]=l;o[s++]=u;var c=l;var f=u;for(e+=r;e<n;e+=r){c=t[e];f=t[e+1];if(Object(i["f"])(l,u,c,f)>a){o[s++]=c;o[s++]=f;l=c;u=f}}if(c!=l||f!=u){o[s++]=c;o[s++]=f}return s}function u(t,e){return e*Math.round(t/e)}function c(t,e,n,i,r,a,o){if(e==n){return o}var s=u(t[e],r);var l=u(t[e+1],r);e+=i;a[o++]=s;a[o++]=l;var c=void 0,f=void 0;do{c=u(t[e],r);f=u(t[e+1],r);e+=i;if(e==n){a[o++]=c;a[o++]=f;return o}}while(c==s&&f==l);while(e<n){var h=u(t[e],r);var d=u(t[e+1],r);e+=i;if(h==c&&d==f){continue}var p=c-s;var v=f-l;var g=h-s;var m=d-l;if(p*m==v*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(v<0&&m<v||v==m||v>0&&m>v)){c=h;f=d;continue}a[o++]=c;a[o++]=f;s=c;l=f;c=h;f=d}a[o++]=c;a[o++]=f;return o}function f(t,e,n,i,r,a,o,s){for(var l=0,u=n.length;l<u;++l){var f=n[l];o=c(t,e,f,i,r,a,o);s.push(o);e=f}return o}function h(t,e,n,i,r,a,o,s){for(var l=0,u=n.length;l<u;++l){var c=n[l];var h=[];o=f(t,e,c,i,r,a,o,h);s.push(h);e=c[c.length-1]}return o}},function(t,e,n){"use strict";e["a"]={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});function i(t){return typeof t==="number"||Object.prototype.toString.call(t)==="[object Number]"}},function(t,e,n){"use strict";var i=n(1);var r=n(4);var a=n(25);var o=n(8);var s=n(69);var l=n(134);var u=function t(e,n,i){s["a"].call(this);var r=n?n:0;this.setCenterAndRadius(e,r,i)};Object(i["d"])(u,s["a"]);u.prototype.clone=function(){var t=new u(null);t.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return t};u.prototype.closestPointXY=function(t,e,n,i){var r=this.flatCoordinates;var a=t-r[0];var o=e-r[1];var s=a*a+o*o;if(s<i){if(s===0){for(var l=0;l<this.stride;++l){n[l]=r[l]}}else{var u=this.getRadius()/Math.sqrt(s);n[0]=r[0]+u*a;n[1]=r[1]+u*o;for(var c=2;c<this.stride;++c){n[c]=r[c]}}n.length=this.stride;return s}else{return i}};u.prototype.containsXY=function(t,e){var n=this.flatCoordinates;var i=t-n[0];var r=e-n[1];return i*i+r*r<=this.getRadiusSquared_()};u.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)};u.prototype.computeExtent=function(t){var e=this.flatCoordinates;var n=e[this.stride]-e[0];return Object(r["k"])(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)};u.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())};u.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0];var e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e};u.prototype.getType=function(){return o["a"].CIRCLE};u.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(r["F"])(t,e)){var n=this.getCenter();if(t[0]<=n[0]&&t[2]>=n[0]){return true}if(t[1]<=n[1]&&t[3]>=n[1]){return true}return Object(r["t"])(t,this.intersectsCoordinate,this)}return false};u.prototype.setCenter=function(t){var e=this.stride;var n=this.flatCoordinates[e]-this.flatCoordinates[0];var i=t.slice();i[e]=i[0]+n;for(var r=1;r<e;++r){i[e+r]=t[r]}this.setFlatCoordinates(this.layout,i)};u.prototype.setCenterAndRadius=function(t,e,n){if(!t){this.setFlatCoordinates(a["a"].XY,null)}else{this.setLayout(n,t,0);if(!this.flatCoordinates){this.flatCoordinates=[]}var i=this.flatCoordinates;var r=Object(l["a"])(i,0,t,this.stride);i[r++]=i[0]+e;for(var o=1,s=this.stride;o<s;++o){i[r++]=i[o]}i.length=r;this.changed()}};u.prototype.getCoordinates=function(){};u.prototype.setCoordinates=function(t,e){};u.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e);this.changed()};u.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t;this.changed()};u.prototype.transform;e["a"]=u},function(t,e,n){"use strict";var i=n(85);var r=function t(e){this.code_=e.code;this.units_=e.units;this.extent_=e.extent!==undefined?e.extent:null;this.worldExtent_=e.worldExtent!==undefined?e.worldExtent:null;this.axisOrientation_=e.axisOrientation!==undefined?e.axisOrientation:"enu";this.global_=e.global!==undefined?e.global:false;this.canWrapX_=!!(this.global_&&this.extent_);this.getPointResolutionFunc_=e.getPointResolution;this.defaultTileGrid_=null;this.metersPerUnit_=e.metersPerUnit};r.prototype.canWrapX=function(){return this.canWrapX_};r.prototype.getCode=function(){return this.code_};r.prototype.getExtent=function(){return this.extent_};r.prototype.getUnits=function(){return this.units_};r.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||i["a"][this.units_]};r.prototype.getWorldExtent=function(){return this.worldExtent_};r.prototype.getAxisOrientation=function(){return this.axisOrientation_};r.prototype.isGlobal=function(){return this.global_};r.prototype.setGlobal=function(t){this.global_=t;this.canWrapX_=!!(t&&this.extent_)};r.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_};r.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t};r.prototype.setExtent=function(t){this.extent_=t;this.canWrapX_=!!(this.global_&&t)};r.prototype.setWorldExtent=function(t){this.worldExtent_=t};r.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t};r.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};e["a"]=r},function(t,e,n){"use strict";e["a"]={PROPERTYCHANGE:"propertychange"}},function(t,e,n){"use strict";var i=n(1);var r=n(198);var a=n(7);var o=n(4);var s=n(9);var l=n(10);var u=n(202);var c={KVP:"KVP",REST:"REST"};var f=n(367);var h=n(131);n.d(e,"b",function(){return p});var d=function t(e){this.version_=e.version!==undefined?e.version:"1.0.0";this.format_=e.format!==undefined?e.format:"image/jpeg";this.dimensions_=e.dimensions!==undefined?e.dimensions:{};this.layer_=e.layer;this.matrixSet_=e.matrixSet;this.style_=e.style;var n=e.urls;if(n===undefined&&e.url!==undefined){n=Object(r["c"])(e.url)}this.requestEncoding_=e.requestEncoding!==undefined?e.requestEncoding:c.KVP;var i=this.requestEncoding_;var a=e.tileGrid;var o={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};if(i==c.KVP){Object(s["a"])(o,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_})}var l=this.dimensions_;this.createFromWMTSTemplate_=function(t){t=i==c.KVP?Object(h["a"])(t,o):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in o?o[e.toLowerCase()]:t});return function(e,n,r){if(!e){return undefined}else{var o={TileMatrix:a.getMatrixId(e[0]),TileCol:e[1],TileRow:-e[2]-1};Object(s["a"])(o,l);var u=t;if(i==c.KVP){u=Object(h["a"])(u,o)}else{u=u.replace(/\{(\w+?)\}/g,function(t,e){return o[e]})}return u}}};var f=n&&n.length>0?Object(r["b"])(n.map(this.createFromWMTSTemplate_)):r["d"];u["a"].call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:a,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:f,urls:n,wrapX:e.wrapX!==undefined?e.wrapX:false,transition:e.transition});this.setKey(this.getKeyForDimensions_())};Object(i["d"])(d,u["a"]);d.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Object(r["b"])(t.map(this.createFromWMTSTemplate_.bind(this))),e)};d.prototype.getDimensions=function(){return this.dimensions_};d.prototype.getFormat=function(){return this.format_};d.prototype.getLayer=function(){return this.layer_};d.prototype.getMatrixSet=function(){return this.matrixSet_};d.prototype.getRequestEncoding=function(){return this.requestEncoding_};d.prototype.getStyle=function(){return this.style_};d.prototype.getVersion=function(){return this.version_};d.prototype.getKeyForDimensions_=function(){var t=0;var e=[];for(var n in this.dimensions_){e[t++]=n+"-"+this.dimensions_[n]}return e.join("/")};d.prototype.updateDimensions=function(t){Object(s["a"])(this.dimensions_,t);this.setKey(this.getKeyForDimensions_())};function p(t,e){var n=t["Contents"]["Layer"];var i=Object(a["d"])(n,function(t,n,i){return t["Identifier"]==e["layer"]});if(i===null){return null}var r=t["Contents"]["TileMatrixSet"];var s=void 0;if(i["TileMatrixSetLink"].length>1){if("projection"in e){s=Object(a["e"])(i["TileMatrixSetLink"],function(t,n,i){var o=Object(a["d"])(r,function(e){return e["Identifier"]==t["TileMatrixSet"]});var s=o["SupportedCRS"];var u=Object(l["h"])(s.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(l["h"])(s);var c=Object(l["h"])(e["projection"]);if(u&&c){return Object(l["f"])(u,c)}else{return s==e["projection"]}})}else{s=Object(a["e"])(i["TileMatrixSetLink"],function(t,n,i){return t["TileMatrixSet"]==e["matrixSet"]})}}else{s=0}if(s<0){s=0}var u=i["TileMatrixSetLink"][s]["TileMatrixSet"];var h=i["TileMatrixSetLink"][s]["TileMatrixSetLimits"];var d=i["Format"][0];if("format"in e){d=e["format"]}s=Object(a["e"])(i["Style"],function(t,n,i){if("style"in e){return t["Title"]==e["style"]}else{return t["isDefault"]}});if(s<0){s=0}var p=i["Style"][s]["Identifier"];var v={};if("Dimension"in i){i["Dimension"].forEach(function(t,e,n){var i=t["Identifier"];var r=t["Default"];if(r===undefined){r=t["Value"][0]}v[i]=r})}var g=t["Contents"]["TileMatrixSet"];var m=Object(a["d"])(g,function(t,e,n){return t["Identifier"]==u});var _=void 0;var y=m["SupportedCRS"];if(y){_=Object(l["h"])(y.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(l["h"])(y)}if("projection"in e){var b=Object(l["h"])(e["projection"]);if(b){if(!_||Object(l["f"])(b,_)){_=b}}}var w=i["WGS84BoundingBox"];var x=void 0,S=void 0;if(w!==undefined){var C=Object(l["h"])("EPSG:4326").getExtent();S=w[0]==C[0]&&w[2]==C[2];x=Object(l["o"])(w,"EPSG:4326",_);var E=_.getExtent();if(E){if(!Object(o["g"])(E,x)){x=undefined}}}var O=Object(f["a"])(m,x,h);var T=[];var M=e["requestEncoding"];M=M!==undefined?M:"";if("OperationsMetadata"in t&&"GetTile"in t["OperationsMetadata"]){var I=t["OperationsMetadata"]["GetTile"]["DCP"]["HTTP"]["Get"];for(var R=0,N=I.length;R<N;++R){if(I[R]["Constraint"]){var A=Object(a["d"])(I[R]["Constraint"],function(t){return t["name"]=="GetEncoding"});var L=A["AllowedValues"]["Value"];if(M===""){M=L[0]}if(M===c.KVP){if(Object(a["f"])(L,c.KVP)){T.push(I[R]["href"])}}else{break}}else if(I[R]["href"]){M=c.KVP;T.push(I[R]["href"])}}}if(T.length===0){M=c.REST;i["ResourceURL"].forEach(function(t){if(t["resourceType"]==="tile"){d=t["format"];T.push(t["template"])}})}return{urls:T,layer:e["layer"],matrixSet:u,format:d,projection:_,requestEncoding:M,tileGrid:O,style:p,dimensions:v,wrapX:S,crossOrigin:e["crossOrigin"]}}var v=e["a"]=d},function(t,e,n){"use strict";var i=function t(e,n){this.dispatcher=e;this.mapping_=n};i.prototype.getEvents=function(){return Object.keys(this.mapping_)};i.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};e["a"]=i},function(t,e,n){"use strict";e["a"]={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});n.d(e,"b",function(){return a});n.d(e,"c",function(){return o});n.d(e,"d",function(){return s});var i=n(4);function r(t,e,n,r,o){var s=Object(i["t"])(o,function(i){return!a(t,e,n,r,i[0],i[1])});return!s}function a(t,e,n,i,r,a){var o=0;var s=t[n-i];var l=t[n-i+1];for(;e<n;e+=i){var u=t[e];var c=t[e+1];if(l<=a){if(c>a&&(u-s)*(a-l)-(r-s)*(c-l)>0){o++}}else if(c<=a&&(u-s)*(a-l)-(r-s)*(c-l)<0){o--}s=u;l=c}return o!==0}function o(t,e,n,i,r,o){if(n.length===0){return false}if(!a(t,e,n[0],i,r,o)){return false}for(var s=1,l=n.length;s<l;++s){if(a(t,n[s-1],n[s],i,r,o)){return false}}return true}function s(t,e,n,i,r,a){if(n.length===0){return false}for(var s=0,l=n.length;s<l;++s){var u=n[s];if(o(t,e,u,i,r,a)){return true}e=u[u.length-1]}return false}},function(t,e,n){"use strict";n.d(e,"c",function(){return r});n.d(e,"d",function(){return a});n.d(e,"a",function(){return o});n.d(e,"b",function(){return s});var i=n(15);function r(t,e){if(t!==undefined){return 0}else{return undefined}}function a(t,e){if(t!==undefined){return t+e}else{return undefined}}function o(t){var e=2*Math.PI/t;return function(t,n){if(t!==undefined){t=Math.floor((t+n)/e+.5)*e;return t}else{return undefined}}}function s(t){var e=t||Object(i["i"])(5);return function(t,n){if(t!==undefined){if(Math.abs(t+n)<=e){return 0}else{return t+n}}else{return undefined}}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});function i(t,e,n){var i=""+Math.abs(t),r=e-i.length,a=t>=0;return(a?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}},function(t,e,n){"use strict";var i=n(75);var r=n(23);var a=n(216);var o=function t(e,n,i,r,a){this.$rootScope_=e;this.gmfThemes_=n;this.modeFlush=i;this.gmfTreeManager_=r;this.ngeoStateManager_=a;this.themeName_=""};o.$inject=["$rootScope","gmfThemes","gmfTreeManagerModeFlush","gmfTreeManager","ngeoStateManager"];o.$inject=["$rootScope","gmfThemes","gmfTreeManagerModeFlush","gmfTreeManager","ngeoStateManager"];o.prototype.addTheme=function(t,e){if(this.modeFlush){this.ngeoStateManager_.updateState({theme:t.name});this.setThemeName(t.name);this.gmfTreeManager_.setFirstLevelGroups(t.children)}else{this.gmfTreeManager_.addFirstLevelGroups(t.children,false,e)}};o.prototype.getThemeName=function(){return this.themeName_};o.prototype.isLoading=function(){return!this.gmfThemes_.loaded};o.prototype.updateCurrentTheme=function(t,e,n){var i=this;this.gmfThemes_.getThemesObject().then(function(a){if(!t&&i.modeFlush){var o=r["a"].findThemeByName(a,e);if(o){i.gmfTreeManager_.addFirstLevelGroups(o.children,false,n)}}if(t){var s=r["a"].findThemeByName(a,t);if(s){i.addTheme(s,true)}}else{i.setThemeName(e)}})};o.prototype.setThemeName=function(t,e){this.themeName_=t;if(!e){this.$rootScope_.$emit(o.EventType.THEME_NAME_SET,t)}};o.prototype.removeAll=function(){this.gmfTreeManager_.removeAll()};o.EventType={THEME_NAME_SET:"gmf-thememanager-theme_name_set"};o.module=angular.module("gmfThemeManager",[i["a"].module.name,r["a"].module.name,a["a"].module.name]);o.module.value("gmfTreeManagerModeFlush",true);o.module.service("gmfThemeManager",o);e["a"]=o},function(t,e,n){"use strict";var i=n(2);var r=n(355);var a=n(45);var o=n(1);var s=n(143);var l=function t(){s["a"].call(this)};o["d"](l,s["a"]);l.prototype.read=function(t){return s["a"].prototype.read.call(this,t)};l.prototype.readFromDocument=function(t){i["a"].assert(t.nodeType==Node.DOCUMENT_NODE,"doc.nodeType should be DOCUMENT");for(var e=t.firstChild;e;e=e.nextSibling){if(e.nodeType==Node.ELEMENT_NODE){return this.readFromNode(e)}}return null};l.prototype.readFromNode=function(t){i["a"].assert(t.nodeType==Node.ELEMENT_NODE,"node.nodeType should be ELEMENT");i["a"].assert(t.localName=="schema","localName should be schema");var e=t.getElementsByTagName("element");if(!e.length){e=t.getElementsByTagName("xsd:element")}var n=[];var r=void 0;for(var a=0,o=e.length;a<o;a++){r=this.readFromElementNode_(e[a]);if(r){n.push(r)}}return n};l.prototype.readFromElementNode_=function(t){var e=t.getAttribute("name");i["a"].assertString(e,"name should be defined in element node.");var n=t.getAttribute("alias");var o=t.getAttribute("nillable");var s=!(o===true||o==="true");var l={name:e,alias:n,required:s};var u=t.getAttribute("type");if(u){if(!r["a"].setGeometryType(l,u)){this.setAttributeByXsdType_(l,u)}}else{var c=t.getElementsByTagName("enumeration");if(!c.length){c=t.getElementsByTagName("xsd:enumeration")}if(c.length){l.type=a["a"].SELECT;var f=[];for(var h=0,d=c.length;h<d;h++){f.push(c[h].getAttribute("value"))}l.choices=f}else{var p=t.getElementsByTagName("restriction");if(!p.length){p=t.getElementsByTagName("xsd:restriction")}if(p.length&&p[0]){var v=p[0];this.setAttributeByXsdType_(l,v.getAttribute("base"));var g=t.getElementsByTagName("maxLength");if(!g.length){g=t.getElementsByTagName("xsd:maxLength")}if(g.length&&g[0]){l.maxLength=Number(g[0].getAttribute("value"))}}}}if(!l.type){return null}i["a"].assert(l.type);return l};l.prototype.setAttributeByXsdType_=function(t,e){if(e==="xsd:boolean"){t.type=a["a"].BOOLEAN}else if(e==="xsd:date"){t.type=a["a"].DATE}else if(e==="xsd:dateTime"){t.type=a["a"].DATETIME}else if(e==="xsd:time"){t.type=a["a"].TIME}else if(e==="xsd:decimal"||e==="xsd:double"){t.type=a["a"].NUMBER;t.numType=l.NumberType.FLOAT}else if(e==="xsd:integer"){t.type=a["a"].NUMBER;t.numType=l.NumberType.INTEGER}else if(e==="xsd:string"){t.type=a["a"].TEXT}};l.getGeometryAttribute=function(t){var e=null;for(var n=0,i=t.length;n<i;n++){if(t[n].type===a["a"].GEOMETRY){e=t[n];break}}return e};l.NumberType={FLOAT:"float",INTEGER:"integer"};e["a"]=l},function(t,e,n){"use strict";var i=n(235);var r=n(1);var a=n(27);var o=n(4);var s=n(9);var l=n(15);var u=n(10);var c=n(194);var f=n(104);var h=n(202);var d=n(199);var p=n(125);var v=n(142);var g=n(131);var m=function t(e){var n=e||{};var i=n.params||{};var r="TRANSPARENT"in i?i["TRANSPARENT"]:true;h["a"].call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:!r,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,url:n.url,urls:n.urls,wrapX:n.wrapX!==undefined?n.wrapX:true,transition:n.transition});this.gutter_=n.gutter!==undefined?n.gutter:0;this.params_=i;this.v13_=true;this.serverType_=n.serverType;this.hidpi_=n.hidpi!==undefined?n.hidpi:true;this.tmpExtent_=Object(o["j"])();this.updateV13_();this.setKey(this.getKeyForParams_())};Object(r["d"])(m,h["a"]);m.prototype.getGetFeatureInfoUrl=function(t,e,n,r){var a=Object(u["h"])(n);var l=this.getProjection();var h=this.getTileGrid();if(!h){h=this.getTileGridForProjection(a)}var d=h.getTileCoordForCoordAndResolution(t,e);if(h.getResolutions().length<=d[0]){return undefined}var p=h.getResolution(d[0]);var v=h.getTileCoordExtent(d,this.tmpExtent_);var g=Object(f["d"])(h.getTileSize(d[0]),this.tmpSize);var m=this.gutter_;if(m!==0){g=Object(f["a"])(g,m,this.tmpSize);v=Object(o["c"])(v,p*m,v)}if(l&&l!==a){p=Object(c["a"])(l,a,t,p);v=Object(u["o"])(v,a,l);t=Object(u["n"])(t,a,l)}var _={SERVICE:"WMS",VERSION:i["a"],REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:true,QUERY_LAYERS:this.params_["LAYERS"]};Object(s["a"])(_,this.params_,r);var y=Math.floor((t[0]-v[0])/p);var b=Math.floor((v[3]-t[1])/p);_[this.v13_?"I":"X"]=y;_[this.v13_?"J":"Y"]=b;return this.getRequestUrl_(d,g,v,1,l||a,_)};m.prototype.getGutterInternal=function(){return this.gutter_};m.prototype.getParams=function(){return this.params_};m.prototype.getRequestUrl_=function(t,e,n,i,r,o){var s=this.urls;if(!s){return undefined}o["WIDTH"]=e[0];o["HEIGHT"]=e[1];o[this.v13_?"CRS":"SRS"]=r.getCode();if(!("STYLES"in this.params_)){o["STYLES"]=""}if(i!=1){switch(this.serverType_){case d["a"].GEOSERVER:var u=90*i+.5|0;if("FORMAT_OPTIONS"in o){o["FORMAT_OPTIONS"]+=";dpi:"+u}else{o["FORMAT_OPTIONS"]="dpi:"+u}break;case d["a"].MAPSERVER:o["MAP_RESOLUTION"]=90*i;break;case d["a"].CARMENTA_SERVER:case d["a"].QGIS:o["DPI"]=90*i;break;default:Object(a["a"])(false,52);break}}var c=r.getAxisOrientation();var f=n;if(this.v13_&&c.substr(0,2)=="ne"){var h=void 0;h=n[0];f[0]=n[1];f[1]=h;h=n[2];f[2]=n[3];f[3]=h}o["BBOX"]=f.join(",");var v=void 0;if(s.length==1){v=s[0]}else{var m=Object(l["d"])(Object(p["e"])(t),s.length);v=s[m]}return Object(g["a"])(v,o)};m.prototype.getTilePixelRatio=function(t){return!this.hidpi_||this.serverType_===undefined?1:t};m.prototype.getKeyForParams_=function(){var t=0;var e=[];for(var n in this.params_){e[t++]=n+"-"+this.params_[n]}return e.join("/")};m.prototype.fixedTileUrlFunction=function(t,e,n){var r=this.getTileGrid();if(!r){r=this.getTileGridForProjection(n)}if(r.getResolutions().length<=t[0]){return undefined}if(e!=1&&(!this.hidpi_||this.serverType_===undefined)){e=1}var a=r.getResolution(t[0]);var l=r.getTileCoordExtent(t,this.tmpExtent_);var u=Object(f["d"])(r.getTileSize(t[0]),this.tmpSize);var c=this.gutter_;if(c!==0){u=Object(f["a"])(u,c,this.tmpSize);l=Object(o["c"])(l,a*c,l)}if(e!=1){u=Object(f["c"])(u,e,this.tmpSize)}var h={SERVICE:"WMS",VERSION:i["a"],REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:true};Object(s["a"])(h,this.params_);return this.getRequestUrl_(t,u,l,e,n,h)};m.prototype.updateParams=function(t){Object(s["a"])(this.params_,t);this.updateV13_();this.setKey(this.getKeyForParams_())};m.prototype.updateV13_=function(){var t=this.params_["VERSION"]||i["a"];this.v13_=Object(v["a"])(t,"1.3")>=0};e["a"]=m},function(t,e,n){"use strict";e["a"]={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"}},function(t,e,n){"use strict";var i=n(1);var r=n(39);var a=n(100);var o=n(15);var s=n(9);var l=function t(e){r["a"].call(this);var n=Object(s["a"])({},e);n[a["a"].OPACITY]=e.opacity!==undefined?e.opacity:1;n[a["a"].VISIBLE]=e.visible!==undefined?e.visible:true;n[a["a"].Z_INDEX]=e.zIndex!==undefined?e.zIndex:0;n[a["a"].MAX_RESOLUTION]=e.maxResolution!==undefined?e.maxResolution:Infinity;n[a["a"].MIN_RESOLUTION]=e.minResolution!==undefined?e.minResolution:0;this.setProperties(n);this.state_={layer:this,managed:true};this.type};Object(i["d"])(l,r["a"]);l.prototype.getType=function(){return this.type};l.prototype.getLayerState=function(){this.state_.opacity=Object(o["a"])(this.getOpacity(),0,1);this.state_.sourceState=this.getSourceState();this.state_.visible=this.getVisible();this.state_.extent=this.getExtent();this.state_.zIndex=this.getZIndex();this.state_.maxResolution=this.getMaxResolution();this.state_.minResolution=Math.max(this.getMinResolution(),0);return this.state_};l.prototype.getLayersArray=function(t){};l.prototype.getLayerStatesArray=function(t){};l.prototype.getExtent=function(){return this.get(a["a"].EXTENT)};l.prototype.getMaxResolution=function(){return this.get(a["a"].MAX_RESOLUTION)};l.prototype.getMinResolution=function(){return this.get(a["a"].MIN_RESOLUTION)};l.prototype.getOpacity=function(){return this.get(a["a"].OPACITY)};l.prototype.getSourceState=function(){};l.prototype.getVisible=function(){return this.get(a["a"].VISIBLE)};l.prototype.getZIndex=function(){return this.get(a["a"].Z_INDEX)};l.prototype.setExtent=function(t){this.set(a["a"].EXTENT,t)};l.prototype.setMaxResolution=function(t){this.set(a["a"].MAX_RESOLUTION,t)};l.prototype.setMinResolution=function(t){this.set(a["a"].MIN_RESOLUTION,t)};l.prototype.setOpacity=function(t){this.set(a["a"].OPACITY,t)};l.prototype.setVisible=function(t){this.set(a["a"].VISIBLE,t)};l.prototype.setZIndex=function(t){this.set(a["a"].Z_INDEX,t)};e["a"]=l},function(t,e,n){"use strict";var i=n(188);var r=n(160);var a=n(14);var o=function t(e,n,i){this.q_=e;this.gmfEditFeature_=n;this.ngeoLocation_=i;this.getFeatureDefered_=null};o.$inject=["$q","gmfEditFeature","ngeoLocation"];o.$inject=["$q","gmfEditFeature","ngeoLocation"];o.prototype.getFeature=function(){if(!this.getFeatureDefered_){this.getFeatureDefered_=this.q_.defer();var t=this.ngeoLocation_.getParam(o.Param.GEOM_TYPE);var e=this.ngeoLocation_.getParam(o.Param.ID);var n=this.ngeoLocation_.getParam(o.Param.LAYER);var i=this.ngeoLocation_.getParam(o.Param.PROPERTY);var r=this.ngeoLocation_.getParam(o.Param.THEME);if(t&&e&&n&&i&&r){this.gmfEditFeature_.getFeaturesWithComparisonFilters([n],[{operator:"eq",property:i,value:e}]).then(this.handleGetFeatures_.bind(this,i,e))}else{this.getFeatureDefered_.resolve(null)}}return this.getFeatureDefered_.promise};o.prototype.getGeomType=function(){return this.ngeoLocation_.getParam(o.Param.GEOM_TYPE)};o.prototype.getLayerNodeId=function(){return this.ngeoLocation_.getParamAsInt(o.Param.LAYER)};o.prototype.handleGetFeatures_=function(t,e,n){var i=void 0;if(n.length){i=n[0]}else{var r={};r[t]=e;r["geometry"]=null;i=new a["a"](r)}this.getFeatureDefered_.resolve(i)};o.Param={GEOM_TYPE:"objectediting_geomtype",ID:"objectediting_id",LAYER:"objectediting_layer",PROPERTY:"objectediting_property",THEME:"objectediting_theme"};o.module=angular.module("gmfObjectEditingManager",[i["a"].module.name,r["a"].module.name]);o.module.service("gmfObjectEditingManager",o);e["a"]=o},function(t,e,n){"use strict";var i={AND:"&&",NOT:"!",OR:"||"};e["a"]=i},function(t,e,n){"use strict";n.d(e,"b",function(){return a});n.d(e,"a",function(){return o});n.d(e,"c",function(){return l});var i=n(9);var r={};function a(){r={}}function o(t,e,n){var i=t.getCode();var a=e.getCode();if(!(i in r)){r[i]={}}r[i][a]=n}function s(t,e){var n=t.getCode();var a=e.getCode();var o=r[n][a];delete r[n][a];if(Object(i["d"])(r[n])){delete r[n]}return o}function l(t,e){var n=void 0;if(t in r&&e in r[t]){n=r[t][e]}return n}},function(t,e,n){(function(t){+function(t){"use strict";var e=".dropdown-backdrop";var n='[data-toggle="dropdown"]';var i=function(e){t(e).on("click.bs.dropdown",this.toggle)};i.VERSION="3.3.7";function r(e){var n=e.attr("data-target");if(!n){n=e.attr("href");n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")}var i=n&&t(n);return i&&i.length?i:e.parent()}function a(i){if(i&&i.which===3)return;t(e).remove();t(n).each(function(){var e=t(this);var n=r(e);var a={relatedTarget:this};if(!n.hasClass("open"))return;if(i&&i.type=="click"&&/input|textarea/i.test(i.target.tagName)&&t.contains(n[0],i.target))return;n.trigger(i=t.Event("hide.bs.dropdown",a));if(i.isDefaultPrevented())return;e.attr("aria-expanded","false");n.removeClass("open").trigger(t.Event("hidden.bs.dropdown",a))})}i.prototype.toggle=function(e){var n=t(this);if(n.is(".disabled, :disabled"))return;var i=r(n);var o=i.hasClass("open");a();if(!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length){t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",a)}var s={relatedTarget:this};i.trigger(e=t.Event("show.bs.dropdown",s));if(e.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger(t.Event("shown.bs.dropdown",s))}return false};i.prototype.keydown=function(e){if(!/(38|40|27|32)/.test(e.which)||/input|textarea/i.test(e.target.tagName))return;var i=t(this);e.preventDefault();e.stopPropagation();if(i.is(".disabled, :disabled"))return;var a=r(i);var o=a.hasClass("open");if(!o&&e.which!=27||o&&e.which==27){if(e.which==27)a.find(n).trigger("focus");return i.trigger("click")}var s=" li:not(.disabled):visible a";var l=a.find(".dropdown-menu"+s);if(!l.length)return;var u=l.index(e.target);if(e.which==38&&u>0)u--;if(e.which==40&&u<l.length-1)u++;if(!~u)u=0;l.eq(u).trigger("focus")};function o(e){return this.each(function(){var n=t(this);var r=n.data("bs.dropdown");if(!r)n.data("bs.dropdown",r=new i(this));if(typeof e=="string")r[e].call(n)})}var s=t.fn.dropdown;t.fn.dropdown=o;t.fn.dropdown.Constructor=i;t.fn.dropdown.noConflict=function(){t.fn.dropdown=s;return this};t(document).on("click.bs.dropdown.data-api",a).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",n,i.prototype.toggle).on("keydown.bs.dropdown.data-api",n,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(t)}).call(this,n(38))},function(t,e,n){"use strict";var i=n(223);var r=n(87);var a=n(222);var o=n(221);function s(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var l=angular.module("gmfAuthentication",[i["a"].module.name,a["a"].module.name,o["a"].name]);l.gmfAuthenticationTemplateUrl_=function(t,e){var n=e["gmfAuthenticationTemplateurl"];return n!==undefined?n:"gmf/authentication"};l.run(["$templateCache",function(t){t.put("gmf/authentication",n(528))}]);u.$inject=["$element","$attrs","gmfAuthenticationTemplateUrl"];function u(t,e,n){return n(t,e)}l.component_={bindings:{allowPasswordReset:"<?gmfAuthenticationAllowPasswordReset",allowPasswordChange:"<?gmfAuthenticationAllowPasswordChange",passwordValidator:"<?gmfAuthenticationPasswordValidator",forcePasswordChange:"<?gmfAuthenticationForcePasswordChange",infoMessage:"=?gmfAuthenticationInfoMessage"},controller:"GmfAuthenticationController",templateUrl:u};l.value("gmfAuthenticationTemplateUrl",l.gmfAuthenticationTemplateUrl_);l.component("gmfAuthentication",l.component_);l.AuthenticationController_=function(){t.$inject=["$element","gettextCatalog","gmfAuthenticationService","gmfUser","ngeoNotification"];function t(e,n,i,r,a){s(this,t);this.$element_=e;this.gmfUser=r;this.gettextCatalog=n;this.gmfAuthenticationService_=i;this.notification_=a;this.allowPasswordReset;this.allowPasswordChange;this.passwordValidator=null;this.forcePasswordChange;this.infoMessage=null;this.changingPassword=false;this.userMustChangeItsPassword=false;this.resetPasswordModalShown=false;this.error=false;this.loginVal="";this.pwdVal="";this.oldPwdVal="";this.newPwdVal="";this.newPwdConfVal=""}t.prototype.$onInit=function t(){this.allowPasswordReset=this.allowPasswordReset!==false;this.allowPasswordChange=this.allowPasswordChange!==false;this.forcePasswordChange=this.forcePasswordChange===true;if(this.forcePasswordChange){this.changingPassword=true}this.userMustChangeItsPassword=this.gmfUser.is_password_changed===false&&this.forcePasswordChange};t.prototype.changePassword=function t(){var e=this;var n=this.gettextCatalog;var i=this.oldPwdVal;var a=this.newPwdVal;var o=this.newPwdConfVal;var s=[];if(i===""){s.push(n.getString("The old password is required."))}if(a===""){s.push(n.getString("The new password is required."))}if(o===""){s.push(n.getString("The password confirmation is required."))}if(s.length){this.setError_(s)}else{if(i===a){s.push(n.getString("The old and new passwords are the same."))}if(a!==o){s.push(n.getString("The passwords don't match."))}if(this.passwordValidator){if(!this.passwordValidator.isPasswordValid(i)){s.push(n.getString(this.passwordValidator.notValidMessage))}}if(s.length){this.setError_(s)}else{this.gmfAuthenticationService_.changePassword(i,a,o).then(function(){e.changePasswordReset();e.setError_([n.getString("Your password has successfully been changed.")],r["a"].Type.INFORMATION)}).catch(function(t){e.setError_(n.getString("Incorrect old password."))})}}};t.prototype.login=function t(){var e=this.gettextCatalog;var n=[];if(this.loginVal===""){n.push(e.getString("The username is required."))}if(this.pwdVal===""){n.push(e.getString("The password is required."))}if(n.length){this.setError_(n)}else{var i=e.getString("Incorrect credentials or disabled account.");this.gmfAuthenticationService_.login(this.loginVal,this.pwdVal).then(this.resetError_.bind(this),this.setError_.bind(this,i))}};t.prototype.logout=function t(){var e=this.gettextCatalog;var n=e.getString("Could not log out.");this.gmfAuthenticationService_.logout().then(this.resetError_.bind(this),this.setError_.bind(this,n))};t.prototype.resetPassword=function t(){var e=this.gettextCatalog;if(!this.loginVal){this.setError_(e.getString("Please, input a login..."));return}var n=e.getString("An error occurred while resetting the password.");var i=function(t){this.resetPasswordModalShown=true;this.resetError_()}.bind(this);this.gmfAuthenticationService_.resetPassword(this.loginVal).then(i,this.setError_.bind(this,n))};t.prototype.changePasswordReset=function t(){this.resetError_();this.changingPassword=false;this.oldPwdVal="";this.newPwdVal="";this.newPwdConfVal=""};t.prototype.setError_=function t(e,n){if(n==undefined){n=r["a"].Type.ERROR}if(this.error){this.resetError_()}this.error=true;var i=this.$element_.find(".gmf-authentication-error");if(!Array.isArray(e)){e=[e]}e.forEach(function(t){this.notification_.notify({msg:t,target:i,type:n})},this)};t.prototype.resetError_=function t(){this.notification_.clear();this.error=false};return t}();l.controller("GmfAuthenticationController",l.AuthenticationController_);var c=l;var f=angular.module("gmfAuthenticationModule",[c.name,i["a"].module.name]);var h=e["a"]=f},function(t,e,n){"use strict";var i=n(55);var r=n(2);var a=n(95);var o=n(366);var s=n(135);var l=n(201);var u=n(19);var c=n(61);var f=n(57);var h=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function d(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function p(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function v(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var g=function(t){v(e,t);function e(n){d(this,e);var i=p(this,t.call(this,n));i.featuresCollection_=n.features||new u["b"];i.source_=new f["b"]({features:i.featuresCollection_,wrapX:false});i.layer_=new c["a"]({source:i.source_});return i}h(e,[{key:"features",get:function t(){return this.featuresCollection_.getArray()}},{key:"featuresCollection",get:function t(){return this.featuresCollection_}},{key:"layer",get:function t(){return this.layer_}},{key:"extent",get:function t(){return this.source_.getExtent()}}]);return e}(l["a"]);var m=g;var _=n(245);function y(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function b(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function w(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var x=function(t){w(e,t);function e(n){y(this,e);var i=b(this,t.call(this,n));var r=n.injector;i.rootScope_=r.get("$rootScope");i.unregister_={};return i}e.prototype.addDataSource=function e(n){t.prototype.addDataSource.call(this,n);r["a"].assertInstanceof(n,m);this.registerDataSource_(n)};e.prototype.registerDataSource_=function t(e){this.unregister_[e.id]=this.rootScope_.$watch(function(){return e.visible},this.handleDataSourceVisibleChange_.bind(this,e))};e.prototype.handleDataSourceVisibleChange_=function t(e,n,i){if(n!==undefined){e.layer.setVisible(n)}};e.prototype.removeDataSource=function e(n){t.prototype.removeDataSource.call(this,n);r["a"].assertInstanceof(n,m);this.unregisterDataSource_(n)};e.prototype.unregisterDataSource_=function t(e){this.unregister_[e.id]();delete this.unregister_[e.id]};return e}(_["a"]);var S=x;var C=n(53);var E=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function O(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function T(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function M(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var I=function(t){M(e,t);function e(n){O(this,e);var i=T(this,t.call(this,n));i.url_=n.url;return i}E(e,[{key:"url",get:function t(){return this.url_}}]);return e}(_["a"]);var R=I;var N=n(7);var A=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function L(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function P(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function D(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var j=function(t){D(e,t);function e(n,i){L(this,e);var r=P(this,t.call(this,n));var a=n.injector;r.layer_;r.ngeoLayerHelper_=i;r.rootScope_=a.get("$rootScope");r.wmsDataSourceUnregister_={};r.init_();return r}e.prototype.init_=function t(){r["a"].assert(this.dataSources.length,"At least one data source is required.");for(var e=this.dataSources,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var a;if(n){if(i>=e.length)break;a=e[i++]}else{i=e.next();if(i.done)break;a=i.value}var o=a;r["a"].assertInstanceof(o,C["a"]);this.registerDataSource_(o)}};e.prototype.destroy=function e(){for(var n=this.dataSources,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;r["a"].assertInstanceof(s,C["a"]);this.unregisterDataSource_(s)}t.prototype.destroy.call(this)};e.prototype.addDataSource=function e(n){t.prototype.addDataSource.call(this,n);r["a"].assertInstanceof(n,C["a"]);this.registerDataSource_(n)};e.prototype.registerDataSource_=function t(e){var n=e.id;this.wmsDataSourceUnregister_[n]=this.rootScope_.$watch(function(){return e.visible},this.handleDataSourceVisibleChange_.bind(this));if(!this.layer_){this.layer_=this.ngeoLayerHelper_.createBasicWMSLayerFromDataSource(e)}else{this.layer_.get("querySourceIds").push(n);this.updateLayer_()}};e.prototype.handleDataSourceVisibleChange_=function t(e,n){if(e!==undefined&&e!==n){this.updateLayer_()}};e.prototype.updateLayer_=function t(){var e=this.layer;var n=[];for(var i=this.dataSources,a=Array.isArray(i),o=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{o=i.next();if(o.done)break;s=o.value}var l=s;r["a"].assertInstanceof(l,C["a"]);if(l.visible){n=n.concat(l.getOGCLayerNames())}}this.ngeoLayerHelper_.updateWMSLayerState(e,n.join(","))};e.prototype.removeDataSource=function e(n){t.prototype.removeDataSource.call(this,n);r["a"].assertInstanceof(n,C["a"]);this.unregisterDataSource_(n)};e.prototype.unregisterDataSource_=function t(e){var n=e.id;var i=this.layer;var r=this.wmsDataSourceUnregister_[n];r();delete this.wmsDataSourceUnregister_[n];N["j"](this.dataSources,e);var a=this.ngeoLayerHelper_.getQuerySourceIds(i);if(a){N["j"](a,n)}if(this.dataSources.length){this.updateLayer_()}};A(e,[{key:"layer",get:function t(){return this.layer_}}]);return e}(R);var k=j;var F=n(1);var $=n(4);var G=n(3);var U=n(360);var Y=n(359);var V=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function H(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var z=function(){t.$inject=["gettextCatalog","$injector","$q","$rootScope","ngeoDataSources","ngeoFile","ngeoLayerHelper"];function t(e,n,i,r,a,o,s){H(this,t);this.injector_=n;this.q_=i;this.rootScope_=r;this.dataSources_=a.collection;this.ngeoFile_=o;this.ngeoLayerHelper_=s;this.extDataSources_={};this.files_={};this.map_=null;this.fileGroup_=new S({dataSources:[],injector:this.injector_,title:e.getString("Local files")});this.wmsGroupsCollection_=new u["b"];this.wmtsGroupsCollection_=new u["b"];this.wmtsCache_={};G["a"](this.dataSources_,"remove",this.handleDataSourcesRemove_,this)}t.prototype.addWMSGroup_=function t(e){this.wmsGroupsCollection.push(e)};t.prototype.removeWMSGroup_=function t(e){this.wmsGroupsCollection.remove(e)};t.prototype.getWMSGroup=function t(e){var n=null;for(var i=this.wmsGroups,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.url===e){n=s;break}}return n};t.prototype.addWMTSGroup_=function t(e){this.wmtsGroupsCollection.push(e)};t.prototype.removeWMTSGroup_=function t(e){this.wmtsGroupsCollection.remove(e)};t.prototype.getWMTSGroup=function t(e){var n=null;for(var i=this.wmtsGroups,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.url===e){n=s;break}}return n};t.prototype.isExternalDataSource=function t(e){return!!this.extDataSources_[e.id]};t.prototype.addLayer_=function t(e){this.layerGroup.getLayers().push(e)};t.prototype.removeLayer_=function t(e){this.layerGroup.getLayers().remove(e)};t.prototype.createAndAddDataSourceFromWMSCapability=function e(n,i,r){var a=t.getId(n);var o=i["Service"];r=o["OnlineResource"]||r;var s=void 0;if(this.extDataSources_[a]){s=this.extDataSources_[a]}else{var l=i["Capability"]["Request"];var u=l["GetMap"]["Format"];var c="image/png";var f=u.includes(c)?c:u[0];var h=l["GetFeatureInfo"]["Format"];var d=h.includes(C["a"].WMSInfoFormat.GML)?C["a"].WMSInfoFormat.GML:undefined;var p=n["queryable"]===true&&d!==undefined;s=new C["a"]({id:a,name:n["Title"],ogcImageType:f,ogcLayers:[{name:n["Name"],queryable:p}],ogcType:C["a"].Type.WMS,visible:true,wmsInfoFormat:d,wmsUrl:r});this.extDataSources_[a]=s}var v=this.getWMSGroup(r);if(v){if(!v.dataSources.includes(s)){v.addDataSource(s);this.dataSources_.push(s)}}else{v=new k({dataSources:[s],injector:this.injector_,title:o["Title"],url:r},this.ngeoLayerHelper_);this.addLayer_(v.layer);this.addWMSGroup_(v);this.dataSources_.push(s)}};t.prototype.createAndAddDataSourceFromWMTSCapability=function e(n,i,a){var o=t.getId(n);if(this.wmtsCache_[o]){return}var s=void 0;if(this.extDataSources_[o]){s=this.extDataSources_[o]}else{var l=r["a"].assertString(n["Title"]);var u=r["a"].assertString(n["Identifier"]);s=new C["a"]({id:o,name:l,ogcType:C["a"].Type.WMTS,visible:true,wmtsLayer:u,wmtsUrl:a});this.extDataSources_[o]=s}var c=this.getWMTSGroup(a);if(!c){c=new R({dataSources:[],title:i["ServiceIdentification"]["Title"],url:a});this.addWMTSGroup_(c)}c.addDataSource(s);var f=this.ngeoLayerHelper_.createWMTSLayerFromCapabilititesObj(i,n);this.addLayer_(f);this.dataSources_.push(s);this.wmtsCache_[o]={layerObj:f,unregister:this.rootScope_.$watch(function(){return s.visible},this.handleWMTSDataSourceVisibleChange_.bind(this,f))}};t.prototype.createAndAddDataSourceFromFile=function t(e,n){var i=this;this.getFileDataSource_(e).then(function(t){var e=true;var r=i.fileGroup_;if(Object($["H"])(t.extent)){e=false}else{if(r.dataSources.includes(t)){return}i.addLayer_(t.layer);r.addDataSource(t);i.map_.getView().fit(t.extent);i.dataSources_.push(t)}if(n){n(e)}},function(t){console.error("Failed to load file: "+e.name);if(n){n(false)}})};t.prototype.getFileDataSource_=function e(n){var i=this;var r=this.q_.defer();if(this.files_[n.name]){r.resolve(this.files_[n.name])}else{var a=this.ngeoFile_;a.read(n).then(function(e){var o=void 0;var s={featureProjection:i.map_.getView().getProjection()};if(a.isKml(e)){o=new Y["a"]({extractStyles:false}).readFeatures(e,s)}else if(a.isGpx(e)){o=(new U["a"]).readFeatures(e,s)}if(o){var l=t.getId(n);var c=new m({features:new u["b"](o),id:l,name:n.name,visible:true});i.files_[n.name]=c;i.extDataSources_[l]=c;r.resolve(c)}else{r.reject()}})}return r.promise};t.prototype.handleWMTSDataSourceVisibleChange_=function t(e,n,i){if(n!==undefined&&n!==i){e.setVisible(n)}};t.prototype.handleDataSourcesRemove_=function t(e){var n=e.element;if(this.extDataSources_[n.id]===n){if(n instanceof m){this.removeFileDataSource_(n)}else if(n instanceof C["a"]){this.removeOGCDataSource_(n)}}};t.prototype.removeFileDataSource_=function t(e){this.removeLayer_(e.layer);this.fileGroup_.removeDataSource(e)};t.prototype.removeOGCDataSource_=function t(e){if(e.ogcType===C["a"].Type.WMS){var n=e.wmsUrl;r["a"].assert(n);var i=this.getWMSGroup(n);if(i&&i.dataSources.includes(e)){i.removeDataSource(e);if(!i.dataSources.length){this.removeLayer_(i.layer);i.destroy();this.removeWMSGroup_(i)}}}else if(e.ogcType===C["a"].Type.WMTS){var a=e.wmtsUrl;r["a"].assert(a);var o=this.getWMTSGroup(a);if(o&&o.dataSources.includes(e)){o.removeDataSource(e);var s=e.id;this.removeLayer_(this.wmtsCache_[s].layerObj);this.wmtsCache_[s].unregister();delete this.wmtsCache_[s];if(!o.dataSources.length){o.destroy();this.removeWMTSGroup_(o)}}}};V(t,[{key:"fileGroup",get:function t(){return this.fileGroup_}},{key:"wmsGroups",get:function t(){return this.wmsGroupsCollection_.getArray()}},{key:"wmsGroupsCollection",get:function t(){return this.wmsGroupsCollection_}},{key:"wmtsGroups",get:function t(){return this.wmtsGroupsCollection_.getArray()}},{key:"wmtsGroupsCollection",get:function t(){return this.wmtsGroupsCollection_}},{key:"layerGroup",get:function t(){var e=this.map_;r["a"].assert(e);return this.ngeoLayerHelper_.getGroupFromMap(e,i["a"].EXTERNALLAYERGROUP_NAME)}},{key:"map",set:function t(e){this.map_=e}}]);return t}();z.getId=function(t){return F["c"](t)+1e6};z.module=angular.module("gmfExternalDataSourcesManager",[a["a"].module.name,o["a"].module.name,s["a"].module.name]);z.module.service("gmfExternalDataSourcesManager",z);var B=e["a"]=z},function(t,e,n){"use strict";var i=n(147);var r=n(237);var a=n(50);var o=angular.module("ngeoBboxQuery",[i["a"].module.name]);o.directive_=function(t){return{restrict:"A",scope:false,link:function e(n,i,o){var s=n.$eval(o["ngeoBboxQueryMap"]);var l=new r["a"]({condition:a["h"]});var u=function e(i){var r=l.getGeometry().getExtent();t.issue({limit:n.$eval(o["ngeoBboxQueryLimit"]),extent:r,map:s})};l.on("boxend",u);n.$watch(o["ngeoBboxQueryActive"],function(e,i){if(e){s.addInteraction(l)}else{s.removeInteraction(l);if(n.$eval(o["ngeoBboxQueryAutoclear"])!==false){t.clear()}}})}}};o.directive_.$inject=["ngeoMapQuerent"];o.directive("ngeoBboxQuery",o.directive_);e["a"]=o},function(t,e,n){"use strict";var i=n(147);var r=n(3);var a=angular.module("ngeoMapQuery",[i["a"].module.name]);a.directive_=function(t,e){return{restrict:"A",scope:false,link:function n(i,a,o){var s=i.$eval(o["ngeoMapQueryMap"]);var l=null;var u=null;var c=function e(n){var i=n.coordinate;t.issue({coordinate:i,map:s})};var f=function t(e){if(!e.dragging){var n=s.getEventPixel(e.originalEvent);var i=function t(e){var n=e.get("visible");var i=e.get("querySourceIds");return n&&!!i};var r=s.forEachLayerAtPixel(n,function(){return true},undefined,i);s.getTargetElement().style.cursor=r?"pointer":""}};var h=function t(){l=r["a"](s,"singleclick",c);var n=e.has("ngeoQueryOptions")?e.get("ngeoQueryOptions"):{};if(n.cursorHover){u=r["a"](s,"pointermove",f)}};var d=function e(){if(l!==null){r["e"](l);l=null}if(u!==null){r["e"](u);u=null}if(i.$eval(o["ngeoMapQueryAutoclear"])!==false){t.clear()}};i.$watch(o["ngeoMapQueryActive"],function(t,e){if(t){h()}else{d()}})}}};a.directive_.$inject=["ngeoMapQuerent","$injector"];a.directive("ngeoMapQuery",a.directive_);e["a"]=a},function(t,e,n){(function(t,n){true?n(e):undefined})(this,function(t){"use strict";var e=Math.PI,n=2*e,i=1e-6,r=n-i;function a(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function o(){return new a}a.prototype=o.prototype={constructor:a,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,n,r,a,o){t=+t,n=+n,r=+r,a=+a,o=+o;var s=this._x1,l=this._y1,u=r-t,c=a-n,f=s-t,h=l-n,d=f*f+h*h;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null){this._+="M"+(this._x1=t)+","+(this._y1=n)}else if(!(d>i));else if(!(Math.abs(h*u-c*f)>i)||!o){this._+="L"+(this._x1=t)+","+(this._y1=n)}else{var p=r-s,v=a-l,g=u*u+c*c,m=p*p+v*v,_=Math.sqrt(g),y=Math.sqrt(d),b=o*Math.tan((e-Math.acos((g+d-m)/(2*_*y)))/2),w=b/y,x=b/_;if(Math.abs(w-1)>i){this._+="L"+(t+w*f)+","+(n+w*h)}this._+="A"+o+","+o+",0,0,"+ +(h*p>f*v)+","+(this._x1=t+x*u)+","+(this._y1=n+x*c)}},arc:function(t,a,o,s,l,u){t=+t,a=+a,o=+o,u=!!u;var c=o*Math.cos(s),f=o*Math.sin(s),h=t+c,d=a+f,p=1^u,v=u?s-l:l-s;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null){this._+="M"+h+","+d}else if(Math.abs(this._x1-h)>i||Math.abs(this._y1-d)>i){this._+="L"+h+","+d}if(!o)return;if(v<0)v=v%n+n;if(v>r){this._+="A"+o+","+o+",0,1,"+p+","+(t-c)+","+(a-f)+"A"+o+","+o+",0,1,"+p+","+(this._x1=h)+","+(this._y1=d)}else if(v>i){this._+="A"+o+","+o+",0,"+ +(v>=e)+","+p+","+(this._x1=t+o*Math.cos(l))+","+(this._y1=a+o*Math.sin(l))}},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};t.path=o;Object.defineProperty(t,"__esModule",{value:true})})},function(t,e,n){"use strict";var i=n(136);var r=n(131);var a=function t(e,n){this.http_=e;this.baseUrl_=n};a.$inject=["$http","gmfLayersUrl"];a.$inject=["$http","gmfLayersUrl"];a.prototype.getFeaturesInExtent=function(t,e){var n=r["a"](this.baseUrl_+"/"+t.join(","),{bbox:e.join(",")});return this.http_.get(n).then(this.handleGetFeatures_.bind(this))};a.prototype.getFeaturesWithComparisonFilters=function(t,e){var n=[];var i={};for(var a=e,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();;){var l;if(o){if(s>=a.length)break;l=a[s++]}else{s=a.next();if(s.done)break;l=s.value}var u=l;i[u.property+"__"+u.operator]=u.value;n.push(u.property)}i["queryable"]=n.join(",");var c=r["a"](this.baseUrl_+"/"+t.join(","),i);return this.http_.get(c).then(this.handleGetFeatures_.bind(this))};a.prototype.handleGetFeatures_=function(t){return(new i["a"]).readFeatures(t.data)};a.prototype.insertFeatures=function(t,e){var n=this.baseUrl_+"/"+t;var r=(new i["a"]).writeFeatures(e);return this.http_.post(n,r,{headers:{"Content-Type":"application/json"},withCredentials:true})};a.prototype.updateFeature=function(t,e){var n=this.baseUrl_+"/"+t.toString()+"/"+e.getId();var r=(new i["a"]).writeFeature(e);return this.http_.put(n,r,{headers:{"Content-Type":"application/json"},withCredentials:true})};a.prototype.deleteFeature=function(t,e){var n=this.baseUrl_+"/"+t.toString()+"/"+e.getId();return this.http_.delete(n,{headers:{"Content-Type":"application/json"},withCredentials:true})};a.module=angular.module("gmfEditFeature",[]);a.module.service("gmfEditFeature",a);e["a"]=a},function(t,e,n){"use strict";var i=n(2);var r=n(262);var a=n(13);var o=n(24);var s=n(120);var l=n(101);var u=n(148);var c=n(65);var f=n(60);var h=n(14);var d=n(1);var p=n(3);var v=function t(e,n,i,r,a,o){var s=this;this.active;if(this.active===undefined){this.active=false}this.features;this.map;this.showMeasure;this.gettextCatalog_=i;i.getString("Point");i.getString("LineString");i.getString("Polygon");i.getString("Circle");i.getString("Rectangle");i.getString("Text");this.featureHelper_=r;this.ngeoFeatures_=o;this.interactions_=[];this.drawPoint;this.measureLength;this.measureArea;this.measureAzimut;this.drawRectangle;this.drawText;this.ngeoEventHelper_=a;e.$watch(function(){return s.active},function(t){if(t===false){s.interactions_.forEach(function(t){t.setActive(false)})}})};v.$inject=["$scope","$sce","gettextCatalog","ngeoFeatureHelper","ngeoEventHelper","ngeoFeatures"];v.$inject=["$scope","$sce","gettextCatalog","ngeoFeatureHelper","ngeoEventHelper","ngeoFeatures"];v.prototype.handleEscapeKeyDown_=function(t){var e=t.keyCode===27;if(!f["a"].mousedown&&e&&this.interaction_.getActive()){var n=this.interaction_;n.setActive(false);n.setActive(true)}};v.prototype.registerInteraction=function(t){this.interactions_.push(t);t.setActive(false);l["a"].interaction(t);this.map.addInteraction(t)};v.prototype.handleActiveChange=function(t){this.active=this.interactions_.some(function(t){return t.getActive()},this);this.interaction_=this.interactions_.find(function(t){return t.getActive()===true});var e=Object(d["c"])(this);if(this.interaction_){this.ngeoEventHelper_.addListenerKey(e,Object(p["a"])(document.body,"keydown",this.handleEscapeKeyDown_,this))}else{this.ngeoEventHelper_.clearListenerKey(e)}};v.prototype.handleDrawEnd=function(t,e){var n=void 0;if(e.feature){n=e.feature}else{n=e.detail.feature}i["a"].assert(n);var r=n.get("azimut");var s=this.features||this.ngeoFeatures_;var l=new h["a"](n.getGeometry());var u=a["a"];switch(t){case o["a"].CIRCLE:l.set(u.IS_CIRCLE,true);if(r!==undefined){l.set(u.AZIMUT,r)}break;case o["a"].TEXT:l.set(u.IS_TEXT,true);break;case o["a"].RECTANGLE:l.set(u.IS_RECTANGLE,true);break;default:break}var c=this.gettextCatalog_.getString(t);l.set(u.NAME,c+" "+(s.getLength()+1));var f=t!==o["a"].TEXT?"#DB4436":"#000000";l.set(u.COLOR,f);l.set(u.ANGLE,0);l.set(u.OPACITY,.2);l.set(u.SHOW_MEASURE,this.showMeasure?true:false);l.set(u.SHOW_LABEL,false);l.set(u.SIZE,10);l.set(u.STROKE,2);this.featureHelper_.setStyle(l);s.push(l)};v.module=angular.module("ngeoDrawfeatureController",[r["a"].name,s["a"].name,c["a"].module.name,u["a"].module.name]);v.module.controller("ngeoDrawfeatureController",v);e["a"]=v},function(t,e,n){"use strict";var i=n(284);var r=n(349);var a=n(154);var o=n(75);var s=n(23);var l=n(2);var u=n(135);var c=n(53);var f=n(158);var h=n(269);var d=n(95);var p=n(121);var v=n(1);var g=n(3);var m=n(31);var _=n(9);var y=n(103);var b=n(114);var w=n(176);function x(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var S=function(){t.$inject=["$q","$rootScope","$timeout","gmfThemes","gmfTreeManager","ngeoBackgroundLayerMgr","ngeoDataSources","ngeoLayerHelper","ngeoRuleHelper","ngeoWMSTime","gmfWFSAliases"];function t(e,n,i,r,a,o,s,l,u,c,f){x(this,t);this.q_=e;this.rootScope_=n;this.timeout_=i;this.gmfThemes_=r;this.gmfTreeManager_=a;this.ngeoBackgroundLayerMgr_=o;this.ngeoDataSources_=s;this.dataSources_=s.collection;this.ngeoLayerHelper_=l;this.ngeoRuleHelper_=u;this.ngeoWMSTime_=c;this.gmfWFSAliases_=f;this.dataSourcesCache_={};this.dimensions_;this.dimensionsWatcherUnregister=null;this.treeCtrlCache_={};this.treeCtrlsUnregister_=null;g["a"](this.ngeoBackgroundLayerMgr_,"change",this.handleNgeoBackgroundLayerChange_,this);g["a"](this.gmfThemes_,"change",this.handleThemesChange_,this)}t.prototype.setDatasourceMap=function t(e){this.ngeoDataSources_.map=e};t.prototype.setDimensions=function t(e){var n=this;if(this.dimensionsWatcherUnregister){this.dimensionsWatcherUnregister()}this.dimensions_=e;this.dimensionsWatcherUnregister=this.rootScope_.$watch(function(){return n.dimensions_},this.handleDimensionsChange_.bind(this),true);this.handleDimensionsChange_()};t.prototype.handleDimensionsChange_=function t(){var e=[];var n=[];var i=this.dataSources_.getArray();for(var r=i,a=Array.isArray(r),o=0,r=a?r:r[Symbol.iterator]();;){var s;if(a){if(o>=r.length)break;s=r[o++]}else{o=r.next();if(o.done)break;s=o.value}var l=s;if(l.dimensionsFiltersConfig){for(var u in l.dimensionsFiltersConfig){if(l.dimensionsFiltersConfig[u].value===null){var c=this.getDataSourceLayer_(l);if(c==undefined){return}var f=v["c"](c);if(n.indexOf(f)==-1){e.push(c);n.push(f)}}}}}e.forEach(this.updateLayerFilter_.bind(this))};t.prototype.handleThemesChange_=function t(){var e=this;this.clearDataSources_();if(this.treeCtrlsUnregister_){this.treeCtrlsUnregister_()}this.clearTreeCtrlCache_();this.gmfThemes_.getOgcServersObject().then(function(t){var n=e.gmfThemes_.getThemesObject().then(function(n){for(var i=n,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;for(var u=s.children,c=Array.isArray(u),f=0,u=c?u:u[Symbol.iterator]();;){var h;if(c){if(f>=u.length)break;h=u[f++]}else{f=u.next();if(f.done)break;h=f.value}var d=h;l["a"].assert(d);e.createDataSource_(d,d,t)}}});var i=e.gmfThemes_.getBackgroundLayersObject().then(function(n){for(var i=n,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;e.createDataSource_(null,s,t)}});e.q_.all([n,i]).then(function(){e.treeCtrlsUnregister_=e.rootScope_.$watchCollection(function(){if(e.gmfTreeManager_.rootCtrl){return e.gmfTreeManager_.rootCtrl.children}},e.handleTreeManagerRootChildrenChange_.bind(e))})})};t.prototype.handleTreeManagerRootChildrenChange_=function t(e){var n=this;this.timeout_(function(){if(!e){return}var t=[];var i=function t(e,n){var i=n.node;var r=i.children;if(!r){e.push(n)}};for(var r=0,a=e.length;r<a;r++){e[r].traverseDepthFirst(i.bind(n,t))}for(var o=0,s=t.length;o<s;o++){var l=t[o];var u=n.getTreeCtrlCacheItem_(l);if(!u){n.addTreeCtrlToCache_(l)}}var c=n.treeCtrlCache_;for(var f in n.treeCtrlCache_){var h=c[f];if(!t.includes(h.treeCtrl)){n.removeTreeCtrlCacheItem_(h)}}})};t.prototype.clearDataSources_=function t(){var e=this.dataSources_.getArray();for(var n=e.length-1,i=0;n>=i;n--){if(this.dataSourcesCache_[e[n].id]){this.dataSources_.remove(e[n])}}_["b"](this.dataSourcesCache_)};t.prototype.createDataSource_=function t(e,n,r){var a=n.children;if(a){for(var o=a,u=Array.isArray(o),f=0,o=u?o:o[Symbol.iterator]();;){var h;if(u){if(f>=o.length)break;h=o[f++]}else{f=o.next();if(f.done)break;h=f.value}var d=h;l["a"].assert(d);this.createDataSource_(e,d,r)}return}var p=n;var g=v["c"](p);if(this.dataSourcesCache_[g]){return}var m=p.metadata;var _=p.type;var y=void 0;var b=void 0;var w=void 0;var x=void 0;var S=void 0;var C=void 0;var E=void 0;var O=void 0;if(_===s["a"].NodeType.WMTS){var T=p;S=T.layer;C=T.url;y=m.maxResolution;b=m.minResolution;var M=m.queryLayers||m.wmsLayers;if(M){w=M.split(",").map(function(t){return{maxResolution:y,minResolution:b,name:t,queryable:true}})}if(m.ogcServer&&r[m.ogcServer]){x=r[m.ogcServer]}E=T.imageType}else if(_===s["a"].NodeType.WMS){var I=p;y=I.maxResolutionHint;b=I.minResolutionHint;w=I.childLayers.map(function(t){return{maxResolution:t.maxResolutionHint,minResolution:t.minResolutionHint,name:t.name,queryable:t.queryable}});var R=!e||e.mixed?I.ogcServer:e.ogcServer;l["a"].assert(R);x=r[R];E=x.imageType;if(I.time){O=I.time}else if(e&&e.time){O=e.time}}var N=x?x.type:undefined;var A=x?x.isSingleTile:undefined;var L=x&&x.wfsSupport?x.urlWfs:undefined;var P=x?x.url:undefined;var D=c["a"].WFSOutputFormat.GML3;if(N===c["a"].ServerType.QGISSERVER){D=c["a"].WFSOutputFormat.GML2}var j=!!m.snappingConfig;var k=m.snappingConfig?m.snappingConfig.tolerance:undefined;var F=m.snappingConfig?m.snappingConfig.edge:undefined;var $=m.snappingConfig?m.snappingConfig.vertex:undefined;var G=this.dimensions_;var U=n.dimensions||e.dimensions;var Y=n.dimensionsFilters;var V=void 0;var H=void 0;if(O){var z=this.ngeoWMSTime_.getOptions(O)["values"];if(Array.isArray(z)){V=z[0];H=z[1]}else{V=z}}var B=m.copyable;var W=m.identifierAttributeField;var q=p.name;var X=m.timeAttribute;var K=m.isChecked===true;this.dataSourcesCache_[g]=new i["a"]({copyable:B,dimensions:G,dimensionsConfig:U,dimensionsFiltersConfig:Y,gmfLayer:p,id:g,identifierAttribute:W,maxResolution:y,minResolution:b,name:q,ogcImageType:E,ogcLayers:w,ogcServerType:N,ogcType:_,snappable:j,snappingTolerance:k,snappingToEdges:F,snappingToVertice:$,timeAttributeName:X,timeLowerValue:V,timeProperty:O,timeUpperValue:H,visible:K,wfsOutputFormat:D,wfsUrl:L,wmsIsSingleTile:A,wmsUrl:P,wmtsLayer:S,wmtsUrl:C})};t.prototype.addTreeCtrlToCache_=function t(e){var n=v["c"](e.node);var i=this.dataSourcesCache_[n];l["a"].assert(i,"DataSource should be set");e.setDataSource(i);var r=this.rootScope_.$watch(function(){return e.getState()},this.handleTreeCtrlStateChange_.bind(this,e));var o=this.rootScope_.$watch(function(){var t=i.filterRules!==null;var e=i.visible;return t&&e},this.handleDataSourceFilterRulesChange_.bind(this,i));var s=void 0;var u=void 0;var f=void 0;if(i.timeProperty&&i.ogcType===c["a"].Type.WMS){s=this.rootScope_.$watch(function(){return i.timeLowerValue},this.handleDataSourceTimeValueChange_.bind(this,i));if(i.timeProperty.mode==="range"){u=this.rootScope_.$watch(function(){return i.timeUpperValue},this.handleDataSourceTimeValueChange_.bind(this,i))}f=l["a"].assertInstanceof(a["a"].getLayer(e),y["a"])}this.treeCtrlCache_[n]={filterRulesWatcherUnregister:o,stateWatcherUnregister:r,timeLowerValueWatcherUnregister:s,timeUpperValueWatcherUnregister:u,treeCtrl:e,wmsLayer:f};this.dataSources_.push(i);this.gmfWFSAliases_.describe(i)};t.prototype.removeTreeCtrlCacheItem_=function t(e){var n=e.treeCtrl.getDataSource();l["a"].assert(n,"DataSource should be set");this.dataSources_.remove(n);e.treeCtrl.setDataSource(null);e.filterRulesWatcherUnregister();e.stateWatcherUnregister();if(e.timeLowerValueWatcherUnregister){e.timeLowerValueWatcherUnregister()}if(e.timeUpperValueWatcherUnregister){e.timeUpperValueWatcherUnregister()}delete this.treeCtrlCache_[v["c"](e.treeCtrl.node)]};t.prototype.clearTreeCtrlCache_=function t(){for(var e in this.treeCtrlCache_){this.removeTreeCtrlCacheItem_(this.treeCtrlCache_[e])}};t.prototype.handleTreeCtrlStateChange_=function t(e,n){var i=e.getDataSource();l["a"].assert(i,"DataSource should be set");var r=n==="on";i.visible=r;var a=this.getDataSourceLayer_(i);if(a==undefined){return}this.updateLayerFilter_(a)};t.prototype.getTreeCtrlCacheItem_=function t(e){return this.treeCtrlCache_[v["c"](e.node)]||null};t.prototype.getDataSourceLayer_=function t(e){e=e;if(e.gmfLayer==undefined){return}var n=v["c"](e.gmfLayer);if(n==undefined){return}var i=this.treeCtrlCache_[n];if(i==undefined){return}var r=i.treeCtrl;return a["a"].getLayer(r)};t.prototype.updateLayerFilter_=function t(e){var n;l["a"].assert(e instanceof y["a"]||e instanceof m["a"]);var i=e.getSource();if(!(i instanceof b["a"]||i instanceof w["a"])){return}var r=i.getParams();var a=r["LAYERS"];var o=a.split(",");l["a"].assert(o.length>=1);var s="FILTER";var u=[];var c=false;for(var f=o,h=Array.isArray(f),d=0,f=h?f:f[Symbol.iterator]();;){var p;if(h){if(d>=f.length)break;p=f[d++]}else{d=f.next();if(d.done)break;p=d.value}var g=p;var _="()";var x=this.dataSources_.getArray();for(var S=x,C=Array.isArray(S),E=0,S=C?S:S[Symbol.iterator]();;){var O;if(C){if(E>=S.length)break;O=S[E++]}else{E=S.next();if(E.done)break;O=E.value}var T=O;var M=this.getDataSourceLayer_(T);if(M==undefined){continue}if(v["c"](M)==v["c"](e)&&e.get("querySourceIds").indexOf(T.id)>=0&&T.gmfLayer.layers.split(",").indexOf(g)>=0){var I=v["c"](T.gmfLayer);var R=this.treeCtrlCache_[I];l["a"].assert(R);var N=R.treeCtrl;var A=N.map.getView().getProjection().getCode();var L=T.visible?this.ngeoRuleHelper_.createFilterString({dataSource:T,projCode:A,incDimensions:true}):null;if(L){_="("+L+")";c=true}}}u.push(_)}i.updateParams((n={},n[s]=c?u.join(""):null,n))};t.prototype.handleDataSourceFilterRulesChange_=function t(e){if(e.filtrable!==true||e.ogcType!==c["a"].Type.WMS){return}var n=this.getDataSourceLayer_(e);if(n===undefined){return}this.updateLayerFilter_(n)};t.prototype.handleDataSourceTimeValueChange_=function t(e){var n=v["c"](e.gmfLayer);var i=this.treeCtrlCache_[n];l["a"].assert(i);var r=l["a"].assert(i.wmsLayer);var a=l["a"].assertInstanceof(r.getSource(),b["a"]);var o=l["a"].assert(e.timeProperty);var s=void 0;var u=e.timeRangeValue;if(u){s=this.ngeoWMSTime_.formatWMSTimeParam(o,u)}var c=a.getParams();var f=c["TIME"];if(f===s){return}this.ngeoLayerHelper_.updateWMSLayerState(r,a.getParams()["LAYERS"],s)};t.prototype.handleNgeoBackgroundLayerChange_=function t(e){var n=e.detail.previous;var i=e.detail.current;var r=this.dataSourcesCache_;if(n){var a=n.get("querySourceIds");if(Array.isArray(a)){for(var o=a,s=Array.isArray(o),l=0,o=s?o:o[Symbol.iterator]();;){var u;if(s){if(l>=o.length)break;u=o[l++]}else{l=o.next();if(l.done)break;u=l.value}var c=u;var f=r[c];if(f){f.visible=false;this.dataSources_.remove(f)}}}}if(i){var h=i.get("querySourceIds");if(Array.isArray(h)){for(var d=h,p=Array.isArray(d),v=0,d=p?d:d[Symbol.iterator]();;){var g;if(p){if(v>=d.length)break;g=d[v++]}else{v=d.next();if(v.done)break;g=v.value}var m=g;var _=r[m];if(_){_.visible=true;this.dataSources_.push(_)}}}}};return t}();S.module=angular.module("gmfDataSourcesManager",[r["a"].module.name,a["a"].module.name,o["a"].module.name,s["a"].module.name,f["a"].module.name,u["a"].module.name,h["a"].module.name,d["a"].module.name,p["a"].module.name]);S.module.service("gmfDataSourcesManager",S);e["a"]=S},function(t,e,n){"use strict";var i=n(12);var r={};r.getDefaultDrawStyleFunction=function(){var t=Object(i["b"])();return function(e,n){return t[e.getGeometry().getType()]}};r.getDefaultModifyStyleFunction=function(){var t=Object(i["b"])();return function(e,n){return t["Point"]}};e["a"]=r},function(t,e,n){"use strict";n.d(e,"f",function(){return f});n.d(e,"a",function(){return h});n.d(e,"d",function(){return d});n.d(e,"e",function(){return p});n.d(e,"c",function(){return v});n.d(e,"b",function(){return g});var i=n(26);var r=n(44);var a=n(76);var o=n(6);var s=n(51);var l=n(41);var u=n(66);var c=n(150);Object(i["a"])("w",["ww",2],"wo","week");Object(i["a"])("W",["WW",2],"Wo","isoWeek");Object(r["a"])("week","w");Object(r["a"])("isoWeek","W");Object(a["a"])("week",5);Object(a["a"])("isoWeek",5);Object(o["a"])("w",o["d"]);Object(o["a"])("ww",o["d"],o["h"]);Object(o["a"])("W",o["d"]);Object(o["a"])("WW",o["d"],o["h"]);Object(s["c"])(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=Object(l["a"])(t)});function f(t){return Object(c["b"])(t,this._week.dow,this._week.doy).week}var h={dow:0,doy:6};function d(){return this._week.dow}function p(){return this._week.doy}function v(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function g(t){var e=Object(c["b"])(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}},function(t,e,n){"use strict";e["a"]={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});n.d(e,"b",function(){return u});var i=n(47);var r=n(4);var a=n(15);var o=n(10);function s(t,e,n,i){var a=Object(o["n"])(n,e,t);var s=Object(o["i"])(e,i,n);var l=e.getMetersPerUnit();if(l!==undefined){s*=l}var u=t.getMetersPerUnit();if(u!==undefined){s/=u}var c=t.getExtent();if(!c||Object(r["f"])(c,a)){var f=Object(o["i"])(t,s,a)/s;if(isFinite(f)&&f>0){s/=f}}return s}function l(t,e,n,i){var r=n-t;var a=i-e;var o=Math.sqrt(r*r+a*a);return[Math.round(n+r/o),Math.round(i+a/o)]}function u(t,e,n,o,s,u,c,f,h,d,p){var v=Object(i["a"])(Math.round(n*t),Math.round(n*e));if(h.length===0){return v.canvas}v.scale(n,n);var g=Object(r["j"])();h.forEach(function(t,e,n){Object(r["q"])(g,t.extent)});var m=Object(r["E"])(g);var _=Object(r["A"])(g);var y=Object(i["a"])(Math.round(n*m/o),Math.round(n*_/o));var b=n/o;h.forEach(function(t,e,n){var i=t.extent[0]-g[0];var a=-(t.extent[3]-g[3]);var o=Object(r["E"])(t.extent);var s=Object(r["A"])(t.extent);y.drawImage(t.image,d,d,t.image.width-2*d,t.image.height-2*d,i*b,a*b,o*b,s*b)});var w=Object(r["C"])(c);f.getTriangles().forEach(function(t,e,i){var r=t.source;var s=t.target;var c=r[0][0],f=r[0][1];var h=r[1][0],d=r[1][1];var p=r[2][0],m=r[2][1];var _=(s[0][0]-w[0])/u;var b=-(s[0][1]-w[1])/u;var x=(s[1][0]-w[0])/u;var S=-(s[1][1]-w[1])/u;var C=(s[2][0]-w[0])/u;var E=-(s[2][1]-w[1])/u;var O=c;var T=f;c=0;f=0;h-=O;d-=T;p-=O;m-=T;var M=[[h,d,0,0,x-_],[p,m,0,0,C-_],[0,0,h,d,S-b],[0,0,p,m,E-b]];var I=Object(a["e"])(M);if(!I){return}v.save();v.beginPath();var R=(_+x+C)/3;var N=(b+S+E)/3;var A=l(R,N,_,b);var L=l(R,N,x,S);var P=l(R,N,C,E);v.moveTo(L[0],L[1]);v.lineTo(A[0],A[1]);v.lineTo(P[0],P[1]);v.clip();v.transform(I[0],I[2],I[1],I[3],_,b);v.translate(g[0]-O,g[3]-T);v.scale(o/n,-o/n);v.drawImage(y.canvas,0,0);v.restore()});if(p){v.save();v.strokeStyle="black";v.lineWidth=1;f.getTriangles().forEach(function(t,e,n){var i=t.target;var r=(i[0][0]-w[0])/u;var a=-(i[0][1]-w[1])/u;var o=(i[1][0]-w[0])/u;var s=-(i[1][1]-w[1])/u;var l=(i[2][0]-w[0])/u;var c=-(i[2][1]-w[1])/u;v.beginPath();v.moveTo(o,s);v.lineTo(r,a);v.lineTo(l,c);v.closePath();v.stroke()});v.restore()}return v.canvas}},function(t,e,n){"use strict";var i=n(1);var r=n(80);var a=n(11);var o=function t(e,n,i,a){r["a"].call(this);this.extent=e;this.pixelRatio_=i;this.resolution=n;this.state=a};Object(i["d"])(o,r["a"]);o.prototype.changed=function(){this.dispatchEvent(a["a"].CHANGE)};o.prototype.getExtent=function(){return this.extent};o.prototype.getImage=function(){};o.prototype.getPixelRatio=function(){return this.pixelRatio_};o.prototype.getResolution=function(){return this.resolution};o.prototype.getState=function(){return this.state};o.prototype.load=function(){};e["a"]=o},function(t,e,n){"use strict";(function(t){var i=n(188);var r=n(259);var a=n(215);var o=n(154);var s=n(2);var l=n(273);var u=n(378);var c=n.n(u);var f=n(608);var h=n.n(f);var d=n(258);var p=n(257);var v=n(60);var g=n(175);var m=n(24);var _=n(261);var y=n(260);var b=n(95);var w=n(264);var x=n(221);var S=n(120);var C=n(101);var E=n(148);var O=n(65);var T=n(63);var M=n(94);var I=n(1);var R=n(7);var N=n(19);var A=n(3);var L=n(4);var P=n(14);var D=n(136);var j=n(209);var k=n(103);var F=n(31);var $=n(33);var G=n(12);var U=n(140);var Y=angular.module("GmfEditingFeatureComponent",[i["a"].module.name,r["a"].module.name,a["a"].module.name,d["a"].name,p["a"].name,b["a"].module.name,x["a"].name,S["a"].name,E["a"].module.name,O["a"].module.name,M["a"].module.name]);Y.run(["$templateCache",function(t){t.put("gmf/editing/editFeatureComponent",n(515))}]);Y.component_=function(){return{controller:"GmfEditfeatureController as efCtrl",scope:{dirty:"=gmfEditfeatureDirty",editableTreeCtrl:"=gmfEditfeatureEditabletreectrl",map:"<gmfEditfeatureMap",state:"=gmfEditfeatureState",tolerance:"<?gmfEditfeatureTolerance",vectorLayer:"<gmfEditfeatureVector",closeAfterSave:"=?gmfEditfeatureCloseaftersave"},bindToController:true,templateUrl:"gmf/editing/editFeatureComponent"}};Y.directive("gmfEditfeature",Y.component_);Y.Controller_=function(t,e,n,i,r,a,o,s,l,u,c,f){var h=this;this.dirty;this.editableTreeCtrl;this.map;this.state;this.tolerance;this.vectorLayer;this.closeAfterSave=false;this.element_=t;this.q_=e;this.scope_=n;this.timeout_=i;this.gettextCatalog_=r;this.gmfEditFeature_=a;this.gmfSnapping_=o;this.gmfXSDAttributes_=s;this.ngeoEventHelper_=l;this.ngeoFeatureHelper_=u;this.ngeoLayerHelper_=c;this.ngeoToolActivateMgr_=f;this.editableNode_;this.editableWMSLayer_;this.confirmDeferred_=null;this.unsavedModificationsModalShown=false;this.pending=false;this.active=true;this.createActive=false;this.createToolActivate=new T["a"](this,"createActive");this.mapSelectActive=true;this.mapSelectToolActivate=new T["a"](this,"mapSelectActive");this.feature=null;this.scope_.$watch(function(){return h.feature},this.handleFeatureChange_.bind(this));this.featureId=undefined;this.features;this.interactions_=new N["b"];this.modify_;this.modifyToolActivate;this.menu_=new w["a"]({actions:[{cls:"fa fa-arrows",label:r.getString("Move"),name:"move"},{cls:"fa fa-rotate-right",label:r.getString("Rotate"),name:"rotate"}]});this.translate_;this.rotate_;this.rotateToolActivate;this.translateToolActivate;this.listenerKeys_=[];this.attributes=null;this.geomType;this.showServerError=false;this.serverErrorMessage=null;this.serverErrorType=null};Y.Controller_.$inject=["$element","$q","$scope","$timeout","gettextCatalog","gmfEditFeature","gmfSnapping","gmfXSDAttributes","ngeoEventHelper","ngeoFeatureHelper","ngeoLayerHelper","ngeoToolActivateMgr"];Y.Controller_.prototype.$onInit=function(){var e=this;var n=this.gettextCatalog_.getCurrentLanguage();t.datetimepicker.setLocale(n);t.datetimepicker.setDateFormatter(new l["a"]);this.dirty=this.dirty===true;this.editableNode_=this.editableTreeCtrl.node;this.features=this.vectorLayer.getSource().getFeaturesCollection();this.tolerance=this.tolerance!==undefined?this.tolerance:10;var i=o["a"].getLayer(this.editableTreeCtrl);s["a"].assert(i instanceof k["a"]||i instanceof F["a"]);this.editableWMSLayer_=i;this.modify_=new j["a"]({deleteCondition:v["b"].deleteCondition,features:this.features,style:this.ngeoFeatureHelper_.getVertexStyle(false)});this.interactions_.push(this.modify_);this.rotate_=new _["a"]({features:this.features,style:new G["c"]({text:new U["a"]({text:"",font:"normal 18px FontAwesome",fill:new $["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.rotate_);this.translate_=new y["a"]({features:this.features,style:new G["c"]({text:new U["a"]({text:"",font:"normal 18px FontAwesome",fill:new $["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.translate_);this.initializeInteractions_();this.modifyToolActivate=new T["a"](this.modify_,"active");this.rotateToolActivate=new T["a"](this.rotate_,"active");this.translateToolActivate=new T["a"](this.translate_,"active");this.map.addOverlay(this.menu_);this.scope_.$watch(function(){return e.createActive},function(t,n){if(t){e.gmfSnapping_.ensureSnapInteractionsOnTop()}});this.scope_.$on("$destroy",this.handleDestroy_.bind(this));var r=I["c"](this);this.ngeoEventHelper_.addListenerKey(r,A["a"](this.features,"add",this.handleFeatureAdd_,this));this.scope_.$watch(function(){return e.mapSelectActive},this.handleMapSelectActiveChange_.bind(this));this.scope_.$watch(function(){return e.state},function(t,n){var i=Y.State;if(t===i.STOP_EDITING_PENDING){e.confirmCancel().then(function(){e.state=i.STOP_EDITING_EXECUTE})}else if(t===i.DEACTIVATE_PENDING){e.confirmCancel().then(function(){e.state=i.DEACTIVATE_EXECUTE})}});this.scope_.$watch(function(){return e.unsavedModificationsModalShown},function(t,n){if(n&&!t){e.state=Y.State.IDLE}});this.gmfXSDAttributes_.getAttributes(this.editableNode_.id).then(this.setAttributes_.bind(this));this.toggle_(true)};Y.Controller_.prototype.save=function(){var t=this;s["a"].assert(this.attributes);var e=this.feature.clone();e.setId(this.feature.getId());var n=this.featureId;this.pending=true;var i=new l["a"];for(var r=this.attributes,a=Array.isArray(r),o=0,r=a?r:r[Symbol.iterator]();;){var u;if(a){if(o>=r.length)break;u=r[o++]}else{o=r.next();if(o.done)break;u=o.value}var c=u;if(c.format){if(this.feature.get(c.name)){var f=this.feature.get(c.name);s["a"].assertString(f);var h=i.parseDate(f,c.format);var d="Y-m-d\\TH:i:s";if(c.type==="date"){d="Y-m-d"}else if(c.type==="time"){d="H:i:s"}else if(c.type==="datetime"){h.setMinutes(h.getMinutes()+h.getTimezoneOffset())}e.set(c.name,i.formatDate(h,d))}else{e.set(c.name,null)}}}var p=n?this.gmfEditFeature_.updateFeature(this.editableNode_.id,e):this.gmfEditFeature_.insertFeatures(this.editableNode_.id,[e]);p.then(function(e){t.dirty=false;t.pending=false;t.handleEditFeature_(e);t.gmfSnapping_.refresh();if(t.closeAfterSave){t.cancel()}},function(e){t.showServerError=true;t.pending=false;t.serverErrorType="error type : "+e.data["error_type"];t.serverErrorMessage="error message : "+e.data["message"]})};Y.Controller_.prototype.cancel=function(){this.dirty=false;this.feature=null;this.features.clear();this.menu_.close();this.unsavedModificationsModalShown=false};Y.Controller_.prototype.confirmCancel=function(){var t=this;return this.checkForModifications_().then(function(){t.cancel()})};Y.Controller_.prototype.checkForModifications_=function(t){this.confirmDeferred_=this.q_.defer();if(this.feature&&this.dirty){this.unsavedModificationsModalShown=true;if(t){this.scope_.$apply()}}else{this.confirmDeferred_.resolve()}return this.confirmDeferred_.promise};Y.Controller_.prototype.continueWithoutSaving=function(){this.cancel();this.confirmDeferred_.resolve()};Y.Controller_.prototype.delete=function(){var t=this;var e=this.gettextCatalog_.getString("Do you really want to delete the selected feature?");if(confirm(e)){this.pending=true;this.gmfEditFeature_.deleteFeature(this.editableNode_.id,this.feature).then(function(e){t.dirty=false;t.pending=false;t.ngeoLayerHelper_.refreshWMSLayer(t.editableWMSLayer_);t.cancel()},function(e){t.showServerError=true;t.pending=false;t.serverErrorType="error type : "+e.data["error_type"];t.serverErrorMessage="error message : "+e.data["message"]})}};Y.Controller_.prototype.submit=function(){var t=this;this.timeout_(function(){t.element_.find('input[type="submit"]').click()},0)};Y.Controller_.prototype.handleEditFeature_=function(t){var e=(new D["a"]).readFeatures(t.data);if(e.length){this.feature.setId(e[0].getId());this.ngeoLayerHelper_.refreshWMSLayer(this.editableWMSLayer_)}if(this.confirmDeferred_){this.confirmDeferred_.resolve()}};Y.Controller_.prototype.setAttributes_=function(t){this.attributes=t;for(var e=t,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{i=e.next();if(i.done)break;r=i.value}var a=r;if(a.type=="date"){a.format="Y-m-d";a.mask="9999-19-39"}else if(a.type=="time"){a.format="H:i";a.mask="29:59"}else if(a.type=="datetime"){a.format="Y-m-d H:i";a.mask="9999-19-39 29:59"}}var o=g["a"].getGeometryAttribute(this.attributes);if(o&&o.geomType){this.geomType=o.geomType}};Y.Controller_.prototype.handleFeatureAdd_=function(t){var e=this;this.feature=null;this.timeout_(function(){s["a"].assert(e.attributes);var n=t.element;s["a"].assertInstanceof(n,P["a"]);var i=new l["a"];for(var r=e.attributes,a=Array.isArray(r),o=0,r=a?r:r[Symbol.iterator]();;){var u;if(a){if(o>=r.length)break;u=r[o++]}else{o=r.next();if(o.done)break;u=o.value}var c=u;if(c.format){if(n.get(c.name)){var f=void 0;if(c.type==="datetime"){f=new Date(n.get(c.name));f.setMinutes(f.getMinutes()-f.getTimezoneOffset())}else{var h="";if(c.type==="date"){h="Y-m-d"}else if(c.type==="time"){h="H:i:s"}var d=n.get(c.name);s["a"].assertString(d);f=i.parseDate(d,h)}n.set(c.name,i.formatDate(f,c.format))}else{n.set(c.name,null)}}}e.feature=n;e.createActive=false;if(!n.getId()){e.dirty=true}e.scope_.$apply()},0)};Y.Controller_.prototype.toggle_=function(t){var e=this.listenerKeys_;var n=["create-",I["c"](this)].join("-");var i=["other-",I["c"](this)].join("-");var r=this.ngeoToolActivateMgr_;if(t){e.push(A["a"](this.menu_,"actionclick",this.handleMenuActionClick_,this));e.push(A["a"](this.translate_,"translateend",this.handleTranslateEnd_,this));e.push(A["a"](this.rotate_,"rotateend",this.handleRotateEnd_,this));r.registerTool(n,this.createToolActivate,false);r.registerTool(n,this.mapSelectToolActivate,true);r.registerTool(i,this.createToolActivate,false);r.registerTool(i,this.modifyToolActivate,true);r.registerTool(i,this.translateToolActivate,false);r.registerTool(i,this.rotateToolActivate,false)}else{e.forEach(A["e"]);e.length=0;r.unregisterTool(n,this.createToolActivate);r.unregisterTool(n,this.mapSelectToolActivate);r.unregisterTool(i,this.createToolActivate);r.unregisterTool(i,this.modifyToolActivate);r.unregisterTool(i,this.translateToolActivate);r.unregisterTool(i,this.rotateToolActivate);this.createActive=false;this.cancel()}this.modify_.setActive(t);this.mapSelectActive=t;this.editableTreeCtrl.properties["editing"]=t};Y.Controller_.prototype.handleMapSelectActiveChange_=function(t){var e=this.map.getViewport();s["a"].assertElement(e);if(t){A["a"](this.map,"click",this.handleMapClick_,this);A["a"](e,"contextmenu",this.handleMapContextMenu_,this)}else{A["c"](this.map,"click",this.handleMapClick_,this);A["c"](e,"contextmenu",this.handleMapContextMenu_,this)}};Y.Controller_.prototype.handleMapClick_=function(t){var e=this;var n=t.target.getInteractions().getArray();var i=n.find(function(t){return t.getActive()===true});if(this.cancelEventKey_===undefined){this.cancelEventKey_=A["a"](document.body,"keydown",function(t){var n=t.keyCode===27;if(!v["a"].mousedown&&n&&i.getActive()){e.cancel();e.scope_.$apply();A["e"](e.cancelEventKey_);e.cancelEventKey_=undefined}})}var r=t.coordinate;var a=t.pixel;var o=this.map.forEachFeatureAtPixel(a,function(t){var n=false;if(R["f"](e.features.getArray(),t)){n=t}return n},{hitTolerance:5});if(o){return}this.checkForModifications_(true).then(function(){var t=e.map;var n=t.getView();var i=n.getResolution();var a=i*e.tolerance;var o=L["c"]([r[0],r[1],r[0],r[1]],a);e.gmfEditFeature_.getFeaturesInExtent([e.editableNode_.id],o).then(e.handleGetFeatures_.bind(e));e.cancel();e.pending=true})};Y.Controller_.prototype.handleMapContextMenu_=function(t){var e=this;var n=this.map.getEventPixel(t);var i=this.map.getCoordinateFromPixel(n);var r=this.map.forEachFeatureAtPixel(n,function(t){var n=false;if(R["f"](e.features.getArray(),t)){n=t}return n},{hitTolerance:7});r=r?r:null;if(r){var a=this.ngeoFeatureHelper_.getType(r);if(a===m["a"].POLYGON||a===m["a"].MULTI_POLYGON||a===m["a"].LINE_STRING||a===m["a"].MULTI_LINE_STRING){this.menu_.open(i)}t.preventDefault();t.stopPropagation()}};Y.Controller_.prototype.handleGetFeatures_=function(t){var e=this;this.pending=false;this.timeout_(function(){if(t.length){var n=t[0];e.feature=n;e.features.push(n)}},0)};Y.Controller_.prototype.initializeInteractions_=function(){this.interactions_.forEach(function(t){t.setActive(false);C["a"].interaction(t)})};Y.Controller_.prototype.registerInteractions_=function(){var t=this;this.interactions_.forEach(function(e){t.map.addInteraction(e)})};Y.Controller_.prototype.unregisterInteractions_=function(){var t=this;this.interactions_.forEach(function(e){t.map.removeInteraction(e)})};Y.Controller_.prototype.handleFeatureChange_=function(t,e){var n=this;var i=void 0;if(e){A["c"](e,"propertychange",this.handleFeaturePropertyChange_,this);i=e.getGeometry();s["a"].assert(i);A["c"](i,"change",this.handleFeatureGeometryChange_,this);this.unregisterInteractions_()}if(t){this.featureId=t.getId();A["a"](t,"propertychange",this.handleFeaturePropertyChange_,this);i=t.getGeometry();s["a"].assert(i);A["a"](i,"change",this.handleFeatureGeometryChange_,this);this.registerInteractions_();this.gmfSnapping_.ensureSnapInteractionsOnTop();if(this.featureId){this.timeout_(function(){n.dirty=false;n.scope_.$apply()},0)}}else{this.featureId=undefined}};Y.Controller_.prototype.handleFeaturePropertyChange_=function(){this.dirty=true};Y.Controller_.prototype.handleFeatureGeometryChange_=function(){this.dirty=true;this.scope_.$apply()};Y.Controller_.prototype.handleMenuActionClick_=function(t){var e=t.detail.action;switch(e){case"move":this.translate_.setActive(true);this.scope_.$apply();break;case"rotate":this.rotate_.setActive(true);this.scope_.$apply();break;default:break}};Y.Controller_.prototype.handleTranslateEnd_=function(t){this.translate_.setActive(false);this.scope_.$apply()};Y.Controller_.prototype.handleRotateEnd_=function(t){this.rotate_.setActive(false);this.scope_.$apply()};Y.Controller_.prototype.handleDestroy_=function(){this.features.clear();this.handleFeatureChange_(null,this.feature);this.feature=null;var t=I["c"](this);this.ngeoEventHelper_.clearListenerKey(t);this.toggle_(false);this.handleMapSelectActiveChange_(false);this.unregisterInteractions_();A["e"](this.cancelEventKey_);this.cancelEventKey_=undefined};Y.controller("GmfEditfeatureController",Y.Controller_);Y.State={IDLE:"idle",DEACTIVATE_EXECUTE:"deactivate_execute",DEACTIVATE_PENDING:"deactivate_pending",STOP_EDITING_EXECUTE:"stop_editing_execute",STOP_EDITING_PENDING:"stop_editing_pending"};e["a"]=Y}).call(this,n(38))},function(t,e,n){"use strict";var i=n(1);var r=n(7);var a=n(4);var o=n(77);var s=n(67);var l=n(5);var u=n(81);var c=n(25);var f=n(36);var h=n(88);var d=n(89);var p=n(32);var v=n(9);var g=n(10);var m=n(0);var _=s["a"]+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/"+"1.0.0/gmlsf.xsd";var y=function t(e){var n=e?e:{};s["b"].call(this,n);this.surface_=n.surface!==undefined?n.surface:false;this.curve_=n.curve!==undefined?n.curve:false;this.multiCurve_=n.multiCurve!==undefined?n.multiCurve:true;this.multiSurface_=n.multiSurface!==undefined?n.multiSurface:true;this.schemaLocation=n.schemaLocation?n.schemaLocation:_;this.hasZ=n.hasZ!==undefined?n.hasZ:false};Object(i["d"])(y,s["b"]);y.prototype.readMultiCurve_=function(t,e){var n=Object(m["u"])([],this.MULTICURVE_PARSERS_,t,e,this);if(n){var i=new h["a"](null);i.setLineStrings(n);return i}else{return undefined}};y.prototype.readMultiSurface_=function(t,e){var n=Object(m["u"])([],this.MULTISURFACE_PARSERS_,t,e,this);if(n){var i=new d["a"](null);i.setPolygons(n);return i}else{return undefined}};y.prototype.curveMemberParser_=function(t,e){Object(m["t"])(this.CURVEMEMBER_PARSERS_,t,e,this)};y.prototype.surfaceMemberParser_=function(t,e){Object(m["t"])(this.SURFACEMEMBER_PARSERS_,t,e,this)};y.prototype.readPatch_=function(t,e){return Object(m["u"])([null],this.PATCHES_PARSERS_,t,e,this)};y.prototype.readSegment_=function(t,e){return Object(m["u"])([null],this.SEGMENTS_PARSERS_,t,e,this)};y.prototype.readPolygonPatch_=function(t,e){return Object(m["u"])([null],this.FLAT_LINEAR_RINGS_PARSERS_,t,e,this)};y.prototype.readLineStringSegment_=function(t,e){return Object(m["u"])([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS_,t,e,this)};y.prototype.interiorParser_=function(t,e){var n=Object(m["u"])(undefined,this.RING_PARSERS,t,e,this);if(n){var i=e[e.length-1];i.push(n)}};y.prototype.exteriorParser_=function(t,e){var n=Object(m["u"])(undefined,this.RING_PARSERS,t,e,this);if(n){var i=e[e.length-1];i[0]=n}};y.prototype.readSurface_=function(t,e){var n=Object(m["u"])([null],this.SURFACE_PARSERS_,t,e,this);if(n&&n[0]){var i=new p["a"](null);var a=n[0];var o=[a.length];var s=void 0,l=void 0;for(s=1,l=n.length;s<l;++s){Object(r["c"])(a,n[s]);o.push(a.length)}i.setFlatCoordinates(c["a"].XYZ,a,o);return i}else{return undefined}};y.prototype.readCurve_=function(t,e){var n=Object(m["u"])([null],this.CURVE_PARSERS_,t,e,this);if(n){var i=new f["a"](null);i.setFlatCoordinates(c["a"].XYZ,n);return i}else{return undefined}};y.prototype.readEnvelope_=function(t,e){var n=Object(m["u"])([null],this.ENVELOPE_PARSERS_,t,e,this);return Object(a["k"])(n[1][0],n[1][1],n[2][0],n[2][1])};y.prototype.readFlatPos_=function(t,e){var n=Object(m["e"])(t,false);var i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;var r=[];var a=void 0;while(a=i.exec(n)){r.push(parseFloat(a[1]));n=n.substr(a[0].length)}if(n!==""){return undefined}var o=e[0];var s=o["srsName"];var l="enu";if(s){var u=Object(g["h"])(s);l=u.getAxisOrientation()}if(l==="neu"){var c=void 0,f=void 0;for(c=0,f=r.length;c<f;c+=3){var h=r[c];var d=r[c+1];r[c]=d;r[c+1]=h}}var p=r.length;if(p==2){r.push(0)}if(p===0){return undefined}return r};y.prototype.readFlatPosList_=function(t,e){var n=Object(m["e"])(t,false).replace(/^\s*|\s*$/g,"");var i=e[0];var r=i["srsName"];var a=i["srsDimension"];var o="enu";if(r){var s=Object(g["h"])(r);o=s.getAxisOrientation()}var u=n.split(/\s+/);var c=2;if(t.getAttribute("srsDimension")){c=Object(l["g"])(t.getAttribute("srsDimension"))}else if(t.getAttribute("dimension")){c=Object(l["g"])(t.getAttribute("dimension"))}else if(t.parentNode.getAttribute("srsDimension")){c=Object(l["g"])(t.parentNode.getAttribute("srsDimension"))}else if(a){c=Object(l["g"])(a)}var f=void 0,h=void 0,d=void 0;var p=[];for(var v=0,_=u.length;v<_;v+=c){f=parseFloat(u[v]);h=parseFloat(u[v+1]);d=c===3?parseFloat(u[v+2]):0;if(o.substr(0,2)==="en"){p.push(f,h,d)}else{p.push(h,f,d)}}return p};y.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={"http://www.opengis.net/gml":{pos:Object(m["o"])(y.prototype.readFlatPos_),posList:Object(m["o"])(y.prototype.readFlatPosList_)}};y.prototype.FLAT_LINEAR_RINGS_PARSERS_={"http://www.opengis.net/gml":{interior:y.prototype.interiorParser_,exterior:y.prototype.exteriorParser_}};y.prototype.GEOMETRY_PARSERS_={"http://www.opengis.net/gml":{Point:Object(m["o"])(s["b"].prototype.readPoint),MultiPoint:Object(m["o"])(s["b"].prototype.readMultiPoint),LineString:Object(m["o"])(s["b"].prototype.readLineString),MultiLineString:Object(m["o"])(s["b"].prototype.readMultiLineString),LinearRing:Object(m["o"])(s["b"].prototype.readLinearRing),Polygon:Object(m["o"])(s["b"].prototype.readPolygon),MultiPolygon:Object(m["o"])(s["b"].prototype.readMultiPolygon),Surface:Object(m["o"])(y.prototype.readSurface_),MultiSurface:Object(m["o"])(y.prototype.readMultiSurface_),Curve:Object(m["o"])(y.prototype.readCurve_),MultiCurve:Object(m["o"])(y.prototype.readMultiCurve_),Envelope:Object(m["o"])(y.prototype.readEnvelope_)}};y.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:Object(m["j"])(y.prototype.curveMemberParser_),curveMembers:Object(m["j"])(y.prototype.curveMemberParser_)}};y.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:Object(m["j"])(y.prototype.surfaceMemberParser_),surfaceMembers:Object(m["j"])(y.prototype.surfaceMemberParser_)}};y.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Object(m["j"])(s["b"].prototype.readLineString),Curve:Object(m["j"])(y.prototype.readCurve_)}};y.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Object(m["j"])(s["b"].prototype.readPolygon),Surface:Object(m["j"])(y.prototype.readSurface_)}};y.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:Object(m["o"])(y.prototype.readPatch_)}};y.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:Object(m["o"])(y.prototype.readSegment_)}};y.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:Object(m["j"])(y.prototype.readFlatPosList_),upperCorner:Object(m["j"])(y.prototype.readFlatPosList_)}};y.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:Object(m["o"])(y.prototype.readPolygonPatch_)}};y.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:Object(m["o"])(y.prototype.readLineStringSegment_)}};y.prototype.writePos_=function(t,e,n){var i=n[n.length-1];var r=i["hasZ"];var a=r?3:2;t.setAttribute("srsDimension",a);var o=i["srsName"];var s="enu";if(o){s=Object(g["h"])(o).getAxisOrientation()}var u=e.getCoordinates();var c=void 0;if(s.substr(0,2)==="en"){c=u[0]+" "+u[1]}else{c=u[1]+" "+u[0]}if(r){var f=u[2]||0;c+=" "+f}Object(l["n"])(t,c)};y.prototype.getCoords_=function(t,e,n){var i="enu";if(e){i=Object(g["h"])(e).getAxisOrientation()}var r=i.substr(0,2)==="en"?t[0]+" "+t[1]:t[1]+" "+t[0];if(n){var a=t[2]||0;r+=" "+a}return r};y.prototype.writePosList_=function(t,e,n){var i=n[n.length-1];var r=i["hasZ"];var a=r?3:2;t.setAttribute("srsDimension",a);var o=i["srsName"];var s=e.getCoordinates();var u=s.length;var c=new Array(u);var f=void 0;for(var h=0;h<u;++h){f=s[h];c[h]=this.getCoords_(f,o,r)}Object(l["n"])(t,c.join(" "))};y.prototype.writePoint_=function(t,e,n){var i=n[n.length-1];var r=i["srsName"];if(r){t.setAttribute("srsName",r)}var a=Object(m["d"])(t.namespaceURI,"pos");t.appendChild(a);this.writePos_(a,e,n)};y.prototype.writeEnvelope=function(t,e,n){var i=n[n.length-1];var r=i["srsName"];if(r){t.setAttribute("srsName",r)}var a=["lowerCorner","upperCorner"];var o=[e[0]+" "+e[1],e[2]+" "+e[3]];Object(m["v"])({node:t},this.ENVELOPE_SERIALIZERS_,m["b"],o,n,a,this)};y.prototype.writeLinearRing_=function(t,e,n){var i=n[n.length-1];var r=i["srsName"];if(r){t.setAttribute("srsName",r)}var a=Object(m["d"])(t.namespaceURI,"posList");t.appendChild(a);this.writePosList_(a,e,n)};y.prototype.RING_NODE_FACTORY_=function(t,e,n){var i=e[e.length-1];var r=i.node;var a=i["exteriorWritten"];if(a===undefined){i["exteriorWritten"]=true}return Object(m["d"])(r.namespaceURI,a!==undefined?"interior":"exterior")};y.prototype.writeSurfaceOrPolygon_=function(t,e,n){var i=n[n.length-1];var r=i["hasZ"];var a=i["srsName"];if(t.nodeName!=="PolygonPatch"&&a){t.setAttribute("srsName",a)}if(t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){var o=e.getLinearRings();Object(m["v"])({node:t,hasZ:r,srsName:a},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,o,n,undefined,this)}else if(t.nodeName==="Surface"){var s=Object(m["d"])(t.namespaceURI,"patches");t.appendChild(s);this.writeSurfacePatches_(s,e,n)}};y.prototype.writeCurveOrLineString_=function(t,e,n){var i=n[n.length-1];var r=i["srsName"];if(t.nodeName!=="LineStringSegment"&&r){t.setAttribute("srsName",r)}if(t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){var a=Object(m["d"])(t.namespaceURI,"posList");t.appendChild(a);this.writePosList_(a,e,n)}else if(t.nodeName==="Curve"){var o=Object(m["d"])(t.namespaceURI,"segments");t.appendChild(o);this.writeCurveSegments_(o,e,n)}};y.prototype.writeMultiSurfaceOrPolygon_=function(t,e,n){var i=n[n.length-1];var r=i["hasZ"];var a=i["srsName"];var o=i["surface"];if(a){t.setAttribute("srsName",a)}var s=e.getPolygons();Object(m["v"])({node:t,hasZ:r,srsName:a,surface:o},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,n,undefined,this)};y.prototype.writeMultiPoint_=function(t,e,n){var i=n[n.length-1];var r=i["srsName"];var a=i["hasZ"];if(r){t.setAttribute("srsName",r)}var o=e.getPoints();Object(m["v"])({node:t,hasZ:a,srsName:r},this.POINTMEMBER_SERIALIZERS_,Object(m["q"])("pointMember"),o,n,undefined,this)};y.prototype.writeMultiCurveOrLineString_=function(t,e,n){var i=n[n.length-1];var r=i["hasZ"];var a=i["srsName"];var o=i["curve"];if(a){t.setAttribute("srsName",a)}var s=e.getLineStrings();Object(m["v"])({node:t,hasZ:r,srsName:a,curve:o},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,n,undefined,this)};y.prototype.writeRing_=function(t,e,n){var i=Object(m["d"])(t.namespaceURI,"LinearRing");t.appendChild(i);this.writeLinearRing_(i,e,n)};y.prototype.writeSurfaceOrPolygonMember_=function(t,e,n){var i=this.GEOMETRY_NODE_FACTORY_(e,n);if(i){t.appendChild(i);this.writeSurfaceOrPolygon_(i,e,n)}};y.prototype.writePointMember_=function(t,e,n){var i=Object(m["d"])(t.namespaceURI,"Point");t.appendChild(i);this.writePoint_(i,e,n)};y.prototype.writeLineStringOrCurveMember_=function(t,e,n){var i=this.GEOMETRY_NODE_FACTORY_(e,n);if(i){t.appendChild(i);this.writeCurveOrLineString_(i,e,n)}};y.prototype.writeSurfacePatches_=function(t,e,n){var i=Object(m["d"])(t.namespaceURI,"PolygonPatch");t.appendChild(i);this.writeSurfaceOrPolygon_(i,e,n)};y.prototype.writeCurveSegments_=function(t,e,n){var i=Object(m["d"])(t.namespaceURI,"LineStringSegment");t.appendChild(i);this.writeCurveOrLineString_(i,e,n)};y.prototype.writeGeometryElement=function(t,e,n){var i=n[n.length-1];var r=Object(v["a"])({},i);r.node=t;var a=void 0;if(Array.isArray(e)){if(i.dataProjection){a=Object(g["o"])(e,i.featureProjection,i.dataProjection)}else{a=e}}else{a=Object(o["b"])(e,true,i)}Object(m["v"])(r,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[a],n,undefined,this)};y.prototype.writeFeatureElement=function(t,e,n){var i=e.getId();if(i){t.setAttribute("fid",i)}var r=n[n.length-1];var a=r["featureNS"];var o=e.getGeometryName();if(!r.serializers){r.serializers={};r.serializers[a]={}}var s=e.getProperties();var c=[];var f=[];for(var h in s){var d=s[h];if(d!==null){c.push(h);f.push(d);if(h==o||d instanceof u["a"]){if(!(h in r.serializers[a])){r.serializers[a][h]=Object(m["l"])(this.writeGeometryElement,this)}}else{if(!(h in r.serializers[a])){r.serializers[a][h]=Object(m["l"])(l["n"])}}}}var p=Object(v["a"])({},r);p.node=t;Object(m["v"])(p,r.serializers,Object(m["q"])(undefined,a),f,n,c)};y.prototype.writeFeatureMembers_=function(t,e,n){var i=n[n.length-1];var r=i["featureType"];var a=i["featureNS"];var o={};o[a]={};o[a][r]=Object(m["l"])(this.writeFeatureElement,this);var s=Object(v["a"])({},i);s.node=t;Object(m["v"])(s,o,Object(m["q"])(r,a),e,n)};var b={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};y.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,n){var i=e[e.length-1].node;return Object(m["d"])("http://www.opengis.net/gml",b[i.nodeName])};y.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,n){var i=e[e.length-1];var r=i["multiSurface"];var a=i["surface"];var o=i["curve"];var s=i["multiCurve"];var l=void 0;if(!Array.isArray(t)){l=t.getType();if(l==="MultiPolygon"&&r===true){l="MultiSurface"}else if(l==="Polygon"&&a===true){l="Surface"}else if(l==="LineString"&&o===true){l="Curve"}else if(l==="MultiLineString"&&s===true){l="MultiCurve"}}else{l="Envelope"}return Object(m["d"])("http://www.opengis.net/gml",l)};y.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var n=Object(m["d"])("http://www.opengis.net/gml","geom");var i={node:n,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};if(e){Object(v["a"])(i,e)}this.writeGeometryElement(n,t,[i]);return n};y.prototype.writeFeatures;y.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var n=Object(m["d"])("http://www.opengis.net/gml","featureMembers");n.setAttributeNS(m["c"],"xsi:schemaLocation",this.schemaLocation);var i={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};if(e){Object(v["a"])(i,e)}this.writeFeatureMembers_(n,t,[i]);return n};y.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:Object(m["l"])(y.prototype.writeRing_),interior:Object(m["l"])(y.prototype.writeRing_)}};y.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:Object(m["l"])(l["n"]),upperCorner:Object(m["l"])(l["n"])}};y.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:Object(m["l"])(y.prototype.writeSurfaceOrPolygonMember_),polygonMember:Object(m["l"])(y.prototype.writeSurfaceOrPolygonMember_)}};y.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:Object(m["l"])(y.prototype.writePointMember_)}};y.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:Object(m["l"])(y.prototype.writeLineStringOrCurveMember_),curveMember:Object(m["l"])(y.prototype.writeLineStringOrCurveMember_)}};y.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:Object(m["l"])(y.prototype.writeCurveOrLineString_),MultiCurve:Object(m["l"])(y.prototype.writeMultiCurveOrLineString_),Point:Object(m["l"])(y.prototype.writePoint_),MultiPoint:Object(m["l"])(y.prototype.writeMultiPoint_),LineString:Object(m["l"])(y.prototype.writeCurveOrLineString_),MultiLineString:Object(m["l"])(y.prototype.writeMultiCurveOrLineString_),LinearRing:Object(m["l"])(y.prototype.writeLinearRing_),Polygon:Object(m["l"])(y.prototype.writeSurfaceOrPolygon_),MultiPolygon:Object(m["l"])(y.prototype.writeMultiSurfaceOrPolygon_),Surface:Object(m["l"])(y.prototype.writeSurfaceOrPolygon_),MultiSurface:Object(m["l"])(y.prototype.writeMultiSurfaceOrPolygon_),Envelope:Object(m["l"])(y.prototype.writeEnvelope)}};e["a"]=y},function(t,e,n){"use strict";n.d(e,"a",function(){return s});n.d(e,"b",function(){return l});n.d(e,"d",function(){return u});n.d(e,"c",function(){return c});var i=n(27);var r=n(15);var a=n(125);function o(t,e){var n=/\{z\}/g;var r=/\{x\}/g;var a=/\{y\}/g;var o=/\{-y\}/g;return function(s,l,u){if(!s){return undefined}else{return t.replace(n,s[0].toString()).replace(r,s[1].toString()).replace(a,function(){var t=-s[2]-1;return t.toString()}).replace(o,function(){var t=s[0];var n=e.getFullTileRange(t);Object(i["a"])(n,55);var r=n.getHeight()+s[2];return r.toString()})}}}function s(t,e){var n=t.length;var i=new Array(n);for(var r=0;r<n;++r){i[r]=o(t[r],e)}return l(i)}function l(t){if(t.length===1){return t[0]}return function(e,n,i){if(!e){return undefined}else{var o=Object(a["e"])(e);var s=Object(r["d"])(o,t.length);return t[s](e,n,i)}}}function u(t,e,n){return undefined}function c(t){var e=[];var n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var i=n[1].charCodeAt(0);var r=n[2].charCodeAt(0);var a=void 0;for(a=i;a<=r;++a){e.push(t.replace(n[0],String.fromCharCode(a)))}return e}n=n=/\{(\d+)-(\d+)\}/.exec(t);if(n){var o=parseInt(n[2],10);for(var s=parseInt(n[1],10);s<=o;s++){e.push(t.replace(n[0],s.toString()))}return e}e.push(t);return e}},function(t,e,n){"use strict";e["a"]={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},function(t,e,n){"use strict";var i=n(1);var r=n(266);var a=n.n(r);var o=n(4);var s=n(9);var l=function t(e){this.rbush_=a()(e);this.items_={}};l.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n);this.items_[Object(i["c"])(e)]=n};l.prototype.load=function(t,e){var n=new Array(e.length);for(var r=0,a=e.length;r<a;r++){var o=t[r];var s=e[r];var l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};n[r]=l;this.items_[Object(i["c"])(s)]=l}this.rbush_.load(n)};l.prototype.remove=function(t){var e=Object(i["c"])(t);var n=this.items_[e];delete this.items_[e];return this.rbush_.remove(n)!==null};l.prototype.update=function(t,e){var n=this.items_[Object(i["c"])(e)];var r=[n.minX,n.minY,n.maxX,n.maxY];if(!Object(o["p"])(r,t)){this.remove(e);this.insert(t,e)}};l.prototype.getAll=function(){var t=this.rbush_.all();return t.map(function(t){return t.value})};l.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};var n=this.rbush_.search(e);return n.map(function(t){return t.value})};l.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)};l.prototype.forEachInExtent=function(t,e,n){return this.forEach_(this.getInExtent(t),e,n)};l.prototype.forEach_=function(t,e,n){var i=void 0;for(var r=0,a=t.length;r<a;r++){i=e.call(n,t[r]);if(i){return i}}return i};l.prototype.isEmpty=function(){return Object(s["d"])(this.items_)};l.prototype.clear=function(){this.rbush_.clear();this.items_={}};l.prototype.getExtent=function(t){var e=this.rbush_.data;return Object(o["k"])(e.minX,e.minY,e.maxX,e.maxY,t)};l.prototype.concat=function(t){this.rbush_.load(t.rbush_.all());for(var e in t.items_){this.items_[e|0]=t.items_[e|0]}};e["a"]=l},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function r(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function t(e){r(this,t);this.inRange_=e.inRange!==false;this.visible_=e.visible===true;this.attributes=e.attributes||null;this.id_=e.id;this.identifierAttribute_=e.identifierAttribute;this.maxResolution_=e.maxResolution;this.minResolution_=e.minResolution;this.name_=e.name}t.prototype.getAttributes=function t(){return this.attributes};t.prototype.setAttributes=function t(e){this.attributes=e};i(t,[{key:"inRange",get:function t(){return this.inRange_},set:function t(e){this.inRange_=e}},{key:"visible",get:function t(){return this.visible_},set:function t(e){this.visible_=e}},{key:"id",get:function t(){return this.id_}},{key:"identifierAttribute",get:function t(){return this.identifierAttribute_}},{key:"maxResolution",get:function t(){return this.maxResolution_}},{key:"minResolution",get:function t(){return this.minResolution_}},{key:"name",get:function t(){return this.name_}},{key:"queryable",get:function t(){return false}},{key:"supportsDynamicInRange",get:function t(){return this.maxResolution!==null||this.minResolution!==null}}]);return t}();e["a"]=a},function(t,e,n){"use strict";var i=n(128);var r=n(1);var a=n(30);var o=n(92);var s=n(80);var l=n(11);var u=function t(e,n,i){s["a"].call(this);var r=i?i:{};this.tileCoord=e;this.state=n;this.interimTile=null;this.key="";this.transition_=r.transition===undefined?250:r.transition;this.transitionStarts_={}};Object(r["d"])(u,s["a"]);u.prototype.changed=function(){this.dispatchEvent(l["a"].CHANGE)};u.prototype.getKey=function(){return this.key+"/"+this.tileCoord};u.prototype.getInterimTile=function(){if(!this.interimTile){return this}var t=this.interimTile;do{if(t.getState()==a["a"].LOADED){return t}t=t.interimTile}while(t);return this};u.prototype.refreshInterimChain=function(){if(!this.interimTile){return}var t=this.interimTile;var e=this;do{if(t.getState()==a["a"].LOADED){t.interimTile=null;break}else if(t.getState()==a["a"].LOADING){e=t}else if(t.getState()==a["a"].IDLE){e.interimTile=t.interimTile}else{e=t}t=e.interimTile}while(t)};u.prototype.getTileCoord=function(){return this.tileCoord};u.prototype.getState=function(){return this.state};u.prototype.setState=function(t){this.state=t;this.changed()};u.prototype.load=function(){};u.prototype.getAlpha=function(t,e){if(!this.transition_){return 1}var n=this.transitionStarts_[t];if(!n){n=e;this.transitionStarts_[t]=n}else if(n===-1){return 1}var i=e-n+1e3/60;if(i>=this.transition_){return 1}return Object(o["a"])(i/this.transition_)};u.prototype.inTransition=function(t){if(!this.transition_){return false}return this.transitionStarts_[t]!==-1};u.prototype.endTransition=function(t){if(this.transition_){this.transitionStarts_[t]=-1}};var c=u;var f=n(47);var h=n(3);var d=function t(e,n,i,r,a,o){c.call(this,e,n,o);this.crossOrigin_=r;this.src_=i;this.image_=new Image;if(r!==null){this.image_.crossOrigin=r}this.imageListenerKeys_=null;this.tileLoadFunction_=a};Object(r["d"])(d,c);d.prototype.disposeInternal=function(){if(this.state==a["a"].LOADING){this.unlistenImage_();this.image_=p()}if(this.interimTile){this.interimTile.dispose()}this.state=a["a"].ABORT;this.changed();c.prototype.disposeInternal.call(this)};d.prototype.getImage=function(){return this.image_};d.prototype.getKey=function(){return this.src_};d.prototype.handleImageError_=function(){this.state=a["a"].ERROR;this.unlistenImage_();this.image_=p();this.changed()};d.prototype.handleImageLoad_=function(){if(this.image_.naturalWidth&&this.image_.naturalHeight){this.state=a["a"].LOADED}else{this.state=a["a"].EMPTY}this.unlistenImage_();this.changed()};d.prototype.load=function(){if(this.state==a["a"].ERROR){this.state=a["a"].IDLE;this.image_=new Image;if(this.crossOrigin_!==null){this.image_.crossOrigin=this.crossOrigin_}}if(this.state==a["a"].IDLE){this.state=a["a"].LOADING;this.changed();this.imageListenerKeys_=[Object(h["b"])(this.image_,l["a"].ERROR,this.handleImageError_,this),Object(h["b"])(this.image_,l["a"].LOAD,this.handleImageLoad_,this)];this.tileLoadFunction_(this,this.src_)}};d.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(h["e"]);this.imageListenerKeys_=null};function p(){var t=Object(f["a"])(1,1);t.fillStyle="rgba(0,0,0,0)";t.fillRect(0,0,1,1);return t.canvas}var v=d;var g=n(368);var m=n(10);var _=n(4);var y=n(15);var b=n(194);var w=n(369);var x=function t(e,n,r,o,s,l,u,f,h,d,p){c.call(this,s,a["a"].IDLE);this.renderEdges_=p!==undefined?p:false;this.pixelRatio_=u;this.gutter_=f;this.canvas_=null;this.sourceTileGrid_=n;this.targetTileGrid_=o;this.wrappedTileCoord_=l?l:s;this.sourceTiles_=[];this.sourcesListenerKeys_=null;this.sourceZ_=0;var v=o.getTileCoordExtent(this.wrappedTileCoord_);var g=this.targetTileGrid_.getExtent();var m=this.sourceTileGrid_.getExtent();var x=g?Object(_["B"])(v,g):v;if(Object(_["u"])(x)===0){this.state=a["a"].EMPTY;return}var S=e.getExtent();if(S){if(!m){m=S}else{m=Object(_["B"])(m,S)}}var C=o.getResolution(this.wrappedTileCoord_[0]);var E=Object(_["x"])(x);var O=Object(b["a"])(e,r,E,C);if(!isFinite(O)||O<=0){this.state=a["a"].EMPTY;return}var T=d!==undefined?d:i["b"];this.triangulation_=new w["a"](e,r,x,m,O*T);if(this.triangulation_.getTriangles().length===0){this.state=a["a"].EMPTY;return}this.sourceZ_=n.getZForResolution(O);var M=this.triangulation_.calculateSourceExtent();if(m){if(e.canWrapX()){M[1]=Object(y["a"])(M[1],m[1],m[3]);M[3]=Object(y["a"])(M[3],m[1],m[3])}else{M=Object(_["B"])(M,m)}}if(!Object(_["u"])(M)){this.state=a["a"].EMPTY}else{var I=n.getTileRangeForExtentAndZ(M,this.sourceZ_);for(var R=I.minX;R<=I.maxX;R++){for(var N=I.minY;N<=I.maxY;N++){var A=h(this.sourceZ_,R,N,u);if(A){this.sourceTiles_.push(A)}}}if(this.sourceTiles_.length===0){this.state=a["a"].EMPTY}}};Object(r["d"])(x,c);x.prototype.disposeInternal=function(){if(this.state==a["a"].LOADING){this.unlistenSources_()}c.prototype.disposeInternal.call(this)};x.prototype.getImage=function(){return this.canvas_};x.prototype.reproject_=function(){var t=[];this.sourceTiles_.forEach(function(e,n,i){if(e&&e.getState()==a["a"].LOADED){t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}}.bind(this));this.sourceTiles_.length=0;if(t.length===0){this.state=a["a"].ERROR}else{var e=this.wrappedTileCoord_[0];var n=this.targetTileGrid_.getTileSize(e);var i=typeof n==="number"?n:n[0];var r=typeof n==="number"?n:n[1];var o=this.targetTileGrid_.getResolution(e);var s=this.sourceTileGrid_.getResolution(this.sourceZ_);var l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Object(b["b"])(i,r,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_);this.state=a["a"].LOADED}this.changed()};x.prototype.load=function(){if(this.state==a["a"].IDLE){this.state=a["a"].LOADING;this.changed();var t=0;this.sourcesListenerKeys_=[];this.sourceTiles_.forEach(function(e,n,i){var r=e.getState();if(r==a["a"].IDLE||r==a["a"].LOADING){t++;var o=Object(h["a"])(e,l["a"].CHANGE,function(n){var i=e.getState();if(i==a["a"].LOADED||i==a["a"].ERROR||i==a["a"].EMPTY){Object(h["e"])(o);t--;if(t===0){this.unlistenSources_();this.reproject_()}}},this);this.sourcesListenerKeys_.push(o)}}.bind(this));this.sourceTiles_.forEach(function(t,e,n){var i=t.getState();if(i==a["a"].IDLE){t.load()}});if(t===0){setTimeout(this.reproject_.bind(this),0)}}};x.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(h["e"]);this.sourcesListenerKeys_=null};var S=x;var C=n(198);var E=n(277);var O={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var T=n(125);var M=function t(e){E["b"].call(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition});this.tileLoadFunction=e.tileLoadFunction;this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):C["d"];this.urls=null;if(e.urls){this.setUrls(e.urls)}else if(e.url){this.setUrl(e.url)}if(e.tileUrlFunction){this.setTileUrlFunction(e.tileUrlFunction)}this.tileLoadingKeys_={}};Object(r["d"])(M,E["b"]);M.prototype.fixedTileUrlFunction;M.prototype.getTileLoadFunction=function(){return this.tileLoadFunction};M.prototype.getTileUrlFunction=function(){return this.tileUrlFunction};M.prototype.getUrls=function(){return this.urls};M.prototype.handleTileChange=function(t){var e=t.target;var n=Object(r["c"])(e);var i=e.getState();var o=void 0;if(i==a["a"].LOADING){this.tileLoadingKeys_[n]=true;o=O.TILELOADSTART}else if(n in this.tileLoadingKeys_){delete this.tileLoadingKeys_[n];o=i==a["a"].ERROR?O.TILELOADERROR:i==a["a"].LOADED||i==a["a"].ABORT?O.TILELOADEND:undefined}if(o!=undefined){this.dispatchEvent(new E["a"](o,e))}};M.prototype.setTileLoadFunction=function(t){this.tileCache.clear();this.tileLoadFunction=t;this.changed()};M.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t;this.tileCache.pruneExceptNewestZ();if(typeof e!=="undefined"){this.setKey(e)}else{this.changed()}};M.prototype.setUrl=function(t){var e=this.urls=Object(C["c"])(t);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Object(C["a"])(e,this.tileGrid),t)};M.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Object(C["a"])(t,this.tileGrid),e)};M.prototype.useTile=function(t,e,n){var i=Object(T["d"])(t,e,n);if(this.tileCache.containsKey(i)){this.tileCache.get(i)}};var I=M;var R=n(229);var N=function t(e){I.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:A,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition});this.crossOrigin=e.crossOrigin!==undefined?e.crossOrigin:null;this.tileClass=e.tileClass!==undefined?e.tileClass:v;this.tileCacheForProjection={};this.tileGridForProjection={};this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold;this.renderReprojectionEdges_=false};Object(r["d"])(N,I);N.prototype.canExpireCache=function(){if(!i["a"]){return I.prototype.canExpireCache.call(this)}if(this.tileCache.canExpireCache()){return true}else{for(var t in this.tileCacheForProjection){if(this.tileCacheForProjection[t].canExpireCache()){return true}}}return false};N.prototype.expireCache=function(t,e){if(!i["a"]){I.prototype.expireCache.call(this,t,e);return}var n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(var r in this.tileCacheForProjection){var a=this.tileCacheForProjection[r];a.expireCache(a==n?e:{})}};N.prototype.getGutter=function(t){if(i["a"]&&this.getProjection()&&t&&!Object(m["f"])(this.getProjection(),t)){return 0}else{return this.getGutterInternal()}};N.prototype.getGutterInternal=function(){return 0};N.prototype.getOpaque=function(t){if(i["a"]&&this.getProjection()&&t&&!Object(m["f"])(this.getProjection(),t)){return false}else{return I.prototype.getOpaque.call(this,t)}};N.prototype.getTileGridForProjection=function(t){if(!i["a"]){return I.prototype.getTileGridForProjection.call(this,t)}var e=this.getProjection();if(this.tileGrid&&(!e||Object(m["f"])(e,t))){return this.tileGrid}else{var n=Object(r["c"])(t).toString();if(!(n in this.tileGridForProjection)){this.tileGridForProjection[n]=Object(R["c"])(t)}return this.tileGridForProjection[n]}};N.prototype.getTileCacheForProjection=function(t){if(!i["a"]){return I.prototype.getTileCacheForProjection.call(this,t)}var e=this.getProjection();if(!e||Object(m["f"])(e,t)){return this.tileCache}else{var n=Object(r["c"])(t).toString();if(!(n in this.tileCacheForProjection)){this.tileCacheForProjection[n]=new g["a"](this.tileCache.highWaterMark)}return this.tileCacheForProjection[n]}};N.prototype.createTile_=function(t,e,n,i,r,o){var s=[t,e,n];var u=this.getTileCoordForTileUrlFunction(s,r);var c=u?this.tileUrlFunction(u,i,r):undefined;var f=new this.tileClass(s,c!==undefined?a["a"].IDLE:a["a"].EMPTY,c!==undefined?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);f.key=o;Object(h["a"])(f,l["a"].CHANGE,this.handleTileChange,this);return f};N.prototype.getTile=function(t,e,n,r,a){var o=this.getProjection();if(!i["a"]||!o||!a||Object(m["f"])(o,a)){return this.getTileInternal(t,e,n,r,o||a)}else{var s=this.getTileCacheForProjection(a);var l=[t,e,n];var u=void 0;var c=Object(T["c"])(l);if(s.containsKey(c)){u=s.get(c)}var f=this.getKey();if(u&&u.key==f){return u}else{var h=this.getTileGridForProjection(o);var d=this.getTileGridForProjection(a);var p=this.getTileCoordForTileUrlFunction(l,a);var v=new S(o,h,a,d,l,p,this.getTilePixelRatio(r),this.getGutterInternal(),function(t,e,n,i){return this.getTileInternal(t,e,n,i,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);v.key=f;if(u){v.interimTile=u;v.refreshInterimChain();s.replace(c,v)}else{s.set(c,v)}return v}}};N.prototype.getTileInternal=function(t,e,n,i,r){var o=null;var s=Object(T["d"])(t,e,n);var l=this.getKey();if(!this.tileCache.containsKey(s)){o=this.createTile_(t,e,n,i,r,l);this.tileCache.set(s,o)}else{o=this.tileCache.get(s);if(o.key!=l){var u=o;o=this.createTile_(t,e,n,i,r,l);if(u.getState()==a["a"].IDLE){o.interimTile=u.interimTile}else{o.interimTile=u}o.refreshInterimChain();this.tileCache.replace(s,o)}}return o};N.prototype.setRenderReprojectionEdges=function(t){if(!i["a"]||this.renderReprojectionEdges_==t){return}this.renderReprojectionEdges_=t;for(var e in this.tileCacheForProjection){this.tileCacheForProjection[e].clear()}this.changed()};N.prototype.setTileGridForProjection=function(t,e){if(i["a"]){var n=Object(m["h"])(t);if(n){var a=Object(r["c"])(n).toString();if(!(a in this.tileGridForProjection)){this.tileGridForProjection[a]=e}}}};function A(t,e){t.getImage().src=e}var L=e["a"]=N},function(t,e,n){"use strict";var i=n(1);var r=n(20);var a=n(39);var o=n(10);var s=n(163);var l=function t(e){a["a"].call(this);this.projection_=Object(o["h"])(e.projection);this.attributions_=this.adaptAttributions_(e.attributions);this.state_=e.state!==undefined?e.state:s["a"].READY;this.wrapX_=e.wrapX!==undefined?e.wrapX:false};Object(i["d"])(l,a["a"]);l.prototype.adaptAttributions_=function(t){if(!t){return null}if(Array.isArray(t)){return function(e){return t}}if(typeof t==="function"){return t}return function(e){return[t]}};l.prototype.forEachFeatureAtCoordinate=r["c"];l.prototype.getAttributions=function(){return this.attributions_};l.prototype.getProjection=function(){return this.projection_};l.prototype.getResolutions=function(){};l.prototype.getState=function(){return this.state_};l.prototype.getWrapX=function(){return this.wrapX_};l.prototype.refresh=function(){this.changed()};l.prototype.setAttributions=function(t){this.attributions_=this.adaptAttributions_(t);this.changed()};l.prototype.setState=function(t){this.state_=t;this.changed()};e["a"]=l},function(t,e,n){"use strict";var i=n(1);var r=n(3);var a=n(80);var o=n(11);var s=function t(){a["a"].call(this);this.revision_=0};Object(i["d"])(s,a["a"]);function l(t){if(Array.isArray(t)){for(var e=0,n=t.length;e<n;++e){Object(r["e"])(t[e])}}else{Object(r["e"])(t)}}s.prototype.changed=function(){++this.revision_;this.dispatchEvent(o["a"].CHANGE)};s.prototype.dispatchEvent;s.prototype.getRevision=function(){return this.revision_};s.prototype.on=function(t,e){if(Array.isArray(t)){var n=t.length;var i=new Array(n);for(var a=0;a<n;++a){i[a]=Object(r["a"])(this,t[a],e)}return i}else{return Object(r["a"])(this,t,e)}};s.prototype.once=function(t,e){if(Array.isArray(t)){var n=t.length;var i=new Array(n);for(var a=0;a<n;++a){i[a]=Object(r["b"])(this,t[a],e)}return i}else{return Object(r["b"])(this,t,e)}};s.prototype.un=function(t,e){if(Array.isArray(t)){for(var n=0,i=t.length;n<i;++n){Object(r["c"])(this,t[n],e)}return}else{Object(r["c"])(this,t,e)}};e["a"]=s},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i="http://www.w3.org/1999/xlink";function r(t){return t.getAttributeNS(i,"href")}},function(t,e,n){(function(t,n){true?n(e):undefined})(this,function(t){"use strict";function e(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function n(t){return t=e(Math.abs(t)),t?t[1]:NaN}function i(t,e){return function(n,i){var r=n.length,a=[],o=0,s=t[0],l=0;while(r>0&&s>0){if(l+s+1>i)s=Math.max(1,i-l);a.push(n.substring(r-=s,r+s));if((l+=s+1)>i)break;s=t[o=(o+1)%t.length]}return a.reverse().join(e)}}function r(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}var a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(t){if(!(e=a.exec(t)))throw new Error("invalid format: "+t);var e;return new s({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}o.prototype=s.prototype;function s(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function l(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n){switch(t[n]){case".":i=r=n;break;case"0":if(i===0)i=n;r=n;break;default:if(!+t[n])break t;if(i>0)i=0;break}}return i>0?t.slice(0,i)+t.slice(r+1):t}var u;function c(t,n){var i=e(t,n);if(!i)return t+"";var r=i[0],a=i[1],o=a-(u=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+e(t,Math.max(0,n+o-1))[0]}function f(t,n){var i=e(t,n);if(!i)return t+"";var r=i[0],a=i[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}var h={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return f(t*100,e)},r:f,s:c,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function d(t){return t}var p=Array.prototype.map,v=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function g(t){var e=t.grouping===undefined||t.thousands===undefined?d:i(p.call(t.grouping,Number),t.thousands+""),a=t.currency===undefined?"":t.currency[0]+"",s=t.currency===undefined?"":t.currency[1]+"",c=t.decimal===undefined?".":t.decimal+"",f=t.numerals===undefined?d:r(p.call(t.numerals,String)),g=t.percent===undefined?"%":t.percent+"",m=t.minus===undefined?"-":t.minus+"",_=t.nan===undefined?"NaN":t.nan+"";function y(t){t=o(t);var n=t.fill,i=t.align,r=t.sign,d=t.symbol,p=t.zero,y=t.width,b=t.comma,w=t.precision,x=t.trim,S=t.type;if(S==="n")b=true,S="g";else if(!h[S])w===undefined&&(w=12),x=true,S="g";if(p||n==="0"&&i==="=")p=true,n="0",i="=";var C=d==="$"?a:d==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",E=d==="$"?s:/[%p]/.test(S)?g:"";var O=h[S],T=/[defgprs%]/.test(S);w=w===undefined?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function M(t){var a=C,o=E,s,h,d;if(S==="c"){o=O(t)+o;t=""}else{t=+t;var g=t<0||1/t<0;t=isNaN(t)?_:O(Math.abs(t),w);if(x)t=l(t);if(g&&+t===0&&r!=="+")g=false;a=(g?r==="("?r:m:r==="-"||r==="("?"":r)+a;o=(S==="s"?v[8+u/3]:"")+o+(g&&r==="("?")":"");if(T){s=-1,h=t.length;while(++s<h){if(d=t.charCodeAt(s),48>d||d>57){o=(d===46?c+t.slice(s+1):t.slice(s))+o;t=t.slice(0,s);break}}}}if(b&&!p)t=e(t,Infinity);var M=a.length+t.length+o.length,I=M<y?new Array(y-M+1).join(n):"";if(b&&p)t=e(I+t,I.length?y-o.length:Infinity),I="";switch(i){case"<":t=a+t+o+I;break;case"=":t=a+I+t+o;break;case"^":t=I.slice(0,M=I.length>>1)+a+t+o+I.slice(M);break;default:t=I+a+t+o;break}return f(t)}M.toString=function(){return t+""};return M}function b(t,e){var i=y((t=o(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(n(e)/3)))*3,a=Math.pow(10,-r),s=v[8+r/3];return function(t){return i(a*t)+s}}return{format:y,formatPrefix:b}}var m;_({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function _(e){m=g(e);t.format=m.format;t.formatPrefix=m.formatPrefix;return m}function y(t){return Math.max(0,-n(Math.abs(t)))}function b(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(n(e)/3)))*3-n(Math.abs(t)))}function w(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,n(e)-n(t))+1}t.FormatSpecifier=s;t.formatDefaultLocale=_;t.formatLocale=g;t.formatSpecifier=o;t.precisionFixed=y;t.precisionPrefix=b;t.precisionRound=w;Object.defineProperty(t,"__esModule",{value:true})})},function(t,e,n){"use strict";var i=n(45);var r=n(54);var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function s(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function l(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var u=function(t){l(e,t);function e(n){o(this,e);n.operator=r["a"].OperatorType.EQUAL_TO;n.type=i["a"].SELECT;var a=s(this,t.call(this,n));a.choices_=n.choices;return a}a(e,[{key:"choices",get:function t(){return this.choices_}},{key:"selectedChoices",get:function t(){var e=void 0;if(this.expression){var n=String(this.expression);e=n.split(",")}else{e=[]}return e}}]);return e}(r["a"]);e["a"]=u},function(t,e,n){"use strict";var i=n(1);var r=n(42);var a=function t(e,n,i){r["a"].call(this,e);this.map=n;this.frameState=i!==undefined?i:null};Object(i["d"])(a,r["a"]);e["a"]=a},function(t,e,n){"use strict";var i=n(1);var r=n(19);var a=n(82);var o=n(14);var s=n(49);var l=n(127);var u=n(7);var c=n(29);var f=n(3);var h=n(42);var d=n(11);var p=n(50);var v=n(4);var g=n(8);var m=n(21);var _=n(28);var y=n(61);var b=n(57);var w=n(151);var x=n(200);var S=n(12);var C={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};var E=function t(e,n,i){h["a"].call(this,e);this.features=n;this.mapBrowserEvent=i};Object(i["d"])(E,h["a"]);var O=function t(e){_["b"].call(this,{handleDownEvent:R,handleDragEvent:N,handleEvent:L,handleUpEvent:A});this.condition_=e.condition?e.condition:p["j"];this.defaultDeleteCondition_=function(t){return Object(p["a"])(t)&&Object(p["l"])(t)};this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_;this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:p["c"];this.vertexFeature_=null;this.vertexSegments_=null;this.lastPixel_=[0,0];this.ignoreNextSingleClick_=false;this.modified_=false;this.rBush_=new x["a"];this.pixelTolerance_=e.pixelTolerance!==undefined?e.pixelTolerance:10;this.snappedToVertex_=false;this.changingFeature_=false;this.dragSegments_=[];this.overlay_=new y["a"]({source:new b["b"]({useSpatialIndex:false,wrapX:!!e.wrapX}),style:e.style?e.style:j(),updateWhileAnimating:true,updateWhileInteracting:true});this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_};this.source_=null;var n=void 0;if(e.source){this.source_=e.source;n=new r["b"](this.source_.getFeatures());Object(f["a"])(this.source_,w["a"].ADDFEATURE,this.handleSourceAdd_,this);Object(f["a"])(this.source_,w["a"].REMOVEFEATURE,this.handleSourceRemove_,this)}else{n=e.features}if(!n){throw new Error("The modify interaction requires features or a source")}this.features_=n;this.features_.forEach(this.addFeature_.bind(this));Object(f["a"])(this.features_,a["a"].ADD,this.handleFeatureAdd_,this);Object(f["a"])(this.features_,a["a"].REMOVE,this.handleFeatureRemove_,this);this.lastPointerEvent_=null};Object(i["d"])(O,_["b"]);var T=0;var M=1;O.prototype.addFeature_=function(t){var e=t.getGeometry();if(e&&e.getType()in this.SEGMENT_WRITERS_){this.SEGMENT_WRITERS_[e.getType()].call(this,t,e)}var n=this.getMap();if(n&&n.isRendered()&&this.getActive()){this.handlePointerAtPixel_(this.lastPixel_,n)}Object(f["a"])(t,d["a"].CHANGE,this.handleFeatureChange_,this)};O.prototype.willModifyFeatures_=function(t){if(!this.modified_){this.modified_=true;this.dispatchEvent(new E(C.MODIFYSTART,this.features_,t))}};O.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t);if(this.vertexFeature_&&this.features_.getLength()===0){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}Object(f["c"])(t,d["a"].CHANGE,this.handleFeatureChange_,this)};O.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_;var n=[];e.forEach(function(e){if(t===e.feature){n.push(e)}});for(var i=n.length-1;i>=0;--i){e.remove(n[i])}};O.prototype.setActive=function(t){if(this.vertexFeature_&&!t){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}_["b"].prototype.setActive.call(this,t)};O.prototype.setMap=function(t){this.overlay_.setMap(t);_["b"].prototype.setMap.call(this,t)};O.prototype.handleSourceAdd_=function(t){if(t.feature){this.features_.push(t.feature)}};O.prototype.handleSourceRemove_=function(t){if(t.feature){this.features_.remove(t.feature)}};O.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)};O.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e);this.addFeature_(e)}};O.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)};O.prototype.writePointGeometry_=function(t,e){var n=e.getCoordinates();var i={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)};O.prototype.writeMultiPointGeometry_=function(t,e){var n=e.getCoordinates();for(var i=0,r=n.length;i<r;++i){var a=n[i];var o={feature:t,geometry:e,depth:[i],index:i,segment:[a,a]};this.rBush_.insert(e.getExtent(),o)}};O.prototype.writeLineStringGeometry_=function(t,e){var n=e.getCoordinates();for(var i=0,r=n.length-1;i<r;++i){var a=n.slice(i,i+2);var o={feature:t,geometry:e,index:i,segment:a};this.rBush_.insert(Object(v["b"])(a),o)}};O.prototype.writeMultiLineStringGeometry_=function(t,e){var n=e.getCoordinates();for(var i=0,r=n.length;i<r;++i){var a=n[i];for(var o=0,s=a.length-1;o<s;++o){var l=a.slice(o,o+2);var u={feature:t,geometry:e,depth:[i],index:o,segment:l};this.rBush_.insert(Object(v["b"])(l),u)}}};O.prototype.writePolygonGeometry_=function(t,e){var n=e.getCoordinates();for(var i=0,r=n.length;i<r;++i){var a=n[i];for(var o=0,s=a.length-1;o<s;++o){var l=a.slice(o,o+2);var u={feature:t,geometry:e,depth:[i],index:o,segment:l};this.rBush_.insert(Object(v["b"])(l),u)}}};O.prototype.writeMultiPolygonGeometry_=function(t,e){var n=e.getCoordinates();for(var i=0,r=n.length;i<r;++i){var a=n[i];for(var o=0,s=a.length;o<s;++o){var l=a[o];for(var u=0,c=l.length-1;u<c;++u){var f=l.slice(u,u+2);var h={feature:t,geometry:e,depth:[o,i],index:u,segment:f};this.rBush_.insert(Object(v["b"])(f),h)}}}};O.prototype.writeCircleGeometry_=function(t,e){var n=e.getCenter();var i={feature:t,geometry:e,index:T,segment:[n,n]};var r={feature:t,geometry:e,index:M,segment:[n,n]};var a=[i,r];i.featureSegments=r.featureSegments=a;this.rBush_.insert(Object(v["m"])(n),i);this.rBush_.insert(e.getExtent(),r)};O.prototype.writeGeometryCollectionGeometry_=function(t,e){var n=e.getGeometriesArray();for(var i=0;i<n.length;++i){this.SEGMENT_WRITERS_[n[i].getType()].call(this,t,n[i])}};O.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;if(!e){e=new o["a"](new m["a"](t));this.vertexFeature_=e;this.overlay_.getSource().addFeature(e)}else{var n=e.getGeometry();n.setCoordinates(t)}return e};function I(t,e){return t.index-e.index}function R(t){if(!this.condition_(t)){return false}this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0;this.modified_=false;var n=this.vertexFeature_;if(n){var r=[];var a=n.getGeometry();var o=a.getCoordinates();var s=Object(v["b"])([o]);var l=this.rBush_.getInExtent(s);var u={};l.sort(I);for(var f=0,h=l.length;f<h;++f){var d=l[f];var p=d.segment;var m=Object(i["c"])(d.feature);var _=d.depth;if(_){m+="-"+_.join("-")}if(!u[m]){u[m]=new Array(2)}if(d.geometry.getType()===g["a"].CIRCLE&&d.index===M){var y=D(e,d);if(Object(c["e"])(y,o)&&!u[m][0]){this.dragSegments_.push([d,0]);u[m][0]=d}}else if(Object(c["e"])(p[0],o)&&!u[m][0]){this.dragSegments_.push([d,0]);u[m][0]=d}else if(Object(c["e"])(p[1],o)&&!u[m][1]){if((d.geometry.getType()===g["a"].LINE_STRING||d.geometry.getType()===g["a"].MULTI_LINE_STRING)&&u[m][0]&&u[m][0].index===0){continue}this.dragSegments_.push([d,1]);u[m][1]=d}else if(this.insertVertexCondition_(t)&&Object(i["c"])(p)in this.vertexSegments_&&!u[m][0]&&!u[m][1]){r.push([d,o])}}if(r.length){this.willModifyFeatures_(t)}for(var b=r.length-1;b>=0;--b){this.insertVertex_.apply(this,r[b])}}return!!this.vertexFeature_}function N(t){this.ignoreNextSingleClick_=false;this.willModifyFeatures_(t);var e=t.coordinate;for(var n=0,i=this.dragSegments_.length;n<i;++n){var r=this.dragSegments_[n];var a=r[0];var o=a.depth;var s=a.geometry;var l=void 0;var u=a.segment;var f=r[1];while(e.length<s.getStride()){e.push(u[f][e.length])}switch(s.getType()){case g["a"].POINT:l=e;u[0]=u[1]=e;break;case g["a"].MULTI_POINT:l=s.getCoordinates();l[a.index]=e;u[0]=u[1]=e;break;case g["a"].LINE_STRING:l=s.getCoordinates();l[a.index+f]=e;u[f]=e;break;case g["a"].MULTI_LINE_STRING:l=s.getCoordinates();l[o[0]][a.index+f]=e;u[f]=e;break;case g["a"].POLYGON:l=s.getCoordinates();l[o[0]][a.index+f]=e;u[f]=e;break;case g["a"].MULTI_POLYGON:l=s.getCoordinates();l[o[1]][o[0]][a.index+f]=e;u[f]=e;break;case g["a"].CIRCLE:u[0]=u[1]=e;if(a.index===T){this.changingFeature_=true;s.setCenter(e);this.changingFeature_=false}else{this.changingFeature_=true;s.setRadius(Object(c["d"])(s.getCenter(),e));this.changingFeature_=false}break;default:}if(l){this.setGeometryCoordinates_(s,l)}}this.createOrUpdateVertexFeature_(e)}function A(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var n=this.dragSegments_[e][0];var i=n.geometry;if(i.getType()===g["a"].CIRCLE){var r=i.getCenter();var a=n.featureSegments[0];var o=n.featureSegments[1];a.segment[0]=a.segment[1]=r;o.segment[0]=o.segment[1]=r;this.rBush_.update(Object(v["m"])(r),a);this.rBush_.update(i.getExtent(),o)}else{this.rBush_.update(Object(v["b"])(n.segment),n)}}if(this.modified_){this.dispatchEvent(new E(C.MODIFYEND,this.features_,t));this.modified_=false}return false}function L(t){if(!(t instanceof l["a"])){return true}this.lastPointerEvent_=t;var e=void 0;if(!t.map.getView().getInteracting()&&t.type==s["a"].POINTERMOVE&&!this.handlingDownUpSequence){this.handlePointerMove_(t)}if(this.vertexFeature_&&this.deleteCondition_(t)){if(t.type!=s["a"].SINGLECLICK||!this.ignoreNextSingleClick_){e=this.removePoint()}else{e=true}}if(t.type==s["a"].SINGLECLICK){this.ignoreNextSingleClick_=false}return _["c"].call(this,t)&&!e}O.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel;this.handlePointerAtPixel_(t.pixel,t.map)};O.prototype.handlePointerAtPixel_=function(t,e){var n=e.getCoordinateFromPixel(t);var r=function t(e,i){return P(n,e)-P(n,i)};var a=Object(v["c"])(Object(v["m"])(n),e.getView().getResolution()*this.pixelTolerance_);var o=this.rBush_;var s=o.getInExtent(a);if(s.length>0){s.sort(r);var l=s[0];var u=l.segment;var f=D(n,l);var h=e.getPixelFromCoordinate(f);var d=Object(c["d"])(t,h);if(d<=this.pixelTolerance_){var p={};if(l.geometry.getType()===g["a"].CIRCLE&&l.index===M){this.snappedToVertex_=true;this.createOrUpdateVertexFeature_(f)}else{var m=e.getPixelFromCoordinate(u[0]);var _=e.getPixelFromCoordinate(u[1]);var y=Object(c["h"])(h,m);var b=Object(c["h"])(h,_);d=Math.sqrt(Math.min(y,b));this.snappedToVertex_=d<=this.pixelTolerance_;if(this.snappedToVertex_){f=y>b?u[1]:u[0]}this.createOrUpdateVertexFeature_(f);for(var w=1,x=s.length;w<x;++w){var S=s[w].segment;if(Object(c["e"])(u[0],S[0])&&Object(c["e"])(u[1],S[1])||Object(c["e"])(u[0],S[1])&&Object(c["e"])(u[1],S[0])){p[Object(i["c"])(S)]=true}else{break}}}p[Object(i["c"])(u)]=true;this.vertexSegments_=p;return}}if(this.vertexFeature_){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}};function P(t,e){var n=e.geometry;if(n.getType()===g["a"].CIRCLE){var i=n;if(e.index===M){var r=Object(c["h"])(i.getCenter(),t);var a=Math.sqrt(r)-i.getRadius();return a*a}}return Object(c["i"])(t,e.segment)}function D(t,e){var n=e.geometry;if(n.getType()===g["a"].CIRCLE&&e.index===M){return n.getClosestPoint(t)}return Object(c["c"])(t,e.segment)}O.prototype.insertVertex_=function(t,e){var n=t.segment;var i=t.feature;var r=t.geometry;var a=t.depth;var o=t.index;var s=void 0;while(e.length<r.getStride()){e.push(0)}switch(r.getType()){case g["a"].MULTI_LINE_STRING:s=r.getCoordinates();s[a[0]].splice(o+1,0,e);break;case g["a"].POLYGON:s=r.getCoordinates();s[a[0]].splice(o+1,0,e);break;case g["a"].MULTI_POLYGON:s=r.getCoordinates();s[a[1]][a[0]].splice(o+1,0,e);break;case g["a"].LINE_STRING:s=r.getCoordinates();s.splice(o+1,0,e);break;default:return}this.setGeometryCoordinates_(r,s);var l=this.rBush_;l.remove(t);this.updateSegmentIndices_(r,o,a,1);var u={segment:[n[0],e],feature:i,geometry:r,depth:a,index:o};l.insert(Object(v["b"])(u.segment),u);this.dragSegments_.push([u,1]);var c={segment:[e,n[1]],feature:i,geometry:r,depth:a,index:o+1};l.insert(Object(v["b"])(c.segment),c);this.dragSegments_.push([c,0]);this.ignoreNextSingleClick_=true};O.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=s["a"].POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t);this.removeVertex_();this.dispatchEvent(new E(C.MODIFYEND,this.features_,t));this.modified_=false;return true}return false};O.prototype.removeVertex_=function(){var t=this.dragSegments_;var e={};var n=false;var r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=void 0;var f=void 0,h=void 0,d=void 0,p=void 0;for(l=t.length-1;l>=0;--l){o=t[l];d=o[0];p=Object(i["c"])(d.feature);if(d.depth){p+="-"+d.depth.join("-")}if(!(p in e)){e[p]={}}if(o[1]===0){e[p].right=d;e[p].index=d.index}else if(o[1]==1){e[p].left=d;e[p].index=d.index+1}}for(p in e){h=e[p].right;c=e[p].left;u=e[p].index;f=u-1;if(c!==undefined){d=c}else{d=h}if(f<0){f=0}s=d.geometry;a=s.getCoordinates();r=a;n=false;switch(s.getType()){case g["a"].MULTI_LINE_STRING:if(a[d.depth[0]].length>2){a[d.depth[0]].splice(u,1);n=true}break;case g["a"].LINE_STRING:if(a.length>2){a.splice(u,1);n=true}break;case g["a"].MULTI_POLYGON:r=r[d.depth[1]];case g["a"].POLYGON:r=r[d.depth[0]];if(r.length>4){if(u==r.length-1){u=0}r.splice(u,1);n=true;if(u===0){r.pop();r.push(r[0]);f=r.length-1}}break;default:}if(n){this.setGeometryCoordinates_(s,a);var m=[];if(c!==undefined){this.rBush_.remove(c);m.push(c.segment[0])}if(h!==undefined){this.rBush_.remove(h);m.push(h.segment[1])}if(c!==undefined&&h!==undefined){var _={depth:d.depth,feature:d.feature,geometry:d.geometry,index:f,segment:m};this.rBush_.insert(Object(v["b"])(_.segment),_)}this.updateSegmentIndices_(s,u,d.depth,-1);if(this.vertexFeature_){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}t.length=0}}return n};O.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=true;t.setCoordinates(e);this.changingFeature_=false};O.prototype.updateSegmentIndices_=function(t,e,n,i){this.rBush_.forEachInExtent(t.getExtent(),function(r){if(r.geometry===t&&(n===undefined||r.depth===undefined||Object(u["b"])(r.depth,n))&&r.index>e){r.index+=i}})};function j(){var t=Object(S["b"])();return function(e,n){return t[g["a"].POINT]}}e["a"]=O},function(t,e,n){"use strict";var i=n(2);var r=n(201);var a=n(135);var o=n(355);var s=n(45);var l=n(175);function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var c=function(){function t(){u(this,t)}t.prototype.read=function t(e){return e.map(this.readFromComplexTypeElement_)};t.prototype.readFromComplexTypeElement_=function t(e){var n=i["a"].assertString(e["name"]);var r="alias"in e?i["a"].assertString(e["alias"]):null;var a=e["minOccurs"]!="0";var u={name:n,alias:r,required:a};var c=i["a"].assertString(e["type"]);if(!o["a"].setGeometryType(u,c)){if(c==="gml:TimeInstantType"||c==="dateTime"){u.type=s["a"].DATETIME}else if(c==="date"){u.type=s["a"].DATE}else if(c==="time"){u.type=s["a"].TIME}else if(c==="decimal"||c==="double"){u.type=s["a"].NUMBER;u.numType=l["a"].NumberType.FLOAT}else if(c==="integer"||c==="long"){u.type=s["a"].NUMBER;u.numType=l["a"].NumberType.INTEGER}else if(c==="boolean"){u.type=s["a"].BOOLEAN}else{u.type=s["a"].TEXT}}return u};return t}();var f=c;var h=n(211);var d=n(3);var p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function v(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var g=function(){t.$inject=["$q","ngeoDataSources","ngeoQuerent"];function t(e,n,i){v(this,t);this.q_=e;this.collection_=n.collection;this.ngeoQuerent_=i;this.cache_={};d["a"](this.collection_,"add",this.handleDataSourcesAdd_,this);d["a"](this.collection_,"remove",this.handleDataSourcesRemove_,this)}t.prototype.getDataSource=function t(e){return this.cache_[e]||null};t.prototype.getDataSourceAttributes=function t(e){var n=this.q_.defer();if(e.attributes){n.resolve(e.attributes)}else{this.ngeoQuerent_.wfsDescribeFeatureType(e).then(function(t){var r=e.getOGCLayerNames()[0];i["a"].assertString(r,"The data source should have only one ogcLayer.");for(var a=t.element,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();;){var l;if(o){if(s>=a.length)break;l=a[s++]}else{s=a.next();if(s.done)break;l=s.value}var u=l;if(u.name===r){for(var c=t.complexType,h=Array.isArray(c),d=0,c=h?c:c[Symbol.iterator]();;){var p;if(h){if(d>=c.length)break;p=c[d++]}else{d=c.next();if(d.done)break;p=d.value}var v=p;if(v.name==u.type){var g=v.complexContent;var m=(new f).read(g);e.setAttributes(m);n.resolve(m);break}}}}})}return n.promise};t.prototype.handleDataSourcesAdd_=function t(e){var n=i["a"].assertInstanceof(e.element,r["a"]);this.cache_[n.id]=n};t.prototype.handleDataSourcesRemove_=function t(e){var n=i["a"].assertInstanceof(e.element,r["a"]);delete this.cache_[n.id]};p(t,[{key:"collection",get:function t(){return this.collection_}}]);return t}();g.module=angular.module("ngeoDataSourcesHelper",[a["a"].module.name,h["a"].module.name]);g.module.service("ngeoDataSourcesHelper",g);var m=e["a"]=g},function(t,e,n){"use strict";var i=n(2);var r=n(53);var a=n(158);var o=n(121);var s=n(153);var l=n(1);var u=n(143);var c=n(0);var f=function t(){u["a"].call(this)};l["d"](f,u["a"]);f.prototype.read;f.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling){if(e.nodeType==Node.ELEMENT_NODE){return this.readFromNode(e)}}return null};f.prototype.readFromNode=function(t){var e={};e=c["u"](e,f.PARSERS_,t,[]);return e};f.readElement_=function(t,e){var n={};for(var i=0,r=t.attributes.length;i<r;i++){var a=t.attributes.item(i);n[a.name]=a.value}if(e.length===1){n["type"]=n["type"].split(":").pop()}return n};f.readComplexType_=function(t,e){var n=t.getAttribute("name");var i=c["u"]({name:n},f.COMPLEX_TYPE_PARSERS_,t,e);i["complexContent"]=i["complexContent"]["extension"]["sequence"]["element"];return i};f.readComplexContent_=function(t,e){return c["u"]({},f.COMPLEX_CONTENT_PARSERS_,t,e)};f.readExtension_=function(t,e){return c["u"]({},f.EXTENSION_PARSERS_,t,e)};f.readSequence_=function(t,e){return c["u"]({},f.SEQUENCE_PARSERS_,t,e)};f.NAMESPACE_URIS_=[null,"http://www.w3.org/2001/XMLSchema"];f.PARSERS_=i["a"].assert(c["r"](f.NAMESPACE_URIS_,{element:c["m"](f.readElement_),complexType:c["m"](f.readComplexType_)}));f.COMPLEX_TYPE_PARSERS_=i["a"].assert(c["r"](f.NAMESPACE_URIS_,{complexContent:c["n"](f.readComplexContent_)}));f.COMPLEX_CONTENT_PARSERS_=i["a"].assert(c["r"](f.NAMESPACE_URIS_,{extension:c["n"](f.readExtension_)}));f.EXTENSION_PARSERS_=i["a"].assert(c["r"](f.NAMESPACE_URIS_,{sequence:c["n"](f.readSequence_)}));f.SEQUENCE_PARSERS_=i["a"].assert(c["r"](f.NAMESPACE_URIS_,{element:c["m"](f.readElement_)}));var h=f;var d=n(205);var p=n(5);var v=function t(){u["a"].call(this);this.version=undefined};Object(l["d"])(v,u["a"]);var g=[null,"http://www.opengis.net/wms"];var m=Object(c["r"])(g,{Service:Object(c["n"])(F),Capability:Object(c["n"])(k)});var _=Object(c["r"])(g,{Request:Object(c["n"])(W),Exception:Object(c["n"])(Y),Layer:Object(c["n"])(V)});var y=Object(c["r"])(g,{Name:Object(c["n"])(p["h"]),Title:Object(c["n"])(p["h"]),Abstract:Object(c["n"])(p["h"]),KeywordList:Object(c["n"])(et),OnlineResource:Object(c["n"])(d["a"]),ContactInformation:Object(c["n"])($),Fees:Object(c["n"])(p["h"]),AccessConstraints:Object(c["n"])(p["h"]),LayerLimit:Object(c["n"])(p["f"]),MaxWidth:Object(c["n"])(p["f"]),MaxHeight:Object(c["n"])(p["f"])});var b=Object(c["r"])(g,{ContactPersonPrimary:Object(c["n"])(G),ContactPosition:Object(c["n"])(p["h"]),ContactAddress:Object(c["n"])(U),ContactVoiceTelephone:Object(c["n"])(p["h"]),ContactFacsimileTelephone:Object(c["n"])(p["h"]),ContactElectronicMailAddress:Object(c["n"])(p["h"])});var w=Object(c["r"])(g,{ContactPerson:Object(c["n"])(p["h"]),ContactOrganization:Object(c["n"])(p["h"])});var x=Object(c["r"])(g,{AddressType:Object(c["n"])(p["h"]),Address:Object(c["n"])(p["h"]),City:Object(c["n"])(p["h"]),StateOrProvince:Object(c["n"])(p["h"]),PostCode:Object(c["n"])(p["h"]),Country:Object(c["n"])(p["h"])});var S=Object(c["r"])(g,{Format:Object(c["j"])(p["h"])});var C=Object(c["r"])(g,{Name:Object(c["n"])(p["h"]),Title:Object(c["n"])(p["h"]),Abstract:Object(c["n"])(p["h"]),KeywordList:Object(c["n"])(et),CRS:Object(c["m"])(p["h"]),EX_GeographicBoundingBox:Object(c["n"])(j),BoundingBox:Object(c["m"])(D),Dimension:Object(c["m"])(z),Attribution:Object(c["n"])(P),AuthorityURL:Object(c["m"])(Q),Identifier:Object(c["m"])(p["h"]),MetadataURL:Object(c["m"])(J),DataURL:Object(c["m"])(B),FeatureListURL:Object(c["m"])(B),Style:Object(c["m"])(tt),MinScaleDenominator:Object(c["n"])(p["d"]),MaxScaleDenominator:Object(c["n"])(p["d"]),Layer:Object(c["m"])(H)});var E=Object(c["r"])(g,{Title:Object(c["n"])(p["h"]),OnlineResource:Object(c["n"])(d["a"]),LogoURL:Object(c["n"])(Z)});var O=Object(c["r"])(g,{westBoundLongitude:Object(c["n"])(p["d"]),eastBoundLongitude:Object(c["n"])(p["d"]),southBoundLatitude:Object(c["n"])(p["d"]),northBoundLatitude:Object(c["n"])(p["d"])});var T=Object(c["r"])(g,{GetCapabilities:Object(c["n"])(K),GetMap:Object(c["n"])(K),GetFeatureInfo:Object(c["n"])(K)});var M=Object(c["r"])(g,{Format:Object(c["m"])(p["h"]),DCPType:Object(c["m"])(q)});var I=Object(c["r"])(g,{HTTP:Object(c["n"])(X)});var R=Object(c["r"])(g,{Get:Object(c["n"])(B),Post:Object(c["n"])(B)});var N=Object(c["r"])(g,{Name:Object(c["n"])(p["h"]),Title:Object(c["n"])(p["h"]),Abstract:Object(c["n"])(p["h"]),LegendURL:Object(c["m"])(Z),StyleSheetURL:Object(c["n"])(B),StyleURL:Object(c["n"])(B)});var A=Object(c["r"])(g,{Format:Object(c["n"])(p["h"]),OnlineResource:Object(c["n"])(d["a"])});var L=Object(c["r"])(g,{Keyword:Object(c["j"])(p["h"])});v.prototype.read;v.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling){if(e.nodeType==Node.ELEMENT_NODE){return this.readFromNode(e)}}return null};v.prototype.readFromNode=function(t){this.version=t.getAttribute("version").trim();var e=Object(c["u"])({version:this.version},m,t,[]);return e?e:null};function P(t,e){return Object(c["u"])({},E,t,e)}function D(t,e){var n=[Object(p["e"])(t.getAttribute("minx")),Object(p["e"])(t.getAttribute("miny")),Object(p["e"])(t.getAttribute("maxx")),Object(p["e"])(t.getAttribute("maxy"))];var i=[Object(p["e"])(t.getAttribute("resx")),Object(p["e"])(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:n,res:i}}function j(t,e){var n=Object(c["u"])({},O,t,e);if(!n){return undefined}var i=n["westBoundLongitude"];var r=n["southBoundLatitude"];var a=n["eastBoundLongitude"];var o=n["northBoundLatitude"];if(i===undefined||r===undefined||a===undefined||o===undefined){return undefined}return[i,r,a,o]}function k(t,e){return Object(c["u"])({},_,t,e)}function F(t,e){return Object(c["u"])({},y,t,e)}function $(t,e){return Object(c["u"])({},b,t,e)}function G(t,e){return Object(c["u"])({},w,t,e)}function U(t,e){return Object(c["u"])({},x,t,e)}function Y(t,e){return Object(c["u"])([],S,t,e)}function V(t,e){return Object(c["u"])({},C,t,e)}function H(t,e){var n=e[e.length-1];var i=Object(c["u"])({},C,t,e);if(!i){return undefined}var r=Object(p["b"])(t.getAttribute("queryable"));if(r===undefined){r=n["queryable"]}i["queryable"]=r!==undefined?r:false;var a=Object(p["g"])(t.getAttribute("cascaded"));if(a===undefined){a=n["cascaded"]}i["cascaded"]=a;var o=Object(p["b"])(t.getAttribute("opaque"));if(o===undefined){o=n["opaque"]}i["opaque"]=o!==undefined?o:false;var s=Object(p["b"])(t.getAttribute("noSubsets"));if(s===undefined){s=n["noSubsets"]}i["noSubsets"]=s!==undefined?s:false;var l=Object(p["e"])(t.getAttribute("fixedWidth"));if(!l){l=n["fixedWidth"]}i["fixedWidth"]=l;var u=Object(p["e"])(t.getAttribute("fixedHeight"));if(!u){u=n["fixedHeight"]}i["fixedHeight"]=u;var f=["Style","CRS","AuthorityURL"];f.forEach(function(t){if(t in n){var e=i[t]||[];i[t]=e.concat(n[t])}});var h=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];h.forEach(function(t){if(!(t in i)){var e=n[t];i[t]=e}});return i}function z(t,e){var n={name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:Object(p["b"])(t.getAttribute("multipleValues")),nearestValue:Object(p["b"])(t.getAttribute("nearestValue")),current:Object(p["b"])(t.getAttribute("current")),values:Object(p["h"])(t)};return n}function B(t,e){return Object(c["u"])({},A,t,e)}function W(t,e){return Object(c["u"])({},T,t,e)}function q(t,e){return Object(c["u"])({},I,t,e)}function X(t,e){return Object(c["u"])({},R,t,e)}function K(t,e){return Object(c["u"])({},M,t,e)}function Z(t,e){var n=B(t,e);if(n){var i=[Object(p["g"])(t.getAttribute("width")),Object(p["g"])(t.getAttribute("height"))];n["size"]=i;return n}return undefined}function Q(t,e){var n=B(t,e);if(n){n["name"]=t.getAttribute("name");return n}return undefined}function J(t,e){var n=B(t,e);if(n){n["type"]=t.getAttribute("type");return n}return undefined}function tt(t,e){return Object(c["u"])({},N,t,e)}function et(t,e){return Object(c["u"])([],L,t,e)}var nt=v;var it=n(302);var rt=n(9);var at=n(131);var ot=n(4);var st=n(114);function lt(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var ut=function(){t.$inject=["$http","$q","ngeoRuleHelper","ngeoWMSTime"];function t(e,n,i,r){lt(this,t);this.http_=e;this.q_=n;this.ngeoRuleHelper_=i;this.ngeoWMSTime_=r;this.requestCancelers_=[];this.wmsGetCapabilitiesPromises_={};this.wmtsGetCapabilitiesPromises_={}}t.prototype.issue=function t(e){var n=[];var r=e.map;this.cancelStillRunningRequests_();var a=void 0;if(e.queryableDataSources){a=e.queryableDataSources}else{var o=e.dataSources;i["a"].assert(o,"DataSources should be set");a=this.getQueryableDataSources(o,r)}var s=this.getCombinableWFSDataSources_(a.wfs);n.push(this.issueCombinedWFS_(s,e));var l=e.coordinate;if(l){var u=this.getCombinableWMSDataSources_(a.wms);n.push(this.issueCombinedWMS_(u,e))}return this.q_.all(n).then(this.handleCombinedQueryResult_.bind(this))};t.prototype.getQueryableDataSources=function t(e,n){var a={wfs:[],wms:[]};var o=i["a"].assertNumber(n.getView().getResolution());for(var s=e,l=Array.isArray(s),u=0,s=l?s:s[Symbol.iterator]();;){var c;if(l){if(u>=s.length)break;c=s[u++]}else{u=s.next();if(u.done)break;c=u.value}var f=c;if(!this.isDataSourceQueryable_(f,o)){continue}if(f instanceof r["a"]){if(f.supportsWFS){a.wfs.push(f)}else{a.wms.push(f)}}}return a};t.prototype.wfsDescribeFeatureType=function t(e){i["a"].assert(e.supportsAttributes,"The data source must support WFS, have a single OGCLayer that\n      is queryable in order to issue WFS DescribeFeatureType requests");var n=e.getOGCLayerNames();var r=at["a"](i["a"].assertString(e.wfsUrl),{REQUEST:"DescribeFeatureType",SERVICE:"WFS",VERSION:"2.0.0",TYPENAME:n});return this.http_.get(r).then(function(t){var e=new h;return e.read(t.data)})};t.prototype.wmsFindLayerCapability=function t(e,n){var i=null;for(var r=e,a=Array.isArray(r),o=0,r=a?r:r[Symbol.iterator]();;){var s;if(a){if(o>=r.length)break;s=r[o++]}else{o=r.next();if(o.done)break;s=o.value}var l=s;if(l["Name"]===n){i=l;break}else if(l["Layer"]){i=this.wmsFindLayerCapability(l["Layer"],n);if(i){break}}}return i};t.prototype.wmsGetCapabilities=function t(e,n){var r=n!==false;var a={REQUEST:"GetCapabilities",SERVICE:"WMS",VERSION:"1.3.0"};var o=at["a"](e,a);var s=void 0;if(!r||!this.wmsGetCapabilitiesPromises_[e]){s=this.http_.get(o).then(function(t){var e=new nt;return e.read(t.data)})}else if(r&&this.wmsGetCapabilitiesPromises_[e]){s=this.wmsGetCapabilitiesPromises_[e]}i["a"].assert(s);if(r&&!this.wmsGetCapabilitiesPromises_[e]){this.wmsGetCapabilitiesPromises_[e]=s}return s};t.prototype.wmtsFindLayerCapability=function t(e,n){var i=null;for(var r=e,a=Array.isArray(r),o=0,r=a?r:r[Symbol.iterator]();;){var s;if(a){if(o>=r.length)break;s=r[o++]}else{o=r.next();if(o.done)break;s=o.value}var l=s;if(l["Identifier"]===n){i=l;break}}return i};t.prototype.wmtsGetCapabilities=function t(e,n){var r=n!==false;var a=void 0;if(!r||!this.wmtsGetCapabilitiesPromises_[e]){a=this.http_.get(e).then(function(t){var e=new it["a"];return e.read(t.data)})}else if(r&&this.wmtsGetCapabilitiesPromises_[e]){a=this.wmtsGetCapabilitiesPromises_[e]}i["a"].assert(a);if(r&&!this.wmtsGetCapabilitiesPromises_[e]){this.wmtsGetCapabilitiesPromises_[e]=a}return a};t.prototype.handleCombinedQueryResult_=function t(e){var n={};for(var i=e,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;for(var l in s){var u=Number(l);n[u]=s[u]}}return n};t.prototype.handleQueryResult_=function t(e,n,i,a){var o={};for(var s=e,l=Array.isArray(s),u=0,s=l?s:s[Symbol.iterator]();;){var c;if(l){if(u>=s.length)break;c=s[u++]}else{u=s.next();if(u.done)break;c=u.value}var f=c;var h=void 0;var d=void 0;var p=void 0;if(typeof a==="number"){h=[];d=true;p=a}else{if(f instanceof r["a"]){h=this.readAndTypeFeatures_(f,a.data,i)}else{h=[]}}var v=f.id;this.setUniqueIds_(h,f.id);o[v]={features:h,limit:n,tooManyFeatures:d,totalFeatureCount:p}}return o};t.prototype.readAndTypeFeatures_=function t(e,n,i){var r=this;var a=[];var o=void 0;var s=this.getSetOlFormatTypes_(e,i).slice();s.forEach(function(t){r.getSetOlFormatTypes_(e,i,[t]);if(i){o=e.wfsFormat.readFeatures(n)}else{o=e.wmsFormat.readFeatures(n)}if(o.length>0){o.forEach(function(e){e.set("ngeo_feature_type_",t);a.push(e)})}});this.getSetOlFormatTypes_(e,i,s);return a};t.prototype.getSetOlFormatTypes_=function t(e,n,i){var r=void 0;if(n){if(i){e.wfsFormat.setFeatureType(i)}r=e.wfsFormat.getFeatureType()}else{if(i){e.wmsFormat.setLayers(i)}r=e.wmsFormat.getLayers()}if(!r){return[]}return Array.isArray(r)?r:[r]};t.prototype.issueCombinedWFS_=function t(e,n){var r=this;var a=[];var o=i["a"].assertNumber(n.limit);var l=n.map;var u=l.getView();var c=i["a"].assertNumber(u.getResolution());var f=u.getProjection();var h=f.getCode();var d=n.wfsCount===true;var p=void 0;var v=n.coordinate;if(v){var g=n.tolerancePx;i["a"].assert(g);var m=g*c;p=ot["c"](ot["m"](v),m)}else{p=n.extent}var _=new s["a"];var y=new XMLSerializer;var b=function t(e){var s=void 0;var l=void 0;var u=[];var f=void 0;var v={};if(n.bboxAsGETParam&&p){v["bbox"]=p.join(",")}for(var g=e,m=Array.isArray(g),b=0,g=m?g:g[Symbol.iterator]();;){var w;if(m){if(b>=g.length)break;w=g[b++]}else{b=g.next();if(b.done)break;w=b.value}var x=w;if(!s){l=x.wfsFeatureNS;var S=x.wfsFeaturePrefix;var C=x.geometryName;var E=x.wfsOutputFormat;s={bbox:p,featureNS:l,featurePrefix:S,geometryName:C,outputFormat:E,srsName:h};f=x.wfsUrl;rt["a"](v,x.activeDimensions)}u=u.concat(x.getInRangeOGCLayerNames(c,true));var O=void 0;if(n.filter){O=r.ngeoRuleHelper_.createFilter({dataSource:x,filter:n.filter,incDimensions:true,incTime:true})}else if(x.filterRules&&x.filterRules.length||x.timeRangeValue||x.dimensionsFiltersConfig&&Object.keys(x.dimensionsFiltersConfig).length>0){i["a"].assert(e.length===1,"A data source having filterRules or timeRangeValue should issue\n            a single query, alone.");O=r.ngeoRuleHelper_.createFilter({dataSource:x,incDimensions:true,incTime:true,srsName:h})}if(O){s["filter"]=O}}i["a"].assert(s);s.featureTypes=u;i["a"].assert(f);var T=r.q_.defer();a.push(T.promise.then(r.handleQueryResult_.bind(r,e,o,true)));var M=void 0;if(d){var I=rt["a"]({resultType:"hits"},s);var R=_.writeGetFeature(I);var N=y.serializeToString(R);var A=r.registerCanceler_();M=r.http_.post(f,N,{params:v,headers:{"Content-Type":"text/xml; charset=UTF-8"},timeout:A.promise}).then(function(t){var n=e[0].wfsFormat.readFeatureCollectionMetadata(t.data);return n["numberOfFeatures"]}.bind(r))}else{M=r.q_.resolve()}M.then(function(t){if(t===undefined||t<o){var e=rt["a"]({maxFeatures:o},s);var n=_.writeGetFeature(e);var a=y.serializeToString(n);i["a"].assertString(f);var l=r.registerCanceler_();r.http_.post(f,a,{params:v,headers:{"Content-Type":"text/xml; charset=UTF-8"},timeout:l.promise}).then(function(t){T.resolve(t)})}else{T.resolve(t)}})};for(var w=e,x=Array.isArray(w),S=0,w=x?w:w[Symbol.iterator]();;){var C;if(x){if(S>=w.length)break;C=w[S++]}else{S=w.next();if(S.done)break;C=S.value}var E=C;b(E)}return this.q_.all(a).then(this.handleCombinedQueryResult_.bind(this))};t.prototype.issueCombinedWMS_=function t(e,n){var r=[];var a=i["a"].assertNumber(n.limit);var o=n.map;var s=o.getView();var l=i["a"].assertNumber(s.getResolution());var u=s.getProjection();var c=u.getCode();var f=n.coordinate;i["a"].assert(f);for(var h=e,d=Array.isArray(h),p=0,h=d?h:h[Symbol.iterator]();;){var v;if(d){if(p>=h.length)break;v=h[p++]}else{p=h.next();if(p.done)break;v=p.value}var g=v;var m=void 0;var _=[];var y=void 0;var b=false;var w={};var x=null;var S=null;for(var C=g,E=Array.isArray(C),O=0,C=E?C:C[Symbol.iterator]();;){var T;if(E){if(O>=C.length)break;T=C[O++]}else{O=C.next();if(O.done)break;T=O.value}var M=T;if(!y){y=M.wmsInfoFormat;m=M.wmsUrl}_=_.concat(M.getInRangeOGCLayerNames(l,true));if(!b){rt["a"](w,M.activeDimensions);b=true}if(M.filterRules&&M.filterRules.length){i["a"].assert(g.length===1);S=M.getFiltrableOGCLayerName();x=this.ngeoRuleHelper_.createFilterString({dataSource:M,srsName:c})}if(M.timeRangeValue!==null&&M.timeProperty){i["a"].assert(g.length===1);w["TIME"]=this.ngeoWMSTime_.formatWMSTimeParam(M.timeProperty,M.timeRangeValue)}}w["LAYERS"]=_;w["QUERY_LAYERS"]=_;if(x&&S){var I=null;if(_.length===1){I=x}else{var R=[];for(var N=0,A=_.length;N<A;N++){if(_[N]===S){R.push("("+x+")")}else{R.push("()")}}I=R.join("")}w["FILTER"]=I}i["a"].assert(m);var L=new st["a"]({params:w,url:m});var P=i["a"].assertString(L.getGetFeatureInfoUrl(f,l,c,{FEATURE_COUNT:a,INFO_FORMAT:y}));var D=this.registerCanceler_();r.push(this.http_.get(P,{timeout:D.promise}).then(this.handleQueryResult_.bind(this,g,a,false)))}return this.q_.all(r).then(this.handleCombinedQueryResult_.bind(this))};t.prototype.getCombinableWFSDataSources_=function t(e){var n=[];var i=[];for(var r=e,a=Array.isArray(r),o=0,r=a?r:r[Symbol.iterator]();;){var s;if(a){if(o>=r.length)break;s=r[o++]}else{o=r.next();if(o.done)break;s=o.value}var l=s;if(l.combinableForWFS){var u=false;for(var c=n,f=Array.isArray(c),h=0,c=f?c:c[Symbol.iterator]();;){var d;if(f){if(h>=c.length)break;d=c[h++]}else{h=c.next();if(h.done)break;d=h.value}var p=d;if(l.combinableWithDataSourceForWFS(p[0])){p.push(l);u=true}}if(!u){n.push([l])}}else{i.push([l])}}return n.concat(i)};t.prototype.getCombinableWMSDataSources_=function t(e){var n=[];var i=[];for(var r=e,a=Array.isArray(r),o=0,r=a?r:r[Symbol.iterator]();;){var s;if(a){if(o>=r.length)break;s=r[o++]}else{o=r.next();if(o.done)break;s=o.value}var l=s;if(l.combinableForWMS){var u=false;for(var c=n,f=Array.isArray(c),h=0,c=f?c:c[Symbol.iterator]();;){var d;if(f){if(h>=c.length)break;d=c[h++]}else{h=c.next();if(h.done)break;d=h.value}var p=d;if(l.combinableWithDataSourceForWMS(p[0])){p.push(l);u=true}}if(!u){n.push([l])}}else{i.push([l])}}return n.concat(i)};t.prototype.isDataSourceQueryable_=function t(e,n){var i=e.visible&&e.inRange&&e.queryable;if(i&&e instanceof r["a"]){var a=e;i=a.isAnyOGCLayerInRange(n,true)}return i};t.prototype.setUniqueIds_=function t(e,n){e.forEach(function(t){if(t.getId()!==undefined){var e=n+"_"+t.getId();t.setId(e)}})};t.prototype.registerCanceler_=function t(){var e=this.q_.defer();this.requestCancelers_.push(e);return e};t.prototype.cancelStillRunningRequests_=function t(){for(var e=this.requestCancelers_,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{i=e.next();if(i.done)break;r=i.value}var a=r;a.resolve()}this.requestCancelers_.length=0};return t}();ut.CombinedDataSources;ut.module=angular.module("ngeoQuerent",[a["a"].module.name,o["a"].module.name]);ut.module.service("ngeoQuerent",ut);var ct=e["a"]=ut},function(t,e,n){"use strict";var i=n(56);var r=n(2);var a=n(122);var o=n(1);var s=n(3);var l=n(11);var u=n(39);var c=n(64);var f=n(10);var h="projection";var d="coordinateFormat";var p=function t(e){var n=e?e:{};var i=document.createElement("DIV");i.className=n.className!==undefined?n.className:"ol-mouse-position";c["a"].call(this,{element:i,render:n.render||v,target:n.target});Object(s["a"])(this,Object(u["b"])(h),this.handleProjectionChanged_,this);if(n.coordinateFormat){this.setCoordinateFormat(n.coordinateFormat)}if(n.projection){this.setProjection(n.projection)}this.undefinedHTML_="undefinedHTML"in n?n.undefinedHTML:"&nbsp;";this.renderOnMouseOut_=!!this.undefinedHTML_;this.renderedHTML_=i.innerHTML;this.mapProjection_=null;this.transform_=null;this.lastMouseMovePixel_=null};Object(o["d"])(p,c["a"]);function v(t){var e=t.frameState;if(!e){this.mapProjection_=null}else{if(this.mapProjection_!=e.viewState.projection){this.mapProjection_=e.viewState.projection;this.transform_=null}}this.updateHTML_(this.lastMouseMovePixel_)}p.prototype.handleProjectionChanged_=function(){this.transform_=null};p.prototype.getCoordinateFormat=function(){return this.get(d)};p.prototype.getProjection=function(){return this.get(h)};p.prototype.handleMouseMove=function(t){var e=this.getMap();this.lastMouseMovePixel_=e.getEventPixel(t);this.updateHTML_(this.lastMouseMovePixel_)};p.prototype.handleMouseOut=function(t){this.updateHTML_(null);this.lastMouseMovePixel_=null};p.prototype.setMap=function(t){c["a"].prototype.setMap.call(this,t);if(t){var e=t.getViewport();this.listenerKeys.push(Object(s["a"])(e,l["a"].MOUSEMOVE,this.handleMouseMove,this));if(this.renderOnMouseOut_){this.listenerKeys.push(Object(s["a"])(e,l["a"].MOUSEOUT,this.handleMouseOut,this))}}};p.prototype.setCoordinateFormat=function(t){this.set(d,t)};p.prototype.setProjection=function(t){this.set(h,Object(f["h"])(t))};p.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var n=this.getProjection();if(n){this.transform_=Object(f["k"])(this.mapProjection_,n)}else{this.transform_=f["l"]}}var i=this.getMap();var r=i.getCoordinateFromPixel(t);if(r){this.transform_(r,r);var a=this.getCoordinateFormat();if(a){e=a(r)}else{e=r.toString()}}}if(!this.renderedHTML_||e!==this.renderedHTML_){this.element.innerHTML=e;this.renderedHTML_=e}};var g=p;var m=n(182);var _=angular.module("gmfMapMouseposition",[a["a"].name]);_.run(["$templateCache",function(t){t.put("gmf/map/mousepositionComponent",n(488))}]);_.value("gmfMapMousepositionTemplateUrl",function(t){var e=t["gmfMapMousepositionTemplateUrl"];return e!==undefined?e:"gmf/map/mousepositionComponent"});y.$inject=["$attrs","gmfMapMousepositionTemplateUrl"];function y(t,e){return e(t)}_.component_={controller:"gmfMousepositionController as ctrl",bindings:{map:"<gmfMousepositionMap",projections:"<gmfMousepositionProjections"},templateUrl:y};_.component("gmfMouseposition",_.component_);_.Controller_=function(t,e,n,i){this.map;this.projections;this.projection;this.$scope_=n;this.gettextCatalog_=i;this.$element_=t;this.$filter_=e;this.control_=null};_.Controller_.$inject=["$element","$filter","$scope","gettextCatalog"];_.Controller_.prototype.$onInit=function(){var t=this;this.$scope_.$on("gettextLanguageChanged",function(){t.initOlControl_()});this.initOlControl_()};_.Controller_.prototype.initOlControl_=function(){if(this.control_!==null){this.map.removeControl(this.control_)}var t=function t(e){var n=this.projection.filter.split(":");var i=this.$filter_(n.shift());r["a"].assertFunction(i);var a=n;a.unshift(e);return i.apply(this,a)};var e=this.gettextCatalog_;this.control_=new g({className:"gmf-mouseposition-control",coordinateFormat:t.bind(this),target:angular.element(".gmf-mouseposition-control-target",this.$element_)[0],undefinedHTML:e.getString("Coordinates")});this.setProjection(this.projections[0]);this.map.addControl(this.control_)};_.Controller_.prototype.setProjection=function(t){this.control_.setProjection(f["h"](t.code));this.projection=t};_.controller("gmfMousepositionController",_.Controller_);var b=_;var w=angular.module("gmfMapModule",[i["a"].name,b.name]);var x=e["a"]=w},function(t,e,n){"use strict";var i=n(218);var r=function t(e,n){this.gettextCatalog_=n;this.encoding_=e.has("ngeoCsvEncoding")?e.get("ngeoCsvEncoding"):"utf-8";this.extension_=e.has("ngeoCsvExtension")?e.get("ngeoCsvExtension"):".csv";this.includeHeader_=e.has("ngeoCsvIncludeHeader")?e.get("ngeoCsvIncludeHeader"):true;this.quote_=e.has("ngeoCsvQuote")?e.get("ngeoCsvQuote"):'"';this.separator_=e.has("ngeoCsvSeparator")?e.get("ngeoCsvSeparator"):",";this.download_=e.get("ngeoDownload")};r.$inject=["$injector","gettextCatalog"];r.$inject=["$injector","gettextCatalog"];r.prototype.generateCsv=function(t,e){var n=this;if(t.length==0||e.length==0){return""}var i=e.map(function(t){return n.gettextCatalog_.getString(t.name)});var r=this.getRow_(i);var a=t.map(function(t){var i=e.map(function(e){return t[e.name]});return n.getRow_(i)});return this.includeHeader_?r+a.join(""):a.join("")};r.prototype.getRow_=function(t){var e=this;var n=new RegExp(this.quote_,"g");var i=this.quote_+this.quote_;var r=t.map(function(t){if(t!==undefined&&t!==null){t=""+t;return e.quote_+t.replace(n,i)+e.quote_}else{return""}});return r.join(this.separator_)+"\n"};r.prototype.startDownload=function(t,e,n){var i=this.generateCsv(t,e);this.download_(i,n,"text/csv;charset="+this.encoding_)};r.module=angular.module("ngeoCsvDownload",[i["a"].name]);r.module.service("ngeoCsvDownload",r);e["a"]=r},function(t,e,n){"use strict";(function(t){var i=n(55);var r=n(174);var a=n(23);var o=n(394);var s=n(262);var l=n(245);var u=n(53);var c=n(393);var f=n(386);var h=n(13);var d=n(159);var p=n(148);var v=n(335);var g=n(216);var m=n(126);var _=n(2);var y=n(1);var b=n(7);var w=n(3);var x=n(14);var S=n(83);var C=n(21);var E=n(224);var O=n(12);var T=n(93);var M=function t(e,i,a,o,s,l,u,c,d,p){var v=this;this.q_=e;this.rootScope_=a;this.$timeout_=i;this.mapViewPropertyChangeEventKey_=null;this.ngeoDebounce_=s;this.ngeoEventHelper_=u;this.ngeoStateManager_=c;this.ngeoFeatures_=o.has("ngeoFeatures")?o.get("ngeoFeatures"):null;this.ngeoBackgroundLayerMgr_=o.has("ngeoBackgroundLayerMgr")?o.get("ngeoBackgroundLayerMgr"):null;var g=o.has("ngeoFeatureOverlayMgr")?o.get("ngeoFeatureOverlayMgr"):null;this.featureOverlay_=g?g.getFeatureOverlay():null;this.featureHelper_=o.has("ngeoFeatureHelper")?o.get("ngeoFeatureHelper"):null;this.ngeoQuerent_=o.has("ngeoQuerent")?o.get("ngeoQuerent"):null;var m=o.has("gmfPermalinkOptions")?o.get("gmfPermalinkOptions"):{};if(m.useLocalStorage===true){this.ngeoStateManager_.setUseLocalStorage(true)}this.crosshairEnabledByDefault_=!!m.crosshairEnabledByDefault;this.pointRecenterZoom_=m.pointRecenterZoom;this.gmfExternalDataSourcesManager_=o.has("gmfExternalDataSourcesManager")?o.get("gmfExternalDataSourcesManager"):null;this.gmfThemes_=o.has("gmfThemes")?o.get("gmfThemes"):null;this.gmfObjectEditingManager_=o.has("gmfObjectEditingManager")?o.get("gmfObjectEditingManager"):null;this.gmfThemeManager_=o.has("gmfThemeManager")?o.get("gmfThemeManager"):null;this.defaultTheme_=o.has("defaultTheme")?o.get("defaultTheme"):undefined;this.gmfTreeManager_=o.has("gmfTreeManager")?o.get("gmfTreeManager"):null;this.user_=p;this.ngeoLocation_=d;this.ngeoWfsPermalink_=o.has("ngeoWfsPermalink")?o.get("ngeoWfsPermalink"):null;this.gmfUser_=o.has("gmfUser")?o.get("gmfUser"):null;this.map_=null;this.ngeoAutoProjection_=o.has("ngeoAutoProjection")?o.get("ngeoAutoProjection"):null;this.sourceProjections_=null;if(m.projectionCodes!==undefined&&this.ngeoAutoProjection_){var y=this.ngeoAutoProjection_.getProjectionList(m.projectionCodes);if(y.length>0){this.sourceProjections_=y}}this.crosshairFeature_=null;this.crosshairStyle_;if(m.crosshairStyle!==undefined){this.crosshairStyle_=m.crosshairStyle}else{this.crosshairStyle_=[new O["c"]({image:new E["a"]({src:n(501)})})]}this.mapTooltip_=null;this.featureHashFormat_=new f["a"]({setStyle:false,encodeStyles:false,propertiesType:{fillColor:h["a"].COLOR,fillOpacity:h["a"].OPACITY,fontColor:h["a"].COLOR,fontSize:h["a"].SIZE,isBox:h["a"].IS_RECTANGLE,isCircle:h["a"].IS_CIRCLE,isLabel:h["a"].IS_TEXT,name:h["a"].NAME,pointRadius:h["a"].SIZE,showLabel:h["a"].SHOW_LABEL,showMeasure:h["a"].SHOW_MEASURE,strokeColor:h["a"].COLOR,strokeWidth:h["a"].STROKE},defaultValues:{name:function t(e){return l.getString(e.getGeometry().getType())},fillOpacity:function t(){return.5},showLabel:function t(){return false},showMeasure:function t(){return false}}});if(this.ngeoBackgroundLayerMgr_){w["a"](this.ngeoBackgroundLayerMgr_,"change",this.handleBackgroundLayerManagerChange_,this)}this.rootScope_.$on("ngeo-layertree-state",function(e,n,i){var r={};if(i.node.mixed){var a=n.getState();_["a"].assert(a==="on"||a==="off");var o=a==="on";n.traverseDepthFirst(function(e){if(e.node.children===undefined){var n=t.ParamPrefix.TREE_ENABLE+e.node.name;r[n]=o}})}else{var s=[];i.traverseDepthFirst(function(t){if(t.node.children===undefined&&t.getState()==="on"){s.push(t.node.name)}});r[t.ParamPrefix.TREE_GROUP_LAYERS+i.node.name]=s.join(",")}v.ngeoStateManager_.updateState(r)});this.rootScope_.$on("ngeo-layertree-opacity",function(e,n){var i={};var r=n.layer.getOpacity();var a=(n.parent.node.mixed?t.ParamPrefix.TREE_OPACITY:t.ParamPrefix.TREE_GROUP_OPACITY)+n.node.name;i[a]=r;v.ngeoStateManager_.updateState(i)});var b=this.getFeatures();if(this.ngeoFeatures_){b.forEach(function(t){if(v.featureHelper_){v.featureHelper_.setStyle(t)}v.addNgeoFeature_(t)});this.ngeoFeatures_.extend(b);w["a"](this.ngeoFeatures_,"add",this.handleNgeoFeaturesAdd_,this);w["a"](this.ngeoFeatures_,"remove",this.handleNgeoFeaturesRemove_,this)}if(this.featureHelper_){this.rootScope_.$on("$localeChangeSuccess",function(){b.forEach(function(t){v.featureHelper_.setStyle(t)})})}if(this.gmfThemeManager_){this.rootScope_.$on(r["a"].EventType.THEME_NAME_SET,function(t,e){v.setThemeInUrl_(e)})}this.setExternalDataSourcesStatePromise_=null;if(this.ngeoQuerent_&&this.gmfExternalDataSourcesManager_){this.initExternalDataSources_().then(function(){w["a"](v.gmfExternalDataSourcesManager_.wmsGroupsCollection,"add",v.handleExternalDSGroupCollectionAdd_,v);w["a"](v.gmfExternalDataSourcesManager_.wmsGroupsCollection,"remove",v.handleExternalDSGroupCollectionRemove_,v);w["a"](v.gmfExternalDataSourcesManager_.wmtsGroupsCollection,"add",v.handleExternalDSGroupCollectionAdd_,v);w["a"](v.gmfExternalDataSourcesManager_.wmtsGroupsCollection,"remove",v.handleExternalDSGroupCollectionRemove_,v);for(var t=v.gmfExternalDataSourcesManager_.wmsGroups,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var i;if(e){if(n>=t.length)break;i=t[n++]}else{n=t.next();if(n.done)break;i=n.value}var r=i;v.registerExternalDSGroup_(r)}for(var a=v.gmfExternalDataSourcesManager_.wmtsGroups,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();;){var l;if(o){if(s>=a.length)break;l=a[s++]}else{s=a.next();if(s.done)break;l=s.value}var u=l;v.registerExternalDSGroup_(u)}})}this.initLayers_()};M.$inject=["$q","$timeout","$rootScope","$injector","ngeoDebounce","gettextCatalog","ngeoEventHelper","ngeoStateManager","ngeoLocation","gmfUser"];M.$inject=["$q","$timeout","$rootScope","$injector","ngeoDebounce","gettextCatalog","ngeoEventHelper","ngeoStateManager","ngeoLocation","gmfUser"];M.prototype.getMapCenter=function(){var t=this.ngeoStateManager_.getInitialNumberValue(i["a"].PermalinkParam.MAP_X);var e=this.ngeoStateManager_.getInitialNumberValue(i["a"].PermalinkParam.MAP_Y);if(!isNaN(t)&&!isNaN(e)){var n=[t,e];if(this.sourceProjections_!==null&&this.ngeoAutoProjection_){var r=this.map_.getView().getProjection();var a=this.ngeoAutoProjection_.tryProjectionsWithInversion(n,r.getExtent(),r,this.sourceProjections_);if(a){return a}}return n}return null};M.prototype.getMapZoom=function(){var t=this.ngeoStateManager_.getInitialNumberValue(i["a"].PermalinkParam.MAP_Z);return isNaN(t)?undefined:t};M.prototype.getMapCrosshair=function(){var t=this.ngeoStateManager_.getInitialBooleanValue(i["a"].PermalinkParam.MAP_CROSSHAIR);return t===undefined?this.crosshairEnabledByDefault_:t};M.prototype.setMapCrosshair=function(t){var e=void 0;if(t){e=t}else{e=this.map_.getView().getCenter()}_["a"].assertArray(e);if(this.crosshairFeature_){this.featureOverlay_.removeFeature(this.crosshairFeature_)}this.crosshairFeature_=new x["a"](new C["a"](e));this.crosshairFeature_.setStyle(this.crosshairStyle_);this.featureOverlay_.addFeature(this.crosshairFeature_)};M.prototype.getMapTooltip=function(){return this.ngeoStateManager_.getInitialStringValue(i["a"].PermalinkParam.MAP_TOOLTIP)};M.prototype.setMapTooltip=function(e,n){var i=void 0;if(n){i=n}else{i=this.map_.getView().getCenter()}_["a"].assertArray(i);var r=t("<div/>",{class:"gmf-permalink-tooltip",text:e})[0];if(this.mapTooltip_!==null){this.map_.removeOverlay(this.mapTooltip_)}this.mapTooltip_=new o["a"]({element:r,position:i});this.map_.addOverlay(this.mapTooltip_)};M.prototype.getFeatures=function(){var t=this.ngeoStateManager_.getInitialStringValue(i["a"].PermalinkParam.FEATURES);if(t!==undefined&&t!==""){return _["a"].assert(this.featureHashFormat_.readFeatures(t))}return[]};M.prototype.setDimensions=function(t){var e=this;var n=this.ngeoLocation_.getParamKeysWithPrefix(M.ParamPrefix.DIMENSIONS);for(var i=0;i<n.length;i++){var r=n[i];var a=this.ngeoLocation_.getParam(r);_["a"].assert(a);t[r.slice(M.ParamPrefix.DIMENSIONS.length)]=a}this.rootScope_.$watchCollection(function(){return t},function(t){var n={};for(var i in t){n[M.ParamPrefix.DIMENSIONS+i]=t[i]}e.ngeoLocation_.updateParams(n)})};M.prototype.setMap=function(t){var e=this;if(t===this.map_){return}if(this.map_){this.unregisterMap_();this.map_=null}if(t){this.map_=t;if(this.gmfObjectEditingManager_){this.gmfObjectEditingManager_.getFeature().then(function(n){e.registerMap_(t,n)})}else{this.registerMap_(t,null)}}};M.prototype.registerMap_=function(t,e){var n=this;var r=t.getView();var a=void 0;var o=typeof e!=="undefined"&&e!==null?e.getGeometry():undefined;if(o){var s=t.getSize();_["a"].assert(s);var l=void 0;if(o instanceof C["a"]||o instanceof S["a"]){l=this.pointRecenterZoom_}r.fit(o.getExtent(),{size:s,maxZoom:l})}else{var u=this.ngeoStateManager_.getInitialBooleanValue(c["a"].Permalink3dParam.ENABLED);if(!u){a=this.getMapCenter();if(a){r.setCenter(a)}var f=this.getMapZoom();if(f!==undefined){r.setZoom(f)}}}this.mapViewPropertyChangeEventKey_=w["a"](r,"propertychange",this.ngeoDebounce_(function(){var t=r.getCenter();var e=r.getZoom();var a={};a[i["a"].PermalinkParam.MAP_X]=Math.round(t[0]);a[i["a"].PermalinkParam.MAP_Y]=Math.round(t[1]);a[i["a"].PermalinkParam.MAP_Z]=e;n.ngeoStateManager_.updateState(a)},300,true),this);if(this.getMapCrosshair()&&this.featureOverlay_){this.setMapCrosshair(a)}var h=this.getMapTooltip();if(h){this.setMapTooltip(h,a)}var d=this.getWfsPermalinkData_();if(d!==null&&this.ngeoWfsPermalink_){this.ngeoWfsPermalink_.issue(d,t)}};M.prototype.unregisterMap_=function(){_["a"].assert(this.mapViewPropertyChangeEventKey_,"Key should be thruthy");w["e"](this.mapViewPropertyChangeEventKey_);this.mapViewPropertyChangeEventKey_=null};M.prototype.getBackgroundLayer=function(t){var e=this.ngeoStateManager_.getInitialStringValue(i["a"].PermalinkParam.BG_LAYER);if(e!==undefined){for(var n=t,r=Array.isArray(n),a=0,n=r?n:n[Symbol.iterator]();;){var o;if(r){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;if(s.get("label")===e){return s}}}return null};M.prototype.getBackgroundLayerOpacity=function(){var t=this.ngeoStateManager_.getInitialNumberValue(i["a"].PermalinkParam.BG_LAYER_OPACITY);return t===undefined?undefined:t/100};M.prototype.handleBackgroundLayerManagerChange_=function(){var t=this;if(!this.map_||!this.ngeoBackgroundLayerMgr_){return}var e=this.ngeoBackgroundLayerMgr_.get(this.map_);var n=e.get("label");_["a"].assertString(n);var r={};r[i["a"].PermalinkParam.BG_LAYER]=n;this.ngeoStateManager_.updateState(r);var a=this.ngeoBackgroundLayerMgr_.getOpacityBgLayer(this.map_);if(a){var o=this.getBackgroundLayerOpacity();if(o!==undefined){a.setOpacity(o)}else{var s=a.getOpacity();var l={};l[i["a"].PermalinkParam.BG_LAYER_OPACITY]=""+s*100;this.ngeoStateManager_.updateState(l)}w["a"](a,"change:opacity",function(){var e=a.getOpacity();var n={};n[i["a"].PermalinkParam.BG_LAYER_OPACITY]=""+e*100;t.ngeoStateManager_.updateState(n)})}};M.prototype.refreshFirstLevelGroups=function(){if(!this.gmfTreeManager_){return}var t=this.gmfTreeManager_.rootCtrl.node.children;var e=t.map(function(t){return t.name});var n={};n[i["a"].PermalinkParam.TREE_GROUPS]=e.join(",");this.ngeoStateManager_.updateState(n)};M.prototype.themeInUrl_=function(t){var e=t.indexOf("theme");return e!=-1&&e==t.length-2};M.prototype.setThemeInUrl_=function(t){if(t){var e=this.ngeoLocation_.getPath().split("/");_["a"].assert(e.length>1);if(e[e.length-1]===""){e.splice(e.length-1)}if(this.themeInUrl_(e)){e[e.length-1]=t}else{e.push("theme",t)}this.ngeoLocation_.setPath(e.join("/"))}};M.prototype.defaultThemeName=function(){var t=this.ngeoLocation_.getPath().split("/");if(this.themeInUrl_(t)){return decodeURI(t[t.length-1])}var e=this.ngeoStateManager_.getInitialStringValue("theme");if(e){return e}var n=this.defaultThemeNameFromFunctionalities();if(n!==null){return n}if(this.defaultTheme_){return this.defaultTheme_}return null};M.prototype.defaultThemeNameFromFunctionalities=function(){if(!this.gmfUser_){return null}var t=this.gmfUser_.functionalities;if(t&&"default_theme"in t){var e=t.default_theme;if(e.length>0){return e[0]}}return null};M.prototype.initLayers_=function(){var t=this;var e=window.location.href;var n=false;if(!this.gmfThemes_){return}this.gmfThemes_.getThemesObject().then(function(r){var o=t.defaultThemeName();_["a"].assert(o!==null);if(t.gmfThemeManager_){t.gmfThemeManager_.setThemeName(t.gmfThemeManager_.modeFlush?o:"")}var s=[];var l=void 0;var u=t.ngeoLocation_.getParam(i["a"].PermalinkParam.TREE_GROUPS);if(u===undefined){_["a"].assertString(o);l=a["a"].findThemeByName(r,o);if(l){s=l.children}}else{u.split(",").forEach(function(t){var e=a["a"].findGroupByName(r,t);if(e){s.push(e)}else{n=true}})}if(t.gmfTreeManager_){t.gmfTreeManager_.setFirstLevelGroups(s)}t.$timeout_(function(){if(!t.gmfTreeManager_||!t.gmfTreeManager_.rootCtrl){if(n&&t.user_.role_id===null){t.rootScope_.$broadcast("authenticationrequired",{url:e})}return}t.gmfTreeManager_.rootCtrl.traverseDepthFirst(function(e){if(e.isRoot){return}var i=t.ngeoStateManager_.getInitialNumberValue((e.parent.node.mixed?M.ParamPrefix.TREE_OPACITY:M.ParamPrefix.TREE_GROUP_OPACITY)+e.node.name);if(i!==undefined&&e.layer){e.layer.setOpacity(i)}if(e.parent.node&&e.parent.node.mixed&&e.node.children==undefined){var r=t.ngeoStateManager_.getInitialBooleanValue(M.ParamPrefix.TREE_ENABLE+e.node.name);if(r!==undefined){e.setState(r?"on":"off",false)}}else if(!e.node.mixed&&e.depth==1){var a=t.ngeoStateManager_.getInitialStringValue(M.ParamPrefix.TREE_GROUP_LAYERS+e.node.name);if(a!==undefined){var o=a==""?[]:a.split(",");e.traverseDepthFirst(function(t){if(t.node.children===undefined){var e=b["f"](o,t.node.name);if(e){o.splice(o.indexOf(t.node.name),1)}t.setState(e?"on":"off",false)}});if(o.length>0){n=true}}}});var i=t.gmfTreeManager_.rootCtrl.children;i.forEach(function(e){e.traverseDepthFirst(function(n){if(n.getState()!=="indeterminate"){t.rootScope_.$broadcast("ngeo-layertree-state",n,e);return m["a"].VisitorDecision.STOP}})});if(n&&t.user_.role_id===null){t.rootScope_.$broadcast("authenticationrequired",{url:e})}})})};M.prototype.handleNgeoFeaturesAdd_=function(t){var e=t.element;_["a"].assertInstanceof(e,x["a"]);this.addNgeoFeature_(e)};M.prototype.handleNgeoFeaturesRemove_=function(t){var e=t.element;_["a"].assertInstanceof(e,x["a"]);this.removeNgeoFeature_(e)};M.prototype.addNgeoFeature_=function(t){var e=y["c"](t);this.ngeoEventHelper_.addListenerKey(e,w["a"](t,"change",this.ngeoDebounce_(this.handleNgeoFeaturesChange_,250,true),this))};M.prototype.removeNgeoFeature_=function(t){var e=y["c"](t);this.ngeoEventHelper_.clearListenerKey(e);this.handleNgeoFeaturesChange_()};M.prototype.handleNgeoFeaturesChange_=function(){if(!this.ngeoFeatures_){return}var t=this.ngeoFeatures_.getArray();var e=this.featureHashFormat_.writeFeatures(t);var n={};n[i["a"].PermalinkParam.FEATURES]=e;this.ngeoStateManager_.updateState(n)};M.prototype.getWfsPermalinkData_=function(){var t=this.ngeoLocation_.getParam(i["a"].PermalinkParam.WFS_LAYER);if(!t){return null}var e=this.ngeoLocation_.getParamAsInt(i["a"].PermalinkParam.WFS_NGROUPS);var n=this.ngeoLocation_.getParamKeysWithPrefix(M.ParamPrefix.WFS);var r=[];var a=void 0;if(e===undefined){a=this.createFilterGroup_(M.ParamPrefix.WFS,n);if(a!==null){r.push(a)}}else{for(var o=0;o<e;o++){a=this.createFilterGroup_(M.ParamPrefix.WFS+o+"_",n);if(a!==null){r.push(a)}}}if(r.length==0){return null}var s=this.ngeoLocation_.getParam(i["a"].PermalinkParam.WFS_SHOW_FEATURES);var l=!(s==="0"||s==="false");return{wfsType:t,showFeatures:l,filterGroups:r}};M.prototype.createFilterGroup_=function(t,e){var n=this;var r=[];e.forEach(function(e){if(e==i["a"].PermalinkParam.WFS_LAYER||e==i["a"].PermalinkParam.WFS_SHOW_FEATURES||e==i["a"].PermalinkParam.WFS_NGROUPS||e.indexOf(t)!=0){return}var a=n.ngeoLocation_.getParam(e);if(!a){return}var o=a;if(a.indexOf(",")>-1){o=a.split(",")}var s={property:e.replace(t,""),condition:o};r.push(s)});return r.length>0?{filters:r}:null};M.prototype.initExternalDataSources_=function(){var t=this;var e=_["a"].assert(this.ngeoQuerent_);var n=_["a"].assert(this.gmfExternalDataSourcesManager_);var r=[];var a=this.ngeoStateManager_.getInitialValue(i["a"].PermalinkParam.EXTERNAL_DATASOURCES_NAMES);var o=this.ngeoStateManager_.getInitialValue(i["a"].PermalinkParam.EXTERNAL_DATASOURCES_URLS);if(a&&o){var s=a.split(M.ExtDSSeparator.LIST);var l=o.split(M.ExtDSSeparator.LIST);var c=function n(i,a){var o=s[i];if(!o){return"break"}var c=o.split(M.ExtDSSeparator.NAMES);var f=l[i];var h=u["a"].guessServiceTypeByUrl(f);var d=t.q_.defer();r.push(d.promise);if(h===u["a"].Type.WMS){e.wmsGetCapabilities(f).then(function(t){d.resolve({capabilities:t,groupLayerNames:c,serviceType:h,url:f})},function(){d.reject({groupLayerNames:c,serviceType:h,url:f})})}else if(h===u["a"].Type.WMTS){e.wmtsGetCapabilities(f).then(function(t){d.resolve({capabilities:t,groupLayerNames:c,serviceType:h,url:f})},function(){d.reject({groupLayerNames:c,serviceType:h,url:f})})}else{d.reject({groupLayerNames:c,serviceType:h,url:f})}};for(var f=0,h=l.length;f<h;f++){var d=c(f,h);if(d==="break")break}}return this.q_.all(r).then(function(t){for(var i=t,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.serviceType===u["a"].Type.WMS){for(var l=s.groupLayerNames,c=Array.isArray(l),f=0,l=c?l:l[Symbol.iterator]();;){var h;if(c){if(f>=l.length)break;h=l[f++]}else{f=l.next();if(f.done)break;h=f.value}var d=h;var p=e.wmsFindLayerCapability(s.capabilities["Capability"]["Layer"]["Layer"],d);if(p){n.createAndAddDataSourceFromWMSCapability(p,s.capabilities,s.url)}else{}}}else if(s.serviceType===u["a"].Type.WMTS){for(var v=s.groupLayerNames,g=Array.isArray(v),m=0,v=g?v:v[Symbol.iterator]();;){var _;if(g){if(m>=v.length)break;_=v[m++]}else{m=v.next();if(m.done)break;_=m.value}var y=_;var b=e.wmtsFindLayerCapability(s.capabilities["Contents"]["Layer"],y);if(b){n.createAndAddDataSourceFromWMTSCapability(b,s.capabilities,s.url)}else{}}}}},function(t){})};M.prototype.handleExternalDSGroupCollectionAdd_=function(t){var e=t.element;_["a"].assertInstanceof(e,l["a"]);this.registerExternalDSGroup_(e);this.setExternalDataSourcesState_()};M.prototype.registerExternalDSGroup_=function(t){w["a"](t.dataSourcesCollection,"add",this.setExternalDataSourcesState_,this);w["a"](t.dataSourcesCollection,"remove",this.setExternalDataSourcesState_,this)};M.prototype.containsLayerName=function(t,e){if(t instanceof T["a"]){for(var n=t.getLayers().getArray(),i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var a;if(i){if(r>=n.length)break;a=n[r++]}else{r=n.next();if(r.done)break;a=r.value}var o=a;_["a"].assert(o);if(this.containsLayerName(o,e)){return true}}return false}else{return t.get("layerNodeName")==e}};M.prototype.handleExternalDSGroupCollectionRemove_=function(t){var e=t.element;_["a"].assertInstanceof(e,l["a"]);this.unregisterExternalDSGroup_(e);this.setExternalDataSourcesState_()};M.prototype.unregisterExternalDSGroup_=function(t){w["c"](t.dataSourcesCollection,"add",this.setExternalDataSourcesState_,this);w["c"](t.dataSourcesCollection,"remove",this.setExternalDataSourcesState_,this)};M.prototype.setExternalDataSourcesState_=function(){var t=this;if(this.setExternalDataSourcesStatePromise_){this.$timeout_.cancel(this.setExternalDataSourcesStatePromise_)}this.setExternalDataSourcesStatePromise_=this.$timeout_(function(){var e;var n=[];var r=[];for(var a=t.gmfExternalDataSourcesManager_.wmsGroups,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();;){var l;if(o){if(s>=a.length)break;l=a[s++]}else{s=a.next();if(s.done)break;l=s.value}var c=l;r.push(c.url);var f=[];for(var h=c.dataSources,d=Array.isArray(h),p=0,h=d?h:h[Symbol.iterator]();;){var v;if(d){if(p>=h.length)break;v=h[p++]}else{p=h.next();if(p.done)break;v=p.value}var g=v;_["a"].assertInstanceof(g,u["a"]);var m=g.getOGCLayerNames()[0];f.push(m)}n.push(f.join(M.ExtDSSeparator.NAMES))}for(var y=t.gmfExternalDataSourcesManager_.wmtsGroups,b=Array.isArray(y),w=0,y=b?y:y[Symbol.iterator]();;){var x;if(b){if(w>=y.length)break;x=y[w++]}else{w=y.next();if(w.done)break;x=w.value}var S=x;r.push(S.url);var C=[];for(var E=S.dataSources,O=Array.isArray(E),T=0,E=O?E:E[Symbol.iterator]();;){var I;if(O){if(T>=E.length)break;I=E[T++]}else{T=E.next();if(T.done)break;I=T.value}var R=I;_["a"].assert(R.wmtsLayer);C.push(R.wmtsLayer)}n.push(C.join(M.ExtDSSeparator.NAMES))}t.ngeoStateManager_.updateState((e={},e[i["a"].PermalinkParam.EXTERNAL_DATASOURCES_NAMES]=n.join(M.ExtDSSeparator.LIST),e[i["a"].PermalinkParam.EXTERNAL_DATASOURCES_URLS]=r.join(M.ExtDSSeparator.LIST),e));t.setExternalDataSourcesStatePromise_=null})};M.prototype.cleanParams=function(t){var e=this;var n=_["a"].assert(this.ngeoLocation_.getParamKeys());for(var i=n,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.startsWith(M.ParamPrefix.TREE_GROUP_LAYERS)){var l=s.substring(M.ParamPrefix.TREE_GROUP_LAYERS.length);for(var u=t,c=Array.isArray(u),f=0,u=c?u:u[Symbol.iterator]();;){var h;if(c){if(f>=u.length)break;h=u[f++]}else{f=u.next();if(f.done)break;h=f.value}var d=h;if(d.name==l){this.ngeoStateManager_.deleteParam(s);break}}}if(s.startsWith(M.ParamPrefix.TREE_GROUP_OPACITY)){var p=s.substring(M.ParamPrefix.TREE_GROUP_OPACITY.length);for(var v=t,g=Array.isArray(v),m=0,v=g?v:v[Symbol.iterator]();;){var y;if(g){if(m>=v.length)break;y=v[m++]}else{m=v.next();if(m.done)break;y=m.value}var b=y;if(b.name==p){this.ngeoStateManager_.deleteParam(s);break}}}}this.$timeout_(function(){if(!e.map_){return}var t=e.map_.getLayerGroup();_["a"].assert(t);for(var i=n,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.startsWith(M.ParamPrefix.TREE_ENABLE)){var l=s.substring(M.ParamPrefix.TREE_ENABLE.length);if(!e.containsLayerName(t,l)){e.ngeoStateManager_.deleteParam(s)}}if(s.startsWith(M.ParamPrefix.TREE_OPACITY)){var u=s.substring(M.ParamPrefix.TREE_OPACITY.length);if(!e.containsLayerName(t,u)){e.ngeoStateManager_.deleteParam(s)}}}})};M.module=angular.module("gmfPermalink",[r["a"].module.name,a["a"].module.name,s["a"].name,m["a"].module.name,d["a"].name,p["a"].module.name,v["a"].name]);M.module.service("gmfPermalink",M);M.OpenLayersLayerProperties={OPACITY:"opacity"};M.ParamPrefix={DIMENSIONS:"dim_",TREE_ENABLE:"tree_enable_",TREE_GROUP_LAYERS:"tree_group_layers_",TREE_GROUP_OPACITY:"tree_group_opacity_",TREE_OPACITY:"tree_opacity_",WFS:"wfs_"};M.ExtDSSeparator={LIST:",",NAMES:";"};M.module.value("gmfPermalinkOptions",{});(function(){var t=[];for(var e in M.ParamPrefix){t.push(new RegExp(M.ParamPrefix[e]+".*"))}for(var n in i["a"].PermalinkParam){t.push(new RegExp(M.ParamPrefix[n]))}g["a"].module.value("ngeoUsedKeyRegexp",t)})();e["a"]=M}).call(this,n(38))},function(t,e,n){"use strict";var i=n(175);var r=function t(e,n){this.http_=e;this.baseUrl_=n;this.promises_={}};r.$inject=["$http","gmfLayersUrl"];r.$inject=["$http","gmfLayersUrl"];r.prototype.getAttributes=function(t){if(!this.promises_[t]){var e=this.baseUrl_+"/"+t+"/md.xsd";this.promises_[t]=this.http_.get(e).then(this.handleGetAttributes_.bind(this))}return this.promises_[t]};r.prototype.handleGetAttributes_=function(t){return(new i["a"]).read(t.data)};r.module=angular.module("gmfXSDAttributes",[]);r.module.service("gmfXSDAttributes",r);e["a"]=r},function(t,e,n){"use strict";var i=n(2);var r=n(160);var a=function t(e,n){var r=this;this.initialState={};this.ngeoLocation=e;this.usedKeyRegexp=n;this.useLocalStorage_;this.setUseLocalStorage(false);var a=e.getParamKeys().filter(function(t){return t!="debug"&&t!="no_redirect"});if(a.length===0){if(this.useLocalStorage_){var o=function t(e){i["a"].assert(e);r.usedKeyRegexp.some(function(t){if(e.match(t)){var n=window.localStorage[e];if(n!==undefined||n!==null){r.initialState[e]=n}else{r.initialState[e]=""}return true}})};for(var s in window.localStorage){o(s)}}}else{a.forEach(function(t){r.usedKeyRegexp.some(function(e){if(t.match(e)){var n=r.ngeoLocation.getParam(t);if(n!==undefined){r.initialState[t]=n;return true}}})})}};a.$inject=["ngeoLocation","ngeoUsedKeyRegexp"];a.$inject=["ngeoLocation","ngeoUsedKeyRegexp"];a.prototype.setUseLocalStorage=function(t){this.useLocalStorage_=t;if(this.useLocalStorage_){try{if("localStorage"in window){window.localStorage["test"]="";delete window.localStorage["test"]}else{this.useLocalStorage_=false}}catch(t){console.error(t);this.useLocalStorage_=false}}return this.useLocalStorage_};a.prototype.getInitialValue=function(t){return this.initialState[t]};a.prototype.getInitialStringValue=function(t){return this.initialState[t]};a.prototype.getInitialNumberValue=function(t){var e=this.initialState[t];if(e===undefined){return undefined}return parseFloat(e)};a.prototype.getInitialBooleanValue=function(t){var e=this.initialState[t];if(e===undefined){return undefined}return e==="true"};a.prototype.updateState=function(t){this.ngeoLocation.updateParams(t);if(this.useLocalStorage_){for(var e in t){i["a"].assert(e);var n=t[e];i["a"].assert(n!==undefined);window.localStorage[e]=n}}};a.prototype.deleteParam=function(t){this.ngeoLocation.deleteParam(t);if(this.useLocalStorage_){delete window.localStorage[t]}};a.module=angular.module("ngeoStateManager",[r["a"].module.name]);a.module.service("ngeoStateManager",a);a.module.value("ngeoUsedKeyRegexp",[new RegExp(".*")]);e["a"]=a},function(t,e,n){"use strict";n.d(e,"c",function(){return m});n.d(e,"a",function(){return _});n.d(e,"d",function(){return y});n.d(e,"b",function(){return b});var i=n(102);var r=n(26);var a=n(44);var o=n(76);var s=n(6);var l=n(51);var u=n(17);var c=n(41);var f=n(173);var h=n(48);function d(){return this.hours()%12||12}function p(){return this.hours()||24}Object(r["a"])("H",["HH",2],0,"hour");Object(r["a"])("h",["hh",2],0,d);Object(r["a"])("k",["kk",2],0,p);Object(r["a"])("hmm",0,0,function(){return""+d.apply(this)+Object(f["a"])(this.minutes(),2)});Object(r["a"])("hmmss",0,0,function(){return""+d.apply(this)+Object(f["a"])(this.minutes(),2)+Object(f["a"])(this.seconds(),2)});Object(r["a"])("Hmm",0,0,function(){return""+this.hours()+Object(f["a"])(this.minutes(),2)});Object(r["a"])("Hmmss",0,0,function(){return""+this.hours()+Object(f["a"])(this.minutes(),2)+Object(f["a"])(this.seconds(),2)});function v(t,e){Object(r["a"])(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}v("a",true);v("A",false);Object(a["a"])("hour","h");Object(o["a"])("hour",13);function g(t,e){return e._meridiemParse}Object(s["a"])("a",g);Object(s["a"])("A",g);Object(s["a"])("H",s["d"]);Object(s["a"])("h",s["d"]);Object(s["a"])("k",s["d"]);Object(s["a"])("HH",s["d"],s["h"]);Object(s["a"])("hh",s["d"],s["h"]);Object(s["a"])("kk",s["d"],s["h"]);Object(s["a"])("hmm",s["j"]);Object(s["a"])("hmmss",s["l"]);Object(s["a"])("Hmm",s["j"]);Object(s["a"])("Hmmss",s["l"]);Object(l["a"])(["H","HH"],u["b"]);Object(l["a"])(["k","kk"],function(t,e,n){var i=Object(c["a"])(t);e[u["b"]]=i===24?0:i});Object(l["a"])(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t);n._meridiem=t});Object(l["a"])(["h","hh"],function(t,e,n){e[u["b"]]=Object(c["a"])(t);Object(h["a"])(n).bigHour=true});Object(l["a"])("hmm",function(t,e,n){var i=t.length-2;e[u["b"]]=Object(c["a"])(t.substr(0,i));e[u["d"]]=Object(c["a"])(t.substr(i));Object(h["a"])(n).bigHour=true});Object(l["a"])("hmmss",function(t,e,n){var i=t.length-4;var r=t.length-2;e[u["b"]]=Object(c["a"])(t.substr(0,i));e[u["d"]]=Object(c["a"])(t.substr(i,2));e[u["f"]]=Object(c["a"])(t.substr(r));Object(h["a"])(n).bigHour=true});Object(l["a"])("Hmm",function(t,e,n){var i=t.length-2;e[u["b"]]=Object(c["a"])(t.substr(0,i));e[u["d"]]=Object(c["a"])(t.substr(i))});Object(l["a"])("Hmmss",function(t,e,n){var i=t.length-4;var r=t.length-2;e[u["b"]]=Object(c["a"])(t.substr(0,i));e[u["d"]]=Object(c["a"])(t.substr(i,2));e[u["f"]]=Object(c["a"])(t.substr(r))});function m(t){return(t+"").toLowerCase().charAt(0)==="p"}var _=/[ap]\.?m?\.?/i;function y(t,e,n){if(t>11){return n?"pm":"PM"}else{return n?"am":"AM"}}var b=Object(i["b"])("Hours",true)},function(t,e,n){"use strict";var i=n(60);var r=n(354);var a=n.n(r);var o=angular.module("ngeoDownload",[]);o.factory_=function(){function t(t,e,n){var a=n!==undefined&&!i["b"].isSafari()?n:"text/plain;charset=utf-8";var o=new Blob([t],{type:a});Object(r["saveAs"])(o,e)}return t};o.factory("ngeoDownload",o.factory_);e["a"]=o},function(t,e,n){"use strict";n.d(e,"a",function(){return o});n.d(e,"b",function(){return s});n.d(e,"c",function(){return u});n.d(e,"d",function(){return c});var i=n(4);var r=n(171);var a=n(364);function o(t,e,n,r,o){var s=Object(i["s"])(Object(i["j"])(),t,e,n,r);if(!Object(i["F"])(o,s)){return false}if(Object(i["g"])(o,s)){return true}if(s[0]>=o[0]&&s[2]<=o[2]){return true}if(s[1]>=o[1]&&s[3]<=o[3]){return true}return Object(a["a"])(t,e,n,r,function(t,e){return Object(i["G"])(o,t,e)})}function s(t,e,n,i,r){for(var a=0,s=n.length;a<s;++a){if(o(t,e,n[a],i,r)){return true}e=n[a]}return false}function l(t,e,n,i,a){if(o(t,e,n,i,a)){return true}if(Object(r["b"])(t,e,n,i,a[0],a[1])){return true}if(Object(r["b"])(t,e,n,i,a[0],a[3])){return true}if(Object(r["b"])(t,e,n,i,a[2],a[1])){return true}if(Object(r["b"])(t,e,n,i,a[2],a[3])){return true}return false}function u(t,e,n,i,a){if(!l(t,e,n[0],i,a)){return false}if(n.length===1){return true}for(var o=1,s=n.length;o<s;++o){if(Object(r["a"])(t,n[o-1],n[o],i,a)){return false}}return true}function c(t,e,n,i,r){for(var a=0,o=n.length;a<o;++a){var s=n[a];if(u(t,e,s,i,r)){return true}e=s[s.length-1]}return false}},function(t,e,n){"use strict";var i=function t(e,n){this.$http_=e;this.url_=n};i.$inject=["$http","gmfRasterUrl"];i.$inject=["$http","gmfRasterUrl"];i.prototype.getRaster=function(t,e){var n=e||{};n[i.Param.X]=t[0];n[i.Param.Y]=t[1];return this.$http_.get(this.url_,{params:n}).then(this.handleGetRaster_.bind(this))};i.prototype.handleGetRaster_=function(t){return t.data};i.Param={X:"lon",Y:"lat"};i.module=angular.module("gmfRaster",[]);i.module.service("gmfRaster",i);e["a"]=i},function(t,e,n){"use strict";var i=n(38);var r=n.n(i);var a=n(236);var o=n.n(a);var s=n(532);var l=n.n(s);var u=n(529);var c=n.n(u);var f=n(2);function h(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var d=angular.module("ngeoModal",[]);d.component_={template:'<div class="modal fade" tabindex="-1" role="dialog">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <ng-transclude></ng-transclude>\n      </div>\n    </div>\n  </div>',require:{ngModel:"ngModel"},transclude:true,controller:"ngeoModalController",bindings:{resizable:"<ngeoModalResizable",closable:"<ngeoModalClosable"}};d.component("ngeoModal",d.component_);d.Controller_=function(){t.$inject=["$scope","$element"];function t(e,n){h(this,t);this.$element_=n;this.$scope_=e;this.modal_;this.closable;this.resizable;this.ngModel}t.prototype.$postLink=function t(){var e=this;this.modal_=this.$element_.children();if(!this.closable){this.modal_.attr("data-keyboard",false);this.modal_.attr("data-backdrop","static")}this.resizable=!!this.resizable;var n=this.modal_.find(".modal-dialog");n.draggable({handle:".modal-header"});if(this.resizable){n.resizable()}this.ngModel.$render=function(){e.modal_.modal(e.ngModel.$viewValue?"show":"hide")};this.modal_.on("shown.bs.modal hidden.bs.modal",function(t){var n=t.type;f["a"].assert(n=="shown"||n=="hidden");e.ngModel.$setViewValue(n=="shown")})};t.prototype.$onDestroy=function t(){this.modal_.modal("hide");this.modal_.modal("removeBackdrop");var e=this.modal_.find(".modal-dialog");e.draggable("destroy");if(this.resizable){e.resizable("destroy")}};return t}();d.controller("ngeoModalController",d.Controller_);e["a"]=d},function(t,e,n){"use strict";var i=n(384);var r=n.n(i);var a=n(2);var o=n(87);var s=n(1);var l=function t(e){o["a"].call(this);this.timeout_=e;var n=angular.element('<div class="ngeo-notification"></div>');angular.element(document.body).append(n);this.container_=n;this.cache_={}};l.$inject=["$timeout"];l.$inject=["$timeout"];s["d"](l,o["a"]);l.DEFAULT_DELAY_=7e3;l.prototype.notify=function(t){this.show(t)};l.prototype.clear=function(){for(var t in this.cache_){this.clearMessageByCacheItem_(this.cache_[parseInt(t,10)])}};l.prototype.showMessage=function(t){var e=this;var n=t.type;a["a"].assertString(n,"Type should be set.");var i=["alert","fade"];switch(n){case o["a"].Type.ERROR:i.push("alert-danger");break;case o["a"].Type.INFORMATION:i.push("alert-info");break;case o["a"].Type.SUCCESS:i.push("alert-success");break;case o["a"].Type.WARNING:i.push("alert-warning");break;default:break}var r=angular.element('<div class="'+i.join(" ")+'"></div>');var u=void 0;if(t.target){u=angular.element(t.target)}else{u=this.container_}u.append(r);r.html(t.msg).addClass("in");var c=t.delay!==undefined?t.delay:l.DEFAULT_DELAY_;var f={el:r};var h=s["c"](r);f.promise=this.timeout_(function(){r.alert("close");delete e.cache_[h]},c);this.cache_[h]=f};l.prototype.clearMessageByCacheItem_=function(t){var e=t.el;var n=t.promise;var i=s["c"](e);e.alert("close");this.timeout_.cancel(n);delete this.cache_[i]};l.CacheItem;l.module=angular.module("ngeoNotification",[]);l.module.service("ngeoNotification",l);e["a"]=l},function(t,e,n){"use strict";(function(t){var i=n(79);var r=n(80);function a(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function s(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var l=function(e){n.$inject=["$http","$injector","$rootScope","authenticationBaseUrl","gmfUser"];s(n,e);function n(t,i,r,s,l){a(this,n);var u=o(this,e.call(this));u.$http_=t;u.$rootScope_=r;u.baseUrl_=s.replace(/\/$/,"");u.user_=l;u.noReloadRole_=i.has("gmfAuthenticationNoReloadRole")?i.get("gmfAuthenticationNoReloadRole"):null;u.load_();return u}n.prototype.load_=function t(){var e=this.baseUrl_+"/"+n.RouteSuffix.IS_LOGGED_IN;this.$http_.get(e,{withCredentials:true}).then(this.handleLogin_.bind(this,true))};n.prototype.changePassword=function e(i,r,a){var o=this;var s=this.baseUrl_+"/"+n.RouteSuffix.CHANGE_PASSWORD;return this.$http_.post(s,t.param({oldPassword:i,newPassword:r,confirmNewPassword:a}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:true}).then(function(t){o.user_.is_password_changed=true})};n.prototype.login=function e(i,r){var a=this.baseUrl_+"/"+n.RouteSuffix.LOGIN;return this.$http_.post(a,t.param({login:i,password:r}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:true}).then(this.handleLogin_.bind(this,false))};n.prototype.logout=function t(){var e=this;var i=this.user_["role_name"]===this.noReloadRole_;var r=this.baseUrl_+"/"+n.RouteSuffix.LOGOUT;return this.$http_.get(r,{withCredentials:true}).then(function(){e.resetUser_(i)})};n.prototype.resetPassword=function e(i){var r=this.baseUrl_+"/"+n.RouteSuffix.RESET_PASSWORD;var a=function(t){var e=t.data;return e}.bind(this);return this.$http_.post(r,t.param({login:i}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(a)};n.prototype.getFunctionalities=function t(){return this.user_.functionalities};n.prototype.getRoleId=function t(){return this.user_.role_id};n.prototype.handleLogin_=function t(e,n){var r=n.data;this.setUser_(r,!e);if(e){var a=new i["a"]("ready",{user:this.user_});this.dispatchEvent(a)}return n};n.prototype.setUser_=function t(e,n){for(var r in e){this.user_[r]=e[r]}if(n&&e.username!==undefined){var a=new i["a"]("login",{user:this.user_});this.dispatchEvent(a)}};n.prototype.resetUser_=function t(e){e=e||false;for(var n in this.user_){this.user_[n]=null}var r=new i["a"]("logout",{user:this.user_});this.dispatchEvent(r);if(!e){this.load_()}};return n}(r["a"]);l.RouteSuffix={CHANGE_PASSWORD:"loginchange",IS_LOGGED_IN:"loginuser",LOGIN:"login",LOGOUT:"logout",RESET_PASSWORD:"loginresetpassword"};l.module=angular.module("gmfAuthenticationService",[]);l.module.service("gmfAuthenticationService",l);l.module.value("gmfUser",{functionalities:null,is_password_changed:null,role_id:null,role_name:null,username:null});e["a"]=l}).call(this,n(38))},function(t,e,n){"use strict";var i=n(1);var r=n(43);var a=n(27);var o=n(84);var s=n(3);var l=n(11);var u=n(133);var c=n(47);var f=n(80);var h=n(290);var d=function t(e,n,i,a,o,s){f["a"].call(this);this.hitDetectionImage_=null;this.image_=!e?new Image:e;if(a!==null){this.image_.crossOrigin=a}this.canvas_=s?document.createElement("CANVAS"):null;this.color_=s;this.imageListenerKeys_=null;this.imageState_=o;this.size_=i;this.src_=n;this.tainting_=false;if(this.imageState_==r["a"].LOADED){this.determineTainting_()}};Object(i["d"])(d,f["a"]);function p(t,e,n,i,r,a){var o=h["a"].get(e,i,a);if(!o){o=new d(t,e,n,i,r,a);h["a"].set(e,i,a,o)}return o}d.prototype.determineTainting_=function(){var t=Object(c["a"])(1,1);try{t.drawImage(this.image_,0,0);t.getImageData(0,0,1,1)}catch(t){this.tainting_=true}};d.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(l["a"].CHANGE)};d.prototype.handleImageError_=function(){this.imageState_=r["a"].ERROR;this.unlistenImage_();this.dispatchChangeEvent_()};d.prototype.handleImageLoad_=function(){this.imageState_=r["a"].LOADED;if(this.size_){this.image_.width=this.size_[0];this.image_.height=this.size_[1]}this.size_=[this.image_.width,this.image_.height];this.unlistenImage_();this.determineTainting_();this.replaceColor_();this.dispatchChangeEvent_()};d.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_};d.prototype.getImageState=function(){return this.imageState_};d.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_){if(this.tainting_){var e=this.size_[0];var n=this.size_[1];var i=Object(c["a"])(e,n);i.fillRect(0,0,e,n);this.hitDetectionImage_=i.canvas}else{this.hitDetectionImage_=this.image_}}return this.hitDetectionImage_};d.prototype.getSize=function(){return this.size_};d.prototype.getSrc=function(){return this.src_};d.prototype.load=function(){if(this.imageState_==r["a"].IDLE){this.imageState_=r["a"].LOADING;this.imageListenerKeys_=[Object(s["b"])(this.image_,l["a"].ERROR,this.handleImageError_,this),Object(s["b"])(this.image_,l["a"].LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}};d.prototype.replaceColor_=function(){if(this.tainting_||this.color_===null){return}this.canvas_.width=this.image_.width;this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);var e=t.getImageData(0,0,this.image_.width,this.image_.height);var n=e.data;var i=this.color_[0]/255;var r=this.color_[1]/255;var a=this.color_[2]/255;for(var o=0,s=n.length;o<s;o+=4){n[o]*=i;n[o+1]*=r;n[o+2]*=a}t.putImageData(e,0,0)};d.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s["e"]);this.imageListenerKeys_=null};var v=d;var g=n(106);var m=n(275);var _=function t(e){var n=e||{};this.anchor_=n.anchor!==undefined?n.anchor:[.5,.5];this.normalizedAnchor_=null;this.anchorOrigin_=n.anchorOrigin!==undefined?n.anchorOrigin:g["a"].TOP_LEFT;this.anchorXUnits_=n.anchorXUnits!==undefined?n.anchorXUnits:u["a"].FRACTION;this.anchorYUnits_=n.anchorYUnits!==undefined?n.anchorYUnits:u["a"].FRACTION;this.crossOrigin_=n.crossOrigin!==undefined?n.crossOrigin:null;var s=n.img!==undefined?n.img:null;var l=n.imgSize!==undefined?n.imgSize:null;var c=n.src;Object(a["a"])(!(c!==undefined&&s),4);Object(a["a"])(!s||s&&l,5);if((c===undefined||c.length===0)&&s){c=s.src||Object(i["c"])(s).toString()}Object(a["a"])(c!==undefined&&c.length>0,6);var f=n.src!==undefined?r["a"].IDLE:r["a"].LOADED;this.color_=n.color!==undefined?Object(o["a"])(n.color):null;this.iconImage_=p(s,c,l,this.crossOrigin_,f,this.color_);this.offset_=n.offset!==undefined?n.offset:[0,0];this.offsetOrigin_=n.offsetOrigin!==undefined?n.offsetOrigin:g["a"].TOP_LEFT;this.origin_=null;this.size_=n.size!==undefined?n.size:null;var h=n.opacity!==undefined?n.opacity:1;var d=n.rotateWithView!==undefined?n.rotateWithView:false;var v=n.rotation!==undefined?n.rotation:0;var _=n.scale!==undefined?n.scale:1;var y=n.snapToPixel!==undefined?n.snapToPixel:true;m["a"].call(this,{opacity:h,rotation:v,scale:_,snapToPixel:y,rotateWithView:d})};Object(i["d"])(_,m["a"]);_.prototype.clone=function(){return new _({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||undefined,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:this.size_!==null?this.size_.slice():undefined,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})};_.prototype.getAnchor=function(){if(this.normalizedAnchor_){return this.normalizedAnchor_}var t=this.anchor_;var e=this.getSize();if(this.anchorXUnits_==u["a"].FRACTION||this.anchorYUnits_==u["a"].FRACTION){if(!e){return null}t=this.anchor_.slice();if(this.anchorXUnits_==u["a"].FRACTION){t[0]*=e[0]}if(this.anchorYUnits_==u["a"].FRACTION){t[1]*=e[1]}}if(this.anchorOrigin_!=g["a"].TOP_LEFT){if(!e){return null}if(t===this.anchor_){t=this.anchor_.slice()}if(this.anchorOrigin_==g["a"].TOP_RIGHT||this.anchorOrigin_==g["a"].BOTTOM_RIGHT){t[0]=-t[0]+e[0]}if(this.anchorOrigin_==g["a"].BOTTOM_LEFT||this.anchorOrigin_==g["a"].BOTTOM_RIGHT){t[1]=-t[1]+e[1]}}this.normalizedAnchor_=t;return this.normalizedAnchor_};_.prototype.getColor=function(){return this.color_};_.prototype.getImage=function(t){return this.iconImage_.getImage(t)};_.prototype.getImageSize=function(){return this.iconImage_.getSize()};_.prototype.getHitDetectionImageSize=function(){return this.getImageSize()};_.prototype.getImageState=function(){return this.iconImage_.getImageState()};_.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)};_.prototype.getOrigin=function(){if(this.origin_){return this.origin_}var t=this.offset_;if(this.offsetOrigin_!=g["a"].TOP_LEFT){var e=this.getSize();var n=this.iconImage_.getSize();if(!e||!n){return null}t=t.slice();if(this.offsetOrigin_==g["a"].TOP_RIGHT||this.offsetOrigin_==g["a"].BOTTOM_RIGHT){t[0]=n[0]-e[0]-t[0]}if(this.offsetOrigin_==g["a"].BOTTOM_LEFT||this.offsetOrigin_==g["a"].BOTTOM_RIGHT){t[1]=n[1]-e[1]-t[1]}}this.origin_=t;return this.origin_};_.prototype.getSrc=function(){return this.iconImage_.getSrc()};_.prototype.getSize=function(){return!this.size_?this.iconImage_.getSize():this.size_};_.prototype.listenImageChange=function(t,e){return Object(s["a"])(this.iconImage_,l["a"].CHANGE,t,e)};_.prototype.load=function(){this.iconImage_.load()};_.prototype.unlistenImageChange=function(t,e){Object(s["c"])(this.iconImage_,l["a"].CHANGE,t,e)};var y=e["a"]=_},function(t,e,n){"use strict";var i=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees");t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");t.WGS84=t["EPSG:4326"];t["EPSG:3785"]=t["EPSG:3857"];t.GOOGLE=t["EPSG:3857"];t["EPSG:900913"]=t["EPSG:3857"];t["EPSG:102113"]=t["EPSG:3857"]};var r=1;var a=2;var o=4;var s=5;var l=484813681109536e-20;var u=Math.PI/2;var c=.16666666666666666;var f=.04722222222222222;var h=.022156084656084655;var d=1e-10;var p=.017453292519943295;var v=57.29577951308232;var g=Math.PI/4;var m=Math.PI*2;var _=3.14159265359;var y={};y.greenwich=0;y.lisbon=-9.131906111111;y.paris=2.337229166667;y.bogota=-74.080916666667;y.madrid=-3.687938888889;y.rome=12.452333333333;y.bern=7.439583333333;y.jakarta=106.807719444444;y.ferro=-17.666666666667;y.brussels=4.367975;y.stockholm=18.058277777778;y.athens=23.7163375;y.oslo=10.722916666667;var b={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var w=/[\s_\-\/\(\)]/g;function x(t,e){if(t[e]){return t[e]}var n=Object.keys(t);var i=e.toLowerCase().replace(w,"");var r=-1;var a,o;while(++r<n.length){a=n[r];o=a.toLowerCase().replace(w,"");if(o===i){return t[a]}}}var S=function(t){var e={};var n=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var n=e.split("=");n.push(true);t[n[0].toLowerCase()]=n[1];return t},{});var i,r,a;var o={proj:"projName",datum:"datumCode",rf:function(t){e.rf=parseFloat(t)},lat_0:function(t){e.lat0=t*p},lat_1:function(t){e.lat1=t*p},lat_2:function(t){e.lat2=t*p},lat_ts:function(t){e.lat_ts=t*p},lon_0:function(t){e.long0=t*p},lon_1:function(t){e.long1=t*p},lon_2:function(t){e.long2=t*p},alpha:function(t){e.alpha=parseFloat(t)*p},lonc:function(t){e.longc=t*p},x_0:function(t){e.x0=parseFloat(t)},y_0:function(t){e.y0=parseFloat(t)},k_0:function(t){e.k0=parseFloat(t)},k:function(t){e.k0=parseFloat(t)},a:function(t){e.a=parseFloat(t)},b:function(t){e.b=parseFloat(t)},r_a:function(){e.R_A=true},zone:function(t){e.zone=parseInt(t,10)},south:function(){e.utmSouth=true},towgs84:function(t){e.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){e.to_meter=parseFloat(t)},units:function(t){e.units=t;var n=x(b,t);if(n){e.to_meter=n.to_meter}},from_greenwich:function(t){e.from_greenwich=t*p},pm:function(t){var n=x(y,t);e.from_greenwich=(n?n:parseFloat(t))*p},nadgrids:function(t){if(t==="@null"){e.datumCode="none"}else{e.nadgrids=t}},axis:function(t){var n="ewnsud";if(t.length===3&&n.indexOf(t.substr(0,1))!==-1&&n.indexOf(t.substr(1,1))!==-1&&n.indexOf(t.substr(2,1))!==-1){e.axis=t}}};for(i in n){r=n[i];if(i in o){a=o[i];if(typeof a==="function"){a(r)}else{e[a]=r}}else{e[i]=r}}if(typeof e.datumCode==="string"&&e.datumCode!=="WGS84"){e.datumCode=e.datumCode.toLowerCase()}return e};var C=n(320);var E=n.n(C);function O(t){var e=this;if(arguments.length===2){var n=arguments[1];if(typeof n==="string"){if(n.charAt(0)==="+"){O[t]=S(arguments[1])}else{O[t]=E()(arguments[1])}}else{O[t]=n}}else if(arguments.length===1){if(Array.isArray(t)){return t.map(function(t){if(Array.isArray(t)){O.apply(e,t)}else{O(t)}})}else if(typeof t==="string"){if(t in O){return O[t]}}else if("EPSG"in t){O["EPSG:"+t.EPSG]=t}else if("ESRI"in t){O["ESRI:"+t.ESRI]=t}else if("IAU2000"in t){O["IAU2000:"+t.IAU2000]=t}else{console.log(t)}return}}i(O);var T=O;function M(t){return typeof t==="string"}function I(t){return t in T}var R=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function N(t){return R.some(function(e){return t.indexOf(e)>-1})}function A(t){return t[0]==="+"}function L(t){if(M(t)){if(I(t)){return T[t]}if(N(t)){return E()(t)}if(A(t)){return S(t)}}else{return t}}var P=L;var D=function(t,e){t=t||{};var n,i;if(!e){return t}for(i in e){n=e[i];if(n!==undefined){t[i]=n}}return t};var j=function(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)};var k=function(t){return t<0?-1:1};var F=function(t){return Math.abs(t)<=_?t:t-k(t)*m};var $=function(t,e,n){var i=t*n;var r=.5*t;i=Math.pow((1-i)/(1+i),r);return Math.tan(.5*(u-e))/i};var G=function(t,e){var n=.5*t;var i,r;var a=u-2*Math.atan(e);for(var o=0;o<=15;o++){i=t*Math.sin(a);r=u-2*Math.atan(e*Math.pow((1-i)/(1+i),n))-a;a+=r;if(Math.abs(r)<=1e-10){return a}}return-9999};function U(){var t=this.b/this.a;this.es=1-t*t;if(!("x0"in this)){this.x0=0}if(!("y0"in this)){this.y0=0}this.e=Math.sqrt(this.es);if(this.lat_ts){if(this.sphere){this.k0=Math.cos(this.lat_ts)}else{this.k0=j(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))}}else{if(!this.k0){if(this.k){this.k0=this.k}else{this.k0=1}}}}function Y(t){var e=t.x;var n=t.y;if(n*v>90&&n*v<-90&&e*v>180&&e*v<-180){return null}var i,r;if(Math.abs(Math.abs(n)-u)<=d){return null}else{if(this.sphere){i=this.x0+this.a*this.k0*F(e-this.long0);r=this.y0+this.a*this.k0*Math.log(Math.tan(g+.5*n))}else{var a=Math.sin(n);var o=$(this.e,n,a);i=this.x0+this.a*this.k0*F(e-this.long0);r=this.y0-this.a*this.k0*Math.log(o)}t.x=i;t.y=r;return t}}function V(t){var e=t.x-this.x0;var n=t.y-this.y0;var i,r;if(this.sphere){r=u-2*Math.atan(Math.exp(-n/(this.a*this.k0)))}else{var a=Math.exp(-n/(this.a*this.k0));r=G(this.e,a);if(r===-9999){return null}}i=F(this.long0+e/(this.a*this.k0));t.x=i;t.y=r;return t}var H=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];var z={init:U,forward:Y,inverse:V,names:H};function B(){}function W(t){return t}var q=["longlat","identity"];var X={init:B,forward:W,inverse:W,names:q};var K=[z,X];var Z={};var Q=[];function J(t,e){var n=Q.length;if(!t.names){console.log(e);return true}Q[n]=t;t.names.forEach(function(t){Z[t.toLowerCase()]=n});return this}function tt(t){if(!t){return false}var e=t.toLowerCase();if(typeof Z[e]!=="undefined"&&Q[Z[e]]){return Q[Z[e]]}}function et(){K.forEach(J)}var nt={start:et,add:J,get:tt};var it={};it.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};it.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};it.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};it.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};it.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"};it.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};it.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};it.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"};it.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};it.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};it.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};it.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"};it.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};it.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"};it.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."};it.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"};it.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};it.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};it.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"};it.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"};it.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"};it.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"};it.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"};it.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};it.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};it.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};it.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};it.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};it.hough={a:6378270,rf:297,ellipseName:"Hough"};it.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};it.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};it.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};it.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};it.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"};it.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};it.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};it.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"};it.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"};it.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};it.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};it.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var rt=it.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};it.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function at(t,e,n,i){var r=t*t;var a=e*e;var o=(r-a)/r;var s=0;if(i){t*=1-o*(c+o*(f+o*h));r=t*t;o=0}else{s=Math.sqrt(o)}var l=(r-a)/a;return{es:o,e:s,ep2:l}}function ot(t,e,n,i,r){if(!t){var a=x(it,i);if(!a){a=rt}t=a.a;e=a.b;n=a.rf}if(n&&!e){e=(1-1/n)*t}if(n===0||Math.abs(t-e)<d){r=true;e=t}return{a:t,b:e,rf:n,sphere:r}}var st={};st.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};st.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};st.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};st.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};st.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};st.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};st.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};st.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"};st.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};st.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};st.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};st.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};st.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};st.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};st.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};st.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};st.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function lt(t,e,n,i,u,c){var f={};if(t===undefined||t==="none"){f.datum_type=s}else{f.datum_type=o}if(e){f.datum_params=e.map(parseFloat);if(f.datum_params[0]!==0||f.datum_params[1]!==0||f.datum_params[2]!==0){f.datum_type=r}if(f.datum_params.length>3){if(f.datum_params[3]!==0||f.datum_params[4]!==0||f.datum_params[5]!==0||f.datum_params[6]!==0){f.datum_type=a;f.datum_params[3]*=l;f.datum_params[4]*=l;f.datum_params[5]*=l;f.datum_params[6]=f.datum_params[6]/1e6+1}}}f.a=n;f.b=i;f.es=u;f.ep2=c;return f}var ut=lt;function ct(t,e){if(!(this instanceof ct)){return new ct(t)}e=e||function(t){if(t){throw t}};var n=P(t);if(typeof n!=="object"){e(t);return}var i=ct.projections.get(n.projName);if(!i){e(t);return}if(n.datumCode&&n.datumCode!=="none"){var r=x(st,n.datumCode);if(r){n.datum_params=r.towgs84?r.towgs84.split(","):null;n.ellps=r.ellipse;n.datumName=r.datumName?r.datumName:n.datumCode}}n.k0=n.k0||1;n.axis=n.axis||"enu";n.ellps=n.ellps||"wgs84";var a=ot(n.a,n.b,n.rf,n.ellps,n.sphere);var o=at(a.a,a.b,a.rf,n.R_A);var s=n.datum||ut(n.datumCode,n.datum_params,a.a,a.b,o.es,o.ep2);D(this,n);D(this,i);this.a=a.a;this.b=a.b;this.rf=a.rf;this.sphere=a.sphere;this.es=o.es;this.e=o.e;this.ep2=o.ep2;this.datum=s;this.init();e(null,this)}ct.projections=nt;ct.projections.start();var ft=ct;function ht(t,e){if(t.datum_type!==e.datum_type){return false}else if(t.a!==e.a||Math.abs(t.es-e.es)>5e-11){return false}else if(t.datum_type===r){return t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]}else if(t.datum_type===a){return t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]}else{return true}}function dt(t,e,n){var i=t.x;var r=t.y;var a=t.z?t.z:0;var o;var s;var l;var c;if(r<-u&&r>-1.001*u){r=-u}else if(r>u&&r<1.001*u){r=u}else if(r<-u||r>u){return null}if(i>Math.PI){i-=2*Math.PI}s=Math.sin(r);c=Math.cos(r);l=s*s;o=n/Math.sqrt(1-e*l);return{x:(o+a)*c*Math.cos(i),y:(o+a)*c*Math.sin(i),z:(o*(1-e)+a)*s}}function pt(t,e,n,i){var r=1e-12;var a=r*r;var o=30;var s;var l;var c;var f;var h;var d;var p;var v;var g;var m;var _;var y;var b;var w=t.x;var x=t.y;var S=t.z?t.z:0;var C;var E;var O;s=Math.sqrt(w*w+x*x);l=Math.sqrt(w*w+x*x+S*S);if(s/n<r){C=0;if(l/n<r){E=u;O=-i;return{x:t.x,y:t.y,z:t.z}}}else{C=Math.atan2(x,w)}c=S/l;f=s/l;h=1/Math.sqrt(1-e*(2-e)*f*f);v=f*(1-e)*h;g=c*h;b=0;do{b++;p=n/Math.sqrt(1-e*g*g);O=s*v+S*g-p*(1-e*g*g);d=e*p/(p+O);h=1/Math.sqrt(1-d*(2-d)*f*f);m=f*(1-d)*h;_=c*h;y=_*v-m*g;v=m;g=_}while(y*y>a&&b<o);E=Math.atan(_/Math.abs(m));return{x:C,y:E,z:O}}function vt(t,e,n){if(e===r){return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]}}else if(e===a){var i=n[0];var o=n[1];var s=n[2];var l=n[3];var u=n[4];var c=n[5];var f=n[6];return{x:f*(t.x-c*t.y+u*t.z)+i,y:f*(c*t.x+t.y-l*t.z)+o,z:f*(-u*t.x+l*t.y+t.z)+s}}}function gt(t,e,n){if(e===r){return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]}}else if(e===a){var i=n[0];var o=n[1];var s=n[2];var l=n[3];var u=n[4];var c=n[5];var f=n[6];var h=(t.x-i)/f;var d=(t.y-o)/f;var p=(t.z-s)/f;return{x:h+c*d-u*p,y:-c*h+d+l*p,z:u*h-l*d+p}}}function mt(t){return t===r||t===a}var _t=function(t,e,n){if(ht(t,e)){return n}if(t.datum_type===s||e.datum_type===s){return n}if(t.es===e.es&&t.a===e.a&&!mt(t.datum_type)&&!mt(e.datum_type)){return n}n=dt(n,t.es,t.a);if(mt(t.datum_type)){n=vt(n,t.datum_type,t.datum_params)}if(mt(e.datum_type)){n=gt(n,e.datum_type,e.datum_params)}return pt(n,e.es,e.a,e.b)};var yt=function(t,e,n){var i=n.x,r=n.y,a=n.z||0;var o,s,l;var u={};for(l=0;l<3;l++){if(e&&l===2&&n.z===undefined){continue}if(l===0){o=i;s="x"}else if(l===1){o=r;s="y"}else{o=a;s="z"}switch(t.axis[l]){case"e":u[s]=o;break;case"w":u[s]=-o;break;case"n":u[s]=o;break;case"s":u[s]=-o;break;case"u":if(n[s]!==undefined){u.z=o}break;case"d":if(n[s]!==undefined){u.z=-o}break;default:return null}}return u};var bt=function(t){var e={x:t[0],y:t[1]};if(t.length>2){e.z=t[2]}if(t.length>3){e.m=t[3]}return e};var wt=function(t){xt(t.x);xt(t.y)};function xt(t){if(typeof Number.isFinite==="function"){if(Number.isFinite(t)){return}throw new TypeError("coordinates must be finite numbers")}if(typeof t!=="number"||t!==t||!isFinite(t)){throw new TypeError("coordinates must be finite numbers")}}function St(t,e){return(t.datum.datum_type===r||t.datum.datum_type===a)&&e.datumCode!=="WGS84"||(e.datum.datum_type===r||e.datum.datum_type===a)&&t.datumCode!=="WGS84"}function Ct(t,e,n){var i;if(Array.isArray(n)){n=bt(n)}wt(n);if(t.datum&&e.datum&&St(t,e)){i=new ft("WGS84");n=Ct(t,i,n);t=i}if(t.axis!=="enu"){n=yt(t,false,n)}if(t.projName==="longlat"){n={x:n.x*p,y:n.y*p}}else{if(t.to_meter){n={x:n.x*t.to_meter,y:n.y*t.to_meter}}n=t.inverse(n)}if(t.from_greenwich){n.x+=t.from_greenwich}n=_t(t.datum,e.datum,n);if(e.from_greenwich){n={x:n.x-e.from_greenwich,y:n.y}}if(e.projName==="longlat"){n={x:n.x*v,y:n.y*v}}else{n=e.forward(n);if(e.to_meter){n={x:n.x/e.to_meter,y:n.y/e.to_meter}}}if(e.axis!=="enu"){return yt(e,true,n)}return n}var Et=ft("WGS84");function Ot(t,e,n){var i,r,a;if(Array.isArray(n)){i=Ct(t,e,n);if(n.length===3){return[i.x,i.y,i.z]}else{return[i.x,i.y]}}else{r=Ct(t,e,n);a=Object.keys(n);if(a.length===2){return r}a.forEach(function(t){if(t==="x"||t==="y"){return}r[t]=n[t]});return r}}function Tt(t){if(t instanceof ft){return t}if(t.oProj){return t.oProj}return ft(t)}function Mt(t,e,n){t=Tt(t);var i=false;var r;if(typeof e==="undefined"){e=t;t=Et;i=true}else if(typeof e.x!=="undefined"||Array.isArray(e)){n=e;e=t;t=Et;i=true}e=Tt(e);if(n){return Ot(t,e,n)}else{r={forward:function(n){return Ot(t,e,n)},inverse:function(n){return Ot(e,t,n)}};if(i){r.oProj=e}return r}}var It=Mt;var Rt=n(282);var Nt=n.n(Rt);function At(t,e,n){if(!(this instanceof At)){return new At(t,e,n)}if(Array.isArray(t)){this.x=t[0];this.y=t[1];this.z=t[2]||0}else if(typeof t==="object"){this.x=t.x;this.y=t.y;this.z=t.z||0}else if(typeof t==="string"&&typeof e==="undefined"){var i=t.split(",");this.x=parseFloat(i[0],10);this.y=parseFloat(i[1],10);this.z=parseFloat(i[2],10)||0}else{this.x=t;this.y=e;this.z=n||0}console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}At.fromMGRS=function(t){return new At(Object(Rt["toPoint"])(t))};At.prototype.toMGRS=function(t){return Object(Rt["forward"])([this.x,this.y],t)};var Lt=At;var Pt=n(376);var Dt=1;var jt=.25;var kt=.046875;var Ft=.01953125;var $t=.01068115234375;var Gt=.75;var Ut=.46875;var Yt=.013020833333333334;var Vt=.007120768229166667;var Ht=.3645833333333333;var zt=.005696614583333333;var Bt=.3076171875;var Wt=function(t){var e=[];e[0]=Dt-t*(jt+t*(kt+t*(Ft+t*$t)));e[1]=t*(Gt-t*(kt+t*(Ft+t*$t)));var n=t*t;e[2]=n*(Ut-t*(Yt+t*Vt));n*=t;e[3]=n*(Ht-t*zt);e[4]=n*t*Bt;return e};var qt=function(t,e,n,i){n*=e;e*=e;return i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))};var Xt=20;var Kt=function(t,e,n){var i=1/(1-e);var r=t;for(var a=Xt;a;--a){var o=Math.sin(r);var s=1-e*o*o;s=(qt(r,o,Math.cos(r),n)-t)*(s*Math.sqrt(s))*i;r-=s;if(Math.abs(s)<d){return r}}return r};function Zt(){this.x0=this.x0!==undefined?this.x0:0;this.y0=this.y0!==undefined?this.y0:0;this.long0=this.long0!==undefined?this.long0:0;this.lat0=this.lat0!==undefined?this.lat0:0;if(this.es){this.en=Wt(this.es);this.ml0=qt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en)}}function Qt(t){var e=t.x;var n=t.y;var i=F(e-this.long0);var r;var a,o;var s=Math.sin(n);var l=Math.cos(n);if(!this.es){var u=l*Math.sin(i);if(Math.abs(Math.abs(u)-1)<d){return 93}else{a=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0;o=l*Math.cos(i)/Math.sqrt(1-Math.pow(u,2));u=Math.abs(o);if(u>=1){if(u-1>d){return 93}else{o=0}}else{o=Math.acos(o)}if(n<0){o=-o}o=this.a*this.k0*(o-this.lat0)+this.y0}}else{var c=l*i;var f=Math.pow(c,2);var h=this.ep2*Math.pow(l,2);var p=Math.pow(h,2);var v=Math.abs(l)>d?Math.tan(n):0;var g=Math.pow(v,2);var m=Math.pow(g,2);r=1-this.es*Math.pow(s,2);c=c/Math.sqrt(r);var _=qt(n,s,l,this.en);a=this.a*(this.k0*c*(1+f/6*(1-g+h+f/20*(5-18*g+m+14*h-58*g*h+f/42*(61+179*m-m*g-479*g)))))+this.x0;o=this.a*(this.k0*(_-this.ml0+s*i*c/2*(1+f/12*(5-g+9*h+4*p+f/30*(61+m-58*g+270*h-330*g*h+f/56*(1385+543*m-m*g-3111*g))))))+this.y0}t.x=a;t.y=o;return t}function Jt(t){var e,n;var i,r;var a=(t.x-this.x0)*(1/this.a);var o=(t.y-this.y0)*(1/this.a);if(!this.es){var s=Math.exp(a/this.k0);var l=.5*(s-1/s);var c=this.lat0+o/this.k0;var f=Math.cos(c);e=Math.sqrt((1-Math.pow(f,2))/(1+Math.pow(l,2)));i=Math.asin(e);if(o<0){i=-i}if(l===0&&f===0){r=0}else{r=F(Math.atan2(l,f)+this.long0)}}else{e=this.ml0+o/this.k0;n=Kt(e,this.es,this.en);if(Math.abs(n)<u){var h=Math.sin(n);var p=Math.cos(n);var v=Math.abs(p)>d?Math.tan(n):0;var g=this.ep2*Math.pow(p,2);var m=Math.pow(g,2);var _=Math.pow(v,2);var y=Math.pow(_,2);e=1-this.es*Math.pow(h,2);var b=a*Math.sqrt(e)/this.k0;var w=Math.pow(b,2);e=e*v;i=n-e*w/(1-this.es)*.5*(1-w/12*(5+3*_-9*g*_+g-4*m-w/30*(61+90*_-252*g*_+45*y+46*g-w/56*(1385+3633*_+4095*y+1574*y*_))));r=F(this.long0+b*(1-w/6*(1+2*_+g-w/20*(5+28*_+24*y+8*g*_+6*g-w/42*(61+662*_+1320*y+720*y*_))))/p)}else{i=u*k(o);r=0}}t.x=r;t.y=i;return t}var te=["Transverse_Mercator","Transverse Mercator","tmerc"];var ee={init:Zt,forward:Qt,inverse:Jt,names:te};var ne=function(t){var e=Math.exp(t);e=(e-1/e)/2;return e};var ie=function(t,e){t=Math.abs(t);e=Math.abs(e);var n=Math.max(t,e);var i=Math.min(t,e)/(n?n:1);return n*Math.sqrt(1+Math.pow(i,2))};var re=function(t){var e=1+t;var n=e-1;return n===0?t:t*Math.log(e)/n};var ae=function(t){var e=Math.abs(t);e=re(e*(1+e/(ie(1,e)+1)));return t<0?-e:e};var oe=function(t,e){var n=2*Math.cos(2*e);var i=t.length-1;var r=t[i];var a=0;var o;while(--i>=0){o=-a+n*r+t[i];a=r;r=o}return e+o*Math.sin(2*e)};var se=function(t,e){var n=2*Math.cos(e);var i=t.length-1;var r=t[i];var a=0;var o;while(--i>=0){o=-a+n*r+t[i];a=r;r=o}return Math.sin(e)*o};var le=function(t){var e=Math.exp(t);e=(e+1/e)/2;return e};var ue=function(t,e,n){var i=Math.sin(e);var r=Math.cos(e);var a=ne(n);var o=le(n);var s=2*r*o;var l=-2*i*a;var u=t.length-1;var c=t[u];var f=0;var h=0;var d=0;var p;var v;while(--u>=0){p=h;v=f;h=c;f=d;c=-p+s*h-l*f+t[u];d=-v+l*h+s*f}s=i*o;l=r*a;return[s*c-l*d,s*d+l*c]};function ce(){if(this.es===undefined||this.es<=0){throw new Error("incorrect elliptical usage")}this.x0=this.x0!==undefined?this.x0:0;this.y0=this.y0!==undefined?this.y0:0;this.long0=this.long0!==undefined?this.long0:0;this.lat0=this.lat0!==undefined?this.lat0:0;this.cgb=[];this.cbg=[];this.utg=[];this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es));var e=t/(2-t);var n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675))))));this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725))))));n=n*e;this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945)))));this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945)))));n=n*e;this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835))));this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835))));n=n*e;this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175)));this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175)));n=n*e;this.cgb[4]=n*(4174/315+e*(-144838/6237));this.cbg[4]=n*(-734/315+e*(109598/31185));n=n*e;this.cgb[5]=n*(601676/22275);this.cbg[5]=n*(444337/155925);n=Math.pow(e,2);this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256)));this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800))))));this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800))))));this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720)))));this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360)))));n=n*e;this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720))));this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440))));n=n*e;this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600)));this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600)));n=n*e;this.utg[4]=n*(-4583/161280+e*(108847/3991680));this.gtu[4]=n*(34729/80640+e*(-3418889/1995840));n=n*e;this.utg[5]=n*(-20648693/638668800);this.gtu[5]=n*(212378941/319334400);var i=oe(this.cbg,this.lat0);this.Zb=-this.Qn*(i+se(this.gtu,2*i))}function fe(t){var e=F(t.x-this.long0);var n=t.y;n=oe(this.cbg,n);var i=Math.sin(n);var r=Math.cos(n);var a=Math.sin(e);var o=Math.cos(e);n=Math.atan2(i,o*r);e=Math.atan2(a*r,ie(i,r*o));e=ae(Math.tan(e));var s=ue(this.gtu,2*n,2*e);n=n+s[0];e=e+s[1];var l;var u;if(Math.abs(e)<=2.623395162778){l=this.a*(this.Qn*e)+this.x0;u=this.a*(this.Qn*n+this.Zb)+this.y0}else{l=Infinity;u=Infinity}t.x=l;t.y=u;return t}function he(t){var e=(t.x-this.x0)*(1/this.a);var n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn;e=e/this.Qn;var i;var r;if(Math.abs(e)<=2.623395162778){var a=ue(this.utg,2*n,2*e);n=n+a[0];e=e+a[1];e=Math.atan(ne(e));var o=Math.sin(n);var s=Math.cos(n);var l=Math.sin(e);var u=Math.cos(e);n=Math.atan2(o*u,ie(l,u*s));e=Math.atan2(l,u*s);i=F(e+this.long0);r=oe(this.cgb,n)}else{i=Infinity;r=Infinity}t.x=i;t.y=r;return t}var de=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"];var pe={init:ce,forward:fe,inverse:he,names:de};var ve=function(t,e){if(t===undefined){t=Math.floor((F(e)+Math.PI)*30/Math.PI)+1;if(t<0){return 0}else if(t>60){return 60}}return t};var ge="etmerc";function me(){var t=ve(this.zone,this.long0);if(t===undefined){throw new Error("unknown utm zone")}this.lat0=0;this.long0=(6*Math.abs(t)-183)*p;this.x0=5e5;this.y0=this.utmSouth?1e7:0;this.k0=.9996;pe.init.apply(this);this.forward=pe.forward;this.inverse=pe.inverse}var _e=["Universal Transverse Mercator System","utm"];var ye={init:me,names:_e,dependsOn:ge};var be=function(t,e){return Math.pow((1-t)/(1+t),e)};var we=20;function xe(){var t=Math.sin(this.lat0);var e=Math.cos(this.lat0);e*=e;this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t);this.C=Math.sqrt(1+this.es*e*e/(1-this.es));this.phic0=Math.asin(t/this.C);this.ratexp=.5*this.C*this.e;this.K=Math.tan(.5*this.phic0+g)/(Math.pow(Math.tan(.5*this.lat0+g),this.C)*be(this.e*t,this.ratexp))}function Se(t){var e=t.x;var n=t.y;t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+g),this.C)*be(this.e*Math.sin(n),this.ratexp))-u;t.x=this.C*e;return t}function Ce(t){var e=1e-14;var n=t.x/this.C;var i=t.y;var r=Math.pow(Math.tan(.5*i+g)/this.K,1/this.C);for(var a=we;a>0;--a){i=2*Math.atan(r*be(this.e*Math.sin(t.y),-.5*this.e))-u;if(Math.abs(i-t.y)<e){break}t.y=i}if(!a){return null}t.x=n;t.y=i;return t}var Ee=["gauss"];var Oe={init:xe,forward:Se,inverse:Ce,names:Ee};function Te(){Oe.init.apply(this);if(!this.rc){return}this.sinc0=Math.sin(this.phic0);this.cosc0=Math.cos(this.phic0);this.R2=2*this.rc;if(!this.title){this.title="Oblique Stereographic Alternative"}}function Me(t){var e,n,i,r;t.x=F(t.x-this.long0);Oe.forward.apply(this,[t]);e=Math.sin(t.y);n=Math.cos(t.y);i=Math.cos(t.x);r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*i);t.x=r*n*Math.sin(t.x);t.y=r*(this.cosc0*e-this.sinc0*n*i);t.x=this.a*t.x+this.x0;t.y=this.a*t.y+this.y0;return t}function Ie(t){var e,n,i,r,a;t.x=(t.x-this.x0)/this.a;t.y=(t.y-this.y0)/this.a;t.x/=this.k0;t.y/=this.k0;if(a=Math.sqrt(t.x*t.x+t.y*t.y)){var o=2*Math.atan2(a,this.R2);e=Math.sin(o);n=Math.cos(o);r=Math.asin(n*this.sinc0+t.y*e*this.cosc0/a);i=Math.atan2(t.x*e,a*this.cosc0*n-t.y*this.sinc0*e)}else{r=this.phic0;i=0}t.x=i;t.y=r;Oe.inverse.apply(this,[t]);t.x=F(t.x+this.long0);return t}var Re=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"];var Ne={init:Te,forward:Me,inverse:Ie,names:Re};function Ae(t,e,n){e*=n;return Math.tan(.5*(u+t))*Math.pow((1-e)/(1+e),.5*n)}function Le(){this.coslat0=Math.cos(this.lat0);this.sinlat0=Math.sin(this.lat0);if(this.sphere){if(this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=d){this.k0=.5*(1+k(this.lat0)*Math.sin(this.lat_ts))}}else{if(Math.abs(this.coslat0)<=d){if(this.lat0>0){this.con=1}else{this.con=-1}}this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e));if(this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=d){this.k0=.5*this.cons*j(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/$(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))}this.ms1=j(this.e,this.sinlat0,this.coslat0);this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-u;this.cosX0=Math.cos(this.X0);this.sinX0=Math.sin(this.X0)}}function Pe(t){var e=t.x;var n=t.y;var i=Math.sin(n);var r=Math.cos(n);var a,o,s,l,c,f;var h=F(e-this.long0);if(Math.abs(Math.abs(e-this.long0)-Math.PI)<=d&&Math.abs(n+this.lat0)<=d){t.x=NaN;t.y=NaN;return t}if(this.sphere){a=2*this.k0/(1+this.sinlat0*i+this.coslat0*r*Math.cos(h));t.x=this.a*a*r*Math.sin(h)+this.x0;t.y=this.a*a*(this.coslat0*i-this.sinlat0*r*Math.cos(h))+this.y0;return t}else{o=2*Math.atan(this.ssfn_(n,i,this.e))-u;l=Math.cos(o);s=Math.sin(o);if(Math.abs(this.coslat0)<=d){c=$(this.e,n*this.con,this.con*i);f=2*this.a*this.k0*c/this.cons;t.x=this.x0+f*Math.sin(e-this.long0);t.y=this.y0-this.con*f*Math.cos(e-this.long0);return t}else if(Math.abs(this.sinlat0)<d){a=2*this.a*this.k0/(1+l*Math.cos(h));t.y=a*s}else{a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*l*Math.cos(h)));t.y=a*(this.cosX0*s-this.sinX0*l*Math.cos(h))+this.y0}t.x=a*l*Math.sin(h)+this.x0}return t}function De(t){t.x-=this.x0;t.y-=this.y0;var e,n,i,r,a;var o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(o/(.5*this.a*this.k0));e=this.long0;n=this.lat0;if(o<=d){t.x=e;t.y=n;return t}n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/o);if(Math.abs(this.coslat0)<d){if(this.lat0>0){e=F(this.long0+Math.atan2(t.x,-1*t.y))}else{e=F(this.long0+Math.atan2(t.x,t.y))}}else{e=F(this.long0+Math.atan2(t.x*Math.sin(s),o*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s)))}t.x=e;t.y=n;return t}else{if(Math.abs(this.coslat0)<=d){if(o<=d){n=this.lat0;e=this.long0;t.x=e;t.y=n;return t}t.x*=this.con;t.y*=this.con;i=o*this.cons/(2*this.a*this.k0);n=this.con*G(this.e,i);e=this.con*F(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else{r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1));e=this.long0;if(o<=d){a=this.X0}else{a=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/o);e=F(this.long0+Math.atan2(t.x*Math.sin(r),o*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))}n=-1*G(this.e,Math.tan(.5*(u+a)))}}t.x=e;t.y=n;return t}var je=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];var ke={init:Le,forward:Pe,inverse:De,names:je,ssfn_:Ae};var Fe=n(319);function $e(){this.no_off=this.no_off||false;this.no_rot=this.no_rot||false;if(isNaN(this.k0)){this.k0=1}var t=Math.sin(this.lat0);var e=Math.cos(this.lat0);var n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4));this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var i=$(this.e,this.lat0,t);var r=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(r*r<1){r=1}var a;var o;if(!isNaN(this.longc)){if(this.lat0>=0){a=r+Math.sqrt(r*r-1)}else{a=r-Math.sqrt(r*r-1)}this.el=a*Math.pow(i,this.bl);o=.5*(a-1/a);this.gamma0=Math.asin(Math.sin(this.alpha)/r);this.long0=this.longc-Math.asin(o*Math.tan(this.gamma0))/this.bl}else{var s=$(this.e,this.lat1,Math.sin(this.lat1));var l=$(this.e,this.lat2,Math.sin(this.lat2));if(this.lat0>=0){this.el=(r+Math.sqrt(r*r-1))*Math.pow(i,this.bl)}else{this.el=(r-Math.sqrt(r*r-1))*Math.pow(i,this.bl)}var u=Math.pow(s,this.bl);var c=Math.pow(l,this.bl);a=this.el/u;o=.5*(a-1/a);var f=(this.el*this.el-c*u)/(this.el*this.el+c*u);var h=(c-u)/(c+u);var d=F(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(f*Math.tan(.5*this.bl*d)/h)/this.bl;this.long0=F(this.long0);var p=F(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/o);this.alpha=Math.asin(r*Math.sin(this.gamma0))}if(this.no_off){this.uc=0}else{if(this.lat0>=0){this.uc=this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha))}else{this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha))}}}function Ge(t){var e=t.x;var n=t.y;var i=F(e-this.long0);var r,a;var o;if(Math.abs(Math.abs(n)-u)<=d){if(n>0){o=-1}else{o=1}a=this.al/this.bl*Math.log(Math.tan(g+o*this.gamma0*.5));r=-1*o*u*this.al/this.bl}else{var s=$(this.e,n,Math.sin(n));var l=this.el/Math.pow(s,this.bl);var c=.5*(l-1/l);var f=.5*(l+1/l);var h=Math.sin(this.bl*i);var p=(c*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/f;if(Math.abs(Math.abs(p)-1)<=d){a=Number.POSITIVE_INFINITY}else{a=.5*this.al*Math.log((1-p)/(1+p))/this.bl}if(Math.abs(Math.cos(this.bl*i))<=d){r=this.al*this.bl*i}else{r=this.al*Math.atan2(c*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*i))/this.bl}}if(this.no_rot){t.x=this.x0+r;t.y=this.y0+a}else{r-=this.uc;t.x=this.x0+a*Math.cos(this.alpha)+r*Math.sin(this.alpha);t.y=this.y0+r*Math.cos(this.alpha)-a*Math.sin(this.alpha)}return t}function Ue(t){var e,n;if(this.no_rot){n=t.y-this.y0;e=t.x-this.x0}else{n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha);e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha);e+=this.uc}var i=Math.exp(-1*this.bl*n/this.al);var r=.5*(i-1/i);var a=.5*(i+1/i);var o=Math.sin(this.bl*e/this.al);var s=(o*Math.cos(this.gamma0)+r*Math.sin(this.gamma0))/a;var l=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);if(Math.abs(s-1)<d){t.x=this.long0;t.y=u}else if(Math.abs(s+1)<d){t.x=this.long0;t.y=-1*u}else{t.y=G(this.e,l);t.x=F(this.long0-Math.atan2(r*Math.cos(this.gamma0)-o*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)}return t}var Ye=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"];var Ve={init:$e,forward:Ge,inverse:Ue,names:Ye};function He(){if(!this.lat2){this.lat2=this.lat1}if(!this.k0){this.k0=1}this.x0=this.x0||0;this.y0=this.y0||0;if(Math.abs(this.lat1+this.lat2)<d){return}var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1);var n=Math.cos(this.lat1);var i=j(this.e,e,n);var r=$(this.e,this.lat1,e);var a=Math.sin(this.lat2);var o=Math.cos(this.lat2);var s=j(this.e,a,o);var l=$(this.e,this.lat2,a);var u=$(this.e,this.lat0,Math.sin(this.lat0));if(Math.abs(this.lat1-this.lat2)>d){this.ns=Math.log(i/s)/Math.log(r/l)}else{this.ns=e}if(isNaN(this.ns)){this.ns=e}this.f0=i/(this.ns*Math.pow(r,this.ns));this.rh=this.a*this.f0*Math.pow(u,this.ns);if(!this.title){this.title="Lambert Conformal Conic"}}function ze(t){var e=t.x;var n=t.y;if(Math.abs(2*Math.abs(n)-Math.PI)<=d){n=k(n)*(u-2*d)}var i=Math.abs(Math.abs(n)-u);var r,a;if(i>d){r=$(this.e,n,Math.sin(n));a=this.a*this.f0*Math.pow(r,this.ns)}else{i=n*this.ns;if(i<=0){return null}a=0}var o=this.ns*F(e-this.long0);t.x=this.k0*(a*Math.sin(o))+this.x0;t.y=this.k0*(this.rh-a*Math.cos(o))+this.y0;return t}function Be(t){var e,n,i;var r,a;var o=(t.x-this.x0)/this.k0;var s=this.rh-(t.y-this.y0)/this.k0;if(this.ns>0){e=Math.sqrt(o*o+s*s);n=1}else{e=-Math.sqrt(o*o+s*s);n=-1}var l=0;if(e!==0){l=Math.atan2(n*o,n*s)}if(e!==0||this.ns>0){n=1/this.ns;i=Math.pow(e/(this.a*this.f0),n);r=G(this.e,i);if(r===-9999){return null}}else{r=-u}a=F(l/this.ns+this.long0);t.x=a;t.y=r;return t}var We=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"];var qe={init:He,forward:ze,inverse:Be,names:We};function Xe(){this.a=6377397.155;this.es=.006674372230614;this.e=Math.sqrt(this.es);if(!this.lat0){this.lat0=.863937979737193}if(!this.long0){this.long0=.7417649320975901-.308341501185665}if(!this.k0){this.k0=.9999}this.s45=.785398163397448;this.s90=2*this.s45;this.fi0=this.lat0;this.e2=this.es;this.e=Math.sqrt(this.e2);this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2));this.uq=1.04216856380474;this.u0=Math.asin(Math.sin(this.fi0)/this.alfa);this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2);this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g;this.k1=this.k0;this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2));this.s0=1.37008346281555;this.n=Math.sin(this.s0);this.ro0=this.k1*this.n0/Math.tan(this.s0);this.ad=this.s90-this.uq}function Ke(t){var e,n,i,r,a,o,s;var l=t.x;var u=t.y;var c=F(l-this.long0);e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2);n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45);i=-c*this.alfa;r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i));a=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r));o=this.n*a;s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n);t.y=s*Math.cos(o)/1;t.x=s*Math.sin(o)/1;if(!this.czech){t.y*=-1;t.x*=-1}return t}function Ze(t){var e,n,i,r,a,o,s;var l;var u=t.x;t.x=t.y;t.y=u;if(!this.czech){t.y*=-1;t.x*=-1}o=Math.sqrt(t.x*t.x+t.y*t.y);a=Math.atan2(t.y,t.x);r=a/Math.sin(this.s0);i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45);e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r));n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e));t.x=this.long0-n/this.alfa;s=e;l=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45);if(Math.abs(s-t.y)<1e-10){l=1}s=t.y;c+=1}while(l===0&&c<15);if(c>=15){return null}return t}var Qe=["Krovak","krovak"];var Je={init:Xe,forward:Ke,inverse:Ze,names:Qe};var tn=function(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)};var en=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))};var nn=function(t){return.375*t*(1+.25*t*(1+.46875*t))};var rn=function(t){return.05859375*t*t*(1+.75*t)};var an=function(t){return t*t*t*(35/3072)};var on=function(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)};var sn=function(t){return Math.abs(t)<u?t:t-k(t)*Math.PI};var ln=function(t,e,n,i,r){var a;var o;a=t/e;for(var s=0;s<15;s++){o=(t-(e*a-n*Math.sin(2*a)+i*Math.sin(4*a)-r*Math.sin(6*a)))/(e-2*n*Math.cos(2*a)+4*i*Math.cos(4*a)-6*r*Math.cos(6*a));a+=o;if(Math.abs(o)<=1e-10){return a}}return NaN};function un(){if(!this.sphere){this.e0=en(this.es);this.e1=nn(this.es);this.e2=rn(this.es);this.e3=an(this.es);this.ml0=this.a*tn(this.e0,this.e1,this.e2,this.e3,this.lat0)}}function cn(t){var e,n;var i=t.x;var r=t.y;i=F(i-this.long0);if(this.sphere){e=this.a*Math.asin(Math.cos(r)*Math.sin(i));n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0)}else{var a=Math.sin(r);var o=Math.cos(r);var s=on(this.a,this.e,a);var l=Math.tan(r)*Math.tan(r);var u=i*Math.cos(r);var c=u*u;var f=this.es*o*o/(1-this.es);var h=this.a*tn(this.e0,this.e1,this.e2,this.e3,r);e=s*u*(1-c*l*(1/6-(8-l+8*f)*c/120));n=h-this.ml0+s*a/o*c*(.5+(5-l+6*f)*c/24)}t.x=e+this.x0;t.y=n+this.y0;return t}function fn(t){t.x-=this.x0;t.y-=this.y0;var e=t.x/this.a;var n=t.y/this.a;var i,r;if(this.sphere){var a=n+this.lat0;i=Math.asin(Math.sin(a)*Math.cos(e));r=Math.atan2(Math.tan(e),Math.cos(a))}else{var o=this.ml0/this.a+n;var s=ln(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-u)<=d){t.x=this.long0;t.y=u;if(n<0){t.y*=-1}return t}var l=on(this.a,this.e,Math.sin(s));var c=l*l*l/this.a/this.a*(1-this.es);var f=Math.pow(Math.tan(s),2);var h=e*this.a/l;var p=h*h;i=s-l*Math.tan(s)/c*h*h*(.5-(1+3*f)*h*h/24);r=h*(1-p*(f/3+(1+3*f)*f*p/15))/Math.cos(s)}t.x=F(r+this.long0);t.y=sn(i);return t}var hn=["Cassini","Cassini_Soldner","cass"];var dn={init:un,forward:cn,inverse:fn,names:hn};var pn=function(t,e){var n;if(t>1e-7){n=t*e;return(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))}else{return 2*e}};var vn=1;var gn=2;var mn=3;var _n=4;function yn(){var t=Math.abs(this.lat0);if(Math.abs(t-u)<d){this.mode=this.lat0<0?this.S_POLE:this.N_POLE}else if(Math.abs(t)<d){this.mode=this.EQUIT}else{this.mode=this.OBLIQ}if(this.es>0){var e;this.qp=pn(this.e,1);this.mmf=.5/(1-this.es);this.apa=Mn(this.es);switch(this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp);this.dd=1/this.rq;this.xmf=1;this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp);e=Math.sin(this.lat0);this.sinb1=pn(this.e,e)/this.qp;this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1);this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1);this.ymf=(this.xmf=this.rq)/this.dd;this.xmf*=this.dd;break}}else{if(this.mode===this.OBLIQ){this.sinph0=Math.sin(this.lat0);this.cosph0=Math.cos(this.lat0)}}}function bn(t){var e,n,i,r,a,o,s,l,c,f;var h=t.x;var p=t.y;h=F(h-this.long0);if(this.sphere){a=Math.sin(p);f=Math.cos(p);i=Math.cos(h);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){n=this.mode===this.EQUIT?1+f*i:1+this.sinph0*a+this.cosph0*f*i;if(n<=d){return null}n=Math.sqrt(2/n);e=n*f*Math.sin(h);n*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*f*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE){i=-i}if(Math.abs(p+this.phi0)<d){return null}n=g-p*.5;n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n));e=n*Math.sin(h);n*=i}}else{s=0;l=0;c=0;i=Math.cos(h);r=Math.sin(h);a=Math.sin(p);o=pn(this.e,a);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){s=o/this.qp;l=Math.sqrt(1-s*s)}switch(this.mode){case this.OBLIQ:c=1+this.sinb1*s+this.cosb1*l*i;break;case this.EQUIT:c=1+l*i;break;case this.N_POLE:c=u+p;o=this.qp-o;break;case this.S_POLE:c=p-u;o=this.qp+o;break}if(Math.abs(c)<d){return null}switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c);if(this.mode===this.OBLIQ){n=this.ymf*c*(this.cosb1*s-this.sinb1*l*i)}else{n=(c=Math.sqrt(2/(1+l*i)))*s*this.ymf}e=this.xmf*c*l*r;break;case this.N_POLE:case this.S_POLE:if(o>=0){e=(c=Math.sqrt(o))*r;n=i*(this.mode===this.S_POLE?c:-c)}else{e=n=0}break}}t.x=this.a*e+this.x0;t.y=this.a*n+this.y0;return t}function wn(t){t.x-=this.x0;t.y-=this.y0;var e=t.x/this.a;var n=t.y/this.a;var i,r,a,o,s,l,c;if(this.sphere){var f=0,h,p=0;h=Math.sqrt(e*e+n*n);r=h*.5;if(r>1){return null}r=2*Math.asin(r);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){p=Math.sin(r);f=Math.cos(r)}switch(this.mode){case this.EQUIT:r=Math.abs(h)<=d?0:Math.asin(n*p/h);e*=p;n=f*h;break;case this.OBLIQ:r=Math.abs(h)<=d?this.phi0:Math.asin(f*this.sinph0+n*p*this.cosph0/h);e*=p*this.cosph0;n=(f-Math.sin(r)*this.sinph0)*h;break;case this.N_POLE:n=-n;r=u-r;break;case this.S_POLE:r-=u;break}i=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{c=0;if(this.mode===this.OBLIQ||this.mode===this.EQUIT){e/=this.dd;n*=this.dd;l=Math.sqrt(e*e+n*n);if(l<d){t.x=0;t.y=this.phi0;return t}o=2*Math.asin(.5*l/this.rq);a=Math.cos(o);e*=o=Math.sin(o);if(this.mode===this.OBLIQ){c=a*this.sinb1+n*o*this.cosb1/l;s=this.qp*c;n=l*this.cosb1*a-n*this.sinb1*o}else{c=n*o/l;s=this.qp*c;n=l*a}}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE){n=-n}s=e*e+n*n;if(!s){t.x=0;t.y=this.phi0;return t}c=1-s/this.qp;if(this.mode===this.S_POLE){c=-c}}i=Math.atan2(e,n);r=In(Math.asin(c),this.apa)}t.x=F(this.long0+i);t.y=r;return t}var xn=.3333333333333333;var Sn=.17222222222222222;var Cn=.10257936507936508;var En=.06388888888888888;var On=.0664021164021164;var Tn=.016415012942191543;function Mn(t){var e;var n=[];n[0]=t*xn;e=t*t;n[0]+=e*Sn;n[1]=e*En;e*=t;n[0]+=e*Cn;n[1]+=e*On;n[2]=e*Tn;return n}function In(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var Rn=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];var Nn={init:yn,forward:bn,inverse:wn,names:Rn,S_POLE:vn,N_POLE:gn,EQUIT:mn,OBLIQ:_n};var An=function(t){if(Math.abs(t)>1){t=t>1?1:-1}return Math.asin(t)};function Ln(){if(Math.abs(this.lat1+this.lat2)<d){return}this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e3=Math.sqrt(this.es);this.sin_po=Math.sin(this.lat1);this.cos_po=Math.cos(this.lat1);this.t1=this.sin_po;this.con=this.sin_po;this.ms1=j(this.e3,this.sin_po,this.cos_po);this.qs1=pn(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat2);this.cos_po=Math.cos(this.lat2);this.t2=this.sin_po;this.ms2=j(this.e3,this.sin_po,this.cos_po);this.qs2=pn(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat0);this.cos_po=Math.cos(this.lat0);this.t3=this.sin_po;this.qs0=pn(this.e3,this.sin_po,this.cos_po);if(Math.abs(this.lat1-this.lat2)>d){this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1)}else{this.ns0=this.con}this.c=this.ms1*this.ms1+this.ns0*this.qs1;this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0}function Pn(t){var e=t.x;var n=t.y;this.sin_phi=Math.sin(n);this.cos_phi=Math.cos(n);var i=pn(this.e3,this.sin_phi,this.cos_phi);var r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0;var a=this.ns0*F(e-this.long0);var o=r*Math.sin(a)+this.x0;var s=this.rh-r*Math.cos(a)+this.y0;t.x=o;t.y=s;return t}function Dn(t){var e,n,i,r,a,o;t.x-=this.x0;t.y=this.rh-t.y+this.y0;if(this.ns0>=0){e=Math.sqrt(t.x*t.x+t.y*t.y);i=1}else{e=-Math.sqrt(t.x*t.x+t.y*t.y);i=-1}r=0;if(e!==0){r=Math.atan2(i*t.x,i*t.y)}i=e*this.ns0/this.a;if(this.sphere){o=Math.asin((this.c-i*i)/(2*this.ns0))}else{n=(this.c-i*i)/this.ns0;o=this.phi1z(this.e3,n)}a=F(r/this.ns0+this.long0);t.x=a;t.y=o;return t}function jn(t,e){var n,i,r,a,o;var s=An(.5*e);if(t<d){return s}var l=t*t;for(var u=1;u<=25;u++){n=Math.sin(s);i=Math.cos(s);r=t*n;a=1-r*r;o=.5*a*a/i*(e/(1-l)-n/a+.5/t*Math.log((1-r)/(1+r)));s=s+o;if(Math.abs(o)<=1e-7){return s}}return null}var kn=["Albers_Conic_Equal_Area","Albers","aea"];var Fn={init:Ln,forward:Pn,inverse:Dn,names:kn,phi1z:jn};function $n(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0);this.infinity_dist=1e3*this.a;this.rc=1}function Gn(t){var e,n;var i;var r;var a;var o;var s,l;var u=t.x;var c=t.y;i=F(u-this.long0);e=Math.sin(c);n=Math.cos(c);r=Math.cos(i);o=this.sin_p14*e+this.cos_p14*n*r;a=1;if(o>0||Math.abs(o)<=d){s=this.x0+this.a*a*n*Math.sin(i)/o;l=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*n*r)/o}else{s=this.x0+this.infinity_dist*n*Math.sin(i);l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*r)}t.x=s;t.y=l;return t}function Un(t){var e;var n,i;var r;var a,o;t.x=(t.x-this.x0)/this.a;t.y=(t.y-this.y0)/this.a;t.x/=this.k0;t.y/=this.k0;if(e=Math.sqrt(t.x*t.x+t.y*t.y)){r=Math.atan2(e,this.rc);n=Math.sin(r);i=Math.cos(r);o=An(i*this.sin_p14+t.y*n*this.cos_p14/e);a=Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n);a=F(this.long0+a)}else{o=this.phic0;a=0}t.x=a;t.y=o;return t}var Yn=["gnom"];var Vn={init:$n,forward:Gn,inverse:Un,names:Yn};var Hn=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6){if(e<0){return-1*u}else{return u}}var i=Math.asin(.5*e);var r;var a;var o;var s;for(var l=0;l<30;l++){a=Math.sin(i);o=Math.cos(i);s=t*a;r=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-a/(1-s*s)+.5/t*Math.log((1-s)/(1+s)));i+=r;if(Math.abs(r)<=1e-10){return i}}return NaN};function zn(){if(!this.sphere){this.k0=j(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))}}function Bn(t){var e=t.x;var n=t.y;var i,r;var a=F(e-this.long0);if(this.sphere){i=this.x0+this.a*a*Math.cos(this.lat_ts);r=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts)}else{var o=pn(this.e,Math.sin(n));i=this.x0+this.a*this.k0*a;r=this.y0+this.a*o*.5/this.k0}t.x=i;t.y=r;return t}function Wn(t){t.x-=this.x0;t.y-=this.y0;var e,n;if(this.sphere){e=F(this.long0+t.x/this.a/Math.cos(this.lat_ts));n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))}else{n=Hn(this.e,2*t.y*this.k0/this.a);e=F(this.long0+t.x/(this.a*this.k0))}t.x=e;t.y=n;return t}var qn=["cea"];var Xn={init:zn,forward:Bn,inverse:Wn,names:qn};function Kn(){this.x0=this.x0||0;this.y0=this.y0||0;this.lat0=this.lat0||0;this.long0=this.long0||0;this.lat_ts=this.lat_ts||0;this.title=this.title||"Equidistant Cylindrical (Plate Carre)";this.rc=Math.cos(this.lat_ts)}function Zn(t){var e=t.x;var n=t.y;var i=F(e-this.long0);var r=sn(n-this.lat0);t.x=this.x0+this.a*i*this.rc;t.y=this.y0+this.a*r;return t}function Qn(t){var e=t.x;var n=t.y;t.x=F(this.long0+(e-this.x0)/(this.a*this.rc));t.y=sn(this.lat0+(n-this.y0)/this.a);return t}var Jn=["Equirectangular","Equidistant_Cylindrical","eqc"];var ti={init:Kn,forward:Zn,inverse:Qn,names:Jn};var ei=20;function ni(){this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=en(this.es);this.e1=nn(this.es);this.e2=rn(this.es);this.e3=an(this.es);this.ml0=this.a*tn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function ii(t){var e=t.x;var n=t.y;var i,r,a;var o=F(e-this.long0);a=o*Math.sin(n);if(this.sphere){if(Math.abs(n)<=d){i=this.a*o;r=-1*this.a*this.lat0}else{i=this.a*Math.sin(a)/Math.tan(n);r=this.a*(sn(n-this.lat0)+(1-Math.cos(a))/Math.tan(n))}}else{if(Math.abs(n)<=d){i=this.a*o;r=-1*this.ml0}else{var s=on(this.a,this.e,Math.sin(n))/Math.tan(n);i=s*Math.sin(a);r=this.a*tn(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+s*(1-Math.cos(a))}}t.x=i+this.x0;t.y=r+this.y0;return t}function ri(t){var e,n,i,r,a;var o,s;var l,u;i=t.x-this.x0;r=t.y-this.y0;if(this.sphere){if(Math.abs(r+this.a*this.lat0)<=d){e=F(i/this.a+this.long0);n=0}else{o=this.lat0+r/this.a;s=i*i/this.a/this.a+o*o;l=o;var c;for(a=ei;a;--a){c=Math.tan(l);u=-1*(o*(l*c+1)-l-.5*(l*l+s)*c)/((l-o)/c-1);l+=u;if(Math.abs(u)<=d){n=l;break}}e=F(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(n))}}else{if(Math.abs(r+this.ml0)<=d){n=0;e=F(this.long0+i/this.a)}else{o=(this.ml0+r)/this.a;s=i*i/this.a/this.a+o*o;l=o;var f,h,p,v;var g;for(a=ei;a;--a){g=this.e*Math.sin(l);f=Math.sqrt(1-g*g)*Math.tan(l);h=this.a*tn(this.e0,this.e1,this.e2,this.e3,l);p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l);v=h/this.a;u=(o*(f*v+1)-v-.5*f*(v*v+s))/(this.es*Math.sin(2*l)*(v*v+s-2*o*v)/(4*f)+(o-v)*(f*p-2/Math.sin(2*l))-p);l-=u;if(Math.abs(u)<=d){n=l;break}}f=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n);e=F(this.long0+Math.asin(i*f/this.a)/Math.sin(n))}}t.x=e;t.y=n;return t}var ai=["Polyconic","poly"];var oi={init:ni,forward:ii,inverse:ri,names:ai};var si=1;function li(){this.A=[];this.A[1]=.6399175073;this.A[2]=-.1358797613;this.A[3]=.063294409;this.A[4]=-.02526853;this.A[5]=.0117879;this.A[6]=-.0055161;this.A[7]=.0026906;this.A[8]=-.001333;this.A[9]=67e-5;this.A[10]=-34e-5;this.B_re=[];this.B_im=[];this.B_re[1]=.7557853228;this.B_im[1]=0;this.B_re[2]=.249204646;this.B_im[2]=.003371507;this.B_re[3]=-.001541739;this.B_im[3]=.04105856;this.B_re[4]=-.10162907;this.B_im[4]=.01727609;this.B_re[5]=-.26623489;this.B_im[5]=-.36249218;this.B_re[6]=-.6870983;this.B_im[6]=-1.1651967;this.C_re=[];this.C_im=[];this.C_re[1]=1.3231270439;this.C_im[1]=0;this.C_re[2]=-.577245789;this.C_im[2]=-.007809598;this.C_re[3]=.508307513;this.C_im[3]=-.112208952;this.C_re[4]=-.15094762;this.C_im[4]=.18200602;this.C_re[5]=1.01418179;this.C_im[5]=1.64497696;this.C_re[6]=1.9660549;this.C_im[6]=2.5127645;this.D=[];this.D[1]=1.5627014243;this.D[2]=.5185406398;this.D[3]=-.03333098;this.D[4]=-.1052906;this.D[5]=-.0368594;this.D[6]=.007317;this.D[7]=.0122;this.D[8]=.00394;this.D[9]=-.0013}function ui(t){var e;var n=t.x;var i=t.y;var r=i-this.lat0;var a=n-this.long0;var o=r/l*1e-5;var s=a;var u=1;var c=0;for(e=1;e<=10;e++){u=u*o;c=c+this.A[e]*u}var f=c;var h=s;var d=1;var p=0;var v;var g;var m=0;var _=0;for(e=1;e<=6;e++){v=d*f-p*h;g=p*f+d*h;d=v;p=g;m=m+this.B_re[e]*d-this.B_im[e]*p;_=_+this.B_im[e]*d+this.B_re[e]*p}t.x=_*this.a+this.x0;t.y=m*this.a+this.y0;return t}function ci(t){var e;var n=t.x;var i=t.y;var r=n-this.x0;var a=i-this.y0;var o=a/this.a;var s=r/this.a;var u=1;var c=0;var f;var h;var d=0;var p=0;for(e=1;e<=6;e++){f=u*o-c*s;h=c*o+u*s;u=f;c=h;d=d+this.C_re[e]*u-this.C_im[e]*c;p=p+this.C_im[e]*u+this.C_re[e]*c}for(var v=0;v<this.iterations;v++){var g=d;var m=p;var _;var y;var b=o;var w=s;for(e=2;e<=6;e++){_=g*d-m*p;y=m*d+g*p;g=_;m=y;b=b+(e-1)*(this.B_re[e]*g-this.B_im[e]*m);w=w+(e-1)*(this.B_im[e]*g+this.B_re[e]*m)}g=1;m=0;var x=this.B_re[1];var S=this.B_im[1];for(e=2;e<=6;e++){_=g*d-m*p;y=m*d+g*p;g=_;m=y;x=x+e*(this.B_re[e]*g-this.B_im[e]*m);S=S+e*(this.B_im[e]*g+this.B_re[e]*m)}var C=x*x+S*S;d=(b*x+w*S)/C;p=(w*x-b*S)/C}var E=d;var O=p;var T=1;var M=0;for(e=1;e<=9;e++){T=T*E;M=M+this.D[e]*T}var I=this.lat0+M*l*1e5;var R=this.long0+O;t.x=R;t.y=I;return t}var fi=["New_Zealand_Map_Grid","nzmg"];var hi={init:li,forward:ui,inverse:ci,names:fi};function di(){}function pi(t){var e=t.x;var n=t.y;var i=F(e-this.long0);var r=this.x0+this.a*i;var a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;t.x=r;t.y=a;return t}function vi(t){t.x-=this.x0;t.y-=this.y0;var e=F(this.long0+t.x/this.a);var n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);t.x=e;t.y=n;return t}var gi=["Miller_Cylindrical","mill"];var mi={init:di,forward:pi,inverse:vi,names:gi};var _i=20;function yi(){if(!this.sphere){this.en=Wt(this.es)}else{this.n=1;this.m=0;this.es=0;this.C_y=Math.sqrt((this.m+1)/this.n);this.C_x=this.C_y/(this.m+1)}}function bi(t){var e,n;var i=t.x;var r=t.y;i=F(i-this.long0);if(this.sphere){if(!this.m){r=this.n!==1?Math.asin(this.n*Math.sin(r)):r}else{var a=this.n*Math.sin(r);for(var o=_i;o;--o){var s=(this.m*r+Math.sin(r)-a)/(this.m+Math.cos(r));r-=s;if(Math.abs(s)<d){break}}}e=this.a*this.C_x*i*(this.m+Math.cos(r));n=this.a*this.C_y*r}else{var l=Math.sin(r);var u=Math.cos(r);n=this.a*qt(r,l,u,this.en);e=this.a*i*u/Math.sqrt(1-this.es*l*l)}t.x=e;t.y=n;return t}function wi(t){var e,n,i,r;t.x-=this.x0;i=t.x/this.a;t.y-=this.y0;e=t.y/this.a;if(this.sphere){e/=this.C_y;i=i/(this.C_x*(this.m+Math.cos(e)));if(this.m){e=An((this.m*e+Math.sin(e))/this.n)}else if(this.n!==1){e=An(Math.sin(e)/this.n)}i=F(i+this.long0);e=sn(e)}else{e=Kt(t.y/this.a,this.es,this.en);r=Math.abs(e);if(r<u){r=Math.sin(e);n=this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e));i=F(n)}else if(r-d<u){i=this.long0}}t.x=i;t.y=e;return t}var xi=["Sinusoidal","sinu"];var Si={init:yi,forward:bi,inverse:wi,names:xi};function Ci(){}function Ei(t){var e=t.x;var n=t.y;var i=F(e-this.long0);var r=n;var a=Math.PI*Math.sin(n);while(true){var o=-(r+Math.sin(r)-a)/(1+Math.cos(r));r+=o;if(Math.abs(o)<d){break}}r/=2;if(Math.PI/2-Math.abs(n)<d){i=0}var s=.900316316158*this.a*i*Math.cos(r)+this.x0;var l=1.4142135623731*this.a*Math.sin(r)+this.y0;t.x=s;t.y=l;return t}function Oi(t){var e;var n;t.x-=this.x0;t.y-=this.y0;n=t.y/(1.4142135623731*this.a);if(Math.abs(n)>.999999999999){n=.999999999999}e=Math.asin(n);var i=F(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));if(i<-Math.PI){i=-Math.PI}if(i>Math.PI){i=Math.PI}n=(2*e+Math.sin(2*e))/Math.PI;if(Math.abs(n)>1){n=1}var r=Math.asin(n);t.x=i;t.y=r;return t}var Ti=["Mollweide","moll"];var Mi={init:Ci,forward:Ei,inverse:Oi,names:Ti};function Ii(){if(Math.abs(this.lat1+this.lat2)<d){return}this.lat2=this.lat2||this.lat1;this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=en(this.es);this.e1=nn(this.es);this.e2=rn(this.es);this.e3=an(this.es);this.sinphi=Math.sin(this.lat1);this.cosphi=Math.cos(this.lat1);this.ms1=j(this.e,this.sinphi,this.cosphi);this.ml1=tn(this.e0,this.e1,this.e2,this.e3,this.lat1);if(Math.abs(this.lat1-this.lat2)<d){this.ns=this.sinphi}else{this.sinphi=Math.sin(this.lat2);this.cosphi=Math.cos(this.lat2);this.ms2=j(this.e,this.sinphi,this.cosphi);this.ml2=tn(this.e0,this.e1,this.e2,this.e3,this.lat2);this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)}this.g=this.ml1+this.ms1/this.ns;this.ml0=tn(this.e0,this.e1,this.e2,this.e3,this.lat0);this.rh=this.a*(this.g-this.ml0)}function Ri(t){var e=t.x;var n=t.y;var i;if(this.sphere){i=this.a*(this.g-n)}else{var r=tn(this.e0,this.e1,this.e2,this.e3,n);i=this.a*(this.g-r)}var a=this.ns*F(e-this.long0);var o=this.x0+i*Math.sin(a);var s=this.y0+this.rh-i*Math.cos(a);t.x=o;t.y=s;return t}function Ni(t){t.x-=this.x0;t.y=this.rh-t.y+this.y0;var e,n,i,r;if(this.ns>=0){n=Math.sqrt(t.x*t.x+t.y*t.y);e=1}else{n=-Math.sqrt(t.x*t.x+t.y*t.y);e=-1}var a=0;if(n!==0){a=Math.atan2(e*t.x,e*t.y)}if(this.sphere){r=F(this.long0+a/this.ns);i=sn(this.g-n/this.a);t.x=r;t.y=i;return t}else{var o=this.g-n/this.a;i=ln(o,this.e0,this.e1,this.e2,this.e3);r=F(this.long0+a/this.ns);t.x=r;t.y=i;return t}}var Ai=["Equidistant_Conic","eqdc"];var Li={init:Ii,forward:Ri,inverse:Ni,names:Ai};function Pi(){this.R=this.a}function Di(t){var e=t.x;var n=t.y;var i=F(e-this.long0);var r,a;if(Math.abs(n)<=d){r=this.x0+this.R*i;a=this.y0}var o=An(2*Math.abs(n/Math.PI));if(Math.abs(i)<=d||Math.abs(Math.abs(n)-u)<=d){r=this.x0;if(n>=0){a=this.y0+Math.PI*this.R*Math.tan(.5*o)}else{a=this.y0+Math.PI*this.R*-Math.tan(.5*o)}}var s=.5*Math.abs(Math.PI/i-i/Math.PI);var l=s*s;var c=Math.sin(o);var f=Math.cos(o);var h=f/(c+f-1);var p=h*h;var v=h*(2/c-1);var g=v*v;var m=Math.PI*this.R*(s*(h-g)+Math.sqrt(l*(h-g)*(h-g)-(g+l)*(p-g)))/(g+l);if(i<0){m=-m}r=this.x0+m;var _=l+h;m=Math.PI*this.R*(v*_-s*Math.sqrt((g+l)*(l+1)-_*_))/(g+l);if(n>=0){a=this.y0+m}else{a=this.y0-m}t.x=r;t.y=a;return t}function ji(t){var e,n;var i,r,a,o,s,l;var u;var c;var f;var h;var p;t.x-=this.x0;t.y-=this.y0;f=Math.PI*this.R;i=t.x/f;r=t.y/f;a=i*i+r*r;o=-Math.abs(r)*(1+a);s=o-2*r*r+i*i;l=-2*o+1+2*r*r+a*a;p=r*r/l+(2*s*s*s/l/l/l-9*o*s/l/l)/27;u=(o-s*s/3/l)/l;c=2*Math.sqrt(-u/3);f=3*p/u/c;if(Math.abs(f)>1){if(f>=0){f=1}else{f=-1}}h=Math.acos(f)/3;if(t.y>=0){n=(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI}else{n=-(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI}if(Math.abs(i)<d){e=this.long0}else{e=F(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(i*i-r*r)+a*a))/2/i)}t.x=e;t.y=n;return t}var ki=["Van_der_Grinten_I","VanDerGrinten","vandg"];var Fi={init:Pi,forward:Di,inverse:ji,names:ki};function $i(){this.sin_p12=Math.sin(this.lat0);this.cos_p12=Math.cos(this.lat0)}function Gi(t){var e=t.x;var n=t.y;var i=Math.sin(t.y);var r=Math.cos(t.y);var a=F(e-this.long0);var o,s,l,c,f,h,p,v,g,m,_,y,b,w,x,S,C,E,O,T,M,I,R;if(this.sphere){if(Math.abs(this.sin_p12-1)<=d){t.x=this.x0+this.a*(u-n)*Math.sin(a);t.y=this.y0-this.a*(u-n)*Math.cos(a);return t}else if(Math.abs(this.sin_p12+1)<=d){t.x=this.x0+this.a*(u+n)*Math.sin(a);t.y=this.y0+this.a*(u+n)*Math.cos(a);return t}else{E=this.sin_p12*i+this.cos_p12*r*Math.cos(a);S=Math.acos(E);C=S/Math.sin(S);t.x=this.x0+this.a*C*r*Math.sin(a);t.y=this.y0+this.a*C*(this.cos_p12*i-this.sin_p12*r*Math.cos(a));return t}}else{o=en(this.es);s=nn(this.es);l=rn(this.es);c=an(this.es);if(Math.abs(this.sin_p12-1)<=d){f=this.a*tn(o,s,l,c,u);h=this.a*tn(o,s,l,c,n);t.x=this.x0+(f-h)*Math.sin(a);t.y=this.y0-(f-h)*Math.cos(a);return t}else if(Math.abs(this.sin_p12+1)<=d){f=this.a*tn(o,s,l,c,u);h=this.a*tn(o,s,l,c,n);t.x=this.x0+(f+h)*Math.sin(a);t.y=this.y0+(f+h)*Math.cos(a);return t}else{p=i/r;v=on(this.a,this.e,this.sin_p12);g=on(this.a,this.e,i);m=Math.atan((1-this.es)*p+this.es*v*this.sin_p12/(g*r));_=Math.atan2(Math.sin(a),this.cos_p12*Math.tan(m)-this.sin_p12*Math.cos(a));if(_===0){O=Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m))}else if(Math.abs(Math.abs(_)-Math.PI)<=d){O=-Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m))}else{O=Math.asin(Math.sin(a)*Math.cos(m)/Math.sin(_))}y=this.e*this.sin_p12/Math.sqrt(1-this.es);b=this.e*this.cos_p12*Math.cos(_)/Math.sqrt(1-this.es);w=y*b;x=b*b;T=O*O;M=T*O;I=M*O;R=I*O;S=v*O*(1-T*x*(1-x)/6+M/8*w*(1-2*x)+I/120*(x*(4-7*x)-3*y*y*(1-7*x))-R/48*w);t.x=this.x0+S*Math.sin(_);t.y=this.y0+S*Math.cos(_);return t}}}function Ui(t){t.x-=this.x0;t.y-=this.y0;var e,n,i,r,a,o,s,l,c,f,h,p,v,g,m,_,y,b,w,x,S,C,E;if(this.sphere){e=Math.sqrt(t.x*t.x+t.y*t.y);if(e>2*u*this.a){return}n=e/this.a;i=Math.sin(n);r=Math.cos(n);a=this.long0;if(Math.abs(e)<=d){o=this.lat0}else{o=An(r*this.sin_p12+t.y*i*this.cos_p12/e);s=Math.abs(this.lat0)-u;if(Math.abs(s)<=d){if(this.lat0>=0){a=F(this.long0+Math.atan2(t.x,-t.y))}else{a=F(this.long0-Math.atan2(-t.x,t.y))}}else{a=F(this.long0+Math.atan2(t.x*i,e*this.cos_p12*r-t.y*this.sin_p12*i))}}t.x=a;t.y=o;return t}else{l=en(this.es);c=nn(this.es);f=rn(this.es);h=an(this.es);if(Math.abs(this.sin_p12-1)<=d){p=this.a*tn(l,c,f,h,u);e=Math.sqrt(t.x*t.x+t.y*t.y);v=p-e;o=ln(v/this.a,l,c,f,h);a=F(this.long0+Math.atan2(t.x,-1*t.y));t.x=a;t.y=o;return t}else if(Math.abs(this.sin_p12+1)<=d){p=this.a*tn(l,c,f,h,u);e=Math.sqrt(t.x*t.x+t.y*t.y);v=e-p;o=ln(v/this.a,l,c,f,h);a=F(this.long0+Math.atan2(t.x,t.y));t.x=a;t.y=o;return t}else{e=Math.sqrt(t.x*t.x+t.y*t.y);_=Math.atan2(t.x,t.y);g=on(this.a,this.e,this.sin_p12);y=Math.cos(_);b=this.e*this.cos_p12*y;w=-b*b/(1-this.es);x=3*this.es*(1-w)*this.sin_p12*this.cos_p12*y/(1-this.es);S=e/g;C=S-w*(1+w)*Math.pow(S,3)/6-x*(1+3*w)*Math.pow(S,4)/24;E=1-w*C*C/2-S*C*C*C/6;m=Math.asin(this.sin_p12*Math.cos(C)+this.cos_p12*Math.sin(C)*y);a=F(this.long0+Math.asin(Math.sin(_)*Math.sin(C)/Math.cos(m)));o=Math.atan((1-this.es*E*this.sin_p12/Math.sin(m))*Math.tan(m)/(1-this.es));t.x=a;t.y=o;return t}}}var Yi=["Azimuthal_Equidistant","aeqd"];var Vi={init:$i,forward:Gi,inverse:Ui,names:Yi};function Hi(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0)}function zi(t){var e,n;var i;var r;var a;var o,s,l;var u=t.x;var c=t.y;i=F(u-this.long0);e=Math.sin(c);n=Math.cos(c);r=Math.cos(i);o=this.sin_p14*e+this.cos_p14*n*r;a=1;if(o>0||Math.abs(o)<=d){s=this.a*a*n*Math.sin(i);l=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*n*r)}t.x=s;t.y=l;return t}function Bi(t){var e;var n;var i,r;var a;var o,s;t.x-=this.x0;t.y-=this.y0;e=Math.sqrt(t.x*t.x+t.y*t.y);n=An(e/this.a);i=Math.sin(n);r=Math.cos(n);o=this.long0;if(Math.abs(e)<=d){s=this.lat0;t.x=o;t.y=s;return t}s=An(r*this.sin_p14+t.y*i*this.cos_p14/e);a=Math.abs(this.lat0)-u;if(Math.abs(a)<=d){if(this.lat0>=0){o=F(this.long0+Math.atan2(t.x,-t.y))}else{o=F(this.long0-Math.atan2(-t.x,t.y))}t.x=o;t.y=s;return t}o=F(this.long0+Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i));t.x=o;t.y=s;return t}var Wi=["ortho"];var qi={init:Hi,forward:zi,inverse:Bi,names:Wi};var Xi={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6};var Ki={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Zi(){this.x0=this.x0||0;this.y0=this.y0||0;this.lat0=this.lat0||0;this.long0=this.long0||0;this.lat_ts=this.lat_ts||0;this.title=this.title||"Quadrilateralized Spherical Cube";if(this.lat0>=u-g/2){this.face=Xi.TOP}else if(this.lat0<=-(u-g/2)){this.face=Xi.BOTTOM}else if(Math.abs(this.long0)<=g){this.face=Xi.FRONT}else if(Math.abs(this.long0)<=u+g){this.face=this.long0>0?Xi.RIGHT:Xi.LEFT}else{this.face=Xi.BACK}if(this.es!==0){this.one_minus_f=1-(this.a-this.b)/this.a;this.one_minus_f_squared=this.one_minus_f*this.one_minus_f}}function Qi(t){var e={x:0,y:0};var n,i;var r,a;var o,s;var l={value:0};t.x-=this.long0;if(this.es!==0){n=Math.atan(this.one_minus_f_squared*Math.tan(t.y))}else{n=t.y}i=t.x;if(this.face===Xi.TOP){a=u-n;if(i>=g&&i<=u+g){l.value=Ki.AREA_0;r=i-u}else if(i>u+g||i<=-(u+g)){l.value=Ki.AREA_1;r=i>0?i-_:i+_}else if(i>-(u+g)&&i<=-g){l.value=Ki.AREA_2;r=i+u}else{l.value=Ki.AREA_3;r=i}}else if(this.face===Xi.BOTTOM){a=u+n;if(i>=g&&i<=u+g){l.value=Ki.AREA_0;r=-i+u}else if(i<g&&i>=-g){l.value=Ki.AREA_1;r=-i}else if(i<-g&&i>=-(u+g)){l.value=Ki.AREA_2;r=-i-u}else{l.value=Ki.AREA_3;r=i>0?-i+_:-i-_}}else{var c,f,h;var d,p;var v,m;if(this.face===Xi.RIGHT){i=er(i,+u)}else if(this.face===Xi.BACK){i=er(i,+_)}else if(this.face===Xi.LEFT){i=er(i,-u)}d=Math.sin(n);p=Math.cos(n);v=Math.sin(i);m=Math.cos(i);c=p*m;f=p*v;h=d;if(this.face===Xi.FRONT){a=Math.acos(c);r=tr(a,h,f,l)}else if(this.face===Xi.RIGHT){a=Math.acos(f);r=tr(a,h,-c,l)}else if(this.face===Xi.BACK){a=Math.acos(-c);r=tr(a,h,-f,l)}else if(this.face===Xi.LEFT){a=Math.acos(-f);r=tr(a,h,c,l)}else{a=r=0;l.value=Ki.AREA_0}}s=Math.atan(12/_*(r+Math.acos(Math.sin(r)*Math.cos(g))-u));o=Math.sqrt((1-Math.cos(a))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(r)))));if(l.value===Ki.AREA_1){s+=u}else if(l.value===Ki.AREA_2){s+=_}else if(l.value===Ki.AREA_3){s+=1.5*_}e.x=o*Math.cos(s);e.y=o*Math.sin(s);e.x=e.x*this.a+this.x0;e.y=e.y*this.a+this.y0;t.x=e.x;t.y=e.y;return t}function Ji(t){var e={lam:0,phi:0};var n,i,r,a;var o,s,l,c;var f;var h={value:0};t.x=(t.x-this.x0)/this.a;t.y=(t.y-this.y0)/this.a;i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y));n=Math.atan2(t.y,t.x);if(t.x>=0&&t.x>=Math.abs(t.y)){h.value=Ki.AREA_0}else if(t.y>=0&&t.y>=Math.abs(t.x)){h.value=Ki.AREA_1;n-=u}else if(t.x<0&&-t.x>=Math.abs(t.y)){h.value=Ki.AREA_2;n=n<0?n+_:n-_}else{h.value=Ki.AREA_3;n+=u}f=_/12*Math.tan(n);o=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2));s=Math.atan(o);r=Math.cos(n);a=Math.tan(i);l=1-r*r*a*a*(1-Math.cos(Math.atan(1/Math.cos(s))));if(l<-1){l=-1}else if(l>+1){l=+1}if(this.face===Xi.TOP){c=Math.acos(l);e.phi=u-c;if(h.value===Ki.AREA_0){e.lam=s+u}else if(h.value===Ki.AREA_1){e.lam=s<0?s+_:s-_}else if(h.value===Ki.AREA_2){e.lam=s-u}else{e.lam=s}}else if(this.face===Xi.BOTTOM){c=Math.acos(l);e.phi=c-u;if(h.value===Ki.AREA_0){e.lam=-s+u}else if(h.value===Ki.AREA_1){e.lam=-s}else if(h.value===Ki.AREA_2){e.lam=-s-u}else{e.lam=s<0?-s-_:-s+_}}else{var d,p,v;d=l;f=d*d;if(f>=1){v=0}else{v=Math.sqrt(1-f)*Math.sin(s)}f+=v*v;if(f>=1){p=0}else{p=Math.sqrt(1-f)}if(h.value===Ki.AREA_1){f=p;p=-v;v=f}else if(h.value===Ki.AREA_2){p=-p;v=-v}else if(h.value===Ki.AREA_3){f=p;p=v;v=-f}if(this.face===Xi.RIGHT){f=d;d=-p;p=f}else if(this.face===Xi.BACK){d=-d;p=-p}else if(this.face===Xi.LEFT){f=d;d=p;p=-f}e.phi=Math.acos(-v)-u;e.lam=Math.atan2(p,d);if(this.face===Xi.RIGHT){e.lam=er(e.lam,-u)}else if(this.face===Xi.BACK){e.lam=er(e.lam,-_)}else if(this.face===Xi.LEFT){e.lam=er(e.lam,+u)}}if(this.es!==0){var g;var m,y;g=e.phi<0?1:0;m=Math.tan(e.phi);y=this.b/Math.sqrt(m*m+this.one_minus_f_squared);e.phi=Math.atan(Math.sqrt(this.a*this.a-y*y)/(this.one_minus_f*y));if(g){e.phi=-e.phi}}e.lam+=this.long0;t.x=e.lam;t.y=e.phi;return t}function tr(t,e,n,i){var r;if(t<d){i.value=Ki.AREA_0;r=0}else{r=Math.atan2(e,n);if(Math.abs(r)<=g){i.value=Ki.AREA_0}else if(r>g&&r<=u+g){i.value=Ki.AREA_1;r-=u}else if(r>u+g||r<=-(u+g)){i.value=Ki.AREA_2;r=r>=0?r-_:r+_}else{i.value=Ki.AREA_3;r+=u}}return r}function er(t,e){var n=t+e;if(n<-_){n+=m}else if(n>+_){n-=m}return n}var nr=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];var ir={init:Zi,forward:Qi,inverse:Ji,names:nr};var rr=function(t){t.Proj.projections.add(ee);t.Proj.projections.add(pe);t.Proj.projections.add(ye);t.Proj.projections.add(Ne);t.Proj.projections.add(ke);t.Proj.projections.add(Fe["a"]);t.Proj.projections.add(Ve);t.Proj.projections.add(qe);t.Proj.projections.add(Je);t.Proj.projections.add(dn);t.Proj.projections.add(Nn);t.Proj.projections.add(Fn);t.Proj.projections.add(Vn);t.Proj.projections.add(Xn);t.Proj.projections.add(ti);t.Proj.projections.add(oi);t.Proj.projections.add(hi);t.Proj.projections.add(mi);t.Proj.projections.add(Si);t.Proj.projections.add(Mi);t.Proj.projections.add(Li);t.Proj.projections.add(Fi);t.Proj.projections.add(Vi);t.Proj.projections.add(qi);t.Proj.projections.add(ir)};It.defaultDatum="WGS84";It.Proj=ft;It.WGS84=new It.Proj("WGS84");It.Point=Lt;It.toPoint=bt;It.defs=T;It.transform=Ct;It.mgrs=Nt.a;It.version=Pt["a"];rr(It);var ar=e["a"]=It},function(t,e,n){"use strict";var i=n(2);var r=n(105);var a=n(1);var o=n(36);var s=n(113);var l=n(29);var u=n(4);var c=undefined;var f=function t(e,n){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};r["a"].call(this,i);if(c===undefined){c=false;document.body.addEventListener("keydown",function(t){var e=!!t.metaKey;var n=t.keyCode===17;c=e||n});document.body.addEventListener("keyup",function(){c=false})}if(i.continueMsg!==undefined){this.continueMsg=i.continueMsg}else{this.continueMsg=document.createElement("span");this.continueMsg.textContent=n.getString("Click to continue drawing the line.");var a=document.createElement("br");a.textContent=n.getString("Double-click or click last point to finish.");this.continueMsg.appendChild(a)}this.format=e;this.tolerance=i.tolerance;this.source=i.source};a["d"](f,r["a"]);f.prototype.createDrawInteraction=function(t,e){return new s["a"]({type:"LineString",geometryFunction:this.linestringGeometryFunction.bind(this),condition:function t(){return true},style:t,source:e})};f.prototype.linestringGeometryFunction=function(t,e){var n=this;if(c){var i=this.getMap().getView().getRotation();var r=Math.PI/4;var a=t[t.length-2];var s=t[t.length-1];var f=a[0]-s[0];var h=a[1]-s[1];var d=Object(l["d"])(a,s);var p=i+Math.round((Math.atan2(h,f)-i)/r)*r;s[0]=a[0]-d*Math.cos(p);s[1]=a[1]-d*Math.sin(p);if(this.tolerance!==undefined&&this.source!==undefined){var v=this.getMap().getView().getResolution()*this.tolerance;var g=[s[0]-v,s[1]-v,s[0]+v,s[1]+v];var m=this.source;var _=m.getFeaturesInExtent(g);_.forEach(function(t){var e=[];var i=[];var r=Infinity;var o=Object(l["d"])(a,s);var c=a[0];var f=a[1];var h=s[0];var d=s[1];var p=[(h-c)/o,(d-f)/o];var m=[c+(o+v)*p[0],f+(o+v)*p[1]];t.getGeometry().forEachSegment(function(t,o){e=n.computeLineSegmentIntersection(a,m,t,o);if(e!==undefined&&Object(u["h"])(g,e[0],e[1])){var c=Object(l["d"])(s,e);if(c<r){r=c;i=e}}});if(i){s[0]=i[0]||s[0];s[1]=i[1]||s[1]}})}}var y=e;if(y){y.setCoordinates(t);return y}return new o["a"](t)};f.prototype.handleMeasure=function(t){var e=i["a"].assertInstanceof(this.sketchFeature.getGeometry(),o["a"]);var n=this.getMap().getView().getProjection();i["a"].assert(n);var a=r["a"].getFormattedLength(e,n,this.precision,this.format);var s=e.getLastCoordinate();t(a,s)};f.prototype.computeLineSegmentIntersection=function(t,e,n,i){var r=(i[0]-n[0])*(t[1]-n[1])-(i[1]-n[1])*(t[0]-n[0]);var a=(e[0]-t[0])*(t[1]-n[1])-(e[1]-t[1])*(t[0]-n[0]);var o=(i[1]-n[1])*(e[0]-t[0])-(i[0]-n[0])*(e[1]-t[1]);if(o===0){return}var s=r/o;var l=a/o;if(s>=0&&s<=1&&l>=0&&l<=1){var u=[];u[0]=t[0]+s*(e[0]-t[0]);u[1]=t[1]+s*(e[1]-t[1]);return u}};e["a"]=f},function(t,e,n){"use strict";n.d(e,"a",function(){return o});n.d(e,"b",function(){return s});var i=n(1);var r=n(169);var a=function t(e){var n={mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout};r["a"].call(this,e,n);this.pointerMap=e.pointerMap;this.lastTouches=[]};Object(i["d"])(a,r["a"]);var o=1;var s="mouse";var l=25;a.prototype.isEventSimulatedFromTouch_=function(t){var e=this.lastTouches;var n=t.clientX;var i=t.clientY;for(var r=0,a=e.length,o;r<a&&(o=e[r]);r++){var s=Math.abs(n-o[0]);var u=Math.abs(i-o[1]);if(s<=l&&u<=l){return true}}return false};function u(t,e){var n=e.cloneEvent(t,t);var i=n.preventDefault;n.preventDefault=function(){t.preventDefault();i()};n.pointerId=o;n.isPrimary=true;n.pointerType=s;return n}a.prototype.mousedown=function(t){if(!this.isEventSimulatedFromTouch_(t)){if(o.toString()in this.pointerMap){this.cancel(t)}var e=u(t,this.dispatcher);this.pointerMap[o.toString()]=t;this.dispatcher.down(e,t)}};a.prototype.mousemove=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=u(t,this.dispatcher);this.dispatcher.move(e,t)}};a.prototype.mouseup=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[o.toString()];if(e&&e.button===t.button){var n=u(t,this.dispatcher);this.dispatcher.up(n,t);this.cleanupMouse()}}};a.prototype.mouseover=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=u(t,this.dispatcher);this.dispatcher.enterOver(e,t)}};a.prototype.mouseout=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=u(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}};a.prototype.cancel=function(t){var e=u(t,this.dispatcher);this.dispatcher.cancel(e,t);this.cleanupMouse()};a.prototype.cleanupMouse=function(){delete this.pointerMap[o.toString()]};e["c"]=a},function(t,e,n){"use strict";var i=function t(){};i.prototype.createDate=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t!==null?new Date(t):e};i.prototype.getTime=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t.getTime():e};i.prototype.getOptions=function(t){var e=this.createDate(t.minValue);var n=this.createDate(t.maxValue);var i=this.createDate(t.minDefValue,e);var r=this.createDate(t.maxDefValue,n);var a=t.mode==="range"?[this.getTime(i),this.getTime(r)]:this.getTime(i);return{minDate:this.getTime(e),maxDate:this.getTime(n),values:a}};i.prototype.getUTCDate=function(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())};i.module=angular.module("ngeoTime",[]);i.module.service("ngeoTime",i);e["a"]=i},function(t,e,n){"use strict";n.d(e,"c",function(){return f});n.d(e,"d",function(){return h});n.d(e,"a",function(){return p});n.d(e,"b",function(){return m});var i=n(247);var r=n(104);var a=n(4);var o=n(252);var s=n(9);var l=n(10);var u=n(85);var c=n(276);function f(t){var e=t.getDefaultTileGrid();if(!e){e=g(t);t.setDefaultTileGrid(e)}return e}function h(t,e,n){var i=e[0];var r=t.getTileCoordCenter(e);var o=m(n);if(!Object(a["f"])(o,r)){var s=Object(a["E"])(o);var l=Math.ceil((o[0]-r[0])/s);r[0]+=s*l;return t.getTileCoordForCoordAndZ(r,i)}else{return e}}function d(t,e,n,i){var r=i!==undefined?i:o["a"].TOP_LEFT;var s=v(t,e,n);return new c["a"]({extent:t,origin:Object(a["y"])(t,r),resolutions:s,tileSize:n})}function p(t){var e={};Object(s["a"])(e,t!==undefined?t:{});if(e.extent===undefined){e.extent=Object(l["h"])("EPSG:3857").getExtent()}e.resolutions=v(e.extent,e.maxZoom,e.tileSize);delete e.maxZoom;return new c["a"](e)}function v(t,e,n){var o=e!==undefined?e:i["a"];var s=Object(a["A"])(t);var l=Object(a["E"])(t);var u=Object(r["d"])(n!==undefined?n:i["b"]);var c=Math.max(l/u[0],s/u[1]);var f=o+1;var h=new Array(f);for(var d=0;d<f;++d){h[d]=c/Math.pow(2,d)}return h}function g(t,e,n,i){var r=m(t);return d(r,e,n,i)}function m(t){t=Object(l["h"])(t);var e=t.getExtent();if(!e){var n=180*l["a"][u["b"].DEGREES]/t.getMetersPerUnit();e=Object(a["k"])(-n,-n,n,n)}return e}},function(t,e,n){"use strict";n.d(e,"b",function(){return o});n.d(e,"a",function(){return c});n.d(e,"c",function(){return f});var i=n(15);var r=n(8);
/**
 * @license
 * Latitude/longitude spherical geodesy formulae taken from
 * http://www.movable-type.co.uk/scripts/latlong.html
 * Licensed under CC-BY-3.0.
 */var a=6371008.8;function o(t,e,n){var r=n||a;var o=Object(i["i"])(t[1]);var s=Object(i["i"])(e[1]);var l=(s-o)/2;var u=Object(i["i"])(e[0]-t[0])/2;var c=Math.sin(l)*Math.sin(l)+Math.sin(u)*Math.sin(u)*Math.cos(o)*Math.cos(s);return 2*r*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function s(t,e){var n=0;for(var i=0,r=t.length;i<r-1;++i){n+=o(t[i],t[i+1],e)}return n}function l(t,e){var n=e||{};var i=n.radius||a;var o=n.projection||"EPSG:3857";var u=t.getType();if(u!==r["a"].GEOMETRY_COLLECTION){t=t.clone().transform(o,"EPSG:4326")}var c=0;var f=void 0,h=void 0,d=void 0,p=void 0,v=void 0,g=void 0;switch(u){case r["a"].POINT:case r["a"].MULTI_POINT:{break}case r["a"].LINE_STRING:case r["a"].LINEAR_RING:{f=t.getCoordinates();c=s(f,i);break}case r["a"].MULTI_LINE_STRING:case r["a"].POLYGON:{f=t.getCoordinates();for(d=0,p=f.length;d<p;++d){c+=s(f[d],i)}break}case r["a"].MULTI_POLYGON:{f=t.getCoordinates();for(d=0,p=f.length;d<p;++d){h=f[d];for(v=0,g=h.length;v<g;++v){c+=s(h[v],i)}}break}case r["a"].GEOMETRY_COLLECTION:{var m=t.getGeometries();for(d=0,p=m.length;d<p;++d){c+=l(m[d],e)}break}default:{throw new Error("Unsupported geometry type: "+u)}}return c}function u(t,e){var n=0;var r=t.length;var a=t[r-1][0];var o=t[r-1][1];for(var s=0;s<r;s++){var l=t[s][0];var u=t[s][1];n+=Object(i["i"])(l-a)*(2+Math.sin(Object(i["i"])(o))+Math.sin(Object(i["i"])(u)));a=l;o=u}return n*e*e/2}function c(t,e){var n=e||{};var i=n.radius||a;var o=n.projection||"EPSG:3857";var s=t.getType();if(s!==r["a"].GEOMETRY_COLLECTION){t=t.clone().transform(o,"EPSG:4326")}var l=0;var f=void 0,h=void 0,d=void 0,p=void 0,v=void 0,g=void 0;switch(s){case r["a"].POINT:case r["a"].MULTI_POINT:case r["a"].LINE_STRING:case r["a"].MULTI_LINE_STRING:case r["a"].LINEAR_RING:{break}case r["a"].POLYGON:{f=t.getCoordinates();l=Math.abs(u(f[0],i));for(d=1,p=f.length;d<p;++d){l-=Math.abs(u(f[d],i))}break}case r["a"].MULTI_POLYGON:{f=t.getCoordinates();for(d=0,p=f.length;d<p;++d){h=f[d];l+=Math.abs(u(h[0],i));for(v=1,g=h.length;v<g;++v){l-=Math.abs(u(h[v],i))}}break}case r["a"].GEOMETRY_COLLECTION:{var m=t.getGeometries();for(d=0,p=m.length;d<p;++d){l+=c(m[d],e)}break}default:{throw new Error("Unsupported geometry type: "+s)}}return l}function f(t,e,n,r){var o=r||a;var s=Object(i["i"])(t[1]);var l=Object(i["i"])(t[0]);var u=e/o;var c=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(n));var f=l+Math.atan2(Math.sin(n)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(c));return[Object(i["h"])(f),Object(i["h"])(c)]}},function(t,e,n){"use strict";var i=n(20);var r=function t(){};r.prototype.disposed_=false;r.prototype.dispose=function(){if(!this.disposed_){this.disposed_=true;this.disposeInternal()}};r.prototype.disposeInternal=i["c"];e["a"]=r},function(t,e,n){"use strict";function i(t,e,n,i){while(e<n-i){for(var r=0;r<i;++r){var a=t[e+r];t[e+r]=t[n-i+r];t[n-i+r]=a}e+=i;n-=i}}n.d(e,"a",function(){return a});n.d(e,"b",function(){return o});n.d(e,"c",function(){return s});n.d(e,"d",function(){return l});function r(t,e,n,i){var r=0;var a=t[n-i];var o=t[n-i+1];for(;e<n;e+=i){var s=t[e];var l=t[e+1];r+=(s-a)*(l+o);a=s;o=l}return r>0}function a(t,e,n,i,a){var o=a!==undefined?a:false;for(var s=0,l=n.length;s<l;++s){var u=n[s];var c=r(t,e,u,i);if(s===0){if(o&&c||!o&&!c){return false}}else{if(o&&!c||!o&&c){return false}}e=u}return true}function o(t,e,n,i,r){for(var o=0,s=n.length;o<s;++o){if(!a(t,e,n[o],i,r)){return false}}return true}function s(t,e,n,a,o){var s=o!==undefined?o:false;for(var l=0,u=n.length;l<u;++l){var c=n[l];var f=r(t,e,c,a);var h=l===0?s&&f||!s&&!f:s&&!f||!s&&f;if(h){i(t,e,c,a)}e=c}return e}function l(t,e,n,i,r){for(var a=0,o=n.length;a<o;++a){e=s(t,e,n[a],i,r)}return e}},function(t,e,n){"use strict";var i=n(1);var r=function t(e,n){this.data=e;this.columnDefs=n;this.selectedRows={}};r.getRowUid=function(t){return""+i["c"](t)};r.prototype.isRowSelected=function(t){return!!this.selectedRows[r.getRowUid(t)]};r.prototype.getSelectedCount=function(){return Object.keys(this.selectedRows).length};r.prototype.getSelectedRows=function(){var t=this;return this.data.filter(function(e){return t.isRowSelected(e)})};r.prototype.selectRow=function(t){var e=r.getRowUid(t);this.selectedRows[e]=t};r.prototype.toggleRow=function(t){var e=r.getRowUid(t);var n=this.isRowSelected(t);if(n){delete this.selectedRows[e]}else{this.selectedRows[e]=t}};r.prototype.selectAll=function(){var t=this;this.data.forEach(function(e){t.selectRow(e)})};r.prototype.unselectAll=function(){for(var t in this.selectedRows){delete this.selectedRows[t]}};r.prototype.invertSelection=function(){var t=this;this.data.forEach(function(e){t.toggleRow(e)})};r.module=angular.module("ngeoGridConfig",[]);e["a"]=r},function(t,e,n){"use strict";var i=n(70);var r=n(15);var a=function t(){this.extentHalfHorizontalDistance_;this.extentHalfVerticalDistance_};a.INCHES_PER_METER_=39.37;a.DOTS_PER_INCH_=72;a.prototype.createPrintMaskPostcompose=function(t,e,n){var o=this;return function(s){var l=s.context;var u=s.frameState;var c=u.viewState.resolution;var f=u.size[0]*u.pixelRatio;var h=u.size[1]*u.pixelRatio;var d=[f/2,h/2];var p=t();var v=p[1]*i["b"];var g=p[0]*i["b"];var m=e(u);var _=a.DOTS_PER_INCH_;var y=a.INCHES_PER_METER_;var b=g/_/y*m/c/2;o.extentHalfHorizontalDistance_=p[0]/_/y*m/2;var w=v/_/y*m/c/2;o.extentHalfVerticalDistance_=p[1]/_/y*m/2;l.beginPath();l.moveTo(0,0);l.lineTo(f,0);l.lineTo(f,h);l.lineTo(0,h);l.lineTo(0,0);l.closePath();if(!n){o.drawPrintZone_(l,d,b,w)}else{var x=r["i"](n());o.drawPrintZoneWithRotation_(l,d,b,w,x)}l.fillStyle="rgba(0, 5, 25, 0.5)";l.fill()}};a.prototype.drawPrintZone_=function(t,e,n,i){var r=e[0]-n;var a=e[1]-i;var o=e[0]+n;var s=e[1]+i;t.moveTo(r,a);t.lineTo(r,s);t.lineTo(o,s);t.lineTo(o,a);t.lineTo(r,a);t.closePath()};a.prototype.drawPrintZoneWithRotation_=function(t,e,n,i,r){var a=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));var o=Math.atan(i/n)-r;var s=Math.atan(n/i)-r;var l=e[0]-Math.cos(o)*a;var u=e[1]+Math.sin(o)*a;var c=e[0]+Math.sin(s)*a;var f=e[1]+Math.cos(s)*a;var h=e[0]+Math.cos(o)*a;var d=e[1]-Math.sin(o)*a;var p=e[0]-Math.sin(s)*a;var v=e[1]-Math.cos(s)*a;t.moveTo(l,u);t.lineTo(c,f);t.lineTo(h,d);t.lineTo(p,v);t.lineTo(l,u);t.closePath()};a.prototype.getOptimalScale=function(t,e,n,i){var r=t[0]*e;var o=t[1]*e;var s=r*a.INCHES_PER_METER_*a.DOTS_PER_INCH_/n[0];var l=o*a.INCHES_PER_METER_*a.DOTS_PER_INCH_/n[1];var u=Math.min(s,l);var c=-1;for(var f=0,h=i.length;f<h;++f){if(u>i[f]){c=i[f]}}return c};a.prototype.getOptimalResolution=function(t,e,n){var i=a.DOTS_PER_INCH_*a.INCHES_PER_METER_;var r=e[0]*n/(i*t[0]);var o=e[1]*n/(i*t[1]);var s=Math.max(r,o);return s};a.prototype.getBottomLeftCorner=function(t){return[t[0]-this.extentHalfHorizontalDistance_,t[1]-this.extentHalfVerticalDistance_]};a.prototype.getBottomRightCorner=function(t){return[t[0]+this.extentHalfHorizontalDistance_,t[1]-this.extentHalfVerticalDistance_]};a.prototype.getUpLeftCorner=function(t){return[t[0]-this.extentHalfHorizontalDistance_,t[1]+this.extentHalfVerticalDistance_]};a.prototype.getUpRightCorner=function(t){return[t[0]+this.extentHalfHorizontalDistance_,t[1]+this.extentHalfVerticalDistance_]};a.module=angular.module("ngeoPrintUtils",[]);a.module.service("ngeoPrintUtils",a);e["a"]=a},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i="1.3.0"},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(r=[n(38),n(118)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){var e=0;var n=Array.prototype.slice;t.cleanData=function(e){return function(n){var i,r,a;for(a=0;(r=n[a])!=null;a++){try{i=t._data(r,"events");if(i&&i.remove){t(r).triggerHandler("remove")}}catch(t){}}e(n)}}(t.cleanData);t.widget=function(e,n,i){var r,a,o;var s={};var l=e.split(".")[0];e=e.split(".")[1];var u=l+"-"+e;if(!i){i=n;n=t.Widget}if(t.isArray(i)){i=t.extend.apply(null,[{}].concat(i))}t.expr[":"][u.toLowerCase()]=function(e){return!!t.data(e,u)};t[l]=t[l]||{};r=t[l][e];a=t[l][e]=function(t,e){if(!this._createWidget){return new a(t,e)}if(arguments.length){this._createWidget(t,e)}};t.extend(a,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]});o=new n;o.options=t.widget.extend({},o.options);t.each(i,function(e,i){if(!t.isFunction(i)){s[e]=i;return}s[e]=function(){function t(){return n.prototype[e].apply(this,arguments)}function r(t){return n.prototype[e].apply(this,t)}return function(){var e=this._super;var n=this._superApply;var a;this._super=t;this._superApply=r;a=i.apply(this,arguments);this._super=e;this._superApply=n;return a}}()});a.prototype=t.widget.extend(o,{widgetEventPrefix:r?o.widgetEventPrefix||e:e},s,{constructor:a,namespace:l,widgetName:e,widgetFullName:u});if(r){t.each(r._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)});delete r._childConstructors}else{n._childConstructors.push(a)}t.widget.bridge(e,a);return a};t.widget.extend=function(e){var i=n.call(arguments,1);var r=0;var a=i.length;var o;var s;for(;r<a;r++){for(o in i[r]){s=i[r][o];if(i[r].hasOwnProperty(o)&&s!==undefined){if(t.isPlainObject(s)){e[o]=t.isPlainObject(e[o])?t.widget.extend({},e[o],s):t.widget.extend({},s)}else{e[o]=s}}}}return e};t.widget.bridge=function(e,i){var r=i.prototype.widgetFullName||e;t.fn[e]=function(a){var o=typeof a==="string";var s=n.call(arguments,1);var l=this;if(o){if(!this.length&&a==="instance"){l=undefined}else{this.each(function(){var n;var i=t.data(this,r);if(a==="instance"){l=i;return false}if(!i){return t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+a+"'")}if(!t.isFunction(i[a])||a.charAt(0)==="_"){return t.error("no such method '"+a+"' for "+e+" widget instance")}n=i[a].apply(i,s);if(n!==i&&n!==undefined){l=n&&n.jquery?l.pushStack(n.get()):n;return false}})}}else{if(s.length){a=t.widget.extend.apply(null,[a].concat(s))}this.each(function(){var e=t.data(this,r);if(e){e.option(a||{});if(e._init){e._init()}}else{t.data(this,r,new i(a,this))}})}return l}};t.Widget=function(){};t.Widget._childConstructors=[];t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(n,i){i=t(i||this.defaultElement||this)[0];this.element=t(i);this.uuid=e++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=t();this.hoverable=t();this.focusable=t();this.classesElementLookup={};if(i!==this){t.data(i,this.widgetFullName,this);this._on(true,this.element,{remove:function(t){if(t.target===i){this.destroy()}}});this.document=t(i.style?i.ownerDocument:i.document||i);this.window=t(this.document[0].defaultView||this.document[0].parentWindow)}this.options=t.widget.extend({},this.options,this._getCreateOptions(),n);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled)}this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy();t.each(this.classesElementLookup,function(t,n){e._removeClass(n,t)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i=e;var r;var a;var o;if(arguments.length===0){return t.widget.extend({},this.options)}if(typeof e==="string"){i={};r=e.split(".");e=r.shift();if(r.length){a=i[e]=t.widget.extend({},this.options[e]);for(o=0;o<r.length-1;o++){a[r[o]]=a[r[o]]||{};a=a[r[o]]}e=r.pop();if(arguments.length===1){return a[e]===undefined?null:a[e]}a[e]=n}else{if(arguments.length===1){return this.options[e]===undefined?null:this.options[e]}i[e]=n}}this._setOptions(i);return this},_setOptions:function(t){var e;for(e in t){this._setOption(e,t[e])}return this},_setOption:function(t,e){if(t==="classes"){this._setOptionClasses(e)}this.options[t]=e;if(t==="disabled"){this._setOptionDisabled(e)}return this},_setOptionClasses:function(e){var n,i,r;for(n in e){r=this.classesElementLookup[n];if(e[n]===this.options.classes[n]||!r||!r.length){continue}i=t(r.get());this._removeClass(r,n);i.addClass(this._classes({element:i,keys:n,classes:e,add:true}))}},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t);if(t){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus")}},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_classes:function(e){var n=[];var i=this;e=t.extend({element:this.element,classes:this.options.classes||{}},e);function r(r,a){var o,s;for(s=0;s<r.length;s++){o=i.classesElementLookup[r[s]]||t();if(e.add){o=t(t.unique(o.get().concat(e.element.get())))}else{o=t(o.not(e.element).get())}i.classesElementLookup[r[s]]=o;n.push(r[s]);if(a&&e.classes[r[s]]){n.push(e.classes[r[s]])}}}this._on(e.element,{remove:"_untrackClassesElement"});if(e.keys){r(e.keys.match(/\S+/g)||[],true)}if(e.extra){r(e.extra.match(/\S+/g)||[])}return n.join(" ")},_untrackClassesElement:function(e){var n=this;t.each(n.classesElementLookup,function(i,r){if(t.inArray(e.target,r)!==-1){n.classesElementLookup[i]=t(r.not(e.target).get())}})},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,false)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,true)},_toggleClass:function(t,e,n,i){i=typeof i==="boolean"?i:n;var r=typeof t==="string"||t===null,a={extra:r?e:n,keys:r?t:e,element:r?this.element:t,add:i};a.element.toggleClass(this._classes(a),i);return this},_on:function(e,n,i){var r;var a=this;if(typeof e!=="boolean"){i=n;n=e;e=false}if(!i){i=n;n=this.element;r=this.widget()}else{n=r=t(n);this.bindings=this.bindings.add(n)}t.each(i,function(i,o){function s(){if(!e&&(a.options.disabled===true||t(this).hasClass("ui-state-disabled"))){return}return(typeof o==="string"?a[o]:o).apply(a,arguments)}if(typeof o!=="string"){s.guid=o.guid=o.guid||s.guid||t.guid++}var l=i.match(/^([\w:-]*)\s*(.*)$/);var u=l[1]+a.eventNamespace;var c=l[2];if(c){r.on(u,c,s)}else{n.on(u,s)}})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;e.off(n).off(n);this.bindings=t(this.bindings.not(e).get());this.focusable=t(this.focusable.not(e).get());this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function n(){return(typeof t==="string"?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e);this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e);this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,n,i){var r,a;var o=this.options[e];i=i||{};n=t.Event(n);n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();n.target=this.element[0];a=n.originalEvent;if(a){for(r in a){if(!(r in n)){n[r]=a[r]}}}this.element.trigger(n,i);return!(t.isFunction(o)&&o.apply(this.element[0],[n].concat(i))===false||n.isDefaultPrevented())}};t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,a){if(typeof r==="string"){r={effect:r}}var o;var s=!r?e:r===true||typeof r==="number"?n:r.effect||n;r=r||{};if(typeof r==="number"){r={duration:r}}o=!t.isEmptyObject(r);r.complete=a;if(r.delay){i.delay(r.delay)}if(o&&t.effects&&t.effects.effect[s]){i[e](r)}else if(s!==e&&i[s]){i[s](r.duration,r.easing,a)}else{i.queue(function(n){t(this)[e]();if(a){a.call(i[0])}n()})}}});return t.widget})},function(t,e,n){"use strict";var i=n(42);var r=n(1);var a=n(50);var o=n(20);var s=n(28);var l=n(231);var u=n(32);var c=function t(e){this.geometry_=null;this.element_=document.createElement("div");this.element_.style.position="absolute";this.element_.className="ol-box "+e;this.map_=null;this.startPixel_=null;this.endPixel_=null};Object(r["d"])(c,l["a"]);c.prototype.disposeInternal=function(){this.setMap(null)};c.prototype.render_=function(){var t=this.startPixel_;var e=this.endPixel_;var n="px";var i=this.element_.style;i.left=Math.min(t[0],e[0])+n;i.top=Math.min(t[1],e[1])+n;i.width=Math.abs(e[0]-t[0])+n;i.height=Math.abs(e[1]-t[1])+n};c.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t;if(this.map_){this.map_.getOverlayContainer().appendChild(this.element_)}};c.prototype.setPixels=function(t,e){this.startPixel_=t;this.endPixel_=e;this.createOrUpdateGeometry();this.render_()};c.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_;var e=this.endPixel_;var n=[t,[t[0],e[1]],e,[e[0],t[1]]];var i=n.map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice();if(!this.geometry_){this.geometry_=new u["a"]([i])}else{this.geometry_.setCoordinates([i])}};c.prototype.getGeometry=function(){return this.geometry_};var f=c;var h={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"};var d=function t(e,n,r){i["a"].call(this,e);this.coordinate=n;this.mapBrowserEvent=r};Object(r["d"])(d,i["a"]);var p=function t(e){s["b"].call(this,{handleDownEvent:_,handleDragEvent:g,handleUpEvent:m});var n=e?e:{};this.box_=new f(n.className||"ol-dragbox");this.minArea_=n.minArea!==undefined?n.minArea:64;this.startPixel_=null;this.condition_=n.condition?n.condition:a["c"];this.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:v};Object(r["d"])(p,s["b"]);function v(t,e,n){var i=n[0]-e[0];var r=n[1]-e[1];return i*i+r*r>=this.minArea_}function g(t){if(!Object(a["e"])(t)){return}this.box_.setPixels(this.startPixel_,t.pixel);this.dispatchEvent(new d(h.BOXDRAG,t.coordinate,t))}p.prototype.getGeometry=function(){return this.box_.getGeometry()};p.prototype.onBoxEnd=o["c"];function m(t){if(!Object(a["e"])(t)){return true}this.box_.setMap(null);if(this.boxEndCondition_(t,this.startPixel_,t.pixel)){this.onBoxEnd(t);this.dispatchEvent(new d(h.BOXEND,t.coordinate,t))}return false}function _(t){if(!Object(a["e"])(t)){return false}if(Object(a["d"])(t)&&this.condition_(t)){this.startPixel_=t.pixel;this.box_.setMap(t.map);this.box_.setPixels(this.startPixel_,this.startPixel_);this.dispatchEvent(new d(h.BOXSTART,t.coordinate,t));return true}else{return false}}var y=e["a"]=p},function(t,e,n){"use strict";var i=n(2);var r=n(191);var a=n(79);var o=n(1);var s=n(14);var l=n(3);var u=n(20);var c=n(165);var f=n(156);var h=n(36);var d=n(21);var p=n(28);var v=n(61);var g=n(57);var m=function t(e){p["b"].call(this,{handleDownEvent:t.handleDownEvent_,handleEvent:t.handleEvent_,handleUpEvent:t.handleUpEvent_});this.downPx_=null;this.source_=e.source!==undefined?e.source:null;this.started_=false;this.sketchFeature_=null;this.sketchPoint_=null;this.squaredClickTolerance_=4;this.sketchLayer_=new v["a"]({source:new g["b"]({useSpatialIndex:false,wrapX:false}),style:e.style||r["a"].getDefaultDrawStyleFunction()});l["a"](this,"change:active",this.updateState_,this)};o["d"](m,p["b"]);m.handleDownEvent_=function(t){this.downPx_=t.pixel;return true};m.handleUpEvent_=function(t){var e=this.downPx_;var n=t.pixel;var i=e[0]-n[0];var r=e[1]-n[1];var a=i*i+r*r;var o=true;if(a<=this.squaredClickTolerance_){this.handlePointerMove_(t);if(!this.started_){this.startDrawing_(t)}else{this.finishDrawing_()}o=false}return o};m.handleEvent_=function(t){var e=true;if(t.type==="pointermove"){e=this.handlePointerMove_(t)}else if(t.type==="dblclick"){e=false}return p["c"].call(this,t)&&e};m.prototype.handlePointerMove_=function(t){if(this.started_){this.modifyDrawing_(t)}else{this.createOrUpdateSketchPoint_(t)}return true};m.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();if(this.sketchPoint_===null){this.sketchPoint_=new s["a"](new d["a"](e));this.updateSketchFeatures_()}else{var n=this.sketchPoint_.getGeometry();i["a"].assertInstanceof(n,d["a"]);n.setCoordinates(e)}};m.prototype.updateSketchFeatures_=function(){var t=[];if(this.sketchFeature_!==null){t.push(this.sketchFeature_)}if(this.sketchPoint_!==null){t.push(this.sketchPoint_)}var e=this.sketchLayer_.getSource();e.clear(true);e.addFeatures(t)};m.prototype.startDrawing_=function(t){var e=t.coordinate;this.started_=true;var n=new h["a"]([e.slice(),e.slice()]);var r=new c["a"](e,0);var o=new f["a"]([n,r]);i["a"].assert(o!==undefined);this.sketchFeature_=new s["a"];this.sketchFeature_.setGeometry(o);this.updateSketchFeatures_();var l=new a["a"]("drawstart",{feature:this.sketchFeature_});this.dispatchEvent(l)};m.prototype.modifyDrawing_=function(t){var e=t.coordinate;var n=i["a"].assertInstanceof(this.sketchFeature_.getGeometry(),f["a"]);var r=n.getGeometriesArray();var a=r[0];i["a"].assertInstanceof(a,h["a"]);var o=a.getCoordinates();var s=this.sketchPoint_.getGeometry();i["a"].assertInstanceof(s,d["a"]);s.setCoordinates(e);var l=o[o.length-1];l[0]=e[0];l[1]=e[1];i["a"].assertInstanceof(a,h["a"]);a.setCoordinates(o);var u=i["a"].assertInstanceof(r[1],c["a"]);u.setRadius(a.getLength());this.updateSketchFeatures_()};m.prototype.abortDrawing_=function(){this.started_=false;var t=this.sketchFeature_;if(t!==null){this.sketchFeature_=null;this.sketchPoint_=null;this.sketchLayer_.getSource().clear(true)}return t};m.prototype.shouldStopEvent=u["a"];m.prototype.updateState_=function(){var t=this.getMap();var e=this.getActive();if(t===null||!e){this.abortDrawing_()}this.sketchLayer_.setMap(e?t:null)};m.prototype.finishDrawing_=function(){var t=this.abortDrawing_();i["a"].assert(t!==null);if(this.source_!==null){this.source_.addFeature(t)}var e=new a["a"]("drawend",{feature:this.sketchFeature_});this.dispatchEvent(e)};m.prototype.setMap=function(t){p["b"].prototype.setMap.call(this,t);this.updateState_()};var _=m;var y=n(105);var b=n(166);var w=function t(e,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};y["a"].call(this,r);this.continueMsg;if(r.continueMsg!==undefined){this.continueMsg=r.continueMsg}else{this.continueMsg=document.createElement("span");this.continueMsg.textContent="Click to finish."}this.numberFormat=i["a"].assert(n);this.unitPrefixFormat=i["a"].assert(e)};o["d"](w,y["a"]);w.prototype.createDrawInteraction=function(t,e){return new _({source:e,style:t})};w.prototype.handleMeasure=function(t){var e=i["a"].assertInstanceof(this.sketchFeature.getGeometry(),f["a"]);var n=i["a"].assertInstanceof(e.getGeometries()[0],h["a"]);var r=w.getFormattedAzimutRadius(n,i["a"].assertInstanceof(this.getMap().getView().getProjection(),b["a"]),this.decimals,this.precision,this.unitPrefixFormat,this.numberFormat);t(r,n.getLastCoordinate())};w.getFormattedAzimutRadius=function(t,e,n,i,r,a){var o=w.getFormattedAzimut(t,n,a);o+=", "+y["a"].getFormattedLength(t,e,i,r);return o};w.getFormattedAzimut=function(t,e,n){var i=w.getAzimut(t);return n(i,e)+"°"};w.getAzimut=function(t){var e=t.getCoordinates();var n=e[1][0]-e[0][0];var i=e[1][1]-e[0][1];var r=Math.acos(i/Math.sqrt(n*n+i*i));var a=n>0?1:-1;return a*r*180/Math.PI%360};var x=e["a"]=w},function(t,e,n){"use strict";var i=n(2);var r=n(379);var a=angular.module("ngeoPopup",["ngSanitize"]);a.value("ngeoPopupTemplateUrl",function(t,e){var n=e["ngeoPopupTemplateurl"];return n!==undefined?n:"ngeo/message/popupcomponent"});a.run(["$templateCache",function(t){t.put("ngeo/message/popupcomponent",n(521))}]);a.directive_=function(t){return{restrict:"A",templateUrl:t,link:function t(e,n,i){n.addClass("popover");e.close=function(t){if(t){t.stopPropagation();t.preventDefault()}n.addClass("hidden")};e.$watch("open",function(t,e){n.css("display",t?"block":"none")})}}};a.directive_.$inject=["ngeoPopupTemplateUrl"];a.directive("ngeoPopup",a.directive_);var o=a;var s=function t(e,n,i,r){var a=this;this.scope=n.$new(true);this.scope.$watch(function(){return a.scope["open"]},function(t){if(!t&&a.autoDestroy_){a.timeout_(function(){a.destroy()})}});this.sce_=i;this.timeout_=r;this.element_=angular.element("<div ngeo-popup></div>");this.autoDestroy_=false;e(this.element_)(this.scope);angular.element(document.body).append(this.element_)};s.prototype.getOpen=function(){return this.scope["open"]};s.prototype.setOpen=function(t){this.scope["open"]=t};s.prototype.destroy=function(){this.scope.$destroy();this.element_.remove()};s.prototype.setTitle=function(t){var e=this.sce_.trustAsHtml(t);this.scope["title"]=e};s.prototype.setContent=function(t,e){this.scope["content"]=e?this.sce_.trustAsHtml(t):t};s.prototype.setUrl=function(t){var e=this.sce_.trustAsHtml('<iframe src="'+t+'" width="100%" height="100%"></iframe>');this.setContent(e)};s.prototype.setWidth=function(t){this.element_.width(t)};s.prototype.setHeight=function(t){this.element_.height(t)};s.prototype.setSize=function(t,e){this.setWidth(t);this.setHeight(e)};s.prototype.setAutoDestroy=function(t){this.autoDestroy_=t};s.prototype.addClass=function(t){this.element_.addClass(t)};s.prototype.open=function(t){if(t.url){this.setUrl(t.url)}else if(t.content){this.setContent(t.content)}else{i["a"].fail('ngeo.message.Popup options requirest "url" or "content".')}if(t.autoDestroy!==undefined){this.setAutoDestroy(t.autoDestroy)}if(t.cls!==undefined){this.addClass(t.cls)}if(t.height!==undefined){this.setHeight(t.height)}if(t.title!==undefined){this.setTitle(t.title)}if(t.width!==undefined){this.setWidth(t.width)}this.setOpen(true)};s.Factory=function(t,e,n,i){return function(){return new s(t,e,n,i)}};s.Factory.$inject=["$compile","$rootScope","$sce","$timeout"];s.module=angular.module("ngeoCreatePopup",[o.name]);s.module.factory("ngeoCreatePopup",s.Factory);var l=e["a"]=s},function(t,e,n){"use strict";var i=n(3);var r=function t(e,n){this.manager_=e;this.features_=null;this.index_=n};r.prototype.addFeature=function(t){this.manager_.addFeature(t,this.index_)};r.prototype.removeFeature=function(t){this.manager_.removeFeature(t,this.index_)};r.prototype.clear=function(){this.manager_.clear(this.index_)};r.prototype.setFeatures=function(t){var e=this;if(this.features_!==null){this.features_.clear();i["c"](this.features_,"add",this.handleFeatureAdd_,this);i["c"](this.features_,"remove",this.handleFeatureRemove_,this)}if(t!==null){t.forEach(function(t){e.addFeature(t)});i["a"](t,"add",this.handleFeatureAdd_,this);i["a"](t,"remove",this.handleFeatureRemove_,this)}this.features_=t};r.prototype.setStyle=function(t){this.manager_.setStyle(t,this.index_)};r.prototype.handleFeatureAdd_=function(t){var e=t.element;this.addFeature(e)};r.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature(e)};r.module=angular.module("ngeoFeatureOverlay",[]);e["a"]=r},function(t,e,n){"use strict";var i=n(1);var r=n(19);var a=n(39);var o=n(3);var s=n(42);var l=n(20);var u=n(7);var c=n(28);var f=n(243);var h={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"};var d=function t(e,n,i){s["a"].call(this,e);this.features=n;this.coordinate=i};Object(i["d"])(d,s["a"]);var p=function t(e){c["b"].call(this,{handleDownEvent:v,handleDragEvent:m,handleMoveEvent:_,handleUpEvent:g});var n=e?e:{};this.lastCoordinate_=null;this.features_=n.features!==undefined?n.features:null;var i=void 0;if(n.layers){if(typeof n.layers==="function"){i=n.layers}else{var r=n.layers;i=function t(e){return Object(u["f"])(r,e)}}}else{i=l["b"]}this.layerFilter_=i;this.hitTolerance_=n.hitTolerance?n.hitTolerance:0;this.lastFeature_=null;Object(o["a"])(this,Object(a["b"])(f["a"].ACTIVE),this.handleActiveChanged_,this)};Object(i["d"])(p,c["b"]);function v(t){this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map);if(!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate;_.call(this,t);var e=this.features_||new r["b"]([this.lastFeature_]);this.dispatchEvent(new d(h.TRANSLATESTART,e,t.coordinate));return true}return false}function g(t){if(this.lastCoordinate_){this.lastCoordinate_=null;_.call(this,t);var e=this.features_||new r["b"]([this.lastFeature_]);this.dispatchEvent(new d(h.TRANSLATEEND,e,t.coordinate));return true}return false}function m(t){if(this.lastCoordinate_){var e=t.coordinate;var n=e[0]-this.lastCoordinate_[0];var i=e[1]-this.lastCoordinate_[1];var a=this.features_||new r["b"]([this.lastFeature_]);a.forEach(function(t){var e=t.getGeometry();e.translate(n,i);t.setGeometry(e)});this.lastCoordinate_=e;this.dispatchEvent(new d(h.TRANSLATING,a,e))}}function _(t){var e=t.map.getViewport();if(this.featuresAtPixel_(t.pixel,t.map)){e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing");e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")}else{e.classList.remove("ol-grab","ol-grabbing")}}p.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||Object(u["f"])(this.features_.getArray(),t)){return t}}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})};p.prototype.getHitTolerance=function(){return this.hitTolerance_};p.prototype.setHitTolerance=function(t){this.hitTolerance_=t};p.prototype.setMap=function(t){var e=this.getMap();c["b"].prototype.setMap.call(this,t);this.updateState_(e)};p.prototype.handleActiveChanged_=function(){this.updateState_(null)};p.prototype.updateState_=function(t){var e=this.getMap();var n=this.getActive();if(!e||!n){e=e||t;if(e){var i=e.getViewport();i.classList.remove("ol-grab","ol-grabbing")}}};e["a"]=p},function(t,e,n){"use strict";n.d(e,"a",function(){return i});function i(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}},function(t,e,n){"use strict";e["a"]={ACTIVE:"active"}},function(t,e,n){"use strict";var i=n(1);var r=n(4);var a=n(77);var o=n(67);var s=n(5);var l=n(81);var u=n(9);var c=n(10);var f=n(0);var h=o["a"]+" http://schemas.opengis.net/gml/2.1.2/feature.xsd";var d=function t(e){var n=e?e:{};o["b"].call(this,n);this.FEATURE_COLLECTION_PARSERS[o["a"]]["featureMember"]=Object(f["j"])(o["b"].prototype.readFeaturesInternal);this.schemaLocation=n.schemaLocation?n.schemaLocation:h};Object(i["d"])(d,o["b"]);d.prototype.readFlatCoordinates_=function(t,e){var n=Object(f["e"])(t,false).replace(/^\s*|\s*$/g,"");var i=e[0];var r=i["srsName"];var a="enu";if(r){var o=Object(c["h"])(r);if(o){a=o.getAxisOrientation()}}var s=n.trim().split(/\s+/);var l=[];for(var u=0,h=s.length;u<h;u++){var d=s[u].split(/,+/);var p=parseFloat(d[0]);var v=parseFloat(d[1]);var g=d.length===3?parseFloat(d[2]):0;if(a.substr(0,2)==="en"){l.push(p,v,g)}else{l.push(v,p,g)}}return l};d.prototype.readBox_=function(t,e){var n=Object(f["u"])([null],this.BOX_PARSERS_,t,e,this);return Object(r["k"])(n[1][0],n[1][1],n[1][3],n[1][4])};d.prototype.innerBoundaryIsParser_=function(t,e){var n=Object(f["u"])(undefined,this.RING_PARSERS,t,e,this);if(n){var i=e[e.length-1];i.push(n)}};d.prototype.outerBoundaryIsParser_=function(t,e){var n=Object(f["u"])(undefined,this.RING_PARSERS,t,e,this);if(n){var i=e[e.length-1];i[0]=n}};d.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,n){var i=e[e.length-1];var r=i["multiSurface"];var a=i["surface"];var o=i["multiCurve"];var s=void 0;if(!Array.isArray(t)){s=t.getType();if(s==="MultiPolygon"&&r===true){s="MultiSurface"}else if(s==="Polygon"&&a===true){s="Surface"}else if(s==="MultiLineString"&&o===true){s="MultiCurve"}}else{s="Envelope"}return Object(f["d"])("http://www.opengis.net/gml",s)};d.prototype.writeFeatureElement=function(t,e,n){var i=e.getId();if(i){t.setAttribute("fid",i)}var r=n[n.length-1];var a=r["featureNS"];var o=e.getGeometryName();if(!r.serializers){r.serializers={};r.serializers[a]={}}var c=e.getProperties();var h=[];var d=[];for(var p in c){var v=c[p];if(v!==null){h.push(p);d.push(v);if(p==o||v instanceof l["a"]){if(!(p in r.serializers[a])){r.serializers[a][p]=Object(f["l"])(this.writeGeometryElement,this)}}else{if(!(p in r.serializers[a])){r.serializers[a][p]=Object(f["l"])(s["n"])}}}}var g=Object(u["a"])({},r);g.node=t;Object(f["v"])(g,r.serializers,Object(f["q"])(undefined,a),d,n,h)};d.prototype.writeCurveOrLineString_=function(t,e,n){var i=n[n.length-1];var r=i["srsName"];if(t.nodeName!=="LineStringSegment"&&r){t.setAttribute("srsName",r)}if(t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){var a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);this.writeCoordinates_(a,e,n)}else if(t.nodeName==="Curve"){var o=Object(f["d"])(t.namespaceURI,"segments");t.appendChild(o);this.writeCurveSegments_(o,e,n)}};d.prototype.writeLineStringOrCurveMember_=function(t,e,n){var i=this.GEOMETRY_NODE_FACTORY_(e,n);if(i){t.appendChild(i);this.writeCurveOrLineString_(i,e,n)}};d.prototype.writeMultiCurveOrLineString_=function(t,e,n){var i=n[n.length-1];var r=i["hasZ"];var a=i["srsName"];var o=i["curve"];if(a){t.setAttribute("srsName",a)}var s=e.getLineStrings();Object(f["v"])({node:t,hasZ:r,srsName:a,curve:o},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,n,undefined,this)};d.prototype.writeGeometryElement=function(t,e,n){var i=n[n.length-1];var r=Object(u["a"])({},i);r.node=t;var o=void 0;if(Array.isArray(e)){if(i.dataProjection){o=Object(c["o"])(e,i.featureProjection,i.dataProjection)}else{o=e}}else{o=Object(a["b"])(e,true,i)}Object(f["v"])(r,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[o],n,undefined,this)};d.prototype.createCoordinatesNode_=function(t){var e=Object(f["d"])(t,"coordinates");e.setAttribute("decimal",".");e.setAttribute("cs",",");e.setAttribute("ts"," ");return e};d.prototype.writeCoordinates_=function(t,e,n){var i=n[n.length-1];var r=i["hasZ"];var a=i["srsName"];var o=e.getCoordinates();var l=o.length;var u=new Array(l);for(var c=0;c<l;++c){var f=o[c];u[c]=this.getCoords_(f,a,r)}Object(s["n"])(t,u.join(" "))};d.prototype.writeCurveSegments_=function(t,e,n){var i=Object(f["d"])(t.namespaceURI,"LineStringSegment");t.appendChild(i);this.writeCurveOrLineString_(i,e,n)};d.prototype.writeSurfaceOrPolygon_=function(t,e,n){var i=n[n.length-1];var r=i["hasZ"];var a=i["srsName"];if(t.nodeName!=="PolygonPatch"&&a){t.setAttribute("srsName",a)}if(t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){var o=e.getLinearRings();Object(f["v"])({node:t,hasZ:r,srsName:a},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,o,n,undefined,this)}else if(t.nodeName==="Surface"){var s=Object(f["d"])(t.namespaceURI,"patches");t.appendChild(s);this.writeSurfacePatches_(s,e,n)}};d.prototype.RING_NODE_FACTORY_=function(t,e,n){var i=e[e.length-1];var r=i.node;var a=i["exteriorWritten"];if(a===undefined){i["exteriorWritten"]=true}return Object(f["d"])(r.namespaceURI,a!==undefined?"innerBoundaryIs":"outerBoundaryIs")};d.prototype.writeSurfacePatches_=function(t,e,n){var i=Object(f["d"])(t.namespaceURI,"PolygonPatch");t.appendChild(i);this.writeSurfaceOrPolygon_(i,e,n)};d.prototype.writeRing_=function(t,e,n){var i=Object(f["d"])(t.namespaceURI,"LinearRing");t.appendChild(i);this.writeLinearRing_(i,e,n)};d.prototype.getCoords_=function(t,e,n){var i="enu";if(e){i=Object(c["h"])(e).getAxisOrientation()}var r=i.substr(0,2)==="en"?t[0]+","+t[1]:t[1]+","+t[0];if(n){var a=t[2]||0;r+=","+a}return r};d.prototype.writePoint_=function(t,e,n){var i=n[n.length-1];var r=i["hasZ"];var a=i["srsName"];if(a){t.setAttribute("srsName",a)}var o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o);var l=e.getCoordinates();var u=this.getCoords_(l,a,r);Object(s["n"])(o,u)};d.prototype.writeMultiPoint_=function(t,e,n){var i=n[n.length-1];var r=i["hasZ"];var a=i["srsName"];if(a){t.setAttribute("srsName",a)}var o=e.getPoints();Object(f["v"])({node:t,hasZ:r,srsName:a},this.POINTMEMBER_SERIALIZERS_,Object(f["q"])("pointMember"),o,n,undefined,this)};d.prototype.writePointMember_=function(t,e,n){var i=Object(f["d"])(t.namespaceURI,"Point");t.appendChild(i);this.writePoint_(i,e,n)};d.prototype.writeLinearRing_=function(t,e,n){var i=n[n.length-1];var r=i["srsName"];if(r){t.setAttribute("srsName",r)}var a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);this.writeCoordinates_(a,e,n)};d.prototype.writeMultiSurfaceOrPolygon_=function(t,e,n){var i=n[n.length-1];var r=i["hasZ"];var a=i["srsName"];var o=i["surface"];if(a){t.setAttribute("srsName",a)}var s=e.getPolygons();Object(f["v"])({node:t,hasZ:r,srsName:a,surface:o},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,n,undefined,this)};d.prototype.writeSurfaceOrPolygonMember_=function(t,e,n){var i=this.GEOMETRY_NODE_FACTORY_(e,n);if(i){t.appendChild(i);this.writeSurfaceOrPolygon_(i,e,n)}};d.prototype.writeEnvelope=function(t,e,n){var i=n[n.length-1];var r=i["srsName"];if(r){t.setAttribute("srsName",r)}var a=["lowerCorner","upperCorner"];var o=[e[0]+" "+e[1],e[2]+" "+e[3]];Object(f["v"])({node:t},this.ENVELOPE_SERIALIZERS_,f["b"],o,n,a,this)};var p={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};d.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,n){var i=e[e.length-1].node;return Object(f["d"])("http://www.opengis.net/gml",p[i.nodeName])};d.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={"http://www.opengis.net/gml":{coordinates:Object(f["o"])(d.prototype.readFlatCoordinates_)}};d.prototype.FLAT_LINEAR_RINGS_PARSERS_={"http://www.opengis.net/gml":{innerBoundaryIs:d.prototype.innerBoundaryIsParser_,outerBoundaryIs:d.prototype.outerBoundaryIsParser_}};d.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Object(f["j"])(d.prototype.readFlatCoordinates_)}};d.prototype.GEOMETRY_PARSERS_={"http://www.opengis.net/gml":{Point:Object(f["o"])(o["b"].prototype.readPoint),MultiPoint:Object(f["o"])(o["b"].prototype.readMultiPoint),LineString:Object(f["o"])(o["b"].prototype.readLineString),MultiLineString:Object(f["o"])(o["b"].prototype.readMultiLineString),LinearRing:Object(f["o"])(o["b"].prototype.readLinearRing),Polygon:Object(f["o"])(o["b"].prototype.readPolygon),MultiPolygon:Object(f["o"])(o["b"].prototype.readMultiPolygon),Box:Object(f["o"])(d.prototype.readBox_)}};d.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:Object(f["l"])(d.prototype.writeCurveOrLineString_),MultiCurve:Object(f["l"])(d.prototype.writeMultiCurveOrLineString_),Point:Object(f["l"])(d.prototype.writePoint_),MultiPoint:Object(f["l"])(d.prototype.writeMultiPoint_),LineString:Object(f["l"])(d.prototype.writeCurveOrLineString_),MultiLineString:Object(f["l"])(d.prototype.writeMultiCurveOrLineString_),LinearRing:Object(f["l"])(d.prototype.writeLinearRing_),Polygon:Object(f["l"])(d.prototype.writeSurfaceOrPolygon_),MultiPolygon:Object(f["l"])(d.prototype.writeMultiSurfaceOrPolygon_),Surface:Object(f["l"])(d.prototype.writeSurfaceOrPolygon_),MultiSurface:Object(f["l"])(d.prototype.writeMultiSurfaceOrPolygon_),Envelope:Object(f["l"])(d.prototype.writeEnvelope)}};d.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:Object(f["l"])(d.prototype.writeLineStringOrCurveMember_),curveMember:Object(f["l"])(d.prototype.writeLineStringOrCurveMember_)}};d.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:Object(f["l"])(d.prototype.writeRing_),innerBoundaryIs:Object(f["l"])(d.prototype.writeRing_)}};d.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:Object(f["l"])(d.prototype.writePointMember_)}};d.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:Object(f["l"])(d.prototype.writeSurfaceOrPolygonMember_),polygonMember:Object(f["l"])(d.prototype.writeSurfaceOrPolygonMember_)}};d.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:Object(f["l"])(s["n"]),upperCorner:Object(f["l"])(s["n"])}};e["a"]=d},function(t,e,n){"use strict";var i=n(2);var r=n(19);var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function t(e){o(this,t);this.dataSourcesCollection_=new r["b"](e.dataSources);this.title_=e.title}t.prototype.destroy=function t(){this.dataSourcesCollection_.clear()};t.prototype.getDataSourceState=function e(n){return n.visible?t.VisibilityState.ON:t.VisibilityState.OFF};t.prototype.addDataSource=function t(e){this.dataSourcesCollection_.push(e)};t.prototype.removeDataSource=function t(e){this.dataSourcesCollection_.remove(e)};t.prototype.toggleVisibilityState=function e(){var n=this.visibilityState!==t.VisibilityState.ON;for(var i=this.dataSources,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.visible!==n){s.visible=n}}};a(t,[{key:"dataSources",get:function t(){return this.dataSourcesCollection_.getArray()}},{key:"dataSourcesCollection",get:function t(){return this.dataSourcesCollection_}},{key:"title",get:function t(){return this.title_}},{key:"visibilityState",get:function e(){var n=void 0;for(var r=this.dataSources,a=Array.isArray(r),o=0,r=a?r:r[Symbol.iterator]();;){var s;if(a){if(o>=r.length)break;s=r[o++]}else{o=r.next();if(o.done)break;s=o.value}var l=s;if(n===undefined){n=this.getDataSourceState(l)}else{var u=this.getDataSourceState(l);if(u!==n){n=t.VisibilityState.INDETERMINATE}}if(n===t.VisibilityState.INDETERMINATE){break}}i["a"].assertString(n);return n}}]);return t}();s.VisibilityState={INDETERMINATE:"indeterminate",OFF:"off",ON:"on"};e["a"]=s},function(t,e,n){"use strict";var i=n(1);var r=n(4);var a=n(25);var o=n(8);var s=n(69);var l=n(267);var u=n(145);var c=n(134);var f=n(138);var h=n(162);var d=function t(e,n){s["a"].call(this);this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(e,n)};Object(i["d"])(d,s["a"]);d.prototype.clone=function(){var t=new d(null);t.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return t};d.prototype.closestPointXY=function(t,e,n,i){if(i<Object(r["e"])(this.getExtent(),t,e)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(u["e"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(u["d"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,true,t,e,n,i)};d.prototype.getArea=function(){return Object(l["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};d.prototype.getCoordinates=function(){return Object(f["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};d.prototype.getSimplifiedGeometryInternal=function(t){var e=[];e.length=Object(h["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);var n=new d(null);n.setFlatCoordinates(a["a"].XY,e);return n};d.prototype.getType=function(){return o["a"].LINEAR_RING};d.prototype.intersectsExtent=function(t){};d.prototype.setCoordinates=function(t,e){if(!t){this.setFlatCoordinates(a["a"].XY,null)}else{this.setLayout(e,t,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=Object(c["b"])(this.flatCoordinates,0,t,this.stride);this.changed()}};d.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e);this.changed()};e["a"]=d},function(t,e,n){"use strict";n.d(e,"a",function(){return i});n.d(e,"b",function(){return r});var i=42;var r=256},function(t,e,n){"use strict";var i=n(327);var r=n(257);var a=n(304);var o=n(24);var s=n(120);var l=n(63);var u=n(94);var c=n(1);var f=angular.module("gmfObjecteditingToolsComponent",[i["a"].name,r["a"].name,a["a"].name,s["a"].name,u["a"].module.name]);f.run(["$templateCache",function(t){t.put("gmf/objectediting/toolsComponent",n(487))}]);f.value("gmfObjectEditingToolsOptions",{});f.directive_=function(){return{controller:"GmfObjecteditingtoolsController as oetCtrl",scope:{active:"=gmfObjecteditingtoolsActive",copyFromActive:"=gmfObjecteditingtoolsCopyfromactive",deleteFromActive:"=gmfObjecteditingtoolsDeletefromactive",feature:"<gmfObjecteditingtoolsFeature",geomType:"<gmfObjecteditingtoolsGeomtype",map:"<gmfObjecteditingtoolsMap",process:"=gmfObjecteditingtoolsProcess",queryableLayerInfo:"=gmfObjecteditingtoolsQueryablelayerinfo",requiresLayer:"=gmfObjecteditingtoolsRequireslayer",sketchFeatures:"<gmfObjecteditingtoolsSketchfeatures"},bindToController:true,templateUrl:"gmf/objectediting/toolsComponent"}};f.directive("gmfObjecteditingtools",f.directive_);f.Controller_=function(t,e,n){this.active;this.copyFromActive;this.deleteFromActive;this.feature;this.geomType;this.map;this.queryableLayerInfo;this.process;this.requiresLayer;this.sketchFeatures;this.scope_=e;this.ngeoToolActivateMgr_=n;this.geomTypePolygon=o["a"].POLYGON;this.toolActiveNames_=[];this.drawActive=false;this.registerTool_("drawActive",f.ProcessType.ADD);this.eraseActive=false;this.registerTool_("eraseActive",f.ProcessType.DELETE);this.drawTriangleActive=false;this.triangleAngle=Math.PI/180*90;var i=t.get("gmfObjectEditingToolsOptions");this.triangleRadius=i.regularPolygonRadius!==undefined?i.regularPolygonRadius:100;this.registerTool_("drawTriangleActive",f.ProcessType.ADD);this.registerTool_("copyFromActive",f.ProcessType.ADD,true);this.registerTool_("deleteFromActive",f.ProcessType.DELETE,true);e.$on("$destroy",this.handleDestroy_.bind(this))};f.Controller_.$inject=["$injector","$scope","ngeoToolActivateMgr"];f.Controller_.prototype.$onInit=function(){var t=this;this.scope_.$watch(function(){return t.active},function(e,n){if(!t.active){t.requiresLayer=false;for(var i=0,r=t.toolActiveNames_.length;i<r;i++){t[t.toolActiveNames_[i]]=false}}})};f.Controller_.prototype.registerTool_=function(t,e,n){var i=this;var r=n===true;this.scope_.$watch(function(){return i[t]},this.handleToolActiveChange_.bind(this,e,r));var a=f.Controller_.NAMESPACE_+"-"+c["c"](this);var o=new l["a"](this,t);this.ngeoToolActivateMgr_.registerTool(a,o,false);this.toolActiveNames_.push(t)};f.Controller_.prototype.handleToolActiveChange_=function(t,e,n){if(n){this.process=t;this.requiresLayer=e}var i=false;for(var r=0,a=this.toolActiveNames_.length;r<a;r++){i=this[this.toolActiveNames_[r]];if(i){break}}this.active=i};f.Controller_.prototype.handleDestroy_=function(){};f.controller("GmfObjecteditingtoolsController",f.Controller_);f.Controller_.NAMESPACE_="oet";f.ProcessType={ADD:"add",DELETE:"delete"};e["a"]=f},function(t,e,n){(function(t,n){true?n(e):undefined})(this,function(t){"use strict";var e=0,n=0,i=0,r=1e3,a,o,s=0,l=0,u=0,c=typeof performance==="object"&&performance.now?performance:Date,f=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function h(){return l||(f(d),l=c.now()+u)}function d(){l=0}function p(){this._call=this._time=this._next=null}p.prototype=v.prototype={constructor:p,restart:function(t,e,n){if(typeof t!=="function")throw new TypeError("callback is not a function");n=(n==null?h():+n)+(e==null?0:+e);if(!this._next&&o!==this){if(o)o._next=this;else a=this;o=this}this._call=t;this._time=n;b()},stop:function(){if(this._call){this._call=null;this._time=Infinity;b()}}};function v(t,e,n){var i=new p;i.restart(t,e,n);return i}function g(){h();++e;var t=a,n;while(t){if((n=l-t._time)>=0)t._call.call(null,n);t=t._next}--e}function m(){l=(s=c.now())+u;e=n=0;try{g()}finally{e=0;y();l=0}}function _(){var t=c.now(),e=t-s;if(e>r)u-=e,s=t}function y(){var t,e=a,n,i=Infinity;while(e){if(e._call){if(i>e._time)i=e._time;t=e,e=e._next}else{n=e._next,e._next=null;e=t?t._next=n:a=n}}o=t;b(i)}function b(t){if(e)return;if(n)n=clearTimeout(n);var a=t-l;if(a>24){if(t<Infinity)n=setTimeout(m,t-c.now()-u);if(i)i=clearInterval(i)}else{if(!i)s=c.now(),i=setInterval(_,r);e=1,f(m)}}function w(t,e,n){var i=new p;e=e==null?0:+e;i.restart(function(n){i.stop();t(n+e)},e,n);return i}function x(t,e,n){var i=new p,r=e;if(e==null)return i.restart(t,e,n),i;e=+e,n=n==null?h():+n;i.restart(function a(o){o+=r;i.restart(a,r+=e,n);t(o)},e,n);return i}t.interval=x;t.now=h;t.timeout=w;t.timer=v;t.timerFlush=g;Object.defineProperty(t,"__esModule",{value:true})})},function(t,e,n){"use strict";n.d(e,"a",function(){return i});function i(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=function t(e,n,i,r){this.minX=e;this.maxX=n;this.minY=i;this.maxY=r};function r(t,e,n,r,a){if(a!==undefined){a.minX=t;a.maxX=e;a.minY=n;a.maxY=r;return a}else{return new i(t,e,n,r)}}i.prototype.contains=function(t){return this.containsXY(t[1],t[2])};i.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY};i.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY};i.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY};i.prototype.extend=function(t){if(t.minX<this.minX){this.minX=t.minX}if(t.maxX>this.maxX){this.maxX=t.maxX}if(t.minY<this.minY){this.minY=t.minY}if(t.maxY>this.maxY){this.maxY=t.maxY}};i.prototype.getHeight=function(){return this.maxY-this.minY+1};i.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]};i.prototype.getWidth=function(){return this.maxX-this.minX+1};i.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};e["b"]=i},function(t,e,n){"use strict";e["a"]={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e,n){"use strict";var i=n(1);var r=n(3);var a=n(178);var o=n(93);var s=n(55);var l=n(2);var u=n(95);var c=n(87);var f=n(384);var h=n(239);var d=n(615);var p=function t(e,n,i){this.sce_=e;this.gettextCatalog_=n;this.createPopup_=i;c["a"].call(this);var r=angular.element('<div class="ngeo-disclaimer"></div>');angular.element(document.body).append(r);this.container_=r;this.messages_={}};p.$inject=["$sce","gettextCatalog","ngeoCreatePopup"];p.$inject=["$sce","gettextCatalog","ngeoCreatePopup"];i["d"](p,c["a"]);p.prototype.alert=function(t){this.show(t)};p.prototype.close=function(t){var e=this.getMessageObjects(t);e.forEach(this.closeMessage_,this)};p.prototype.showMessage=function(t){var e=this;var n=this.gettextCatalog_;var i=t.type;l["a"].assertString(i,"Type should be set.");var r=this.getMessageUid_(t);if(this.messages_[r]!==undefined){return}var a=t.popup===true;if(a){var o=this.createPopup_();var s=this.sce_.trustAsHtml(t.msg);o.open({autoDestroy:true,content:s,title:"&nbsp;"});o.scope.$watch("open",function(n,i){if(!n){e.closeMessage_(t)}});this.messages_[r]=o}else{var u=["alert","fade","alert-dismissible"];switch(i){case c["a"].Type.ERROR:u.push("alert-danger");break;case c["a"].Type.INFORMATION:u.push("alert-info");break;case c["a"].Type.SUCCESS:u.push("alert-success");break;case c["a"].Type.WARNING:u.push("alert-warning");break;default:break}var f=angular.element('<div role="alert" class="'+u.join(" ")+'"></div>');var h=angular.element('<button type="button" class="close" data-dismiss="alert" aria-label="'+n.getString("Close")+'"><span aria-hidden="true" class="fa fa-times"></span></button>');var d=angular.element("<span />").html(t.msg);f.append(h).append(d);var p=void 0;if(t.target){p=angular.element(t.target)}else{p=this.container_}p.append(f);f.addClass("in");f.on("closed.bs.alert",function(){e.closeMessage_(t)});this.messages_[r]=f}};p.prototype.getMessageUid_=function(t){return t.msg+"-"+t.type};p.prototype.closeMessage_=function(t){var e=this.getMessageUid_(t);var n=this.messages_[e];if(n===undefined){return}if(n instanceof h["a"]){if(n.getOpen()){n.setOpen(false)}}else{if(n.hasClass("in")){n.alert("close")}}delete this.messages_[e]};p.module=angular.module("ngeoDisclaimer",[h["a"].module.name]);p.module.service("ngeoDisclaimer",p);var v=p;var g=n(148);var m=n(379);var _=angular.module("gmfDisclaimer",["ngSanitize",u["a"].module.name,v.module.name,g["a"].module.name]);_.Controller_=function(t,e,n,i,r,a,o,s,l){this.map;this.external;this.popup;this.visibility=false;this.msg;this.msgs_=[];this.sce_=n;this.timeout_=i;this.gettextCatalog_=r;this.element_=t;this.createPopup_=a;this.disclaimer_=o;this.eventHelper_=s;this.ngeoLayerHelper_=l;this.dataLayerGroup_=null};_.Controller_.$inject=["$element","$scope","$sce","$timeout","gettextCatalog","ngeoCreatePopup","ngeoDisclaimer","ngeoEventHelper","ngeoLayerHelper"];_.Controller_.prototype.$onInit=function(){this.dataLayerGroup_=this.ngeoLayerHelper_.getGroupFromMap(this.map,s["a"].DATALAYERGROUP_NAME);this.registerLayer_(this.dataLayerGroup_)};_.Controller_.prototype.handleLayersAdd_=function(t){var e=this;this.timeout_(function(){var n=t.element;l["a"].assertInstanceof(n,a["a"]);e.registerLayer_(n)})};_.Controller_.prototype.handleLayersRemove_=function(t){var e=t.element;l["a"].assertInstanceof(e,a["a"]);this.unregisterLayer_(e)};_.Controller_.prototype.registerLayer_=function(t){var e=this;var n=i["c"](t);if(t instanceof o["a"]){this.eventHelper_.addListenerKey(n,r["a"](t.getLayers(),"add",this.handleLayersAdd_,this));this.eventHelper_.addListenerKey(n,r["a"](t.getLayers(),"remove",this.handleLayersRemove_,this));t.getLayers().forEach(function(t){e.registerLayer_(t)})}else{var a=t.get("disclaimers");if(a&&Array.isArray(a)){a.forEach(function(t){e.showDisclaimerMessage_(t)})}}};_.Controller_.prototype.unregisterLayer_=function(t){var e=this;var n=i["c"](t);if(t instanceof o["a"]){this.eventHelper_.clearListenerKey(n);t.getLayers().forEach(function(t){return e.unregisterLayer_(t)})}else{var r=t.get("disclaimers");if(r&&Array.isArray(r)){r.forEach(function(t){e.closeDisclaimerMessage_(t)})}}};_.Controller_.prototype.$onDestroy=function(){this.unregisterLayer_(this.dataLayerGroup_)};_.Controller_.prototype.showDisclaimerMessage_=function(t){t=this.gettextCatalog_.getString(t);if(this.external){if(this.msgs_.indexOf(t)<0){this.msgs_.push(t)}this.msg=""+this.sce_.trustAsHtml(this.msgs_.join("<br />"));this.visibility=true}else{this.disclaimer_.alert({popup:this.popup,msg:t,target:this.element_,type:c["a"].Type.WARNING})}};_.Controller_.prototype.closeDisclaimerMessage_=function(t){t=this.gettextCatalog_.getString(t);if(this.external){this.visibility=false;this.msgs_.length=0;this.msg=""}else{this.disclaimer_.close({popup:this.popup,msg:t,target:this.element_,type:c["a"].Type.WARNING})}};_.component_={controller:_.Controller_,bindings:{popup:"<?gmfDisclaimerPopup",map:"=gmfDisclaimerMap",external:"<?gmfDisclaimerExternal",visibility:"=?gmfDisclaimerExternalVisibility",msg:"=?gmfDisclaimerExternalMsg"}};_.component("gmfDisclaimer",_.component_);var y=_;var b=angular.module("gmfDisclaimerModule",[y.name]);var w=e["a"]=b},function(t,e,n){"use strict";var i=n(141);var r=n(250);function a(t){if(Object.getOwnPropertyNames){return Object.getOwnPropertyNames(t).length===0}else{var e;for(e in t){if(t.hasOwnProperty(e)){return false}}return true}}var o=n(98);var s=n(164);var l=n(242);function u(t,e){var n=[],i;for(i=0;i<t.length;++i){n.push(e(t[i],i))}return n}var c=n(152);var f=n(90);var h=n(112);var d=n(18);var p=n(96);var v=n(17);var g=n(48);function m(t){var e;var n=t._a;if(n&&Object(g["a"])(t).overflow===-2){e=n[v["e"]]<0||n[v["e"]]>11?v["e"]:n[v["a"]]<1||n[v["a"]]>Object(p["a"])(n[v["i"]],n[v["e"]])?v["a"]:n[v["b"]]<0||n[v["b"]]>24||n[v["b"]]===24&&(n[v["d"]]!==0||n[v["f"]]!==0||n[v["c"]]!==0)?v["b"]:n[v["d"]]<0||n[v["d"]]>59?v["d"]:n[v["f"]]<0||n[v["f"]]>59?v["f"]:n[v["c"]]<0||n[v["c"]]>999?v["c"]:-1;if(Object(g["a"])(t)._overflowDayOfYear&&(e<v["i"]||e>v["a"])){e=v["a"]}if(Object(g["a"])(t)._overflowWeeks&&e===-1){e=v["g"]}if(Object(g["a"])(t)._overflowWeekday&&e===-1){e=v["h"]}Object(g["a"])(t).overflow=e}return t}var _=n(161);var y=n(130);var b=n(150);var w=n(66);function x(t,e,n){if(t!=null){return t}if(e!=null){return e}return n}function S(t){var e=new Date(d["a"].now());if(t._useUTC){return[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]}return[e.getFullYear(),e.getMonth(),e.getDate()]}function C(t){var e,n,i=[],r,a,o;if(t._d){return}r=S(t);if(t._w&&t._a[v["a"]]==null&&t._a[v["e"]]==null){E(t)}if(t._dayOfYear!=null){o=x(t._a[v["i"]],r[v["i"]]);if(t._dayOfYear>Object(y["a"])(o)||t._dayOfYear===0){Object(g["a"])(t)._overflowDayOfYear=true}n=Object(_["b"])(o,0,t._dayOfYear);t._a[v["e"]]=n.getUTCMonth();t._a[v["a"]]=n.getUTCDate()}for(e=0;e<3&&t._a[e]==null;++e){t._a[e]=i[e]=r[e]}for(;e<7;e++){t._a[e]=i[e]=t._a[e]==null?e===2?1:0:t._a[e]}if(t._a[v["b"]]===24&&t._a[v["d"]]===0&&t._a[v["f"]]===0&&t._a[v["c"]]===0){t._nextDay=true;t._a[v["b"]]=0}t._d=(t._useUTC?_["b"]:_["a"]).apply(null,i);a=t._useUTC?t._d.getUTCDay():t._d.getDay();if(t._tzm!=null){t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm)}if(t._nextDay){t._a[v["b"]]=24}if(t._w&&typeof t._w.d!=="undefined"&&t._w.d!==a){Object(g["a"])(t).weekdayMismatch=true}}function E(t){var e,n,i,r,a,o,s,l;e=t._w;if(e.GG!=null||e.W!=null||e.E!=null){a=1;o=4;n=x(e.GG,t._a[v["i"]],Object(b["b"])(Object(w["a"])(),1,4).year);i=x(e.W,1);r=x(e.E,1);if(r<1||r>7){l=true}}else{a=t._locale._week.dow;o=t._locale._week.doy;var u=Object(b["b"])(Object(w["a"])(),a,o);n=x(e.gg,t._a[v["i"]],u.year);i=x(e.w,u.week);if(e.d!=null){r=e.d;if(r<0||r>6){l=true}}else if(e.e!=null){r=e.e+a;if(e.e<0||e.e>6){l=true}}else{r=a}}if(i<1||i>Object(b["c"])(n,a,o)){Object(g["a"])(t)._overflowWeeks=true}else if(l!=null){Object(g["a"])(t)._overflowWeekday=true}else{s=Object(b["a"])(n,i,r,a,o);t._a[v["i"]]=s.year;t._dayOfYear=s.dayOfYear}}var O=n(97);var T=n(116);var M=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var I=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var R=/Z|[+-]\d\d(?::?\d\d)?/;var N=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var A=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var L=/^\/?Date\((\-?\d+)/i;function P(t){var e,n,i=t._i,r=M.exec(i)||I.exec(i),a,o,s,l;if(r){Object(g["a"])(t).iso=true;for(e=0,n=N.length;e<n;e++){if(N[e][1].exec(r[1])){o=N[e][0];a=N[e][2]!==false;break}}if(o==null){t._isValid=false;return}if(r[3]){for(e=0,n=A.length;e<n;e++){if(A[e][1].exec(r[3])){s=(r[2]||" ")+A[e][0];break}}if(s==null){t._isValid=false;return}}if(!a&&s!=null){t._isValid=false;return}if(r[4]){if(R.exec(r[4])){l="Z"}else{t._isValid=false;return}}t._f=o+(s||"")+(l||"");W(t)}else{t._isValid=false}}var D=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function j(t,e,n,i,r,a){var o=[k(t),p["c"].indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(r,10)];if(a){o.push(parseInt(a,10))}return o}function k(t){var e=parseInt(t,10);if(e<=49){return 2e3+e}else if(e<=999){return 1900+e}return e}function F(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function $(t,e,n){if(t){var i=T["c"].indexOf(t),r=new Date(e[0],e[1],e[2]).getDay();if(i!==r){Object(g["a"])(n).weekdayMismatch=true;n._isValid=false;return false}}return true}var G={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function U(t,e,n){if(t){return G[t]}else if(e){return 0}else{var i=parseInt(n,10);var r=i%100,a=(i-r)/100;return a*60+r}}function Y(t){var e=D.exec(F(t._i));if(e){var n=j(e[4],e[3],e[2],e[5],e[6],e[7]);if(!$(e[1],n,t)){return}t._a=n;t._tzm=U(e[8],e[9],e[10]);t._d=_["b"].apply(null,t._a);t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm);Object(g["a"])(t).rfc2822=true}else{t._isValid=false}}function V(t){var e=L.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}P(t);if(t._isValid===false){delete t._isValid}else{return}Y(t);if(t._isValid===false){delete t._isValid}else{return}d["a"].createFromInputFallback(t)}d["a"].createFromInputFallback=Object(O["a"])("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});var H=n(6);var z=n(51);var B=n(26);d["a"].ISO_8601=function(){};d["a"].RFC_2822=function(){};function W(t){if(t._f===d["a"].ISO_8601){P(t);return}if(t._f===d["a"].RFC_2822){Y(t);return}t._a=[];Object(g["a"])(t).empty=true;var e=""+t._i,n,i,r,a,o,s=e.length,l=0;r=Object(B["b"])(t._f,t._locale).match(B["e"])||[];for(n=0;n<r.length;n++){a=r[n];i=(e.match(Object(H["b"])(a,t))||[])[0];if(i){o=e.substr(0,e.indexOf(i));if(o.length>0){Object(g["a"])(t).unusedInput.push(o)}e=e.slice(e.indexOf(i)+i.length);l+=i.length}if(B["d"][a]){if(i){Object(g["a"])(t).empty=false}else{Object(g["a"])(t).unusedTokens.push(a)}Object(z["b"])(a,i,t)}else if(t._strict&&!i){Object(g["a"])(t).unusedTokens.push(a)}}Object(g["a"])(t).charsLeftOver=s-l;if(e.length>0){Object(g["a"])(t).unusedInput.push(e)}if(t._a[v["b"]]<=12&&Object(g["a"])(t).bigHour===true&&t._a[v["b"]]>0){Object(g["a"])(t).bigHour=undefined}Object(g["a"])(t).parsedDateParts=t._a.slice(0);Object(g["a"])(t).meridiem=t._meridiem;t._a[v["b"]]=q(t._locale,t._a[v["b"]],t._meridiem);C(t);m(t)}function q(t,e,n){var i;if(n==null){return e}if(t.meridiemHour!=null){return t.meridiemHour(e,n)}else if(t.isPM!=null){i=t.isPM(n);if(i&&e<12){e+=12}if(!i&&e===12){e=0}return e}else{return e}}var X=n(155);function K(t){var e,n,i,r,a;if(t._f.length===0){Object(g["a"])(t).invalidFormat=true;t._d=new Date(NaN);return}for(r=0;r<t._f.length;r++){a=0;e=Object(f["b"])({},t);if(t._useUTC!=null){e._useUTC=t._useUTC}e._f=t._f[r];W(e);if(!Object(c["b"])(e)){continue}a+=Object(g["a"])(e).charsLeftOver;a+=Object(g["a"])(e).unusedTokens.length*10;Object(g["a"])(e).score=a;if(i==null||a<i){i=a;n=e}}Object(X["a"])(t,n||e)}var Z=n(44);function Q(t){if(t._d){return}var e=Object(Z["b"])(t._i);t._a=u([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)});C(t)}n.d(e,"b",function(){return tt});n.d(e,"a",function(){return nt});function J(t){var e=new f["a"](m(tt(t)));if(e._nextDay){e.add(1,"d");e._nextDay=undefined}return e}function tt(t){var e=t._i,n=t._f;t._locale=t._locale||Object(h["b"])(t._l);if(e===null||n===undefined&&e===""){return Object(c["a"])({nullInput:true})}if(typeof e==="string"){t._i=e=t._locale.preparse(e)}if(Object(f["c"])(e)){return new f["a"](m(e))}else if(Object(l["a"])(e)){t._d=e}else if(Object(i["a"])(n)){K(t)}else if(n){W(t)}else{et(t)}if(!Object(c["b"])(t)){t._d=null}return t}function et(t){var e=t._i;if(Object(o["a"])(e)){t._d=new Date(d["a"].now())}else if(Object(l["a"])(e)){t._d=new Date(e.valueOf())}else if(typeof e==="string"){V(t)}else if(Object(i["a"])(e)){t._a=u(e.slice(0),function(t){return parseInt(t,10)});C(t)}else if(Object(r["a"])(e)){Q(t)}else if(Object(s["a"])(e)){t._d=new Date(e)}else{d["a"].createFromInputFallback(t)}}function nt(t,e,n,o,s){var l={};if(n===true||n===false){o=n;n=undefined}if(Object(r["a"])(t)&&a(t)||Object(i["a"])(t)&&t.length===0){t=undefined}l._isAMomentObject=true;l._useUTC=l._isUTC=s;l._l=n;l._i=t;l._f=e;l._strict=o;return J(l)}},function(t,e,n){"use strict";var i=n(23);var r=n(53);var a=n(361);var o=n(114);var s=function t(e,n,i){this.http_=e;this.q_=n;this.gmfThemes_=i;this.getQueryableLayerNodesDefered_=null};s.$inject=["$http","$q","gmfThemes"];s.$inject=["$http","$q","gmfThemes"];s.prototype.getQueryableLayersInfo=function(){var t=this;if(!this.getQueryableLayerNodesDefered_){this.getQueryableLayerNodesDefered_=this.q_.defer();this.gmfThemes_.getOgcServersObject().then(function(e){t.gmfThemes_.getThemesObject().then(function(n){if(!n){return}var i=s.getQueryableLayersInfoFromThemes(n,e);var r=[];for(var a=0,o=i.length;a<o;a++){if(i[a].layerNode.metadata.copyable){r.push(i[a])}}t.getQueryableLayerNodesDefered_.resolve(r)})})}return this.getQueryableLayerNodesDefered_.promise};s.getQueryableLayersInfoFromThemes=function(t,e){var n=[];var r=void 0;var a=void 0;var o=void 0;var s=void 0;for(var l=0,u=t.length;l<u;l++){r=t[l];for(var c=0,f=r.children.length;c<f;c++){a=r.children[c];if(!a.ogcServer){continue}o=[];i["a"].getFlatNodes(a,o);for(var h=0,d=o.length;h<d;h++){s=o[h];if(s.children&&s.children.length){continue}if(s.childLayers&&s.childLayers[0]&&s.childLayers[0].queryable){n.push({layerNode:s,ogcServer:e[a.ogcServer]})}}}}return n};s.prototype.getFeatureInfo=function(t,e,n){var i=n.getView();var s=i.getProjection().getCode();var l=i.getResolution();var u=r["a"].WMSInfoFormat.GML;var c=t.layerNode;var f=c.layers.split(",");var h=t.ogcServer;var d=new a["a"]({layers:f});var p=new o["a"]({url:h.url,params:{layers:f}});var v=p.getGetFeatureInfoUrl(e,l,s,{INFO_FORMAT:u,FEATURE_COUNT:1,QUERY_LAYERS:f});return this.http_.get(v).then(function(t){var e=d.readFeatures(t.data);return e&&e[0]?e[0]:null})};s.module=angular.module("gmfObjectEditingQuery",[i["a"].module.name]);s.module.service("gmfObjectEditingQuery",s);e["a"]=s},function(t,e,n){"use strict";(function(t){var i=n(2);var r=n(228);var a=n(513);var o=n.n(a);var s=n(607);var l=n.n(s);var u=n(512);var c=n.n(u);var f=n(511);var h=n.n(f);var d=n(510);var p=n.n(d);var v=n(509);var g=n.n(v);var m=angular.module("ngeoDatePicker",[r["a"].module.name,"ui.date"]);m.value("ngeoDatePickerTemplateUrl",function(t,e){var n=e["ngeoDatePickerTemplateUrl"];return n!==undefined?n:"ngeo/misc/datepickerComponent"});m.run(["$templateCache",function(t){t.put("ngeo/misc/datepickerComponent",n(508))}]);m.component_=function(e,n){return{scope:{onDateSelected:"&",time:"="},bindToController:true,controller:"ngeoDatePickerController as datepickerCtrl",restrict:"AE",templateUrl:e,link:function e(i,r,a,o){o.init();var s=o.gettextCatalog_.getCurrentLanguage();t["datepicker"]["setDefaults"](t["datepicker"]["regional"][s]);o.sdateOptions=angular.extend({},o.sdateOptions,{minDate:o.initialMinDate,maxDate:o.initialMaxDate,onClose:function e(n){if(n){t(r[0]).find('input[name="edate"]').datepicker("option","minDate",n)}}});o.edateOptions=angular.extend({},o.edateOptions,{minDate:o.initialMinDate,maxDate:o.initialMaxDate,onClose:function e(n){if(n){t(r[0]).find('input[name="sdate"]').datepicker("option","maxDate",n)}}});angular.element("body").on("hidden.bs.popover",function(){var e=angular.element("#ui-datepicker-div");if(e&&e.css("display")==="block"){t(r[0]).find('input[name$="date"]').datepicker("hide")}});n(function(){angular.element("#ui-datepicker-div").on("mousedown",function(t){t.stopPropagation()})})}}};m.component_.$inject=["ngeoDatePickerTemplateUrl","$timeout"];m.directive("ngeoDatePicker",m.component_);m.Controller_=function(t,e,n,i){var r=this;this.ngeoTime_=n;this.time;this.gettextCatalog_=i;this.isModeRange;this.onDateSelected;this.initialMinDate;this.initialMaxDate;this.edateOptions={changeMonth:true,changeYear:true};this.sdateOptions={changeMonth:true,changeYear:true};this.sdate;this.edate;t.$watchGroup(["datepickerCtrl.sdate","datepickerCtrl.edate"],function(t,e){var n=t[0];var i=t[1];if(angular.isDate(n)&&(!r.isModeRange||angular.isDate(i))){r.onDateSelected({time:{start:r.ngeoTime_.getTime(n),end:r.ngeoTime_.getTime(i)}})}})};m.Controller_.$inject=["$scope","$injector","ngeoTime","gettextCatalog"];m.Controller_.prototype.init=function(){var t=this.ngeoTime_.getOptions(this.time);this.initialMinDate=this.ngeoTime_.createDate(t.minDate);this.initialMaxDate=this.ngeoTime_.createDate(t.maxDate);this.isModeRange=this.time.mode==="range";if(this.isModeRange){i["a"].assertArray(t.values);this.sdate=this.ngeoTime_.createDate(t.values[0]);this.edate=this.ngeoTime_.createDate(t.values[1])}else{i["a"].assertNumber(t.values);this.sdate=this.ngeoTime_.createDate(t.values)}};m.controller("ngeoDatePickerController",m.Controller_);e["a"]=m}).call(this,n(38))},function(t,e,n){"use strict";var i=n(2);var r=n(122);var a=n(24);var o=n(283);var s=n(226);var l=n(148);var u=n(60);var c=n(1);var f=n(19);var h=n(3);var d=n(14);var p=n(113);var v=n(12);var g=angular.module("ngeoCreatefeature",[l["a"].module.name,r["a"].name]);g.directive_=function(){return{controller:"ngeoCreatefeatureController",bindToController:true,scope:{active:"=ngeoCreatefeatureActive",features:"=ngeoCreatefeatureFeatures",geomType:"=ngeoCreatefeatureGeomType",map:"=ngeoCreatefeatureMap"}}};g.directive("ngeoCreatefeature",g.directive_);g.Controller_=function(t,e,n,i,r,a,o){var s=this;this.active;this.features;this.geomType;this.map;this.gettextCatalog_=t;this.compile_=e;this.filter_=n;this.scope_=r;this.timeout_=a;this.ngeoEventHelper_=o;this.injector_=i;this.interaction_;r.$watch(function(){return s.active},function(t){s.interaction_.setActive(t)})};g.Controller_.$inject=["gettextCatalog","$compile","$filter","$injector","$scope","$timeout","ngeoEventHelper"];g.Controller_.prototype.$onInit=function(){this.active=this.active===true;var t=this.gettextCatalog_;var e=void 0;if(this.geomType===a["a"].POINT||this.geomType===a["a"].MULTI_POINT){e=new p["a"]({type:"Point"})}else if(this.geomType===a["a"].LINE_STRING||this.geomType===a["a"].MULTI_LINE_STRING){var n=t.getString("Click to start drawing length");var r=t.getString("Click to continue drawing<br/>"+"Double-click or click last point to finish");e=new s["a"](this.filter_("ngeoUnitPrefix"),t,{style:new v["c"],startMsg:this.compile_("<div translate>"+n+"</div>")(this.scope_)[0],continueMsg:this.compile_("<div translate>"+r+"</div>")(this.scope_)[0],tolerance:this.injector_.has("ngeoSnappingTolerance")?this.injector_.get("ngeoSnappingTolerance"):undefined,source:this.injector_.has("ngeoSnappingSource")?this.injector_.get("ngeoSnappingSource"):undefined})}else if(this.geomType===a["a"].POLYGON||this.geomType===a["a"].MULTI_POLYGON){var l=t.getString("Click to start drawing area");var u=t.getString("Click to continue drawing<br/>"+"Double-click or click starting point to finish");e=new o["a"](this.filter_("ngeoUnitPrefix"),t,{style:new v["c"],startMsg:this.compile_("<div translate>"+l+"</div>")(this.scope_)[0],continueMsg:this.compile_("<div translate>"+u+"</div>")(this.scope_)[0]})}i["a"].assert(e);e.setActive(this.active);this.interaction_=e;this.map.addInteraction(e);var f=c["c"](this);this.ngeoEventHelper_.addListenerKey(f,h["a"](document.body,"keydown",this.handleEscapeKeyDown_,this));if(e instanceof p["a"]){this.ngeoEventHelper_.addListenerKey(f,h["a"](e,"drawend",this.handleDrawEnd_,this))}else if(e instanceof s["a"]||e instanceof o["a"]){this.ngeoEventHelper_.addListenerKey(f,h["a"](e,"measureend",this.handleDrawEnd_,this))}};g.Controller_.prototype.handleEscapeKeyDown_=function(t){var e=this.interaction_;var n=t.keyCode===27;if(!u["a"].mousedown&&n&&e.getActive()){e.setActive(false);e.setActive(true)}};g.Controller_.prototype.handleDrawEnd_=function(t){var e=void 0;if(t.feature){e=t.feature}else{e=t.detail.feature}i["a"].assert(e);var n=e.getGeometry();var r=n.getType();if(this.geomType.indexOf("Multi")!=r.indexOf("Multi")){n=u["b"].toMulti(n)}var a=new d["a"](n);if(this.features instanceof f["b"]){this.features.push(a)}else{this.features.addFeature(a)}};g.Controller_.prototype.$onDestroy=function(){var t=this;this.timeout_(function(){var e=c["c"](t);t.ngeoEventHelper_.clearListenerKey(e);t.interaction_.setActive(false);t.map.removeInteraction(t.interaction_)},0)};g.controller("ngeoCreatefeatureController",g.Controller_);e["a"]=g},function(t,e,n){"use strict";var i=n(1);var r=n(3);var a=n(148);var o=n(395);var s=angular.module("ngeoAttributes",[o["a"].name,a["a"].module.name]);s.run(["$templateCache",function(t){t.put("ngeo/editing/attributescomponent",n(516))}]);s.value("ngeoAttributesTemplateUrl",function(t){var e=t["ngeoAttributesTemplateUrl"];return e!==undefined?e:"ngeo/editing/attributescomponent"});l.$inject=["$attrs","ngeoAttributesTemplateUrl"];function l(t,e){return e(t)}s.component_={controller:"ngeoAttributesController as attrCtrl",bindings:{attributes:"=ngeoAttributesAttributes",disabled:"<ngeoAttributesDisabled",feature:"=ngeoAttributesFeature"},require:{form:"^"},templateUrl:l};s.component("ngeoAttributes",s.component_);s.Controller_=function(t,e){this.attributes;this.disabled=false;this.feature;this.properties;this.scope_=t;this.ngeoEventHelper_=e;this.updating_=false};s.Controller_.$inject=["$scope","ngeoEventHelper"];s.Controller_.prototype.$onInit=function(){this.properties=this.feature.getProperties();var t=i["c"](this);this.ngeoEventHelper_.addListenerKey(t,r["a"](this.feature,"propertychange",this.handleFeaturePropertyChange_,this))};s.Controller_.prototype.handleInputChange=function(t){this.updating_=true;var e=this.properties[t];this.feature.set(t,e);this.updating_=false};s.Controller_.prototype.$onDestroy=function(){var t=i["c"](this);this.ngeoEventHelper_.clearListenerKey(t)};s.Controller_.prototype.handleFeaturePropertyChange_=function(t){if(this.updating_){return}this.properties[t.key]=t.target.get(t.key);this.scope_.$apply()};s.controller("ngeoAttributesController",s.Controller_);e["a"]=s},function(t,e,n){"use strict";var i=n(75);var r=n(23);var a=n(2);var o=n(126);var s=n(1);var l=n(3);var u=n(19);var c=n(153);var f=n(296);function h(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function d(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var v=function t(e,n,i,r,a,o,s){this.http_=e;this.q_=n;this.rootScope_=i;this.timeout_=a;this.injector_=r;this.gmfThemes_=o;this.gmfTreeManager_=s;this.cache_={};this.listenerKeys_=[];this.map_=null;this.mapViewChangePromise_=null;this.ogcServers_=null;this.ngeoSnappingSource_=this.injector_.has("ngeoSnappingSource")?this.injector_.get("ngeoSnappingSource"):undefined};v.$inject=["$http","$q","$rootScope","$injector","$timeout","gmfThemes","gmfTreeManager"];v.$inject=["$http","$q","$rootScope","$injector","$timeout","gmfThemes","gmfTreeManager"];var g=function(t){p(e,t);function e(n){h(this,e);var i=d(this,t.call(this,n));document.body.addEventListener("keydown",function(t){var e=!t.metaKey;var n=t.keyCode!==17;i.setActive(n&&e)});document.body.addEventListener("keyup",function(){i.setActive(true)});return i}return e}(f["a"]);v.prototype.ensureSnapInteractionsOnTop=function(){var t=this.map_;a["a"].assert(t);var e=void 0;for(var n in this.cache_){e=this.cache_[n];if(e.active){a["a"].assert(e.interaction);t.removeInteraction(e.interaction);t.addInteraction(e.interaction)}}};v.prototype.setMap=function(t){var e=this;var n=this.listenerKeys_;if(this.map_){this.treeCtrlsUnregister_();this.unregisterAllTreeCtrl_();n.forEach(l["e"]);n.length=0}this.map_=t;if(t){this.treeCtrlsUnregister_=this.rootScope_.$watchCollection(function(){if(e.gmfTreeManager_.rootCtrl){return e.gmfTreeManager_.rootCtrl.children}},function(t){e.timeout_(function(){if(t){e.unregisterAllTreeCtrl_();e.gmfTreeManager_.rootCtrl.traverseDepthFirst(e.registerTreeCtrl_.bind(e))}},0)});n.push(l["a"](this.gmfThemes_,"change",this.handleThemesChange_,this),l["a"](t,"moveend",this.handleMapMoveEnd_,this))}};v.prototype.handleThemesChange_=function(){var t=this;this.ogcServers_=null;this.gmfThemes_.getOgcServersObject().then(function(e){t.ogcServers_=e})};v.prototype.registerTreeCtrl_=function(t){var e=t.node;if(e.children){return}e=t.node;var n=r["a"].getSnappingConfig(e);if(n){var i=this.getWFSConfig_(t);if(i){var a=s["c"](t);var o=this.rootScope_.$watch(function(){return t.getState()},this.handleTreeCtrlStateChange_.bind(this,t));this.cache_[a]={active:false,featureNS:"http://mapserver.gis.umn.edu/mapserver",featurePrefix:"feature",features:new u["b"],geometryName:"geom",interaction:null,maxFeatures:50,requestDeferred:null,snappingConfig:n,treeCtrl:t,wfsConfig:i,stateWatcherUnregister:o};this.handleTreeCtrlStateChange_(t,t.getState())}}};v.prototype.unregisterAllTreeCtrl_=function(){for(var t in this.cache_){var e=this.cache_[t];if(e){e.stateWatcherUnregister();this.deactivateItem_(e);delete this.cache_[t]}}};v.prototype.getWFSConfig_=function(t){if(this.ogcServers_===null){return null}var e=t.node;if(e.type!==r["a"].NodeType.WMS){return null}var n=e;var i=[];for(var s=0,l=n.childLayers.length;s<l;s++){if(n.childLayers[s].queryable){i.push(n.childLayers[s].name)}}if(!i.length){return null}var u=void 0;var c=t.parent.node;if(c.mixed){u=n.ogcServer}else{var f=o["a"].getFirstParentTree(t);var h=f.node;u=h.ogcServer}if(!u){return null}var d=this.ogcServers_[u];if(!d.wfsSupport){return null}var p=d.urlWfs;a["a"].assert(p,"urlWfs should be defined.");return{featureTypes:i.join(","),url:p}};v.prototype.handleTreeCtrlStateChange_=function(t,e){var n=s["c"](t);var i=this.cache_[n];if(e==="on"){this.activateItem_(i)}else{this.deactivateItem_(i)}};v.prototype.activateItem_=function(t){if(t.active){return}var e=this.map_;a["a"].assert(e);var n=new g({edge:t.snappingConfig.edge,features:t.features,pixelTolerance:t.snappingConfig.tolerance,vertex:t.snappingConfig.vertex});e.addInteraction(n);t.interaction=n;t.active=true;this.loadItemFeatures_(t)};v.prototype.deactivateItem_=function(t){if(!t.active){return}var e=this.map_;a["a"].assert(e);var n=t.interaction;e.removeInteraction(n);t.interaction=null;t.features.clear();if(t.requestDeferred){t.requestDeferred.resolve();t.requestDeferred=null}t.active=false;this.refreshSnappingSource_()};v.prototype.loadAllItems_=function(){this.mapViewChangePromise_=null;var t=void 0;for(var e in this.cache_){t=this.cache_[e];if(t.active){this.loadItemFeatures_(t)}}};v.prototype.refresh=function(){this.loadAllItems_()};v.prototype.loadItemFeatures_=function(t){var e=this;if(t.requestDeferred){t.requestDeferred.resolve()}var n=this.map_;a["a"].assert(n);var i=n.getView();var r=n.getSize();a["a"].assert(r);var o=i.calculateExtent(r);var s=i.getProjection().getCode();var l=t.wfsConfig.featureTypes.split(",");var u={srsName:s,featureNS:t.featureNS,featurePrefix:t.featurePrefix,featureTypes:l,outputFormat:"GML3",bbox:o,geometryName:t.geometryName,maxFeatures:t.maxFeatures};var f=new c["a"];var h=new XMLSerializer;var d=f.writeGetFeature(u);var p=h.serializeToString(d);var v=t.wfsConfig.url;t.requestDeferred=this.q_.defer();this.http_.post(v,p,{timeout:t.requestDeferred.promise}).then(function(n){t.requestDeferred=null;t.features.clear();var i=(new c["a"]).readFeatures(n.data);if(i){t.features.extend(i);e.refreshSnappingSource_()}})};v.prototype.handleMapMoveEnd_=function(){if(this.mapViewChangePromise_){this.timeout_.cancel(this.mapViewChangePromise_)}this.mapViewChangePromise_=this.timeout_(this.loadAllItems_.bind(this),400)};v.prototype.refreshSnappingSource_=function(){this.ngeoSnappingSource_.clear();for(var t in this.cache_){var e=this.cache_[t];if(e.active){this.ngeoSnappingSource_.addFeatures(e.features.getArray())}}};v.Cache;v.CacheItem;v.WFSConfig;v.module=angular.module("gmfSnapping",[i["a"].module.name,r["a"].module.name,o["a"].module.name]);v.module.service("gmfSnapping",v);e["a"]=v},function(t,e,n){"use strict";var i=n(2);var r=n(1);var a=n(4);var o=n(14);var s=n(3);var l=n(81);var u=n(36);var c=n(21);var f=n(32);var h=n(241);var d=n(61);var p=n(57);var v=n(60);var g=function t(e){this.listenerKeys_=[];this.featureListenerKeys_={};this.keyPressListenerKey_=null;this.myFeatures_=e.features!==undefined?e.features:null;this.vectorSource_=new p["b"]({useSpatialIndex:false});this.vectorLayer_=new d["a"]({source:this.vectorSource_,style:e.style,updateWhileAnimating:true,updateWhileInteracting:true});this.centerFeatures_={};h["a"].call(this,e)};r["d"](g,h["a"]);g.prototype.setActive=function(t){if(this.keyPressListenerKey_){s["e"](this.keyPressListenerKey_);this.keyPressListenerKey_=null}h["a"].prototype.setActive.call(this,t);if(t){this.keyPressListenerKey_=s["a"](document,"keyup",this.handleKeyUp_,this)}this.setState_()};g.prototype.setMap=function(t){var e=this.getMap();if(e){this.vectorLayer_.setMap(null)}h["a"].prototype.setMap.call(this,t);if(t){this.vectorLayer_.setMap(t)}this.setState_()};g.prototype.setState_=function(){var t=this;var e=this.getMap();var n=this.getActive();var i=this.myFeatures_;var r=this.listenerKeys_;if(e&&n&&i){i.forEach(function(e){return t.addFeature_(e)});r.push(s["a"](i,"add",this.handleFeaturesAdd_,this),s["a"](i,"remove",this.handleFeaturesRemove_,this))}else{if(e){var a=e.getTargetElement();a.style.cursor="default"}r.forEach(s["e"]);r.length=0;i.forEach(function(e){return t.removeFeature_(e)})}};g.prototype.handleFeaturesAdd_=function(t){var e=t.element;i["a"].assertInstanceof(e,o["a"],"feature should be an ol.Feature");this.addFeature_(e)};g.prototype.handleFeaturesRemove_=function(t){var e=t.element;this.removeFeature_(e)};g.prototype.addFeature_=function(t){var e=r["c"](t);var n=t.getGeometry();i["a"].assertInstanceof(n,l["a"]);this.featureListenerKeys_[e]=s["a"](n,"change",this.handleGeometryChange_.bind(this,t),this);var a=this.getGeometryCenterPoint_(n);var u=new o["a"](a);this.centerFeatures_[e]=u;this.vectorSource_.addFeature(u)};g.prototype.removeFeature_=function(t){var e=r["c"](t);if(this.featureListenerKeys_[e]){s["e"](this.featureListenerKeys_[e]);delete this.featureListenerKeys_[e];this.vectorSource_.removeFeature(this.centerFeatures_[e]);delete this.centerFeatures_[e]}};g.prototype.handleGeometryChange_=function(t,e){var n=e.target;i["a"].assertInstanceof(n,l["a"]);var a=this.getGeometryCenterPoint_(n);var o=r["c"](t);this.centerFeatures_[o].setGeometry(a)};g.prototype.getGeometryCenterPoint_=function(t){var e=void 0;var n=void 0;if(t instanceof f["a"]){n=t.getInteriorPoint()}else if(t instanceof u["a"]){e=t.getCoordinateAt(.5)}else{var r=t.getExtent();e=a["x"](r)}if(!n&&e){n=new c["a"](e)}i["a"].assert(n,"Point should be thruthy");return n};g.prototype.handleKeyUp_=function(t){if(!v["a"].mousedown&&t.keyCode===27){this.setActive(false)}};e["a"]=g},function(t,e,n){"use strict";var i=n(2);var r=n(191);var a=n(79);var o=n(60);var s=n(1);var l=n(4);var u=n(14);var c=n(3);var f=n(28);var h=n(81);var d=n(21);var p=n(36);var v=n(32);var g=n(61);var m=n(57);var _=function t(e){i["a"].assert(e.features);this.listenerKeys_=[];this.modified_=false;this.keyPressListenerKey_=null;this.changingFeature_=false;this.pixelTolerance_=e.pixelTolerance!==undefined?e.pixelTolerance:10;this.features_=e.features;this.feature_=null;this.coordinate_=null;this.centerCoordinate_=null;this.overlay_=new g["a"]({source:new m["b"]({useSpatialIndex:false,wrapX:!!e.wrapX}),style:e.style||r["a"].getDefaultModifyStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.centerFeatures_={};f["b"].call(this,{handleDownEvent:this.handleDown_,handleDragEvent:this.handleDrag_,handleUpEvent:this.handleUp_})};s["d"](_,f["b"]);_.prototype.setActive=function(t){var e=this;if(this.keyPressListenerKey_){c["e"](this.keyPressListenerKey_);this.keyPressListenerKey_=null}f["b"].prototype.setActive.call(this,t);if(t){this.keyPressListenerKey_=c["a"](document,"keyup",this.handleKeyUp_,this);this.features_.forEach(function(t){return e.addFeature_(t)});this.listenerKeys_.push(c["a"](this.features_,"add",this.handleFeatureAdd_,this),c["a"](this.features_,"remove",this.handleFeatureRemove_,this))}else{this.listenerKeys_.forEach(c["e"]);this.listenerKeys_.length=0;this.features_.forEach(function(t){return e.removeFeature_(t)})}};_.prototype.addFeature_=function(t){var e=t.getGeometry();i["a"].assertInstanceof(e,h["a"]);t.set("angle",0);var n=s["c"](t);var r=new d["a"](this.getCenterCoordinate_(e));var a=new u["a"](r);this.centerFeatures_[n]=a;this.overlay_.getSource().addFeature(a)};_.prototype.willModifyFeatures_=function(t){if(!this.modified_){this.modified_=true;var e=new a["a"]("modifystart",{features:this.features_});this.dispatchEvent(e)}};_.prototype.removeFeature_=function(t){this.feature_=null;if(t){var e=s["c"](t);if(this.centerFeatures_[e]){this.overlay_.getSource().removeFeature(this.centerFeatures_[e]);delete this.centerFeatures_[e]}}};_.prototype.setMap=function(t){this.overlay_.setMap(t);f["b"].prototype.setMap.call(this,t)};_.prototype.handleFeatureAdd_=function(t){var e=t.element;i["a"].assertInstanceof(e,u["a"],"feature should be an ol.Feature");this.addFeature_(e)};_.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)};_.prototype.handleDown_=function(t){var e=t.map;var n=e.forEachFeatureAtPixel(t.pixel,function(t,e){return t},undefined);if(n){var i=false;this.features_.forEach(function(t){if(s["c"](t)==s["c"](n)){i=true}});if(!i){n=null}}if(n){this.coordinate_=t.coordinate;this.feature_=n;var r=this.feature_.getGeometry();if(r!==undefined){this.centerCoordinate_=this.getCenterCoordinate_(r)}return true}return false};_.prototype.getCenterCoordinate_=function(t){var e=void 0;if(t instanceof p["a"]){e=t.getFlatMidpoint()}else if(t instanceof v["a"]){e=t.getFlatInteriorPoint()}else{var n=t.getExtent();e=l["x"](n)}return e};_.prototype.handleDrag_=function(t){this.willModifyFeatures_(t);var e=this.feature_.getGeometry();var n=this.coordinate_[0];var i=this.coordinate_[1];var r=this.centerCoordinate_[0];var a=this.centerCoordinate_[1];var o=n-r;var s=i-a;var l=t.coordinate[0]-r;var u=t.coordinate[1]-a;this.coordinate_[0]=t.coordinate[0];this.coordinate_[1]=t.coordinate[1];var c=Math.atan2(u,l);var f=Math.atan2(s,o);var h=f-c;e.rotate(-h,[r,a])};_.prototype.handleUp_=function(t){if(this.modified_){var e=new a["a"]("rotateend",{feature:this.feature_});this.dispatchEvent(e);this.modified_=false;this.setActive(false)}return false};_.prototype.handleKeyUp_=function(t){if(!o["a"].mousedown&&t.keyCode===27){this.setActive(false)}};e["a"]=_},function(t,e,n){"use strict";var i=n(19);var r=angular.module("ngeoFeatures",[]);r.value("ngeoFeatures",new i["b"]);e["a"]=r},function(t,e,n){"use strict";var i=n(189);var r=n(347);var a=n(346);var o=n(345);var s=n(344);var l=n(343);var u=n(342);var c=angular.module("ngeoDrawfeature",[i["a"].module.name,r["a"].name,a["a"].name,o["a"].name,s["a"].name,l["a"].name,u["a"].name]);c.directive_=function(){return{controller:"ngeoDrawfeatureController as dfCtrl",scope:true,bindToController:{active:"=ngeoDrawfeatureActive",features:"=?ngeoDrawfeatureFeatures",map:"=ngeoDrawfeatureMap",showMeasure:"=?ngeoDrawfeatureShowmeasure"}}};c.directive("ngeoDrawfeature",c.directive_);e["a"]=c},function(t,e,n){"use strict";(function(t){var i=n(2);var r=n(79);var a=n(1);var o=n(3);var s=n(115);var l=n(129);var u=function e(n,i){var r=this;var a=i!==undefined?i:{};a.positioning=l["a"].TOP_LEFT;this.listenerKeys_=[];this.clickOutListenerKey_=null;var o=t("<div/>",{class:"panel panel-default"});this.autoClose_=n.autoClose!==undefined?n.autoClose:true;if(n.title){var u=t("<div>",{class:"panel-heading"}).appendTo(o);t("<span>",{text:n.title}).appendTo(u)}var c=t("<div>",{class:"list-group"}).appendTo(o);this.actions_=[];n.actions.forEach(function(e){r.actions_.push(t("<button>",{class:"list-group-item","data-name":e.name,text:[" ",e.label!==undefined?e.label:e.name].join("")}).appendTo(c).prepend(t("<span>",{class:e.cls!==undefined?e.cls:""})))});a.element=o[0];s["a"].call(this,a)};a["d"](u,s["a"]);u.prototype.setMap=function(t){var e=this;var n=this.getMap();if(n){this.listenerKeys_.forEach(o["e"]);this.listenerKeys_.length=0}s["a"].prototype.setMap.call(this,t);if(t){this.actions_.forEach(function(t){var n=t.data();e.listenerKeys_.push(o["a"](t[0],"click",e.handleActionClick_.bind(e,n.name)))});this.listenerKeys_.push(o["a"](t,"pointermove",this.handleMapPointerMove_,this))}};u.prototype.open=function(t){this.setPosition(t);if(this.autoClose_){this.clickOutListenerKey_=o["a"](document.documentElement,"mousedown",this.handleClickOut_,this)}};u.prototype.close=function(){this.setPosition(undefined);if(this.clickOutListenerKey_!==null){o["e"](this.clickOutListenerKey_)}};u.prototype.handleActionClick_=function(t,e){this.dispatchEvent(new r["a"]("actionclick",{action:t}));if(this.autoClose_){this.close()}e.stopPropagation()};u.prototype.handleClickOut_=function(e){var n=this.getElement();if(n&&t(e.target).closest(n).length===0){this.close()}};u.prototype.handleMapPointerMove_=function(t){var e=t.originalEvent.target;i["a"].assertInstanceof(e,Element);var n=this.getElement();i["a"].assertInstanceof(n,Element);if(n.contains(e)){t.coordinate=[Infinity,Infinity];t.pixel=[Infinity,Infinity]}};e["a"]=u}).call(this,n(38))},function(t,e,n){"use strict";var i=n(2);var r=n(3);var a=n(13);var o=n(348);var s=n(65);var l=angular.module("gmfDrawingFeatureStyle",[o["a"].name,s["a"].module.name]);l.run(["$templateCache",function(t){t.put("gmf/drawing/featureStyleComponent",n(519))}]);l.directive_=function(){return{controller:"GmfFeaturestyleController as fsCtrl",scope:{feature:"=gmfFeaturestyleFeature"},bindToController:true,templateUrl:"gmf/drawing/featureStyleComponent"}};l.directive("gmfFeaturestyle",l.directive_);l.Controller_=function(t,e){var n=this;this.feature;this.scope_=t;this.featureHelper_=e;this.color=undefined;this.label=undefined;this.measure=undefined;t.$watch(function(){return n.color},this.handleColorSet_.bind(this));this.featureListenerKeys_=[];this.type;t.$watch(function(){return n.feature},this.handleFeatureSet_.bind(this))};l.Controller_.$inject=["$scope","ngeoFeatureHelper"];l.Controller_.prototype.handleFeatureSet_=function(t,e){var n=this.featureListenerKeys_;if(e){n.forEach(r["e"]);n.length=0;this.type=undefined;this.color=undefined;this.measure=undefined;this.label=undefined}if(t){[a["a"].ANGLE,a["a"].COLOR,a["a"].NAME,a["a"].SHOW_LABEL,a["a"].OPACITY,a["a"].SHOW_MEASURE,a["a"].SIZE,a["a"].STROKE].forEach(function(e){n.push(r["a"](t,"change:"+e,this.handleFeatureChange_,this))},this);var o=t.getGeometry();i["a"].assert(o,"Geometry should be thruthy");n.push(r["a"](o,"change",this.handleGeometryChange_,this));this.type=this.featureHelper_.getType(t);this.color=this.featureHelper_.getColorProperty(t);this.measure=this.featureHelper_.getMeasure(t)}};l.Controller_.prototype.handleColorSet_=function(t){if(this.feature&&t){var e=this.feature.get(a["a"].COLOR);if(e!==t){this.feature.set(a["a"].COLOR,t)}}};l.Controller_.prototype.getSetAngle=function(t){return i["a"].assertNumber(this.getSetProperty_(a["a"].ANGLE,t))};l.Controller_.prototype.getSetName=function(t){return i["a"].assertString(this.getSetProperty_(a["a"].NAME,t))};l.Controller_.prototype.getSetShowLabel=function(t){return i["a"].assertBoolean(this.getSetProperty_(a["a"].SHOW_LABEL,t))};l.Controller_.prototype.getSetOpacity=function(t){return i["a"].assertNumber(this.getSetProperty_(a["a"].OPACITY,t))};l.Controller_.prototype.getSetShowMeasure=function(t){return i["a"].assertBoolean(this.getSetProperty_(a["a"].SHOW_MEASURE,t))};l.Controller_.prototype.getSetSize=function(t){return i["a"].assertNumber(this.getSetProperty_(a["a"].SIZE,t))};l.Controller_.prototype.getSetStroke=function(t){return i["a"].assertNumber(this.getSetProperty_(a["a"].STROKE,t))};l.Controller_.prototype.getSetProperty_=function(t,e){if(e!==undefined){this.feature.set(t,e)}return this.feature.get(t)};l.Controller_.prototype.handleFeatureChange_=function(){var t=this.feature;if(!t){return}this.featureHelper_.setStyle(t,true)};l.Controller_.prototype.handleGeometryChange_=function(){i["a"].assert(this.feature);this.measure=this.featureHelper_.getMeasure(this.feature);var t=this.featureHelper_.getShowMeasureProperty(this.feature);if(t){this.handleFeatureChange_()}this.scope_.$apply()};l.controller("GmfFeaturestyleController",l.Controller_);e["a"]=l},function(t,e,n){"use strict";t.exports=r;t.exports.default=r;var i=n(526);function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4));if(e){this._initFormat(e)}this.clear()}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!g(t,e))return n;var r=[],a,o,s,l;while(e){for(a=0,o=e.children.length;a<o;a++){s=e.children[a];l=e.leaf?i(s):s;if(g(t,l)){if(e.leaf)n.push(s);else if(v(t,l))this._all(s,n);else r.push(s)}}e=r.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!g(t,e))return false;var i=[],r,a,o,s;while(e){for(r=0,a=e.children.length;r<a;r++){o=e.children[r];s=e.leaf?n(o):o;if(g(t,s)){if(e.leaf||v(t,s))return true;i.push(o)}}e=i.pop()}return false},load:function(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++){this.insert(t[e])}return this}var i=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length){this.data=i}else if(this.data.height===i.height){this._splitRoot(this.data,i)}else{if(this.data.height<i.height){var r=this.data;this.data=i;i=r}this._insert(i,this.data.height-i.height-1,true)}return this},insert:function(t){if(t)this._insert(t,this.data.height-1);return this},clear:function(){this.data=m([]);return this},remove:function(t,e){if(!t)return this;var n=this.data,i=this.toBBox(t),r=[],o=[],s,l,u,c;while(n||r.length){if(!n){n=r.pop();l=r[r.length-1];s=o.pop();c=true}if(n.leaf){u=a(t,n.children,e);if(u!==-1){n.children.splice(u,1);r.push(n);this._condense(r);return this}}if(!c&&!n.leaf&&v(n,i)){r.push(n);o.push(s);s=0;l=n;n=n.children[0]}else if(l){s++;n=l.children[s];c=false}else n=null}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){this.data=t;return this},_all:function(t,e){var n=[];while(t){if(t.leaf)e.push.apply(e,t.children);else n.push.apply(n,t.children);t=n.pop()}return e},_build:function(t,e,n,i){var r=n-e+1,a=this._maxEntries,s;if(r<=a){s=m(t.slice(e,n+1));o(s,this.toBBox);return s}if(!i){i=Math.ceil(Math.log(r)/Math.log(a));a=Math.ceil(r/Math.pow(a,i-1))}s=m([]);s.leaf=false;s.height=i;var l=Math.ceil(r/a),u=l*Math.ceil(Math.sqrt(a)),c,f,h,d;_(t,e,n,u,this.compareMinX);for(c=e;c<=n;c+=u){h=Math.min(c+u-1,n);_(t,c,h,l,this.compareMinY);for(f=c;f<=h;f+=l){d=Math.min(f+l-1,h);s.children.push(this._build(t,f,d,i-1))}}o(s,this.toBBox);return s},_chooseSubtree:function(t,e,n,i){var r,a,o,s,l,u,c,h;while(true){i.push(e);if(e.leaf||i.length-1===n)break;c=h=Infinity;for(r=0,a=e.children.length;r<a;r++){o=e.children[r];l=f(o);u=d(t,o)-l;if(u<h){h=u;c=l<c?l:c;s=o}else if(u===h){if(l<c){c=l;s=o}}}e=s||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),a=[];var o=this._chooseSubtree(r,this.data,e,a);o.children.push(t);l(o,r);while(e>=0){if(a[e].children.length>this._maxEntries){this._split(a,e);e--}else break}this._adjustParentBBoxes(r,a,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var a=this._chooseSplitIndex(n,r,i);var s=m(n.children.splice(a,n.children.length-a));s.height=n.height;s.leaf=n.leaf;o(n,this.toBBox);o(s,this.toBBox);if(e)t[e-1].children.push(s);else this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=m([t,e]);this.data.height=t.height+1;this.data.leaf=false;o(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,a,o,l,u,c,h;u=c=Infinity;for(i=e;i<=n-e;i++){r=s(t,0,i,this.toBBox);a=s(t,i,n,this.toBBox);o=p(r,a);l=f(r)+f(a);if(o<u){u=o;h=i;c=l<c?l:c}else if(o===u){if(l<c){c=l;h=i}}}return h},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:u,r=t.leaf?this.compareMinY:c,a=this._allDistMargin(t,e,n,i),o=this._allDistMargin(t,e,n,r);if(a<o)t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r=this.toBBox,a=s(t,0,e,r),o=s(t,n-e,n,r),u=h(a)+h(o),c,f;for(c=e;c<n-e;c++){f=t.children[c];l(a,t.leaf?r(f):f);u+=h(a)}for(c=n-e-1;c>=e;c--){f=t.children[c];l(o,t.leaf?r(f):f);u+=h(o)}return u},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--){l(e[i],t)}},_condense:function(t){for(var e=t.length-1,n;e>=0;e--){if(t[e].children.length===0){if(e>0){n=t[e-1].children;n.splice(n.indexOf(t[e]),1)}else this.clear()}else o(t[e],this.toBBox)}},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0]));this.compareMinY=new Function("a","b",e.join(t[1]));this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function a(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++){if(n(t,e[i]))return i}return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,i,r){if(!r)r=m(null);r.minX=Infinity;r.minY=Infinity;r.maxX=-Infinity;r.maxY=-Infinity;for(var a=e,o;a<n;a++){o=t.children[a];l(r,t.leaf?i(o):o)}return r}function l(t,e){t.minX=Math.min(t.minX,e.minX);t.minY=Math.min(t.minY,e.minY);t.maxX=Math.max(t.maxX,e.maxX);t.maxY=Math.max(t.maxY,e.maxY);return t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function p(t,e){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),a=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,a-i)}function v(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:true,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function _(t,e,n,r,a){var o=[e,n],s;while(o.length){n=o.pop();e=o.pop();if(n-e<=r)continue;s=e+Math.ceil((n-e)/r/2)*r;i(t,s,e,n,a);o.push(e,s,s,n)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});n.d(e,"b",function(){return r});n.d(e,"c",function(){return a});function i(t,e,n,i){var r=0;var a=t[n-i];var o=t[n-i+1];for(;e<n;e+=i){var s=t[e];var l=t[e+1];r+=o*s-a*l;a=s;o=l}return r/2}function r(t,e,n,r){var a=0;for(var o=0,s=n.length;o<s;++o){var l=n[o];a+=i(t,e,l,r);e=l}return a}function a(t,e,n,i){var a=0;for(var o=0,s=n.length;o<s;++o){var l=n[o];a+=r(t,e,l,i);e=l[l.length-1]}return a}},function(t,e,n){"use strict";var i={};i.module=angular.module("gmfDataSourceBeingFiltered",[]);i.module.value("gmfDataSourceBeingFiltered",{dataSource:null});e["a"]=i},function(t,e,n){"use strict";var i=n(2);var r=n(79);var a=n(1);var o=n(204);var s=n(93);var l=n(86);var u=n(114);var c=n(176);var f=n(168);var h=n(95);var d=function t(e){o["a"].call(this);this.mapUids_={};this.ngeoLayerHelper_=e};d.$inject=["ngeoLayerHelper"];d.$inject=["ngeoLayerHelper"];a["d"](d,o["a"]);d.prototype.get=function(t){var e=a["c"](t).toString();return e in this.mapUids_?this.ngeoLayerHelper_.getGroupFromMap(t,d.BACKGROUNDLAYERGROUP_NAME).getLayers().item(0):null};d.prototype.set=function(t,e){var n=-200;var o=a["c"](t).toString();var s=this.get(t);if(e!==null){e.setZIndex(n);this.ngeoLayerHelper_.setZIndexToFirstLevelChildren(e,n)}var l=this.ngeoLayerHelper_.getGroupFromMap(t,d.BACKGROUNDLAYERGROUP_NAME);if(s!==null){i["a"].assert(o in this.mapUids_);if(e!==null){l.getLayers().setAt(0,e)}else{l.getLayers().removeAt(0);delete this.mapUids_[o]}}else if(e!==null){l.getLayers().insertAt(0,e);this.mapUids_[o]=true}var u=new r["a"]("change",{current:e,previous:s});this.dispatchEvent(u);return s};d.prototype.getOpacityBgLayer=function(t){var e=a["c"](t).toString();return e in this.mapUids_?this.ngeoLayerHelper_.getGroupFromMap(t,d.BACKGROUNDLAYERGROUP_NAME).getLayers().item(1):null};d.prototype.setOpacityBgLayer=function(t,e){var n=this.ngeoLayerHelper_.getGroupFromMap(t,d.BACKGROUNDLAYERGROUP_NAME);var i=n.getLayers().remove(this.getOpacityBgLayer(t));var r=-100;e.setOpacity(i?i.getOpacity():0);e.setVisible(i?i.getVisible():true);e.setZIndex(r);this.ngeoLayerHelper_.setZIndexToFirstLevelChildren(e,r);var a=n.getLayers().getArray().indexOf(e);if(a===-1){n.getLayers().push(e)}};d.prototype.updateDimensions=function(t,e){var n=this.get(t);if(n){var r=[n];if(n instanceof s["a"]){r=n.getLayers().getArray()}r.forEach(function(t){i["a"].assertInstanceof(t,l["a"]);if(t){var n=false;var r={};for(var a in t.get("dimensions")){var o=e[a];if(o!==undefined){r[a]=o;n=true}}if(n){var s=t.getSource();if(s instanceof f["a"]){s.updateDimensions(r);s.refresh()}else if(s instanceof c["a"]||s instanceof u["a"]){s.updateParams(r);s.refresh()}}}})}};d.module=angular.module("ngeoBackgroundLayerMgr",[h["a"].module.name]);d.module.service("ngeoBackgroundLayerMgr",d);d.BACKGROUNDLAYERGROUP_NAME="background";e["a"]=d},function(t,e,n){"use strict";var i=n(128);var r=n(1);var a=n(43);var o=n(7);var s=n(42);var l=n(4);var u=n(10);var c=n(195);var f=n(3);var h=n(11);var d=n(194);var p=n(369);var v=function t(e,n,r,o,s,u){this.targetProj_=n;this.maxSourceExtent_=e.getExtent();var f=n.getExtent();var h=f?Object(l["B"])(r,f):r;var v=Object(l["x"])(h);var g=Object(d["a"])(e,n,v,o);var m=i["b"];this.triangulation_=new p["a"](e,n,h,this.maxSourceExtent_,g*m);this.targetResolution_=o;this.targetExtent_=r;var _=this.triangulation_.calculateSourceExtent();this.sourceImage_=u(_,g,s);this.sourcePixelRatio_=this.sourceImage_?this.sourceImage_.getPixelRatio():1;this.canvas_=null;this.sourceListenerKey_=null;var y=a["a"].LOADED;if(this.sourceImage_){y=a["a"].IDLE}c["a"].call(this,r,o,this.sourcePixelRatio_,y)};Object(r["d"])(v,c["a"]);v.prototype.disposeInternal=function(){if(this.state==a["a"].LOADING){this.unlistenSource_()}c["a"].prototype.disposeInternal.call(this)};v.prototype.getImage=function(){return this.canvas_};v.prototype.getProjection=function(){return this.targetProj_};v.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==a["a"].LOADED){var e=Object(l["E"])(this.targetExtent_)/this.targetResolution_;var n=Object(l["A"])(this.targetExtent_)/this.targetResolution_;this.canvas_=Object(d["b"])(e,n,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t;this.changed()};v.prototype.load=function(){if(this.state==a["a"].IDLE){this.state=a["a"].LOADING;this.changed();var t=this.sourceImage_.getState();if(t==a["a"].LOADED||t==a["a"].ERROR){this.reproject_()}else{this.sourceListenerKey_=Object(f["a"])(this.sourceImage_,h["a"].CHANGE,function(t){var e=this.sourceImage_.getState();if(e==a["a"].LOADED||e==a["a"].ERROR){this.unlistenSource_();this.reproject_()}},this);this.sourceImage_.load()}}};v.prototype.unlistenSource_=function(){Object(f["e"])(this.sourceListenerKey_);this.sourceListenerKey_=null};var g=v;var m=n(203);n.d(e,"b",function(){return w});var _={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};var y=function t(e,n){s["a"].call(this,e);this.image=n};Object(r["d"])(y,s["a"]);var b=function t(e){m["a"].call(this,{attributions:e.attributions,extent:e.extent,projection:e.projection,state:e.state});this.resolutions_=e.resolutions!==undefined?e.resolutions:null;this.reprojectedImage_=null;this.reprojectedRevision_=0};Object(r["d"])(b,m["a"]);b.prototype.getResolutions=function(){return this.resolutions_};b.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=Object(o["h"])(this.resolutions_,t,0);t=this.resolutions_[e]}return t};b.prototype.getImage=function(t,e,n,r){var a=this.getProjection();if(!i["a"]||!a||!r||Object(u["f"])(a,r)){if(a){r=a}return this.getImageInternal(t,e,n,r)}else{if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Object(u["f"])(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==e&&Object(l["p"])(this.reprojectedImage_.getExtent(),t)){return this.reprojectedImage_}this.reprojectedImage_.dispose();this.reprojectedImage_=null}this.reprojectedImage_=new g(a,r,t,e,n,function(t,e,n){return this.getImageInternal(t,e,n,a)}.bind(this));this.reprojectedRevision_=this.getRevision();return this.reprojectedImage_}};b.prototype.getImageInternal=function(t,e,n,i){};b.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case a["a"].LOADING:this.dispatchEvent(new y(_.IMAGELOADSTART,e));break;case a["a"].LOADED:this.dispatchEvent(new y(_.IMAGELOADEND,e));break;case a["a"].ERROR:this.dispatchEvent(new y(_.IMAGELOADERROR,e));break;default:}};function w(t,e){t.getImage().src=e}var x=e["a"]=b},function(t,e,n){"use strict";var i=Array.prototype.slice;var r=function(t){return t};var a=1,o=2,s=3,l=4,u=1e-6;function c(t){return"translate("+(t+.5)+",0)"}function f(t){return"translate(0,"+(t+.5)+")"}function h(t){return function(e){return+t(e)}}function d(t){var e=Math.max(0,t.bandwidth()-1)/2;if(t.round())e=Math.round(e);return function(n){return+t(n)+e}}function p(){return!this.__axis}function v(t,e){var n=[],v=null,g=null,m=6,_=6,y=3,b=t===a||t===l?-1:1,w=t===l||t===o?"x":"y",x=t===a||t===s?c:f;function S(i){var c=v==null?e.ticks?e.ticks.apply(e,n):e.domain():v,f=g==null?e.tickFormat?e.tickFormat.apply(e,n):r:g,S=Math.max(m,0)+y,C=e.range(),E=+C[0]+.5,O=+C[C.length-1]+.5,T=(e.bandwidth?d:h)(e.copy()),M=i.selection?i.selection():i,I=M.selectAll(".domain").data([null]),R=M.selectAll(".tick").data(c,e).order(),N=R.exit(),A=R.enter().append("g").attr("class","tick"),L=R.select("line"),P=R.select("text");I=I.merge(I.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000"));R=R.merge(A);L=L.merge(A.append("line").attr("stroke","#000").attr(w+"2",b*m));P=P.merge(A.append("text").attr("fill","#000").attr(w,b*S).attr("dy",t===a?"0em":t===s?"0.71em":"0.32em"));if(i!==M){I=I.transition(i);R=R.transition(i);L=L.transition(i);P=P.transition(i);N=N.transition(i).attr("opacity",u).attr("transform",function(t){return isFinite(t=T(t))?x(t):this.getAttribute("transform")});A.attr("opacity",u).attr("transform",function(t){var e=this.parentNode.__axis;return x(e&&isFinite(e=e(t))?e:T(t))})}N.remove();I.attr("d",t===l||t==o?"M"+b*_+","+E+"H0.5V"+O+"H"+b*_:"M"+E+","+b*_+"V0.5H"+O+"V"+b*_);R.attr("opacity",1).attr("transform",function(t){return x(T(t))});L.attr(w+"2",b*m);P.attr(w,b*S).text(f);M.filter(p).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===o?"start":t===l?"end":"middle");M.each(function(){this.__axis=T})}S.scale=function(t){return arguments.length?(e=t,S):e};S.ticks=function(){return n=i.call(arguments),S};S.tickArguments=function(t){return arguments.length?(n=t==null?[]:i.call(t),S):n.slice()};S.tickValues=function(t){return arguments.length?(v=t==null?null:i.call(t),S):v&&v.slice()};S.tickFormat=function(t){return arguments.length?(g=t,S):g};S.tickSize=function(t){return arguments.length?(m=_=+t,S):m};S.tickSizeInner=function(t){return arguments.length?(m=+t,S):m};S.tickSizeOuter=function(t){return arguments.length?(_=+t,S):_};S.tickPadding=function(t){return arguments.length?(y=+t,S):y};return S}function g(t){return v(a,t)}function m(t){return v(o,t)}function _(t){return v(s,t)}function y(t){return v(l,t)}n.d(e,false,function(){return g});n.d(e,false,function(){return m});n.d(e,"a",function(){return _});n.d(e,"b",function(){return y})},function(t,e,n){"use strict";(function(t){var n=function t(e,n){this.$http_=e;this.gmfShortenerCreateUrl_=n};n.$inject=["$http","gmfShortenerCreateUrl"];n.$inject=["$http","gmfShortenerCreateUrl"];n.prototype.getShortUrl=function(t){var e={url:t};if(!this.gmfShortenerCreateUrl_){return{data:{short_url:t},status:200}}return this.postShortUrl_(e)};n.prototype.sendShortUrl=function(t,e,n){var i={url:t,email:e};if(n){i["message"]=n}return this.postShortUrl_(i)};n.prototype.postShortUrl_=function(e){return this.$http_.post(this.gmfShortenerCreateUrl_,t.param(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})};n.URL_MAX_LEN=2083;n.URL_PATH_MAX_LEN=2048;n.module=angular.module("gmfShareService",[]);n.module.service("gmfShareService",n);e["a"]=n}).call(this,n(38))},function(t,e,n){"use strict";var i=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var r=1e3*60*60*24;var a=3600;var o=function t(e,n){return typeof e==="string"&&typeof n==="string"&&e.toLowerCase()===n.toLowerCase()};var s=function t(e,n,i){var r=i||"0";var a=e.toString();return a.length<n?t(r+a,n):a};var l=function t(e){var n=void 0,r=void 0;e=e||{};for(n=1;n<arguments.length;n++){r=arguments[n];if(!r){continue}for(var a in r){if(r.hasOwnProperty(a)){if(i(r[a])==="object"){t(e[a],r[a])}else{e[a]=r[a]}}}}return e};var u=function t(e,n){for(var i=0;i<n.length;i++){if(n[i].toLowerCase()===e.toLowerCase()){return i}}return-1};var c={dateSettings:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["AM","PM"],ordinal:function t(e){var n=e%10,i={1:"st",2:"nd",3:"rd"};return Math.floor(e%100/10)===1||!i[n]?"th":i[n]}},separators:/[ \-+\/\.T:@]/g,validParts:/[dDjlNSwzWFmMntLoYyaABgGhHisueTIOPZcrU]/g,intParts:/[djwNzmnyYhHgGis]/g,tzParts:/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,tzClip:/[^-+\dA-Z]/g};var f=function t(e){var n=this;var i=l(c,e);n.dateSettings=i.dateSettings;n.separators=i.separators;n.validParts=i.validParts;n.intParts=i.intParts;n.tzParts=i.tzParts;n.tzClip=i.tzClip};f.prototype={constructor:f,getMonth:function t(e){var n=this;var i=void 0;i=u(e,n.dateSettings.monthsShort)+1;if(i===0){i=u(e,n.dateSettings.months)+1}return i},parseDate:function t(e,n){var r=this,a={date:null,year:null,month:null,day:null,hour:0,min:0,sec:0},s=r.dateSettings;var l=void 0,u=false,c=false,f=void 0,h=void 0,d=void 0,p=void 0,v=void 0,g=void 0,m=void 0;if(!e){return null}if(e instanceof Date){return e}if(n==="U"){l=parseInt(e);return l?new Date(l*1e3):e}switch(typeof e==="undefined"?"undefined":i(e)){case"number":return new Date(e);case"string":break;default:return null}var _=n.match(r.validParts);if(!_||_.length===0){throw new Error("Invalid date format definition.")}var y=e.replace(r.separators,"\0").split("\0");for(l=0;l<y.length;l++){f=y[l];h=parseInt(f);switch(_[l]){case"y":case"Y":if(h){g=f.length;a.year=g===2?parseInt((h<70?"20":"19")+f):h}else{return null}u=true;break;case"m":case"n":case"M":case"F":if(isNaN(h)){d=r.getMonth(f);if(d>0){a.month=d}else{return null}}else{if(h>=1&&h<=12){a.month=h}else{return null}}u=true;break;case"d":case"j":if(h>=1&&h<=31){a.day=h}else{return null}u=true;break;case"g":case"h":p=_.indexOf("a")>-1?_.indexOf("a"):_.indexOf("A")>-1?_.indexOf("A"):-1;m=y[p];if(p>-1){v=o(m,s.meridiem[0])?0:o(m,s.meridiem[1])?12:-1;if(h>=1&&h<=12&&v>-1){a.hour=h+v-1}else if(h>=0&&h<=23){a.hour=h}}else{if(h>=0&&h<=23){a.hour=h}else{return null}}c=true;break;case"G":case"H":if(h>=0&&h<=23){a.hour=h}else{return null}c=true;break;case"i":if(h>=0&&h<=59){a.min=h}else{return null}c=true;break;case"s":if(h>=0&&h<=59){a.sec=h}else{return null}c=true;break}}if(u===true&&a.year&&a.month&&a.day){a.date=new Date(a.year,a.month-1,a.day,a.hour,a.min,a.sec,0)}else{if(c!==true){return null}a.date=new Date(0,0,0,a.hour,a.min,a.sec,0)}return a.date},guessDate:function t(e,n){if(typeof e!=="string"){return e}var i=this,r=e.replace(i.separators,"\0").split("\0"),a=/^[djmn]/g,o=n.match(i.validParts),s=new Date,l=0;var u=void 0,c=void 0,f=void 0,h=void 0,d=void 0,p=void 0;if(!a.test(o[0])){return e}for(c=0;c<r.length;c++){var v=2;h=r[c];d=parseInt(h.substr(0,2));if(isNaN(d)){return null}switch(c){case 0:if(o[0]==="m"||o[0]==="n"){s.setMonth(d-1)}else{s.setDate(d)}break;case 1:if(o[0]==="m"||o[0]==="n"){s.setDate(d)}else{s.setMonth(d-1)}break;case 2:p=s.getFullYear();u=h.length;v=u<4?u:4;p=parseInt(u<4?p.toString().substr(0,4-u)+h:h.substr(0,4));if(!p){return null}s.setFullYear(p);break;case 3:s.setHours(d);break;case 4:s.setMinutes(d);break;case 5:s.setSeconds(d);break}f=h.substr(v);if(f.length>0){r.splice(c+1,0,f)}}return s},parseFormat:function t(e,n){var i=void 0;var o=this,l=o.dateSettings,u=/\\?(.?)/gi,c=function t(e,n){return i[e]?i[e]():n};i={d:function t(){return s(i.j(),2)},D:function t(){return l.daysShort[i.w()]},j:function t(){return n.getDate()},l:function t(){return l.days[i.w()]},N:function t(){return i.w()||7},w:function t(){return n.getDay()},z:function t(){var e=new Date(i.Y(),i.n()-1,i.j()),n=new Date(i.Y(),0,1);return Math.round((e-n)/r)},W:function t(){var e=new Date(i.Y(),i.n()-1,i.j()-i.N()+3),n=new Date(e.getFullYear(),0,4);return s(1+Math.round((e-n)/r/7),2)},F:function t(){return l.months[n.getMonth()]},m:function t(){return s(i.n(),2)},M:function t(){return l.monthsShort[n.getMonth()]},n:function t(){return n.getMonth()+1},t:function t(){return new Date(i.Y(),i.n(),0).getDate()},L:function t(){var e=i.Y();return e%4===0&&e%100!==0||e%400===0?1:0},o:function t(){var e=i.n(),n=i.W(),r=i.Y();return r+(e===12&&n<9?1:e===1&&n>9?-1:0)},Y:function t(){return n.getFullYear()},y:function t(){return i.Y().toString().slice(-2)},a:function t(){return i.A().toLowerCase()},A:function t(){var e=i.G()<12?0:1;return l.meridiem[e]},B:function t(){var e=n.getUTCHours()*a,i=n.getUTCMinutes()*60,r=n.getUTCSeconds();return s(Math.floor((e+i+r+a)/86.4)%1e3,3)},g:function t(){return i.G()%12||12},G:function t(){return n.getHours()},h:function t(){return s(i.g(),2)},H:function t(){return s(i.G(),2)},i:function t(){return s(n.getMinutes(),2)},s:function t(){return s(n.getSeconds(),2)},u:function t(){return s(n.getMilliseconds()*1e3,6)},e:function t(){var e=/\((.*)\)/.exec(String(n))[1];return e||"Coordinated Universal Time"},I:function t(){var e=new Date(i.Y(),0),n=Date.UTC(i.Y(),0),r=new Date(i.Y(),6),a=Date.UTC(i.Y(),6);return e-n!==r-a?1:0},O:function t(){var e=n.getTimezoneOffset(),i=Math.abs(e);return(e>0?"-":"+")+s(Math.floor(i/60)*100+i%60,4)},P:function t(){var e=i.O();return e.substr(0,3)+":"+e.substr(3,2)},T:function t(){var e=(String(n).match(o.tzParts)||[""]).pop().replace(o.tzClip,"");return e||"UTC"},Z:function t(){return-n.getTimezoneOffset()*60},c:function t(){return"Y-m-d\\TH:i:sP".replace(u,c)},r:function t(){return"D, d M Y H:i:s O".replace(u,c)},U:function t(){return n.getTime()/1e3||0}};return c(e,e)},formatDate:function t(e,n){var i=this;var r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u="";var c="\\";if(typeof e==="string"){e=i.parseDate(e,n);if(!e){return null}}if(e instanceof Date){o=n.length;for(r=0;r<o;r++){l=n.charAt(r);if(l==="S"||l===c){continue}if(r>0&&n.charAt(r-1)===c){u+=l;continue}s=i.parseFormat(l,e);if(r!==o-1&&i.intParts.test(l)&&n.charAt(r+1)==="S"){a=parseInt(s)||0;s+=i.dateSettings.ordinal(a)}u+=s}return u}return""}};e["a"]=f},function(t,e,n){"use strict";n.d(e,"a",function(){return a});n.d(e,"b",function(){return o});n.d(e,"c",function(){return s});var i=n(7);var r=n(15);function a(t,e,n,a,o,s){var l=NaN;var u=NaN;var c=(n-e)/a;if(c===1){l=t[e];u=t[e+1]}else if(c==2){l=(1-o)*t[e]+o*t[e+a];u=(1-o)*t[e+1]+o*t[e+a+1]}else if(c!==0){var f=t[e];var h=t[e+1];var d=0;var p=[0];for(var v=e+a;v<n;v+=a){var g=t[v];var m=t[v+1];d+=Math.sqrt((g-f)*(g-f)+(m-h)*(m-h));p.push(d);f=g;h=m}var _=o*d;var y=Object(i["a"])(p,_);if(y<0){var b=(_-p[-y-2])/(p[-y-1]-p[-y-2]);var w=e+(-y-2)*a;l=Object(r["c"])(t[w],t[w+a],b);u=Object(r["c"])(t[w+1],t[w+a+1],b)}else{l=t[e+y*a];u=t[e+y*a+1]}}if(s){s[0]=l;s[1]=u;return s}else{return[l,u]}}function o(t,e,n,i,a,o){if(n==e){return null}var s=void 0;if(a<t[e+i-1]){if(o){s=t.slice(e,e+i);s[i-1]=a;return s}else{return null}}else if(t[n-1]<a){if(o){s=t.slice(n-i,n);s[i-1]=a;return s}else{return null}}if(a==t[e+i-1]){return t.slice(e,e+i)}var l=e/i;var u=n/i;while(l<u){var c=l+u>>1;if(a<t[(c+1)*i-1]){u=c}else{l=c+1}}var f=t[l*i-1];if(a==f){return t.slice((l-1)*i,(l-1)*i+i)}var h=t[(l+1)*i-1];var d=(a-f)/(h-f);s=[];for(var p=0;p<i-1;++p){s.push(Object(r["c"])(t[(l-1)*i+p],t[l*i+p],d))}s.push(a);return s}function s(t,e,n,i,r,a,s){if(s){return o(t,e,n[n.length-1],i,r,a)}var l=void 0;if(r<t[i-1]){if(a){l=t.slice(0,i);l[i-1]=r;return l}else{return null}}if(t[t.length-1]<r){if(a){l=t.slice(t.length-i);l[i-1]=r;return l}else{return null}}for(var u=0,c=n.length;u<c;++u){var f=n[u];if(e==f){continue}if(r<t[e+i-1]){return null}else if(r<=t[f-1]){return o(t,e,f,i,r,false)}e=f}return null}},function(t,e,n){"use strict";var i=function t(e){this.opacity_=e.opacity;this.rotateWithView_=e.rotateWithView;this.rotation_=e.rotation;this.scale_=e.scale;this.snapToPixel_=e.snapToPixel};i.prototype.getOpacity=function(){return this.opacity_};i.prototype.getRotateWithView=function(){return this.rotateWithView_};i.prototype.getRotation=function(){return this.rotation_};i.prototype.getScale=function(){return this.scale_};i.prototype.getSnapToPixel=function(){return this.snapToPixel_};i.prototype.getAnchor=function(){};i.prototype.getImage=function(t){};i.prototype.getHitDetectionImage=function(t){};i.prototype.getImageState=function(){};i.prototype.getImageSize=function(){};i.prototype.getHitDetectionImageSize=function(){};i.prototype.getOrigin=function(){};i.prototype.getSize=function(){};i.prototype.setOpacity=function(t){this.opacity_=t};i.prototype.setRotateWithView=function(t){this.rotateWithView_=t};i.prototype.setRotation=function(t){this.rotation_=t};i.prototype.setScale=function(t){this.scale_=t};i.prototype.setSnapToPixel=function(t){this.snapToPixel_=t};i.prototype.listenImageChange=function(t,e){};i.prototype.load=function(){};i.prototype.unlistenImageChange=function(t,e){};e["a"]=i},function(t,e,n){"use strict";var i=n(247);var r=n(27);var a=n(251);var o=n(7);var s=n(4);var l=n(15);var u=n(104);var c=n(125);var f=function t(e){this.minZoom=e.minZoom!==undefined?e.minZoom:0;this.resolutions_=e.resolutions;Object(r["a"])(Object(o["g"])(this.resolutions_,function(t,e){return e-t},true),17);var n=void 0;if(!e.origins){for(var l=0,u=this.resolutions_.length-1;l<u;++l){if(!n){n=this.resolutions_[l]/this.resolutions_[l+1]}else{if(this.resolutions_[l]/this.resolutions_[l+1]!==n){n=undefined;break}}}}this.zoomFactor_=n;this.maxZoom=this.resolutions_.length-1;this.origin_=e.origin!==undefined?e.origin:null;this.origins_=null;if(e.origins!==undefined){this.origins_=e.origins;Object(r["a"])(this.origins_.length==this.resolutions_.length,20)}var c=e.extent;if(c!==undefined&&!this.origin_&&!this.origins_){this.origin_=Object(s["C"])(c)}Object(r["a"])(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18);this.tileSizes_=null;if(e.tileSizes!==undefined){this.tileSizes_=e.tileSizes;Object(r["a"])(this.tileSizes_.length==this.resolutions_.length,19)}this.tileSize_=e.tileSize!==undefined?e.tileSize:!this.tileSizes_?i["b"]:null;Object(r["a"])(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22);this.extent_=c!==undefined?c:null;this.fullTileRanges_=null;this.tmpSize_=[0,0];if(e.sizes!==undefined){this.fullTileRanges_=e.sizes.map(function(t,e){var n=new a["b"](Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));return n},this)}else if(c){this.calculateTileRanges_(c)}};var h=[0,0,0];f.prototype.forEachTileCoord=function(t,e,n){var i=this.getTileRangeForExtentAndZ(t,e);for(var r=i.minX,a=i.maxX;r<=a;++r){for(var o=i.minY,s=i.maxY;o<=s;++o){n([e,r,o])}}};f.prototype.forEachTileCoordParentTileRange=function(t,e,n,i,r){var o=void 0,s=void 0,l=void 0;var u=null;var c=t[0]-1;if(this.zoomFactor_===2){s=t[1];l=t[2]}else{u=this.getTileCoordExtent(t,r)}while(c>=this.minZoom){if(this.zoomFactor_===2){s=Math.floor(s/2);l=Math.floor(l/2);o=Object(a["a"])(s,s,l,l,i)}else{o=this.getTileRangeForExtentAndZ(u,c,i)}if(e.call(n,c,o)){return true}--c}return false};f.prototype.getExtent=function(){return this.extent_};f.prototype.getMaxZoom=function(){return this.maxZoom};f.prototype.getMinZoom=function(){return this.minZoom};f.prototype.getOrigin=function(t){if(this.origin_){return this.origin_}else{return this.origins_[t]}};f.prototype.getResolution=function(t){return this.resolutions_[t]};f.prototype.getResolutions=function(){return this.resolutions_};f.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){var i=t[1]*2;var r=t[2]*2;return Object(a["a"])(i,i+1,r,r+1,e)}var o=this.getTileCoordExtent(t,n);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null};f.prototype.getTileRangeExtent=function(t,e,n){var i=this.getOrigin(t);var r=this.getResolution(t);var a=Object(u["d"])(this.getTileSize(t),this.tmpSize_);var o=i[0]+e.minX*a[0]*r;var l=i[0]+(e.maxX+1)*a[0]*r;var c=i[1]+e.minY*a[1]*r;var f=i[1]+(e.maxY+1)*a[1]*r;return Object(s["k"])(o,c,l,f,n)};f.prototype.getTileRangeForExtentAndZ=function(t,e,n){var i=h;this.getTileCoordForXYAndZ_(t[0],t[1],e,false,i);var r=i[1];var o=i[2];this.getTileCoordForXYAndZ_(t[2],t[3],e,true,i);return Object(a["a"])(r,i[1],o,i[2],n)};f.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]);var n=this.getResolution(t[0]);var i=Object(u["d"])(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]+(t[2]+.5)*i[1]*n]};f.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]);var i=this.getResolution(t[0]);var r=Object(u["d"])(this.getTileSize(t[0]),this.tmpSize_);var a=n[0]+t[1]*r[0]*i;var o=n[1]+t[2]*r[1]*i;var l=a+r[0]*i;var c=o+r[1]*i;return Object(s["k"])(a,o,l,c,e)};f.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,false,n)};f.prototype.getTileCoordForXYAndResolution_=function(t,e,n,i,r){var a=this.getZForResolution(n);var o=n/this.getResolution(a);var s=this.getOrigin(a);var l=Object(u["d"])(this.getTileSize(a),this.tmpSize_);var f=i?.5:0;var h=i?0:.5;var d=Math.floor((t-s[0])/n+f);var p=Math.floor((e-s[1])/n+h);var v=o*d/l[0];var g=o*p/l[1];if(i){v=Math.ceil(v)-1;g=Math.ceil(g)-1}else{v=Math.floor(v);g=Math.floor(g)}return Object(c["a"])(a,v,g,r)};f.prototype.getTileCoordForXYAndZ_=function(t,e,n,i,r){var a=this.getOrigin(n);var o=this.getResolution(n);var s=Object(u["d"])(this.getTileSize(n),this.tmpSize_);var l=i?.5:0;var f=i?0:.5;var h=Math.floor((t-a[0])/o+l);var d=Math.floor((e-a[1])/o+f);var p=h/s[0];var v=d/s[1];if(i){p=Math.ceil(p)-1;v=Math.ceil(v)-1}else{p=Math.floor(p);v=Math.floor(v)}return Object(c["a"])(n,p,v,r)};f.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,false,n)};f.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]};f.prototype.getTileSize=function(t){if(this.tileSize_){return this.tileSize_}else{return this.tileSizes_[t]}};f.prototype.getFullTileRange=function(t){if(!this.fullTileRanges_){return null}else{return this.fullTileRanges_[t]}};f.prototype.getZForResolution=function(t,e){var n=Object(o["h"])(this.resolutions_,t,e||0);return Object(l["a"])(n,this.minZoom,this.maxZoom)};f.prototype.calculateTileRanges_=function(t){var e=this.resolutions_.length;var n=new Array(e);for(var i=this.minZoom;i<e;++i){n[i]=this.getTileRangeForExtentAndZ(t,i)}this.fullTileRanges_=n};e["a"]=f},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var i=n(1);var r=n(20);var a=n(368);var o=n(30);var s=n(42);var l=n(10);var u=n(104);var c=n(203);var f=n(125);var h=n(229);var d=function t(e){c["a"].call(this,{attributions:e.attributions,extent:e.extent,projection:e.projection,state:e.state,wrapX:e.wrapX});this.opaque_=e.opaque!==undefined?e.opaque:false;this.tilePixelRatio_=e.tilePixelRatio!==undefined?e.tilePixelRatio:1;this.tileGrid=e.tileGrid!==undefined?e.tileGrid:null;this.tileCache=new a["a"](e.cacheSize);this.tmpSize=[0,0];this.key_="";this.tileOptions={transition:e.transition}};Object(i["d"])(d,c["a"]);d.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()};d.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);if(n){n.expireCache(e)}};d.prototype.forEachLoadedTile=function(t,e,n,i){var r=this.getTileCacheForProjection(t);if(!r){return false}var a=true;var s=void 0,l=void 0,u=void 0;for(var c=n.minX;c<=n.maxX;++c){for(var h=n.minY;h<=n.maxY;++h){l=Object(f["d"])(e,c,h);u=false;if(r.containsKey(l)){s=r.get(l);u=s.getState()===o["a"].LOADED;if(u){u=i(s)!==false}}if(!u){a=false}}}return a};d.prototype.getGutter=function(t){return 0};d.prototype.getKey=function(){return this.key_};d.prototype.setKey=function(t){if(this.key_!==t){this.key_=t;this.changed()}};d.prototype.getOpaque=function(t){return this.opaque_};d.prototype.getResolutions=function(){return this.tileGrid.getResolutions()};d.prototype.getTile=function(t,e,n,i,r){};d.prototype.getTileGrid=function(){return this.tileGrid};d.prototype.getTileGridForProjection=function(t){if(!this.tileGrid){return Object(h["c"])(t)}else{return this.tileGrid}};d.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(e&&!Object(l["f"])(e,t)){return null}else{return this.tileCache}};d.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_};d.prototype.getTilePixelSize=function(t,e,n){var i=this.getTileGridForProjection(n);var r=this.getTilePixelRatio(e);var a=Object(u["d"])(i.getTileSize(t),this.tmpSize);if(r==1){return a}else{return Object(u["c"])(a,r,this.tmpSize)}};d.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=e!==undefined?e:this.getProjection();var i=this.getTileGridForProjection(n);if(this.getWrapX()&&n.isGlobal()){t=Object(h["d"])(i,t,n)}return Object(f["f"])(t,i)?t:null};d.prototype.refresh=function(){this.tileCache.clear();this.changed()};d.prototype.useTile=r["c"];var p=function t(e,n){s["a"].call(this,e);this.tile=n};Object(i["d"])(p,s["a"]);e["b"]=d},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Tooltip 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Tooltip 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(r=[n(38),n(371),n(448),n(447),n(118),n(236)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){t.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,track:false,close:null,open:null},_addDescribedBy:function(e,n){var i=(e.attr("aria-describedby")||"").split(/\s+/);i.push(n);e.data("ui-tooltip-id",n).attr("aria-describedby",t.trim(i.join(" ")))},_removeDescribedBy:function(e){var n=e.data("ui-tooltip-id"),i=(e.attr("aria-describedby")||"").split(/\s+/),r=t.inArray(n,i);if(r!==-1){i.splice(r,1)}e.removeData("ui-tooltip-id");i=t.trim(i.join(" "));if(i){e.attr("aria-describedby",i)}else{e.removeAttr("aria-describedby")}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=t([])},_setOption:function(e,n){var i=this;this._super(e,n);if(e==="content"){t.each(this.tooltips,function(t,e){i._updateContent(e.element)})}},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var e=this;t.each(this.tooltips,function(n,i){var r=t.Event("blur");r.target=r.currentTarget=i.element[0];e.close(r,true)});this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var e=t(this);if(e.is("[title]")){return e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")}}))},_enable:function(){this.disabledTitles.each(function(){var e=t(this);if(e.data("ui-tooltip-title")){e.attr("title",e.data("ui-tooltip-title"))}});this.disabledTitles=t([])},open:function(e){var n=this,i=t(e?e.target:this.element).closest(this.options.items);if(!i.length||i.data("ui-tooltip-id")){return}if(i.attr("title")){i.data("ui-tooltip-title",i.attr("title"))}i.data("ui-tooltip-open",true);if(e&&e.type==="mouseover"){i.parents().each(function(){var e=t(this),i;if(e.data("ui-tooltip-open")){i=t.Event("blur");i.target=i.currentTarget=this;n.close(i,true)}if(e.attr("title")){e.uniqueId();n.parents[this.id]={element:this,title:e.attr("title")};e.attr("title","")}})}this._registerCloseHandlers(e,i);this._updateContent(i,e)},_updateContent:function(t,e){var n,i=this.options.content,r=this,a=e?e.type:null;if(typeof i==="string"||i.nodeType||i.jquery){return this._open(e,t,i)}n=i.call(t[0],function(n){r._delay(function(){if(!t.data("ui-tooltip-open")){return}if(e){e.type=a}this._open(e,t,n)})});if(n){this._open(e,t,n)}},_open:function(e,n,i){var r,a,o,s,l=t.extend({},this.options.position);if(!i){return}r=this._find(n);if(r){r.tooltip.find(".ui-tooltip-content").html(i);return}if(n.is("[title]")){if(e&&e.type==="mouseover"){n.attr("title","")}else{n.removeAttr("title")}}r=this._tooltip(n);a=r.tooltip;this._addDescribedBy(n,a.attr("id"));a.find(".ui-tooltip-content").html(i);this.liveRegion.children().hide();s=t("<div>").html(a.find(".ui-tooltip-content").html());s.removeAttr("name").find("[name]").removeAttr("name");s.removeAttr("id").find("[id]").removeAttr("id");s.appendTo(this.liveRegion);function u(t){l.of=t;if(a.is(":hidden")){return}a.position(l)}if(this.options.track&&e&&/^mouse/.test(e.type)){this._on(this.document,{mousemove:u});u(e)}else{a.position(t.extend({of:n},this.options.position))}a.hide();this._show(a,this.options.show);if(this.options.track&&this.options.show&&this.options.show.delay){o=this.delayedShow=setInterval(function(){if(a.is(":visible")){u(l.of);clearInterval(o)}},t.fx.interval)}this._trigger("open",e,{tooltip:a})},_registerCloseHandlers:function(e,n){var i={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=n[0];this.close(i,true)}}};if(n[0]!==this.element[0]){i.remove=function(){this._removeTooltip(this._find(n).tooltip)}}if(!e||e.type==="mouseover"){i.mouseleave="close"}if(!e||e.type==="focusin"){i.focusout="close"}this._on(true,n,i)},close:function(e){var n,i=this,r=t(e?e.currentTarget:this.element),a=this._find(r);if(!a){r.removeData("ui-tooltip-open");return}n=a.tooltip;if(a.closing){return}clearInterval(this.delayedShow);if(r.data("ui-tooltip-title")&&!r.attr("title")){r.attr("title",r.data("ui-tooltip-title"))}this._removeDescribedBy(r);a.hiding=true;n.stop(true);this._hide(n,this.options.hide,function(){i._removeTooltip(t(this))});r.removeData("ui-tooltip-open");this._off(r,"mouseleave focusout keyup");if(r[0]!==this.element[0]){this._off(r,"remove")}this._off(this.document,"mousemove");if(e&&e.type==="mouseleave"){t.each(this.parents,function(e,n){t(n.element).attr("title",n.title);delete i.parents[e]})}a.closing=true;this._trigger("close",e,{tooltip:n});if(!a.hiding){a.closing=false}},_tooltip:function(e){var n=t("<div>").attr("role","tooltip"),i=t("<div>").appendTo(n),r=n.uniqueId().attr("id");this._addClass(i,"ui-tooltip-content");this._addClass(n,"ui-tooltip","ui-widget ui-widget-content");n.appendTo(this._appendTo(e));return this.tooltips[r]={element:e,tooltip:n}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove();delete this.tooltips[t.attr("id")]},_appendTo:function(t){var e=t.closest(".ui-front, dialog");if(!e.length){e=this.document[0].body}return e},_destroy:function(){var e=this;t.each(this.tooltips,function(n,i){var r=t.Event("blur"),a=i.element;r.target=r.currentTarget=a[0];e.close(r,true);t("#"+n).remove();if(a.data("ui-tooltip-title")){if(!a.attr("title")){a.attr("title",a.data("ui-tooltip-title"))}a.removeData("ui-tooltip-title")}});this.liveRegion.remove()}});if(t.uiBackCompat!==false){t.widget("ui.tooltip",t.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);if(this.options.tooltipClass){t.tooltip.addClass(this.options.tooltipClass)}return t}})}return t.ui.tooltip})},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Datepicker 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Datepicker 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(r=[n(38),n(118),n(371)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){t.extend(t.ui,{datepicker:{version:"1.12.1"}});var e;function n(t){var e,n;while(t.length&&t[0]!==document){e=t.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){n=parseInt(t.css("zIndex"),10);if(!isNaN(n)&&n!==0){return n}}t=t.parent()}return 0}function i(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};t.extend(this._defaults,this.regional[""]);this.regional.en=t.extend(true,{},this.regional[""]);this.regional["en-US"]=t.extend(true,{},this.regional.en);this.dpDiv=r(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){o(this._defaults,t||{});return this},_attachDatepicker:function(e,n){var i,r,a;i=e.nodeName.toLowerCase();r=i==="div"||i==="span";if(!e.id){this.uuid+=1;e.id="dp"+this.uuid}a=this._newInst(t(e),r);a.settings=t.extend({},n||{});if(i==="input"){this._connectDatepicker(e,a)}else if(r){this._inlineDatepicker(e,a)}},_newInst:function(e,n){var i=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:i,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:!n?this.dpDiv:r(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}},_connectDatepicker:function(e,n){var i=t(e);n.append=t([]);n.trigger=t([]);if(i.hasClass(this.markerClassName)){return}this._attachments(i,n);i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp);this._autoSize(n);t.data(e,"datepicker",n);if(n.settings.disabled){this._disableDatepicker(e)}},_attachments:function(e,n){var i,r,a,o=this._get(n,"appendText"),s=this._get(n,"isRTL");if(n.append){n.append.remove()}if(o){n.append=t("<span class='"+this._appendClass+"'>"+o+"</span>");e[s?"before":"after"](n.append)}e.off("focus",this._showDatepicker);if(n.trigger){n.trigger.remove()}i=this._get(n,"showOn");if(i==="focus"||i==="both"){e.on("focus",this._showDatepicker)}if(i==="button"||i==="both"){r=this._get(n,"buttonText");a=this._get(n,"buttonImage");n.trigger=t(this._get(n,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:a,alt:r,title:r}):t("<button type='button'></button>").addClass(this._triggerClass).html(!a?r:t("<img/>").attr({src:a,alt:r,title:r})));e[s?"before":"after"](n.trigger);n.trigger.on("click",function(){if(t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]){t.datepicker._hideDatepicker()}else if(t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]){t.datepicker._hideDatepicker();t.datepicker._showDatepicker(e[0])}else{t.datepicker._showDatepicker(e[0])}return false})}},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,r,a=new Date(2009,12-1,20),o=this._get(t,"dateFormat");if(o.match(/[DM]/)){e=function(t){n=0;i=0;for(r=0;r<t.length;r++){if(t[r].length>n){n=t[r].length;i=r}}return i};a.setMonth(e(this._get(t,o.match(/MM/)?"monthNames":"monthNamesShort")));a.setDate(e(this._get(t,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())}t.input.attr("size",this._formatDate(t,a).length)}},_inlineDatepicker:function(e,n){var i=t(e);if(i.hasClass(this.markerClassName)){return}i.addClass(this.markerClassName).append(n.dpDiv);t.data(e,"datepicker",n);this._setDate(n,this._getDefaultDate(n),true);this._updateDatepicker(n);this._updateAlternate(n);if(n.settings.disabled){this._disableDatepicker(e)}n.dpDiv.css("display","block")},_dialogDatepicker:function(e,n,i,r,a){var s,l,u,c,f,h=this._dialogInst;if(!h){this.uuid+=1;s="dp"+this.uuid;this._dialogInput=t("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.on("keydown",this._doKeyDown);t("body").append(this._dialogInput);h=this._dialogInst=this._newInst(this._dialogInput,false);h.settings={};t.data(this._dialogInput[0],"datepicker",h)}o(h.settings,r||{});n=n&&n.constructor===Date?this._formatDate(h,n):n;this._dialogInput.val(n);this._pos=a?a.length?a:[a.pageX,a.pageY]:null;if(!this._pos){l=document.documentElement.clientWidth;u=document.documentElement.clientHeight;c=document.documentElement.scrollLeft||document.body.scrollLeft;f=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[l/2-100+c,u/2-150+f]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");h.settings.onSelect=i;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if(t.blockUI){t.blockUI(this.dpDiv)}t.data(this._dialogInput[0],"datepicker",h);return this},_destroyDatepicker:function(n){var i,r=t(n),a=t.data(n,"datepicker");if(!r.hasClass(this.markerClassName)){return}i=n.nodeName.toLowerCase();t.removeData(n,"datepicker");if(i==="input"){a.append.remove();a.trigger.remove();r.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)}else if(i==="div"||i==="span"){r.removeClass(this.markerClassName).empty()}if(e===a){e=null}},_enableDatepicker:function(e){var n,i,r=t(e),a=t.data(e,"datepicker");if(!r.hasClass(this.markerClassName)){return}n=e.nodeName.toLowerCase();if(n==="input"){e.disabled=false;a.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(n==="div"||n==="span"){i=r.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled");i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t})},_disableDatepicker:function(e){var n,i,r=t(e),a=t.data(e,"datepicker");if(!r.hasClass(this.markerClassName)){return}n=e.nodeName.toLowerCase();if(n==="input"){e.disabled=true;a.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(n==="div"||n==="span"){i=r.children("."+this._inlineClass);i.children().addClass("ui-state-disabled");i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t});this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(t){if(!t){return false}for(var e=0;e<this._disabledInputs.length;e++){if(this._disabledInputs[e]===t){return true}}return false},_getInst:function(e){try{return t.data(e,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,n,i){var r,a,s,l,u=this._getInst(e);if(arguments.length===2&&typeof n==="string"){return n==="defaults"?t.extend({},t.datepicker._defaults):u?n==="all"?t.extend({},u.settings):this._get(u,n):null}r=n||{};if(typeof n==="string"){r={};r[n]=i}if(u){if(this._curInst===u){this._hideDatepicker()}a=this._getDateDatepicker(e,true);s=this._getMinMaxDate(u,"min");l=this._getMinMaxDate(u,"max");o(u.settings,r);if(s!==null&&r.dateFormat!==undefined&&r.minDate===undefined){u.settings.minDate=this._formatDate(u,s)}if(l!==null&&r.dateFormat!==undefined&&r.maxDate===undefined){u.settings.maxDate=this._formatDate(u,l)}if("disabled"in r){if(r.disabled){this._disableDatepicker(e)}else{this._enableDatepicker(e)}}this._attachments(t(e),u);this._autoSize(u);this._setDate(u,a);this._updateAlternate(u);this._updateDatepicker(u)}},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);if(e){this._updateDatepicker(e)}},_setDateDatepicker:function(t,e){var n=this._getInst(t);if(n){this._setDate(n,e);this._updateDatepicker(n);this._updateAlternate(n)}},_getDateDatepicker:function(t,e){var n=this._getInst(t);if(n&&!n.inline){this._setDateFromField(n,e)}return n?this._getDate(n):null},_doKeyDown:function(e){var n,i,r,a=t.datepicker._getInst(e.target),o=true,s=a.dpDiv.is(".ui-datepicker-rtl");a._keyEvent=true;if(t.datepicker._datepickerShowing){switch(e.keyCode){case 9:t.datepicker._hideDatepicker();o=false;break;case 13:r=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",a.dpDiv);if(r[0]){t.datepicker._selectDay(e.target,a.selectedMonth,a.selectedYear,r[0])}n=t.datepicker._get(a,"onSelect");if(n){i=t.datepicker._formatDate(a);n.apply(a.input?a.input[0]:null,[i,a])}else{t.datepicker._hideDatepicker()}return false;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 35:if(e.ctrlKey||e.metaKey){t.datepicker._clearDate(e.target)}o=e.ctrlKey||e.metaKey;break;case 36:if(e.ctrlKey||e.metaKey){t.datepicker._gotoToday(e.target)}o=e.ctrlKey||e.metaKey;break;case 37:if(e.ctrlKey||e.metaKey){t.datepicker._adjustDate(e.target,s?+1:-1,"D")}o=e.ctrlKey||e.metaKey;if(e.originalEvent.altKey){t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M")}break;case 38:if(e.ctrlKey||e.metaKey){t.datepicker._adjustDate(e.target,-7,"D")}o=e.ctrlKey||e.metaKey;break;case 39:if(e.ctrlKey||e.metaKey){t.datepicker._adjustDate(e.target,s?-1:+1,"D")}o=e.ctrlKey||e.metaKey;if(e.originalEvent.altKey){t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M")}break;case 40:if(e.ctrlKey||e.metaKey){t.datepicker._adjustDate(e.target,+7,"D")}o=e.ctrlKey||e.metaKey;break;default:o=false}}else if(e.keyCode===36&&e.ctrlKey){t.datepicker._showDatepicker(this)}else{o=false}if(o){e.preventDefault();e.stopPropagation()}},_doKeyPress:function(e){var n,i,r=t.datepicker._getInst(e.target);if(t.datepicker._get(r,"constrainInput")){n=t.datepicker._possibleChars(t.datepicker._get(r,"dateFormat"));i=String.fromCharCode(e.charCode==null?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||(i<" "||!n||n.indexOf(i)>-1)}},_doKeyUp:function(e){var n,i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal){try{n=t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i));if(n){t.datepicker._setDateFromField(i);t.datepicker._updateAlternate(i);t.datepicker._updateDatepicker(i)}}catch(t){}}return true},_showDatepicker:function(e){e=e.target||e;if(e.nodeName.toLowerCase()!=="input"){e=t("input",e.parentNode)[0]}if(t.datepicker._isDisabledDatepicker(e)||t.datepicker._lastInput===e){return}var i,r,a,s,l,u,c;i=t.datepicker._getInst(e);if(t.datepicker._curInst&&t.datepicker._curInst!==i){t.datepicker._curInst.dpDiv.stop(true,true);if(i&&t.datepicker._datepickerShowing){t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])}}r=t.datepicker._get(i,"beforeShow");a=r?r.apply(e,[e,i]):{};if(a===false){return}o(i.settings,a);i.lastVal=null;t.datepicker._lastInput=e;t.datepicker._setDateFromField(i);if(t.datepicker._inDialog){e.value=""}if(!t.datepicker._pos){t.datepicker._pos=t.datepicker._findPos(e);t.datepicker._pos[1]+=e.offsetHeight}s=false;t(e).parents().each(function(){s|=t(this).css("position")==="fixed";return!s});l={left:t.datepicker._pos[0],top:t.datepicker._pos[1]};t.datepicker._pos=null;i.dpDiv.empty();i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});t.datepicker._updateDatepicker(i);l=t.datepicker._checkOffset(i,l,s);i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":s?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"});if(!i.inline){u=t.datepicker._get(i,"showAnim");c=t.datepicker._get(i,"duration");i.dpDiv.css("z-index",n(t(e))+1);t.datepicker._datepickerShowing=true;if(t.effects&&t.effects.effect[u]){i.dpDiv.show(u,t.datepicker._get(i,"showOptions"),c)}else{i.dpDiv[u||"show"](u?c:null)}if(t.datepicker._shouldFocusInput(i)){i.input.trigger("focus")}t.datepicker._curInst=i}},_updateDatepicker:function(n){this.maxRows=4;e=n;n.dpDiv.empty().append(this._generateHTML(n));this._attachHandlers(n);var i,r=this._getNumberOfMonths(n),o=r[1],s=17,l=n.dpDiv.find("."+this._dayOverClass+" a");if(l.length>0){a.apply(l.get(0))}n.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(o>1){n.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",s*o+"em")}n.dpDiv[(r[0]!==1||r[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");n.dpDiv[(this._get(n,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(n===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(n)){n.input.trigger("focus")}if(n.yearshtml){i=n.yearshtml;setTimeout(function(){if(i===n.yearshtml&&n.yearshtml){n.dpDiv.find("select.ui-datepicker-year:first").replaceWith(n.yearshtml)}i=n.yearshtml=null},0)}},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,n,i){var r=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,s=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:t(document).scrollLeft()),u=document.documentElement.clientHeight+(i?0:t(document).scrollTop());n.left-=this._get(e,"isRTL")?r-o:0;n.left-=i&&n.left===e.input.offset().left?t(document).scrollLeft():0;n.top-=i&&n.top===e.input.offset().top+s?t(document).scrollTop():0;n.left-=Math.min(n.left,n.left+r>l&&l>r?Math.abs(n.left+r-l):0);n.top-=Math.min(n.top,n.top+a>u&&u>a?Math.abs(a+s):0);return n},_findPos:function(e){var n,i=this._getInst(e),r=this._get(i,"isRTL");while(e&&(e.type==="hidden"||e.nodeType!==1||t.expr.filters.hidden(e))){e=e[r?"previousSibling":"nextSibling"]}n=t(e).offset();return[n.left,n.top]},_hideDatepicker:function(e){var n,i,r,a,o=this._curInst;if(!o||e&&o!==t.data(e,"datepicker")){return}if(this._datepickerShowing){n=this._get(o,"showAnim");i=this._get(o,"duration");r=function(){t.datepicker._tidyDialog(o)};if(t.effects&&(t.effects.effect[n]||t.effects[n])){o.dpDiv.hide(n,t.datepicker._get(o,"showOptions"),i,r)}else{o.dpDiv[n==="slideDown"?"slideUp":n==="fadeIn"?"fadeOut":"hide"](n?i:null,r)}if(!n){r()}this._datepickerShowing=false;a=this._get(o,"onClose");if(a){a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(t.blockUI){t.unblockUI();t("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!t.datepicker._curInst){return}var n=t(e.target),i=t.datepicker._getInst(n[0]);if(n[0].id!==t.datepicker._mainDivId&&n.parents("#"+t.datepicker._mainDivId).length===0&&!n.hasClass(t.datepicker.markerClassName)&&!n.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&!(t.datepicker._inDialog&&t.blockUI)||n.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==i){t.datepicker._hideDatepicker()}},_adjustDate:function(e,n,i){var r=t(e),a=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0])){return}this._adjustInstDate(a,n+(i==="M"?this._get(a,"showCurrentAtPos"):0),i);this._updateDatepicker(a)},_gotoToday:function(e){var n,i=t(e),r=this._getInst(i[0]);if(this._get(r,"gotoCurrent")&&r.currentDay){r.selectedDay=r.currentDay;r.drawMonth=r.selectedMonth=r.currentMonth;r.drawYear=r.selectedYear=r.currentYear}else{n=new Date;r.selectedDay=n.getDate();r.drawMonth=r.selectedMonth=n.getMonth();r.drawYear=r.selectedYear=n.getFullYear()}this._notifyChange(r);this._adjustDate(i)},_selectMonthYear:function(e,n,i){var r=t(e),a=this._getInst(r[0]);a["selected"+(i==="M"?"Month":"Year")]=a["draw"+(i==="M"?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10);this._notifyChange(a);this._adjustDate(r)},_selectDay:function(e,n,i,r){var a,o=t(e);if(t(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])){return}a=this._getInst(o[0]);a.selectedDay=a.currentDay=t("a",r).html();a.selectedMonth=a.currentMonth=n;a.selectedYear=a.currentYear=i;this._selectDate(e,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear))},_clearDate:function(e){var n=t(e);this._selectDate(n,"")},_selectDate:function(e,n){var i,r=t(e),a=this._getInst(r[0]);n=n!=null?n:this._formatDate(a);if(a.input){a.input.val(n)}this._updateAlternate(a);i=this._get(a,"onSelect");if(i){i.apply(a.input?a.input[0]:null,[n,a])}else if(a.input){a.input.trigger("change")}if(a.inline){this._updateDatepicker(a)}else{this._hideDatepicker();this._lastInput=a.input[0];if(typeof a.input[0]!=="object"){a.input.trigger("focus")}this._lastInput=null}},_updateAlternate:function(e){var n,i,r,a=this._get(e,"altField");if(a){n=this._get(e,"altFormat")||this._get(e,"dateFormat");i=this._getDate(e);r=this.formatDate(n,i,this._getFormatConfig(e));t(a).val(r)}},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));e=n.getTime();n.setMonth(0);n.setDate(1);return Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(e,n,i){if(e==null||n==null){throw"Invalid arguments"}n=typeof n==="object"?n.toString():n+"";if(n===""){return null}var r,a,o,s=0,l=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,u=typeof l!=="string"?l:(new Date).getFullYear()%100+parseInt(l,10),c=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,f=(i?i.dayNames:null)||this._defaults.dayNames,h=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,d=(i?i.monthNames:null)||this._defaults.monthNames,p=-1,v=-1,g=-1,m=-1,_=false,y,b=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;if(n){r++}return n},w=function(t){var e=b(t),i=t==="@"?14:t==="!"?20:t==="y"&&e?4:t==="o"?3:2,r=t==="y"?i:1,a=new RegExp("^\\d{"+r+","+i+"}"),o=n.substring(s).match(a);if(!o){throw"Missing number at position "+s}s+=o[0].length;return parseInt(o[0],10)},x=function(e,i,r){var a=-1,o=t.map(b(e)?r:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});t.each(o,function(t,e){var i=e[1];if(n.substr(s,i.length).toLowerCase()===i.toLowerCase()){a=e[0];s+=i.length;return false}});if(a!==-1){return a+1}else{throw"Unknown name at position "+s}},S=function(){if(n.charAt(s)!==e.charAt(r)){throw"Unexpected literal at position "+s}s++};for(r=0;r<e.length;r++){if(_){if(e.charAt(r)==="'"&&!b("'")){_=false}else{S()}}else{switch(e.charAt(r)){case"d":g=w("d");break;case"D":x("D",c,f);break;case"o":m=w("o");break;case"m":v=w("m");break;case"M":v=x("M",h,d);break;case"y":p=w("y");break;case"@":y=new Date(w("@"));p=y.getFullYear();v=y.getMonth()+1;g=y.getDate();break;case"!":y=new Date((w("!")-this._ticksTo1970)/1e4);p=y.getFullYear();v=y.getMonth()+1;g=y.getDate();break;case"'":if(b("'")){S()}else{_=true}break;default:S()}}}if(s<n.length){o=n.substr(s);if(!/^\s+/.test(o)){throw"Extra/unparsed characters found in date: "+o}}if(p===-1){p=(new Date).getFullYear()}else if(p<100){p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=u?0:-100)}if(m>-1){v=1;g=m;do{a=this._getDaysInMonth(p,v-1);if(g<=a){break}v++;g-=a}while(true)}y=this._daylightSavingAdjust(new Date(p,v-1,g));if(y.getFullYear()!==p||y.getMonth()+1!==v||y.getDate()!==g){throw"Invalid date"}return y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(t,e,n){if(!e){return""}var i,r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,a=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;if(n){i++}return n},u=function(t,e,n){var i=""+e;if(l(t)){while(i.length<n){i="0"+i}}return i},c=function(t,e,n,i){return l(t)?i[e]:n[e]},f="",h=false;if(e){for(i=0;i<t.length;i++){if(h){if(t.charAt(i)==="'"&&!l("'")){h=false}else{f+=t.charAt(i)}}else{switch(t.charAt(i)){case"d":f+=u("d",e.getDate(),2);break;case"D":f+=c("D",e.getDay(),r,a);break;case"o":f+=u("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":f+=u("m",e.getMonth()+1,2);break;case"M":f+=c("M",e.getMonth(),o,s);break;case"y":f+=l("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":f+=e.getTime();break;case"!":f+=e.getTime()*1e4+this._ticksTo1970;break;case"'":if(l("'")){f+="'"}else{h=true}break;default:f+=t.charAt(i)}}}}return f},_possibleChars:function(t){var e,n="",i=false,r=function(n){var i=e+1<t.length&&t.charAt(e+1)===n;if(i){e++}return i};for(e=0;e<t.length;e++){if(i){if(t.charAt(e)==="'"&&!r("'")){i=false}else{n+=t.charAt(e)}}else{switch(t.charAt(e)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":if(r("'")){n+="'"}else{i=true}break;default:n+=t.charAt(e)}}}return n},_get:function(t,e){return t.settings[e]!==undefined?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()===t.lastVal){return}var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,r=this._getDefaultDate(t),a=r,o=this._getFormatConfig(t);try{a=this.parseDate(n,i,o)||r}catch(t){i=e?"":i}t.selectedDay=a.getDate();t.drawMonth=t.selectedMonth=a.getMonth();t.drawYear=t.selectedYear=a.getFullYear();t.currentDay=i?a.getDate():0;t.currentMonth=i?a.getMonth():0;t.currentYear=i?a.getFullYear():0;this._adjustInstDate(t)},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,n,i){var r=function(t){var e=new Date;e.setDate(e.getDate()+t);return e},a=function(n){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),n,t.datepicker._getFormatConfig(e))}catch(t){}var i=(n.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,r=i.getFullYear(),a=i.getMonth(),o=i.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(n);while(l){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=parseInt(l[1],10)*7;break;case"m":case"M":a+=parseInt(l[1],10);o=Math.min(o,t.datepicker._getDaysInMonth(r,a));break;case"y":case"Y":r+=parseInt(l[1],10);o=Math.min(o,t.datepicker._getDaysInMonth(r,a));break}l=s.exec(n)}return new Date(r,a,o)},o=n==null||n===""?i:typeof n==="string"?a(n):typeof n==="number"?isNaN(n)?i:r(n):new Date(n.getTime());o=o&&o.toString()==="Invalid Date"?i:o;if(o){o.setHours(0);o.setMinutes(0);o.setSeconds(0);o.setMilliseconds(0)}return this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(t){if(!t){return null}t.setHours(t.getHours()>12?t.getHours()+2:0);return t},_setDate:function(t,e,n){var i=!e,r=t.selectedMonth,a=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate();t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth();t.drawYear=t.selectedYear=t.currentYear=o.getFullYear();if((r!==t.selectedMonth||a!==t.selectedYear)&&!n){this._notifyChange(t)}this._adjustInstDate(t);if(t.input){t.input.val(i?"":this._formatDate(t))}},_getDate:function(t){var e=!t.currentYear||t.input&&t.input.val()===""?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var n=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(i,-n,"M")},next:function(){t.datepicker._adjustDate(i,+n,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(i)},selectDay:function(){t.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){t.datepicker._selectMonthYear(i,this,"M");return false},selectYear:function(){t.datepicker._selectMonthYear(i,this,"Y");return false}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,r,a,o,s,l,u,c,f,h,d,p,v,g,m,_,y,b,w,x,S,C,E,O,T,M,I,R,N,A,L,P,D,j,k,F,$,G=new Date,U=this._daylightSavingAdjust(new Date(G.getFullYear(),G.getMonth(),G.getDate())),Y=this._get(t,"isRTL"),V=this._get(t,"showButtonPanel"),H=this._get(t,"hideIfNoPrevNext"),z=this._get(t,"navigationAsDateFormat"),B=this._getNumberOfMonths(t),W=this._get(t,"showCurrentAtPos"),q=this._get(t,"stepMonths"),X=B[0]!==1||B[1]!==1,K=this._daylightSavingAdjust(!t.currentDay?new Date(9999,9,9):new Date(t.currentYear,t.currentMonth,t.currentDay)),Z=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),J=t.drawMonth-W,tt=t.drawYear;if(J<0){J+=12;tt--}if(Q){e=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-B[0]*B[1]+1,Q.getDate()));e=Z&&e<Z?Z:e;while(this._daylightSavingAdjust(new Date(tt,J,1))>e){J--;if(J<0){J=11;tt--}}}t.drawMonth=J;t.drawYear=tt;n=this._get(t,"prevText");n=!z?n:this.formatDate(n,this._daylightSavingAdjust(new Date(tt,J-q,1)),this._getFormatConfig(t));i=this._canAdjustMonth(t,-1,tt,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+n+"</span></a>":H?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+n+"</span></a>";r=this._get(t,"nextText");r=!z?r:this.formatDate(r,this._daylightSavingAdjust(new Date(tt,J+q,1)),this._getFormatConfig(t));a=this._canAdjustMonth(t,+1,tt,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+r+"</span></a>":H?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+r+"</span></a>";o=this._get(t,"currentText");s=this._get(t,"gotoCurrent")&&t.currentDay?K:U;o=!z?o:this.formatDate(o,s,this._getFormatConfig(t));l=!t.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>":"";u=V?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?l:"")+(this._isInRange(t,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+o+"</button>":"")+(Y?"":l)+"</div>":"";c=parseInt(this._get(t,"firstDay"),10);c=isNaN(c)?0:c;f=this._get(t,"showWeek");h=this._get(t,"dayNames");d=this._get(t,"dayNamesMin");p=this._get(t,"monthNames");v=this._get(t,"monthNamesShort");g=this._get(t,"beforeShowDay");m=this._get(t,"showOtherMonths");_=this._get(t,"selectOtherMonths");y=this._getDefaultDate(t);b="";for(x=0;x<B[0];x++){S="";this.maxRows=4;for(C=0;C<B[1];C++){E=this._daylightSavingAdjust(new Date(tt,J,t.selectedDay));O=" ui-corner-all";T="";if(X){T+="<div class='ui-datepicker-group";if(B[1]>1){switch(C){case 0:T+=" ui-datepicker-group-first";O=" ui-corner-"+(Y?"right":"left");break;case B[1]-1:T+=" ui-datepicker-group-last";O=" ui-corner-"+(Y?"left":"right");break;default:T+=" ui-datepicker-group-middle";O="";break}}T+="'>"}T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+O+"'>"+(/all|left/.test(O)&&x===0?Y?a:i:"")+(/all|right/.test(O)&&x===0?Y?i:a:"")+this._generateMonthYearHeader(t,J,tt,Z,Q,x>0||C>0,p,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";M=f?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"";for(w=0;w<7;w++){I=(w+c)%7;M+="<th scope='col'"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[I]+"'>"+d[I]+"</span></th>"}T+=M+"</tr></thead><tbody>";R=this._getDaysInMonth(tt,J);if(tt===t.selectedYear&&J===t.selectedMonth){t.selectedDay=Math.min(t.selectedDay,R)}N=(this._getFirstDayOfMonth(tt,J)-c+7)%7;A=Math.ceil((N+R)/7);L=X?this.maxRows>A?this.maxRows:A:A;this.maxRows=L;P=this._daylightSavingAdjust(new Date(tt,J,1-N));for(D=0;D<L;D++){T+="<tr>";j=!f?"":"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(P)+"</td>";for(w=0;w<7;w++){k=g?g.apply(t.input?t.input[0]:null,[P]):[true,""];F=P.getMonth()!==J;$=F&&!_||!k[0]||Z&&P<Z||Q&&P>Q;j+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===E.getTime()&&J===t.selectedMonth&&t._keyEvent||y.getTime()===P.getTime()&&y.getTime()===E.getTime()?" "+this._dayOverClass:"")+($?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!m?"":" "+k[1]+(P.getTime()===K.getTime()?" "+this._currentClass:"")+(P.getTime()===U.getTime()?" ui-datepicker-today":""))+"'"+((!F||m)&&k[2]?" title='"+k[2].replace(/'/g,"&#39;")+"'":"")+($?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!m?"&#xa0;":$?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===U.getTime()?" ui-state-highlight":"")+(P.getTime()===K.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>";P.setDate(P.getDate()+1);P=this._daylightSavingAdjust(P)}T+=j+"</tr>"}J++;if(J>11){J=0;tt++}T+="</tbody></table>"+(X?"</div>"+(B[0]>0&&C===B[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");S+=T}b+=S}b+=u;t._keyEvent=false;return b},_generateMonthYearHeader:function(t,e,n,i,r,a,o,s){var l,u,c,f,h,d,p,v,g=this._get(t,"changeMonth"),m=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",b="";if(a||!g){b+="<span class='ui-datepicker-month'>"+o[e]+"</span>"}else{l=i&&i.getFullYear()===n;u=r&&r.getFullYear()===n;b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(c=0;c<12;c++){if((!l||c>=i.getMonth())&&(!u||c<=r.getMonth())){b+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+s[c]+"</option>"}}b+="</select>"}if(!_){y+=b+(a||!(g&&m)?"&#xa0;":"")}if(!t.yearshtml){t.yearshtml="";if(a||!m){y+="<span class='ui-datepicker-year'>"+n+"</span>"}else{f=this._get(t,"yearRange").split(":");h=(new Date).getFullYear();d=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?h+parseInt(t,10):parseInt(t,10);return isNaN(e)?h:e};p=d(f[0]);v=Math.max(p,d(f[1]||""));p=i?Math.max(p,i.getFullYear()):p;v=r?Math.min(v,r.getFullYear()):v;t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;p<=v;p++){t.yearshtml+="<option value='"+p+"'"+(p===n?" selected='selected'":"")+">"+p+"</option>"}t.yearshtml+="</select>";y+=t.yearshtml;t.yearshtml=null}}y+=this._get(t,"yearSuffix");if(_){y+=(a||!(g&&m)?"&#xa0;":"")+b}y+="</div>";return y},_adjustInstDate:function(t,e,n){var i=t.selectedYear+(n==="Y"?e:0),r=t.selectedMonth+(n==="M"?e:0),a=Math.min(t.selectedDay,this._getDaysInMonth(i,r))+(n==="D"?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,r,a)));t.selectedDay=o.getDate();t.drawMonth=t.selectedMonth=o.getMonth();t.drawYear=t.selectedYear=o.getFullYear();if(n==="M"||n==="Y"){this._notifyChange(t)}},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),r=n&&e<n?n:e;return i&&r>i?i:r},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");if(e){e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])}},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return e==null?[1,1]:typeof e==="number"?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var r=this._getNumberOfMonths(t),a=this._daylightSavingAdjust(new Date(n,i+(e<0?e:r[0]*r[1]),1));if(e<0){a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth()))}return this._isInRange(t,a)},_isInRange:function(t,e){var n,i,r=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),o=null,s=null,l=this._get(t,"yearRange");if(l){n=l.split(":");i=(new Date).getFullYear();o=parseInt(n[0],10);s=parseInt(n[1],10);if(n[0].match(/[+\-].*/)){o+=i}if(n[1].match(/[+\-].*/)){s+=i}}return(!r||e.getTime()>=r.getTime())&&(!a||e.getTime()<=a.getTime())&&(!o||e.getFullYear()>=o)&&(!s||e.getFullYear()<=s)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");e=typeof e!=="string"?e:(new Date).getFullYear()%100+parseInt(e,10);return{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){if(!e){t.currentDay=t.selectedDay;t.currentMonth=t.selectedMonth;t.currentYear=t.selectedYear}var r=e?typeof e==="object"?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),r,this._getFormatConfig(t))}});function r(e){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",n,function(){t(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){t(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){t(this).removeClass("ui-datepicker-next-hover")}}).on("mouseover",n,a)}function a(){if(!t.datepicker._isDisabledDatepicker(e.inline?e.dpDiv.parent()[0]:e.input[0])){t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");t(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){t(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){t(this).addClass("ui-datepicker-next-hover")}}}function o(e,n){t.extend(e,n);for(var i in n){if(n[i]==null){e[i]=n[i]}}return e}t.fn.datepicker=function(e){if(!this.length){return this}if(!t.datepicker.initialized){t(document).on("mousedown",t.datepicker._checkExternalClick);t.datepicker.initialized=true}if(t("#"+t.datepicker._mainDivId).length===0){t("body").append(t.datepicker.dpDiv)}var n=Array.prototype.slice.call(arguments,1);if(typeof e==="string"&&(e==="isDisabled"||e==="getDate"||e==="widget")){return t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n))}if(e==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n))}return this.each(function(){typeof e==="string"?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(n)):t.datepicker._attachDatepicker(this,e)})};t.datepicker=new i;t.datepicker.initialized=false;t.datepicker.uuid=(new Date).getTime();t.datepicker.version="1.12.1";return t.datepicker})},function(t,e,n){(function(t,n){true?n(e):undefined})(this,function(t){"use strict";var e={value:function(){}};function n(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new i(n)}function i(t){this._=t}function r(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0)n=t.slice(i+1),t=t.slice(0,i);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}i.prototype=n.prototype={constructor:i,on:function(t,e){var n=this._,i=r(t+"",n),s,l=-1,u=i.length;if(arguments.length<2){while(++l<u)if((s=(t=i[l]).type)&&(s=a(n[s],t.name)))return s;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++l<u){if(s=(t=i[l]).type)n[s]=o(n[s],t.name,e);else if(e==null)for(s in n)n[s]=o(n[s],t.name,null)}return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new i(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],i=0,r=a.length;i<r;++i)a[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};function a(t,e){for(var n=0,i=t.length,r;n<i;++n){if((r=t[n]).name===e){return r.value}}}function o(t,n,i){for(var r=0,a=t.length;r<a;++r){if(t[r].name===n){t[r]=e,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:n,value:i});return t}t.dispatch=n;Object.defineProperty(t,"__esModule",{value:true})})},function(t,e,n){"use strict";var i=n(22);var r=n(280);var a=n(249);var o=Object(r["dispatch"])("start","end","interrupt");var s=[];var l=0;var u=1;var c=2;var f=3;var h=4;var d=5;var p=6;var v=function(t,e,n,i,r,a){var u=t.__transition;if(!u)t.__transition={};else if(n in u)return;y(t,n,{name:e,index:i,group:r,on:o,tween:s,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:l})};function g(t,e){var n=_(t,e);if(n.state>l)throw new Error("too late; already scheduled");return n}function m(t,e){var n=_(t,e);if(n.state>c)throw new Error("too late; already started");return n}function _(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function y(t,e,n){var i=t.__transition,r;i[e]=n;n.timer=Object(a["timer"])(o,0,n.time);function o(t){n.state=u;n.timer.restart(s,n.delay,n.time);if(n.delay<=t)s(t-n.delay)}function s(o){var d,g,m,_;if(n.state!==u)return v();for(d in i){_=i[d];if(_.name!==n.name)continue;if(_.state===f)return Object(a["timeout"])(s);if(_.state===h){_.state=p;_.timer.stop();_.on.call("interrupt",t,t.__data__,_.index,_.group);delete i[d]}else if(+d<e){_.state=p;_.timer.stop();delete i[d]}}Object(a["timeout"])(function(){if(n.state===f){n.state=h;n.timer.restart(l,n.delay,n.time);l(o)}});n.state=c;n.on.call("start",t,t.__data__,n.index,n.group);if(n.state!==c)return;n.state=f;r=new Array(m=n.tween.length);for(d=0,g=-1;d<m;++d){if(_=n.tween[d].value.call(t,t.__data__,n.index,n.group)){r[++g]=_}}r.length=g+1}function l(e){var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(v),n.state=d,1),a=-1,o=r.length;while(++a<o){r[a].call(null,i)}if(n.state===d){n.on.call("end",t,t.__data__,n.index,n.group);v()}}function v(){n.state=p;n.timer.stop();delete i[e];for(var r in i)return;delete t.__transition}}var b=function(t,e){var n=t.__transition,i,r,a=true,o;if(!n)return;e=e==null?null:e+"";for(o in n){if((i=n[o]).name!==e){a=false;continue}r=i.state>c&&i.state<d;i.state=p;i.timer.stop();if(r)i.on.call("interrupt",t,t.__data__,i.index,i.group);delete n[o]}if(a)delete t.__transition};var w=function(t){return this.each(function(){b(this,t)})};var x=n(91);function S(t,e){var n,i;return function(){var r=m(this,t),a=r.tween;if(a!==n){i=n=a;for(var o=0,s=i.length;o<s;++o){if(i[o].name===e){i=i.slice();i.splice(o,1);break}}}r.tween=i}}function C(t,e,n){var i,r;if(typeof n!=="function")throw new Error;return function(){var a=m(this,t),o=a.tween;if(o!==i){r=(i=o).slice();for(var s={name:e,value:n},l=0,u=r.length;l<u;++l){if(r[l].name===e){r[l]=s;break}}if(l===u)r.push(s)}a.tween=r}}var E=function(t,e){var n=this._id;t+="";if(arguments.length<2){var i=_(this.node(),n).tween;for(var r=0,a=i.length,o;r<a;++r){if((o=i[r]).name===t){return o.value}}return null}return this.each((e==null?S:C)(n,t,e))};function O(t,e,n){var i=t._id;t.each(function(){var t=m(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)});return function(t){return _(t,i).value[e]}}var T=n(157);var M=function(t,e){var n;return(typeof e==="number"?x["interpolateNumber"]:e instanceof T["color"]?x["interpolateRgb"]:(n=Object(T["color"])(e))?(e=n,x["interpolateRgb"]):x["interpolateString"])(t,e)};function I(t){return function(){this.removeAttribute(t)}}function R(t){return function(){this.removeAttributeNS(t.space,t.local)}}function N(t,e,n){var i,r;return function(){var a=this.getAttribute(t);return a===n?null:a===i?r:r=e(i=a,n)}}function A(t,e,n){var i,r;return function(){var a=this.getAttributeNS(t.space,t.local);return a===n?null:a===i?r:r=e(i=a,n)}}function L(t,e,n){var i,r,a;return function(){var o,s=n(this);if(s==null)return void this.removeAttribute(t);o=this.getAttribute(t);return o===s?null:o===i&&s===r?a:a=e(i=o,r=s)}}function P(t,e,n){var i,r,a;return function(){var o,s=n(this);if(s==null)return void this.removeAttributeNS(t.space,t.local);o=this.getAttributeNS(t.space,t.local);return o===s?null:o===i&&s===r?a:a=e(i=o,r=s)}}var D=function(t,e){var n=Object(i["namespace"])(t),r=n==="transform"?x["interpolateTransformSvg"]:M;return this.attrTween(t,typeof e==="function"?(n.local?P:L)(n,r,O(this,"attr."+t,e)):e==null?(n.local?R:I)(n):(n.local?A:N)(n,r,e+""))};function j(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttributeNS(t.space,t.local,i(e))}}n._value=e;return n}function k(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttribute(t,i(e))}}n._value=e;return n}var F=function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!=="function")throw new Error;var r=Object(i["namespace"])(t);return this.tween(n,(r.local?j:k)(r,e))};function $(t,e){return function(){g(this,t).delay=+e.apply(this,arguments)}}function G(t,e){return e=+e,function(){g(this,t).delay=e}}var U=function(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?$:G)(e,t)):_(this.node(),e).delay};function Y(t,e){return function(){m(this,t).duration=+e.apply(this,arguments)}}function V(t,e){return e=+e,function(){m(this,t).duration=e}}var H=function(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?Y:V)(e,t)):_(this.node(),e).duration};function z(t,e){if(typeof e!=="function")throw new Error;return function(){m(this,t).ease=e}}var B=function(t){var e=this._id;return arguments.length?this.each(z(e,t)):_(this.node(),e).ease};var W=function(t){if(typeof t!=="function")t=Object(i["matcher"])(t);for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a){for(var o=e[a],s=o.length,l=r[a]=[],u,c=0;c<s;++c){if((u=o[c])&&t.call(u,u.__data__,c,o)){l.push(u)}}}return new gt(r,this._parents,this._name,this._id)};var q=function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s){for(var l=e[s],u=n[s],c=l.length,f=o[s]=new Array(c),h,d=0;d<c;++d){if(h=l[d]||u[d]){f[d]=h}}}for(;s<i;++s){o[s]=e[s]}return new gt(o,this._parents,this._name,this._id)};function X(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"})}function K(t,e,n){var i,r,a=X(e)?g:m;return function(){var o=a(this,t),s=o.on;if(s!==i)(r=(i=s).copy()).on(e,n);o.on=r}}var Z=function(t,e){var n=this._id;return arguments.length<2?_(this.node(),n).on.on(t):this.each(K(n,t,e))};function Q(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;if(e)e.removeChild(this)}}var J=function(){return this.on("end.remove",Q(this._id))};var tt=function(t){var e=this._name,n=this._id;if(typeof t!=="function")t=Object(i["selector"])(t);for(var r=this._groups,a=r.length,o=new Array(a),s=0;s<a;++s){for(var l=r[s],u=l.length,c=o[s]=new Array(u),f,h,d=0;d<u;++d){if((f=l[d])&&(h=t.call(f,f.__data__,d,l))){if("__data__"in f)h.__data__=f.__data__;c[d]=h;v(c[d],e,n,d,c,_(f,n))}}}return new gt(o,this._parents,e,n)};var et=function(t){var e=this._name,n=this._id;if(typeof t!=="function")t=Object(i["selectorAll"])(t);for(var r=this._groups,a=r.length,o=[],s=[],l=0;l<a;++l){for(var u=r[l],c=u.length,f,h=0;h<c;++h){if(f=u[h]){for(var d=t.call(f,f.__data__,h,u),p,g=_(f,n),m=0,y=d.length;m<y;++m){if(p=d[m]){v(p,e,n,m,d,g)}}o.push(d);s.push(f)}}}return new gt(o,s,e,n)};var nt=i["selection"].prototype.constructor;var it=function(){return new nt(this._groups,this._parents)};function rt(t,e){var n,r,a;return function(){var o=Object(i["style"])(this,t),s=(this.style.removeProperty(t),Object(i["style"])(this,t));return o===s?null:o===n&&s===r?a:a=e(n=o,r=s)}}function at(t){return function(){this.style.removeProperty(t)}}function ot(t,e,n){var r,a;return function(){var o=Object(i["style"])(this,t);return o===n?null:o===r?a:a=e(r=o,n)}}function st(t,e,n){var r,a,o;return function(){var s=Object(i["style"])(this,t),l=n(this);if(l==null)l=(this.style.removeProperty(t),Object(i["style"])(this,t));return s===l?null:s===r&&l===a?o:o=e(r=s,a=l)}}var lt=function(t,e,n){var i=(t+="")==="transform"?x["interpolateTransformCss"]:M;return e==null?this.styleTween(t,rt(t,i)).on("end.style."+t,at(t)):this.styleTween(t,typeof e==="function"?st(t,i,O(this,"style."+t,e)):ot(t,i,e+""),n)};function ut(t,e,n){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.style.setProperty(t,r(e),n)}}i._value=e;return i}var ct=function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;return this.tween(i,ut(t,e,n==null?"":n))};function ft(t){return function(){this.textContent=t}}function ht(t){return function(){var e=t(this);this.textContent=e==null?"":e}}var dt=function(t){return this.tween("text",typeof t==="function"?ht(O(this,"text",t)):ft(t==null?"":t+""))};var pt=function(){var t=this._name,e=this._id,n=_t();for(var i=this._groups,r=i.length,a=0;a<r;++a){for(var o=i[a],s=o.length,l,u=0;u<s;++u){if(l=o[u]){var c=_(l,e);v(l,t,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}}}return new gt(i,this._parents,t,n)};var vt=0;function gt(t,e,n,i){this._groups=t;this._parents=e;this._name=n;this._id=i}function mt(t){return Object(i["selection"])().transition(t)}function _t(){return++vt}var yt=i["selection"].prototype;gt.prototype=mt.prototype={constructor:gt,select:tt,selectAll:et,filter:W,merge:q,selection:it,transition:pt,call:yt.call,nodes:yt.nodes,node:yt.node,size:yt.size,empty:yt.empty,each:yt.each,on:Z,attr:D,attrTween:F,style:lt,styleTween:ct,text:dt,remove:J,tween:E,delay:U,duration:H,ease:B};var bt=n(391);var wt={time:null,delay:0,duration:250,ease:bt["easeCubicInOut"]};function xt(t,e){var n;while(!(n=t.__transition)||!(n=n[e])){if(!(t=t.parentNode)){return wt.time=Object(a["now"])(),wt}}return n}var St=function(t){var e,n;if(t instanceof gt){e=t._id,t=t._name}else{e=_t(),(n=wt).time=Object(a["now"])(),t=t==null?null:t+""}for(var i=this._groups,r=i.length,o=0;o<r;++o){for(var s=i[o],l=s.length,u,c=0;c<l;++c){if(u=s[c]){v(u,t,e,c,s,n||xt(u,e))}}}return new gt(i,this._parents,t,e)};i["selection"].prototype.interrupt=w;i["selection"].prototype.transition=St;var Ct=[null];var Et=function(t,e){var n=t.__transition,i,r;if(n){e=e==null?null:e+"";for(r in n){if((i=n[r]).state>u&&i.name===e){return new gt([[t]],Ct,e,+r)}}}return null};n.d(e,false,function(){return mt});n.d(e,false,function(){return Et});n.d(e,"a",function(){return b})},function(t,e,n){(function(t,n){true?n(e):undefined})(this,function(t){"use strict";var e=6;var n="AJSAJS";var i="AFAFAF";var r=65;var a=73;var o=79;var s=86;var l=90;var u={forward:c,inverse:f,toPoint:h};function c(t,e){e=e||5;return _(v({lat:t[1],lon:t[0]}),e)}function f(t){var e=g(x(t.toUpperCase()));if(e.lat&&e.lon){return[e.lon,e.lat,e.lon,e.lat]}return[e.left,e.bottom,e.right,e.top]}function h(t){var e=g(x(t.toUpperCase()));if(e.lat&&e.lon){return[e.lon,e.lat]}return[(e.left+e.right)/2,(e.top+e.bottom)/2]}function d(t){return t*(Math.PI/180)}function p(t){return 180*(t/Math.PI)}function v(t){var e=t.lat;var n=t.lon;var i=6378137;var r=.00669438;var a=.9996;var o;var s;var l,u,c,f,h;var p=d(e);var v=d(n);var g;var _;_=Math.floor((n+180)/6)+1;if(n===180){_=60}if(e>=56&&e<64&&n>=3&&n<12){_=32}if(e>=72&&e<84){if(n>=0&&n<9){_=31}else if(n>=9&&n<21){_=33}else if(n>=21&&n<33){_=35}else if(n>=33&&n<42){_=37}}o=(_-1)*6-180+3;g=d(o);s=r/(1-r);l=i/Math.sqrt(1-r*Math.sin(p)*Math.sin(p));u=Math.tan(p)*Math.tan(p);c=s*Math.cos(p)*Math.cos(p);f=Math.cos(p)*(v-g);h=i*((1-r/4-3*r*r/64-5*r*r*r/256)*p-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*p)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*p)-35*r*r*r/3072*Math.sin(6*p));var y=a*l*(f+(1-u+c)*f*f*f/6+(5-18*u+u*u+72*c-58*s)*f*f*f*f*f/120)+5e5;var b=a*(h+l*Math.tan(p)*(f*f/2+(5-u+9*c+4*c*c)*f*f*f*f/24+(61-58*u+u*u+600*c-330*s)*f*f*f*f*f*f/720));if(e<0){b+=1e7}return{northing:Math.round(b),easting:Math.round(y),zoneNumber:_,zoneLetter:m(e)}}function g(t){var e=t.northing;var n=t.easting;var i=t.zoneLetter;var r=t.zoneNumber;if(r<0||r>60){return null}var a=.9996;var o=6378137;var s=.00669438;var l;var u=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s));var c,f,h,d,v,m;var _;var y,b;var w=n-5e5;var x=e;if(i<"N"){x-=1e7}_=(r-1)*6-180+3;l=s/(1-s);m=x/a;y=m/(o*(1-s/4-3*s*s/64-5*s*s*s/256));b=y+(3*u/2-27*u*u*u/32)*Math.sin(2*y)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*y)+151*u*u*u/96*Math.sin(6*y);c=o/Math.sqrt(1-s*Math.sin(b)*Math.sin(b));f=Math.tan(b)*Math.tan(b);h=l*Math.cos(b)*Math.cos(b);d=o*(1-s)/Math.pow(1-s*Math.sin(b)*Math.sin(b),1.5);v=w/(c*a);var S=b-c*Math.tan(b)/d*(v*v/2-(5+3*f+10*h-4*h*h-9*l)*v*v*v*v/24+(61+90*f+298*h+45*f*f-252*l-3*h*h)*v*v*v*v*v*v/720);S=p(S);var C=(v-(1+2*f+h)*v*v*v/6+(5-2*h+28*f-3*h*h+8*l+24*f*f)*v*v*v*v*v/120)/Math.cos(b);C=_+p(C);var E;if(t.accuracy){var O=g({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});E={top:O.lat,right:O.lon,bottom:S,left:C}}else{E={lat:S,lon:C}}return E}function m(t){var e="Z";if(84>=t&&t>=72){e="X"}else if(72>t&&t>=64){e="W"}else if(64>t&&t>=56){e="V"}else if(56>t&&t>=48){e="U"}else if(48>t&&t>=40){e="T"}else if(40>t&&t>=32){e="S"}else if(32>t&&t>=24){e="R"}else if(24>t&&t>=16){e="Q"}else if(16>t&&t>=8){e="P"}else if(8>t&&t>=0){e="N"}else if(0>t&&t>=-8){e="M"}else if(-8>t&&t>=-16){e="L"}else if(-16>t&&t>=-24){e="K"}else if(-24>t&&t>=-32){e="J"}else if(-32>t&&t>=-40){e="H"}else if(-40>t&&t>=-48){e="G"}else if(-48>t&&t>=-56){e="F"}else if(-56>t&&t>=-64){e="E"}else if(-64>t&&t>=-72){e="D"}else if(-72>t&&t>=-80){e="C"}return e}function _(t,e){var n="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+y(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+i.substr(i.length-5,e)}function y(t,e,n){var i=b(n);var r=Math.floor(t/1e5);var a=Math.floor(e/1e5)%20;return w(r,a,i)}function b(t){var n=t%e;if(n===0){n=e}return n}function w(t,e,u){var c=u-1;var f=n.charCodeAt(c);var h=i.charCodeAt(c);var d=f+t-1;var p=h+e;var v=false;if(d>l){d=d-l+r-1;v=true}if(d===a||f<a&&d>a||(d>a||f<a)&&v){d++}if(d===o||f<o&&d>o||(d>o||f<o)&&v){d++;if(d===a){d++}}if(d>l){d=d-l+r-1}if(p>s){p=p-s+r-1;v=true}else{v=false}if(p===a||h<a&&p>a||(p>a||h<a)&&v){p++}if(p===o||h<o&&p>o||(p>o||h<o)&&v){p++;if(p===a){p++}}if(p>s){p=p-s+r-1}var g=String.fromCharCode(d)+String.fromCharCode(p);return g}function x(t){if(t&&t.length===0){throw"MGRSPoint coverting from nothing"}var e=t.length;var n=null;var i="";var r;var a=0;while(!/[A-Z]/.test(r=t.charAt(a))){if(a>=2){throw"MGRSPoint bad conversion from: "+t}i+=r;a++}var o=parseInt(i,10);if(a===0||a+3>e){throw"MGRSPoint bad conversion from: "+t}var s=t.charAt(a++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O"){throw"MGRSPoint zone letter "+s+" not handled: "+t}n=t.substring(a,a+=2);var l=b(o);var u=S(n.charAt(0),l);var c=C(n.charAt(1),l);while(c<E(s)){c+=2e6}var f=e-a;if(f%2!==0){throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t}var h=f/2;var d=0;var p=0;var v,g,m,_,y;if(h>0){v=1e5/Math.pow(10,h);g=t.substring(a,a+h);d=parseFloat(g)*v;m=t.substring(a+h);p=parseFloat(m)*v}_=d+u;y=p+c;return{easting:_,northing:y,zoneLetter:s,zoneNumber:o,accuracy:v}}function S(t,e){var i=n.charCodeAt(e-1);var s=1e5;var u=false;while(i!==t.charCodeAt(0)){i++;if(i===a){i++}if(i===o){i++}if(i>l){if(u){throw"Bad character: "+t}i=r;u=true}s+=1e5}return s}function C(t,e){if(t>"V"){throw"MGRSPoint given invalid Northing "+t}var n=i.charCodeAt(e-1);var l=0;var u=false;while(n!==t.charCodeAt(0)){n++;if(n===a){n++}if(n===o){n++}if(n>s){if(u){throw"Bad character: "+t}n=r;u=true}l+=1e5}return l}function E(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0){return e}else{throw"Invalid zone letter: "+t}}t["default"]=u;t.forward=c;t.inverse=f;t.toPoint=h;Object.defineProperty(t,"__esModule",{value:true})})},function(t,e,n){"use strict";var i=n(2);var r=n(105);var a=n(1);var o=n(32);var s=n(113);var l=function t(e,n){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};r["a"].call(this,i);this.continueMsg;if(i.continueMsg!==undefined){this.continueMsg=i.continueMsg}else{this.continueMsg=document.createElement("span");this.continueMsg.textContent=n.getString("Click to continue drawing the polygon.");var a=document.createElement("br");a.textContent=n.getString("Double-click or click starting point to finish.");this.continueMsg.appendChild(a)}this.format=e};a["d"](l,r["a"]);l.prototype.createDrawInteraction=function(t,e){return new s["a"]({type:"Polygon",source:e,style:t})};l.prototype.handleMeasure=function(t){var e=i["a"].assertInstanceof(this.sketchFeature.getGeometry(),o["a"]);var n=this.getMap().getView().getProjection();i["a"].assert(n);var a=r["a"].getFormattedArea(e,n,this.precision,this.format);var s=e.getCoordinates()[0].length;var l=null;if(s>3){l=e.getInteriorPoint().getCoordinates()}t(a,l)};e["a"]=l},function(t,e,n){"use strict";var i=n(53);var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function a(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function s(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var l=function(t){s(e,t);function e(n){a(this,e);var i=o(this,t.call(this,n));i.gmfLayer_=n.gmfLayer;return i}r(e,[{key:"gmfLayer",get:function t(){return this.gmfLayer_}}]);return e}(i["a"]);e["a"]=l},function(t,e,n){"use strict";n.d(e,"a",function(){return r});n.d(e,"c",function(){return a});n.d(e,"b",function(){return o});var i=n(123);var r={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(t,e,n,r){var a=this._relativeTime[n];return Object(i["a"])(a)?a(t,e,n,r):a.replace(/%d/i,t)}function o(t,e){var n=this._relativeTime[t>0?"future":"past"];return Object(i["a"])(n)?n(e):n.replace(/%s/i,e)}},function(t,e,n){"use strict";n.d(e,"b",function(){return i});n.d(e,"a",function(){return r});n.d(e,"c",function(){return a});var i="%d";var r=/\d{1,2}/;function a(t){return this._ordinal.replace("%d",t)}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});function i(t){if(t!=null){this.set(t)}}},function(t,e,n){"use strict";n.d(e,"b",function(){return s});n.d(e,"a",function(){return l});var i=n(123);var r=n(155);var a=n(250);var o=n(71);function s(t){var e,n;for(n in t){e=t[n];if(Object(i["a"])(e)){this[n]=e}else{this["_"+n]=e}}this._config=t;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function l(t,e){var n=Object(r["a"])({},t),i;for(i in e){if(Object(o["a"])(e,i)){if(Object(a["a"])(t[i])&&Object(a["a"])(e[i])){n[i]={};Object(r["a"])(n[i],t[i]);Object(r["a"])(n[i],e[i])}else if(e[i]!=null){n[i]=e[i]}else{delete n[i]}}}for(i in t){if(Object(o["a"])(t,i)&&!Object(o["a"])(e,i)&&Object(a["a"])(t[i])){n[i]=Object(r["a"])({},n[i])}}return n}},function(t,e,n){"use strict";var i=n(1);var r=n(208);var a=function t(e,n,i,a,o){r["a"].call(this,e,n,o);this.originalEvent=i;this.pixel=n.getEventPixel(i);this.coordinate=n.getCoordinateFromPixel(this.pixel);this.dragging=a!==undefined?a:false};Object(i["d"])(a,r["a"]);a.prototype.preventDefault=function(){r["a"].prototype.preventDefault.call(this);this.originalEvent.preventDefault()};a.prototype.stopPropagation=function(){r["a"].prototype.stopPropagation.call(this);this.originalEvent.stopPropagation()};e["a"]=a},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(84);var r=function t(){this.cache_={};this.cacheSize_=0;this.maxCacheSize_=32};function a(t,e,n){var r=n?Object(i["b"])(n):"null";return e+":"+t+":"+r}r.prototype.clear=function(){this.cache_={};this.cacheSize_=0};r.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var e in this.cache_){var n=this.cache_[e];if((t++&3)===0&&!n.hasListener()){delete this.cache_[e];--this.cacheSize_}}}};r.prototype.get=function(t,e,n){var i=a(t,e,n);return i in this.cache_?this.cache_[i]:null};r.prototype.set=function(t,e,n,i){var r=a(t,e,n);this.cache_[r]=i;++this.cacheSize_};r.prototype.setSize=function(t){this.maxCacheSize_=t;this.expire()};var o=r;var s=new r},function(t,e,n){"use strict";var i=n(1);var r=n(27);var a=n(80);var o=n(11);var s=function t(e){a["a"].call(this);this.highWaterMark=e!==undefined?e:2048;this.count_=0;this.entries_={};this.oldest_=null;this.newest_=null};Object(i["d"])(s,a["a"]);s.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark};s.prototype.clear=function(){this.count_=0;this.entries_={};this.oldest_=null;this.newest_=null;this.dispatchEvent(o["a"].CLEAR)};s.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)};s.prototype.forEach=function(t,e){var n=this.oldest_;while(n){t.call(e,n.value_,n.key_,this);n=n.newer}};s.prototype.get=function(t){var e=this.entries_[t];Object(r["a"])(e!==undefined,15);if(e===this.newest_){return e.value_}else if(e===this.oldest_){this.oldest_=this.oldest_.newer;this.oldest_.older=null}else{e.newer.older=e.older;e.older.newer=e.newer}e.newer=null;e.older=this.newest_;this.newest_.newer=e;this.newest_=e;return e.value_};s.prototype.remove=function(t){var e=this.entries_[t];Object(r["a"])(e!==undefined,15);if(e===this.newest_){this.newest_=e.older;if(this.newest_){this.newest_.newer=null}}else if(e===this.oldest_){this.oldest_=e.newer;if(this.oldest_){this.oldest_.older=null}}else{e.newer.older=e.older;e.older.newer=e.newer}delete this.entries_[t];--this.count_;return e.value_};s.prototype.getCount=function(){return this.count_};s.prototype.getKeys=function(){var t=new Array(this.count_);var e=0;var n=void 0;for(n=this.newest_;n;n=n.older){t[e++]=n.key_}return t};s.prototype.getValues=function(){var t=new Array(this.count_);var e=0;var n=void 0;for(n=this.newest_;n;n=n.older){t[e++]=n.value_}return t};s.prototype.peekLast=function(){return this.oldest_.value_};s.prototype.peekLastKey=function(){return this.oldest_.key_};s.prototype.peekFirstKey=function(){return this.newest_.key_};s.prototype.pop=function(){var t=this.oldest_;delete this.entries_[t.key_];if(t.newer){t.newer.older=null}this.oldest_=t.newer;if(!this.oldest_){this.newest_=null}--this.count_;return t.value_};s.prototype.replace=function(t,e){this.get(t);this.entries_[t].value_=e};s.prototype.set=function(t,e){Object(r["a"])(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};if(!this.newest_){this.oldest_=n}else{this.newest_.newer=n}this.newest_=n;this.entries_[t]=n;++this.count_};s.prototype.setSize=function(t){this.highWaterMark=t};s.prototype.prune=function(){while(this.canExpireCache()){this.pop()}};e["a"]=s},function(t,e,n){(function(t){+function(t){"use strict";var e=function(n,i){this.$element=t(n);this.options=t.extend({},e.DEFAULTS,i);this.$trigger=t('[data-toggle="collapse"][href="#'+n.id+'"],'+'[data-toggle="collapse"][data-target="#'+n.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle)this.toggle()};e.VERSION="3.3.7";e.TRANSITION_DURATION=350;e.DEFAULTS={toggle:true};e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"};e.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var n;var r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(r&&r.length){n=r.data("bs.collapse");if(n&&n.transitioning)return}var a=t.Event("show.bs.collapse");this.$element.trigger(a);if(a.isDefaultPrevented())return;if(r&&r.length){i.call(r,"hide");n||r.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var l=t.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(e.TRANSITION_DURATION)[o](this.$element[0][l])};e.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var n=t.Event("hide.bs.collapse");this.$element.trigger(n);if(n.isDefaultPrevented())return;var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var r=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return r.call(this);this.$element[i](0).one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(e.TRANSITION_DURATION)};e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};e.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(e,i){var r=t(i);this.addAriaAndCollapsedClass(n(r),r)},this)).end()};e.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n);e.toggleClass("collapsed",!n).attr("aria-expanded",n)};function n(e){var n;var i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function i(n){return this.each(function(){var i=t(this);var r=i.data("bs.collapse");var a=t.extend({},e.DEFAULTS,i.data(),typeof n=="object"&&n);if(!r&&a.toggle&&/show|hide/.test(n))a.toggle=false;if(!r)i.data("bs.collapse",r=new e(this,a));if(typeof n=="string")r[n]()})}var r=t.fn.collapse;t.fn.collapse=i;t.fn.collapse.Constructor=e;t.fn.collapse.noConflict=function(){t.fn.collapse=r;return this};t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var r=t(this);if(!r.attr("data-target"))e.preventDefault();var a=n(r);var o=a.data("bs.collapse");var s=o?"toggle":r.data();i.call(a,s)})}(t)}).call(this,n(38))},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(r=[n(38),n(383),n(118),n(236)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){var e=false;t(document).on("mouseup",function(){e=false});return t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(n){if(true===t.data(n.target,e.widgetName+".preventClickEvent")){t.removeData(n.target,e.widgetName+".preventClickEvent");n.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(n){if(e){return}this._mouseMoved=false;this._mouseStarted&&this._mouseUp(n);this._mouseDownEvent=n;var i=this,r=n.which===1,a=typeof this.options.cancel==="string"&&n.target.nodeName?t(n.target).closest(this.options.cancel).length:false;if(!r||a||!this._mouseCapture(n)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(n)&&this._mouseDelayMet(n)){this._mouseStarted=this._mouseStart(n)!==false;if(!this._mouseStarted){n.preventDefault();return true}}if(true===t.data(n.target,this.widgetName+".preventClickEvent")){t.removeData(n.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(t){return i._mouseMove(t)};this._mouseUpDelegate=function(t){return i._mouseUp(t)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);n.preventDefault();e=true;return true},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button){return this._mouseUp(e)}else if(!e.which){if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey){this.ignoreMissingWhich=true}else if(!this.ignoreMissingWhich){return this._mouseUp(e)}}}if(e.which||e.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==false;this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)}return!this._mouseStarted},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(n.target===this._mouseDownEvent.target){t.data(n.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(n)}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer}this.ignoreMissingWhich=false;e=false;n.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(1,eval)("this")}catch(t){if(typeof window==="object")n=window}t.exports=n},function(t,e,n){"use strict";var i=n(1);var r=n(39);var a=n(27);var o=n(64);var s=n(62);var l=n(3);var u=n(10);var c=n(85);var f="units";var h={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};var d=[1,2,5];var p=function t(e){var n=e?e:{};var i=n.className!==undefined?n.className:"ol-scale-line";this.innerElement_=document.createElement("DIV");this.innerElement_.className=i+"-inner";this.element_=document.createElement("DIV");this.element_.className=i+" "+s["e"];this.element_.appendChild(this.innerElement_);this.viewState_=null;this.minWidth_=n.minWidth!==undefined?n.minWidth:64;this.renderedVisible_=false;this.renderedWidth_=undefined;this.renderedHTML_="";o["a"].call(this,{element:this.element_,render:n.render||v,target:n.target});Object(l["a"])(this,Object(r["b"])(f),this.handleUnitsChanged_,this);this.setUnits(n.units||h.METRIC)};Object(i["d"])(p,o["a"]);p.prototype.getUnits=function(){return this.get(f)};function v(t){var e=t.frameState;if(!e){this.viewState_=null}else{this.viewState_=e.viewState}this.updateElement_()}p.prototype.handleUnitsChanged_=function(){this.updateElement_()};p.prototype.setUnits=function(t){this.set(f,t)};p.prototype.updateElement_=function(){var t=this.viewState_;if(!t){if(this.renderedVisible_){this.element_.style.display="none";this.renderedVisible_=false}return}var e=t.center;var n=t.projection;var i=this.getUnits();var r=i==h.DEGREES?c["b"].DEGREES:c["b"].METERS;var o=Object(u["i"])(n,t.resolution,e,r);if(n.getUnits()!=c["b"].DEGREES&&n.getMetersPerUnit()&&r==c["b"].METERS){o*=n.getMetersPerUnit()}var s=this.minWidth_*o;var l="";if(i==h.DEGREES){var f=u["a"][c["b"].DEGREES];if(n.getUnits()==c["b"].DEGREES){s*=f}else{o/=f}if(s<f/60){l="″";o*=3600}else if(s<f){l="′";o*=60}else{l="°"}}else if(i==h.IMPERIAL){if(s<.9144){l="in";o/=.0254}else if(s<1609.344){l="ft";o/=.3048}else{l="mi";o/=1609.344}}else if(i==h.NAUTICAL){o/=1852;l="nm"}else if(i==h.METRIC){if(s<.001){l="μm";o*=1e6}else if(s<1){l="mm";o*=1e3}else if(s<1e3){l="m"}else{l="km";o/=1e3}}else if(i==h.US){if(s<.9144){l="in";o*=39.37}else if(s<1609.344){l="ft";o/=.30480061}else{l="mi";o/=1609.3472}}else{Object(a["a"])(false,33)}var p=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));var v=void 0,g=void 0;while(true){v=d[(p%3+3)%3]*Math.pow(10,Math.floor(p/3));g=Math.round(v/o);if(isNaN(g)){this.element_.style.display="none";this.renderedVisible_=false;return}else if(g>=this.minWidth_){break}++p}var m=v+" "+l;if(this.renderedHTML_!=m){this.innerElement_.innerHTML=m;this.renderedHTML_=m}if(this.renderedWidth_!=g){this.innerElement_.style.width=g+"px";this.renderedWidth_=g}if(!this.renderedVisible_){this.element_.style.display="";this.renderedVisible_=true}};e["a"]=p},function(t,e,n){"use strict";var i=n(1);var r=n(19);var a=n(82);var o=n(29);var s=n(3);var l=n(11);var u=n(4);var c=n(20);var f=n(8);var h=n(32);var d=n(28);var p=n(9);var v=n(57);var g=n(151);var m=n(200);var _=function t(e){d["b"].call(this,{handleEvent:y,handleDownEvent:c["b"],handleUpEvent:b});var n=e?e:{};this.source_=n.source?n.source:null;this.vertex_=n.vertex!==undefined?n.vertex:true;this.edge_=n.edge!==undefined?n.edge:true;this.features_=n.features?n.features:null;this.featuresListenerKeys_=[];this.featureChangeListenerKeys_={};this.indexedFeaturesExtents_={};this.pendingFeatures_={};this.pixelCoordinate_=null;this.pixelTolerance_=n.pixelTolerance!==undefined?n.pixelTolerance:10;this.sortByDistance_=w.bind(this);this.rBush_=new m["a"];this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}};Object(i["d"])(_,d["b"]);_.prototype.addFeature=function(t,e){var n=e!==undefined?e:true;var r=Object(i["c"])(t);var a=t.getGeometry();if(a){var o=this.SEGMENT_WRITERS_[a.getType()];if(o){this.indexedFeaturesExtents_[r]=a.getExtent(Object(u["j"])());o.call(this,t,a)}}if(n){this.featureChangeListenerKeys_[r]=Object(s["a"])(t,l["a"].CHANGE,this.handleFeatureChange_,this)}};_.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)};_.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)};_.prototype.getFeatures_=function(){var t=void 0;if(this.features_){t=this.features_}else if(this.source_){t=this.source_.getFeatures()}return t};_.prototype.handleFeatureAdd_=function(t){var e=void 0;if(t instanceof v["a"]){e=t.feature}else if(t instanceof r["a"]){e=t.element}this.addFeature(e)};_.prototype.handleFeatureRemove_=function(t){var e=void 0;if(t instanceof v["a"]){e=t.feature}else if(t instanceof r["a"]){e=t.element}this.removeFeature(e)};_.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var n=Object(i["c"])(e);if(!(n in this.pendingFeatures_)){this.pendingFeatures_[n]=e}}else{this.updateFeature_(e)}};_.prototype.removeFeature=function(t,e){var n=e!==undefined?e:true;var r=Object(i["c"])(t);var a=this.indexedFeaturesExtents_[r];if(a){var o=this.rBush_;var l=[];o.forEachInExtent(a,function(e){if(t===e.feature){l.push(e)}});for(var u=l.length-1;u>=0;--u){o.remove(l[u])}}if(n){Object(s["e"])(this.featureChangeListenerKeys_[r]);delete this.featureChangeListenerKeys_[r]}};_.prototype.setMap=function(t){var e=this.getMap();var n=this.featuresListenerKeys_;var i=this.getFeatures_();if(e){n.forEach(s["e"]);n.length=0;i.forEach(this.forEachFeatureRemove_.bind(this))}d["b"].prototype.setMap.call(this,t);if(t){if(this.features_){n.push(Object(s["a"])(this.features_,a["a"].ADD,this.handleFeatureAdd_,this),Object(s["a"])(this.features_,a["a"].REMOVE,this.handleFeatureRemove_,this))}else if(this.source_){n.push(Object(s["a"])(this.source_,g["a"].ADDFEATURE,this.handleFeatureAdd_,this),Object(s["a"])(this.source_,g["a"].REMOVEFEATURE,this.handleFeatureRemove_,this))}i.forEach(this.forEachFeatureAdd_.bind(this))}};_.prototype.shouldStopEvent=c["a"];_.prototype.snapTo=function(t,e,n){var i=n.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]);var r=n.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]);var a=Object(u["b"])([i,r]);var s=this.rBush_.getInExtent(a);if(this.vertex_&&!this.edge_){s=s.filter(function(t){return t.feature.getGeometry().getType()!==f["a"].CIRCLE})}var l=false;var c=false;var h=null;var d=null;var p=void 0,v=void 0,g=void 0,m=void 0,_=void 0;if(s.length>0){this.pixelCoordinate_=e;s.sort(this.sortByDistance_);var y=s[0].segment;var b=s[0].feature.getGeometry().getType()===f["a"].CIRCLE;if(this.vertex_&&!this.edge_){v=n.getPixelFromCoordinate(y[0]);g=n.getPixelFromCoordinate(y[1]);m=Object(o["h"])(t,v);_=Object(o["h"])(t,g);p=Math.sqrt(Math.min(m,_));l=p<=this.pixelTolerance_;if(l){c=true;h=m>_?y[1]:y[0];d=n.getPixelFromCoordinate(h)}}else if(this.edge_){if(b){h=Object(o["b"])(e,s[0].feature.getGeometry())}else{h=Object(o["c"])(e,y)}d=n.getPixelFromCoordinate(h);if(Object(o["d"])(t,d)<=this.pixelTolerance_){c=true;if(this.vertex_&&!b){v=n.getPixelFromCoordinate(y[0]);g=n.getPixelFromCoordinate(y[1]);m=Object(o["h"])(d,v);_=Object(o["h"])(d,g);p=Math.sqrt(Math.min(m,_));l=p<=this.pixelTolerance_;if(l){h=m>_?y[1]:y[0];d=n.getPixelFromCoordinate(h)}}}}if(c){d=[Math.round(d[0]),Math.round(d[1])]}}return{snapped:c,vertex:h,vertexPixel:d}};_.prototype.updateFeature_=function(t){this.removeFeature(t,false);this.addFeature(t,false)};_.prototype.writeCircleGeometry_=function(t,e){var n=Object(h["b"])(e);var i=n.getCoordinates()[0];for(var r=0,a=i.length-1;r<a;++r){var o=i.slice(r,r+2);var s={feature:t,segment:o};this.rBush_.insert(Object(u["b"])(o),s)}};_.prototype.writeGeometryCollectionGeometry_=function(t,e){var n=e.getGeometriesArray();for(var i=0;i<n.length;++i){var r=this.SEGMENT_WRITERS_[n[i].getType()];if(r){r.call(this,t,n[i])}}};_.prototype.writeLineStringGeometry_=function(t,e){var n=e.getCoordinates();for(var i=0,r=n.length-1;i<r;++i){var a=n.slice(i,i+2);var o={feature:t,segment:a};this.rBush_.insert(Object(u["b"])(a),o)}};_.prototype.writeMultiLineStringGeometry_=function(t,e){var n=e.getCoordinates();for(var i=0,r=n.length;i<r;++i){var a=n[i];for(var o=0,s=a.length-1;o<s;++o){var l=a.slice(o,o+2);var c={feature:t,segment:l};this.rBush_.insert(Object(u["b"])(l),c)}}};_.prototype.writeMultiPointGeometry_=function(t,e){var n=e.getCoordinates();for(var i=0,r=n.length;i<r;++i){var a=n[i];var o={feature:t,segment:[a,a]};this.rBush_.insert(e.getExtent(),o)}};_.prototype.writeMultiPolygonGeometry_=function(t,e){var n=e.getCoordinates();for(var i=0,r=n.length;i<r;++i){var a=n[i];for(var o=0,s=a.length;o<s;++o){var l=a[o];for(var c=0,f=l.length-1;c<f;++c){var h=l.slice(c,c+2);var d={feature:t,segment:h};this.rBush_.insert(Object(u["b"])(h),d)}}}};_.prototype.writePointGeometry_=function(t,e){var n=e.getCoordinates();var i={feature:t,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)};_.prototype.writePolygonGeometry_=function(t,e){var n=e.getCoordinates();for(var i=0,r=n.length;i<r;++i){var a=n[i];for(var o=0,s=a.length-1;o<s;++o){var l=a.slice(o,o+2);var c={feature:t,segment:l};this.rBush_.insert(Object(u["b"])(l),c)}}};function y(t){var e=this.snapTo(t.pixel,t.coordinate,t.map);if(e.snapped){t.coordinate=e.vertex.slice(0,2);t.pixel=e.vertexPixel}return d["c"].call(this,t)}function b(t){var e=Object(p["c"])(this.pendingFeatures_);if(e.length){e.forEach(this.updateFeature_.bind(this));this.pendingFeatures_={}}return false}function w(t,e){var n=Object(o["i"])(this.pixelCoordinate_,t.segment);var i=Object(o["i"])(this.pixelCoordinate_,e.segment);return n-i}e["a"]=_},function(t,e,n){"use strict";var i=n(174);var r=n(23);var a=n(3);var o=n(182);var s=angular.module("gmfThemeSelectorComponent",[i["a"].module.name,r["a"].module.name]);s.run(["$templateCache",function(t){t.put("gmf/theme/selectorComponent",n(475))}]);s.value("gmfThemeSelectorTemplateUrl",function(t){var e=t["gmfThemeSelectorTemplateUrl"];return e!==undefined?e:"gmf/theme/selectorComponent"});l.$inject=["$attrs","gmfThemeSelectorTemplateUrl"];function l(t,e){return e(t)}s.component_={bindings:{filter:"<gmfThemeselectorFilter"},controller:"gmfThemeselectorController",templateUrl:l};s.component("gmfThemeselector",s.component_);s.Controller_=function(t,e,n){this.gmfThemeManager=e;this.gmfThemes_=n;this.themes;this.filter;this.listenerKeys_=[];this.listenerKeys_.push(a["a"](this.gmfThemes_,"change",this.setThemes_,this));t.$on("$destroy",this.handleDestroy_.bind(this))};s.Controller_.$inject=["$scope","gmfThemeManager","gmfThemes"];s.Controller_.prototype.setThemes_=function(){var t=this;this.gmfThemes_.getThemesObject().then(function(e){t.themes=t.filter?e.filter(t.filter):e})};s.Controller_.prototype.setTheme=function(t,e){if(t){this.gmfThemeManager.addTheme(t,e)}};s.Controller_.prototype.handleDestroy_=function(){this.listenerKeys_.forEach(a["e"]);this.listenerKeys_.length=0};s.controller("gmfThemeselectorController",s.Controller_);var u=s;var c=angular.module("gmfThemeModule",[u.name,i["a"].module.name,r["a"].module.name]);var f=e["a"]=c},function(t,e,n){"use strict";var i=n(2);var r=n(3);var a=n(14);var o=n(115);var s=n(36);var l=n(21);var u=n(9);var c=n(68);var f=n(33);var h=n(12);var d=n(213);var p=n(109);var v=n(312);var g=n(182);var m=angular.module("gmfProfile",[d["a"].module.name,p["a"].module.name,v["a"].name]);m.value("gmfProfileTemplateUrl",function(t,e){var n=e["gmfProfileTemplateurl"];return n!==undefined?n:"gmf/profile"});m.run(["$templateCache",function(t){t.put("gmf/profile",n(484))}]);_.$inject=["$element","$attrs","gmfProfileTemplateUrl"];function _(t,e,n){return n(t,e)}m.component_={controller:"GmfProfileController as ctrl",bindings:{active:"=gmfProfileActive",line:"=gmfProfileLine",getMapFn:"&?gmfProfileMap",getLinesConfigurationFn:"&gmfProfileLinesconfiguration",getHoverPointStyleFn:"&?gmfProfileHoverpointstyle",getNbPointsFn:"&?gmfProfileNumberofpoints",getOptionsFn:"&?gmfProfileOptions"},templateUrl:_};m.component("gmfProfile",m.component_);m.Controller_=function(t,e,n,i,r,o,s,l){var u=this;this.$scope_=t;this.$http_=e;this.$element_=n;this.$filter_=i;this.gettextCatalog_=r;this.pointHoverOverlay_=o.getFeatureOverlay();this.gmfProfileJsonUrl_=s;this.ngeoCsvDownload_=l;this.map_=null;this.linesConfiguration_=null;this.layersNames_=[];this.nbPoints_=100;this.line;this.profileData=[];this.currentPoint={coordinate:undefined,distance:undefined,elevations:{},xUnits:undefined,yUnits:undefined};this.profileHighlight=-1;this.measureTooltip_=null;this.measureTooltipElement_=null;this.snappedPoint_=new a["a"];this.pointHoverOverlay_.addFeature(this.snappedPoint_);this.profileLabels_={xAxis:r.getString("Distance"),yAxis:r.getString("Elevation")};this.profileOptions=null;this.active=false;this.pointerMoveKey_;this.isErrored=false;t.$watch(function(){return u.active},function(t,e){if(e!==t){u.updateEventsListening_()}});t.$watch(function(){return u.line},function(t,e){if(e!==t){u.update_()}});this.updateEventsListening_()};m.Controller_.$inject=["$scope","$http","$element","$filter","gettextCatalog","ngeoFeatureOverlayMgr","gmfProfileJsonUrl","ngeoCsvDownload"];m.Controller_.prototype.$onInit=function(){this.map_=this["getMapFn"]?this["getMapFn"]():null;this.nbPoints_=this["getNbPointsFn"]?this["getNbPointsFn"]():100;var t=void 0;var e=this["getHoverPointStyleFn"];if(e){t=e();i["a"].assertInstanceof(t,h["c"])}else{t=new h["c"]({image:new c["a"]({fill:new f["a"]({color:"#ffffff"}),radius:3})})}this.pointHoverOverlay_.setStyle(t);var n=this["getLinesConfigurationFn"]();i["a"].assertInstanceof(n,Object);this.linesConfiguration_=n;for(var r in this.linesConfiguration_){this.layersNames_.push(r);var a=this.linesConfiguration_[r];if(!a.zExtractor){this.linesConfiguration_[r].zExtractor=this.getZFactory_(r)}}this.profileOptions={linesConfiguration:this.linesConfiguration_,distanceExtractor:this.getDist_,hoverCallback:this.hoverCallback_.bind(this),outCallback:this.outCallback_.bind(this),i18n:this.profileLabels_};var o=this["getOptionsFn"];if(o){var s=o();i["a"].assertObject(s);u["a"](this.profileOptions,s)}};m.Controller_.prototype.update_=function(){this.isErrored=false;if(this.line){this.getJsonProfile_()}else{this.profileData=[]}this.active=!!this.line};m.Controller_.prototype.updateEventsListening_=function(){if(this.active&&this.map_!==null){this.pointerMoveKey_=r["a"](this.map_,"pointermove",this.onPointerMove_.bind(this))}else{r["e"](this.pointerMoveKey_)}};m.Controller_.prototype.onPointerMove_=function(t){if(t.dragging||!this.line){return}var e=this.map_.getEventCoordinate(t.originalEvent);var n=this.line.getClosestPoint(e);var i=new s["a"]([n,e]);var r=i.getLength()/this.map_.getView().getResolution();if(r<16){this.profileHighlight=this.getDistanceOnALine_(n,this.line)}else{this.profileHighlight=-1}this.$scope_.$apply()};m.Controller_.prototype.getDistanceOnALine_=function(t,e){var n=void 0;var i=0;var r=[t[0]-.5,t[1]-.5,t[0]+.5,t[1]+.5];this.line.forEachSegment(function(e,a){n=new s["a"]([e,a]);if(n.intersectsExtent(r)){n.setCoordinates([e,t]);return i+=n.getLength()}else{i+=n.getLength()}});return i};m.Controller_.prototype.hoverCallback_=function(t,e,n,i,r){var a=[t.x,t.y];this.currentPoint.elevations=i;this.currentPoint.distance=e;this.currentPoint.xUnits=n;this.currentPoint.yUnits=r;this.currentPoint.coordinate=a;var o=new l["a"](a);this.createMeasureTooltip_();this.measureTooltipElement_.innerHTML=this.getTooltipHTML_();this.measureTooltip_.setPosition(a);this.snappedPoint_.setGeometry(o)};m.Controller_.prototype.outCallback_=function(){this.currentPoint.coordinate=undefined;this.currentPoint.distance=undefined;this.currentPoint.elevations={};this.currentPoint.xUnits=undefined;this.currentPoint.yUnits=undefined;this.removeMeasureTooltip_();this.snappedPoint_.setGeometry(null)};m.Controller_.prototype.getTooltipHTML_=function(){var t=this.gettextCatalog_;var e="&nbsp;: ";var n=void 0,i=void 0;var r=[];var a=this.$filter_("number");var o=this.currentPoint.xUnits==="m"?0:2;var s=a(this.currentPoint.distance,o);r.push(this.profileLabels_.xAxis+" "+e+" "+s+"&nbsp;"+this.currentPoint.xUnits);for(n in this.currentPoint.elevations){i=t.getString(n);var l=this.currentPoint.elevations[n];var u=l===null?t.getString("no value"):a(l,0)+"&nbsp;"+this.currentPoint.yUnits;r.push(i+" "+e+" "+u)}return r.join("</br>")};m.Controller_.prototype.createMeasureTooltip_=function(){this.removeMeasureTooltip_();this.measureTooltipElement_=document.createElement("div");this.measureTooltipElement_.className+="tooltip ngeo-tooltip-measure";this.measureTooltip_=new o["a"]({element:this.measureTooltipElement_,offset:[0,-15],positioning:"bottom-center"});this.map_.addOverlay(this.measureTooltip_)};m.Controller_.prototype.removeMeasureTooltip_=function(){if(this.measureTooltipElement_!==null){this.measureTooltipElement_.parentNode.removeChild(this.measureTooltipElement_);this.measureTooltipElement_=null;this.map_.removeOverlay(this.measureTooltip_)}};m.Controller_.prototype.getStyle=function(t){var e=this.linesConfiguration_[t];if(!e){return{}}return{color:e.color||"#F00"}};m.Controller_.prototype.getLayersNames=function(){return this.layersNames_.slice(0)};m.Controller_.prototype.getZFactory_=function(t){var e=function e(n){if("values"in n&&t in n["values"]&&n["values"][t]){return parseFloat(n["values"][t])}return null};return e};m.Controller_.prototype.getDist_=function(t){if("dist"in t){return t["dist"]}return 0};m.Controller_.prototype.getJsonProfile_=function(){var t={type:"LineString",coordinates:this.line.getCoordinates()};var e={layers:this.layersNames_.join(","),geom:JSON.stringify(t),nbPoints:this.nbPoints_};this.$http_({url:this.gmfProfileJsonUrl_,method:"POST",params:e,paramSerializer:"$httpParamSerializerJQLike",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(this.getProfileDataSuccess_.bind(this),this.getProfileDataError_.bind(this))};m.Controller_.prototype.getProfileDataSuccess_=function(t){var e=t.data["profile"];if(e instanceof Array){this.profileData=e}};m.Controller_.prototype.getProfileDataError_=function(t){this.isErrored=true;console.error("Can not get JSON profile.")};m.Controller_.prototype.downloadCsv=function(){if(this.profileData.length===0){return}var t=[];var e=false;var n=this.profileData[0];if("dist"in n){t.push({name:"distance"});e=true}var i=[];for(var r in n["values"]){t.push({name:r});i.push(r)}t.push({name:"x"});t.push({name:"y"});var a=this.profileData.map(function(t){var n={};if(e){n["distance"]=t["dist"]}i.forEach(function(e){n[e]=t["values"][e]});n["x"]=t["x"];n["y"]=t["y"];return n});this.ngeoCsvDownload_.startDownload(a,t,"profile.csv")};m.controller("GmfProfileController",m.Controller_);var y=m;var b=n(330);var w=n(573);var x=angular.module("gmfProfileModule",[y.name,b["a"].name]);var S=e["a"]=x},function(t,e,n){"use strict";var i=n(265);var r=n(2);var a=n(24);var o=n(264);var s=n(396);var l=n(120);var u=n(263);var c=n(13);var f=n(308);var h=n(261);var d=n(260);var p=n(101);var v=n(65);var g=n(63);var m=n(94);var _=n(60);var y=n(1);var b=n(7);var w=n(3);var x=n(19);var S=n(33);var C=n(12);var E=n(140);var O=n(182);var T=angular.module("GmfDrawFeatureComponent",[i["a"].name,s["a"].name,l["a"].name,u["a"].name,v["a"].module.name,m["a"].module.name]);T.run(["$templateCache",function(t){t.put("gmf/drawing/drawFeatureComponent",n(518))}]);T.component_=function(){return{controller:"GmfDrawfeatureController as efCtrl",scope:{active:"=gmfDrawfeatureActive",map:"<gmfDrawfeatureMap",showMeasure:"=?gmfDrawfeatureShowmeasure"},bindToController:true,templateUrl:"gmf/drawing/drawFeatureComponent"}};T.directive("gmfDrawfeature",T.component_);T.Controller_=function(t,e,n,i,r,a){var o=this;this.map;this.active;if(this.active===undefined){this.active=false}this.drawActive=false;this.drawToolActivate=new g["a"](this,"drawActive");this.mapSelectActive=true;this.longPressTimeout_=null;this.mapSelectToolActivate=new g["a"](this,"mapSelectActive");this.scope_=t;this.timeout_=e;this.featureHelper_=i;this.features=r;this.ngeoToolActivateMgr_=a;this.selectedFeature=null;this.selectedFeatures=new x["b"];this.interactions_=new x["b"];this.modify_=new f["a"]({features:this.selectedFeatures,style:i.getVertexStyle(false)});this.interactions_.push(this.modify_);this.menu_=null;this.modifyToolActivate=new g["a"](this.modify_,"active");this.translate_=new d["a"]({features:this.selectedFeatures,style:new C["c"]({text:new E["a"]({text:"",font:"normal 18px FontAwesome",fill:new S["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.translate_);this.rotate_=new h["a"]({features:this.selectedFeatures,style:new C["c"]({text:new E["a"]({text:"",font:"normal 18px FontAwesome",fill:new S["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.rotate_);this.initializeInteractions_();this.rotateToolActivate=new g["a"](this.rotate_,"active");this.translateToolActivate=new g["a"](this.translate_,"active");this.listenerKeys_=[];this.listSelectionInProgress_=false;t.$watch(function(){return o.active},this.handleActiveChange_.bind(this));t.$watch(function(){return o.drawActive},function(t){if(t){o.selectedFeature=null}});t.$watch(function(){return o.selectedFeature},function(t,e){o.selectedFeatures.clear();if(e){o.featureHelper_.setStyle(e);o.unregisterInteractions_()}if(t){o.featureHelper_.setStyle(t,true);o.selectedFeatures.push(t);o.registerInteractions_();if(o.listSelectionInProgress_){o.featureHelper_.panMapToFeature(t,o.map);o.listSelectionInProgress_=false}}else if(o.menu_){o.map.removeOverlay(o.menu_);o.menu_=null}});t.$watch(function(){return o.mapSelectActive},this.handleMapSelectActiveChange_.bind(this));this.nameProperty=c["a"].NAME;this.gettextCatalog_=n};T.Controller_.$inject=["$scope","$timeout","gettextCatalog","ngeoFeatureHelper","ngeoFeatures","ngeoToolActivateMgr"];T.Controller_.prototype.initializeInteractions_=function(){this.interactions_.forEach(function(t){t.setActive(false);p["a"].interaction(t)})};T.Controller_.prototype.registerInteractions_=function(){var t=this;this.interactions_.forEach(function(e){t.map.addInteraction(e)})};T.Controller_.prototype.unregisterInteractions_=function(){var t=this;this.interactions_.forEach(function(e){t.map.removeInteraction(e)})};T.Controller_.prototype.handleActiveChange_=function(t){var e=this.listenerKeys_;var n=["draw-",y["c"](this)].join("-");var i=["other-",y["c"](this)].join("-");var r=this.ngeoToolActivateMgr_;if(t){e.push(w["a"](this.features,"add",this.handleFeaturesAdd_,this),w["a"](this.features,"remove",this.handleFeaturesRemove_,this));e.push(w["a"](this.translate_,"translateend",this.handleTranslateEnd_,this));e.push(w["a"](this.rotate_,"rotateend",this.handleRotateEnd_,this));r.registerTool(n,this.drawToolActivate,false);r.registerTool(n,this.mapSelectToolActivate,true);r.registerTool(i,this.drawToolActivate,false);r.registerTool(i,this.modifyToolActivate,true);r.registerTool(i,this.translateToolActivate,false);r.registerTool(i,this.rotateToolActivate,false);this.mapSelectActive=true;this.modify_.setActive(true)}else{e.forEach(w["e"]);e.length=0;r.unregisterTool(n,this.drawToolActivate);r.unregisterTool(n,this.mapSelectToolActivate);r.unregisterTool(i,this.drawToolActivate);r.unregisterTool(i,this.modifyToolActivate);r.unregisterTool(i,this.translateToolActivate);r.unregisterTool(i,this.rotateToolActivate);this.drawActive=false;this.modify_.setActive(false);this.mapSelectActive=false;this.selectedFeature=null;if(this.menu_){this.map.removeOverlay(this.menu_);this.menu_=null}}};T.Controller_.prototype.selectFeatureFromList=function(t){this.listSelectionInProgress_=true;this.selectedFeature=t;this.drawActive=false};T.Controller_.prototype.getFeaturesArray=function(){return this.features.getArray()};T.Controller_.prototype.clearFeatures=function(){var t=this.gettextCatalog_;var e=t.getString("Do you really want to delete all the features?");if(confirm(e)){this.features.clear()}};T.Controller_.prototype.removeFeature=function(t){var e=this.gettextCatalog_;var n=e.getString("Do you really want to delete the selected feature?");if(confirm(n)){this.features.remove(t)}};T.Controller_.prototype.handleFeaturesAdd_=function(t){var e=this;this.timeout_(function(){e.selectedFeature=t.element;e.drawActive=false;e.scope_.$apply()})};T.Controller_.prototype.handleFeaturesRemove_=function(t){this.selectedFeature=null};T.Controller_.prototype.handleMapSelectActiveChange_=function(t){var e=this.map.getViewport();r["a"].assertElement(e);if(t){w["a"](this.map,"click",this.handleMapClick_,this);w["a"](e,"contextmenu",this.handleMapContextMenu_,this);w["a"](e,"touchstart",this.handleMapTouchStart_,this);w["a"](e,"touchmove",this.handleMapTouchEnd_,this);w["a"](e,"touchend",this.handleMapTouchEnd_,this);w["a"](document.body,"keydown",this.handleCancelKeyEvent_,this)}else{w["c"](this.map,"click",this.handleMapClick_,this);w["c"](e,"contextmenu",this.handleMapContextMenu_,this);w["c"](e,"touchstart",this.handleMapTouchStart_,this);w["c"](e,"touchmove",this.handleMapTouchEnd_,this);w["c"](e,"touchend",this.handleMapTouchEnd_,this);w["c"](document.body,"keydown",this.handleCancelKeyEvent_,this)}};T.Controller_.prototype.handleMapClick_=function(t){var e=this;var n=t.pixel;var i=this.map.forEachFeatureAtPixel(n,function(t){var n=false;if(b["f"](e.features.getArray(),t)){n=t}return n},{hitTolerance:5});i=i?i:null;if(i===this.selectedFeature){return}this.selectedFeature=i;this.scope_.$apply()};T.Controller_.prototype.handleCancelKeyEvent_=function(){var t=this;w["a"](document.body,"keydown",function(e){var n=e.keyCode===27;if(!_["a"].mousedown&&n&&t.selectedFeature){t.selectedFeature=null;t.scope_.$apply()}})};T.Controller_.prototype.handleMapTouchStart_=function(t){var e=this;this.longPressTimeout_=setTimeout(function(){e.handleMapContextMenu_(t)},500)};T.Controller_.prototype.handleMapTouchEnd_=function(t){clearTimeout(this.longPressTimeout_)};T.Controller_.prototype.handleMapContextMenu_=function(t){var e=this;var n=this.gettextCatalog_;var i=this.map.getEventPixel(t);var r=this.map.getCoordinateFromPixel(i);var s=this.map.forEachFeatureAtPixel(i,function(t){var n=false;if(b["f"](e.features.getArray(),t)){n=t}return n},{hitTolerance:7});s=s?s:null;if(s){var l=[];var u=this.featureHelper_.getType(s);if(u==a["a"].CIRCLE||u==a["a"].LINE_STRING||u==a["a"].POLYGON||u==a["a"].RECTANGLE){l=l.concat([{cls:"fa fa-arrows",label:n.getString("Move"),name:"move"},{cls:"fa fa-rotate-right",label:n.getString("Rotate"),name:"rotate"}])}l=l.concat([{cls:"fa fa-trash-o",label:n.getString("Delete"),name:"delete"}]);this.menu_=new o["a"]({actions:l});w["a"](this.menu_,"actionclick",this.handleMenuActionClick_,this);this.map.addOverlay(this.menu_);this.menu_.open(r);t.preventDefault();t.stopPropagation()}if(s===this.selectedFeature){return}this.modify_.setActive(true);this.selectedFeature=s;this.scope_.$apply()};T.Controller_.prototype.handleMenuActionClick_=function(t){var e=t.detail.action;switch(e){case"delete":r["a"].assert(this.selectedFeature,"Selected feature should be truthy");this.removeFeature(this.selectedFeature);this.scope_.$apply();break;case"move":this.translate_.setActive(true);this.scope_.$apply();break;case"rotate":this.rotate_.setActive(true);this.scope_.$apply();break;default:console.log("FIXME - support: "+e);break}};T.Controller_.prototype.handleTranslateEnd_=function(t){this.translate_.setActive(false);this.scope_.$apply()};T.Controller_.prototype.handleRotateEnd_=function(t){this.rotate_.setActive(false);this.scope_.$apply()};T.controller("GmfDrawfeatureController",T.Controller_);var M=T;var I=angular.module("gmfDrawingModule",[M.name,i["a"].name]);var R=e["a"]=I},function(t,e,n){"use strict";var i=n(220);var r=n(2);var a=n(115);var o=n(10);var s=n(3);var l=n(9);var u=angular.module("gmfContextualdata",[i["a"].module.name]);u.directive_=function(){return{restrict:"A",scope:false,controller:"GmfContextualdataController as cdCtrl",bindToController:{map:"<gmfContextualdataMap",projections:"<gmfContextualdataProjections",callback:"<gmfContextualdataCallback"},link:function t(e,n,i,r){r.init()}}};u.directive("gmfContextualdata",u.directive_);u.Controller_=function(t,e,n,i,r){this.map;this.projections;this.callback;this.overlay_;this.$compile_=t;this.timeout_=e;this.$scope_=n;this.gmfRaster_=i;this.gmfContextualdataOptions_=r.has("gmfContextualdataOptions")?r.get("gmfContextualdataOptions"):{};angular.element("body").on("mousedown",this.hidePopover.bind(this))};u.Controller_.$inject=["$compile","$timeout","$scope","gmfRaster","$injector"];u.Controller_.prototype.init=function(){this.preparePopover_();var t=this.map.getTargetElement();r["a"].assertElement(t);s["a"](t,"contextmenu",this.handleMapContextMenu_,this)};u.Controller_.prototype.handleMapContextMenu_=function(t){var e=this;this.$scope_.$apply(function(){var n=e.map.getEventPixel(t);var i=e.map.getCoordinateFromPixel(n);e.setContent_(i);t.preventDefault();e.hidePopover();e.showPopover();e.timeout_(function(){e.overlay_.setPosition(i)})})};u.Controller_.prototype.setContent_=function(t){var e=this.$scope_.$new(true);this.$compile_(this.content_)(e);var n=this.map.getView().getProjection().getCode();this.projections.forEach(function(i){var r=o["n"](t,n,"EPSG:"+i);e["coord_"+i]=r;e["coord_"+i+"_eastern"]=r[0];e["coord_"+i+"_northern"]=r[1]});var i=function(n){l["a"](e,n);if(this.callback){l["a"](e,this.callback.call(this,t,n))}}.bind(this);var r=function t(e){console.error("Error on getting the raster.")};this.gmfRaster_.getRaster(t,this.gmfContextualdataOptions_.rasterParams).then(i,r)};u.Controller_.prototype.preparePopover_=function(){var t=document.createElement("DIV");t.classList.add("popover");t.classList.add("bottom");t.classList.add("gmf-contextualdata");angular.element(t).css("position","relative");var e=document.createElement("DIV");e.classList.add("arrow");t.appendChild(e);this.content_=document.createElement("DIV");this.content_.setAttribute("gmf-contextualdatacontent","");this.content_.classList.add("popover-content");t.appendChild(this.content_);this.overlay_=new a["a"]({element:t,stopEvent:true,autoPan:true,autoPanAnimation:{duration:250},positioning:"top-center"});this.map.addOverlay(this.overlay_)};u.Controller_.prototype.showPopover=function(){var t=this.overlay_.getElement();angular.element(t).css("display","block")};u.Controller_.prototype.hidePopover=function(){var t=this.overlay_.getElement();angular.element(t).css("display","none")};u.controller("GmfContextualdataController",u.Controller_);u.contentDirective_=function(t){return{restrict:"A",scope:true,templateUrl:t}};u.contentDirective_.$inject=["gmfContextualdatacontentTemplateUrl"];u.directive("gmfContextualdatacontent",u.contentDirective_);var c=u;var f=n(616);var h=angular.module("gmfContextualdataModule",[c.name]);var d=e["a"]=h},function(t,e,n){"use strict";var i=n(2);var r=n(109);var a=n(65);var o=angular.module("ngeoMiscSwipe",[]);o.factory("$verticalSwipe",[function(){var t=10;var e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};function n(t){var e=t.originalEvent||t;var n=e.touches&&e.touches.length?e.touches:[e];var i=e.changedTouches&&e.changedTouches[0]||n[0];return{x:i.clientX,y:i.clientY}}function i(t,n){var i=[];angular.forEach(t,function(t){var r=e[t][n];if(r){i.push(r)}});return i.join(" ")}return{bind:function e(r,a,o){var s=void 0,l=void 0;var u=void 0;var c=void 0;var f=false;o=o||["mouse","touch","pointer"];r.on(i(o,"start"),function(t){u=n(t);f=true;s=0;l=0;c=u;if(a["start"]){a["start"](u,t)}});var h=i(o,"cancel");if(h){r.on(h,function(t){f=false;if(a["cancel"]){a["cancel"](t)}})}r.on(i(o,"move"),function(e){if(!f){return}if(!u){return}var i=n(e);s+=Math.abs(i.x-c.x);l+=Math.abs(i.y-c.y);c=i;if(s<t&&l<t){return}if(s>l){f=false;if(a["cancel"]){a["cancel"](e)}return}else{e.preventDefault();if(a["move"]){a["move"](i,e)}}});r.on(i(o,"end"),function(t){if(!f){return}f=false;if(a["end"]){a["end"](n(t),t)}})}}}]);o.makeSwipeDirective_=function(t,e,n){o.directive(t,["$parse","$verticalSwipe",function(i,r){var a=75;var o=.3;var s=30;return function(l,u,c){var f=i(c[t]);var h=void 0,d=void 0;function p(t){if(!h){return false}var n=(t.y-h.y)*e;var i=Math.abs(t.x-h.x);return d&&i<a&&n>0&&n>s&&i/n<o}var v=["touch"];if(!angular.isDefined(c["ngeoSwipeDisableMouse"])){v.push("mouse")}r.bind(u,{start:function t(e,n){h=e;d=true},cancel:function t(e){d=false},end:function t(e,i){if(p(e)){l.$apply(function(){u.triggerHandler(n);f(l,{$event:i})})}}},v)}}])};o.makeSwipeDirective_("ngeoSwipeDown",1,"swipedown");o.makeSwipeDirective_("ngeoSwipeUp",-1,"swipeup");var s=o;var l=n(147);var u=n(19);var c=n(9);var f=n(68);var h=n(33);var d=n(35);var p=n(12);var v=n(457);var g=n(455);var m=n(453);var _=n(292);var y=n(182);var b=angular.module("gmfQueryWindowComponent",[r["a"].module.name,a["a"].module.name,s.name,l["a"].module.name,"ngAnimate","ngTouch"]);b.config(["$animateProvider",function(t){t.classNameFilter(/gmf-animatable/)}]);b.value("gmfDisplayquerywindowTemplateUrl",function(t,e){var n=e["gmfDisplayquerywindowTemplateurl"];return n!==undefined?n:"gmf/query/windowComponent"});b.run(["$templateCache",function(t){t.put("gmf/query/windowComponent",n(451))}]);w.$inject=["$element","$attrs","gmfDisplayquerywindowTemplateUrl"];function w(t,e,n){return n(t,e)}b.component_={controller:"GmfDisplayquerywindowController as ctrl",bindings:{draggableContainment:"<?gmfDisplayquerywindowDraggableContainment",featuresStyleFn:"&gmfDisplayquerywindowFeaturesstyle",selectedFeatureStyleFn:"&gmfDisplayquerywindowSelectedfeaturestyle",defaultCollapsedFn:"&?gmfDisplayquerywindowDefaultcollapsed",desktop:"=gmfDisplayquerywindowDesktop",showUnqueriedLayers:"=gmfDisplayquerywindowShowunqueriedlayers"},templateUrl:w};b.component("gmfDisplayquerywindow",b.component_);b.Controller_=function(t,e,n,i,r){var a=this;this.draggableContainment;this.desktop=false;this.collapsed=!this.desktop;this.showUnqueriedLayers_=false;this.sourcesFilter={queried:true};this.ngeoQueryResult={sources:[],total:0,pending:false};this.ngeoMapQuerent_=i;this.selectedSource=null;this.features_=new u["b"];this.ngeoFeatureOverlayMgr_=r;this.highlightFeatures_=new u["b"];this.source=null;this.feature=null;this.currentResult=-1;this.isNext=true;this.animate=0;this.open=false;this.element_=t;e.$watchCollection(function(){return n},function(t,e){a.updateQueryResult_(t);if(t.total>0){a.show()}else if(e!==t){a.open=false;a.clear()}})};b.Controller_.$inject=["$element","$scope","ngeoQueryResult","ngeoMapQuerent","ngeoFeatureOverlayMgr"];b.Controller_.prototype.$onInit=function(){this.draggableContainment=this.draggableContainment||"document";this.desktop=this.desktop;this.collapsed=this["defaultCollapsedFn"]?this["defaultCollapsedFn"]()===true:!this.desktop;this.showUnqueriedLayers_=this["showUnqueriedLayers"]?this["showUnqueriedLayers"]===true:false;this.sourcesFilter=this.showUnqueriedLayers_?{}:{queried:true};var t=this.ngeoFeatureOverlayMgr_.getFeatureOverlay();t.setFeatures(this.features_);var e=this["featuresStyleFn"]();if(e!==undefined){i["a"].assertInstanceof(e,p["c"]);t.setStyle(e)}var n=this.ngeoFeatureOverlayMgr_.getFeatureOverlay();n.setFeatures(this.highlightFeatures_);var r=this["selectedFeatureStyleFn"]();if(r!==undefined){i["a"].assertInstanceof(r,p["c"])}else{var a=new h["a"]({color:[255,0,0,.6]});var o=new d["a"]({color:[255,0,0,1],width:2});r=new p["c"]({fill:a,image:new f["a"]({fill:a,radius:5,stroke:o}),stroke:o})}n.setStyle(r);var s=this.element_.find(".gmf-displayquerywindow .windowcontainer");if(this.desktop){s.draggable({handle:".header",containment:this.draggableContainment});s.resizable({minHeight:240,minWidth:240})}};b.Controller_.prototype.show=function(){this.clear();this.updateFeatures_()};b.Controller_.prototype.updateFeatures_=function(){this.setCurrentResult_(0,false);if(this.source!==null){this.collectFeatures_();this.highlightCurrentFeature_();this.open=true}};b.Controller_.prototype.setCurrentResult_=function(t,e){var n=false;if(t!==this.currentResult){var i=void 0,r=void 0,a=void 0;var o=this.feature;var s=this.ngeoQueryResult.sources;this.currentResult=t;for(i=0;i<s.length;i++){r=s[i];if(this.selectedSource!==null&&this.selectedSource!==r){continue}a=r.features;if(t>=a.length){t-=a.length}else{this.source=r;this.feature=r.features[t];n=true;break}}if(e){this.highlightCurrentFeature_(o)}}return n};b.Controller_.prototype.previous=function(){var t=this.currentResult-1;if(t<0){t=this.getResultLength()-1}var e=this.setCurrentResult_(t,true);if(e){this.animate_(false)}};b.Controller_.prototype.next=function(){var t=this.currentResult+1;var e=this.getResultLength()-1;if(t>e){t=0}var n=this.setCurrentResult_(t,true);if(n){this.animate_(true)}};b.Controller_.prototype.updateQueryResult_=function(t){this.ngeoQueryResult.total=0;this.ngeoQueryResult.sources.length=0;for(var e=0;e<t.sources.length;e++){var n=t.sources[e];n.features=n.features.filter(function(t){i["a"].assert(t);return!c["d"](a["a"].getFilteredFeatureValues(t))});this.ngeoQueryResult.sources.push(n);this.ngeoQueryResult.total+=n.features.length}};b.Controller_.prototype.getResultLength=function(){if(this.selectedSource===null){return this.ngeoQueryResult.total}else{return this.selectedSource.features.length}};b.Controller_.prototype.isFirst=function(){return this.currentResult==0};b.Controller_.prototype.isLast=function(){return this.currentResult==this.getResultLength()-1};b.Controller_.prototype.getFeatureValues=function(){if(!this.feature){return null}return a["a"].getFilteredFeatureValues(this.feature)};b.Controller_.prototype.animate_=function(t){this.isNext=t;this.animate++};b.Controller_.prototype.collectFeatures_=function(){var t=this.ngeoQueryResult.sources;this.features_.clear();for(var e=0;e<t.length;e++){var n=t[e];if(this.selectedSource!==null&&this.selectedSource!==n){continue}var i=n.features;for(var r=0;r<i.length;r++){this.features_.push(i[r])}}};b.Controller_.prototype.highlightCurrentFeature_=function(t){this.highlightFeatures_.clear();this.features_.remove(this.feature);this.highlightFeatures_.push(this.feature);if(t!==undefined){this.features_.push(t)}};b.Controller_.prototype.close=function(){this.open=false;this.clear();this.ngeoMapQuerent_.clear()};b.Controller_.prototype.clear=function(){this.feature=null;this.source=null;this.currentResult=-1;this.features_.clear();this.highlightFeatures_.clear();this.selectedSource=null};b.Controller_.prototype.setSelectedSource=function(t){if(t!==null&&t.features.length<=0){return}this.clear();this.selectedSource=t;this.updateFeatures_()};b.controller("GmfDisplayquerywindowController",b.Controller_);var x=e["a"]=b},function(t,e,n){"use strict";var i=n(1);var r=n(4);var a=n(205);var o=n(143);var s=n(5);var l=n(0);var u=function t(){o["a"].call(this)};Object(i["d"])(u,o["a"]);var c=[null,"http://www.opengis.net/ows/1.1"];var f=Object(l["r"])(c,{ServiceIdentification:Object(l["n"])(D),ServiceProvider:Object(l["n"])(k),OperationsMetadata:Object(l["n"])(L)});var h=Object(l["r"])(c,{DeliveryPoint:Object(l["n"])(s["h"]),City:Object(l["n"])(s["h"]),AdministrativeArea:Object(l["n"])(s["h"]),PostalCode:Object(l["n"])(s["h"]),Country:Object(l["n"])(s["h"]),ElectronicMailAddress:Object(l["n"])(s["h"])});var d=Object(l["r"])(c,{Value:Object(l["m"])(F)});var p=Object(l["r"])(c,{AllowedValues:Object(l["n"])(O)});var v=Object(l["r"])(c,{Phone:Object(l["n"])(P),Address:Object(l["n"])(E)});var g=Object(l["r"])(c,{HTTP:Object(l["n"])(N)});var m=Object(l["r"])(c,{Get:Object(l["m"])(R),Post:undefined});var _=Object(l["r"])(c,{DCP:Object(l["n"])(I)});var y=Object(l["r"])(c,{Operation:A});var b=Object(l["r"])(c,{Voice:Object(l["n"])(s["h"]),Facsimile:Object(l["n"])(s["h"])});var w=Object(l["r"])(c,{Constraint:Object(l["m"])(T)});var x=Object(l["r"])(c,{IndividualName:Object(l["n"])(s["h"]),PositionName:Object(l["n"])(s["h"]),ContactInfo:Object(l["n"])(M)});var S=Object(l["r"])(c,{Abstract:Object(l["n"])(s["h"]),AccessConstraints:Object(l["n"])(s["h"]),Fees:Object(l["n"])(s["h"]),Title:Object(l["n"])(s["h"]),ServiceTypeVersion:Object(l["n"])(s["h"]),ServiceType:Object(l["n"])(s["h"])});var C=Object(l["r"])(c,{ProviderName:Object(l["n"])(s["h"]),ProviderSite:Object(l["n"])(a["a"]),ServiceContact:Object(l["n"])(j)});u.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling){if(e.nodeType==Node.ELEMENT_NODE){return this.readFromNode(e)}}return null};u.prototype.readFromNode=function(t){var e=Object(l["u"])({},f,t,[]);return e?e:null};function E(t,e){return Object(l["u"])({},h,t,e)}function O(t,e){return Object(l["u"])({},d,t,e)}function T(t,e){var n=t.getAttribute("name");if(!n){return undefined}return Object(l["u"])({name:n},p,t,e)}function M(t,e){return Object(l["u"])({},v,t,e)}function I(t,e){return Object(l["u"])({},g,t,e)}function R(t,e){var n=Object(a["a"])(t);if(!n){return undefined}return Object(l["u"])({href:n},w,t,e)}function N(t,e){return Object(l["u"])({},m,t,e)}function A(t,e){var n=t.getAttribute("name");var i=Object(l["u"])({},_,t,e);if(!i){return undefined}var r=e[e.length-1];r[n]=i}function L(t,e){return Object(l["u"])({},y,t,e)}function P(t,e){return Object(l["u"])({},b,t,e)}function D(t,e){return Object(l["u"])({},S,t,e)}function j(t,e){return Object(l["u"])({},x,t,e)}function k(t,e){return Object(l["u"])({},C,t,e)}function F(t,e){return Object(s["h"])(t)}var $=u;var G=function t(){o["a"].call(this);this.owsParser_=new $};Object(i["d"])(G,o["a"]);var U=[null,"http://www.opengis.net/wmts/1.0"];var Y=[null,"http://www.opengis.net/ows/1.1"];var V=Object(l["r"])(U,{Contents:Object(l["n"])(tt)});var H=Object(l["r"])(U,{Layer:Object(l["m"])(et),TileMatrixSet:Object(l["m"])(nt)});var z=Object(l["r"])(U,{Style:Object(l["m"])(it),Format:Object(l["m"])(s["h"]),TileMatrixSetLink:Object(l["m"])(rt),Dimension:Object(l["m"])(at),ResourceURL:Object(l["m"])(ot)},Object(l["r"])(Y,{Title:Object(l["n"])(s["h"]),Abstract:Object(l["n"])(s["h"]),WGS84BoundingBox:Object(l["n"])(st),Identifier:Object(l["n"])(s["h"])}));var B=Object(l["r"])(U,{LegendURL:Object(l["m"])(lt)},Object(l["r"])(Y,{Title:Object(l["n"])(s["h"]),Identifier:Object(l["n"])(s["h"])}));var W=Object(l["r"])(U,{TileMatrixSet:Object(l["n"])(s["h"]),TileMatrixSetLimits:Object(l["n"])(ft)});var q=Object(l["r"])(U,{TileMatrixLimits:Object(l["j"])(ht)});var X=Object(l["r"])(U,{TileMatrix:Object(l["n"])(s["h"]),MinTileRow:Object(l["n"])(s["f"]),MaxTileRow:Object(l["n"])(s["f"]),MinTileCol:Object(l["n"])(s["f"]),MaxTileCol:Object(l["n"])(s["f"])});var K=Object(l["r"])(U,{Default:Object(l["n"])(s["h"]),Value:Object(l["m"])(s["h"])},Object(l["r"])(Y,{Identifier:Object(l["n"])(s["h"])}));var Z=Object(l["r"])(Y,{LowerCorner:Object(l["j"])(ut),UpperCorner:Object(l["j"])(ut)});var Q=Object(l["r"])(U,{WellKnownScaleSet:Object(l["n"])(s["h"]),TileMatrix:Object(l["m"])(ct)},Object(l["r"])(Y,{SupportedCRS:Object(l["n"])(s["h"]),Identifier:Object(l["n"])(s["h"])}));var J=Object(l["r"])(U,{TopLeftCorner:Object(l["n"])(ut),ScaleDenominator:Object(l["n"])(s["d"]),TileWidth:Object(l["n"])(s["f"]),TileHeight:Object(l["n"])(s["f"]),MatrixWidth:Object(l["n"])(s["f"]),MatrixHeight:Object(l["n"])(s["f"])},Object(l["r"])(Y,{Identifier:Object(l["n"])(s["h"])}));G.prototype.read;G.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling){if(e.nodeType==Node.ELEMENT_NODE){return this.readFromNode(e)}}return null};G.prototype.readFromNode=function(t){var e=t.getAttribute("version").trim();var n=this.owsParser_.readFromNode(t);if(!n){return null}n["version"]=e;n=Object(l["u"])(n,V,t,[]);return n?n:null};function tt(t,e){return Object(l["u"])({},H,t,e)}function et(t,e){return Object(l["u"])({},z,t,e)}function nt(t,e){return Object(l["u"])({},Q,t,e)}function it(t,e){var n=Object(l["u"])({},B,t,e);if(!n){return undefined}var i=t.getAttribute("isDefault")==="true";n["isDefault"]=i;return n}function rt(t,e){return Object(l["u"])({},W,t,e)}function at(t,e){return Object(l["u"])({},K,t,e)}function ot(t,e){var n=t.getAttribute("format");var i=t.getAttribute("template");var r=t.getAttribute("resourceType");var a={};if(n){a["format"]=n}if(i){a["template"]=i}if(r){a["resourceType"]=r}return a}function st(t,e){var n=Object(l["u"])([],Z,t,e);if(n.length!=2){return undefined}return Object(r["b"])(n)}function lt(t,e){var n={};n["format"]=t.getAttribute("format");n["href"]=Object(a["a"])(t);return n}function ut(t,e){var n=Object(s["h"])(t).split(" ");if(!n||n.length!=2){return undefined}var i=+n[0];var r=+n[1];if(isNaN(i)||isNaN(r)){return undefined}return[i,r]}function ct(t,e){return Object(l["u"])({},J,t,e)}function ft(t,e){return Object(l["u"])([],q,t,e)}function ht(t,e){return Object(l["u"])({},X,t,e)}var dt=e["a"]=G},function(t,e,n){"use strict";var i=n(23);var r=n(269);var a=n(3);var o=angular.module("gmfBackgroundlayerselector",[i["a"].module.name,r["a"].module.name]);o.value("gmfBackgroundlayerselectorTemplateUrl",function(t,e){var n=e["gmfBackgroundlayerselectorTemplateurl"];return n!==undefined?n:"gmf/backgroundlayerselector"});o.run(["$templateCache",function(t){t.put("gmf/backgroundlayerselector",n(527))}]);s.$inject=["$element","$attrs","gmfBackgroundlayerselectorTemplateUrl"];function s(t,e,n){return n(t,e)}o.component_={controller:"GmfBackgroundlayerselectorController as ctrl",bindings:{map:"=gmfBackgroundlayerselectorMap",opacityOptions:"=gmfBackgroundlayerOpacityOptions",select:"&?gmfBackgroundlayerselectorSelect"},templateUrl:s};o.component("gmfBackgroundlayerselector",o.component_);o.Controller_=function(t,e,n){var i=this;this.map;this.opacityOptions;this.select;this.bgLayer;this.bgLayers;this.opacityLayer;this.gmfThemes_=n;this.listenerKeys_=[];this.listenerKeys_.push(a["a"](n,"change",this.handleThemesChange_,this));this.backgroundLayerMgr_=e;this.listenerKeys_.push(a["a"](this.backgroundLayerMgr_,"change",function(t){i.bgLayer=t.detail.current}));t.$on("$destroy",this.handleDestroy_.bind(this))};o.Controller_.$inject=["$scope","ngeoBackgroundLayerMgr","gmfThemes"];o.Controller_.prototype.$onInit=function(){this.handleThemesChange_()};o.Controller_.prototype.handleThemesChange_=function(){var t=this;this.gmfThemes_.getBgLayers().then(function(e){t.bgLayers=e;if(t.opacityOptions!==undefined){var n=e.find(function(e){return e.get("label")===t.opacityOptions});if(n!==undefined){t.setOpacityBgLayer(n);t.opacityLayer=n;t.bgLayers=t.bgLayers.slice();var i=t.bgLayers.findIndex(function(e){return e===t.opacityLayer});t.bgLayers.splice(i,1);t.bgLayers.push(n)}}})};o.Controller_.prototype.getSetBgLayerOpacity=function(t){if(t!==undefined){this.opacityLayer.setOpacity(t)}return this.opacityLayer.getOpacity()};o.Controller_.prototype.setLayer=function(t,e){this.bgLayer=t;this.backgroundLayerMgr_.set(this.map,t);if(!e&&this.select){this.select()}};o.Controller_.prototype.setOpacityBgLayer=function(t){this.backgroundLayerMgr_.setOpacityBgLayer(this.map,t)};o.Controller_.prototype.handleDestroy_=function(){this.listenerKeys_.forEach(a["e"]);this.listenerKeys_.length=0};o.controller("GmfBackgroundlayerselectorController",o.Controller_);var l=o;var u=angular.module("gmfBackgroundlayerselectorModule",[l.name]);var c=e["a"]=u},function(t,e,n){"use strict";var i=n(2);var r=n(79);var a=n(1);var o=n(3);var s=n(14);var l=n(20);var u=n(165);var c=n(32);var f=n(34);var h=function t(e){this.angle_=e.angle!==undefined?e.angle:0;this.radius_=e.radius;this.sides_=e.sides!==undefined?e.sides:3;this.listenerKeys_=[];f["a"].call(this,{handleEvent:l["b"]})};a["d"](h,f["a"]);h.prototype.setActive=function(t){f["a"].prototype.setActive.call(this,t);if(this.getMap()){if(t){this.enable_()}else{this.disable_()}}};h.prototype.setMap=function(t){var e=this.getActive();var n=this.getMap();if(n&&e){this.disable_()}f["a"].prototype.setMap.call(this,t);if(t&&e){this.enable_()}};h.prototype.enable_=function(){var t=this.getMap();i["a"].assert(t,"Map should be set.");this.listenerKeys_.push(o["a"](t,"click",this.handleMapClick_,this))};h.prototype.disable_=function(){var t=this.getMap();i["a"].assert(t,"Map should be set.");this.listenerKeys_.forEach(o["e"]);this.listenerKeys_.length=0};h.prototype.handleMapClick_=function(t){var e=t.coordinate;var n=Object(c["b"])(new u["a"](e),this.sides_);Object(c["d"])(n,e,this.radius_,this.angle_);var i=new r["a"]("drawend",{feature:new s["a"](n)});this.dispatchEvent(i)};var d=h;var p=angular.module("ngeoCreateregularpolygonfromclick",[]);p.directive_=function(){return{controller:"ngeoCreateregularpolygonfromclickController",bindToController:true,scope:{active:"=ngeoCreateregularpolygonfromclickActive",angle:"<?ngeoCreateregularpolygonfromclickAngle",features:"=ngeoCreateregularpolygonfromclickFeatures",map:"=ngeoCreateregularpolygonfromclickMap",radius:"<ngeoCreateregularpolygonfromclickRadius",sides:"<?ngeoCreateregularpolygonfromclickSides"}}};p.directive("ngeoCreateregularpolygonfromclick",p.directive_);p.Controller_=function(t){var e=this;this.active=false;t.$watch(function(){return e.active},function(t){e.interaction_.setActive(t)});this.angle;this.features;this.map;this.radius;this.sides;this.interaction_;this.interactionListenerKey_;t.$on("$destroy",this.handleDestroy_.bind(this))};p.Controller_.$inject=["$scope"];p.Controller_.prototype.$onInit=function(){this.interaction_=new d({angle:this.angle,radius:this.radius,sides:this.sides});this.interaction_.setActive(this.active);this.interactionListenerKey_=o["a"](this.interaction_,"drawend",this.handleDrawEnd_,this);this.map.addInteraction(this.interaction_)};p.Controller_.prototype.handleDrawEnd_=function(t){var e=new s["a"](t.detail.feature.getGeometry());this.features.push(e)};p.Controller_.prototype.handleDestroy_=function(){o["e"](this.interactionListenerKey_);this.interaction_.setActive(false);this.map.removeInteraction(this.interaction_)};p.controller("ngeoCreateregularpolygonfromclickController",p.Controller_);var v=e["a"]=p},function(t,e,n){"use strict";var i=n(2);var r=n(60);var a=n(1);var o=n(136);var s=n(57);var l=n(124);var u=n(15);var c=n(224);var f=n(68);var h=n(84);var d=function t(){this.geojsonFormat=new o["a"]};d.PrintStyleType={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"};d.PrintStyleTypes_={LineString:d.PrintStyleType.LINE_STRING,Point:d.PrintStyleType.POINT,Polygon:d.PrintStyleType.POLYGON,MultiLineString:d.PrintStyleType.LINE_STRING,MultiPoint:d.PrintStyleType.POINT,MultiPolygon:d.PrintStyleType.POLYGON};d.prototype.encodeVectorLayer=function(t,e,n){var r=e.getSource();i["a"].assertInstanceof(r,s["b"]);var o=r.getFeatures();var l=[];var u={version:2};for(var c=0,f=o.length;c<f;++c){var h=o[c];var d=null;var p=h.getStyleFunction()||e.getStyleFunction();if(p!==undefined){d=p.call(e,h,n)}var v=this.geojsonFormat.writeFeatureObject(h);var g=d!==null&&!Array.isArray(d)?[d]:d;i["a"].assert(Array.isArray(g));if(g!==null&&g.length>0){var m=false;for(var _=0,y=g.length;_<y;++_){var b=g[_];var w=b.getGeometry();var x=void 0;if(!w){x=v;w=h.getGeometry();if(!w){continue}if(!m){l.push(x);m=true}}else{var S=h.clone();S.setGeometry(w);x=this.geojsonFormat.writeFeatureObject(S);w=S.getGeometry();S=null;l.push(x)}var C=w.getType();if(x.properties===null){x.properties={}}var E="_ngeo_style_"+_;var O=a["c"](b).toString()+"-"+C;this.encodeVectorStyle(u,C,b,O,E);x.properties[E]=O}}}if(l.length>0){var T={type:"FeatureCollection",features:l};var M={geoJson:T,opacity:e.getOpacity(),style:u,type:"geojson"};t.push(M)}};d.prototype.encodeVectorStyle=function(t,e,n,i,r){if(!(e in d.PrintStyleTypes_)){return}var a=d.PrintStyleTypes_[e];var o="["+r+" = '"+i+"']";if(o in t){return}var s={symbolizers:[]};t[o]=s;var l=n.getFill();var u=n.getImage();var c=n.getStroke();var f=n.getText();if(a===d.PrintStyleType.POLYGON){if(l!==null){this.encodeVectorStylePolygon(s.symbolizers,l,c)}}else if(a===d.PrintStyleType.LINE_STRING){if(c!==null){this.encodeVectorStyleLine(s.symbolizers,c)}}else if(a===d.PrintStyleType.POINT){if(u!==null){this.encodeVectorStylePoint(s.symbolizers,u)}}if(f!==null){this.encodeTextStyle(s.symbolizers,f)}};d.prototype.encodeVectorStyleFill=function(t,e){var n=e.getColor();if(n!==null){i["a"].assert(typeof n==="string"||Array.isArray(n));n=h["a"](n);i["a"].assert(Array.isArray(n),"only supporting fill colors");t.fillColor=r["b"].rgbArrayToHex(n);t.fillOpacity=n[3]}};d.prototype.encodeVectorStyleLine=function(t,e){var n={type:"line"};this.encodeVectorStyleStroke(n,e);t.push(n)};d.prototype.encodeVectorStylePoint=function(t,e){var n=void 0;if(e instanceof f["a"]){n={type:"point"};n.pointRadius=e.getRadius();var i=e.getFill();if(i!==null){this.encodeVectorStyleFill(n,i)}var r=e.getStroke();if(r!==null){this.encodeVectorStyleStroke(n,r)}}else if(e instanceof c["a"]){var a=new URL(e.getSrc(),window.location.href).href;if(a!==undefined){n={type:"point",externalGraphic:a};var o=e.getOpacity();if(o!==null){n.graphicOpacity=o}var s=e.getSize();if(s!==null){var h=e.getScale();if(isNaN(h)){h=1}n.graphicWidth=s[0]*h;n.graphicHeight=s[1]*h}var d=e.getRotation();if(isNaN(d)){d=0}n.rotation=u["h"](d)}}else if(e instanceof l["a"]){var p=e.getPoints();if(p!==null){n={type:"point"};if(p===4){n.graphicName="square"}else if(p===3){n.graphicName="triangle"}else if(p===5){n.graphicName="star"}else if(p===8){n.graphicName="cross"}var v=e.getSize();if(v!==null){n.graphicWidth=v[0];n.graphicHeight=v[1]}var g=e.getRotation();if(!isNaN(g)&&g!==0){n.rotation=u["h"](g)}var m=e.getOpacity();if(m!==null){n.graphicOpacity=m}var _=e.getStroke();if(_!==null){this.encodeVectorStyleStroke(n,_)}var y=e.getFill();if(y!==null){this.encodeVectorStyleFill(n,y)}}}if(n!==undefined){t.push(n)}};d.prototype.encodeVectorStylePolygon=function(t,e,n){var i={type:"polygon"};this.encodeVectorStyleFill(i,e);if(n!==null){this.encodeVectorStyleStroke(i,n)}t.push(i)};d.prototype.encodeVectorStyleStroke=function(t,e){var n=e.getColor();if(n!==null){i["a"].assert(typeof n==="string"||Array.isArray(n));var a=h["a"](n);i["a"].assert(Array.isArray(a),"only supporting stroke colors");t.strokeColor=r["b"].rgbArrayToHex(a);t.strokeOpacity=a[3]}var o=e.getLineDash();if(o!==null){t.strokeDashstyle=o.join(" ")}var s=e.getWidth();if(s!==undefined){t.strokeWidth=s}var l=e.getLineCap();if(l){t.strokeLinecap=e.getLineCap()}};d.prototype.encodeTextStyle=function(t,e){var n={type:"Text"};var a=e.getText();if(a!==undefined){n.label=a;var o="c";var s="m";var l=e.getTextAlign();if(l==="left"||l==="start"){o="l"}else if(l==="right"||l==="end"){o="r"}var u=e.getTextBaseline();if(u==="bottom"){s="l"}else if(u==="top"){s="t"}n.labelAlign=""+o+s;var c=e.getRotation();if(c!==undefined){n.labelRotation=(c*180/Math.PI).toString();n.labelAlign="cm"}var f=e.getFont();if(f!==undefined){var d=f.split(" ");if(d.length>=3){n.fontWeight=d[0];n.fontSize=d[1];n.fontFamily=d.splice(2).join(" ")}}var p=e.getStroke();if(p!==null){var v=p.getColor();i["a"].assert(typeof v==="string"||Array.isArray(v));var g=h["a"](v);i["a"].assert(Array.isArray(g),"only supporting stroke colors");n.haloColor=r["b"].rgbArrayToHex(g);n.haloOpacity=g[3];var m=p.getWidth();if(m!==undefined){n.haloRadius=m/2}}var _=e.getFill();if(_!==null){var y=_.getColor();i["a"].assert(typeof y==="string"||Array.isArray(y));var b=h["a"](y);i["a"].assert(Array.isArray(b),"only supporting fill colors");n.fontColor=r["b"].rgbArrayToHex(b)}if(n.labelAlign!==undefined){n.labelXOffset=e.getOffsetX();n.labelYOffset=-e.getOffsetY()}t.push(n)}};var p=d;var v=n(95);var g=n(7);var m=n(9);var _=n(103);var y=n(31);var b=n(61);var w=n(104);var x=n(114);var S=n(176);var C=n(168);var E=n(367);var O=function t(e,n,i,r){this.url_=e;this.$http_=n;this.gettextCatalog_=i;this.ngeoLayerHelper_=r;this.vectorEncoder=new p;this.printNativeAngle_=true};O.$inject=["url","$http","gettextCatalog","ngeoLayerHelper"];O.prototype.cancel=function(t,e){var n=e!==undefined?e:{};var i=this.url_+"/cancel/"+t;return this.$http_["delete"](i,n)};O.prototype.createSpec=function(t,e,n,i,r,a){var o={dpi:n,rotation:a["rotation"]};this.encodeMap_(t,e,o);var s={map:o};m["a"](s,a);var l=this.gettextCatalog_.currentLanguage;var u={attributes:s,format:r,lang:l,layout:i};return u};O.prototype.encodeMap_=function(t,e,n){var r=this;var a=t.getView();var o=a.getCenter();var s=a.getProjection();var l=a.getResolution();var c=n.rotation||u["h"](a.getRotation());i["a"].assert(o!==undefined);i["a"].assert(s!==undefined);n.center=o;n.projection=s.getCode();n.rotation=c;n.scale=e;n.layers=[];var f=t.getLayerGroup();i["a"].assert(f);this.printNativeAngle_=!(f.get("printNativeAngle")===false);var h=this.ngeoLayerHelper_.getFlatLayers(f);g["l"](h,function(t,e){return t.getZIndex()-e.getZIndex()});h=h.slice().reverse();h.forEach(function(t){if(t.getVisible()){i["a"].assert(l!==undefined);r.encodeLayer(n.layers,t,l)}})};O.prototype.encodeLayer=function(t,e,n){if(e instanceof _["a"]){this.encodeImageLayer_(t,e)}else if(e instanceof y["a"]){this.encodeTileLayer_(t,e)}else if(e instanceof b["a"]){this.encodeVectorLayer(t,e,n)}};O.prototype.encodeVectorLayer=function(t,e,n){this.vectorEncoder.encodeVectorLayer(t,e,n)};O.prototype.encodeImageLayer_=function(t,e){i["a"].assertInstanceof(e,_["a"]);var n=e.getSource();if(n instanceof x["a"]){this.encodeImageWmsLayer_(t,e)}};O.prototype.encodeImageWmsLayer_=function(t,e){var n=e.getSource();i["a"].assertInstanceof(e,_["a"]);i["a"].assertInstanceof(n,x["a"]);var r=n.getUrl();if(r!==undefined){this.encodeWmsLayer_(t,e,r,n.getParams())}};O.prototype.encodeWmsLayer_=function(t,e,n,i){if(n.startsWith("//")){n=window.location.protocol+n}var r=new URL(n);var a={TRANSPARENT:true};if(r.searchParams){r.searchParams.forEach(function(t,e){a[e]=t})}for(var o in i){var s=i[o];if(s!==null&&s!==undefined){a[o]=s}}delete a["LAYERS"];delete a["FORMAT"];delete a["SERVERTYPE"];delete a["VERSION"];var l={baseURL:O.getAbsoluteUrl_(r.origin+r.pathname),imageFormat:"FORMAT"in i?i["FORMAT"]:"image/png",layers:i["LAYERS"].split(","),customParams:a,serverType:i["SERVERTYPE"],type:"wms",opacity:this.getOpacityOrInherited_(e),version:i["VERSION"],useNativeAngle:this.printNativeAngle_};t.push(l)};O.getAbsoluteUrl_=function(t){var e=document.createElement("a");e.href=encodeURI(t);return decodeURI(e.href)};O.prototype.encodeTileLayer_=function(t,e){i["a"].assertInstanceof(e,y["a"]);var n=e.getSource();if(n instanceof C["a"]){this.encodeTileWmtsLayer_(t,e)}else if(n instanceof S["a"]){this.encodeTileWmsLayer_(t,e)}};O.prototype.encodeTileWmtsLayer_=function(t,e){i["a"].assertInstanceof(e,y["a"]);var n=e.getSource();i["a"].assertInstanceof(n,C["a"]);var r=n.getProjection();var a=n.getTileGrid();i["a"].assertInstanceof(a,E["b"]);var o=a.getMatrixIds();var s=[];for(var l=0,u=o.length;l<u;++l){var c=a.getFullTileRange(l);s.push({identifier:o[l],scaleDenominator:a.getResolution(l)*r.getMetersPerUnit()/28e-5,tileSize:w["d"](a.getTileSize(l)),topLeftCorner:a.getOrigin(l),matrixSize:[c.maxX-c.minX,c.maxY-c.minY]})}var f=n.getDimensions();var h=Object.keys(f);var d={baseURL:this.getWmtsUrl_(n),dimensions:h,dimensionParams:f,imageFormat:n.getFormat(),layer:n.getLayer(),matrices:s,matrixSet:n.getMatrixSet(),opacity:this.getOpacityOrInherited_(e),requestEncoding:n.getRequestEncoding(),style:n.getStyle(),type:"WMTS",version:n.getVersion()};t.push(d)};O.prototype.encodeTileWmsLayer_=function(t,e){var n=e.getSource();i["a"].assertInstanceof(e,y["a"]);i["a"].assertInstanceof(n,S["a"]);this.encodeWmsLayer_(t,e,n.getUrls()[0],n.getParams())};O.prototype.getWmtsUrl_=function(t){var e=t.getUrls();i["a"].assert(e.length>0);return O.getAbsoluteUrl_(e[0])};O.prototype.getOpacityOrInherited_=function(t){if(t.get("inheritedOpacity")!==undefined){return t.get("inheritedOpacity")}return t.getOpacity()};O.prototype.createReport=function(t,e){var n=t.format||"pdf";var i=this.url_+"/report."+n;var r={headers:{"Content-Type":"application/json; charset=UTF-8"}};m["a"](r,e!==undefined?e:{});return this.$http_.post(i,t,r)};O.prototype.getStatus=function(t,e){var n=e!==undefined?e:{};var i=this.url_+"/status/"+t+".json";return this.$http_.get(i,n)};O.prototype.getReportUrl=function(t){return this.url_+"/report/"+t};O.prototype.getCapabilities=function(t){var e=t!==undefined?t:{withCredentials:true};var n=this.url_+"/capabilities.json";return this.$http_.get(n,e)};O.createPrintServiceFactory=function(t,e,n){return function(i){return new O(i,t,e,n)}};O.createPrintServiceFactory.$inject=["$http","gettextCatalog","ngeoLayerHelper"];O.module=angular.module("ngeoPrint",[v["a"].module.name]);O.module.service("ngeoPrintService",O);O.module.factory("ngeoCreatePrint",O.createPrintServiceFactory);var T=e["a"]=O},function(t,e,n){"use strict";var i=n(220);var r=n(2);var a=n(159);var o=n(3);var s=n(182);var l=angular.module("gmfRasterComponent",[i["a"].module.name,a["a"].name]);l.run(["$templateCache",function(t){t.put("gmf/raster/widgetComponent",n(483))}]);l.value("gmfElevationwidgetTemplateUrl",function(t){var e=t["gmfElevationwidgetTemplateUrl"];return e!==undefined?e:"gmf/raster/widgetComponent"});u.$inject=["$attrs","gmfElevationwidgetTemplateUrl"];function u(t,e){return e(t)}l.component_=function(){return{restrict:"A",controller:"GmfElevationController as ctrl",bindToController:true,scope:{active:"<gmfElevationActive",elevation:"=gmfElevationElevation",layersconfig:"=gmfElevationLayersconfig",loading:"=?gmfElevationLoading",layer:"<gmfElevationLayer",map:"=gmfElevationMap"},link:function t(e,n,i){var r=e["ctrl"];e.$watch(function(){return r.active},function(t){this.toggleActive_(t)}.bind(r));e.$watch(function(){return r.layer},function(t){this.layer=t;this.elevation=null}.bind(r))}}};l.directive("gmfElevation",l.component_);l.Controller_=function(t,e,n,i,r){this.filter_=e;this.ngeoDebounce_=n;this.gmfRaster_=i;this.gettextCatalog=r;this.layersConfig;this.active;this.elevation;this.layer;this.map;this.listenerKeys_=[];this.scope_=t;this.inViewport_=false;this.loading=false};l.Controller_.$inject=["$scope","$filter","ngeoDebounce","gmfRaster","gettextCatalog"];l.Controller_.prototype.toggleActive_=function(t){var e=this;this.elevation=undefined;if(t){r["a"].assert(this.listenerKeys_.length===0);this.listenerKeys_.push(o["a"](this.map,"pointermove",function(t){var e=this;this.scope_.$apply(function(){e.inViewport_=true;e.elevation=undefined;e.loading=false})},this));this.listenerKeys_.push(o["a"](this.map,"pointermove",this.ngeoDebounce_(this.pointerStop_.bind(this),500,true)));this.listenerKeys_.push(o["a"](this.map.getViewport(),"mouseout",function(){e.scope_.$apply(function(){e.elevation=undefined;e.inViewport_=false;e.loading=false})}))}else{this.elevation=undefined;this.listenerKeys_.forEach(o["e"]);this.listenerKeys_.length=0}};l.Controller_.prototype.pointerStop_=function(t){if(this.inViewport_){this.loading=true;var e={layers:this.layer};this.gmfRaster_.getRaster(t.coordinate,e).then(this.getRasterSuccess_.bind(this),this.getRasterError_.bind(this))}};l.Controller_.prototype.getRasterSuccess_=function(t){r["a"].assert(this.layer,"A layer should be selected");var e=t[this.layer];if(e!==undefined&&e!==null){var n=this.layersconfig[this.layer]||{};var i=n.filter||"number";var a=n.args||[];var o=n.hasOwnProperty("postfix")?n.postfix:"m";var s=o.length>0?n.hasOwnProperty("separator")?n.separator:" ":"";var l=Array.prototype.concat([e],a);this.elevation=this.filter_(i).apply(undefined,l)+s+o}else{var u=this.gettextCatalog;this.elevation=u.getString("No value")}this.loading=false};l.Controller_.prototype.getRasterError_=function(){console.error("Error on getting the raster.");this.elevation=undefined;this.loading=false};l.controller("GmfElevationController",l.Controller_);l.widgetComponent_={controller:"gmfElevationwidgetController as ctrl",bindings:{map:"<gmfElevationwidgetMap",layers:"<gmfElevationwidgetLayers",layersconfig:"=gmfElevationwidgetLayersconfig",active:"<gmfElevationwidgetActive"},templateUrl:u};l.component("gmfElevationwidget",l.widgetComponent_);l.WidgetController_=function(){this.map;this.layers;this.layersconfig;this.active;this.selectedElevationLayer};l.WidgetController_.prototype.$onInit=function(){this.selectedElevationLayer=this.layers[0]};l.controller("gmfElevationwidgetController",l.WidgetController_);l.LayerConfig;var c=l;var f=angular.module("gmfRasterModule",[c.name,i["a"].module.name]);var h=e["a"]=f},function(t,e,n){"use strict";var i=n(223);var r=n(268);var a=n(357);var o=n(284);var s=n(2);var l=n(7);var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function c(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var f=function(){t.$inject=["$rootScope"];function t(e){var n=this;c(this,t);this.rootScope_=e;this.currentDataSourceId_=null;this.currentDataSourceItems_=[];this.localStorageKey_="gmf_savedfilters";this.useLocalStorage_=true;try{if("localStorage"in window){window.localStorage["test"]="";delete window.localStorage["test"]}else{this.useLocalStorage_=false}}catch(t){console.error(t);this.useLocalStorage_=false}this.items_=[];this.rootScope_.$watchCollection(function(){return n.items},function(){n.rePopulateCurrentDataSourceItems_()});if(this.useLocalStorage_){this.loadItemsFromLocalStorage_()}}t.prototype.loadItemsFromLocalStorage_=function t(){if(window.localStorage[this.localStorageKey_]){var e=JSON.parse(window.localStorage[this.localStorageKey_]);s["a"].assertArray(e);this.items_=e}};t.prototype.indexOfItem=function t(e,n){var i=void 0;var r=-1;for(var a=0,o=this.items_.length;a<o;a++){i=this.items[a];if(i.dataSourceId===n&&i.name===e){r=a;break}}return r};t.prototype.save=function t(e){var n=this.indexOfItem(e.name,e.dataSourceId);if(n!==-1){this.items[n]=e}else{this.items.push(e)}if(this.useLocalStorage_){this.saveItemsInLocalStorage_()}};t.prototype.remove=function t(e){var n=l["j"](this.items,e);if(n&&this.useLocalStorage_){this.saveItemsInLocalStorage_()}};t.prototype.saveItemsInLocalStorage_=function t(){window.localStorage[this.localStorageKey_]=JSON.stringify(this.items)};t.prototype.rePopulateCurrentDataSourceItems_=function t(){this.currentDataSourceItems_.length=0;if(this.currentDataSourceId_!==null){for(var e=this.items,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{i=e.next();if(i.done)break;r=i.value}var a=r;if(a.dataSourceId===this.currentDataSourceId_){this.currentDataSourceItems_.push(a)}}}};u(t,[{key:"currentDataSourceItems",get:function t(){return this.currentDataSourceItems_}},{key:"currentDataSourceId",set:function t(e){this.currentDataSourceId_=e;this.rePopulateCurrentDataSourceItems_()}},{key:"items",get:function t(){return this.items_}}]);return t}();f.module=angular.module("gmfSavedFilters",[]);f.module.service("gmfSavedFilters",f);f.Item=function(){};f.Item.prototype.condition;f.Item.prototype.customRules;f.Item.prototype.dataSourceId;f.Item.prototype.directedRules;f.Item.prototype.name;var h=f;var d=n(221);var p=n(222);var v=n(87);var g=n(158);var m=n(340);var _=n(3);var y=n(109);var b=n(182);function w(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var x=angular.module("gmfFilterselector",[i["a"].module.name,r["a"].module.name,a["a"].module.name,y["a"].module.name,p["a"].module.name,d["a"].name,g["a"].module.name,m["a"].name,h.module.name]);x.run(["$templateCache",function(t){t.put("gmf/filters/filterselectorcomponent",n(505))}]);x.value("gmfFilterselectorTemplateUrl",function(t){var e=t["gmfFilterselectorTemplateUrl"];return e!==undefined?e:"gmf/filters/filterselectorcomponent"});S.$inject=["$attrs","gmfFilterselectorTemplateUrl"];function S(t,e){return e(t)}x.Controller_=function(){t.$inject=["$scope","$timeout","gettextCatalog","gmfDataSourceBeingFiltered","gmfDataSourcesHelper","gmfSavedFilters","gmfUser","ngeoNotification","ngeoFeatureOverlayMgr","ngeoRuleHelper"];function t(e,n,i,r,a,o,l,u,c,f){var h=this;w(this,t);this.active;e.$watch(function(){return h.active},this.handleActiveChange_.bind(this));this.map;this.toolGroup;this.timeout_=n;this.gettextCatalog_=i;this.gmfDataSourceBeingFiltered=r;e.$watch(function(){return h.gmfDataSourceBeingFiltered.dataSource},this.handleSelectedDataSourceChange_.bind(this));this.gmfDataSourcesHelper_=a;this.gmfSavedFilters=o;e.$watchCollection(function(){return h.gmfSavedFilters.currentDataSourceItems},function(){if(h.gmfSavedFilters.currentDataSourceItems.length===0&&h.saveFilterManageModalShown){h.saveFilterManageModalShown=false}});this.gmfUser_=l;e.$watch(function(){return h.gmfUser_.functionalities},this.handleGmfUserFunctionalitiesChange_.bind(this));this.ngeoNotification_=u;this.featureOverlay=s["a"].assert(c.getFeatureOverlay());this.ngeoRuleHelper_=f;this.aRuleIsActive=false;this.customRules=null;this.directedRules=null;this.filtrableDataSources=[];this.filtrableLayerNodeNames_=null;this.gmfDataSources_=a.collection;this.listenerKeys_=[];this.readyDataSource=null;this.ruleCache_={};this.saveFilterSaveModalShown=false;e.$watch(function(){return h.saveFilterSaveModalShown},function(){h.saveFilterName=""});this.saveFilterName="";this.saveFilterManageModalShown=false;this.enableDataSourceRegistration_=false;e.$watch(function(){return h.enableDataSourceRegistration_},this.handleEnableDataSourceRegistrationChange_.bind(this));this.defaultFiltrableDataSourceName_;this.toggleDataSourceRegistration_()}t.prototype.handleGmfUserFunctionalitiesChange_=function t(){var e=this.gmfUser_.functionalities;if(e&&e["filterable_layers"]){this.filtrableLayerNodeNames_=e["filterable_layers"]}else{this.filtrableLayerNodeNames_=null}if(e&&e["preset_layer_filter"]&&e["preset_layer_filter"][0]){this.defaultFiltrableDataSourceName_=e["preset_layer_filter"][0]}else{this.defaultFiltrableDataSourceName_=undefined}this.toggleDataSourceRegistration_()};t.prototype.toggleDataSourceRegistration_=function t(){var e=!!this.filtrableLayerNodeNames_;if(this.enableDataSourceRegistration_!==e){this.enableDataSourceRegistration_=e}};t.prototype.handleActiveChange_=function t(e){var n=this;if(!e){this.aRuleIsActive=false;this.timeout_(function(){n.gmfDataSourceBeingFiltered.dataSource=null})}};t.prototype.handleEnableDataSourceRegistrationChange_=function t(e){var n=this.listenerKeys_;if(e){n.push(_["a"](this.gmfDataSources_,"add",this.handleDataSourcesAdd_,this),_["a"](this.gmfDataSources_,"remove",this.handleDataSourcesRemove_,this));this.gmfDataSources_.forEach(this.registerDataSource_.bind(this))}else{n.forEach(_["e"]);n.length=0;this.filtrableDataSources.length=0}};t.prototype.handleDataSourcesAdd_=function t(e){var n=e.element;if(n instanceof o["a"]){this.registerDataSource_(n)}};t.prototype.handleDataSourcesRemove_=function t(e){var n=e.element;if(n instanceof o["a"]){this.unregisterDataSource_(n)}};t.prototype.registerDataSource_=function t(e){if(e.filtrable===null){e.filtrable=this.isDataSourceFiltrable_(e)}if(e.filtrable){this.filtrableDataSources.push(e);if(this.defaultFiltrableDataSourceName_!==undefined&&e.name===this.defaultFiltrableDataSourceName_){this.gmfDataSourceBeingFiltered.dataSource=e}}};t.prototype.unregisterDataSource_=function t(e){if(e.filtrable){l["j"](this.filtrableDataSources,e);if(this.gmfDataSourceBeingFiltered.dataSource===e){this.gmfDataSourceBeingFiltered.dataSource=null}}};t.prototype.isDataSourceFiltrable_=function t(e,n){var i=true;var r=this.gettextCatalog_;var a=n!==false;var o=s["a"].assert(this.filtrableLayerNodeNames_);var u=[];if(l["f"](o,e.name)){if(!e.supportsWFS){u.push(r.getString("The data source doesn't support WFS, which is required "+"to fetch the attributes to build the filter rules."))}if(!e.ogcLayers||!e.ogcLayers.length){u.push(r.getString("The data source must have only 1 ogcLayer defined."))}else if(!e.ogcLayers[0].queryable){u.push(r.getString("The ogcLayer within the data source must be queryable."))}i=!u.length;if(a&&!i){var c=r.getString("The following data source is marked as being filtrable,\n          but is missing some requirements: ");var f=e.name+" ("+e.id+").";var h=r.getString("Please, contact your administrator about this.\n          Here are the reasons: ");u.unshift(c+" "+f+" "+h);console.warn(u.join(" "));this.ngeoNotification_.notify({msg:u.join(" "),type:v["a"].Type.WARNING})}}else{i=false}return i};t.prototype.handleSelectedDataSourceChange_=function t(e){var n=this;this.aRuleIsActive=false;this.customRules=null;this.directedRules=null;this.readyDataSource=null;this.gmfSavedFilters.currentDataSourceId=null;if(!e){return}if(!this.active){this.active=true}this.gmfDataSourcesHelper_.prepareFiltrableDataSource(e).then(function(t){var e=n.getRuleCacheItem_(t);if(!e){e={customRules:[],directedRules:[]};n.setRuleCacheItem_(t,e);if(t.gmfLayer.metadata&&t.gmfLayer.metadata.directedFilterAttributes&&t.gmfLayer.metadata.directedFilterAttributes.length){var i=t.gmfLayer.metadata.directedFilterAttributes;var r=s["a"].assert(t.attributes);for(var a=r,o=Array.isArray(a),u=0,a=o?a:a[Symbol.iterator]();;){var c;if(o){if(u>=a.length)break;c=a[u++]}else{u=a.next();if(u.done)break;c=u.value}var f=c;if(l["f"](i,f.name)){e.directedRules.push(n.ngeoRuleHelper_.createRuleFromAttribute(f))}}}}n.customRules=e.customRules;n.directedRules=e.directedRules;n.readyDataSource=t;n.gmfSavedFilters.currentDataSourceId=t.id})};t.prototype.getRuleCacheItem_=function t(e){return this.ruleCache_[e.id]||null};t.prototype.setRuleCacheItem_=function t(e,n){this.ruleCache_[e.id]=n};t.prototype.saveFilterShowModal=function t(){this.saveFilterSaveModalShown=true};t.prototype.saveFilterSave=function t(){var e=this.saveFilterName;var n=s["a"].assert(this.readyDataSource);var i=n.id;var r=this.gmfSavedFilters.indexOfItem(e,i)!==-1;var a=n.filterCondition;var o=this.gettextCatalog_.getString("A filter with the same name already exists.\n      Do you want to overwrite it?");if(!r||confirm(o)){var l=this.customRules?this.ngeoRuleHelper_.serializeRules(this.customRules):[];var u=this.directedRules?this.ngeoRuleHelper_.serializeRules(this.directedRules):[];var c={condition:a,customRules:l,dataSourceId:i,directedRules:u,name:e};this.gmfSavedFilters.save(c);this.saveFilterSaveModalShown=false}};t.prototype.saveFilterLoadItem=function t(e){var n=this;var i=s["a"].assert(this.readyDataSource);this.customRules=null;this.directedRules=null;var r=this.ngeoRuleHelper_.createRules(e.customRules);var a=this.ngeoRuleHelper_.createRules(e.directedRules);this.timeout_(function(){n.customRules=r;n.directedRules=a;i.filterCondition=e.condition;var t=s["a"].assert(n.getRuleCacheItem_(i));t.customRules=r;t.directedRules=a})};t.prototype.saveFilterManage=function t(){this.saveFilterManageModalShown=true};t.prototype.saveFilterRemoveItem=function t(e){this.gmfSavedFilters.remove(e)};return t}();x.Controller_.RuleCache;x.Controller_.RuleCacheItem;x.component("gmfFilterselector",{bindings:{active:"=",map:"<",toolGroup:"<"},controller:x.Controller_,templateUrl:S});var C=x;var E=angular.module("gmfFiltersModule",[C.name,h.module.name]);var O=e["a"]=E},function(t,e,n){"use strict";var i=n(2);var r=n(60);var a=n(13);var o=n(79);var s=n(191);var l=n(238);var u=n(1);var c=n(14);var f=n(127);var h=n(29);var d=n(3);var p=n(4);var v=n(165);var g=n(36);var m=n(21);var _=n(32);var y=n(28);var b=n(61);var w=n(57);var x=n(200);var S=function t(e){var n=this;i["a"].assert(e.features);y["b"].call(this,{handleDownEvent:t.handleDownEvent_,handleDragEvent:t.handleDragEvent_,handleEvent:t.handleEvent,handleUpEvent:t.handleUpEvent_});this.vertexFeature_=null;this.lastPixel_=[0,0];this.modified_=false;this.rBush_=new x["a"];this.pixelTolerance_=e.pixelTolerance!==undefined?e.pixelTolerance:10;this.snappedToVertex_=false;this.changingFeature_=false;this.dragSegments_=null;this.overlay_=new b["a"]({source:new w["b"]({useSpatialIndex:false,wrapX:!!e.wrapX}),style:e.style||s["a"].getDefaultModifyStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.features_=e.features;this.features_.forEach(function(t){return n.addFeature_(t)});d["a"](this.features_,"add",this.handleFeatureAdd_,this);d["a"](this.features_,"remove",this.handleFeatureRemove_,this)};u["d"](S,y["b"]);S.prototype.addFeature_=function(t){if(t.getGeometry().getType()==="Polygon"&&!!t.get(a["a"].IS_CIRCLE)){var e=t.getGeometry();this.writeCircleGeometry_(t,e);var n=this.getMap();if(n){this.handlePointerAtPixel_(this.lastPixel_,n)}}};S.prototype.willModifyFeatures_=function(t){if(!this.modified_){this.modified_=true;var e=new o["a"]("modifystart",{features:this.features_});this.dispatchEvent(e)}};S.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t);if(this.vertexFeature_&&this.features_.getLength()===0){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}};S.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_;var n=[];e.forEach(function(e){if(t===e.feature){n.push(e)}});for(var i=n.length-1;i>=0;--i){e.remove(n[i])}};S.prototype.setMap=function(t){this.overlay_.setMap(t);y["b"].prototype.setMap.call(this,t)};S.prototype.handleFeatureAdd_=function(t){var e=t.element;i["a"].assertInstanceof(e,c["a"],"feature should be an ol.Feature");this.addFeature_(e)};S.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)};S.prototype.writeCircleGeometry_=function(t,e){var n=e.getCoordinates();var i=void 0,r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0;for(o=0,s=n.length;o<s;++o){i=n[o];for(r=0,a=i.length-1;r<a;++r){l=i.slice(r,r+2);u={feature:t,geometry:e,depth:[o],index:r,segment:l};this.rBush_.insert(p["b"](l),u)}}};S.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;if(!e){e=new c["a"](new m["a"](t));this.vertexFeature_=e;this.overlay_.getSource().addFeature(e)}else{var n=e.getGeometry();n.setCoordinates(t)}return e};S.compareIndexes_=function(t,e){return t.index-e.index};S.handleDownEvent_=function(t){this.handlePointerAtPixel_(t.pixel,t.map);this.dragSegments_=[];this.modified_=false;var e=this.vertexFeature_;if(e){var n=e.getGeometry();var i=n.getCoordinates();var r=p["b"]([i]);var a=this.rBush_.getInExtent(r);var o={};a.sort(S.compareIndexes_);for(var s=0,l=a.length;s<l;++s){var c=a[s];var f=c.segment;var d=u["c"](c.feature);var v=c.depth;if(v){d+="-"+v.join("-")}if(!o[d]){o[d]=new Array(2)}if(h["e"](f[0],i)&&!o[d][0]){this.dragSegments_.push([c,0]);o[d][0]=c}else if(h["e"](f[1],i)&&!o[d][1]){this.dragSegments_.push([c,1]);o[d][1]=c}}}return!!this.vertexFeature_};S.handleDragEvent_=function(t){this.willModifyFeatures_(t);var e=t.coordinate;var n=this.dragSegments_[0][0].geometry;var i=p["x"](n.getExtent());var r=new g["a"]([i,e]);var o=new v["a"](i,r.getLength());var s=Object(_["b"])(o,64).getCoordinates();this.setGeometryCoordinates_(n,s);var u=l["a"].getAzimut(r);this.features_.getArray()[0].set(a["a"].AZIMUT,u);this.createOrUpdateVertexFeature_(e)};S.handleUpEvent_=function(t){this.rBush_.clear();this.writeCircleGeometry_(this.dragSegments_[0][0].feature,this.dragSegments_[0][0].geometry);if(this.modified_){var e=new o["a"]("modifyend",{features:this.features_});this.dispatchEvent(e);this.modified_=false}return false};S.handleEvent=function(t){if(!(t instanceof f["a"])){return true}var e=void 0;if(!t.map.getView().getInteracting()&&t.type=="pointermove"&&!this.handlingDownUpSequence){this.handlePointerMove_(t)}return y["c"].call(this,t)&&!e};S.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel;this.handlePointerAtPixel_(t.pixel,t.map)};S.prototype.handlePointerAtPixel_=function(t,e){var n=e.getCoordinateFromPixel(t);var i=function t(e,i){return h["i"](n,e.segment)-h["i"](n,i.segment)};var r=e.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]);var a=e.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]);var o=p["b"]([r,a]);var s=this.rBush_;var l=s.getInExtent(o);if(l.length>0){l.sort(i);var c=l[0];var f=c.segment;var d=h["c"](n,f);var v=e.getPixelFromCoordinate(d);if(Math.sqrt(h["h"](t,v))<=this.pixelTolerance_){var g=e.getPixelFromCoordinate(f[0]);var m=e.getPixelFromCoordinate(f[1]);var _=h["h"](v,g);var y=h["h"](v,m);var b=Math.sqrt(Math.min(_,y));this.snappedToVertex_=b<=this.pixelTolerance_;if(this.snappedToVertex_){d=_>y?f[1]:f[0];this.createOrUpdateVertexFeature_(d);var w={};w[u["c"](f)]=true;var x=void 0;for(var S=1,C=l.length;S<C;++S){x=l[S].segment;if(h["e"](f[0],x[0])&&h["e"](f[1],x[1])||h["e"](f[0],x[1])&&h["e"](f[1],x[0])){w[u["c"](x)]=true}else{break}}return}}}if(this.vertexFeature_){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}};S.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=true;t.setCoordinates(e);this.changingFeature_=false};var C=S;var E=function t(e){var n=this;i["a"].assert(e.features);y["b"].call(this,{handleDownEvent:this.handleDown_,handleDragEvent:this.handleDrag_,handleUpEvent:this.handleUp_});this.modified_=false;this.vectorPoints_=new b["a"]({source:new w["b"]({wrapX:!!e.wrapX}),visible:this.getActive(),style:e.style||s["a"].getDefaultModifyStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.features_=e.features;this.feature_=null;this.cache_={};this.params_=null;d["a"](this.features_,"add",this.handleFeatureAdd_,this);d["a"](this.features_,"remove",this.handleFeatureRemove_,this);this.features_.forEach(function(t){n.addFeature_(t)})};u["d"](E,y["b"]);E.prototype.setActive=function(t){y["b"].prototype.setActive.call(this,t);if(this.vectorPoints_){this.vectorPoints_.setVisible(t)}};E.prototype.addFeature_=function(t){var e=t.getGeometry();if(e instanceof _["a"]){var n=u["c"](t);var i=this.cache_[n];if(i){return}var r=this.vectorPoints_.getSource();var a=e.getCoordinates()[0];while(a.length>4){if(a[0][0]<a[1][0]&&a[0][1]<=a[1][1]){a.pop()}else{a.shift()}}var o=[];var s=void 0;var l=void 0;a.forEach(function(e){s=new m["a"](e);l=new c["a"]({corner:true,geometry:s,siblingX:null,siblingY:null,boxFeature:t});o.push(l)},this);i={corners:o};this.cache_[n]=i;var f=void 0;var h=void 0;o.forEach(function(t,e){f=o[e-1];if(!f){f=o[o.length-1]}h=o[e+1];if(!h){h=o[0]}if(e%2===0){t.set("siblingX",h);t.set("siblingY",f)}else{t.set("siblingX",f);t.set("siblingY",h)}},this);r.addFeatures(o)}};E.prototype.willModifyFeatures_=function(t){if(!this.modified_){this.modified_=true;var e=new o["a"]("modifystart",{features:this.features_});this.dispatchEvent(e);this.params_=this.initializeParams_()}};E.prototype.initializeParams_=function(){var t=this.feature_;var e=t.get("siblingX");i["a"].assertInstanceof(e,c["a"]);var n=e.get("siblingY");i["a"].assertInstanceof(n,c["a"]);var r=n.getGeometry();i["a"].assertInstanceof(r,m["a"]);var a=r.getCoordinates();var o=this.getMap().getPixelFromCoordinate(a);var s=n.get("siblingX");i["a"].assertInstanceof(s,c["a"]);var l=s.getGeometry();i["a"].assertInstanceof(l,m["a"]);var u=l.getCoordinates();var f=this.getMap().getPixelFromCoordinate(u);var h=[f[0]-o[0],f[1]-o[1]];var d=Math.sqrt(h[0]*h[0]+h[1]*h[1]);h[0]/=d;h[1]/=d;var p=e.getGeometry();i["a"].assertInstanceof(p,m["a"]);var v=p.getCoordinates();var g=this.getMap().getPixelFromCoordinate(v);var _=[g[0]-o[0],g[1]-o[1]];var y=Math.sqrt(_[0]*_[0]+_[1]*_[1]);_[0]/=y;_[1]/=y;if(isNaN(h[0])&&isNaN(_[0])){h=[0,1];_=[1,0]}else if(isNaN(h[0])){h=[_[1],-_[0]]}else if(isNaN(_[0])){_=[h[1],-h[0]]}return{originCoordinate:a,originPixel:o,siblingXPoint:l,siblingYPoint:p,vectorX:h,vectorY:_}};E.prototype.removeFeature_=function(t){var e=u["c"](t);var n=this.cache_[e];var i=n.corners;for(var r=0;r<i.length;r++){this.vectorPoints_.getSource().removeFeature(i[r])}this.feature_=null;i.length=0;delete this.cache_[e]};E.prototype.setMap=function(t){this.vectorPoints_.setMap(t);y["b"].prototype.setMap.call(this,t)};E.prototype.handleFeatureAdd_=function(t){var e=t.element;i["a"].assertInstanceof(e,c["a"],"feature should be an ol.Feature");this.addFeature_(e)};E.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)};E.prototype.handleDown_=function(t){var e=t.map;var n=e.forEachFeatureAtPixel(t.pixel,function(t){return t.get("siblingX")&&t.get("siblingY")?t:undefined});if(n){this.feature_=n;return true}return false};E.prototype.handleDrag_=function(t){this.willModifyFeatures_(t);var e=this.feature_;var n=e.getGeometry();if(n instanceof m["a"]){n.setCoordinates(t.coordinate);var r=t.pixel;var a=this.params_.originPixel;var o=this.params_.siblingXPoint;var s=this.params_.siblingYPoint;var l=this.params_.vectorX;var u=this.params_.vectorY;var c=this.params_.originCoordinate;var f=this.calculateNewPixel_(a,r,l);var h=this.getMap().getCoordinateFromPixel(f);o.setCoordinates(h);var d=this.calculateNewPixel_(a,r,u);var p=this.getMap().getCoordinateFromPixel(d);s.setCoordinates(p);var v=e.get("boxFeature");var g=v.getGeometry();i["a"].assertInstanceof(g,_["a"]);g.setCoordinates([[t.coordinate,h,c,p,t.coordinate]])}};E.prototype.calculateNewPixel_=function(t,e,n){var i=[e[0]-t[0],e[1]-t[1]];var r=i[0]*n[0]+i[1]*n[1];var a=[n[0]*r,n[1]*r];return[a[0]+t[0],a[1]+t[1]]};E.prototype.handleUp_=function(t){if(this.modified_){var e=new o["a"]("modifyend",{features:this.features_});this.dispatchEvent(e);this.params_=null;this.modified_=false}return false};E.CacheItem;E.ModifyParams;var O=E;var T=n(20);var M=n(34);var I=n(19);var R=n(209);var N=function t(e){i["a"].assert(e.features);this.features_=e.features;this.listenerKeys_=[];this.interactions_=[];this.otherFeatures_=new I["b"];this.interactions_.push(new R["a"]({deleteCondition:r["b"].deleteCondition,features:this.otherFeatures_,pixelTolerance:e.pixelTolerance,style:e.style,wrapX:e.wrapX}));this.circleFeatures_=new I["b"];this.interactions_.push(new C({features:this.circleFeatures_,pixelTolerance:e.pixelTolerance,style:e.style,wrapX:e.wrapX}));this.rectangleFeatures_=new I["b"];this.interactions_.push(new O({features:this.rectangleFeatures_,pixelTolerance:e.pixelTolerance,style:e.style,wrapX:e.wrapX}));M["a"].call(this,{handleEvent:T["b"]})};u["d"](N,M["a"]);N.prototype.setActive=function(t){M["a"].prototype.setActive.call(this,t);this.setState_()};N.prototype.setMap=function(t){var e=this.interactions_;var n=this.getMap();if(n){e.forEach(function(t){n.removeInteraction(t)})}M["a"].prototype.setMap.call(this,t);if(t){e.forEach(function(e){t.addInteraction(e)})}this.setState_()};N.prototype.setState_=function(){var t=this;var e=this.getMap();var n=this.getActive();var i=this.interactions_;var r=this.listenerKeys_;i.forEach(function(t){t.setActive(n&&!!e)});if(n&&e){this.features_.forEach(function(e){return t.addFeature_(e)});r.push(d["a"](this.features_,"add",this.handleFeaturesAdd_,this),d["a"](this.features_,"remove",this.handleFeaturesRemove_,this))}else{r.forEach(d["e"]);r.length=0;this.features_.forEach(function(e){return t.removeFeature_(e)})}};N.prototype.handleFeaturesAdd_=function(t){var e=t.element;i["a"].assertInstanceof(e,c["a"],"feature should be an ol.Feature");this.addFeature_(e)};N.prototype.handleFeaturesRemove_=function(t){var e=t.element;this.removeFeature_(e)};N.prototype.addFeature_=function(t){var e=this.getFeatureCollection_(t);e.push(t)};N.prototype.removeFeature_=function(t){var e=this.getFeatureCollection_(t);e.remove(t)};N.prototype.getFeatureCollection_=function(t){var e=void 0;var n=t.get(a["a"].IS_CIRCLE);var i=t.get(a["a"].IS_RECTANGLE);if(n===true||n==="true"){e=this.circleFeatures_}else if(i===true||i==="true"){e=this.rectangleFeatures_}else{e=this.otherFeatures_}return e};var A=e["a"]=N},function(t,e,n){"use strict";var i=function t(){return{restrict:"A",link:function e(n,i,r){var a=r["ngeoSearch"];var o=n.$eval(a);var s=r["ngeoSearchDatasets"];var l=n.$eval(s);var u=l.slice();u.unshift(o);i.typeahead.apply(i,u);var c=r["ngeoSearchListeners"];var f=n.$eval(c);var h=t.adaptListeners_(f);i.on("typeahead:open",function(){n.$apply(function(){h.open()})});i.on("typeahead:close",function(){n.$apply(function(){h.close()})});i.on("typeahead:cursorchange",function(t,e,i){n.$apply(function(){h.cursorchange(t,e,i)})});i.on("typeahead:select",function(t,e,i){n.$apply(function(){h.select(t,e,i)})});i.on("typeahead:autocomplete",function(t,e,i){n.$apply(function(){h.autocomplete(t,e,i)})});i.on("typeahead:asyncreceive",function(t,e,r){n.$apply(function(){var e=i.data("tt-typeahead")["menu"]["_allDatasetsEmpty"]();h.datasetsempty(t,r,e)})})}}};i.adaptListeners_=function(t){var e=void 0;if(t===undefined){e={open:function t(){},close:function t(){},cursorchange:function t(){},datasetsempty:function t(){},select:function t(){},autocomplete:function t(){}}}else{e={open:t.open!==undefined?t.open:function(){},close:t.close!==undefined?t.close:function(){},cursorchange:t.cursorchange!==undefined?t.cursorchange:function(){},datasetsempty:t.datasetsempty!==undefined?t.datasetsempty:function(){},select:t.select!==undefined?t.select:function(){},autocomplete:t.autocomplete!==undefined?t.autocomplete:function(){}}}return e};i.module=angular.module("ngeoSearchDirective",[]);i.module.directive("ngeoSearch",i);var r=i;var a=n(136);var o=n(9);var s=n(377);var l=function t(e,n,i,r,s,l){var u=new a["a"];var c={remote:{url:e,prepare:function t(e,n){n.url=n.url.replace("%QUERY",e);return n},transform:function t(e){var a=e;if(n!==undefined){a={type:"FeatureCollection",features:a.features.filter(n)}}return u.readFeatures(a,{featureProjection:i,dataProjection:r})}},datumTokenizer:function t(){},queryTokenizer:Bloodhound.tokenizers.whitespace};var f=o["a"]({},s||{});var h=o["a"]({},l||{});if(f.remote){o["a"](h,f.remote);delete f.remote}o["a"](c,f);o["a"](c.remote,h);return new Bloodhound(c)};l.module=angular.module("ngeoSearchCreategeojsonbloodhound",[]);l.module.value("ngeoSearchCreateGeoJSONBloodhound",l);l.Function;var u=l;var c=n(10);var f=n(59);var h=n(21);var d=n(14);var p=function t(e){var n=e||{};var i=c["h"](f["a"]);var r=n.targetProjection;var a=function t(e){var n=/BOX\((.*?) (.*?),(.*?) (.*?)\)/g;var i=n.exec(e);if(i!==null){return[parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]),parseFloat(i[4])]}else{return null}};var s=function t(e){return e.replace(/<\/?[ib]>/g,"")};var l=function t(e){var n=/<b>(.*?)<\/b>/g;var i=n.exec(e);if(i!==null){return i[1]}else{return e}};var u={remote:{url:"https://api3.geo.admin.ch/rest/services/api/SearchServer?type=locations&searchText=%QUERY",prepare:function t(e,i){i.url=i.url.replace("%QUERY",e);if(n.limit!==undefined){i.url+="&limit="+n.limit}if(n.origins!==undefined){i.url+="&origins="+n.origins}return n.prepare!==undefined?n.prepare(e,i):i},transform:function t(e){var n=e.results.map(function(t){var e=t.attrs;var n=new h["a"]([e.y,e.x]);var o=a(e.geom_st_box2d);if(r!==undefined){n.transform(i,r);if(o!==null){o=c["o"](o,i,r)}}e["geometry"]=n;e["bbox"]=o;var u=e.label;e["label_no_html"]=s(u);e["label_simple"]=l(u);var f=new d["a"](e);f.setId(e.featureId);return f});return n}},datumTokenizer:function t(){},queryTokenizer:Bloodhound.tokenizers.whitespace};var p=o["a"]({},n.options||{});var v=o["a"]({},n.remoteOptions||{});if(p.remote){o["a"](v,p.remote);delete p.remote}o["a"](u,p);o["a"](u.remote,v);return new Bloodhound(u)};p.module=angular.module("ngeoCreateLocationSearchBloodhound",[]);p.module.value("ngeoCreateLocationSearchBloodhound",p);p.Function;var v=p;var g=angular.module("ngeoSearchModule",[r.module.name,u.module.name,v.module.name]);var m=e["a"]=g},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var r=angular.module("gmfLidarprofile",[]);r.value("gmfLidarprofileTemplateUrl",function(t,e){var n=e["gmfLidarprofileTemplateUrl"];return n!==undefined?n:"gmf/lidarprofile"});r.run(["$templateCache",function(t){t.put("gmf/lidarprofile",n(493))}]);a.$inject=["$element","$attrs","gmfLidarprofileTemplateUrl"];function a(t,e,n){return n(t,e)}r.component_={controller:"GmfLidarprofileController",bindings:{active:"=gmfLidarprofileActive",line:"=gmfLidarprofileLine"},templateUrl:a};r.component("gmfLidarprofile",r.component_);r.Controller_=function(){t.$inject=["$scope"];function t(e){var n=this;i(this,t);this.line;this.active=false;e.$watch(function(){return n.line},function(t,e){if(e!==t){n.active=!!n.line}})}return t}();r.controller("GmfLidarprofileController",r.Controller_);var o=r;function s(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var l=function(){t.$inject=["$http","pytreeLidarprofileJsonUrl"];function t(e,n){s(this,t);this.$http_=e;this.pytreeLidarprofileJsonUrl=n;this.loaded=false;this.clientConfig={autoWidth:true,margin:{left:40,top:10,right:200,bottom:40},pointAttributes:{},pointSum:0,tolerance:5};this.serverConfig=null}t.prototype.initProfileConfig=function t(){var e=this;return this.$http_.get(this.pytreeLidarprofileJsonUrl+"/profile/config").then(function(t){e.serverConfig={classification_colors:t.data["classification_colors"]||null,debug:!!t.data["debug"],default_attribute:t.data["default_attribute"]||"",default_color:t.data["default_color"]||"",default_point_attribute:t.data["default_point_attribute"]||"",default_point_cloud:t.data["default_point_cloud"]||"",initialLOD:t.data["initialLOD"]||0,max_levels:t.data["max_levels"]||null,max_point_number:t.data["max_point_number"]||5e4,minLOD:t.data["minLOD"]||0,point_attributes:t.data["point_attributes"]||null,point_size:t.data["point_size"]||0,width:t.data["width"]||0};var n=[];for(var i in e.serverConfig.point_attributes){if(e.serverConfig.point_attributes[i].visible==1){n.push(e.serverConfig.point_attributes[i])}}var r=e.serverConfig.point_attributes[e.serverConfig.default_point_attribute];e.clientConfig.pointAttributes={availableOptions:n,selectedOption:r}})};return t}();l.module=angular.module("gmfLidarprofileConfig",[]);l.module.service("gmfLidarprofileConfig",l);var u=l;var c=n(22);function f(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var h={mouse:c["mouse"],select:c["select"]};var d=function(){function t(e){f(this,t);this.manager_=e;this.pStart_={};this.pEnd_={}}t.prototype.clearMeasure=function t(){this.pStart_={};this.pEnd_={};var e=h.select("#gmf-lidarprofile-container svg.lidar-svg");e.selectAll("#text_m").remove();e.selectAll("#start_m").remove();e.selectAll("#end_m").remove();e.selectAll("#line_m").remove();e.on("click",null);e.style("cursor","default")};t.prototype.setMeasureActive=function t(){var e=h.select("#gmf-lidarprofile-container svg.lidar-svg");e.style("cursor","pointer");e.on("click",this.measureHeigt.bind(this))};t.prototype.measureHeigt=function t(){var e=h.select("#gmf-lidarprofile-container svg.lidar-svg");var n=h.mouse(e.node());var i=h.mouse(h.select("#gmf-lidarprofile-container .lidar-canvas").node());var r=this.manager_.config.clientConfig.margin;var a=n[0];var o=n[1];var s=2;var l=this.manager_.plot.updateScaleX;var u=this.manager_.plot.updateScaleY;var c=3;var f=this.manager_.utils.getClosestPoint(this.manager_.profilePoints,i[0],i[1],s,this.manager_.plot.updateScaleX,this.manager_.plot.updateScaleY,this.manager_.config.serverConfig.classification_colors);if(!this.pStart_.set){if(f!==undefined){this.pStart_.distance=f.distance;this.pStart_.altitude=f.altitude;this.pStart_.cx=l(f.distance)+r.left;this.pStart_.cy=u(f.altitude)+r.top}else{this.pStart_.distance=l["invert"](a);this.pStart_.altitude=u["invert"](o);this.pStart_.cx=a;this.pStart_.cy=o}this.pStart_.set=true;e.append("circle").attr("id","start_m").attr("cx",this.pStart_.cx).attr("cy",this.pStart_.cy).attr("r",c).style("fill","red")}else if(!this.pEnd_.set){if(f!==undefined){this.pEnd_.distance=f.distance;this.pEnd_.altitude=f.altitude;this.pEnd_.cx=l(f.distance)+r.left;this.pEnd_.cy=u(f.altitude)+r.top}else{this.pEnd_.distance=l["invert"](a);this.pEnd_.altitude=u["invert"](o);this.pEnd_.cx=a;this.pEnd_.cy=o}this.pEnd_.set=true;e.append("circle").attr("id","end_m").attr("cx",this.pEnd_.cx).attr("cy",this.pEnd_.cy).attr("r",c).style("fill","red");e.append("line").attr("id","line_m").attr("x1",this.pStart_.cx).attr("y1",this.pStart_.cy).attr("x2",this.pEnd_.cx).attr("y2",this.pEnd_.cy).attr("stroke-width",2).attr("stroke","red")}if(this.pStart_.set&&this.pEnd_.set){var d=this.pEnd_.altitude-this.pStart_.altitude;var p=this.pEnd_.distance-this.pStart_.distance;var v=Math.round(10*Math.sqrt(Math.pow(d,2)+Math.pow(p,2)))/10;if(!isNaN(v)){e.append("text").attr("id","text_m").attr("x",10+(this.pStart_.cx+this.pEnd_.cx)/2).attr("y",(this.pStart_.cy+this.pEnd_.cy)/2).text(v+" m").attr("font-family","sans-serif").attr("font-size","14px").style("font-weight","bold").attr("fill","red")}this.pEnd_.set=false;this.pStart_.set=false}};return t}();var p=d;var v=n(14);var g=n(21);var m=n(68);var _=n(33);var y=n(12);var b=n(271);var w=n(311);var x=n(280);var S=n(372);var C=n(91);var E=n(281);var O=function(t){return function(){return t}};function T(t,e,n){this.target=t;this.type=e;this.transform=n}function M(t,e,n){this.k=t;this.x=e;this.y=n}M.prototype={constructor:M,scale:function(t){return t===1?this:new M(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new M(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var I=new M(1,0,0);R.prototype=M.prototype;function R(t){return t.__zoom||I}function N(){c["event"].stopImmediatePropagation()}var A=function(){c["event"].preventDefault();c["event"].stopImmediatePropagation()};function L(){return!c["event"].button}function P(){var t=this,e,n;if(t instanceof SVGElement){t=t.ownerSVGElement||t;e=t.width.baseVal.value;n=t.height.baseVal.value}else{e=t.clientWidth;n=t.clientHeight}return[[0,0],[e,n]]}function D(){return this.__zoom||I}function j(){return-c["event"].deltaY*(c["event"].deltaMode?120:1)/500}function k(){return"ontouchstart"in this}function F(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}var $=function(){var t=L,e=P,n=F,i=j,r=k,a=[0,Infinity],o=[[-Infinity,-Infinity],[Infinity,Infinity]],s=250,l=C["interpolateZoom"],u=[],f=Object(x["dispatch"])("start","zoom","end"),h,d,p=500,v=150,g=0;function m(t){t.property("__zoom",D).on("wheel.zoom",G).on("mousedown.zoom",U).on("dblclick.zoom",Y).filter(r).on("touchstart.zoom",V).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",D);if(t!==n){w(t,e)}else{n.interrupt().each(function(){R(this,arguments).start().zoom(null,typeof e==="function"?e.apply(this,arguments):e).end()})}};m.scaleBy=function(t,e){m.scaleTo(t,function(){var t=this.__zoom.k,n=typeof e==="function"?e.apply(this,arguments):e;return t*n})};m.scaleTo=function(t,i){m.transform(t,function(){var t=e.apply(this,arguments),r=this.__zoom,a=b(t),s=r.invert(a),l=typeof i==="function"?i.apply(this,arguments):i;return n(y(_(r,l),a,s),t,o)})};m.translateBy=function(t,i,r){m.transform(t,function(){return n(this.__zoom.translate(typeof i==="function"?i.apply(this,arguments):i,typeof r==="function"?r.apply(this,arguments):r),e.apply(this,arguments),o)})};m.translateTo=function(t,i,r){m.transform(t,function(){var t=e.apply(this,arguments),a=this.__zoom,s=b(t);return n(I.translate(s[0],s[1]).scale(a.k).translate(typeof i==="function"?-i.apply(this,arguments):-i,typeof r==="function"?-r.apply(this,arguments):-r),t,o)})};function _(t,e){e=Math.max(a[0],Math.min(a[1],e));return e===t.k?t:new M(e,t.x,t.y)}function y(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new M(t.k,i,r)}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function w(t,n,i){t.on("start.zoom",function(){R(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).end()}).tween("zoom",function(){var t=this,r=arguments,a=R(t,r),o=e.apply(t,r),s=i||b(o),u=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),c=t.__zoom,f=typeof n==="function"?n.apply(t,r):n,h=l(c.invert(s).concat(u/c.k),f.invert(s).concat(u/f.k));return function(t){if(t===1)t=f;else{var e=h(t),n=u/e[2];t=new M(n,s[0]-e[0]*n,s[1]-e[1]*n)}a.zoom(null,t)}})}function R(t,e){for(var n=0,i=u.length,r;n<i;++n){if((r=u[n]).that===t){return r}}return new $(t,e)}function $(t,n){this.that=t;this.args=n;this.index=-1;this.active=0;this.extent=e.apply(t,n)}$.prototype={start:function(){if(++this.active===1){this.index=u.push(this)-1;this.emit("start")}return this},zoom:function(t,e){if(this.mouse&&t!=="mouse")this.mouse[1]=e.invert(this.mouse[0]);if(this.touch0&&t!=="touch")this.touch0[1]=e.invert(this.touch0[0]);if(this.touch1&&t!=="touch")this.touch1[1]=e.invert(this.touch1[0]);this.that.__zoom=e;this.emit("zoom");return this},end:function(){if(--this.active===0){u.splice(this.index,1);this.index=-1;this.emit("end")}return this},emit:function(t){Object(c["customEvent"])(new T(m,t,this.that.__zoom),f.apply,f,[t,this.that,this.args])}};function G(){if(!t.apply(this,arguments))return;var e=R(this,arguments),r=this.__zoom,s=Math.max(a[0],Math.min(a[1],r.k*Math.pow(2,i.apply(this,arguments)))),l=Object(c["mouse"])(this);if(e.wheel){if(e.mouse[0][0]!==l[0]||e.mouse[0][1]!==l[1]){e.mouse[1]=r.invert(e.mouse[0]=l)}clearTimeout(e.wheel)}else if(r.k===s)return;else{e.mouse=[l,r.invert(l)];Object(E["a"])(this);e.start()}A();e.wheel=setTimeout(u,v);e.zoom("mouse",n(y(_(r,s),e.mouse[0],e.mouse[1]),e.extent,o));function u(){e.wheel=null;e.end()}}function U(){if(d||!t.apply(this,arguments))return;var e=R(this,arguments),i=Object(c["select"])(c["event"].view).on("mousemove.zoom",l,true).on("mouseup.zoom",u,true),r=Object(c["mouse"])(this),a=c["event"].clientX,s=c["event"].clientY;Object(S["dragDisable"])(c["event"].view);N();e.mouse=[r,this.__zoom.invert(r)];Object(E["a"])(this);e.start();function l(){A();if(!e.moved){var t=c["event"].clientX-a,i=c["event"].clientY-s;e.moved=t*t+i*i>g}e.zoom("mouse",n(y(e.that.__zoom,e.mouse[0]=Object(c["mouse"])(e.that),e.mouse[1]),e.extent,o))}function u(){i.on("mousemove.zoom mouseup.zoom",null);Object(S["dragEnable"])(c["event"].view,e.moved);A();e.end()}}function Y(){if(!t.apply(this,arguments))return;var i=this.__zoom,r=Object(c["mouse"])(this),a=i.invert(r),l=i.k*(c["event"].shiftKey?.5:2),u=n(y(_(i,l),r,a),e.apply(this,arguments),o);A();if(s>0)Object(c["select"])(this).transition().duration(s).call(w,u,r);else Object(c["select"])(this).call(m.transform,u)}function V(){if(!t.apply(this,arguments))return;var e=R(this,arguments),n=c["event"].changedTouches,i,r=n.length,a,o,s;N();for(a=0;a<r;++a){o=n[a],s=Object(c["touch"])(this,n,o.identifier);s=[s,this.__zoom.invert(s),o.identifier];if(!e.touch0)e.touch0=s,i=true;else if(!e.touch1)e.touch1=s}if(h){h=clearTimeout(h);if(!e.touch1){e.end();s=Object(c["select"])(this).on("dblclick.zoom");if(s)s.apply(this,arguments);return}}if(i){h=setTimeout(function(){h=null},p);Object(E["a"])(this);e.start()}}function H(){var t=R(this,arguments),e=c["event"].changedTouches,i=e.length,r,a,s,l;A();if(h)h=clearTimeout(h);for(r=0;r<i;++r){a=e[r],s=Object(c["touch"])(this,e,a.identifier);if(t.touch0&&t.touch0[2]===a.identifier)t.touch0[0]=s;else if(t.touch1&&t.touch1[2]===a.identifier)t.touch1[0]=s}a=t.that.__zoom;if(t.touch1){var u=t.touch0[0],f=t.touch0[1],d=t.touch1[0],p=t.touch1[1],v=(v=d[0]-u[0])*v+(v=d[1]-u[1])*v,g=(g=p[0]-f[0])*g+(g=p[1]-f[1])*g;a=_(a,Math.sqrt(v/g));s=[(u[0]+d[0])/2,(u[1]+d[1])/2];l=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else if(t.touch0)s=t.touch0[0],l=t.touch0[1];else return;t.zoom("touch",n(y(a,s,l),t.extent,o))}function z(){var t=R(this,arguments),e=c["event"].changedTouches,n=e.length,i,r;N();if(d)clearTimeout(d);d=setTimeout(function(){d=null},p);for(i=0;i<n;++i){r=e[i];if(t.touch0&&t.touch0[2]===r.identifier)delete t.touch0;else if(t.touch1&&t.touch1[2]===r.identifier)delete t.touch1}if(t.touch1&&!t.touch0)t.touch0=t.touch1,delete t.touch1;if(t.touch0)t.touch0[1]=this.__zoom.invert(t.touch0[0]);else t.end()}m.wheelDelta=function(t){return arguments.length?(i=typeof t==="function"?t:O(+t),m):i};m.filter=function(e){return arguments.length?(t=typeof e==="function"?e:O(!!e),m):t};m.touchable=function(t){return arguments.length?(r=typeof t==="function"?t:O(!!t),m):r};m.extent=function(t){return arguments.length?(e=typeof t==="function"?t:O([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):e};m.scaleExtent=function(t){return arguments.length?(a[0]=+t[0],a[1]=+t[1],m):[a[0],a[1]]};m.translateExtent=function(t){return arguments.length?(o[0][0]=+t[0][0],o[1][0]=+t[1][0],o[0][1]=+t[0][1],o[1][1]=+t[1][1],m):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]};m.constrain=function(t){return arguments.length?(n=t,m):n};m.duration=function(t){return arguments.length?(s=+t,m):s};m.interpolate=function(t){return arguments.length?(l=t,m):l};m.on=function(){var t=f.on.apply(f,arguments);return t===f?m:t};m.clickDistance=function(t){return arguments.length?(g=(t=+t)*t,m):Math.sqrt(g)};return m};var G=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function U(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var Y={axisBottom:b["a"],axisLeft:b["b"],mouse:c["mouse"],scaleLinear:w["a"],select:c["select"],zoom:$};var V=function(){function t(e){U(this,t);this.manager_=e;this.scaleX;this.updateScaleX;this.scaleY;this.updateScaleY;this.material;this.width_;this.height_;this.previousDomainX=[];this.moved_=false}t.prototype.drawPoints=function t(e){var n=-1;var i=e.distance.length;var r=void 0,a=void 0;var o=Y.select("#gmf-lidarprofile-container .lidar-canvas").node().getContext("2d");var s=this.manager_.config.serverConfig;while(++n<i){var l=e.distance[n];var u=e.altitude[n];var c=e.color_packed[n];var f=e.intensity[n];var h=e.classification[n];if(s.classification_colors[h]&&s.classification_colors[h].visible){r=this.updateScaleX(l);a=this.updateScaleY(u);o.beginPath();o.moveTo(r,a);if(this.material=="COLOR_PACKED"){o.fillStyle="RGB("+c[0]+", "+c[1]+", "+c[2]+")"}else if(this.material=="INTENSITY"){o.fillStyle="RGB("+f+", "+f+", "+f+")"}else if(this.material=="CLASSIFICATION"){o.fillStyle="RGB("+s.classification_colors[h].color+")"}else{o.fillStyle=s.default_color}o.arc(r,a,s.point_size,0,2*Math.PI,false);o.fill()}}};t.prototype.setupPlot=function t(e,n){var i=this;var r=Y.select("#gmf-lidarprofile-container .lidar-canvas");var a=r.node();var o=a.getContext("2d");o.clearRect(0,0,a.getBoundingClientRect().width,a.getBoundingClientRect().height);var s=this.manager_.config.clientConfig.margin;var l=Y.select("#gmf-lidarprofile-container").node();var u=l.getBoundingClientRect().width;var c=l.getBoundingClientRect().height;this.width_=u-(s.left+s.right);this.height_=c-(s.top+s.bottom);this.material=this.manager_.config.serverConfig.default_attribute;r.attr("height",this.height_).attr("width",this.width_).style("background-color","black").style("z-index",0).style("position","absolute").style("margin-left",s.left.toString()+"px").style("margin-top",s.top.toString()+"px");var f=e[1]-e[0];var h=n[1]-n[0];var d=f/h;var p=this.width_;var v=this.height_;var g=p/v;var m=void 0;if(d<g){var _=g/d;var y=f*_;this.scaleX=Y.scaleLinear();this.scaleX["domain"]([0,y]);this.scaleX["range"]([0,this.width_]);this.scaleY=Y.scaleLinear();this.scaleY["domain"](n);this.scaleY["range"]([this.height_,0])}else{m=d/g;var b=h*m;var w=(n[1]+n[0])/2;this.scaleX=Y.scaleLinear();this.scaleX["domain"](e);this.scaleX["range"]([0,this.width_]);this.scaleY=Y.scaleLinear();this.scaleY["domain"]([w-b/2,w+b/2]);this.scaleY["range"]([this.height_,0])}var x=Y.zoom().scaleExtent([-10,100]).translateExtent([[0,0],[this.width_,this.height_]]).extent([[0,0],[this.width_,this.height_]]).on("zoom",this.zoomed.bind(this));x.on("end",this.zoomEnd.bind(this));this.previousDomainX=this.scaleX["domain"]();this.updateScaleX=this.scaleX;this.updateScaleY=this.scaleY;var S=Y.select("#gmf-lidarprofile-container svg.lidar-svg");S.call(x).on("dblclick.zoom",null);S.selectAll("*").remove();S.attr("width",this.width_+s.left).attr("height",this.height_+s.top+s.bottom);S.on("mousemove",function(){i.pointHighlight.bind(i)()});var C=Y.axisBottom(this.scaleX);var E=Y.axisLeft(this.scaleY).tickSize(-this.width_);S.select(".y.axis").selectAll("g.tick line").style("stroke","#b7cff7");S.append("g").attr("class","y axis").call(E);S.append("g").attr("class","x axis").call(C);S.select(".y.axis").attr("transform","translate("+s.left+", "+s.top+")");S.select(".x.axis").attr("transform","translate("+s.left+", "+(this.height_+s.top)+")");S.select(".y.axis").selectAll("g.tick line").style("opacity","0.5").style("stroke","#b7cff7")};t.prototype.zoomEnd=function t(){if(c["event"].sourceEvent&&this.moved_===false){return}this.moved_=false;var e=Y.select("#gmf-lidarprofile-container .lidar-canvas").node().getContext("2d");e.clearRect(0,0,this.width_,this.height_);this.manager_.updateData()};t.prototype.zoomed=function t(){if(c["event"].sourceEvent&&c["event"].sourceEvent.type==="mousemove"){this.moved_=true;if(c["event"].sourceEvent.movementX==0&&c["event"].sourceEvent.movementY==0){return}}this.manager_.measure.clearMeasure();var e=c["event"].transform;var n=Y.select("#gmf-lidarprofile-container svg.lidar-svg");var i=Y.axisBottom(this.scaleX);var r=Y.axisLeft(this.scaleY).tickSize(-this.width_);var a=e.rescaleX(this.scaleX);var o=e.rescaleY(this.scaleY);n.select(".x.axis").call(i.scale(a));n.select(".y.axis").call(r.scale(o));var s=Y.select("#gmf-lidarprofile-container .lidar-canvas").node().getContext("2d");s.clearRect(0,0,this.width_,this.height_);n.select(".y.axis").selectAll("g.tick line").style("opacity","0.5").style("stroke","#b7cff7");this.updateScaleX=a;this.updateScaleY=o};t.prototype.pointHighlight=function t(){var e=Y.select("#gmf-lidarprofile-container svg.lidar-svg");var n=Y.select("#gmf-lidarprofile-container .lidar-info");var i=this.manager_.config.serverConfig.point_size;var r=this.manager_.config.clientConfig.margin;var a=this.manager_.config.clientConfig.tolerance||0;var o=Y.mouse(Y.select("#gmf-lidarprofile-container .lidar-canvas").node());var s=this.manager_.config.serverConfig.classification_colors;var l=void 0,u=void 0;var c=this.manager_.utils.getClosestPoint(this.manager_.profilePoints,o[0],o[1],a,this.updateScaleX,this.updateScaleY,s);if(c!=undefined){l=this.updateScaleX(c.distance)+r.left;u=this.updateScaleY(c.altitude)+r.top;e.selectAll("#highlightCircle").remove();e.append("circle").attr("id","highlightCircle").attr("cx",l).attr("cy",u).attr("r",i+1).style("fill","orange");var f=c.classification||-1;var h=s[f]||{};var d=this.getInfoHTML(c,h,1);n.html(d);this.manager_.cartoHighlight.setElement(null);var p=document.createElement("div");p.className+="tooltip gmf-tooltip-measure";p.innerHTML=d;this.manager_.cartoHighlight.setElement(p);this.manager_.cartoHighlight.setPosition([c.coords[0],c.coords[1]]);this.manager_.lidarPointHighlight.getSource().clear();var b=new g["a"]([c.coords[0],c.coords[1]]);var w=new v["a"](b);if(G(h.color)!==undefined){w.setStyle(new y["c"]({image:new m["a"]({fill:new _["a"]({color:"rgba("+h.color+", 1)"}),radius:3})}))}this.manager_.lidarPointHighlight.getSource().addFeature(w)}else{this.manager_.lidarPointHighlight.getSource().clear();e.select("#highlightCircle").remove();n.html("");this.manager_.cartoHighlight.setPosition(undefined)}};t.prototype.getInfoHTML=function t(e,n,i){var r=this.manager_.gettextCatalog;var a=[];var o=this.manager_.$filter("number");var s=e.distance;var l=e.altitude;var u=r.getString(n.name);var c=e.intensity;if(s!==undefined){var f=r.getString("Distance: ");a.push(""+(f+o(s,i)))}if(l!==undefined){var h=r.getString("Altitude: ");a.push(""+(h+o(l,i)))}if(u.length>0){var d=r.getString("Classification: ");a.push(""+(d+u))}if(c!==undefined){var p=r.getString("Intensity: ");a.push(""+(p+o(c,0)))}return a.join("</br>")};t.prototype.changeStyle=function t(e){this.material=e;var n=Y.select("#gmf-lidarprofile-container .lidar-canvas").node();var i=n.getContext("2d");i.clearRect(0,0,n.width,n.height);this.drawPoints(this.manager_.profilePoints)};t.prototype.setClassActive=function t(e,n){this.manager_.config.serverConfig.classification_colors=e;this.changeStyle(n)};return t}();var H=V;var z=n(36);var B=n(124);var W=n(35);var q=n(354);function X(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var K={select:c["select"]};var Z=function(){function t(){X(this,t)}t.prototype.clipLineByMeasure=function t(e,n,i,r,a){var o=new z["a"]([]);var s=0;var l=0;var u=i.getLength();var c=r/u;var f=a/u;var h=i.getCoordinates().length-1;var d=0;i.forEachSegment(function(t,e){d+=1;var n=new z["a"]([t,e]);l+=n.getLength();if(r==s){o.appendCoordinate(t)}else if(r>s&&r<l){o.appendCoordinate(i.getCoordinateAt(c))}if(s>r&&s<a){o.appendCoordinate(t)}if(a==l){o.appendCoordinate(e)}else if(a>s&&a<l){o.appendCoordinate(i.getCoordinateAt(f))}else if(a>s&&a>l&&d===h){o.appendCoordinate(i.getCoordinateAt(f))}s+=n.getLength()});var p=new v["a"]({geometry:o});var m=new y["c"]({stroke:new W["a"]({color:"rgba(255,0,0,1)",width:2,lineCap:"square"})});var b=0;var w=0;h=o.getCoordinates().length-1;var x=1;o.forEachSegment(function(t,e){if(x==1){var n=e[0]-t[0];var i=e[1]-t[1];b=Math.atan2(n,i)}if(x==h){var r=e[0]-t[0];var a=e[1]-t[1];w=Math.atan2(r,a)}x+=1});var S=[m];var C=o.getLastCoordinate();var E=o.getFirstCoordinate();S.push(new y["c"]({geometry:new g["a"](E),image:new B["a"]({fill:new _["a"]({color:"rgba(255, 0, 0, 1)"}),stroke:new W["a"]({color:"rgba(255,0,0,1)",width:1,lineCap:"square"}),points:3,radius:5,rotation:b,angle:Math.PI/3})}),new y["c"]({geometry:new g["a"](C),image:new B["a"]({fill:new _["a"]({color:"rgba(255, 0, 0, 1)"}),stroke:new W["a"]({color:"rgba(255,0,0,1)",width:1,lineCap:"square"}),points:3,radius:5,rotation:w,angle:4*Math.PI/3})}));return{clippedLine:o.getCoordinates(),distanceOffset:r,bufferGeom:p,bufferStyle:S}};t.prototype.getNiceLOD=function t(e,n){var i=0;var r=0;for(var a in n){var o=parseInt(a,10);if(e<o&&n[o].max>i){i=n[o].max;r=n[o].width}}return{maxLOD:i,width:r}};t.prototype.downloadProfileAsImageFile=function t(e){var n=K.select("#gmf-lidarprofile-container svg.lidar-svg");var i=parseInt(n.attr("width"),10);var r=parseInt(n.attr("height"),10);var a=e.margin;var o=document.createElement("canvas");o.style.display="none";o.width=i;o.height=r;var s=o.getContext("2d");s.fillStyle="white";s.fillRect(0,0,i,r);var l=K.select("#gmf-lidarprofile-container .lidar-canvas").node();s.drawImage(l,a.left,a.top,i-(a.left+a.right),r-(a.top+a.bottom));var u=new Image;var c=new XMLSerializer;var f=c.serializeToString(n.node());var h="lidare_profile_for_export_uid";u.id=h;u.src="data:image/svg+xml;base64, "+btoa(f);u.style.setProperty("display","none");var d=document.getElementsByTagName("body")[0];u.onload=function(){s.drawImage(u,0,0,i,r);d.removeChild(document.getElementById(h));o.toBlob(function(t){Object(q["saveAs"])(t,"LIDAR_profile.png")})};d.appendChild(u)};t.prototype.getFlatPointsByDistance=function t(e){var n=[];for(var i=0;i<e.distance.length;i++){var r={distance:e.distance[i],altitude:e.altitude[i],color_packed:e.color_packed[i],intensity:e.intensity[i],classification:e.classification[i],coords:e.coords[i]};n.push(r)}n.sort(function(t,e){return t.distance-e.distance});return n};t.prototype.getCSVData=function t(e){return e.map(function(t){var e={};for(var n in t){var i=t[n];if(n=="altitude"){e[n]=i.toFixed(4)}else if(n=="color_packed"||n=="coords"){e[n]=i.join(" ")}else{e[n]=i}}return e})};t.prototype.arrayMax=function t(e){return e.reduce(function(t,e){return Math.max(t,e)})};t.prototype.arrayMin=function t(e){var n=Infinity;for(var i=0;i<e.length;i++){if(e[i]<n){n=e[i]}}return n};t.prototype.getPytreeLinestring=function t(e){var n=e.getCoordinates();var i="";for(var r=0;r<n.length;r++){var a=n[r][0];var o=n[r][1];i+="{"+Math.round(100*a)/100+", "+Math.round(100*o)/100+"},"}return i.substr(0,i.length-1)};t.prototype.getClosestPoint=function t(e,n,i,r,a,o,s){var l=e;var u=r;var c=[];var f=[];for(var h=0;h<l.distance.length;h++){if(a(l.distance[h])<n+u&&a(l.distance[h])>n-u&&o(l.altitude[h])<i+u&&o(l.altitude[h])>i-u){var d=Math.sqrt(Math.pow(a(l.distance[h])-n,2)+Math.pow(o(l.altitude[h])-i,2));var p=s[l.classification[h]];if(p&&p.visible==1){f.push({distance:l.distance[h],altitude:l.altitude[h],classification:l.classification[h],color_packed:l.color_packed[h],intensity:l.intensity[h],coords:l.coords[h]});c.push(d)}}}var v=void 0;if(f.length>0){var g=Math.min(c);var m=c.indexOf(g);if(m!=-1){v=f[m]}else{v=f[0]}}return v};return t}();var Q=Z;var J=n(159);var tt=n(61);var et=n(115);var nt=n(57);function it(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var rt={select:c["select"]};var at=function(){t.$inject=["$http","$filter","gettextCatalog","ngeoDebounce"];function t(e,n,i,r){it(this,t);this.$http=e;this.$filter=n;this.gettextCatalog=i;this.ngeoDebounce_=r;this.promise=null;this.plot=null;this.measure=null;this.config=null;this.map_=null;this.cartoHighlight=new et["a"]({offset:[0,-15],positioning:"bottom-center"});this.lidarPointHighlight=new tt["a"]({source:new nt["b"]({}),style:new y["c"]({image:new m["a"]({fill:new _["a"]({color:"rgba(0, 0, 255, 1)"}),radius:3})})});this.lidarBuffer=new tt["a"]({source:new nt["b"]({})});this.profilePoints=this.getEmptyProfilePoints_();this.isPlotSetup_=false;this.line_;this.utils=new Q}t.prototype.init=function t(e,n){this.config=e;this.plot=new H(this);this.measure=new p(this);this.setMap(n)};t.prototype.clearBuffer=function t(){if(this.lidarBuffer){this.lidarBuffer.getSource().clear()}};t.prototype.setLine=function t(e){this.line_=e};t.prototype.setMap=function t(e){this.map_=e;this.cartoHighlight.setMap(e);this.lidarPointHighlight.setMap(e);this.lidarBuffer.setMap(e)};t.prototype.getEmptyProfilePoints_=function t(){return{distance:[],altitude:[],color_packed:[],intensity:[],classification:[],coords:[]}};t.prototype.getProfileByLOD=function t(e,n,i,r){var a=this.gettextCatalog;this.profilePoints=this.getEmptyProfilePoints_();if(i){this.isPlotSetup_=false}rt.select("#gmf-lidarprofile-container .lidar-error").style("visibility","hidden");var o=this.utils.getPytreeLinestring(this.line_);var s=void 0;var l=this.config.serverConfig.max_levels;if(n==0){s=this.utils.getNiceLOD(this.line_.getLength(),l)}else{var u=this.plot.updateScaleX["domain"]();o="";for(var c=0;c<e.length;c++){o+="{"+e[c][0]+","+e[c][1]+"},"}o=o.substr(0,o.length-1);s=this.utils.getNiceLOD(u[1]-u[0],l)}var f=false;rt.select("#gmf-lidarprofile-container .lod-info").html("");this.config.clientConfig.pointSum=0;var h=0;if(this.config.clientConfig.autoWidth){h=s.width}else{h=this.config.serverConfig.width}var d=a.getString("Profile width: ");rt.select("#gmf-lidarprofile-container .width-info").html(d+" "+h+"m");for(var p=0;p<s.maxLOD;p++){if(p==0){this.queryPytree_(r,this.config.serverConfig.initialLOD,p,o,n,f,h,i);p+=this.config.serverConfig.initialLOD-1}else if(p<s.maxLOD-1){this.queryPytree_(r+p,r+p+1,p,o,n,f,h,false)}else{f=true;this.queryPytree_(r+p,r+p+1,p,o,n,f,h,false)}}};t.prototype.queryPytree_=function t(e,n,i,r,a,o,s,l){var u=this;var c=this.gettextCatalog;var f=rt.select("#gmf-lidarprofile-container .lod-info");if(this.config.serverConfig.debug){var h=f.html();var d=c.getString("Loading LOD: ");h+=d+" "+e+"-"+n+"...<br>";f.html(h)}var p=this.config.serverConfig.default_point_cloud;var v=this.config.pytreeLidarprofileJsonUrl+"profile/get?minLOD="+e+"\n      &maxLOD="+n+"&width="+s+"&coordinates="+r+"&pointCloud="+p+"&attributes=";this.$http.get(v,{headers:{"Content-Type":"text/plain; charset=x-user-defined"},responseType:"arraybuffer"}).then(function(t){if(u.config.serverConfig.debug){var r=f.html();var s=c.getString("LOD: ");var h=c.getString("loaded");r+=s+" "+e+"-"+n+" "+h+"<br>";f.html(r)}u.processBuffer_(t.data,i,a,o,l)},function(t){console.error(t)})};t.prototype.processBuffer_=function t(e,n,i,r,a){var o=rt.select("#gmf-lidarprofile-container .lidar-error");var s=new Int32Array(e,0,4);var l=s[0];var u=new Uint8Array(e,4,l);var c="";for(var f=0;f<u.length;f++){c+=String.fromCharCode(u[f])}try{JSON.parse(c)}catch(t){if(!this.isPlotSetup_){var h=rt.select("#gmf-lidarprofile-container .lidar-canvas");var d=h.node();var p=d.getContext("2d");p.clearRect(0,0,d.getBoundingClientRect().width,d.getBoundingClientRect().height);h.selectAll("*").remove();var v=this.getHTMLError_();o.style("visibility","visible");o.html(v)}return}o.style("visibility","hidden");var g=JSON.parse(c);this.config.clientConfig.pointSum+=g["points"];if(this.config.clientConfig.pointSum>this.config.serverConfig.max_point_number){console.warn("Number of points is higher than Pytree configuration max value !")}var m=g["pointAttributes"];var _=[];for(var y=0;y<m.length;y++){if(this.config.serverConfig.point_attributes[m[y]]!=undefined){_.push(this.config.serverConfig.point_attributes[m[y]])}}var b=g["scale"];if(g["points"]<3){return}var w=this.getEmptyProfilePoints_();var x=g["bytesPerPoint"];var S=e.slice(4+l);for(var C=0;C<g["points"];C++){var E=x*C;var O=new DataView(S,E,x);var T=0;for(var M=0;M<_.length;M++){if(_[M]["value"]=="POSITION_PROJECTED_PROFILE"){var I=O.getUint32(T,true);var R=I*b;w.distance.push(Math.round(100*(i+R))/100);this.profilePoints.distance.push(Math.round(100*(i+R))/100)}else if(_[M]["value"]=="CLASSIFICATION"){var N=O.getUint8(T);w.classification.push(N);this.profilePoints.classification.push(N)}else if(_[M]["value"]=="INTENSITY"){var A=O.getUint8(T);w.intensity.push(A);this.profilePoints.intensity.push(A)}else if(_[M]["value"]=="COLOR_PACKED"){var L=O.getUint8(T);var P=O.getUint8(T+1);var D=O.getUint8(T+2);w.color_packed.push([L,P,D]);this.profilePoints.color_packed.push([L,P,D])}else if(_[M]["value"]=="POSITION_CARTESIAN"){var j=O.getInt32(T,true)*b+g["boundingBox"]["lx"];var k=O.getInt32(T+4,true)*b+g["boundingBox"]["ly"];var F=O.getInt32(T+8,true)*b+g["boundingBox"]["lz"];w.coords.push([j,k]);w.altitude.push(F);this.profilePoints.altitude.push(F);this.profilePoints.coords.push([j,k])}T=T+_[M]["bytes"]}}var $=[0,this.line_.getLength()];var G=[this.utils.arrayMin(w.altitude),this.utils.arrayMax(w.altitude)];if(n==0&&a||!this.isPlotSetup_){this.plot.setupPlot($,G);this.isPlotSetup_=true}this.plot.drawPoints(w)};t.prototype.getHTMLError_=function t(){var e=this.gettextCatalog;var n=e.getString("Lidar profile service error");var i=e.getString("It might be offline");var r=e.getString("Or did you attempt to draw a profile outside data extent?");var a=e.getString("Or did you attempt to draw such a small profile that no point was returned?");return'\n      <div class="lidarprofile-error">\n      <p class="bold">'+n+"</p>\n      <p>"+i+"</p>\n      <p>"+r+"</p>\n      <p>"+a+"</p>\n    "};t.prototype.updateData=function t(){this.ngeoDebounce_(this.updateData_.bind(this),200,true)()};t.prototype.updateData_=function t(){var e=this.plot.updateScaleX["domain"]();var n=this.map_?this.map_.getView().getResolution():0;n=n||0;var i=this.utils.clipLineByMeasure(this.config,n,this.line_,e[0],e[1]);this.lidarBuffer.getSource().clear();this.lidarBuffer.getSource().addFeature(i.bufferGeom);this.lidarBuffer.setStyle(i.bufferStyle);var r=e[1]-e[0];var a=this.utils.getNiceLOD(r,this.config.serverConfig.max_levels);var o=.2;if(Math.abs(e[0]-this.plot.previousDomainX[0])<o&&Math.abs(e[1]-this.plot.previousDomainX[1])<o){this.plot.drawPoints(this.profilePoints)}else{if(a.maxLOD<=this.config.serverConfig.initialLOD){this.plot.drawPoints(this.profilePoints)}else{this.getProfileByLOD(i.clippedLine,i.distanceOffset,false,0)}}this.plot.previousDomainX=e};return t}();at.module=angular.module("gmfLidarprofileManager",[J["a"].name]);at.module.service("gmfLidarprofileManager",at);var ot=at;var st=n(330);var lt=n(120);var ut=n(213);var ct=n(63);var ft=n(94);function ht(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var dt=angular.module("gmfLidarprofilePanel",[u.module.name,ot.module.name,st["a"].name,lt["a"].name,ut["a"].module.name,ft["a"].module.name]);dt.value("gmfLidarprofilePanelTemplateUrl",function(t,e){var n=e["gmfLidarprofilePanelTemplateUrl"];return n!==undefined?n:"gmf/lidarprofilePanel"});dt.run(["$templateCache",function(t){t.put("gmf/lidarprofilePanel",n(492))}]);pt.$inject=["$element","$attrs","gmfLidarprofilePanelTemplateUrl"];function pt(t,e,n){return n(t,e)}dt.component_={controller:"gmfLidarprofilePanelController",bindings:{active:"=gmfLidarprofilePanelActive",map:"<gmfLidarprofilePanelMap",line:"=gmfLidarprofilePanelLine"},templateUrl:pt};dt.component("gmfLidarprofilePanel",dt.component_);dt.Controller_=function(){t.$inject=["$scope","gmfLidarprofileManager","gmfLidarprofileConfig","ngeoToolActivateMgr","ngeoCsvDownload"];function t(e,n,i,r,a){var o=this;ht(this,t);this.ready=false;this.profileConfig_=i;this.profile=n;this.active=false;this.map=null;this.line;this.measureActive=false;this.ngeoCsvDownload_=a;this.ngeoToolActivateMgr_=r;this.tool=new ct["a"](this,"active");this.ngeoToolActivateMgr_.registerTool("mapTools",this.tool,false);e.$watch(function(){return o.active},function(t,e){if(e!==t){o.updateEventsListening_(t)}});e.$watch(function(){return o.line},function(t,e){if(e!==t){o.update_()}})}t.prototype.$onInit=function t(){this.profile.init(this.profileConfig_,this.map)};t.prototype.initConfigAndActivateTool_=function t(){var e=this;this.profileConfig_.initProfileConfig().then(function(t){e.ready=true;e.ngeoToolActivateMgr_.activateTool(e.tool)})};t.prototype.updateEventsListening_=function t(e){if(e===true){if(!this.ready){this.initConfigAndActivateTool_()}else{this.ngeoToolActivateMgr_.activateTool(this.tool)}}else{this.clearAll();this.ngeoToolActivateMgr_.deactivateTool(this.tool)}};t.prototype.update_=function t(){this.profile.clearBuffer();if(this.line){this.profile.setLine(this.line);this.profile.getProfileByLOD([],0,true,this.profileConfig_.serverConfig.minLOD)}else{this.clearAll()}};t.prototype.clearAll=function t(){this.line=null;this.profile.setLine(null);this.profile.cartoHighlight.setPosition(undefined);this.clearMeasure();this.resetPlot()};t.prototype.setMeasureActive=function t(){this.measureActive=true;this.profile.measure.clearMeasure();this.profile.measure.setMeasureActive()};t.prototype.clearMeasure=function t(){this.measureActive=false;this.profile.measure.clearMeasure()};t.prototype.resetPlot=function t(){this.profile.clearBuffer();if(this.line){this.profile.getProfileByLOD([],0,true,0)}};t.prototype.getAvailablePointAttributes=function t(){return this.profileConfig_.clientConfig.pointAttributes.availableOptions};t.prototype.getSetSelectedPointAttribute=function t(e){if(e!==undefined){this.profileConfig_.clientConfig.pointAttributes.selectedOption=e;this.profile.plot.changeStyle(e.value)}return this.profileConfig_.clientConfig.pointAttributes.selectedOption};t.prototype.getClassification=function t(){return this.profileConfig_.serverConfig.classification_colors};t.prototype.setClassification=function t(e,n){this.profileConfig_.serverConfig.classification_colors[n].visible=e.visible;if(this.line){this.profile.plot.setClassActive(this.profileConfig_.serverConfig.classification_colors,this.profileConfig_.serverConfig.default_attribute)}};t.prototype.csvExport=function t(){if(this.line){var e=this.profile.utils.getFlatPointsByDistance(this.profile.profilePoints)||{};var n=this.profile.utils.getCSVData(e);var i=Object.keys(e[0]);i=i.map(function(t){return{name:t}});this.ngeoCsvDownload_.startDownload(n,i,"LIDAR_profile.csv")}};t.prototype.pngExport=function t(){if(this.line){this.profile.utils.downloadProfileAsImageFile(this.profileConfig_.clientConfig)}};return t}();dt.controller("gmfLidarprofilePanelController",dt.Controller_);var vt=dt;var gt=n(576);var mt=angular.module("gmfLidarprofileModule",[o.name,vt.name,u.module.name,ot.module.name]);var _t=e["a"]=mt},function(t,e,n){"use strict";var i=n(78);var r=n(373);var a=Array.prototype;var o=a.map;var s=a.slice;var l={name:"implicit"};function u(t){var e=Object(r["map"])(),n=[],i=l;t=t==null?[]:s.call(t);function a(r){var a=r+"",o=e.get(a);if(!o){if(i!==l)return i;e.set(a,o=n.push(r))}return t[(o-1)%t.length]}a.domain=function(t){if(!arguments.length)return n.slice();n=[],e=Object(r["map"])();var i=-1,o=t.length,s,l;while(++i<o)if(!e.has(l=(s=t[i])+""))e.set(l,n.push(s));return a};a.range=function(e){return arguments.length?(t=s.call(e),a):t.slice()};a.unknown=function(t){return arguments.length?(i=t,a):i};a.copy=function(){return u().domain(n).range(t).unknown(i)};return a}function c(){var t=u().unknown(undefined),e=t.domain,n=t.range,r=[0,1],a,o,s=false,l=0,f=0,h=.5;delete t.unknown;function d(){var t=e().length,u=r[1]<r[0],c=r[u-0],d=r[1-u];a=(d-c)/Math.max(1,t-l+f*2);if(s)a=Math.floor(a);c+=(d-c-a*(t-l))*h;o=a*(1-l);if(s)c=Math.round(c),o=Math.round(o);var p=Object(i["f"])(t).map(function(t){return c+a*t});return n(u?p.reverse():p)}t.domain=function(t){return arguments.length?(e(t),d()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],d()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],s=true,d()};t.bandwidth=function(){return o};t.step=function(){return a};t.round=function(t){return arguments.length?(s=!!t,d()):s};t.padding=function(t){return arguments.length?(l=f=Math.max(0,Math.min(1,t)),d()):l};t.paddingInner=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),d()):l};t.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),d()):f};t.align=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),d()):h};t.copy=function(){return c().domain(e()).range(r).round(s).paddingInner(l).paddingOuter(f).align(h)};return d()}function f(t){var e=t.copy;t.padding=t.paddingOuter;delete t.paddingInner;delete t.paddingOuter;t.copy=function(){return f(e())};return t}function h(){return f(c().paddingInner(1))}var d=n(91);var p=function(t){return function(){return t}};var v=function(t){return+t};var g=[0,1];function m(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:p(e)}function _(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:i(t)}}}function y(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:i(t)}}}function b(t,e,n,i){var r=t[0],a=t[1],o=e[0],s=e[1];if(a<r)r=n(a,r),o=i(s,o);else r=n(r,a),o=i(o,s);return function(t){return o(r(t))}}function w(t,e,n,r){var a=Math.min(t.length,e.length)-1,o=new Array(a),s=new Array(a),l=-1;if(t[a]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++l<a){o[l]=n(t[l],t[l+1]);s[l]=r(e[l],e[l+1])}return function(e){var n=Object(i["b"])(t,e,1,a)-1;return s[n](o[n](e))}}function x(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function S(t,e){var n=g,i=g,r=d["interpolate"],a=false,l,u,c;function f(){l=Math.min(n.length,i.length)>2?w:b;u=c=null;return h}function h(e){return(u||(u=l(n,i,a?_(t):t,r)))(+e)}h.invert=function(t){return(c||(c=l(i,n,m,a?y(e):e)))(+t)};h.domain=function(t){return arguments.length?(n=o.call(t,v),f()):n.slice()};h.range=function(t){return arguments.length?(i=s.call(t),f()):i.slice()};h.rangeRound=function(t){return i=s.call(t),r=d["interpolateRound"],f()};h.clamp=function(t){return arguments.length?(a=!!t,f()):a};h.interpolate=function(t){return arguments.length?(r=t,f()):r};return f()}var C=n(206);var E=function(t,e,n){var r=t[0],a=t[t.length-1],o=Object(i["h"])(r,a,e==null?10:e),s;n=Object(C["formatSpecifier"])(n==null?",f":n);switch(n.type){case"s":{var l=Math.max(Math.abs(r),Math.abs(a));if(n.precision==null&&!isNaN(s=Object(C["precisionPrefix"])(o,l)))n.precision=s;return Object(C["formatPrefix"])(n,l)}case"":case"e":case"g":case"p":case"r":{if(n.precision==null&&!isNaN(s=Object(C["precisionRound"])(o,Math.max(Math.abs(r),Math.abs(a)))))n.precision=s-(n.type==="e");break}case"f":case"%":{if(n.precision==null&&!isNaN(s=Object(C["precisionFixed"])(o)))n.precision=s-(n.type==="%")*2;break}}return Object(C["format"])(n)};function O(t){var e=t.domain;t.ticks=function(t){var n=e();return Object(i["i"])(n[0],n[n.length-1],t==null?10:t)};t.tickFormat=function(t,n){return E(e(),t,n)};t.nice=function(n){if(n==null)n=10;var r=e(),a=0,o=r.length-1,s=r[a],l=r[o],u;if(l<s){u=s,s=l,l=u;u=a,a=o,o=u}u=Object(i["g"])(s,l,n);if(u>0){s=Math.floor(s/u)*u;l=Math.ceil(l/u)*u;u=Object(i["g"])(s,l,n)}else if(u<0){s=Math.ceil(s*u)/u;l=Math.floor(l*u)/u;u=Object(i["g"])(s,l,n)}if(u>0){r[a]=Math.floor(s/u)*u;r[o]=Math.ceil(l/u)*u;e(r)}else if(u<0){r[a]=Math.ceil(s*u)/u;r[o]=Math.floor(l*u)/u;e(r)}return t};return t}function T(){var t=S(m,d["interpolateNumber"]);t.copy=function(){return x(t,T())};return O(t)}function M(){var t=[0,1];function e(t){return+t}e.invert=e;e.domain=e.range=function(n){return arguments.length?(t=o.call(n,v),e):t.slice()};e.copy=function(){return M().domain(t)};return O(e)}var I=function(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],a=t[i],o;if(a<r){o=n,n=i,i=o;o=r,r=a,a=o}t[n]=e.floor(r);t[i]=e.ceil(a);return t};function R(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:p(e)}function N(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function A(t){return isFinite(t)?+("1e"+t):t<0?0:t}function L(t){return t===10?A:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function P(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function D(t){return function(e){return-t(-e)}}function j(){var t=S(R,N).domain([1,10]),e=t.domain,n=10,r=P(10),a=L(10);function o(){r=P(n),a=L(n);if(e()[0]<0)r=D(r),a=D(a);return t}t.base=function(t){return arguments.length?(n=+t,o()):n};t.domain=function(t){return arguments.length?(e(t),o()):e()};t.ticks=function(t){var o=e(),s=o[0],l=o[o.length-1],u;if(u=l<s)c=s,s=l,l=c;var c=r(s),f=r(l),h,d,p,v=t==null?10:+t,g=[];if(!(n%1)&&f-c<v){c=Math.round(c)-1,f=Math.round(f)+1;if(s>0)for(;c<f;++c){for(d=1,h=a(c);d<n;++d){p=h*d;if(p<s)continue;if(p>l)break;g.push(p)}}else for(;c<f;++c){for(d=n-1,h=a(c);d>=1;--d){p=h*d;if(p<s)continue;if(p>l)break;g.push(p)}}}else{g=Object(i["i"])(c,f,Math.min(f-c,v)).map(a)}return u?g.reverse():g};t.tickFormat=function(e,i){if(i==null)i=n===10?".0e":",";if(typeof i!=="function")i=Object(C["format"])(i);if(e===Infinity)return i;if(e==null)e=10;var o=Math.max(1,n*e/t.ticks().length);return function(t){var e=t/a(Math.round(r(t)));if(e*n<n-.5)e*=n;return e<=o?i(t):""}};t.nice=function(){return e(I(e(),{floor:function(t){return a(Math.floor(r(t)))},ceil:function(t){return a(Math.ceil(r(t)))}}))};t.copy=function(){return x(t,j().base(n))};return t}function k(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function F(){var t=1,e=S(i,r),n=e.domain;function i(e,n){return(n=k(n,t)-(e=k(e,t)))?function(i){return(k(i,t)-e)/n}:p(n)}function r(e,n){n=k(n,t)-(e=k(e,t));return function(i){return k(e+n*i,1/t)}}e.exponent=function(e){return arguments.length?(t=+e,n(n())):t};e.copy=function(){return x(e,F().exponent(t))};return O(e)}function $(){return F().exponent(.5)}function G(){var t=[],e=[],n=[];function r(){var r=0,o=Math.max(1,e.length);n=new Array(o-1);while(++r<o)n[r-1]=Object(i["e"])(t,r/o);return a}function a(t){if(!isNaN(t=+t))return e[Object(i["b"])(n,t)]}a.invertExtent=function(i){var r=e.indexOf(i);return r<0?[NaN,NaN]:[r>0?n[r-1]:t[0],r<n.length?n[r]:t[t.length-1]]};a.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n=0,a=e.length,o;n<a;++n)if(o=e[n],o!=null&&!isNaN(o=+o))t.push(o);t.sort(i["a"]);return r()};a.range=function(t){return arguments.length?(e=s.call(t),r()):e.slice()};a.quantiles=function(){return n.slice()};a.copy=function(){return G().domain(t).range(e)};return a}function U(){var t=0,e=1,n=1,r=[.5],a=[0,1];function o(t){if(t<=t)return a[Object(i["b"])(r,t,0,n)]}function l(){var i=-1;r=new Array(n);while(++i<n)r[i]=((i+1)*e-(i-n)*t)/(n+1);return o}o.domain=function(n){return arguments.length?(t=+n[0],e=+n[1],l()):[t,e]};o.range=function(t){return arguments.length?(n=(a=s.call(t)).length-1,l()):a.slice()};o.invertExtent=function(i){var o=a.indexOf(i);return o<0?[NaN,NaN]:o<1?[t,r[0]]:o>=n?[r[n-1],e]:[r[o-1],r[o]]};o.copy=function(){return U().domain([t,e]).range(a)};return O(o)}function Y(){var t=[.5],e=[0,1],n=1;function r(r){if(r<=r)return e[Object(i["b"])(t,r,0,n)]}r.domain=function(i){return arguments.length?(t=s.call(i),n=Math.min(t.length,e.length-1),r):t.slice()};r.range=function(i){return arguments.length?(e=s.call(i),n=Math.min(t.length,e.length-1),r):e.slice()};r.invertExtent=function(n){var i=e.indexOf(n);return[t[i-1],t[i]]};r.copy=function(){return Y().domain(t).range(e)};return r}var V=n(117);var H=n(331);var z=1e3,B=z*60,W=B*60,q=W*24,X=q*7,K=q*30,Z=q*365;function Q(t){return new Date(t)}function J(t){return t instanceof Date?+t:+new Date(+t)}function tt(t,e,n,r,a,s,l,u,c){var f=S(m,d["interpolateNumber"]),h=f.invert,p=f.domain;var v=c(".%L"),g=c(":%S"),_=c("%I:%M"),y=c("%I %p"),b=c("%a %d"),w=c("%b %d"),C=c("%B"),E=c("%Y");var O=[[l,1,z],[l,5,5*z],[l,15,15*z],[l,30,30*z],[s,1,B],[s,5,5*B],[s,15,15*B],[s,30,30*B],[a,1,W],[a,3,3*W],[a,6,6*W],[a,12,12*W],[r,1,q],[r,2,2*q],[n,1,X],[e,1,K],[e,3,3*K],[t,1,Z]];function T(i){return(l(i)<i?v:s(i)<i?g:a(i)<i?_:r(i)<i?y:e(i)<i?n(i)<i?b:w:t(i)<i?C:E)(i)}function M(e,n,r,a){if(e==null)e=10;if(typeof e==="number"){var o=Math.abs(r-n)/e,s=Object(i["c"])(function(t){return t[2]}).right(O,o);if(s===O.length){a=Object(i["h"])(n/Z,r/Z,e);e=t}else if(s){s=O[o/O[s-1][2]<O[s][2]/o?s-1:s];a=s[1];e=s[0]}else{a=Math.max(Object(i["h"])(n,r,e),1);e=u}}return a==null?e:e.every(a)}f.invert=function(t){return new Date(h(t))};f.domain=function(t){return arguments.length?p(o.call(t,J)):p().map(Q)};f.ticks=function(t,e){var n=p(),i=n[0],r=n[n.length-1],a=r<i,o;if(a)o=i,i=r,r=o;o=M(t,i,r,e);o=o?o.range(i,r+1):[];return a?o.reverse():o};f.tickFormat=function(t,e){return e==null?T:c(e)};f.nice=function(t,e){var n=p();return(t=M(t,n[0],n[n.length-1],e))?p(I(n,t)):f};f.copy=function(){return x(f,tt(t,e,n,r,a,s,l,u,c))};return f}var et=function(){return tt(V["timeYear"],V["timeMonth"],V["timeWeek"],V["timeDay"],V["timeHour"],V["timeMinute"],V["timeSecond"],V["timeMillisecond"],H["timeFormat"]).domain([new Date(2e3,0,1),new Date(2e3,0,2)])};var nt=function(){return tt(V["utcYear"],V["utcMonth"],V["utcWeek"],V["utcDay"],V["utcHour"],V["utcMinute"],V["utcSecond"],V["utcMillisecond"],H["utcFormat"]).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])};var it=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})};var rt=it("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var at=it("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");var ot=it("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");var st=it("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");var lt=n(157);var ut=Object(d["interpolateCubehelixLong"])(Object(lt["cubehelix"])(300,.5,0),Object(lt["cubehelix"])(-240,.5,1));var ct=Object(d["interpolateCubehelixLong"])(Object(lt["cubehelix"])(-100,.75,.35),Object(lt["cubehelix"])(80,1.5,.8));var ft=Object(d["interpolateCubehelixLong"])(Object(lt["cubehelix"])(260,.75,.35),Object(lt["cubehelix"])(80,1.5,.8));var ht=Object(lt["cubehelix"])();var dt=function(t){if(t<0||t>1)t-=Math.floor(t);var e=Math.abs(t-.5);ht.h=360*t-100;ht.s=1.5-1.5*e;ht.l=.8-.9*e;return ht+""};function pt(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var vt=pt(it("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var gt=pt(it("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));var mt=pt(it("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));var _t=pt(it("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function yt(t){var e=0,n=1,i=false;function r(r){var a=(r-e)/(n-e);return t(i?Math.max(0,Math.min(1,a)):a)}r.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],r):[e,n]};r.clamp=function(t){return arguments.length?(i=!!t,r):i};r.interpolator=function(e){return arguments.length?(t=e,r):t};r.copy=function(){return yt(t).domain([e,n]).clamp(i)};return O(r)}n.d(e,false,function(){return c});n.d(e,false,function(){return h});n.d(e,false,function(){return M});n.d(e,"a",function(){return T});n.d(e,false,function(){return j});n.d(e,false,function(){return u});n.d(e,false,function(){return l});n.d(e,false,function(){return F});n.d(e,false,function(){return $});n.d(e,false,function(){return G});n.d(e,false,function(){return U});n.d(e,false,function(){return Y});n.d(e,false,function(){return et});n.d(e,false,function(){return nt});n.d(e,false,function(){return rt});n.d(e,false,function(){return at});n.d(e,false,function(){return ot});n.d(e,false,function(){return st});n.d(e,false,function(){return ut});n.d(e,false,function(){return dt});n.d(e,false,function(){return ct});n.d(e,false,function(){return ft});n.d(e,false,function(){return vt});n.d(e,false,function(){return gt});n.d(e,false,function(){return mt});n.d(e,false,function(){return _t});n.d(e,false,function(){return yt})},function(t,e,n){"use strict";var i=n(2);var r=n(3);var a=n(9);var o=n(159);var s=n(281);var l=n(78);var u=n(271);var c=n(311);var f=n(22);var h=n(187);var d=function(t){return function e(){return t}};var p=Math.abs;var v=Math.atan2;var g=Math.cos;var m=Math.max;var _=Math.min;var y=Math.sin;var b=Math.sqrt;var w=1e-12;var x=Math.PI;var S=x/2;var C=2*x;function E(t){return t>1?0:t<-1?x:Math.acos(t)}function O(t){return t>=1?S:t<=-1?-S:Math.asin(t)}function T(t){return t.innerRadius}function M(t){return t.outerRadius}function I(t){return t.startAngle}function R(t){return t.endAngle}function N(t){return t&&t.padAngle}function A(t,e,n,i,r,a,o,s){var l=n-t,u=i-e,c=o-r,f=s-a,h=(c*(e-a)-f*(t-r))/(f*l-c*u);return[t+h*l,e+h*u]}function L(t,e,n,i,r,a,o){var s=t-n,l=e-i,u=(o?a:-a)/b(s*s+l*l),c=u*l,f=-u*s,h=t+c,d=e+f,p=n+c,v=i+f,g=(h+p)/2,_=(d+v)/2,y=p-h,w=v-d,x=y*y+w*w,S=r-a,C=h*v-p*d,E=(w<0?-1:1)*b(m(0,S*S*x-C*C)),O=(C*w-y*E)/x,T=(-C*y-w*E)/x,M=(C*w+y*E)/x,I=(-C*y+w*E)/x,R=O-g,N=T-_,A=M-g,L=I-_;if(R*R+N*N>A*A+L*L)O=M,T=I;return{cx:O,cy:T,x01:-c,y01:-f,x11:O*(r/S-1),y11:T*(r/S-1)}}var P=function(){var t=T,e=M,n=d(0),i=null,r=I,a=R,o=N,s=null;function l(){var l,u,c=+t.apply(this,arguments),f=+e.apply(this,arguments),d=r.apply(this,arguments)-S,m=a.apply(this,arguments)-S,T=p(m-d),M=m>d;if(!s)s=l=Object(h["path"])();if(f<c)u=f,f=c,c=u;if(!(f>w))s.moveTo(0,0);else if(T>C-w){s.moveTo(f*g(d),f*y(d));s.arc(0,0,f,d,m,!M);if(c>w){s.moveTo(c*g(m),c*y(m));s.arc(0,0,c,m,d,M)}}else{var I=d,R=m,N=d,P=m,D=T,j=T,k=o.apply(this,arguments)/2,F=k>w&&(i?+i.apply(this,arguments):b(c*c+f*f)),$=_(p(f-c)/2,+n.apply(this,arguments)),G=$,U=$,Y,V;if(F>w){var H=O(F/c*y(k)),z=O(F/f*y(k));if((D-=H*2)>w)H*=M?1:-1,N+=H,P-=H;else D=0,N=P=(d+m)/2;if((j-=z*2)>w)z*=M?1:-1,I+=z,R-=z;else j=0,I=R=(d+m)/2}var B=f*g(I),W=f*y(I),q=c*g(P),X=c*y(P);if($>w){var K=f*g(R),Z=f*y(R),Q=c*g(N),J=c*y(N);if(T<x){var tt=D>w?A(B,W,Q,J,K,Z,q,X):[q,X],et=B-tt[0],nt=W-tt[1],it=K-tt[0],rt=Z-tt[1],at=1/y(E((et*it+nt*rt)/(b(et*et+nt*nt)*b(it*it+rt*rt)))/2),ot=b(tt[0]*tt[0]+tt[1]*tt[1]);G=_($,(c-ot)/(at-1));U=_($,(f-ot)/(at+1))}}if(!(j>w))s.moveTo(B,W);else if(U>w){Y=L(Q,J,B,W,f,U,M);V=L(K,Z,q,X,f,U,M);s.moveTo(Y.cx+Y.x01,Y.cy+Y.y01);if(U<$)s.arc(Y.cx,Y.cy,U,v(Y.y01,Y.x01),v(V.y01,V.x01),!M);else{s.arc(Y.cx,Y.cy,U,v(Y.y01,Y.x01),v(Y.y11,Y.x11),!M);s.arc(0,0,f,v(Y.cy+Y.y11,Y.cx+Y.x11),v(V.cy+V.y11,V.cx+V.x11),!M);s.arc(V.cx,V.cy,U,v(V.y11,V.x11),v(V.y01,V.x01),!M)}}else s.moveTo(B,W),s.arc(0,0,f,I,R,!M);if(!(c>w)||!(D>w))s.lineTo(q,X);else if(G>w){Y=L(q,X,K,Z,c,-G,M);V=L(B,W,Q,J,c,-G,M);s.lineTo(Y.cx+Y.x01,Y.cy+Y.y01);if(G<$)s.arc(Y.cx,Y.cy,G,v(Y.y01,Y.x01),v(V.y01,V.x01),!M);else{s.arc(Y.cx,Y.cy,G,v(Y.y01,Y.x01),v(Y.y11,Y.x11),!M);s.arc(0,0,c,v(Y.cy+Y.y11,Y.cx+Y.x11),v(V.cy+V.y11,V.cx+V.x11),M);s.arc(V.cx,V.cy,G,v(V.y11,V.x11),v(V.y01,V.x01),!M)}}else s.arc(0,0,c,P,N,M)}s.closePath();if(l)return s=null,l+""||null}l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-x/2;return[g(i)*n,y(i)*n]};l.innerRadius=function(e){return arguments.length?(t=typeof e==="function"?e:d(+e),l):t};l.outerRadius=function(t){return arguments.length?(e=typeof t==="function"?t:d(+t),l):e};l.cornerRadius=function(t){return arguments.length?(n=typeof t==="function"?t:d(+t),l):n};l.padRadius=function(t){return arguments.length?(i=t==null?null:typeof t==="function"?t:d(+t),l):i};l.startAngle=function(t){return arguments.length?(r=typeof t==="function"?t:d(+t),l):r};l.endAngle=function(t){return arguments.length?(a=typeof t==="function"?t:d(+t),l):a};l.padAngle=function(t){return arguments.length?(o=typeof t==="function"?t:d(+t),l):o};l.context=function(t){return arguments.length?(s=t==null?null:t,l):s};return l};function D(t){this._context=t}D.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,e){t=+t,e=+e;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};var j=function(t){return new D(t)};function k(t){return t[0]}function F(t){return t[1]}var $=function(){var t=k,e=F,n=d(true),i=null,r=j,a=null;function o(o){var s,l=o.length,u,c=false,f;if(i==null)a=r(f=Object(h["path"])());for(s=0;s<=l;++s){if(!(s<l&&n(u=o[s],s,o))===c){if(c=!c)a.lineStart();else a.lineEnd()}if(c)a.point(+t(u,s,o),+e(u,s,o))}if(f)return a=null,f+""||null}o.x=function(e){return arguments.length?(t=typeof e==="function"?e:d(+e),o):t};o.y=function(t){return arguments.length?(e=typeof t==="function"?t:d(+t),o):e};o.defined=function(t){return arguments.length?(n=typeof t==="function"?t:d(!!t),o):n};o.curve=function(t){return arguments.length?(r=t,i!=null&&(a=r(i)),o):r};o.context=function(t){return arguments.length?(t==null?i=a=null:a=r(i=t),o):i};return o};var G=function(){var t=k,e=null,n=d(0),i=F,r=d(true),a=null,o=j,s=null;function l(l){var u,c,f,d=l.length,p,v=false,g,m=new Array(d),_=new Array(d);if(a==null)s=o(g=Object(h["path"])());for(u=0;u<=d;++u){if(!(u<d&&r(p=l[u],u,l))===v){if(v=!v){c=u;s.areaStart();s.lineStart()}else{s.lineEnd();s.lineStart();for(f=u-1;f>=c;--f){s.point(m[f],_[f])}s.lineEnd();s.areaEnd()}}if(v){m[u]=+t(p,u,l),_[u]=+n(p,u,l);s.point(e?+e(p,u,l):m[u],i?+i(p,u,l):_[u])}}if(g)return s=null,g+""||null}function u(){return $().defined(r).curve(o).context(a)}l.x=function(n){return arguments.length?(t=typeof n==="function"?n:d(+n),e=null,l):t};l.x0=function(e){return arguments.length?(t=typeof e==="function"?e:d(+e),l):t};l.x1=function(t){return arguments.length?(e=t==null?null:typeof t==="function"?t:d(+t),l):e};l.y=function(t){return arguments.length?(n=typeof t==="function"?t:d(+t),i=null,l):n};l.y0=function(t){return arguments.length?(n=typeof t==="function"?t:d(+t),l):n};l.y1=function(t){return arguments.length?(i=t==null?null:typeof t==="function"?t:d(+t),l):i};l.lineX0=l.lineY0=function(){return u().x(t).y(n)};l.lineY1=function(){return u().x(t).y(i)};l.lineX1=function(){return u().x(e).y(n)};l.defined=function(t){return arguments.length?(r=typeof t==="function"?t:d(!!t),l):r};l.curve=function(t){return arguments.length?(o=t,a!=null&&(s=o(a)),l):o};l.context=function(t){return arguments.length?(t==null?a=s=null:s=o(a=t),l):a};return l};var U=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN};var Y=function(t){return t};var V=function(){var t=Y,e=U,n=null,i=d(0),r=d(C),a=d(0);function o(o){var s,l=o.length,u,c,f=0,h=new Array(l),d=new Array(l),p=+i.apply(this,arguments),v=Math.min(C,Math.max(-C,r.apply(this,arguments)-p)),g,m=Math.min(Math.abs(v)/l,a.apply(this,arguments)),_=m*(v<0?-1:1),y;for(s=0;s<l;++s){if((y=d[h[s]=s]=+t(o[s],s,o))>0){f+=y}}if(e!=null)h.sort(function(t,n){return e(d[t],d[n])});else if(n!=null)h.sort(function(t,e){return n(o[t],o[e])});for(s=0,c=f?(v-l*_)/f:0;s<l;++s,p=g){u=h[s],y=d[u],g=p+(y>0?y*c:0)+_,d[u]={data:o[u],index:s,value:y,startAngle:p,endAngle:g,padAngle:m}}return d}o.value=function(e){return arguments.length?(t=typeof e==="function"?e:d(+e),o):t};o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e};o.sort=function(t){return arguments.length?(n=t,e=null,o):n};o.startAngle=function(t){return arguments.length?(i=typeof t==="function"?t:d(+t),o):i};o.endAngle=function(t){return arguments.length?(r=typeof t==="function"?t:d(+t),o):r};o.padAngle=function(t){return arguments.length?(a=typeof t==="function"?t:d(+t),o):a};return o};var H=B(j);function z(t){this._curve=t}z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function B(t){function e(e){return new z(t(e))}e._curve=t;return e}function W(t){var e=t.curve;t.angle=t.x,delete t.x;t.radius=t.y,delete t.y;t.curve=function(t){return arguments.length?e(B(t)):e()._curve};return t}var q=function(){return W($().curve(H))};var X=function(){var t=G().curve(H),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,a=t.lineY1;t.angle=t.x,delete t.x;t.startAngle=t.x0,delete t.x0;t.endAngle=t.x1,delete t.x1;t.radius=t.y,delete t.y;t.innerRadius=t.y0,delete t.y0;t.outerRadius=t.y1,delete t.y1;t.lineStartAngle=function(){return W(n())},delete t.lineX0;t.lineEndAngle=function(){return W(i())},delete t.lineX1;t.lineInnerRadius=function(){return W(r())},delete t.lineY0;t.lineOuterRadius=function(){return W(a())},delete t.lineY1;t.curve=function(t){return arguments.length?e(B(t)):e()._curve};return t};var K=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]};var Z=Array.prototype.slice;function Q(t){return t.source}function J(t){return t.target}function tt(t){var e=Q,n=J,i=k,r=F,a=null;function o(){var o,s=Z.call(arguments),l=e.apply(this,s),u=n.apply(this,s);if(!a)a=o=Object(h["path"])();t(a,+i.apply(this,(s[0]=l,s)),+r.apply(this,s),+i.apply(this,(s[0]=u,s)),+r.apply(this,s));if(o)return a=null,o+""||null}o.source=function(t){return arguments.length?(e=t,o):e};o.target=function(t){return arguments.length?(n=t,o):n};o.x=function(t){return arguments.length?(i=typeof t==="function"?t:d(+t),o):i};o.y=function(t){return arguments.length?(r=typeof t==="function"?t:d(+t),o):r};o.context=function(t){return arguments.length?(a=t==null?null:t,o):a};return o}function et(t,e,n,i,r){t.moveTo(e,n);t.bezierCurveTo(e=(e+i)/2,n,e,r,i,r)}function nt(t,e,n,i,r){t.moveTo(e,n);t.bezierCurveTo(e,n=(n+r)/2,i,n,i,r)}function it(t,e,n,i,r){var a=K(e,n),o=K(e,n=(n+r)/2),s=K(i,n),l=K(i,r);t.moveTo(a[0],a[1]);t.bezierCurveTo(o[0],o[1],s[0],s[1],l[0],l[1])}function rt(){return tt(et)}function at(){return tt(nt)}function ot(){var t=tt(it);t.angle=t.x,delete t.x;t.radius=t.y,delete t.y;return t}var st={draw:function(t,e){var n=Math.sqrt(e/x);t.moveTo(n,0);t.arc(0,0,n,0,C)}};var lt={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n);t.lineTo(-n,-n);t.lineTo(-n,-3*n);t.lineTo(n,-3*n);t.lineTo(n,-n);t.lineTo(3*n,-n);t.lineTo(3*n,n);t.lineTo(n,n);t.lineTo(n,3*n);t.lineTo(-n,3*n);t.lineTo(-n,n);t.lineTo(-3*n,n);t.closePath()}};var ut=Math.sqrt(1/3),ct=ut*2;var ft={draw:function(t,e){var n=Math.sqrt(e/ct),i=n*ut;t.moveTo(0,-n);t.lineTo(i,0);t.lineTo(0,n);t.lineTo(-i,0);t.closePath()}};var ht=.8908130915292852,dt=Math.sin(x/10)/Math.sin(7*x/10),pt=Math.sin(C/10)*dt,vt=-Math.cos(C/10)*dt;var gt={draw:function(t,e){var n=Math.sqrt(e*ht),i=pt*n,r=vt*n;t.moveTo(0,-n);t.lineTo(i,r);for(var a=1;a<5;++a){var o=C*a/5,s=Math.cos(o),l=Math.sin(o);t.lineTo(l*n,-s*n);t.lineTo(s*i-l*r,l*i+s*r)}t.closePath()}};var mt={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}};var _t=Math.sqrt(3);var yt={draw:function(t,e){var n=-Math.sqrt(e/(_t*3));t.moveTo(0,n*2);t.lineTo(-_t*n,-n);t.lineTo(_t*n,-n);t.closePath()}};var bt=-.5,wt=Math.sqrt(3)/2,xt=1/Math.sqrt(12),St=(xt/2+1)*3;var Ct={draw:function(t,e){var n=Math.sqrt(e/St),i=n/2,r=n*xt,a=i,o=n*xt+n,s=-a,l=o;t.moveTo(i,r);t.lineTo(a,o);t.lineTo(s,l);t.lineTo(bt*i-wt*r,wt*i+bt*r);t.lineTo(bt*a-wt*o,wt*a+bt*o);t.lineTo(bt*s-wt*l,wt*s+bt*l);t.lineTo(bt*i+wt*r,bt*r-wt*i);t.lineTo(bt*a+wt*o,bt*o-wt*a);t.lineTo(bt*s+wt*l,bt*l-wt*s);t.closePath()}};var Et=[st,lt,ft,mt,gt,yt,Ct];var Ot=function(){var t=d(st),e=d(64),n=null;function i(){var i;if(!n)n=i=Object(h["path"])();t.apply(this,arguments).draw(n,+e.apply(this,arguments));if(i)return n=null,i+""||null}i.type=function(e){return arguments.length?(t=typeof e==="function"?e:d(e),i):t};i.size=function(t){return arguments.length?(e=typeof t==="function"?t:d(+t),i):e};i.context=function(t){return arguments.length?(n=t==null?null:t,i):n};return i};var Tt=function(){};function Mt(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function It(t){this._context=t}It.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:Mt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,e){t=+t,e=+e;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mt(this,t,e);break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=e}};var Rt=function(t){return new It(t)};function Nt(t){this._context=t}Nt.prototype={areaStart:Tt,areaEnd:Tt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2);this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break}case 3:{this.point(this._x2,this._y2);this.point(this._x3,this._y3);this.point(this._x4,this._y4);break}}},point:function(t,e){t=+t,e=+e;switch(this._point){case 0:this._point=1;this._x2=t,this._y2=e;break;case 1:this._point=2;this._x3=t,this._y3=e;break;case 2:this._point=3;this._x4=t,this._y4=e;this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Mt(this,t,e);break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=e}};var At=function(t){return new Nt(t)};function Lt(t){this._context=t}Lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(t,e){t=+t,e=+e;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Mt(this,t,e);break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=e}};var Pt=function(t){return new Lt(t)};function Dt(t,e){this._basis=new It(t);this._beta=e}Dt.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0){var i=t[0],r=e[0],a=t[n]-i,o=e[n]-r,s=-1,l;while(++s<=n){l=s/n;this._basis.point(this._beta*t[s]+(1-this._beta)*(i+l*a),this._beta*e[s]+(1-this._beta)*(r+l*o))}}this._x=this._y=null;this._basis.lineEnd()},point:function(t,e){this._x.push(+t);this._y.push(+e)}};var jt=function t(e){function n(t){return e===1?new It(t):new Dt(t,e)}n.beta=function(e){return t(+e)};return n}(.85);function kt(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Ft(t,e){this._context=t;this._k=(1-e)/6}Ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:kt(this,this._x1,this._y1);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,e){t=+t,e=+e;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;this._x1=t,this._y1=e;break;case 2:this._point=3;default:kt(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=e}};var $t=function t(e){function n(t){return new Ft(t,e)}n.tension=function(e){return t(+e)};return n}(0);function Gt(t,e){this._context=t;this._k=(1-e)/6}Gt.prototype={areaStart:Tt,areaEnd:Tt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break}case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break}}},point:function(t,e){t=+t,e=+e;switch(this._point){case 0:this._point=1;this._x3=t,this._y3=e;break;case 1:this._point=2;this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3;this._x5=t,this._y5=e;break;default:kt(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ut=function t(e){function n(t){return new Gt(t,e)}n.tension=function(e){return t(+e)};return n}(0);function Yt(t,e){this._context=t;this._k=(1-e)/6}Yt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(t,e){t=+t,e=+e;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:kt(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Vt=function t(e){function n(t){return new Yt(t,e)}n.tension=function(e){return t(+e)};return n}(0);function Ht(t,e,n){var i=t._x1,r=t._y1,a=t._x2,o=t._y2;if(t._l01_a>w){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l;r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>w){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/c;o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,r,a,o,t._x2,t._y2)}function zt(t,e){this._context=t;this._alpha=e}zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,e){t=+t,e=+e;if(this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Ht(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Bt=function t(e){function n(t){return e?new zt(t,e):new Ft(t,0)}n.alpha=function(e){return t(+e)};return n}(.5);function Wt(t,e){this._context=t;this._alpha=e}Wt.prototype={areaStart:Tt,areaEnd:Tt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break}case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break}}},point:function(t,e){t=+t,e=+e;if(this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=t,this._y3=e;break;case 1:this._point=2;this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3;this._x5=t,this._y5=e;break;default:Ht(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=e}};var qt=function t(e){function n(t){return e?new Wt(t,e):new Gt(t,0)}n.alpha=function(e){return t(+e)};return n}(.5);function Xt(t,e){this._context=t;this._alpha=e}Xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(t,e){t=+t,e=+e;if(this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ht(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Kt=function t(e){function n(t){return e?new Xt(t,e):new Yt(t,0)}n.alpha=function(e){return t(+e)};return n}(.5);function Zt(t){this._context=t}Zt.prototype={areaStart:Tt,areaEnd:Tt,lineStart:function(){this._point=0},lineEnd:function(){if(this._point)this._context.closePath()},point:function(t,e){t=+t,e=+e;if(this._point)this._context.lineTo(t,e);else this._point=1,this._context.moveTo(t,e)}};var Qt=function(t){return new Zt(t)};function Jt(t){return t<0?-1:1}function te(t,e,n){var i=t._x1-t._x0,r=e-t._x1,a=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),s=(a*r+o*i)/(i+r);return(Jt(a)+Jt(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function ee(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ne(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function ie(t){this._context=t}ie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ne(this,this._t0,ee(this,this._t0));break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,e){var n=NaN;t=+t,e=+e;if(t===this._x1&&e===this._y1)return;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;ne(this,ee(this,n=te(this,t,e)),n);break;default:ne(this,this._t0,n=te(this,t,e));break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=e;this._t0=n}};function re(t){this._context=new ae(t)}(re.prototype=Object.create(ie.prototype)).point=function(t,e){ie.prototype.point.call(this,e,t)};function ae(t){this._context=t}ae.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}};function oe(t){return new ie(t)}function se(t){return new re(t)}function le(t){this._context=t}le.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n){this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]);if(n===2){this._context.lineTo(t[1],e[1])}else{var i=ue(t),r=ue(e);for(var a=0,o=1;o<n;++a,++o){this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[o],e[o])}}}if(this._line||this._line!==0&&n===1)this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(t,e){this._x.push(+t);this._y.push(+e)}};function ue(t){var e,n=t.length-1,i,r=new Array(n),a=new Array(n),o=new Array(n);r[0]=0,a[0]=2,o[0]=t[0]+2*t[1];for(e=1;e<n-1;++e)r[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];r[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n];for(e=1;e<n;++e)i=r[e]/a[e-1],a[e]-=i,o[e]-=i*o[e-1];r[n-1]=o[n-1]/a[n-1];for(e=n-2;e>=0;--e)r[e]=(o[e]-r[e+1])/a[e];a[n-1]=(t[n]+r[n-1])/2;for(e=0;e<n-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}var ce=function(t){return new le(t)};function fe(t,e){this._context=t;this._t=e}fe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){if(0<this._t&&this._t<1&&this._point===2)this._context.lineTo(this._x,this._y);if(this._line||this._line!==0&&this._point===1)this._context.closePath();if(this._line>=0)this._t=1-this._t,this._line=1-this._line},point:function(t,e){t=+t,e=+e;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0){this._context.lineTo(this._x,e);this._context.lineTo(t,e)}else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y);this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};var he=function(t){return new fe(t,.5)};function de(t){return new fe(t,0)}function pe(t){return new fe(t,1)}var ve=function(t,e){if(!((o=t.length)>1))return;for(var n=1,i,r,a=t[e[0]],o,s=a.length;n<o;++n){r=a,a=t[e[n]];for(i=0;i<s;++i){a[i][1]+=a[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}}};var ge=function(t){var e=t.length,n=new Array(e);while(--e>=0)n[e]=e;return n};function me(t,e){return t[e]}var _e=function(){var t=d([]),e=ge,n=ve,i=me;function r(r){var a=t.apply(this,arguments),o,s=r.length,l=a.length,u=new Array(l),c;for(o=0;o<l;++o){for(var f=a[o],h=u[o]=new Array(s),d=0,p;d<s;++d){h[d]=p=[0,+i(r[d],f,d,r)];p.data=r[d]}h.key=f}for(o=0,c=e(u);o<l;++o){u[c[o]].index=o}n(u,c);return u}r.keys=function(e){return arguments.length?(t=typeof e==="function"?e:d(Z.call(e)),r):t};r.value=function(t){return arguments.length?(i=typeof t==="function"?t:d(+t),r):i};r.order=function(t){return arguments.length?(e=t==null?ge:typeof t==="function"?t:d(Z.call(t)),r):e};r.offset=function(t){return arguments.length?(n=t==null?ve:t,r):n};return r};var ye=function(t,e){if(!((i=t.length)>0))return;for(var n,i,r=0,a=t[0].length,o;r<a;++r){for(o=n=0;n<i;++n)o+=t[n][r][1]||0;if(o)for(n=0;n<i;++n)t[n][r][1]/=o}ve(t,e)};var be=function(t,e){if(!((l=t.length)>1))return;for(var n,i=0,r,a,o,s,l,u=t[e[0]].length;i<u;++i){for(o=s=0,n=0;n<l;++n){if((a=(r=t[e[n]][i])[1]-r[0])>=0){r[0]=o,r[1]=o+=a}else if(a<0){r[1]=s,r[0]=s+=a}else{r[0]=o}}}};var we=function(t,e){if(!((r=t.length)>0))return;for(var n=0,i=t[e[0]],r,a=i.length;n<a;++n){for(var o=0,s=0;o<r;++o)s+=t[o][n][1]||0;i[n][1]+=i[n][0]=-s/2}ve(t,e)};var xe=function(t,e){if(!((o=t.length)>0)||!((a=(r=t[e[0]]).length)>0))return;for(var n=0,i=1,r,a,o;i<a;++i){for(var s=0,l=0,u=0;s<o;++s){var c=t[e[s]],f=c[i][1]||0,h=c[i-1][1]||0,d=(f-h)/2;for(var p=0;p<s;++p){var v=t[e[p]],g=v[i][1]||0,m=v[i-1][1]||0;d+=g-m}l+=f,u+=d*f}r[i-1][1]+=r[i-1][0]=n;if(l)n-=u/l}r[i-1][1]+=r[i-1][0]=n;ve(t,e)};var Se=function(t){var e=t.map(Ce);return ge(t).sort(function(t,n){return e[t]-e[n]})};function Ce(t){var e=0,n=-1,i=t.length,r;while(++n<i)if(r=+t[n][1])e+=r;return e}var Ee=function(t){return Se(t).reverse()};var Oe=function(t){var e=t.length,n,i,r=t.map(Ce),a=ge(t).sort(function(t,e){return r[e]-r[t]}),o=0,s=0,l=[],u=[];for(n=0;n<e;++n){i=a[n];if(o<s){o+=r[i];l.push(i)}else{s+=r[i];u.push(i)}}return u.reverse().concat(l)};var Te=function(t){return ge(t).reverse()};var Me={bisector:l["c"],extent:l["d"],axisBottom:u["a"],axisLeft:u["b"],scaleLinear:c["a"],mouse:f["mouse"],select:f["select"],selectAll:f["selectAll"],area:G,line:$};var Ie=function t(e){var n=e.light!==undefined?e.light:false;var r=n?{top:0,right:0,bottom:0,left:0}:{top:10,right:20,bottom:30,left:40};var o=e.hoverCallback!==undefined?e.hoverCallback:function(){};var s=e.outCallback!==undefined?e.outCallback:function(){};var l=e.distanceExtractor;var u=e.linesConfiguration;var c=Object.keys(u).length;var f=Me.bisector(function(t){return l(t)}).left;var h=e.poiExtractor;var d=e.styleDefs;var p=e.poiLabelAngle!==undefined?e.poiLabelAngle:-60;var v=e.i18n||{};var g=v.xAxis||"Distance";var m=v.yAxis||"Elevation";var _={xhover:function t(e,n){return parseFloat(e.toPrecision(3))+" "+n},yhover:function t(e,n){return e!==null?Math.round(e)+" m":""},xtick:function t(e,n){return e},ytick:function t(e,n){return e}};if(e.formatter!==undefined){a["a"](_,e.formatter)}var y=e.lightXAxis!==undefined?e.lightXAxis:false;var b=void 0;var w=void 0;var x=void 0;var S=e.scaleModifier;var C=void 0;var E=void 0;var O=void 0;var T=void 0;var M=void 0;var I=void 0;var R=function t(e){e.each(function(e){Me.select(this).selectAll("svg").remove();if(e===undefined){return}O=Math.max(this.clientWidth-r.right-r.left,0);w=Me.scaleLinear().range([0,O]);E=Math.max(this.clientHeight-r.top-r.bottom,0);x=Me.scaleLinear().range([E,0]);var i=Me.axisBottom(w);var a=Me.axisLeft(x);var o=void 0;if(c===1){o=Me.area().x(function(t){return w(l(t))}).y0(E).y1(function(t){var e=Object.keys(u)[0];return x(u[e].zExtractor(t))})}b=Me.select(this).selectAll("svg").data([e]);var s=b.enter().append("svg");b=Me.select(this).selectAll("svg").data([e]);if(d!==undefined){s.append("defs").append("style").attr("type","text/css").text(d)}var f=s.append("g");N();f.style("font","11px Arial");if(c===1){f.append("path").attr("class","area").style("fill","rgba(222, 222, 222, 0.5)")}f.insert("g",":first-child").attr("class","grid-y");if(!n){f.append("g").attr("class","x axis").attr("transform","translate(0,"+E+")");f.append("text").attr("class","x label").attr("text-anchor","end").attr("x",O-4).attr("y",E-4);f.append("g").attr("class","y axis");f.append("text").attr("class","y label").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").style("fill","grey").text(m+" [m]");f.append("g").attr("class","metas").attr("transform","translate("+(O+3)+", 0)")}f.append("g").attr("class","pois");var h=f.append("g").attr("class","x grid-hover");h.append("svg:line").attr("stroke-dasharray","5,5");h.append("text");f.append("rect").attr("class","overlay").attr("width",O).attr("height",E).style("fill","none").style("pointer-events","all");b.attr("width",O+r.left+r.right).attr("height",E+r.top+r.bottom);C=b.select("g").attr("transform","translate("+r.left+","+r.top+")");I=Me.extent(e,function(t){return l(t)});w.domain(I);var p=function(){var t=[];var n=function n(i){var r=Me.extent(e,function(t){return u[i].zExtractor(t)});if(r.every(Number.isFinite)){t=t.concat(r)}};for(var i in u){n(i)}return[Math.min.apply(null,t),Math.max.apply(null,t)]}();x.domain(p);if(S!==undefined){S(w,x,O,E)}else{var v=(p[1]-p[0])*.1;x.domain([p[0]-v,p[1]+v])}if(c===1){C.select(".area").transition().attr("d",o)}var R=void 0,A=void 0,L=void 0;for(A in u){f.append("path").attr("class","line "+A).style("stroke",u[A].color||"#F00").style("fill","none");L=f.append("g").attr("class","y grid-hover "+A);L.append("svg:line").attr("stroke-dasharray","5,5");L.append("text");R=Me.line().x(function(t){return w(l(t))}).y(function(t){return x(u[A].zExtractor(t))}).defined(function(t){return u[A].zExtractor(t)!==null});C.select(".line."+A).transition().attr("d",R)}if(I[1]>2e3){T=1e3;M="km"}else{T=1;M="m"}if(!n){i.tickFormat(function(t){return _.xtick(t/T,M)});if(y){i.tickValues([0,w.domain()[1]])}a.tickFormat(function(t){return _.ytick(t,"m")});C.select(".x.axis").transition().call(i);C.select(".x.label").text(g+" ["+M+"]").style("fill","grey").style("shape-rendering","crispEdges");if(E/15<10){a.ticks(E/15)}C.select(".y.axis").transition().call(a)}C.select(".grid-y").transition().call(a.tickSize(-O,0).tickFormat("")).selectAll(".tick line").style("stroke","#ccc").style("opacity",.7);C.selectAll(".axis").selectAll("path, line").style("fill","none").style("stroke","#000").style("shape-rendering","crispEdges");C.select(".grid-y").select("path").style("stroke","none");C.selectAll(".grid-hover line").style("stroke","#222").style("opacity",.8);C.select(".overlay").on("mouseout",D).on("mousemove",P);function P(){var e=Me.mouse(this)[0];var n=w.invert(e);t.highlight(n)}function D(){t.clearHighlight()}})};R.clearHighlight=function(){C.selectAll(".grid-hover").style("display","none");s.call(null)};R.highlight=function(t){var e=b.datum();var n=f(e,t);if(n>=e.length){return}var i=e[n];var r=l(i);var a=void 0;var s=[];var h={};var d=void 0;for(d in u){a=u[d].zExtractor(i);if(Number.isFinite(a)){s.push(a);h[d]=a;C.select(".y.grid-hover."+d).style("display","inline").select("line").attr("x1",w(0)).attr("y1",x(a)).attr("x2",O).attr("y2",x(a))}else{C.select(".y.grid-hover."+d).style("display","none")}}var p=x(Math.max.apply(null,s));C.select(".x.grid-hover").style("display","inline").select("line").attr("x1",w(r)).attr("y1",E).attr("x2",w(r)).attr("y2",Number.isFinite(p)?p:0);var v=r>I[1]/2;var g=w(r);g+=v?-10:10;C.select(".x.grid-hover text").text(_.xhover(r/T,M)).style("text-anchor",v?"end":"start").attr("transform","translate("+g+","+(E-10)+")");var m="m";if(c===1){var y=s[0]===null?"no value":_.yhover(s[0],"m");C.select(".y.grid-hover text").text(y).style("text-anchor",v?"end":"start").attr("transform","translate("+g+","+(x(s[0])-10)+")")}o.call(null,i,r/T,M,h,m)};R.showPois=function(t){t=t!==undefined?t:[];i["a"].assert(t.length===0||h!==undefined);var e=h;var r=b.select("g");var a=b.datum();var o=r.select(".pois");var s=o.selectAll(".poi").data(t,function(t){var n=f(a,Math.round(e.dist(t)*10)/10,1);var i=a[n];if(i){var r=void 0;var o=[];for(r in u){o.push(u[r].zExtractor(i))}var s=Math.max.apply(null,o);e.z(t,s)}return e.id(t)});var l=s.enter().append("g").attr("class","poi");l.append("text").attr("x",n?0:9).attr("dy",".35em").attr("text-anchor",n?"middle":"start");l.append("line").style("shape-rendering","crispEdges");l.style("opacity",0).transition().duration(1e3).delay(100).style("opacity",1);l.selectAll("text").attr("transform",function(t){if(n){return["translate("+w(e.dist(t))+","+(x(e.z(t))-10)+")"]}else{return["translate("+w(e.dist(t))+","+(x(e.z(t))-20)+") rotate("+p+")"]}}).text(function(t){return e.sort(t)+(n?"":" - "+e.title(t))});l.selectAll("line").style("stroke","grey").attr("x1",function(t){return w(e.dist(t))}).attr("y1",function(t){return x(x.domain()[0])}).attr("x2",function(t){return w(e.dist(t))}).attr("y2",function(t){return x(e.z(t))});l.exit().remove()};function N(){R.showPois([])}return R};var Re=Ie;var Ne={select:f["select"]};var Ae=angular.module("ngeoProfile",[o["a"].name]);Ae.directive_=function(t){return{restrict:"A",link:function e(n,o,s){var l=s["ngeoProfileOptions"];i["a"].assert(l!==undefined);var u=Ne.select(o[0]);var c=void 0,f=void 0,h=void 0;n.$watchCollection(l,function(t){var e=a["a"]({},t);if(e!==undefined){if(e.hoverCallback!==undefined){var i=e.hoverCallback;e.hoverCallback=function(){i.apply(undefined,arguments);n.$applyAsync()}}if(e.outCallback!==undefined){var r=e.outCallback;e.outCallback=function(){r();n.$applyAsync()}}c=Re(e);d()}});n.$watch(s["ngeoProfile"],function(t,e){f=t;d()});n.$watch(s["ngeoProfilePois"],function(t,e){h=t;d()});n.$watch(s["ngeoProfileHighlight"],function(t,e){if(t===undefined){return}if(t>0){c.highlight(t)}else{c.clearHighlight()}});r["a"](window,"resize",t(d,50,true));function d(){if(c!==undefined){u.datum(f).call(c);if(f!==undefined){c.showPois(h)}}}}}};Ae.directive_.$inject=["ngeoDebounce"];Ae.directive("ngeoProfile",Ae.directive_);var Le=e["a"]=Ae},function(t,e,n){"use strict";var i=n(188);var r=n(154);var a=n(75);var o={};o.toXY=function(t,e){if(e===0){if(t.length>2){t=[t[0],t[1]]}}else{for(var n=0,i=t.length;n<i;n++){t[n]=o.toXY(t[n],e-1)}}return t};var s=o;var l=n(36);var u=n(88);var c=n(83);var f=n(89);var h=n(21);var d=n(32);var p=n(69);var v={};v.isEmpty=function(t){var e=true;if(t&&t instanceof p["a"]){e=t.getFlatCoordinates().length===0}return e};v.toXY=function(t){if(t instanceof h["a"]){t.setCoordinates(s.toXY(t.getCoordinates(),0))}else if(t instanceof c["a"]||t instanceof l["a"]){t.setCoordinates(s.toXY(t.getCoordinates(),1))}else if(t instanceof u["a"]||t instanceof d["a"]){t.setCoordinates(s.toXY(t.getCoordinates(),2))}else if(t instanceof f["a"]){t.setCoordinates(s.toXY(t.getCoordinates(),3))}else{throw"gmf.objectediting.geom.toXY - unsupported geometry type"}};var g=v;var m=n(255);var _=n(248);var y=n(2);var b=n(95);var w=n(101);var x=n(65);var S=n(63);var C=n(94);var E=n(60);var O=n(1);var T=n(19);var M=n(3);var I=n(136);var R=n(246);var N=n(156);var A=n(103);var L=n(31);var P=n(209);var D=n(68);var j=n(33);var k=n(35);var F=n(12);var $=function(t,e){for(var n in e){if(e.hasOwnProperty(n))t[n]=e[n]}};function G(){}$(G.prototype,{interfaces_:function t(){return[]},getClass:function t(){return G}});G.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};function U(){}function Y(t,e){this.low=e|0;this.high=t|0}Y.toBinaryString=function(t){var e="";for(var n=2147483648;n>0;n>>>=1){e+=(t.high&n)===n?"1":"0"}for(var n=2147483648;n>0;n>>>=1){e+=(t.low&n)===n?"1":"0"}return e};function V(){}V.isNaN=function(t){return Number.isNaN(t)};V.isInfinite=function(t){return!Number.isFinite(t)};V.MAX_VALUE=Number.MAX_VALUE;if(typeof Float64Array=="function"&&typeof Int32Array=="function"){(function(){var t=2146435072;var e=1048575;var n=new Float64Array(1);var i=new Int32Array(n.buffer);V.doubleToLongBits=function(r){n[0]=r;var a=i[0]|0;var o=i[1]|0;if((o&t)===t&&(o&e)!==0&&a!==0){a=0|0;o=2146959360|0}return new Y(o,a)};V.longBitsToDouble=function(t){i[0]=t.low;i[1]=t.high;return n[0]}})()}else{(function(){var t=1023;var e=Math.log2;var n=Math.floor;var i=Math.pow;var r=function(){for(var t=53;t>0;t--){var r=i(2,t)-1;if(n(e(r))+1===t){return r}}return 0}();V.doubleToLongBits=function(a){var o,s,l,u,c;var f,h,d,p;if(a<0||1/a===Number.NEGATIVE_INFINITY){f=1<<31;a=-a}else{f=0}if(a===0){p=0|0;d=f;return new Y(d,p)}if(a===Infinity){p=0|0;d=f|2146435072;return new Y(d,p)}if(a!==a){p=0|0;d=2146959360;return new Y(d,p)}u=0;p=0|0;o=n(a);if(o>1){if(o<=r){u=n(e(o));if(u<=20){p=0|0;d=o<<20-u&1048575}else{l=u-20;s=i(2,l);p=o%s<<32-l;d=o/s&1048575}}else{l=o;p=0|0;while(true){s=l/2;l=n(s);if(l===0){break}u++;p>>>=1;p|=(d&1)<<31;d>>>=1;if(s!==l){d|=524288}}}}h=u+t;c=o===0;o=a-o;if(u<52&&o!==0){l=0;while(true){s=o*2;if(s>=1){o=s-1;if(!c){l<<=1;l|=1;u++}else{h--;c=false}}else{o=s;if(!c){l<<=1;u++}else if(--h===0){u++;c=false}}if(u===20){d|=l;l=0}else if(u===52){p|=l;break}if(s===1){if(u<20){d|=l<<20-u}else if(u<52){p|=l<<52-u}break}}}d|=h<<20;d|=f;return new Y(d,p)};V.longBitsToDouble=function(e){var n,r,a,o;var s=e.high;var l=e.low;r=s&1<<31?-1:1;a=((s&2146435072)>>20)-t;o=0;n=1<<19;for(var u=1;u<=20;u++){if(s&n){o+=i(2,-u)}n>>>=1}n=1<<31;for(var u=21;u<=52;u++){if(l&n){o+=i(2,-u)}n>>>=1}if(a===-t){if(o===0){return r*0}a=-1022}else if(a===t+1){if(o===0){return r/0}return NaN}else{o+=1}return r*o*i(2,a)}})()}function H(){}function z(){}function B(){}function W(){}function q(t){this.name="RuntimeException";this.message=t;this.stack=(new Error).stack;Error.call(this,t)}q.prototype=Object.create(Error.prototype);q.prototype.constructor=Error;var X=function(t,e){t.prototype=Object.create(e.prototype);t.prototype.constructor=t};function K(){if(arguments.length===0){q.call(this)}else if(arguments.length===1){var t=arguments[0];q.call(this,t)}}X(K,q);$(K.prototype,{interfaces_:function t(){return[]},getClass:function t(){return K}});function Z(){}$(Z.prototype,{interfaces_:function t(){return[]},getClass:function t(){return Z}});Z.shouldNeverReachHere=function(){if(arguments.length===0){Z.shouldNeverReachHere(null)}else if(arguments.length===1){var t=arguments[0];throw new K("Should never reach here"+(t!==null?": "+t:""))}};Z.isTrue=function(){if(arguments.length===1){var t=arguments[0];Z.isTrue(t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(!e){if(n===null){throw new K}else{throw new K(n)}}}};Z.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];Z.equals(t,e,null)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],r=arguments[2];if(!i.equals(n)){throw new K("Expected "+n+" but encountered "+i+(r!==null?": "+r:""))}}};function Q(){this.x=null;this.y=null;this.z=null;if(arguments.length===0){Q.call(this,0,0)}else if(arguments.length===1){var t=arguments[0];Q.call(this,t.x,t.y,t.z)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];Q.call(this,e,n,Q.NULL_ORDINATE)}else if(arguments.length===3){var i=arguments[0],r=arguments[1],a=arguments[2];this.x=i;this.y=r;this.z=a}}$(Q.prototype,{setOrdinate:function t(e,n){switch(e){case Q.X:this.x=n;break;case Q.Y:this.y=n;break;case Q.Z:this.z=n;break;default:throw new U("Invalid ordinate index: "+e)}},equals2D:function t(){if(arguments.length===1){var e=arguments[0];if(this.x!==e.x){return false}if(this.y!==e.y){return false}return true}else if(arguments.length===2){var n=arguments[0],i=arguments[1];if(!G.equalsWithTolerance(this.x,n.x,i)){return false}if(!G.equalsWithTolerance(this.y,n.y,i)){return false}return true}},getOrdinate:function t(e){switch(e){case Q.X:return this.x;case Q.Y:return this.y;case Q.Z:return this.z}throw new U("Invalid ordinate index: "+e)},equals3D:function t(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||V.isNaN(this.z)&&V.isNaN(e.z))},equals:function t(e){if(!(e instanceof Q)){return false}return this.equals2D(e)},equalInZ:function t(e,n){return G.equalsWithTolerance(this.z,e.z,n)},compareTo:function t(e){var n=e;if(this.x<n.x)return-1;if(this.x>n.x)return 1;if(this.y<n.y)return-1;if(this.y>n.y)return 1;return 0},clone:function t(){try{var e=null;return e}catch(t){if(t instanceof CloneNotSupportedException){Z.shouldNeverReachHere("this shouldn't happen because this class is Cloneable");return null}else throw t}finally{}},copy:function t(){return new Q(this)},toString:function t(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function t(e){var n=this.x-e.x;var i=this.y-e.y;var r=this.z-e.z;return Math.sqrt(n*n+i*i+r*r)},distance:function t(e){var n=this.x-e.x;var i=this.y-e.y;return Math.sqrt(n*n+i*i)},hashCode:function t(){var e=17;e=37*e+Q.hashCode(this.x);e=37*e+Q.hashCode(this.y);return e},setCoordinate:function t(e){this.x=e.x;this.y=e.y;this.z=e.z},interfaces_:function t(){return[H,z,W]},getClass:function t(){return Q}});Q.hashCode=function(){if(arguments.length===1&&typeof arguments[0]==="number"){var t=arguments[0];var e=V.doubleToLongBits(t);return Math.trunc(e^e>>>32)}};function J(){this._dimensionsToTest=2;if(arguments.length===0){J.call(this,2)}else if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new U("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}$(J.prototype,{compare:function t(e,n){var i=e;var r=n;var a=J.compare(i.x,r.x);if(a!==0)return a;var o=J.compare(i.y,r.y);if(o!==0)return o;if(this._dimensionsToTest<=2)return 0;var s=J.compare(i.z,r.z);return s},interfaces_:function t(){return[B]},getClass:function t(){return J}});J.compare=function(t,e){if(t<e)return-1;if(t>e)return 1;if(V.isNaN(t)){if(V.isNaN(e))return 0;return-1}if(V.isNaN(e))return 1;return 0};Q.DimensionalComparator=J;Q.serialVersionUID=0x5cbf2c235c7e5800;Q.NULL_ORDINATE=V.NaN;Q.X=0;Q.Y=1;Q.Z=2;var tt=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1};function et(){}$(et.prototype,{setOrdinate:function t(e,n,i){},size:function t(){},getOrdinate:function t(e,n){},getCoordinate:function t(){if(arguments.length===1){var e=arguments[0]}else if(arguments.length===2){var n=arguments[0],i=arguments[1]}},getCoordinateCopy:function t(e){},getDimension:function t(){},getX:function t(e){},expandEnvelope:function t(e){},copy:function t(){},getY:function t(e){},toCoordinateArray:function t(){},interfaces_:function t(){return[z]},getClass:function t(){return et}});et.X=0;et.Y=1;et.Z=2;et.M=3;function nt(){}$(nt.prototype,{create:function t(){if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0]}else if(tt(arguments[0],et)){var n=arguments[0]}}else if(arguments.length===2){var i=arguments[0],r=arguments[1]}},interfaces_:function t(){return[]},getClass:function t(){return nt}});function it(){}$(it.prototype,{filter:function t(e){},interfaces_:function t(){return[]},getClass:function t(){return it}});function rt(){this._minx=null;this._maxx=null;this._miny=null;this._maxy=null;if(arguments.length===0){this.init()}else if(arguments.length===1){if(arguments[0]instanceof Q){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof rt){var e=arguments[0];this.init(e)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(arguments.length===4){var r=arguments[0],a=arguments[1],o=arguments[2],s=arguments[3];this.init(r,a,o,s)}}$(rt.prototype,{getArea:function t(){return this.getWidth()*this.getHeight()},equals:function t(e){if(!(e instanceof rt)){return false}var n=e;if(this.isNull()){return n.isNull()}return this._maxx===n.getMaxX()&&this._maxy===n.getMaxY()&&this._minx===n.getMinX()&&this._miny===n.getMinY()},intersection:function t(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new rt;var n=this._minx>e._minx?this._minx:e._minx;var i=this._miny>e._miny?this._miny:e._miny;var r=this._maxx<e._maxx?this._maxx:e._maxx;var a=this._maxy<e._maxy?this._maxy:e._maxy;return new rt(n,r,i,a)},isNull:function t(){return this._maxx<this._minx},getMaxX:function t(){return this._maxx},covers:function t(){if(arguments.length===1){if(arguments[0]instanceof Q){var e=arguments[0];return this.covers(e.x,e.y)}else if(arguments[0]instanceof rt){var n=arguments[0];if(this.isNull()||n.isNull()){return false}return n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(arguments.length===2){var i=arguments[0],r=arguments[1];if(this.isNull())return false;return i>=this._minx&&i<=this._maxx&&r>=this._miny&&r<=this._maxy}},intersects:function t(){if(arguments.length===1){if(arguments[0]instanceof rt){var e=arguments[0];if(this.isNull()||e.isNull()){return false}return!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}else if(arguments[0]instanceof Q){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(arguments.length===2){if(arguments[0]instanceof Q&&arguments[1]instanceof Q){var i=arguments[0],r=arguments[1];if(this.isNull()){return false}var a=i.x<r.x?i.x:r.x;if(a>this._maxx)return false;var o=i.x>r.x?i.x:r.x;if(o<this._minx)return false;var s=i.y<r.y?i.y:r.y;if(s>this._maxy)return false;var l=i.y>r.y?i.y:r.y;if(l<this._miny)return false;return true}else if(typeof arguments[0]==="number"&&typeof arguments[1]==="number"){var u=arguments[0],c=arguments[1];if(this.isNull())return false;return!(u>this._maxx||u<this._minx||c>this._maxy||c<this._miny)}}},getMinY:function t(){return this._miny},getMinX:function t(){return this._minx},expandToInclude:function t(){if(arguments.length===1){if(arguments[0]instanceof Q){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof rt){var n=arguments[0];if(n.isNull()){return null}if(this.isNull()){this._minx=n.getMinX();this._maxx=n.getMaxX();this._miny=n.getMinY();this._maxy=n.getMaxY()}else{if(n._minx<this._minx){this._minx=n._minx}if(n._maxx>this._maxx){this._maxx=n._maxx}if(n._miny<this._miny){this._miny=n._miny}if(n._maxy>this._maxy){this._maxy=n._maxy}}}}else if(arguments.length===2){var i=arguments[0],r=arguments[1];if(this.isNull()){this._minx=i;this._maxx=i;this._miny=r;this._maxy=r}else{if(i<this._minx){this._minx=i}if(i>this._maxx){this._maxx=i}if(r<this._miny){this._miny=r}if(r>this._maxy){this._maxy=r}}}},minExtent:function t(){if(this.isNull())return 0;var e=this.getWidth();var n=this.getHeight();if(e<n)return e;return n},getWidth:function t(){if(this.isNull()){return 0}return this._maxx-this._minx},compareTo:function t(e){var n=e;if(this.isNull()){if(n.isNull())return 0;return-1}else{if(n.isNull())return 1}if(this._minx<n._minx)return-1;if(this._minx>n._minx)return 1;if(this._miny<n._miny)return-1;if(this._miny>n._miny)return 1;if(this._maxx<n._maxx)return-1;if(this._maxx>n._maxx)return 1;if(this._maxy<n._maxy)return-1;if(this._maxy>n._maxy)return 1;return 0},translate:function t(e,n){if(this.isNull()){return null}this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+n,this.getMaxY()+n)},toString:function t(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},setToNull:function t(){this._minx=0;this._maxx=-1;this._miny=0;this._maxy=-1},getHeight:function t(){if(this.isNull()){return 0}return this._maxy-this._miny},maxExtent:function t(){if(this.isNull())return 0;var e=this.getWidth();var n=this.getHeight();if(e>n)return e;return n},expandBy:function t(){if(arguments.length===1){var e=arguments[0];this.expandBy(e,e)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];if(this.isNull())return null;this._minx-=n;this._maxx+=n;this._miny-=i;this._maxy+=i;if(this._minx>this._maxx||this._miny>this._maxy)this.setToNull()}},contains:function t(){if(arguments.length===1){if(arguments[0]instanceof rt){var e=arguments[0];return this.covers(e)}else if(arguments[0]instanceof Q){var n=arguments[0];return this.covers(n)}}else if(arguments.length===2){var i=arguments[0],r=arguments[1];return this.covers(i,r)}},centre:function t(){if(this.isNull())return null;return new Q((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function t(){if(arguments.length===0){this.setToNull()}else if(arguments.length===1){if(arguments[0]instanceof Q){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof rt){var n=arguments[0];this._minx=n._minx;this._maxx=n._maxx;this._miny=n._miny;this._maxy=n._maxy}}else if(arguments.length===2){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(arguments.length===4){var a=arguments[0],o=arguments[1],s=arguments[2],l=arguments[3];if(a<o){this._minx=a;this._maxx=o}else{this._minx=o;this._maxx=a}if(s<l){this._miny=s;this._maxy=l}else{this._miny=l;this._maxy=s}}},getMaxY:function t(){return this._maxy},distance:function t(e){if(this.intersects(e))return 0;var n=0;if(this._maxx<e._minx)n=e._minx-this._maxx;else if(this._minx>e._maxx)n=this._minx-e._maxx;var i=0;if(this._maxy<e._miny)i=e._miny-this._maxy;else if(this._miny>e._maxy)i=this._miny-e._maxy;if(n===0)return i;if(i===0)return n;return Math.sqrt(n*n+i*i)},hashCode:function t(){var e=17;e=37*e+Q.hashCode(this._minx);e=37*e+Q.hashCode(this._maxx);e=37*e+Q.hashCode(this._miny);e=37*e+Q.hashCode(this._maxy);return e},interfaces_:function t(){return[H,W]},getClass:function t(){return rt}});rt.intersects=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2];if(n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)){return true}return false}else if(arguments.length===4){var i=arguments[0],r=arguments[1],a=arguments[2],o=arguments[3];var s=Math.min(a.x,o.x);var l=Math.max(a.x,o.x);var u=Math.min(i.x,r.x);var c=Math.max(i.x,r.x);if(u>l)return false;if(c<s)return false;s=Math.min(a.y,o.y);l=Math.max(a.y,o.y);u=Math.min(i.y,r.y);c=Math.max(i.y,r.y);if(u>l)return false;if(c<s)return false;return true}};rt.serialVersionUID=0x51845cd552189800;function at(){this._envelope=null;this._factory=null;this._SRID=null;this._userData=null;var t=arguments[0];this._factory=t;this._SRID=t.getSRID()}$(at.prototype,{isGeometryCollection:function t(){return this.getTypeCode()===at.TYPECODE_GEOMETRYCOLLECTION},getFactory:function t(){return this._factory},getGeometryN:function t(e){return this},getArea:function t(){return 0},isRectangle:function t(){return false},equals:function t(){if(arguments[0]instanceof at){var e=arguments[0];if(e===null)return false;return this.equalsTopo(e)}else if(arguments[0]instanceof Object){var n=arguments[0];if(!(n instanceof at))return false;var i=n;return this.equalsExact(i)}},equalsExact:function t(e){return this===e||this.equalsExact(e,0)},geometryChanged:function t(){this.apply(at.geometryChangedFilter)},geometryChangedAction:function t(){this._envelope=null},equalsNorm:function t(e){if(e===null)return false;return this.norm().equalsExact(e.norm())},getLength:function t(){return 0},getNumGeometries:function t(){return 1},compareTo:function t(){if(arguments.length===1){var e=arguments[0];var n=e;if(this.getTypeCode()!==n.getTypeCode()){return this.getTypeCode()-n.getTypeCode()}if(this.isEmpty()&&n.isEmpty()){return 0}if(this.isEmpty()){return-1}if(n.isEmpty()){return 1}return this.compareToSameClass(e)}else if(arguments.length===2){var i=arguments[0],r=arguments[1];var n=i;if(this.getTypeCode()!==n.getTypeCode()){return this.getTypeCode()-n.getTypeCode()}if(this.isEmpty()&&n.isEmpty()){return 0}if(this.isEmpty()){return-1}if(n.isEmpty()){return 1}return this.compareToSameClass(i,r)}},getUserData:function t(){return this._userData},getSRID:function t(){return this._SRID},getEnvelope:function t(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function t(e){if(e.getTypeCode()===at.TYPECODE_GEOMETRYCOLLECTION){throw new U("This method does not support GeometryCollection arguments")}},equal:function t(e,n,i){if(i===0){return e.equals(n)}return e.distance(n)<=i},norm:function t(){var e=this.copy();e.normalize();return e},getPrecisionModel:function t(){return this._factory.getPrecisionModel()},getEnvelopeInternal:function t(){if(this._envelope===null){this._envelope=this.computeEnvelopeInternal()}return new rt(this._envelope)},setSRID:function t(e){this._SRID=e},setUserData:function t(e){this._userData=e},compare:function t(e,n){var i=e.iterator();var r=n.iterator();while(i.hasNext()&&r.hasNext()){var a=i.next();var o=r.next();var s=a.compareTo(o);if(s!==0){return s}}if(i.hasNext()){return 1}if(r.hasNext()){return-1}return 0},hashCode:function t(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function t(){if(this.getTypeCode()===at.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===at.TYPECODE_MULTIPOINT||this.getTypeCode()===at.TYPECODE_MULTILINESTRING||this.getTypeCode()===at.TYPECODE_MULTIPOLYGON){return true}return false},interfaces_:function t(){return[z,H,W]},getClass:function t(){return at}});at.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++){if(!t[e].isEmpty()){return true}}return false};at.hasNullElements=function(t){for(var e=0;e<t.length;e++){if(t[e]===null){return true}}return false};at.serialVersionUID=0x799ea46522854c00;at.TYPECODE_POINT=0;at.TYPECODE_MULTIPOINT=1;at.TYPECODE_LINESTRING=2;at.TYPECODE_LINEARRING=3;at.TYPECODE_MULTILINESTRING=4;at.TYPECODE_POLYGON=5;at.TYPECODE_MULTIPOLYGON=6;at.TYPECODE_GEOMETRYCOLLECTION=7;at.TYPENAME_POINT="Point";at.TYPENAME_MULTIPOINT="MultiPoint";at.TYPENAME_LINESTRING="LineString";at.TYPENAME_LINEARRING="LinearRing";at.TYPENAME_MULTILINESTRING="MultiLineString";at.TYPENAME_POLYGON="Polygon";at.TYPENAME_MULTIPOLYGON="MultiPolygon";at.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection";at.geometryChangedFilter={interfaces_:function t(){return[it]},filter:function t(e){e.geometryChangedAction()}};function ot(){}$(ot.prototype,{filter:function t(e){},interfaces_:function t(){return[]},getClass:function t(){return ot}});function st(){}$(st.prototype,{isInBoundary:function t(e){},interfaces_:function t(){return[]},getClass:function t(){return st}});function lt(){}$(lt.prototype,{isInBoundary:function t(e){return e%2===1},interfaces_:function t(){return[st]},getClass:function t(){return lt}});function ut(){}$(ut.prototype,{isInBoundary:function t(e){return e>0},interfaces_:function t(){return[st]},getClass:function t(){return ut}});function ct(){}$(ct.prototype,{isInBoundary:function t(e){return e>1},interfaces_:function t(){return[st]},getClass:function t(){return ct}});function ft(){}$(ft.prototype,{isInBoundary:function t(e){return e===1},interfaces_:function t(){return[st]},getClass:function t(){return ft}});st.Mod2BoundaryNodeRule=lt;st.EndPointBoundaryNodeRule=ut;st.MultiValentEndPointBoundaryNodeRule=ct;st.MonoValentEndPointBoundaryNodeRule=ft;st.MOD2_BOUNDARY_RULE=new lt;st.ENDPOINT_BOUNDARY_RULE=new ut;st.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new ct;st.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new ft;st.OGC_SFS_BOUNDARY_RULE=st.MOD2_BOUNDARY_RULE;function ht(){}ht.prototype.hasNext=function(){};ht.prototype.next=function(){};ht.prototype.remove=function(){};function dt(){}dt.prototype.add=function(){};dt.prototype.addAll=function(){};dt.prototype.isEmpty=function(){};dt.prototype.iterator=function(){};dt.prototype.size=function(){};dt.prototype.toArray=function(){};dt.prototype.remove=function(){};function pt(t){this.message=t||""}pt.prototype=new Error;pt.prototype.name="IndexOutOfBoundsException";function vt(){}vt.prototype=Object.create(dt.prototype);vt.prototype.constructor=vt;vt.prototype.get=function(){};vt.prototype.set=function(){};vt.prototype.isEmpty=function(){};function gt(t){this.message=t||""}gt.prototype=new Error;gt.prototype.name="NoSuchElementException";function mt(t){this.message=t||""}mt.prototype=new Error;mt.prototype.name="OperationNotSupported";function _t(){this.array_=[];if(arguments[0]instanceof dt){this.addAll(arguments[0])}}_t.prototype=Object.create(vt.prototype);_t.prototype.constructor=_t;_t.prototype.ensureCapacity=function(){};_t.prototype.interfaces_=function(){return[vt,dt]};_t.prototype.add=function(t){if(arguments.length===1){this.array_.push(t)}else{this.array_.splice(arguments[0],0,arguments[1])}return true};_t.prototype.clear=function(){this.array_=[]};_t.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();){this.add(e.next())}return true};_t.prototype.set=function(t,e){var n=this.array_[t];this.array_[t]=e;return n};_t.prototype.iterator=function(){return new yt(this)};_t.prototype.get=function(t){if(t<0||t>=this.size()){throw new pt}return this.array_[t]};_t.prototype.isEmpty=function(){return this.array_.length===0};_t.prototype.size=function(){return this.array_.length};_t.prototype.toArray=function(){var t=[];for(var e=0,n=this.array_.length;e<n;e++){t.push(this.array_[e])}return t};_t.prototype.remove=function(t){var e=false;for(var n=0,i=this.array_.length;n<i;n++){if(this.array_[n]===t){this.array_.splice(n,1);e=true;break}}return e};var yt=function t(e){this.arrayList_=e;this.position_=0};yt.prototype.next=function(){if(this.position_===this.arrayList_.size()){throw new gt}return this.arrayList_.get(this.position_++)};yt.prototype.hasNext=function(){if(this.position_<this.arrayList_.size()){return true}else{return false}};yt.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)};yt.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))};function bt(){_t.apply(this);if(arguments.length===0){}else if(arguments.length===1){var t=arguments[0];this.ensureCapacity(t.length);this.add(t,true)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length);this.add(e,n)}}X(bt,_t);$(bt.prototype,{getCoordinate:function t(e){return this.get(e)},addAll:function t(){if(arguments.length===2&&typeof arguments[1]==="boolean"&&tt(arguments[0],dt)){var e=arguments[0],n=arguments[1];var i=false;for(var r=e.iterator();r.hasNext();){this.add(r.next(),n);i=true}return i}else return _t.prototype.addAll.apply(this,arguments)},clone:function t(){var t=_t.prototype.clone.call(this);for(var e=0;e<this.size();e++){t.add(e,this.get(e).clone())}return t},toCoordinateArray:function t(){return this.toArray(bt.coordArrayType)},add:function t(){if(arguments.length===1){var e=arguments[0];_t.prototype.add.call(this,e)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]==="boolean"){var n=arguments[0],i=arguments[1];this.add(n,i,true);return true}else if(arguments[0]instanceof Q&&typeof arguments[1]==="boolean"){var r=arguments[0],a=arguments[1];if(!a){if(this.size()>=1){var o=this.get(this.size()-1);if(o.equals2D(r))return null}}_t.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&typeof arguments[1]==="boolean"){var s=arguments[0],l=arguments[1];this.add(s,l);return true}}else if(arguments.length===3){if(typeof arguments[2]==="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]==="boolean"){var u=arguments[0],c=arguments[1],f=arguments[2];if(f){for(var h=0;h<u.length;h++){this.add(u[h],c)}}else{for(var h=u.length-1;h>=0;h--){this.add(u[h],c)}}return true}else if(typeof arguments[2]==="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Q){var d=arguments[0],p=arguments[1],v=arguments[2];if(!v){var g=this.size();if(g>0){if(d>0){var m=this.get(d-1);if(m.equals2D(p))return null}if(d<g){var _=this.get(d);if(_.equals2D(p))return null}}}_t.prototype.add.call(this,d,p)}}else if(arguments.length===4){var y=arguments[0],b=arguments[1],w=arguments[2],x=arguments[3];var S=1;if(w>x)S=-1;for(var h=w;h!==x;h+=S){this.add(y[h],b)}return true}},closeRing:function t(){if(this.size()>0)this.add(new Q(this.get(0)),false)},interfaces_:function t(){return[]},getClass:function t(){return bt}});bt.coordArrayType=new Array(0).fill(null);function wt(){}$(wt.prototype,{interfaces_:function t(){return[]},getClass:function t(){return wt}});wt.log10=function(t){var e=Math.log(t);if(V.isInfinite(e))return e;if(V.isNaN(e))return e;return e/wt.LOG_10};wt.min=function(t,e,n,i){var r=t;if(e<r)r=e;if(n<r)r=n;if(i<r)r=i;return r};wt.clamp=function(){if(typeof arguments[2]==="number"&&typeof arguments[0]==="number"&&typeof arguments[1]==="number"){var t=arguments[0],e=arguments[1],n=arguments[2];if(t<e)return e;if(t>n)return n;return t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],a=arguments[2];if(i<r)return r;if(i>a)return a;return i}};wt.wrap=function(t,e){if(t<0){return e- -t%e}return t%e};wt.max=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2];var i=t;if(e>i)i=e;if(n>i)i=n;return i}else if(arguments.length===4){var r=arguments[0],a=arguments[1],o=arguments[2],s=arguments[3];var i=r;if(a>i)i=a;if(o>i)i=o;if(s>i)i=s;return i}};wt.average=function(t,e){return(t+e)/2};wt.LOG_10=Math.log(10);function xt(){}xt.arraycopy=function(t,e,n,i,r){var a=0;for(var o=e;o<e+r;o++){n[i+a]=t[o];a++}};xt.getProperty=function(t){return{"line.separator":"\n"}[t]};function St(){}$(St.prototype,{interfaces_:function t(){return[]},getClass:function t(){return St}});St.isRing=function(t){if(t.length<4)return false;if(!t[0].equals2D(t[t.length-1]))return false;return true};St.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(St.indexOf(i,e)<0)return i}return null};St.scroll=function(t,e){var n=St.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);xt.arraycopy(t,n,i,0,t.length-n);xt.arraycopy(t,0,i,t.length-n,n);xt.arraycopy(i,0,t,0,t.length)};St.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return true;if(t===null||e===null)return false;if(t.length!==e.length)return false;for(var n=0;n<t.length;n++){if(!t[n].equals(e[n]))return false}return true}else if(arguments.length===3){var i=arguments[0],r=arguments[1],a=arguments[2];if(i===r)return true;if(i===null||r===null)return false;if(i.length!==r.length)return false;for(var n=0;n<i.length;n++){if(a.compare(i[n],r[n])!==0)return false}return true}};St.intersection=function(t,e){var n=new bt;for(var i=0;i<t.length;i++){if(e.intersects(t[i]))n.add(t[i],true)}return n.toCoordinateArray()};St.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++){if(t[e-1].equals(t[e])){return true}}return false};St.removeRepeatedPoints=function(t){if(!St.hasRepeatedPoints(t))return t;var e=new bt(t,false);return e.toCoordinateArray()};St.reverse=function(t){var e=t.length-1;var n=Math.trunc(e/2);for(var i=0;i<=n;i++){var r=t[i];t[i]=t[e-i];t[e-i]=r}};St.removeNull=function(t){var e=0;for(var n=0;n<t.length;n++){if(t[n]!==null)e++}var i=new Array(e).fill(null);if(e===0)return i;var r=0;for(var n=0;n<t.length;n++){if(t[n]!==null)i[r++]=t[n]}return i};St.copyDeep=function(){if(arguments.length===1){var t=arguments[0];var e=new Array(t.length).fill(null);for(var n=0;n<t.length;n++){e[n]=new Q(t[n])}return e}else if(arguments.length===5){var i=arguments[0],r=arguments[1],a=arguments[2],o=arguments[3],s=arguments[4];for(var n=0;n<s;n++){a[o+n]=new Q(i[r+n])}}};St.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];var r=e[t.length-n-1];if(i.compareTo(r)!==0)return false}return true};St.envelope=function(t){var e=new rt;for(var n=0;n<t.length;n++){e.expandToInclude(t[n])}return e};St.toCoordinateArray=function(t){return t.toArray(St.coordArrayType)};St.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]};St.indexOf=function(t,e){for(var n=0;n<e.length;n++){if(t.equals(e[n])){return n}}return-1};St.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e;var i=t[e].compareTo(t[n]);if(i!==0)return i}return 1};St.compare=function(t,e){var n=0;while(n<t.length&&n<e.length){var i=t[n].compareTo(e[n]);if(i!==0)return i;n++}if(n<e.length)return-1;if(n<t.length)return 1;return 0};St.minCoordinate=function(t){var e=null;for(var n=0;n<t.length;n++){if(e===null||e.compareTo(t[n])>0){e=t[n]}}return e};St.extract=function(t,e,n){e=wt.clamp(e,0,t.length);n=wt.clamp(n,-1,t.length);var i=n-e+1;if(n<0)i=0;if(e>=t.length)i=0;if(n<e)i=0;var r=new Array(i).fill(null);if(i===0)return r;var a=0;for(var o=e;o<=n;o++){r[a++]=t[o]}return r};function Ct(){}$(Ct.prototype,{compare:function t(e,n){var i=e;var r=n;return St.compare(i,r)},interfaces_:function t(){return[B]},getClass:function t(){return Ct}});function Et(){}$(Et.prototype,{compare:function t(e,n){var i=e;var r=n;if(i.length<r.length)return-1;if(i.length>r.length)return 1;if(i.length===0)return 0;var a=St.compare(i,r);var o=St.isEqualReversed(i,r);if(o)return 0;return a},OLDcompare:function t(e,n){var i=e;var r=n;if(i.length<r.length)return-1;if(i.length>r.length)return 1;if(i.length===0)return 0;var a=St.increasingDirection(i);var o=St.increasingDirection(r);var s=a>0?0:i.length-1;var l=o>0?0:i.length-1;for(var u=0;u<i.length;u++){var c=i[s].compareTo(r[l]);if(c!==0)return c;s+=a;l+=o}return 0},interfaces_:function t(){return[B]},getClass:function t(){return Et}});St.ForwardComparator=Ct;St.BidirectionalComparator=Et;St.coordArrayType=new Array(0).fill(null);function Ot(){}Ot.prototype.get=function(){};Ot.prototype.put=function(){};Ot.prototype.size=function(){};Ot.prototype.values=function(){};Ot.prototype.entrySet=function(){};function Tt(){}Tt.prototype=new Ot;function Mt(){}Mt.prototype=new dt;Mt.prototype.contains=function(){};function It(){this.array_=[];if(arguments[0]instanceof dt){this.addAll(arguments[0])}}It.prototype=new Mt;It.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){var i=this.array_[e];if(i===t){return true}}return false};It.prototype.add=function(t){if(this.contains(t)){return false}this.array_.push(t);return true};It.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();){this.add(e.next())}return true};It.prototype.remove=function(t){throw new javascript.util.OperationNotSupported};It.prototype.size=function(){return this.array_.length};It.prototype.isEmpty=function(){return this.array_.length===0};It.prototype.toArray=function(){var t=[];for(var e=0,n=this.array_.length;e<n;e++){t.push(this.array_[e])}return t};It.prototype.iterator=function(){return new Rt(this)};var Rt=function t(e){this.hashSet_=e;this.position_=0};Rt.prototype.next=function(){if(this.position_===this.hashSet_.size()){throw new gt}return this.hashSet_.array_[this.position_++]};Rt.prototype.hasNext=function(){if(this.position_<this.hashSet_.size()){return true}else{return false}};Rt.prototype.remove=function(){throw new mt};var Nt=0;var At=1;function Lt(t){return t==null?Nt:t.color}function Pt(t){return t==null?null:t.parent}function Dt(t,e){if(t!==null)t.color=e}function jt(t){return t==null?null:t.left}function kt(t){return t==null?null:t.right}function Ft(){this.root_=null;this.size_=0}Ft.prototype=new Tt;Ft.prototype.get=function(t){var e=this.root_;while(e!==null){var n=t["compareTo"](e.key);if(n<0){e=e.left}else if(n>0){e=e.right}else{return e.value}}return null};Ft.prototype.put=function(t,e){if(this.root_===null){this.root_={key:t,value:e,left:null,right:null,parent:null,color:Nt,getValue:function t(){return this.value},getKey:function t(){return this.key}};this.size_=1;return null}var n=this.root_,i,r;do{i=n;r=t["compareTo"](n.key);if(r<0){n=n.left}else if(r>0){n=n.right}else{var a=n.value;n.value=e;return a}}while(n!==null);var o={key:t,left:null,right:null,value:e,parent:i,color:Nt,getValue:function t(){return this.value},getKey:function t(){return this.key}};if(r<0){i.left=o}else{i.right=o}this.fixAfterInsertion(o);this.size_++;return null};Ft.prototype.fixAfterInsertion=function(t){t.color=At;while(t!=null&&t!=this.root_&&t.parent.color==At){if(Pt(t)==jt(Pt(Pt(t)))){var e=kt(Pt(Pt(t)));if(Lt(e)==At){Dt(Pt(t),Nt);Dt(e,Nt);Dt(Pt(Pt(t)),At);t=Pt(Pt(t))}else{if(t==kt(Pt(t))){t=Pt(t);this.rotateLeft(t)}Dt(Pt(t),Nt);Dt(Pt(Pt(t)),At);this.rotateRight(Pt(Pt(t)))}}else{var e=jt(Pt(Pt(t)));if(Lt(e)==At){Dt(Pt(t),Nt);Dt(e,Nt);Dt(Pt(Pt(t)),At);t=Pt(Pt(t))}else{if(t==jt(Pt(t))){t=Pt(t);this.rotateRight(t)}Dt(Pt(t),Nt);Dt(Pt(Pt(t)),At);this.rotateLeft(Pt(Pt(t)))}}}this.root_.color=Nt};Ft.prototype.values=function(){var t=new _t;var e=this.getFirstEntry();if(e!==null){t.add(e.value);while((e=Ft.successor(e))!==null){t.add(e.value)}}return t};Ft.prototype.entrySet=function(){var t=new It;var e=this.getFirstEntry();if(e!==null){t.add(e);while((e=Ft.successor(e))!==null){t.add(e)}}return t};Ft.prototype.rotateLeft=function(t){if(t!=null){var e=t.right;t.right=e.left;if(e.left!=null)e.left.parent=t;e.parent=t.parent;if(t.parent==null)this.root_=e;else if(t.parent.left==t)t.parent.left=e;else t.parent.right=e;e.left=t;t.parent=e}};Ft.prototype.rotateRight=function(t){if(t!=null){var e=t.left;t.left=e.right;if(e.right!=null)e.right.parent=t;e.parent=t.parent;if(t.parent==null)this.root_=e;else if(t.parent.right==t)t.parent.right=e;else t.parent.left=e;e.right=t;t.parent=e}};Ft.prototype.getFirstEntry=function(){var t=this.root_;if(t!=null){while(t.left!=null){t=t.left}}return t};Ft.successor=function(t){if(t===null)return null;else if(t.right!==null){var e=t.right;while(e.left!==null){e=e.left}return e}else{var e=t.parent;var n=t;while(e!==null&&n===e.right){n=e;e=e.parent}return e}};Ft.prototype.size=function(){return this.size_};function $t(){}$($t.prototype,{interfaces_:function t(){return[]},getClass:function t(){return $t}});function Gt(){}Gt.prototype=new Mt;function Ut(){this.array_=[];if(arguments[0]instanceof dt){this.addAll(arguments[0])}}Ut.prototype=new Gt;Ut.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){var i=this.array_[e];if(i["compareTo"](t)===0){return true}}return false};Ut.prototype.add=function(t){if(this.contains(t)){return false}for(var e=0,n=this.array_.length;e<n;e++){var i=this.array_[e];if(i["compareTo"](t)===1){this.array_.splice(e,0,t);return true}}this.array_.push(t);return true};Ut.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();){this.add(e.next())}return true};Ut.prototype.remove=function(t){throw new mt};Ut.prototype.size=function(){return this.array_.length};Ut.prototype.isEmpty=function(){return this.array_.length===0};Ut.prototype.toArray=function(){var t=[];for(var e=0,n=this.array_.length;e<n;e++){t.push(this.array_[e])}return t};Ut.prototype.iterator=function(){return new Yt(this)};var Yt=function t(e){this.treeSet_=e;this.position_=0};Yt.prototype.next=function(){if(this.position_===this.treeSet_.size()){throw new gt}return this.treeSet_.array_[this.position_++]};Yt.prototype.hasNext=function(){if(this.position_<this.treeSet_.size()){return true}else{return false}};Yt.prototype.remove=function(){throw new mt};function Vt(){}Vt.sort=function(){var t=arguments[0],e,n,i,r;if(arguments.length===1){r=function t(e,n){return e.compareTo(n)};t.sort(r);return}else if(arguments.length===2){i=arguments[1];r=function t(e,n){return i["compare"](e,n)};t.sort(r)}else if(arguments.length===3){n=t.slice(arguments[1],arguments[2]);n.sort();var a=t.slice(0,arguments[1]).concat(n,t.slice(arguments[2],t.length));t.splice(0,t.length);for(e=0;e<a.length;e++){t.push(a[e])}return}else if(arguments.length===4){n=t.slice(arguments[1],arguments[2]);i=arguments[3];r=function t(e,n){return i["compare"](e,n)};n.sort(r);a=t.slice(0,arguments[1]).concat(n,t.slice(arguments[2],t.length));t.splice(0,t.length);for(e=0;e<a.length;e++){t.push(a[e])}return}};Vt.asList=function(t){var e=new _t;for(var n=0,i=t.length;n<i;n++){e.add(t[n])}return e};function Ht(){}Ht.isWhitespace=function(t){return t<=32&&t>=0||t==127};Ht.toUpperCase=function(t){return t.toUpperCase()};function zt(){}$(zt.prototype,{interfaces_:function t(){return[]},getClass:function t(){return zt}});zt.toDimensionSymbol=function(t){switch(t){case zt.FALSE:return zt.SYM_FALSE;case zt.TRUE:return zt.SYM_TRUE;case zt.DONTCARE:return zt.SYM_DONTCARE;case zt.P:return zt.SYM_P;case zt.L:return zt.SYM_L;case zt.A:return zt.SYM_A}throw new U("Unknown dimension value: "+t)};zt.toDimensionValue=function(t){switch(Ht.toUpperCase(t)){case zt.SYM_FALSE:return zt.FALSE;case zt.SYM_TRUE:return zt.TRUE;case zt.SYM_DONTCARE:return zt.DONTCARE;case zt.SYM_P:return zt.P;case zt.SYM_L:return zt.L;case zt.SYM_A:return zt.A}throw new U("Unknown dimension symbol: "+t)};zt.P=0;zt.L=1;zt.A=2;zt.FALSE=-1;zt.TRUE=-2;zt.DONTCARE=-3;zt.SYM_FALSE="F";zt.SYM_TRUE="T";zt.SYM_DONTCARE="*";zt.SYM_P="0";zt.SYM_L="1";zt.SYM_A="2";function Bt(){}$(Bt.prototype,{filter:function t(e){},interfaces_:function t(){return[]},getClass:function t(){return Bt}});function Wt(){}$(Wt.prototype,{filter:function t(e,n){},isDone:function t(){},isGeometryChanged:function t(){},interfaces_:function t(){return[]},getClass:function t(){return Wt}});function qt(){this._geometries=null;var t=arguments[0],e=arguments[1];at.call(this,e);if(t===null){t=[]}if(at.hasNullElements(t)){throw new U("geometries must not contain null elements")}this._geometries=t}X(qt,at);$(qt.prototype,{computeEnvelopeInternal:function t(){var e=new rt;for(var n=0;n<this._geometries.length;n++){e.expandToInclude(this._geometries[n].getEnvelopeInternal())}return e},getGeometryN:function t(e){return this._geometries[e]},getCoordinates:function t(){var e=new Array(this.getNumPoints()).fill(null);var n=-1;for(var i=0;i<this._geometries.length;i++){var r=this._geometries[i].getCoordinates();for(var a=0;a<r.length;a++){n++;e[n]=r[a]}}return e},getArea:function t(){var e=0;for(var n=0;n<this._geometries.length;n++){e+=this._geometries[n].getArea()}return e},equalsExact:function t(){if(arguments.length===2&&typeof arguments[1]==="number"&&arguments[0]instanceof at){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e)){return false}var i=e;if(this._geometries.length!==i._geometries.length){return false}for(var r=0;r<this._geometries.length;r++){if(!this._geometries[r].equalsExact(i._geometries[r],n)){return false}}return true}else return at.prototype.equalsExact.apply(this,arguments)},normalize:function t(){for(var e=0;e<this._geometries.length;e++){this._geometries[e].normalize()}Vt.sort(this._geometries)},getCoordinate:function t(){if(this.isEmpty())return null;return this._geometries[0].getCoordinate()},getBoundaryDimension:function t(){var e=zt.FALSE;for(var n=0;n<this._geometries.length;n++){e=Math.max(e,this._geometries[n].getBoundaryDimension())}return e},getTypeCode:function t(){return at.TYPECODE_GEOMETRYCOLLECTION},getDimension:function t(){var e=zt.FALSE;for(var n=0;n<this._geometries.length;n++){e=Math.max(e,this._geometries[n].getDimension())}return e},getLength:function t(){var e=0;for(var n=0;n<this._geometries.length;n++){e+=this._geometries[n].getLength()}return e},getNumPoints:function t(){var e=0;for(var n=0;n<this._geometries.length;n++){e+=this._geometries[n].getNumPoints()}return e},getNumGeometries:function t(){return this._geometries.length},reverse:function t(){var e=this._geometries.length;var n=new Array(e).fill(null);for(var i=0;i<this._geometries.length;i++){n[i]=this._geometries[i].reverse()}return this.getFactory().createGeometryCollection(n)},compareToSameClass:function t(){if(arguments.length===1){var e=arguments[0];var n=new Ut(Vt.asList(this._geometries));var i=new Ut(Vt.asList(e._geometries));return this.compare(n,i)}else if(arguments.length===2){var r=arguments[0],a=arguments[1];var o=r;var s=this.getNumGeometries();var l=o.getNumGeometries();var u=0;while(u<s&&u<l){var c=this.getGeometryN(u);var f=o.getGeometryN(u);var h=c.compareToSameClass(f,a);if(h!==0)return h;u++}if(u<s)return 1;if(u<l)return-1;return 0}},apply:function t(){if(tt(arguments[0],ot)){var e=arguments[0];for(var n=0;n<this._geometries.length;n++){this._geometries[n].apply(e)}}else if(tt(arguments[0],Wt)){var i=arguments[0];if(this._geometries.length===0)return null;for(var n=0;n<this._geometries.length;n++){this._geometries[n].apply(i);if(i.isDone()){break}}if(i.isGeometryChanged())this.geometryChanged()}else if(tt(arguments[0],Bt)){var r=arguments[0];r.filter(this);for(var n=0;n<this._geometries.length;n++){this._geometries[n].apply(r)}}else if(tt(arguments[0],it)){var a=arguments[0];a.filter(this);for(var n=0;n<this._geometries.length;n++){this._geometries[n].apply(a)}}},getBoundary:function t(){this.checkNotGeometryCollection(this);Z.shouldNeverReachHere();return null},getGeometryType:function t(){return at.TYPENAME_GEOMETRYCOLLECTION},copy:function t(){var e=new Array(this._geometries.length).fill(null);for(var n=0;n<e.length;n++){e[n]=this._geometries[n].copy()}return new qt(e,this._factory)},isEmpty:function t(){for(var e=0;e<this._geometries.length;e++){if(!this._geometries[e].isEmpty()){return false}}return true},interfaces_:function t(){return[]},getClass:function t(){return qt}});qt.serialVersionUID=-0x4f07bcb1f857d800;function Xt(){var t=arguments[0],e=arguments[1];qt.call(this,t,e)}X(Xt,qt);$(Xt.prototype,{equalsExact:function t(){if(arguments.length===2&&typeof arguments[1]==="number"&&arguments[0]instanceof at){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e)){return false}return qt.prototype.equalsExact.call(this,e,n)}else return qt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function t(){if(this.isClosed()){return zt.FALSE}return 0},isClosed:function t(){if(this.isEmpty()){return false}for(var e=0;e<this._geometries.length;e++){if(!this._geometries[e].isClosed()){return false}}return true},getTypeCode:function t(){return at.TYPECODE_MULTILINESTRING},getDimension:function t(){return 1},reverse:function t(){var e=this._geometries.length;var n=new Array(e).fill(null);for(var i=0;i<this._geometries.length;i++){n[e-1-i]=this._geometries[i].reverse()}return this.getFactory().createMultiLineString(n)},getBoundary:function t(){return new Kt(this).getBoundary()},getGeometryType:function t(){return at.TYPENAME_MULTILINESTRING},copy:function t(){var e=new Array(this._geometries.length).fill(null);for(var n=0;n<e.length;n++){e[n]=this._geometries[n].copy()}return new Xt(e,this._factory)},interfaces_:function t(){return[$t]},getClass:function t(){return Xt}});Xt.serialVersionUID=0x7155d2ab4afa8000;function Kt(){this._geom=null;this._geomFact=null;this._bnRule=null;this._endpointMap=null;if(arguments.length===1){var t=arguments[0];Kt.call(this,t,st.MOD2_BOUNDARY_RULE)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this._geom=e;this._geomFact=e.getFactory();this._bnRule=n}}$(Kt.prototype,{boundaryMultiLineString:function t(e){if(this._geom.isEmpty()){return this.getEmptyMultiPoint()}var n=this.computeBoundaryCoordinates(e);if(n.length===1){return this._geomFact.createPoint(n[0])}return this._geomFact.createMultiPointFromCoords(n)},getBoundary:function t(){if(this._geom instanceof le)return this.boundaryLineString(this._geom);if(this._geom instanceof Xt)return this.boundaryMultiLineString(this._geom);return this._geom.getBoundary()},boundaryLineString:function t(e){if(this._geom.isEmpty()){return this.getEmptyMultiPoint()}if(e.isClosed()){var n=this._bnRule.isInBoundary(2);if(n){return e.getStartPoint()}else{return this._geomFact.createMultiPoint()}}return this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])},getEmptyMultiPoint:function t(){return this._geomFact.createMultiPoint()},computeBoundaryCoordinates:function t(e){var n=new _t;this._endpointMap=new Ft;for(var i=0;i<e.getNumGeometries();i++){var r=e.getGeometryN(i);if(r.getNumPoints()===0)continue;this.addEndpoint(r.getCoordinateN(0));this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1))}for(var a=this._endpointMap.entrySet().iterator();a.hasNext();){var o=a.next();var s=o.getValue();var l=s.count;if(this._bnRule.isInBoundary(l)){n.add(o.getKey())}}return St.toCoordinateArray(n)},addEndpoint:function t(e){var n=this._endpointMap.get(e);if(n===null){n=new Zt;this._endpointMap.put(e,n)}n.count++},interfaces_:function t(){return[]},getClass:function t(){return Kt}});Kt.getBoundary=function(){if(arguments.length===1){var t=arguments[0];var e=new Kt(t);return e.getBoundary()}else if(arguments.length===2){var n=arguments[0],i=arguments[1];var e=new Kt(n,i);return e.getBoundary()}};function Zt(){this.count=null}$(Zt.prototype,{interfaces_:function t(){return[]},getClass:function t(){return Zt}});function Qt(){}$(Qt.prototype,{interfaces_:function t(){return[]},getClass:function t(){return Qt}});Qt.ofLine=function(t){var e=t.size();if(e<=1)return 0;var n=0;var i=new Q;t.getCoordinate(0,i);var r=i.x;var a=i.y;for(var o=1;o<e;o++){t.getCoordinate(o,i);var s=i.x;var l=i.y;var u=s-r;var c=l-a;n+=Math.sqrt(u*u+c*c);r=s;a=l}return n};function Jt(){}function te(){}function ee(){}function ne(){}function ie(){}function re(){}function ae(){}$(ae.prototype,{interfaces_:function t(){return[]},getClass:function t(){return ae}});ae.chars=function(t,e){var n=new Array(e).fill(null);for(var i=0;i<e;i++){n[i]=t}return new String(n)};ae.getStackTrace=function(){if(arguments.length===1){var t=arguments[0];var e=new ne;var n=new Jt(e);t.printStackTrace(n);return e.toString()}else if(arguments.length===2){var i=arguments[0],r=arguments[1];var a="";var o=new te(ae.getStackTrace(i));var s=new re(o);for(var l=0;l<r;l++){try{a+=s.readLine()+ae.NEWLINE}catch(t){if(t instanceof ie){Z.shouldNeverReachHere()}else throw t}finally{}}return a}};ae.split=function(t,e){var n=e.length;var i=new _t;var r=""+t;var a=r.indexOf(e);while(a>=0){var o=r.substring(0,a);i.add(o);r=r.substring(a+n);a=r.indexOf(e)}if(r.length>0)i.add(r);var s=new Array(i.size()).fill(null);for(var l=0;l<s.length;l++){s[l]=i.get(l)}return s};ae.toString=function(){if(arguments.length===1&&typeof arguments[0]==="number"){var t=arguments[0];return ae.SIMPLE_ORDINATE_FORMAT.format(t)}};ae.spaces=function(t){return ae.chars(" ",t)};ae.NEWLINE=xt.getProperty("line.separator");ae.SIMPLE_ORDINATE_FORMAT=new ee("0.#");function oe(t){this.str=t}oe.prototype.append=function(t){this.str+=t};oe.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)};oe.prototype.toString=function(t){return this.str};function se(){}$(se.prototype,{interfaces_:function t(){return[]},getClass:function t(){return se}});se.copyCoord=function(t,e,n,i){var r=Math.min(t.getDimension(),n.getDimension());for(var a=0;a<r;a++){n.setOrdinate(i,a,t.getOrdinate(e,a))}};se.isRing=function(t){var e=t.size();if(e===0)return true;if(e<=3)return false;return t.getOrdinate(0,et.X)===t.getOrdinate(e-1,et.X)&&t.getOrdinate(0,et.Y)===t.getOrdinate(e-1,et.Y)};se.isEqual=function(t,e){var n=t.size();var i=e.size();if(n!==i)return false;var r=Math.min(t.getDimension(),e.getDimension());for(var a=0;a<n;a++){for(var o=0;o<r;o++){var s=t.getOrdinate(a,o);var l=e.getOrdinate(a,o);if(t.getOrdinate(a,o)===e.getOrdinate(a,o))continue;if(V.isNaN(s)&&V.isNaN(l))continue;return false}}return true};se.extend=function(t,e,n){var i=t.create(n,e.getDimension());var r=e.size();se.copy(e,0,i,0,r);if(r>0){for(var a=r;a<n;a++){se.copy(e,r-1,i,a,1)}}return i};se.reverse=function(t){var e=t.size()-1;var n=Math.trunc(e/2);for(var i=0;i<=n;i++){se.swap(t,i,e-i)}};se.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i));t.setOrdinate(n,i,r)}};se.copy=function(t,e,n,i,r){for(var a=0;a<r;a++){se.copyCoord(t,e+a,n,i+a)}};se.toString=function(){if(arguments.length===1&&tt(arguments[0],et)){var t=arguments[0];var e=t.size();if(e===0)return"()";var n=t.getDimension();var i=new oe;i.append("(");for(var r=0;r<e;r++){if(r>0)i.append(" ");for(var a=0;a<n;a++){if(a>0)i.append(",");i.append(ae.toString(t.getOrdinate(r,a)))}}i.append(")");return i.toString()}};se.ensureValidRing=function(t,e){var n=e.size();if(n===0)return e;if(n<=3)return se.createClosedRing(t,e,4);var i=e.getOrdinate(0,et.X)===e.getOrdinate(n-1,et.X)&&e.getOrdinate(0,et.Y)===e.getOrdinate(n-1,et.Y);if(i)return e;return se.createClosedRing(t,e,n+1)};se.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension());var r=e.size();se.copy(e,0,i,0,r);for(var a=r;a<n;a++){se.copy(e,0,i,a,1)}return i};function le(){this._points=null;var t=arguments[0],e=arguments[1];at.call(this,e);this.init(t)}X(le,at);$(le.prototype,{computeEnvelopeInternal:function t(){if(this.isEmpty()){return new rt}return this._points.expandEnvelope(new rt)},isRing:function t(){return this.isClosed()&&this.isSimple()},getCoordinates:function t(){return this._points.toCoordinateArray()},equalsExact:function t(){if(arguments.length===2&&typeof arguments[1]==="number"&&arguments[0]instanceof at){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e)){return false}var i=e;if(this._points.size()!==i._points.size()){return false}for(var r=0;r<this._points.size();r++){if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n)){return false}}return true}else return at.prototype.equalsExact.apply(this,arguments)},normalize:function t(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var n=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(n))){if(this._points.getCoordinate(e).compareTo(this._points.getCoordinate(n))>0){var i=this._points.copy();se.reverse(i);this._points=i}return null}}},getCoordinate:function t(){if(this.isEmpty())return null;return this._points.getCoordinate(0)},getBoundaryDimension:function t(){if(this.isClosed()){return zt.FALSE}return 0},isClosed:function t(){if(this.isEmpty()){return false}return this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function t(){if(this.isEmpty()){return null}return this.getPointN(this.getNumPoints()-1)},getTypeCode:function t(){return at.TYPECODE_LINESTRING},getDimension:function t(){return 1},getLength:function t(){return Qt.ofLine(this._points)},getNumPoints:function t(){return this._points.size()},reverse:function t(){var e=this._points.copy();se.reverse(e);var n=this.getFactory().createLineString(e);return n},compareToSameClass:function t(){if(arguments.length===1){var e=arguments[0];var n=e;var i=0;var r=0;while(i<this._points.size()&&r<n._points.size()){var a=this._points.getCoordinate(i).compareTo(n._points.getCoordinate(r));if(a!==0){return a}i++;r++}if(i<this._points.size()){return 1}if(r<n._points.size()){return-1}return 0}else if(arguments.length===2){var o=arguments[0],s=arguments[1];var n=o;return s.compare(this._points,n._points)}},apply:function t(){if(tt(arguments[0],ot)){var e=arguments[0];for(var n=0;n<this._points.size();n++){e.filter(this._points.getCoordinate(n))}}else if(tt(arguments[0],Wt)){var i=arguments[0];if(this._points.size()===0)return null;for(var n=0;n<this._points.size();n++){i.filter(this._points,n);if(i.isDone())break}if(i.isGeometryChanged())this.geometryChanged()}else if(tt(arguments[0],Bt)){var r=arguments[0];r.filter(this)}else if(tt(arguments[0],it)){var a=arguments[0];a.filter(this)}},getBoundary:function t(){return new Kt(this).getBoundary()},isEquivalentClass:function t(e){return e instanceof le},getCoordinateN:function t(e){return this._points.getCoordinate(e)},getGeometryType:function t(){return at.TYPENAME_LINESTRING},copy:function t(){return new le(this._points.copy(),this._factory)},getCoordinateSequence:function t(){return this._points},isEmpty:function t(){return this._points.size()===0},init:function t(e){if(e===null){e=this.getFactory().getCoordinateSequenceFactory().create([])}if(e.size()===1){throw new U("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)")}this._points=e},isCoordinate:function t(e){for(var n=0;n<this._points.size();n++){if(this._points.getCoordinate(n).equals(e)){return true}}return false},getStartPoint:function t(){if(this.isEmpty()){return null}return this.getPointN(0)},getPointN:function t(e){return this.getFactory().createPoint(this._points.getCoordinate(e))},interfaces_:function t(){return[$t]},getClass:function t(){return le}});le.serialVersionUID=0x2b2b51ba435c8e00;function ue(){}$(ue.prototype,{interfaces_:function t(){return[]},getClass:function t(){return ue}});function ce(){this._coordinates=null;var t=arguments[0],e=arguments[1];at.call(this,e);this.init(t)}X(ce,at);$(ce.prototype,{computeEnvelopeInternal:function t(){if(this.isEmpty()){return new rt}var e=new rt;e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0));return e},getCoordinates:function t(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function t(){if(arguments.length===2&&typeof arguments[1]==="number"&&arguments[0]instanceof at){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e)){return false}if(this.isEmpty()&&e.isEmpty()){return true}if(this.isEmpty()!==e.isEmpty()){return false}return this.equal(e.getCoordinate(),this.getCoordinate(),n)}else return at.prototype.equalsExact.apply(this,arguments)},normalize:function t(){},getCoordinate:function t(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},getBoundaryDimension:function t(){return zt.FALSE},getTypeCode:function t(){return at.TYPECODE_POINT},getDimension:function t(){return 0},getNumPoints:function t(){return this.isEmpty()?0:1},reverse:function t(){return this.copy()},getX:function t(){if(this.getCoordinate()===null){throw new IllegalStateException("getX called on empty Point")}return this.getCoordinate().x},compareToSameClass:function t(){if(arguments.length===1){var e=arguments[0];var n=e;return this.getCoordinate().compareTo(n.getCoordinate())}else if(arguments.length===2){var i=arguments[0],r=arguments[1];var n=i;return r.compare(this._coordinates,n._coordinates)}},apply:function t(){if(tt(arguments[0],ot)){var e=arguments[0];if(this.isEmpty()){return null}e.filter(this.getCoordinate())}else if(tt(arguments[0],Wt)){var n=arguments[0];if(this.isEmpty())return null;n.filter(this._coordinates,0);if(n.isGeometryChanged())this.geometryChanged()}else if(tt(arguments[0],Bt)){var i=arguments[0];i.filter(this)}else if(tt(arguments[0],it)){var r=arguments[0];r.filter(this)}},getBoundary:function t(){return this.getFactory().createGeometryCollection()},getGeometryType:function t(){return at.TYPENAME_POINT},copy:function t(){return new ce(this._coordinates.copy(),this._factory)},getCoordinateSequence:function t(){return this._coordinates},getY:function t(){if(this.getCoordinate()===null){throw new IllegalStateException("getY called on empty Point")}return this.getCoordinate().y},isEmpty:function t(){return this._coordinates.size()===0},init:function t(e){if(e===null){e=this.getFactory().getCoordinateSequenceFactory().create([])}Z.isTrue(e.size()<=1);this._coordinates=e},isSimple:function t(){return true},interfaces_:function t(){return[ue]},getClass:function t(){return ce}});ce.serialVersionUID=0x44077bad161cbc00;function fe(){}$(fe.prototype,{interfaces_:function t(){return[]},getClass:function t(){return fe}});fe.ofRing=function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(fe.ofRingSigned(t))}else if(tt(arguments[0],et)){var e=arguments[0];return Math.abs(fe.ofRingSigned(e))}};fe.ofRingSigned=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;var e=0;var n=t[0].x;for(var i=1;i<t.length-1;i++){var r=t[i].x-n;var a=t[i+1].y;var o=t[i-1].y;e+=r*(o-a)}return e/2}else if(tt(arguments[0],et)){var s=arguments[0];var l=s.size();if(l<3)return 0;var u=new Q;var c=new Q;var f=new Q;s.getCoordinate(0,c);s.getCoordinate(1,f);var n=c.x;f.x-=n;var e=0;for(var i=1;i<l-1;i++){u.y=c.y;c.x=f.x;c.y=f.y;s.getCoordinate(i+1,f);f.x-=n;e+=c.x*(u.y-f.y)}return e/2}};function he(t){this.str=t}he.prototype.append=function(t){this.str+=t};he.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)};he.prototype.toString=function(t){return this.str};function de(t){this.value=t}de.prototype.intValue=function(){return this.value};de.prototype.compareTo=function(t){if(this.value<t)return-1;if(this.value>t)return 1;return 0};de.isNaN=function(t){return Number.isNaN(t)};function pe(){this._hi=0;this._lo=0;if(arguments.length===0){this.init(0)}else if(arguments.length===1){if(typeof arguments[0]==="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof pe){var e=arguments[0];this.init(e)}else if(typeof arguments[0]==="string"){var n=arguments[0];pe.call(this,pe.parse(n))}}else if(arguments.length===2){var i=arguments[0],r=arguments[1];this.init(i,r)}}$(pe.prototype,{le:function t(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<=e._lo},extractSignificantDigits:function t(e,n){var i=this.abs();var r=pe.magnitude(i._hi);var a=pe.TEN.pow(r);i=i.divide(a);if(i.gt(pe.TEN)){i=i.divide(pe.TEN);r+=1}else if(i.lt(pe.ONE)){i=i.multiply(pe.TEN);r-=1}var o=r+1;var s=new he;var l=pe.MAX_PRINT_DIGITS-1;for(var u=0;u<=l;u++){if(e&&u===o){s.append(".")}var c=Math.trunc(i._hi);if(c<0||c>9){}if(c<0){break}var f=false;var h=0;if(c>9){f=true;h="9"}else{h="0"+c}s.append(h);i=i.subtract(pe.valueOf(c)).multiply(pe.TEN);if(f)i.selfAdd(pe.TEN);var d=true;var p=pe.magnitude(i._hi);if(p<0&&Math.abs(p)>=l-u)d=false;if(!d)break}n[0]=r;return s.toString()},sqr:function t(){return this.multiply(this)},doubleValue:function t(){return this._hi+this._lo},subtract:function t(){if(arguments[0]instanceof pe){var e=arguments[0];return this.add(e.negate())}else if(typeof arguments[0]==="number"){var n=arguments[0];return this.add(-n)}},equals:function t(){if(arguments.length===1&&arguments[0]instanceof pe){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}},isZero:function t(){return this._hi===0&&this._lo===0},selfSubtract:function t(){if(arguments[0]instanceof pe){var e=arguments[0];if(this.isNaN())return this;return this.selfAdd(-e._hi,-e._lo)}else if(typeof arguments[0]==="number"){var n=arguments[0];if(this.isNaN())return this;return this.selfAdd(-n,0)}},getSpecialNumberString:function t(){if(this.isZero())return"0.0";if(this.isNaN())return"NaN ";return null},min:function t(e){if(this.le(e)){return this}else{return e}},selfDivide:function t(){if(arguments.length===1){if(arguments[0]instanceof pe){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}else if(typeof arguments[0]==="number"){var n=arguments[0];return this.selfDivide(n,0)}}else if(arguments.length===2){var i=arguments[0],r=arguments[1];var a=null,o=null,s=null,l=null,u=null,c=null,f=null,h=null;u=this._hi/i;c=pe.SPLIT*u;a=c-u;h=pe.SPLIT*i;a=c-a;o=u-a;s=h-i;f=u*i;s=h-s;l=i-s;h=a*s-f+a*l+o*s+o*l;c=(this._hi-f-h+this._lo-u*r)/i;h=u+c;this._hi=h;this._lo=u-h+c;return this}},dump:function t(){return"DD<"+this._hi+", "+this._lo+">"},divide:function t(){if(arguments[0]instanceof pe){var e=arguments[0];var n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null;o=this._hi/e._hi;s=pe.SPLIT*o;n=s-o;u=pe.SPLIT*e._hi;n=s-n;i=o-n;r=u-e._hi;l=o*e._hi;r=u-r;a=e._hi-r;u=n*r-l+n*a+i*r+i*a;s=(this._hi-l-u+this._lo-o*e._lo)/e._hi;u=o+s;var c=u;var f=o-u+s;return new pe(c,f)}else if(typeof arguments[0]==="number"){var h=arguments[0];if(V.isNaN(h))return pe.createNaN();return pe.copy(this).selfDivide(h,0)}},ge:function t(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>=e._lo},pow:function t(e){if(e===0)return pe.valueOf(1);var n=new pe(this);var i=pe.valueOf(1);var r=Math.abs(e);if(r>1){while(r>0){if(r%2===1){i.selfMultiply(n)}r/=2;if(r>0)n=n.sqr()}}else{i=n}if(e<0)return i.reciprocal();return i},ceil:function t(){if(this.isNaN())return pe.NaN;var e=Math.ceil(this._hi);var n=0;if(e===this._hi){n=Math.ceil(this._lo)}return new pe(e,n)},compareTo:function t(e){var n=e;if(this._hi<n._hi)return-1;if(this._hi>n._hi)return 1;if(this._lo<n._lo)return-1;if(this._lo>n._lo)return 1;return 0},rint:function t(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()},setValue:function t(){if(arguments[0]instanceof pe){var e=arguments[0];this.init(e);return this}else if(typeof arguments[0]==="number"){var n=arguments[0];this.init(n);return this}},max:function t(e){if(this.ge(e)){return this}else{return e}},sqrt:function t(){if(this.isZero())return pe.valueOf(0);if(this.isNegative()){return pe.NaN}var e=1/Math.sqrt(this._hi);var n=this._hi*e;var i=pe.valueOf(n);var r=this.subtract(i.sqr());var a=r._hi*(e*.5);return i.add(a)},selfAdd:function t(){if(arguments.length===1){if(arguments[0]instanceof pe){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}else if(typeof arguments[0]==="number"){var n=arguments[0];var i=null,r=null,a=null,o=null,s=null,l=null;a=this._hi+n;s=a-this._hi;o=a-s;o=n-s+(this._hi-o);l=o+this._lo;i=a+l;r=l+(a-i);this._hi=i+r;this._lo=r+(i-this._hi);return this}}else if(arguments.length===2){var u=arguments[0],c=arguments[1];var i=null,r=null,f=null,h=null,a=null,o=null,s=null,l=null;a=this._hi+u;f=this._lo+c;s=a-this._hi;l=f-this._lo;o=a-s;h=f-l;o=u-s+(this._hi-o);h=c-l+(this._lo-h);s=o+f;i=a+s;r=s+(a-i);s=h+r;var d=i+s;var p=s+(i-d);this._hi=d;this._lo=p;return this}},selfMultiply:function t(){if(arguments.length===1){if(arguments[0]instanceof pe){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}else if(typeof arguments[0]==="number"){var n=arguments[0];return this.selfMultiply(n,0)}}else if(arguments.length===2){var i=arguments[0],r=arguments[1];var a=null,o=null,s=null,l=null,u=null,c=null;u=pe.SPLIT*this._hi;a=u-this._hi;c=pe.SPLIT*i;a=u-a;o=this._hi-a;s=c-i;u=this._hi*i;s=c-s;l=i-s;c=a*s-u+a*l+o*s+o*l+(this._hi*r+this._lo*i);var f=u+c;a=u-f;var h=c+a;this._hi=f;this._lo=h;return this}},selfSqr:function t(){return this.selfMultiply(this)},floor:function t(){if(this.isNaN())return pe.NaN;var e=Math.floor(this._hi);var n=0;if(e===this._hi){n=Math.floor(this._lo)}return new pe(e,n)},negate:function t(){if(this.isNaN())return this;return new pe(-this._hi,-this._lo)},clone:function t(){try{return null}catch(t){if(t instanceof CloneNotSupportedException){return null}else throw t}finally{}},multiply:function t(){if(arguments[0]instanceof pe){var e=arguments[0];if(e.isNaN())return pe.createNaN();return pe.copy(this).selfMultiply(e)}else if(typeof arguments[0]==="number"){var n=arguments[0];if(V.isNaN(n))return pe.createNaN();return pe.copy(this).selfMultiply(n,0)}},isNaN:function t(){return V.isNaN(this._hi)},intValue:function t(){return Math.trunc(this._hi)},toString:function t(){var e=pe.magnitude(this._hi);if(e>=-3&&e<=20)return this.toStandardNotation();return this.toSciNotation()},toStandardNotation:function t(){var e=this.getSpecialNumberString();if(e!==null)return e;var n=new Array(1).fill(null);var i=this.extractSignificantDigits(true,n);var r=n[0]+1;var a=i;if(i.charAt(0)==="."){a="0"+i}else if(r<0){a="0."+pe.stringOfChar("0",-r)+i}else if(i.indexOf(".")===-1){var o=r-i.length;var s=pe.stringOfChar("0",o);a=i+s+".0"}if(this.isNegative())return"-"+a;return a},reciprocal:function t(){var e=null,n=null,i=null,r=null,a=null,o=null,s=null,l=null;a=1/this._hi;o=pe.SPLIT*a;e=o-a;l=pe.SPLIT*this._hi;e=o-e;n=a-e;i=l-this._hi;s=a*this._hi;i=l-i;r=this._hi-i;l=e*i-s+e*r+n*i+n*r;o=(1-s-l-a*this._lo)/this._hi;var u=a+o;var c=a-u+o;return new pe(u,c)},toSciNotation:function t(){if(this.isZero())return pe.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(e!==null)return e;var n=new Array(1).fill(null);var i=this.extractSignificantDigits(false,n);var r=pe.SCI_NOT_EXPONENT_CHAR+n[0];if(i.charAt(0)==="0"){throw new IllegalStateException("Found leading zero: "+i)}var a="";if(i.length>1)a=i.substring(1);var o=i.charAt(0)+"."+a;if(this.isNegative())return"-"+o+r;return o+r},abs:function t(){if(this.isNaN())return pe.NaN;if(this.isNegative())return this.negate();return new pe(this)},isPositive:function t(){return this._hi>0||this._hi===0&&this._lo>0},lt:function t(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<e._lo},add:function t(){if(arguments[0]instanceof pe){var e=arguments[0];return pe.copy(this).selfAdd(e)}else if(typeof arguments[0]==="number"){var n=arguments[0];return pe.copy(this).selfAdd(n)}},init:function t(){if(arguments.length===1){if(typeof arguments[0]==="number"){var e=arguments[0];this._hi=e;this._lo=0}else if(arguments[0]instanceof pe){var n=arguments[0];this._hi=n._hi;this._lo=n._lo}}else if(arguments.length===2){var i=arguments[0],r=arguments[1];this._hi=i;this._lo=r}},gt:function t(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>e._lo},isNegative:function t(){return this._hi<0||this._hi===0&&this._lo<0},trunc:function t(){if(this.isNaN())return pe.NaN;if(this.isPositive())return this.floor();else return this.ceil()},signum:function t(){if(this._hi>0)return 1;if(this._hi<0)return-1;if(this._lo>0)return 1;if(this._lo<0)return-1;return 0},interfaces_:function t(){return[W,H,z]},getClass:function t(){return pe}});pe.sqr=function(t){return pe.valueOf(t).selfMultiply(t)};pe.valueOf=function(){if(typeof arguments[0]==="string"){var t=arguments[0];return pe.parse(t)}else if(typeof arguments[0]==="number"){var e=arguments[0];return new pe(e)}};pe.sqrt=function(t){return pe.valueOf(t).sqrt()};pe.parse=function(t){var e=0;var n=t.length;while(Ht.isWhitespace(t.charAt(e))){e++}var i=false;if(e<n){var r=t.charAt(e);if(r==="-"||r==="+"){e++;if(r==="-")i=true}}var a=new pe;var o=0;var s=0;var l=0;while(true){if(e>=n)break;var u=t.charAt(e);e++;if(Ht.isDigit(u)){var c=u-"0";a.selfMultiply(pe.TEN);a.selfAdd(c);o++;continue}if(u==="."){s=o;continue}if(u==="e"||u==="E"){var f=t.substring(e);try{l=de.parseInt(f)}catch(e){if(e instanceof NumberFormatException){throw new NumberFormatException("Invalid exponent "+f+" in string "+t)}else throw e}finally{}break}throw new NumberFormatException("Unexpected character '"+u+"' at position "+e+" in string "+t)}var h=a;var d=o-s-l;if(d===0){h=a}else if(d>0){var p=pe.TEN.pow(d);h=a.divide(p)}else if(d<0){var p=pe.TEN.pow(-d);h=a.multiply(p)}if(i){return h.negate()}return h};pe.createNaN=function(){return new pe(V.NaN,V.NaN)};pe.copy=function(t){return new pe(t)};pe.magnitude=function(t){var e=Math.abs(t);var n=Math.log(e)/Math.log(10);var i=Math.trunc(Math.floor(n));var r=Math.pow(10,i);if(r*10<=e)i+=1;return i};pe.stringOfChar=function(t,e){var n=new he;for(var i=0;i<e;i++){n.append(t)}return n.toString()};pe.PI=new pe(3.141592653589793,1.2246467991473532e-16);pe.TWO_PI=new pe(6.283185307179586,2.4492935982947064e-16);pe.PI_2=new pe(1.5707963267948966,6.123233995736766e-17);pe.E=new pe(2.718281828459045,1.4456468917292502e-16);pe.NaN=new pe(V.NaN,V.NaN);pe.EPS=1.23259516440783e-32;pe.SPLIT=134217729;pe.MAX_PRINT_DIGITS=32;pe.TEN=pe.valueOf(10);pe.ONE=pe.valueOf(1);pe.SCI_NOT_EXPONENT_CHAR="E";pe.SCI_NOT_ZERO="0.0E0";function ve(){}$(ve.prototype,{interfaces_:function t(){return[]},getClass:function t(){return ve}});ve.orientationIndex=function(t,e,n){var i=ve.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=pe.valueOf(e.x).selfAdd(-t.x);var a=pe.valueOf(e.y).selfAdd(-t.y);var o=pe.valueOf(n.x).selfAdd(-e.x);var s=pe.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(s).selfSubtract(a.selfMultiply(o)).signum()};ve.signOfDet2x2=function(){if(arguments[0]instanceof pe){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];var r=t.multiply(i).selfSubtract(e.multiply(n));return r.signum()}else if(typeof arguments[0]==="number"){var a=arguments[0],o=arguments[1],s=arguments[2],l=arguments[3];var u=pe.valueOf(a);var c=pe.valueOf(o);var f=pe.valueOf(s);var h=pe.valueOf(l);var r=u.multiply(h).selfSubtract(c.multiply(f));return r.signum()}};ve.intersection=function(t,e,n,i){var r=pe.valueOf(i.y).selfSubtract(n.y).selfMultiply(pe.valueOf(e.x).selfSubtract(t.x));var a=pe.valueOf(i.x).selfSubtract(n.x).selfMultiply(pe.valueOf(e.y).selfSubtract(t.y));var o=r.subtract(a);var s=pe.valueOf(i.x).selfSubtract(n.x).selfMultiply(pe.valueOf(t.y).selfSubtract(n.y));var l=pe.valueOf(i.y).selfSubtract(n.y).selfMultiply(pe.valueOf(t.x).selfSubtract(n.x));var u=s.subtract(l);var c=u.selfDivide(o).doubleValue();var f=pe.valueOf(t.x).selfAdd(pe.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue();var h=pe.valueOf(e.x).selfSubtract(t.x).selfMultiply(pe.valueOf(t.y).selfSubtract(n.y));var d=pe.valueOf(e.y).selfSubtract(t.y).selfMultiply(pe.valueOf(t.x).selfSubtract(n.x));var p=h.subtract(d);var v=p.selfDivide(o).doubleValue();var g=pe.valueOf(n.y).selfAdd(pe.valueOf(i.y).selfSubtract(n.y).selfMultiply(v)).doubleValue();return new Q(f,g)};ve.orientationIndexFilter=function(t,e,n){var i=null;var r=(t.x-n.x)*(e.y-n.y);var a=(t.y-n.y)*(e.x-n.x);var o=r-a;if(r>0){if(a<=0){return ve.signum(o)}else{i=r+a}}else if(r<0){if(a>=0){return ve.signum(o)}else{i=-r-a}}else{return ve.signum(o)}var s=ve.DP_SAFE_EPSILON*i;if(o>=s||-o>=s){return ve.signum(o)}return 2};ve.signum=function(t){if(t>0)return 1;if(t<0)return-1;return 0};ve.DP_SAFE_EPSILON=1e-15;function ge(){}$(ge.prototype,{interfaces_:function t(){return[]},getClass:function t(){return ge}});ge.index=function(t,e,n){return ve.orientationIndex(t,e,n)};ge.isCCW=function(t){var e=t.length-1;if(e<3)throw new U("Ring has fewer than 4 points, so orientation cannot be determined");var n=t[0];var i=0;for(var r=1;r<=e;r++){var a=t[r];if(a.y>n.y){n=a;i=r}}var o=i;do{o=o-1;if(o<0)o=e}while(t[o].equals2D(n)&&o!==i);var s=i;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==i);var l=t[o];var u=t[s];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return false;var c=ge.index(l,n,u);var f=null;if(c===0){f=l.x>u.x}else{f=c>0}return f};ge.CLOCKWISE=-1;ge.RIGHT=ge.CLOCKWISE;ge.COUNTERCLOCKWISE=1;ge.LEFT=ge.COUNTERCLOCKWISE;ge.COLLINEAR=0;ge.STRAIGHT=ge.COLLINEAR;function me(){}$(me.prototype,{interfaces_:function t(){return[]},getClass:function t(){return me}});function _e(){this._shell=null;this._holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];at.call(this,n);if(t===null){t=this.getFactory().createLinearRing()}if(e===null){e=[]}if(at.hasNullElements(e)){throw new U("holes must not contain null elements")}if(t.isEmpty()&&at.hasNonEmptyElements(e)){throw new U("shell is empty but holes are not")}this._shell=t;this._holes=e}X(_e,at);$(_e.prototype,{computeEnvelopeInternal:function t(){return this._shell.getEnvelopeInternal()},getCoordinates:function t(){if(this.isEmpty()){return[]}var e=new Array(this.getNumPoints()).fill(null);var n=-1;var i=this._shell.getCoordinates();for(var r=0;r<i.length;r++){n++;e[n]=i[r]}for(var a=0;a<this._holes.length;a++){var o=this._holes[a].getCoordinates();for(var s=0;s<o.length;s++){n++;e[n]=o[s]}}return e},getArea:function t(){var e=0;e+=fe.ofRing(this._shell.getCoordinateSequence());for(var n=0;n<this._holes.length;n++){e-=fe.ofRing(this._holes[n].getCoordinateSequence())}return e},isRectangle:function t(){if(this.getNumInteriorRing()!==0)return false;if(this._shell===null)return false;if(this._shell.getNumPoints()!==5)return false;var e=this._shell.getCoordinateSequence();var n=this.getEnvelopeInternal();for(var i=0;i<5;i++){var r=e.getX(i);if(!(r===n.getMinX()||r===n.getMaxX()))return false;var a=e.getY(i);if(!(a===n.getMinY()||a===n.getMaxY()))return false}var o=e.getX(0);var s=e.getY(0);for(var i=1;i<=4;i++){var r=e.getX(i);var a=e.getY(i);var l=r!==o;var u=a!==s;if(l===u)return false;o=r;s=a}return true},equalsExact:function t(){if(arguments.length===2&&typeof arguments[1]==="number"&&arguments[0]instanceof at){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e)){return false}var i=e;var r=this._shell;var a=i._shell;if(!r.equalsExact(a,n)){return false}if(this._holes.length!==i._holes.length){return false}for(var o=0;o<this._holes.length;o++){if(!this._holes[o].equalsExact(i._holes[o],n)){return false}}return true}else return at.prototype.equalsExact.apply(this,arguments)},normalize:function t(){if(arguments.length===0){this.normalize(this._shell,true);for(var e=0;e<this._holes.length;e++){this.normalize(this._holes[e],false)}Vt.sort(this._holes)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];if(n.isEmpty()){return null}var r=new Array(n.getCoordinates().length-1).fill(null);xt.arraycopy(n.getCoordinates(),0,r,0,r.length);var a=St.minCoordinate(n.getCoordinates());St.scroll(r,a);xt.arraycopy(r,0,n.getCoordinates(),0,r.length);n.getCoordinates()[r.length]=r[0];if(ge.isCCW(n.getCoordinates())===i){St.reverse(n.getCoordinates())}}},getCoordinate:function t(){return this._shell.getCoordinate()},getNumInteriorRing:function t(){return this._holes.length},getBoundaryDimension:function t(){return 1},getTypeCode:function t(){return at.TYPECODE_POLYGON},getDimension:function t(){return 2},getLength:function t(){var e=0;e+=this._shell.getLength();for(var n=0;n<this._holes.length;n++){e+=this._holes[n].getLength()}return e},getNumPoints:function t(){var e=this._shell.getNumPoints();for(var n=0;n<this._holes.length;n++){e+=this._holes[n].getNumPoints()}return e},reverse:function t(){var e=this.copy();e._shell=this._shell.copy().reverse();e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++){e._holes[n]=this._holes[n].copy().reverse()}return e},convexHull:function t(){return this.getExteriorRing().convexHull()},compareToSameClass:function t(){if(arguments.length===1){var e=arguments[0];var n=this._shell;var i=e._shell;return n.compareToSameClass(i)}else if(arguments.length===2){var r=arguments[0],a=arguments[1];var o=r;var n=this._shell;var i=o._shell;var s=n.compareToSameClass(i,a);if(s!==0)return s;var l=this.getNumInteriorRing();var u=o.getNumInteriorRing();var c=0;while(c<l&&c<u){var f=this.getInteriorRingN(c);var h=o.getInteriorRingN(c);var d=f.compareToSameClass(h,a);if(d!==0)return d;c++}if(c<l)return 1;if(c<u)return-1;return 0}},apply:function t(){if(tt(arguments[0],ot)){var e=arguments[0];this._shell.apply(e);for(var n=0;n<this._holes.length;n++){this._holes[n].apply(e)}}else if(tt(arguments[0],Wt)){var i=arguments[0];this._shell.apply(i);if(!i.isDone()){for(var n=0;n<this._holes.length;n++){this._holes[n].apply(i);if(i.isDone())break}}if(i.isGeometryChanged())this.geometryChanged()}else if(tt(arguments[0],Bt)){var r=arguments[0];r.filter(this)}else if(tt(arguments[0],it)){var a=arguments[0];a.filter(this);this._shell.apply(a);for(var n=0;n<this._holes.length;n++){this._holes[n].apply(a)}}},getBoundary:function t(){if(this.isEmpty()){return this.getFactory().createMultiLineString()}var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var n=0;n<this._holes.length;n++){e[n+1]=this._holes[n]}if(e.length<=1)return this.getFactory().createLinearRing(e[0].getCoordinateSequence());return this.getFactory().createMultiLineString(e)},getGeometryType:function t(){return at.TYPENAME_POLYGON},copy:function t(){var e=this._shell.copy();var n=new Array(this._holes.length).fill(null);for(var i=0;i<this._holes.length;i++){n[i]=this._holes[i].copy()}return new _e(e,n,this._factory)},getExteriorRing:function t(){return this._shell},isEmpty:function t(){return this._shell.isEmpty()},getInteriorRingN:function t(e){return this._holes[e]},interfaces_:function t(){return[me]},getClass:function t(){return _e}});_e.serialVersionUID=-0x307ffefd8dc97200;function ye(){var t=arguments[0],e=arguments[1];qt.call(this,t,e)}X(ye,qt);$(ye.prototype,{isValid:function t(){return true},equalsExact:function t(){if(arguments.length===2&&typeof arguments[1]==="number"&&arguments[0]instanceof at){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e)){return false}return qt.prototype.equalsExact.call(this,e,n)}else return qt.prototype.equalsExact.apply(this,arguments)},getCoordinate:function t(){if(arguments.length===1&&Number.isInteger(arguments[0])){var e=arguments[0];return this._geometries[e].getCoordinate()}else return qt.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function t(){return zt.FALSE},getTypeCode:function t(){return at.TYPECODE_MULTIPOINT},getDimension:function t(){return 0},getBoundary:function t(){return this.getFactory().createGeometryCollection()},getGeometryType:function t(){return at.TYPENAME_MULTIPOINT},copy:function t(){var e=new Array(this._geometries.length).fill(null);for(var n=0;n<e.length;n++){e[n]=this._geometries[n].copy()}return new ye(e,this._factory)},interfaces_:function t(){return[ue]},getClass:function t(){return ye}});ye.serialVersionUID=-0x6fb1ed4162e0fc00;function be(){if(arguments[0]instanceof Array&&arguments[1]instanceof Ze){var t=arguments[0],e=arguments[1];be.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(tt(arguments[0],et)&&arguments[1]instanceof Ze){var n=arguments[0],i=arguments[1];le.call(this,n,i);this.validateConstruction()}}X(be,le);$(be.prototype,{getBoundaryDimension:function t(){return zt.FALSE},isClosed:function t(){if(this.isEmpty()){return true}return le.prototype.isClosed.call(this)},getTypeCode:function t(){return at.TYPECODE_LINEARRING},reverse:function t(){var e=this._points.copy();se.reverse(e);var n=this.getFactory().createLinearRing(e);return n},validateConstruction:function t(){if(!this.isEmpty()&&!le.prototype.isClosed.call(this)){throw new U("Points of LinearRing do not form a closed linestring")}if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<be.MINIMUM_VALID_SIZE){throw new U("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},getGeometryType:function t(){return at.TYPENAME_LINEARRING},copy:function t(){return new be(this._points.copy(),this._factory)},interfaces_:function t(){return[]},getClass:function t(){return be}});be.MINIMUM_VALID_SIZE=4;be.serialVersionUID=-0x3b229e262367a600;function we(){var t=arguments[0],e=arguments[1];qt.call(this,t,e)}X(we,qt);$(we.prototype,{equalsExact:function t(){if(arguments.length===2&&typeof arguments[1]==="number"&&arguments[0]instanceof at){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e)){return false}return qt.prototype.equalsExact.call(this,e,n)}else return qt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function t(){return 1},getTypeCode:function t(){return at.TYPECODE_MULTIPOLYGON},getDimension:function t(){return 2},reverse:function t(){var e=this._geometries.length;var n=new Array(e).fill(null);for(var i=0;i<this._geometries.length;i++){n[i]=this._geometries[i].reverse()}return this.getFactory().createMultiPolygon(n)},getBoundary:function t(){if(this.isEmpty()){return this.getFactory().createMultiLineString()}var e=new _t;for(var n=0;n<this._geometries.length;n++){var i=this._geometries[n];var r=i.getBoundary();for(var a=0;a<r.getNumGeometries();a++){e.add(r.getGeometryN(a))}}var o=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(o))},getGeometryType:function t(){return at.TYPENAME_MULTIPOLYGON},copy:function t(){var e=new Array(this._geometries.length).fill(null);for(var n=0;n<e.length;n++){e[n]=this._geometries[n].copy()}return new we(e,this._factory)},interfaces_:function t(){return[me]},getClass:function t(){return we}});we.serialVersionUID=-0x7a5aa1369171980;function xe(){this._factory=null;this._isUserDataCopied=false;if(arguments.length===0){}else if(arguments.length===1){var t=arguments[0];this._factory=t}}$(xe.prototype,{setCopyUserData:function t(e){this._isUserDataCopied=e},edit:function t(e,n){if(e===null)return null;var i=this.editInternal(e,n);if(this._isUserDataCopied){i.setUserData(e.getUserData())}return i},editInternal:function t(e,n){if(this._factory===null)this._factory=e.getFactory();if(e instanceof qt){return this.editGeometryCollection(e,n)}if(e instanceof _e){return this.editPolygon(e,n)}if(e instanceof ce){return n.edit(e,this._factory)}if(e instanceof le){return n.edit(e,this._factory)}Z.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName());return null},editGeometryCollection:function t(e,n){var i=n.edit(e,this._factory);var r=new _t;for(var a=0;a<i.getNumGeometries();a++){var o=this.edit(i.getGeometryN(a),n);if(o===null||o.isEmpty()){continue}r.add(o)}if(i.getClass()===ye){return this._factory.createMultiPoint(r.toArray([]))}if(i.getClass()===Xt){return this._factory.createMultiLineString(r.toArray([]))}if(i.getClass()===we){return this._factory.createMultiPolygon(r.toArray([]))}return this._factory.createGeometryCollection(r.toArray([]))},editPolygon:function t(e,n){var i=n.edit(e,this._factory);if(i===null)i=this._factory.createPolygon();if(i.isEmpty()){return i}var r=this.edit(i.getExteriorRing(),n);if(r===null||r.isEmpty()){return this._factory.createPolygon()}var a=new _t;for(var o=0;o<i.getNumInteriorRing();o++){var s=this.edit(i.getInteriorRingN(o),n);if(s===null||s.isEmpty()){continue}a.add(s)}return this._factory.createPolygon(r,a.toArray([]))},interfaces_:function t(){return[]},getClass:function t(){return xe}});function Se(){}xe.GeometryEditorOperation=Se;function Ce(){}$(Ce.prototype,{edit:function t(e,n){return e},interfaces_:function t(){return[Se]},getClass:function t(){return Ce}});function Ee(){}$(Ee.prototype,{edit:function t(e,n){var i=this.edit(e.getCoordinates(),e);if(e instanceof be){if(i===null)return n.createLinearRing();else return n.createLinearRing(i)}if(e instanceof le){if(i===null)return n.createLineString();else return n.createLineString(i)}if(e instanceof ce){if(i===null||i.length===0)return n.createPoint();else return n.createPoint(i[0])}return e},interfaces_:function t(){return[Se]},getClass:function t(){return Ee}});function Oe(){}$(Oe.prototype,{edit:function t(e,n){if(e instanceof be){return n.createLinearRing(this.edit(e.getCoordinateSequence(),e))}if(e instanceof le){return n.createLineString(this.edit(e.getCoordinateSequence(),e))}if(e instanceof ce){return n.createPoint(this.edit(e.getCoordinateSequence(),e))}return e},interfaces_:function t(){return[Se]},getClass:function t(){return Oe}});xe.NoOpGeometryOperation=Ce;xe.CoordinateOperation=Ee;xe.CoordinateSequenceOperation=Oe;function Te(){this._dimension=3;this._coordinates=null;if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];Te.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++){this._coordinates[n]=new Q}}else if(tt(arguments[0],et)){var i=arguments[0];if(i===null){this._coordinates=new Array(0).fill(null);return null}this._dimension=i.getDimension();this._coordinates=new Array(i.size()).fill(null);for(var n=0;n<this._coordinates.length;n++){this._coordinates[n]=i.getCoordinateCopy(n)}}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],a=arguments[1];this._coordinates=r;this._dimension=a;if(r===null)this._coordinates=new Array(0).fill(null)}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=new Array(o).fill(null);this._dimension=s;for(var n=0;n<o;n++){this._coordinates[n]=new Q}}}}$(Te.prototype,{setOrdinate:function t(e,n,i){switch(n){case et.X:this._coordinates[e].x=i;break;case et.Y:this._coordinates[e].y=i;break;case et.Z:this._coordinates[e].z=i;break;default:throw new U("invalid ordinateIndex")}},size:function t(){return this._coordinates.length},getOrdinate:function t(e,n){switch(n){case et.X:return this._coordinates[e].x;case et.Y:return this._coordinates[e].y;case et.Z:return this._coordinates[e].z}return V.NaN},getCoordinate:function t(){if(arguments.length===1){var e=arguments[0];return this._coordinates[e]}else if(arguments.length===2){var n=arguments[0],i=arguments[1];i.x=this._coordinates[n].x;i.y=this._coordinates[n].y;i.z=this._coordinates[n].z}},getCoordinateCopy:function t(e){return new Q(this._coordinates[e])},getDimension:function t(){return this._dimension},getX:function t(e){return this._coordinates[e].x},expandEnvelope:function t(e){for(var n=0;n<this._coordinates.length;n++){e.expandToInclude(this._coordinates[n])}return e},copy:function t(){var e=new Array(this.size()).fill(null);for(var n=0;n<this._coordinates.length;n++){e[n]=this._coordinates[n].copy()}return new Te(e,this._dimension)},toString:function t(){if(this._coordinates.length>0){var e=new oe(17*this._coordinates.length);e.append("(");e.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++){e.append(", ");e.append(this._coordinates[n])}e.append(")");return e.toString()}else{return"()"}},getY:function t(e){return this._coordinates[e].y},toCoordinateArray:function t(){return this._coordinates},interfaces_:function t(){return[et,W]},getClass:function t(){return Te}});Te.serialVersionUID=-0xcb44a778db18e00;function Me(){}$(Me.prototype,{readResolve:function t(){return Me.instance()},create:function t(){if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new Te(e)}else if(tt(arguments[0],et)){var n=arguments[0];return new Te(n)}}else if(arguments.length===2){var i=arguments[0],r=arguments[1];if(r>3)r=3;if(r<2)return new Te(i);return new Te(i,r)}},interfaces_:function t(){return[nt,W]},getClass:function t(){return Me}});Me.instance=function(){return Me.instanceObject};Me.serialVersionUID=-0x38e49fa6cf6f2e00;Me.instanceObject=new Me;var Ie;var Re=Object.defineProperty;function Ne(t,e){return t===e||t!==t&&e!==e}var Ae=Le({delete:De,has:Fe,get:je,set:$e,keys:Ue,values:Ye,entries:Ve,forEach:Be,clear:Ge});function Le(t,e){function n(t){if(!this||this.constructor!==n)return new n(t);this._keys=[];this._values=[];this._itp=[];this.objectOnly=e;if(t)Pe.call(this,t)}if(!e){Re(t,"size",{get:ze})}t.constructor=n;n.prototype=t;return n}function Pe(t){if(this.add)t.forEach(this.add,this);else t.forEach(function(t){this.set(t[0],t[1])},this)}function De(t){if(this.has(t)){this._keys.splice(Ie,1);this._values.splice(Ie,1);this._itp.forEach(function(t){if(Ie<t[0])t[0]--})}return Ie>-1}function je(t){return this.has(t)?this._values[Ie]:undefined}function ke(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!==e||e===0)for(Ie=t.length;Ie--&&!Ne(t[Ie],e);){}else Ie=t.indexOf(e);return Ie>-1}function Fe(t){return ke.call(this,this._keys,t)}function $e(t,e){this.has(t)?this._values[Ie]=e:this._values[this._keys.push(t)-1]=e;return this}function Ge(){(this._keys||0).length=this._values.length=0}function Ue(){return He(this._itp,this._keys)}function Ye(){return He(this._itp,this._values)}function Ve(){return He(this._itp,this._keys,this._values)}function He(t,e,n){var i=[0];var r=false;t.push(i);return{next:function a(){var o;var s=i[0];if(!r&&s<e.length){o=n?[e[s],n[s]]:e[s];i[0]++}else{r=true;t.splice(t.indexOf(i),1)}return{done:r,value:o}}}}function ze(){return this._values.length}function Be(t,e){var n=this.entries();for(;;){var i=n.next();if(i.done)break;t.call(e,i.value[1],i.value[0],this)}}var We=typeof Map==="undefined"||!Map.prototype.values?Ae:Map;function qe(){this.map_=new We}qe.prototype=new Ot;qe.prototype.get=function(t){return this.map_.get(t)||null};qe.prototype.put=function(t,e){this.map_.set(t,e);return e};qe.prototype.values=function(){var t=new _t;var e=this.map_.values();var n=e.next();while(!n.done){t.add(n.value);n=e.next()}return t};qe.prototype.entrySet=function(){var t=new It;this.map_.entries().forEach(function(e){return t.add(e)});return t};qe.prototype.size=function(){return this.map_.size()};function Xe(){this._modelType=null;this._scale=null;if(arguments.length===0){this._modelType=Xe.FLOATING}else if(arguments.length===1){if(arguments[0]instanceof Ke){var t=arguments[0];this._modelType=t;if(t===Xe.FIXED){this.setScale(1)}}else if(typeof arguments[0]==="number"){var e=arguments[0];this._modelType=Xe.FIXED;this.setScale(e)}else if(arguments[0]instanceof Xe){var n=arguments[0];this._modelType=n._modelType;this._scale=n._scale}}}$(Xe.prototype,{equals:function t(e){if(!(e instanceof Xe)){return false}var n=e;return this._modelType===n._modelType&&this._scale===n._scale},compareTo:function t(e){var n=e;var i=this.getMaximumSignificantDigits();var r=n.getMaximumSignificantDigits();return new de(i).compareTo(new de(r))},getScale:function t(){return this._scale},isFloating:function t(){return this._modelType===Xe.FLOATING||this._modelType===Xe.FLOATING_SINGLE},getType:function t(){return this._modelType},toString:function t(){var e="UNKNOWN";if(this._modelType===Xe.FLOATING){e="Floating"}else if(this._modelType===Xe.FLOATING_SINGLE){e="Floating-Single"}else if(this._modelType===Xe.FIXED){e="Fixed (Scale="+this.getScale()+")"}return e},makePrecise:function t(){if(typeof arguments[0]==="number"){var e=arguments[0];if(V.isNaN(e))return e;if(this._modelType===Xe.FLOATING_SINGLE){var n=e;return n}if(this._modelType===Xe.FIXED){return Math.round(e*this._scale)/this._scale}return e}else if(arguments[0]instanceof Q){var i=arguments[0];if(this._modelType===Xe.FLOATING)return null;i.x=this.makePrecise(i.x);i.y=this.makePrecise(i.y)}},getMaximumSignificantDigits:function t(){var e=16;if(this._modelType===Xe.FLOATING){e=16}else if(this._modelType===Xe.FLOATING_SINGLE){e=6}else if(this._modelType===Xe.FIXED){e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))}return e},setScale:function t(e){this._scale=Math.abs(e)},interfaces_:function t(){return[W,H]},getClass:function t(){return Xe}});Xe.mostPrecise=function(t,e){if(t.compareTo(e)>=0)return t;return e};function Ke(){this._name=null;var t=arguments[0];this._name=t;Ke.nameToTypeMap.put(t,this)}$(Ke.prototype,{readResolve:function t(){return Ke.nameToTypeMap.get(this._name)},toString:function t(){return this._name},interfaces_:function t(){return[W]},getClass:function t(){return Ke}});Ke.serialVersionUID=-552860263173159e4;Ke.nameToTypeMap=new qe;Xe.Type=Ke;Xe.serialVersionUID=0x6bee6404e9a25c00;Xe.FIXED=new Ke("FIXED");Xe.FLOATING=new Ke("FLOATING");Xe.FLOATING_SINGLE=new Ke("FLOATING SINGLE");Xe.maximumPreciseValue=9007199254740992;function Ze(){this._precisionModel=null;this._coordinateSequenceFactory=null;this._SRID=null;if(arguments.length===0){Ze.call(this,new Xe,0)}else if(arguments.length===1){if(tt(arguments[0],nt)){var t=arguments[0];Ze.call(this,new Xe,0,t)}else if(arguments[0]instanceof Xe){var e=arguments[0];Ze.call(this,e,0,Ze.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];Ze.call(this,n,i,Ze.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var r=arguments[0],a=arguments[1],o=arguments[2];this._precisionModel=r;this._coordinateSequenceFactory=o;this._SRID=a}}$(Ze.prototype,{toGeometry:function t(e){if(e.isNull()){return this.createPoint()}if(e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()){return this.createPoint(new Q(e.getMinX(),e.getMinY()))}if(e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()){return this.createLineString([new Q(e.getMinX(),e.getMinY()),new Q(e.getMaxX(),e.getMaxY())])}return this.createPolygon(this.createLinearRing([new Q(e.getMinX(),e.getMinY()),new Q(e.getMinX(),e.getMaxY()),new Q(e.getMaxX(),e.getMaxY()),new Q(e.getMaxX(),e.getMinY()),new Q(e.getMinX(),e.getMinY())]),null)},createLineString:function t(){if(arguments.length===0){return this.createLineString(this.getCoordinateSequenceFactory().create([]))}else if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLineString(e!==null?this.getCoordinateSequenceFactory().create(e):null)}else if(tt(arguments[0],et)){var n=arguments[0];return new le(n,this)}}},createMultiLineString:function t(){if(arguments.length===0){return new Xt(null,this)}else if(arguments.length===1){var e=arguments[0];return new Xt(e,this)}},buildGeometry:function t(e){var n=null;var i=false;var r=false;for(var a=e.iterator();a.hasNext();){var o=a.next();var s=o.getClass();if(n===null){n=s}if(s!==n){i=true}if(o instanceof qt)r=true}if(n===null){return this.createGeometryCollection()}if(i||r){return this.createGeometryCollection(Ze.toGeometryArray(e))}var l=e.iterator().next();var u=e.size()>1;if(u){if(l instanceof _e){return this.createMultiPolygon(Ze.toPolygonArray(e))}else if(l instanceof le){return this.createMultiLineString(Ze.toLineStringArray(e))}else if(l instanceof ce){return this.createMultiPoint(Ze.toPointArray(e))}Z.shouldNeverReachHere("Unhandled class: "+l.getClass().getName())}return l},createMultiPointFromCoords:function t(e){return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)},createPoint:function t(){if(arguments.length===0){return this.createPoint(this.getCoordinateSequenceFactory().create([]))}else if(arguments.length===1){if(arguments[0]instanceof Q){var e=arguments[0];return this.createPoint(e!==null?this.getCoordinateSequenceFactory().create([e]):null)}else if(tt(arguments[0],et)){var n=arguments[0];return new ce(n,this)}}},getCoordinateSequenceFactory:function t(){return this._coordinateSequenceFactory},createPolygon:function t(){if(arguments.length===0){return this.createPolygon(null,null)}else if(arguments.length===1){if(tt(arguments[0],et)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createPolygon(this.createLinearRing(n))}else if(arguments[0]instanceof be){var i=arguments[0];return this.createPolygon(i,null)}}else if(arguments.length===2){var r=arguments[0],a=arguments[1];return new _e(r,a,this)}},getSRID:function t(){return this._SRID},createGeometryCollection:function t(){if(arguments.length===0){return new qt(null,this)}else if(arguments.length===1){var e=arguments[0];return new qt(e,this)}},createGeometry:function t(e){var n=new xe(this);return n.edit(e,{edit:function t(){if(arguments.length===2&&arguments[1]instanceof at&&tt(arguments[0],et)){var e=arguments[0],n=arguments[1];return this._coordinateSequenceFactory.create(e)}}})},getPrecisionModel:function t(){return this._precisionModel},createLinearRing:function t(){if(arguments.length===0){return this.createLinearRing(this.getCoordinateSequenceFactory().create([]))}else if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(e!==null?this.getCoordinateSequenceFactory().create(e):null)}else if(tt(arguments[0],et)){var n=arguments[0];return new be(n,this)}}},createMultiPolygon:function t(){if(arguments.length===0){return new we(null,this)}else if(arguments.length===1){var e=arguments[0];return new we(e,this)}},createMultiPoint:function t(){if(arguments.length===0){return new ye(null,this)}else if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new ye(e,this)}else if(tt(arguments[0],et)){var n=arguments[0];if(n===null){return this.createMultiPoint(new Array(0).fill(null))}var i=new Array(n.size()).fill(null);for(var r=0;r<n.size();r++){var a=this.getCoordinateSequenceFactory().create(1,n.getDimension());se.copy(n,r,a,0,1);i[r]=this.createPoint(a)}return this.createMultiPoint(i)}}},interfaces_:function t(){return[W]},getClass:function t(){return Ze}});Ze.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)};Ze.toGeometryArray=function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)};Ze.getDefaultCoordinateSequenceFactory=function(){return Me.instance()};Ze.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)};Ze.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)};Ze.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)};Ze.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)};Ze.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)};Ze.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)};Ze.createPointFromInternalCoord=function(t,e){e.getPrecisionModel().makePrecise(t);return e.getFactory().createPoint(t)};Ze.serialVersionUID=-0x5ea75f2051eeb400;function Qe(t){return[t.x,t.y]}function Je(t,e){this.geometryFactory=t||new Ze;this.ol=e||typeof ol!=="undefined"&&ol}$(Je.prototype,{inject:function t(e,n,i,r,a,o,s,l){this.ol={geom:{Point:e,LineString:n,LinearRing:i,Polygon:r,MultiPoint:a,MultiLineString:o,MultiPolygon:s,GeometryCollection:l}}},read:function t(e){var n=this.ol;if(e instanceof n.geom.Point){return this.convertFromPoint(e)}else if(e instanceof n.geom.LineString){return this.convertFromLineString(e)}else if(e instanceof n.geom.LinearRing){return this.convertFromLinearRing(e)}else if(e instanceof n.geom.Polygon){return this.convertFromPolygon(e)}else if(e instanceof n.geom.MultiPoint){return this.convertFromMultiPoint(e)}else if(e instanceof n.geom.MultiLineString){return this.convertFromMultiLineString(e)}else if(e instanceof n.geom.MultiPolygon){return this.convertFromMultiPolygon(e)}else if(e instanceof n.geom.GeometryCollection){return this.convertFromCollection(e)}},convertFromPoint:function t(e){var n=e.getCoordinates();return this.geometryFactory.createPoint(new Q(n[0],n[1]))},convertFromLineString:function t(e){return this.geometryFactory.createLineString(e.getCoordinates().map(function(t){return new Q(t[0],t[1])}))},convertFromLinearRing:function t(e){return this.geometryFactory.createLinearRing(e.getCoordinates().map(function(t){return new Q(t[0],t[1])}))},convertFromPolygon:function t(e){var n=e.getLinearRings();var i=null;var r=[];for(var a=0;a<n.length;a++){var o=this.convertFromLinearRing(n[a]);if(a===0){i=o}else{r.push(o)}}return this.geometryFactory.createPolygon(i,r)},convertFromMultiPoint:function t(e){var n=e.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(n)},convertFromMultiLineString:function t(e){var n=e.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(n)},convertFromMultiPolygon:function t(e){var n=e.getPolygons().map(function(t){return this.convertFromPolygon(t)},this);return this.geometryFactory.createMultiPolygon(n)},convertFromCollection:function t(e){var n=e.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(n)},write:function t(e){if(e.getGeometryType()==="Point"){return this.convertToPoint(e.getCoordinate())}else if(e.getGeometryType()==="LineString"){return this.convertToLineString(e)}else if(e.getGeometryType()==="LinearRing"){return this.convertToLinearRing(e)}else if(e.getGeometryType()==="Polygon"){return this.convertToPolygon(e)}else if(e.getGeometryType()==="MultiPoint"){return this.convertToMultiPoint(e)}else if(e.getGeometryType()==="MultiLineString"){return this.convertToMultiLineString(e)}else if(e.getGeometryType()==="MultiPolygon"){return this.convertToMultiPolygon(e)}else if(e.getGeometryType()==="GeometryCollection"){return this.convertToCollection(e)}},convertToPoint:function t(e){return new this.ol.geom.Point([e.x,e.y])},convertToLineString:function t(e){var n=e._points._coordinates.map(Qe);return new this.ol.geom.LineString(n)},convertToLinearRing:function t(e){var n=e._points._coordinates.map(Qe);return new this.ol.geom.LinearRing(n)},convertToPolygon:function t(e){var n=[e._shell._points._coordinates.map(Qe)];for(var i=0;i<e._holes.length;i++){n.push(e._holes[i]._points._coordinates.map(Qe))}return new this.ol.geom.Polygon(n)},convertToMultiPoint:function t(e){return new this.ol.geom.MultiPoint(e.getCoordinates().map(Qe))},convertToMultiLineString:function t(e){var n=[];for(var i=0;i<e._geometries.length;i++){n.push(this.convertToLineString(e._geometries[i]).getCoordinates())}return new this.ol.geom.MultiLineString(n)},convertToMultiPolygon:function t(e){var n=[];for(var i=0;i<e._geometries.length;i++){n.push(this.convertToPolygon(e._geometries[i]).getCoordinates())}return new this.ol.geom.MultiPolygon(n)},convertToCollection:function t(e){var n=[];for(var i=0;i<e._geometries.length;i++){var r=e._geometries[i];n.push(this.write(r))}return new this.ol.geom.GeometryCollection(n)}});var tn={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};function en(t){this.geometryFactory=t||new Ze;this.precisionModel=this.geometryFactory.getPrecisionModel()}$(en.prototype,{read:function t(e){var n,i,r;e=e.replace(/[\n\r]/g," ");var a=tn.typeStr.exec(e);if(e.search("EMPTY")!==-1){a=tn.emptyTypeStr.exec(e);a[2]=undefined}if(a){i=a[1].toLowerCase();r=a[2];if(rn[i]){n=rn[i].call(this,r)}}if(n===undefined)throw new Error("Could not parse WKT "+e);return n},write:function t(e){return this.extractGeometry(e)},extractGeometry:function t(e){var n=e.getGeometryType().toLowerCase();if(!nn[n]){return null}var i=n.toUpperCase();var r;if(e.isEmpty()){r=i+" EMPTY"}else{r=i+"("+nn[n].call(this,e)+")"}return r}});var nn={coordinate:function t(e){return e.x+" "+e.y},point:function t(e){return nn.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function t(e){var n=[];for(var i=0,r=e._geometries.length;i<r;++i){n.push("("+nn.point.call(this,e._geometries[i])+")")}return n.join(",")},linestring:function t(e){var n=[];for(var i=0,r=e._points._coordinates.length;i<r;++i){n.push(nn.coordinate.call(this,e._points._coordinates[i]))}return n.join(",")},linearring:function t(e){var n=[];for(var i=0,r=e._points._coordinates.length;i<r;++i){n.push(nn.coordinate.call(this,e._points._coordinates[i]))}return n.join(",")},multilinestring:function t(e){var n=[];for(var i=0,r=e._geometries.length;i<r;++i){n.push("("+nn.linestring.call(this,e._geometries[i])+")")}return n.join(",")},polygon:function t(e){var n=[];n.push("("+nn.linestring.call(this,e._shell)+")");for(var i=0,r=e._holes.length;i<r;++i){n.push("("+nn.linestring.call(this,e._holes[i])+")")}return n.join(",")},multipolygon:function t(e){var n=[];for(var i=0,r=e._geometries.length;i<r;++i){n.push("("+nn.polygon.call(this,e._geometries[i])+")")}return n.join(",")},geometrycollection:function t(e){var n=[];for(var i=0,r=e._geometries.length;i<r;++i){n.push(this.extractGeometry(e._geometries[i]))}return n.join(",")}};var rn={coord:function t(e){var n=e.trim().split(tn.spaces);var t=new Q(Number.parseFloat(n[0]),Number.parseFloat(n[1]));this.precisionModel.makePrecise(t);return t},point:function t(e){if(e===undefined)return this.geometryFactory.createPoint();return this.geometryFactory.createPoint(rn.coord.call(this,e))},multipoint:function t(e){if(e===undefined)return this.geometryFactory.createMultiPoint();var n;var i=e.trim().split(",");var r=[];for(var a=0,o=i.length;a<o;++a){n=i[a].replace(tn.trimParens,"$1");r.push(rn.point.call(this,n))}return this.geometryFactory.createMultiPoint(r)},linestring:function t(e){if(e===undefined){return this.geometryFactory.createLineString()}var n=e.trim().split(",");var i=[];var r;for(var a=0,o=n.length;a<o;++a){i.push(rn.coord.call(this,n[a]))}return this.geometryFactory.createLineString(i)},linearring:function t(e){if(e===undefined){return this.geometryFactory.createLinearRing()}var n=e.trim().split(",");var i=[];var r;for(var a=0,o=n.length;a<o;++a){i.push(rn.coord.call(this,n[a]))}return this.geometryFactory.createLinearRing(i)},multilinestring:function t(e){if(e===undefined){return this.geometryFactory.createMultiLineString()}var n;var i=e.trim().split(tn.parenComma);var r=[];for(var a=0,o=i.length;a<o;++a){n=i[a].replace(tn.trimParens,"$1");r.push(rn.linestring.call(this,n))}return this.geometryFactory.createMultiLineString(r)},polygon:function t(e){if(e===undefined){return this.geometryFactory.createPolygon()}var n,i,r;var a=e.trim().split(tn.parenComma);var o;var s=[];for(var l=0,u=a.length;l<u;++l){n=a[l].replace(tn.trimParens,"$1");i=rn.linestring.call(this,n);r=this.geometryFactory.createLinearRing(i._points);if(l===0){o=r}else{s.push(r)}}return this.geometryFactory.createPolygon(o,s)},multipolygon:function t(e){if(e===undefined){return this.geometryFactory.createMultiPolygon()}var n;var i=e.trim().split(tn.doubleParenComma);var r=[];for(var a=0,o=i.length;a<o;++a){n=i[a].replace(tn.trimParens,"$1");r.push(rn.polygon.call(this,n))}return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function t(e){if(e===undefined){return this.geometryFactory.createGeometryCollection()}e=e.replace(/,\s*([A-Za-z])/g,"|$1");var n=e.trim().split("|");var i=[];for(var r=0,a=n.length;r<a;++r){i.push(this.read(n[r]))}return this.geometryFactory.createGeometryCollection(i)}};function an(t){this.parser=new en(t)}$(an.prototype,{write:function t(e){return this.parser.write(e)}});$(an,{toLineString:function t(e,n){if(arguments.length!==2){throw new Error("Not implemented")}return"LINESTRING ( "+e.x+" "+e.y+", "+n.x+" "+n.y+" )"}});function on(){this._mapOp=null;var t=arguments[0];this._mapOp=t}$(on.prototype,{map:function t(e){var n=new _t;for(var i=0;i<e.getNumGeometries();i++){var r=this._mapOp.map(e.getGeometryN(i));if(!r.isEmpty())n.add(r)}return e.getFactory().createGeometryCollection(Ze.toGeometryArray(n))},interfaces_:function t(){return[]},getClass:function t(){return on}});on.map=function(t,e){var n=new on(e);return n.map(t)};function sn(){}$(sn.prototype,{interfaces_:function t(){return[]},getClass:function t(){return sn}});sn.toLocationSymbol=function(t){switch(t){case sn.EXTERIOR:return"e";case sn.BOUNDARY:return"b";case sn.INTERIOR:return"i";case sn.NONE:return"-"}throw new U("Unknown location value: "+t)};sn.INTERIOR=0;sn.BOUNDARY=1;sn.EXTERIOR=2;sn.NONE=-1;function ln(){}$(ln.prototype,{interfaces_:function t(){return[]},getClass:function t(){return ln}});ln.opposite=function(t){if(t===ln.LEFT)return ln.RIGHT;if(t===ln.RIGHT)return ln.LEFT;return t};ln.ON=0;ln.LEFT=1;ln.RIGHT=2;function un(){}function cn(){un.call(this,"Projective point not representable on the Cartesian plane.")}X(cn,un);$(cn.prototype,{interfaces_:function t(){return[]},getClass:function t(){return cn}});function fn(){this.x=null;this.y=null;this.w=null;if(arguments.length===0){this.x=0;this.y=0;this.w=1}else if(arguments.length===1){var t=arguments[0];this.x=t.x;this.y=t.y;this.w=1}else if(arguments.length===2){if(typeof arguments[0]==="number"&&typeof arguments[1]==="number"){var e=arguments[0],n=arguments[1];this.x=e;this.y=n;this.w=1}else if(arguments[0]instanceof fn&&arguments[1]instanceof fn){var i=arguments[0],r=arguments[1];this.x=i.y*r.w-r.y*i.w;this.y=r.x*i.w-i.x*r.w;this.w=i.x*r.y-r.x*i.y}else if(arguments[0]instanceof Q&&arguments[1]instanceof Q){var a=arguments[0],o=arguments[1];this.x=a.y-o.y;this.y=o.x-a.x;this.w=a.x*o.y-o.x*a.y}}else if(arguments.length===3){var s=arguments[0],l=arguments[1],u=arguments[2];this.x=s;this.y=l;this.w=u}else if(arguments.length===4){var c=arguments[0],f=arguments[1],h=arguments[2],d=arguments[3];var p=c.y-f.y;var v=f.x-c.x;var g=c.x*f.y-f.x*c.y;var m=h.y-d.y;var _=d.x-h.x;var y=h.x*d.y-d.x*h.y;this.x=v*y-_*g;this.y=m*g-p*y;this.w=p*_-m*v}}$(fn.prototype,{getY:function t(){var e=this.y/this.w;if(V.isNaN(e)||V.isInfinite(e)){throw new cn}return e},getX:function t(){var e=this.x/this.w;if(V.isNaN(e)||V.isInfinite(e)){throw new cn}return e},getCoordinate:function t(){var e=new Q;e.x=this.getX();e.y=this.getY();return e},interfaces_:function t(){return[]},getClass:function t(){return fn}});fn.intersection=function(t,e,n,i){var r=t.y-e.y;var a=e.x-t.x;var o=t.x*e.y-e.x*t.y;var s=n.y-i.y;var l=i.x-n.x;var u=n.x*i.y-i.x*n.y;var c=a*u-l*o;var f=s*o-r*u;var h=r*l-s*a;var d=c/h;var p=f/h;if(V.isNaN(d)||V.isInfinite(d)||V.isNaN(p)||V.isInfinite(p)){throw new cn}return new Q(d,p)};function hn(){}$(hn.prototype,{interfaces_:function t(){return[]},getClass:function t(){return hn}});hn.segmentToSegment=function(t,e,n,i){if(t.equals(e))return hn.pointToSegment(t,n,i);if(n.equals(i))return hn.pointToSegment(i,t,e);var r=false;if(!rt.intersects(t,e,n,i)){r=true}else{var a=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(a===0){r=true}else{var o=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y);var s=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y);var l=s/a;var u=o/a;if(u<0||u>1||l<0||l>1){r=true}}}if(r){return wt.min(hn.pointToSegment(t,n,i),hn.pointToSegment(e,n,i),hn.pointToSegment(n,t,e),hn.pointToSegment(i,t,e))}return 0};hn.pointToSegment=function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);var r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;if(r<=0)return t.distance(e);if(r>=1)return t.distance(n);var a=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(a)*Math.sqrt(i)};hn.pointToLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);var r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)};hn.pointToSegmentString=function(t,e){if(e.length===0)throw new U("Line array must contain at least one vertex");var n=t.distance(e[0]);for(var i=0;i<e.length-1;i++){var r=hn.pointToSegment(t,e[i],e[i+1]);if(r<n){n=r}}return n};function dn(){this._result=null;this._inputLines=Array(2).fill().map(function(){return Array(2)});this._intPt=new Array(2).fill(null);this._intLineIndex=null;this._isProper=null;this._pa=null;this._pb=null;this._precisionModel=null;this._intPt[0]=new Q;this._intPt[1]=new Q;this._pa=this._intPt[0];this._pb=this._intPt[1];this._result=0}$(dn.prototype,{getIndexAlongSegment:function t(e,n){this.computeIntLineIndex();return this._intLineIndex[e][n]},getTopologySummary:function t(){var e=new oe;if(this.isEndPoint())e.append(" endpoint");if(this._isProper)e.append(" proper");if(this.isCollinear())e.append(" collinear");return e.toString()},computeIntersection:function t(e,n,i,r){this._inputLines[0][0]=e;this._inputLines[0][1]=n;this._inputLines[1][0]=i;this._inputLines[1][1]=r;this._result=this.computeIntersect(e,n,i,r)},getIntersectionNum:function t(){return this._result},computeIntLineIndex:function t(){if(arguments.length===0){if(this._intLineIndex===null){this._intLineIndex=Array(2).fill().map(function(){return Array(2)});this.computeIntLineIndex(0);this.computeIntLineIndex(1)}}else if(arguments.length===1){var e=arguments[0];var n=this.getEdgeDistance(e,0);var i=this.getEdgeDistance(e,1);if(n>i){this._intLineIndex[e][0]=0;this._intLineIndex[e][1]=1}else{this._intLineIndex[e][0]=1;this._intLineIndex[e][1]=0}}},isProper:function t(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function t(e){this._precisionModel=e},isInteriorIntersection:function t(){if(arguments.length===0){if(this.isInteriorIntersection(0))return true;if(this.isInteriorIntersection(1))return true;return false}else if(arguments.length===1){var e=arguments[0];for(var n=0;n<this._result;n++){if(!(this._intPt[n].equals2D(this._inputLines[e][0])||this._intPt[n].equals2D(this._inputLines[e][1]))){return true}}return false}},getIntersection:function t(e){return this._intPt[e]},isEndPoint:function t(){return this.hasIntersection()&&!this._isProper},hasIntersection:function t(){return this._result!==dn.NO_INTERSECTION},getEdgeDistance:function t(e,n){var i=dn.computeEdgeDistance(this._intPt[n],this._inputLines[e][0],this._inputLines[e][1]);return i},isCollinear:function t(){return this._result===dn.COLLINEAR_INTERSECTION},toString:function t(){return an.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+an.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},getEndpoint:function t(e,n){return this._inputLines[e][n]},isIntersection:function t(e){for(var n=0;n<this._result;n++){if(this._intPt[n].equals2D(e)){return true}}return false},getIntersectionAlongSegment:function t(e,n){this.computeIntLineIndex();return this._intPt[this._intLineIndex[e][n]]},interfaces_:function t(){return[]},getClass:function t(){return dn}});dn.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x);var r=Math.abs(n.y-e.y);var a=-1;if(t.equals(e)){a=0}else if(t.equals(n)){if(i>r)a=i;else a=r}else{var o=Math.abs(t.x-e.x);var s=Math.abs(t.y-e.y);if(i>r)a=o;else a=s;if(a===0&&!t.equals(e)){a=Math.max(o,s)}}Z.isTrue(!(a===0&&!t.equals(e)),"Bad distance calculation");return a};dn.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x;var r=t.y-e.y;var a=Math.sqrt(i*i+r*r);Z.isTrue(!(a===0&&!t.equals(e)),"Invalid distance calculation");return a};dn.DONT_INTERSECT=0;dn.DO_INTERSECT=1;dn.COLLINEAR=2;dn.NO_INTERSECTION=0;dn.POINT_INTERSECTION=1;dn.COLLINEAR_INTERSECTION=2;function pn(){dn.apply(this)}X(pn,dn);$(pn.prototype,{isInSegmentEnvelopes:function t(e){var n=new rt(this._inputLines[0][0],this._inputLines[0][1]);var i=new rt(this._inputLines[1][0],this._inputLines[1][1]);return n.contains(e)&&i.contains(e)},computeIntersection:function t(){if(arguments.length===3){var e=arguments[0],n=arguments[1],i=arguments[2];this._isProper=false;if(rt.intersects(n,i,e)){if(ge.index(n,i,e)===0&&ge.index(i,n,e)===0){this._isProper=true;if(e.equals(n)||e.equals(i)){this._isProper=false}this._result=dn.POINT_INTERSECTION;return null}}this._result=dn.NO_INTERSECTION}else return dn.prototype.computeIntersection.apply(this,arguments)},normalizeToMinimum:function t(e,n,i,r,a){a.x=this.smallestInAbsValue(e.x,n.x,i.x,r.x);a.y=this.smallestInAbsValue(e.y,n.y,i.y,r.y);e.x-=a.x;e.y-=a.y;n.x-=a.x;n.y-=a.y;i.x-=a.x;i.y-=a.y;r.x-=a.x;r.y-=a.y},safeHCoordinateIntersection:function t(e,n,i,r){var a=null;try{a=fn.intersection(e,n,i,r)}catch(t){if(t instanceof cn){a=pn.nearestEndpoint(e,n,i,r)}else throw t}finally{}return a},intersection:function t(e,n,i,r){var a=this.intersectionWithNormalization(e,n,i,r);if(!this.isInSegmentEnvelopes(a)){a=new Q(pn.nearestEndpoint(e,n,i,r))}if(this._precisionModel!==null){this._precisionModel.makePrecise(a)}return a},smallestInAbsValue:function t(e,n,i,r){var a=e;var o=Math.abs(a);if(Math.abs(n)<o){a=n;o=Math.abs(n)}if(Math.abs(i)<o){a=i;o=Math.abs(i)}if(Math.abs(r)<o){a=r}return a},checkDD:function t(e,n,i,r,a){var o=ve.intersection(e,n,i,r);var s=this.isInSegmentEnvelopes(o);xt.out.println("DD in env = "+s+"  --------------------- "+o);if(a.distance(o)>1e-4){xt.out.println("Distance = "+a.distance(o))}},intersectionWithNormalization:function t(e,n,i,r){var a=new Q(e);var o=new Q(n);var s=new Q(i);var l=new Q(r);var u=new Q;this.normalizeToEnvCentre(a,o,s,l,u);var c=this.safeHCoordinateIntersection(a,o,s,l);c.x+=u.x;c.y+=u.y;return c},computeCollinearIntersection:function t(e,n,i,r){var a=rt.intersects(e,n,i);var o=rt.intersects(e,n,r);var s=rt.intersects(i,r,e);var l=rt.intersects(i,r,n);if(a&&o){this._intPt[0]=i;this._intPt[1]=r;return dn.COLLINEAR_INTERSECTION}if(s&&l){this._intPt[0]=e;this._intPt[1]=n;return dn.COLLINEAR_INTERSECTION}if(a&&s){this._intPt[0]=i;this._intPt[1]=e;return i.equals(e)&&!o&&!l?dn.POINT_INTERSECTION:dn.COLLINEAR_INTERSECTION}if(a&&l){this._intPt[0]=i;this._intPt[1]=n;return i.equals(n)&&!o&&!s?dn.POINT_INTERSECTION:dn.COLLINEAR_INTERSECTION}if(o&&s){this._intPt[0]=r;this._intPt[1]=e;return r.equals(e)&&!a&&!l?dn.POINT_INTERSECTION:dn.COLLINEAR_INTERSECTION}if(o&&l){this._intPt[0]=r;this._intPt[1]=n;return r.equals(n)&&!a&&!s?dn.POINT_INTERSECTION:dn.COLLINEAR_INTERSECTION}return dn.NO_INTERSECTION},normalizeToEnvCentre:function t(e,n,i,r,a){var o=e.x<n.x?e.x:n.x;var s=e.y<n.y?e.y:n.y;var l=e.x>n.x?e.x:n.x;var u=e.y>n.y?e.y:n.y;var c=i.x<r.x?i.x:r.x;var f=i.y<r.y?i.y:r.y;var h=i.x>r.x?i.x:r.x;var d=i.y>r.y?i.y:r.y;var p=o>c?o:c;var v=l<h?l:h;var g=s>f?s:f;var m=u<d?u:d;var _=(p+v)/2;var y=(g+m)/2;a.x=_;a.y=y;e.x-=a.x;e.y-=a.y;n.x-=a.x;n.y-=a.y;i.x-=a.x;i.y-=a.y;r.x-=a.x;r.y-=a.y},computeIntersect:function t(e,n,i,r){this._isProper=false;if(!rt.intersects(e,n,i,r))return dn.NO_INTERSECTION;var a=ge.index(e,n,i);var o=ge.index(e,n,r);if(a>0&&o>0||a<0&&o<0){return dn.NO_INTERSECTION}var s=ge.index(i,r,e);var l=ge.index(i,r,n);if(s>0&&l>0||s<0&&l<0){return dn.NO_INTERSECTION}var u=a===0&&o===0&&s===0&&l===0;if(u){return this.computeCollinearIntersection(e,n,i,r)}if(a===0||o===0||s===0||l===0){this._isProper=false;if(e.equals2D(i)||e.equals2D(r)){this._intPt[0]=e}else if(n.equals2D(i)||n.equals2D(r)){this._intPt[0]=n}else if(a===0){this._intPt[0]=new Q(i)}else if(o===0){this._intPt[0]=new Q(r)}else if(s===0){this._intPt[0]=new Q(e)}else if(l===0){this._intPt[0]=new Q(n)}}else{this._isProper=true;this._intPt[0]=this.intersection(e,n,i,r)}return dn.POINT_INTERSECTION},interfaces_:function t(){return[]},getClass:function t(){return pn}});pn.nearestEndpoint=function(t,e,n,i){var r=t;var a=hn.pointToSegment(t,n,i);var o=hn.pointToSegment(e,n,i);if(o<a){a=o;r=e}o=hn.pointToSegment(n,t,e);if(o<a){a=o;r=n}o=hn.pointToSegment(i,t,e);if(o<a){a=o;r=i}return r};function vn(){this._p=null;this._crossingCount=0;this._isPointOnSegment=false;var t=arguments[0];this._p=t}$(vn.prototype,{countSegment:function t(e,n){if(e.x<this._p.x&&n.x<this._p.x)return null;if(this._p.x===n.x&&this._p.y===n.y){this._isPointOnSegment=true;return null}if(e.y===this._p.y&&n.y===this._p.y){var i=e.x;var r=n.x;if(i>r){i=n.x;r=e.x}if(this._p.x>=i&&this._p.x<=r){this._isPointOnSegment=true}return null}if(e.y>this._p.y&&n.y<=this._p.y||n.y>this._p.y&&e.y<=this._p.y){var a=ge.index(e,n,this._p);if(a===ge.COLLINEAR){this._isPointOnSegment=true;return null}if(n.y<e.y){a=-a}if(a===ge.LEFT){this._crossingCount++}}},isPointInPolygon:function t(){return this.getLocation()!==sn.EXTERIOR},getLocation:function t(){if(this._isPointOnSegment)return sn.BOUNDARY;if(this._crossingCount%2===1){return sn.INTERIOR}return sn.EXTERIOR},isOnSegment:function t(){return this._isPointOnSegment},interfaces_:function t(){return[]},getClass:function t(){return vn}});vn.locatePointInRing=function(){if(arguments[0]instanceof Q&&tt(arguments[1],et)){var t=arguments[0],e=arguments[1];var n=new vn(t);var i=new Q;var r=new Q;for(var a=1;a<e.size();a++){e.getCoordinate(a,i);e.getCoordinate(a-1,r);n.countSegment(i,r);if(n.isOnSegment())return n.getLocation()}return n.getLocation()}else if(arguments[0]instanceof Q&&arguments[1]instanceof Array){var o=arguments[0],s=arguments[1];var n=new vn(o);for(var a=1;a<s.length;a++){var i=s[a];var r=s[a-1];n.countSegment(i,r);if(n.isOnSegment())return n.getLocation()}return n.getLocation()}};function gn(){}$(gn.prototype,{interfaces_:function t(){return[]},getClass:function t(){return gn}});gn.isOnLine=function(){if(arguments[0]instanceof Q&&tt(arguments[1],et)){var t=arguments[0],e=arguments[1];var n=new pn;var i=new Q;var r=new Q;var a=e.size();for(var o=1;o<a;o++){e.getCoordinate(o-1,i);e.getCoordinate(o,r);n.computeIntersection(t,i,r);if(n.hasIntersection()){return true}}return false}else if(arguments[0]instanceof Q&&arguments[1]instanceof Array){var s=arguments[0],l=arguments[1];var n=new pn;for(var o=1;o<l.length;o++){var i=l[o-1];var r=l[o];n.computeIntersection(s,i,r);if(n.hasIntersection()){return true}}return false}};gn.locateInRing=function(t,e){return vn.locatePointInRing(t,e)};gn.isInRing=function(t,e){return gn.locateInRing(t,e)!==sn.EXTERIOR};function mn(){this.pt=null;if(arguments.length===1){var t=arguments[0];q.call(this,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];q.call(this,mn.msgWithCoord(e,n));this.name="TopologyException";this.pt=new Q(n)}}X(mn,q);$(mn.prototype,{getCoordinate:function t(){return this.pt},interfaces_:function t(){return[]},getClass:function t(){return mn}});mn.msgWithCoord=function(t,e){if(e!==null)return t+" [ "+e+" ]";return t};function _n(){this.location=null;if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1);this.location[ln.ON]=e}else if(arguments[0]instanceof _n){var n=arguments[0];this.init(n.location.length);if(n!==null){for(var i=0;i<this.location.length;i++){this.location[i]=n.location[i]}}}}else if(arguments.length===3){var r=arguments[0],a=arguments[1],o=arguments[2];this.init(3);this.location[ln.ON]=r;this.location[ln.LEFT]=a;this.location[ln.RIGHT]=o}}$(_n.prototype,{setAllLocations:function t(e){for(var n=0;n<this.location.length;n++){this.location[n]=e}},isNull:function t(){for(var e=0;e<this.location.length;e++){if(this.location[e]!==sn.NONE)return false}return true},setAllLocationsIfNull:function t(e){for(var n=0;n<this.location.length;n++){if(this.location[n]===sn.NONE)this.location[n]=e}},isLine:function t(){return this.location.length===1},merge:function t(e){if(e.location.length>this.location.length){var n=new Array(3).fill(null);n[ln.ON]=this.location[ln.ON];n[ln.LEFT]=sn.NONE;n[ln.RIGHT]=sn.NONE;this.location=n}for(var i=0;i<this.location.length;i++){if(this.location[i]===sn.NONE&&i<e.location.length)this.location[i]=e.location[i]}},getLocations:function t(){return this.location},flip:function t(){if(this.location.length<=1)return null;var e=this.location[ln.LEFT];this.location[ln.LEFT]=this.location[ln.RIGHT];this.location[ln.RIGHT]=e},toString:function t(){var e=new he;if(this.location.length>1)e.append(sn.toLocationSymbol(this.location[ln.LEFT]));e.append(sn.toLocationSymbol(this.location[ln.ON]));if(this.location.length>1)e.append(sn.toLocationSymbol(this.location[ln.RIGHT]));return e.toString()},setLocations:function t(e,n,i){this.location[ln.ON]=e;this.location[ln.LEFT]=n;this.location[ln.RIGHT]=i},get:function t(e){if(e<this.location.length)return this.location[e];return sn.NONE},isArea:function t(){return this.location.length>1},isAnyNull:function t(){for(var e=0;e<this.location.length;e++){if(this.location[e]===sn.NONE)return true}return false},setLocation:function t(){if(arguments.length===1){var e=arguments[0];this.setLocation(ln.ON,e)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.location[n]=i}},init:function t(e){this.location=new Array(e).fill(null);this.setAllLocations(sn.NONE)},isEqualOnSide:function t(e,n){return this.location[n]===e.location[n]},allPositionsEqual:function t(e){for(var n=0;n<this.location.length;n++){if(this.location[n]!==e)return false}return true},interfaces_:function t(){return[]},getClass:function t(){return _n}});function yn(){this.elt=new Array(2).fill(null);if(arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new _n(t);this.elt[1]=new _n(t)}else if(arguments[0]instanceof yn){var e=arguments[0];this.elt[0]=new _n(e.elt[0]);this.elt[1]=new _n(e.elt[1])}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.elt[0]=new _n(sn.NONE);this.elt[1]=new _n(sn.NONE);this.elt[n].setLocation(i)}else if(arguments.length===3){var r=arguments[0],a=arguments[1],o=arguments[2];this.elt[0]=new _n(r,a,o);this.elt[1]=new _n(r,a,o)}else if(arguments.length===4){var s=arguments[0],l=arguments[1],u=arguments[2],c=arguments[3];this.elt[0]=new _n(sn.NONE,sn.NONE,sn.NONE);this.elt[1]=new _n(sn.NONE,sn.NONE,sn.NONE);this.elt[s].setLocations(l,u,c)}}$(yn.prototype,{getGeometryCount:function t(){var e=0;if(!this.elt[0].isNull())e++;if(!this.elt[1].isNull())e++;return e},setAllLocations:function t(e,n){this.elt[e].setAllLocations(n)},isNull:function t(e){return this.elt[e].isNull()},setAllLocationsIfNull:function t(){if(arguments.length===1){var e=arguments[0];this.setAllLocationsIfNull(0,e);this.setAllLocationsIfNull(1,e)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.elt[n].setAllLocationsIfNull(i)}},isLine:function t(e){return this.elt[e].isLine()},merge:function t(e){for(var n=0;n<2;n++){if(this.elt[n]===null&&e.elt[n]!==null){this.elt[n]=new _n(e.elt[n])}else{this.elt[n].merge(e.elt[n])}}},flip:function t(){this.elt[0].flip();this.elt[1].flip()},getLocation:function t(){if(arguments.length===1){var e=arguments[0];return this.elt[e].get(ln.ON)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.elt[n].get(i)}},toString:function t(){var e=new he;if(this.elt[0]!==null){e.append("A:");e.append(this.elt[0].toString())}if(this.elt[1]!==null){e.append(" B:");e.append(this.elt[1].toString())}return e.toString()},isArea:function t(){if(arguments.length===0){return this.elt[0].isArea()||this.elt[1].isArea()}else if(arguments.length===1){var e=arguments[0];return this.elt[e].isArea()}},isAnyNull:function t(e){return this.elt[e].isAnyNull()},setLocation:function t(){if(arguments.length===2){var e=arguments[0],n=arguments[1];this.elt[e].setLocation(ln.ON,n)}else if(arguments.length===3){var i=arguments[0],r=arguments[1],a=arguments[2];this.elt[i].setLocation(r,a)}},isEqualOnSide:function t(e,n){return this.elt[0].isEqualOnSide(e.elt[0],n)&&this.elt[1].isEqualOnSide(e.elt[1],n)},allPositionsEqual:function t(e,n){return this.elt[e].allPositionsEqual(n)},toLine:function t(e){if(this.elt[e].isArea())this.elt[e]=new _n(this.elt[e].location[0])},interfaces_:function t(){return[]},getClass:function t(){return yn}});yn.toLineLabel=function(t){var e=new yn(sn.NONE);for(var n=0;n<2;n++){e.setLocation(n,t.getLocation(n))}return e};function bn(){this._startDe=null;this._maxNodeDegree=-1;this._edges=new _t;this._pts=new _t;this._label=new yn(sn.NONE);this._ring=null;this._isHole=null;this._shell=null;this._holes=new _t;this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e;this.computePoints(t);this.computeRing()}$(bn.prototype,{computeRing:function t(){if(this._ring!==null)return null;var e=new Array(this._pts.size()).fill(null);for(var n=0;n<this._pts.size();n++){e[n]=this._pts.get(n)}this._ring=this._geometryFactory.createLinearRing(e);this._isHole=ge.isCCW(this._ring.getCoordinates())},isIsolated:function t(){return this._label.getGeometryCount()===1},computePoints:function t(e){this._startDe=e;var n=e;var i=true;do{if(n===null)throw new mn("Found null DirectedEdge");if(n.getEdgeRing()===this)throw new mn("Directed Edge visited twice during ring-building at "+n.getCoordinate());this._edges.add(n);var r=n.getLabel();Z.isTrue(r.isArea());this.mergeLabel(r);this.addPoints(n.getEdge(),n.isForward(),i);i=false;this.setEdgeRing(n,this);n=this.getNext(n)}while(n!==this._startDe)},getLinearRing:function t(){return this._ring},getCoordinate:function t(e){return this._pts.get(e)},computeMaxNodeDegree:function t(){this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode();var i=n.getEdges().getOutgoingDegree(this);if(i>this._maxNodeDegree)this._maxNodeDegree=i;e=this.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},addPoints:function t(e,n,i){var r=e.getCoordinates();if(n){var a=1;if(i)a=0;for(var o=a;o<r.length;o++){this._pts.add(r[o])}}else{var a=r.length-2;if(i)a=r.length-1;for(var o=a;o>=0;o--){this._pts.add(r[o])}}},isHole:function t(){return this._isHole},setInResult:function t(){var e=this._startDe;do{e.getEdge().setInResult(true);e=e.getNext()}while(e!==this._startDe)},containsPoint:function t(e){var n=this.getLinearRing();var i=n.getEnvelopeInternal();if(!i.contains(e))return false;if(!gn.isInRing(e,n.getCoordinates()))return false;for(var r=this._holes.iterator();r.hasNext();){var a=r.next();if(a.containsPoint(e))return false}return true},addHole:function t(e){this._holes.add(e)},isShell:function t(){return this._shell===null},getLabel:function t(){return this._label},getEdges:function t(){return this._edges},getMaxNodeDegree:function t(){if(this._maxNodeDegree<0)this.computeMaxNodeDegree();return this._maxNodeDegree},getShell:function t(){return this._shell},mergeLabel:function t(){if(arguments.length===1){var e=arguments[0];this.mergeLabel(e,0);this.mergeLabel(e,1)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];var r=n.getLocation(i,ln.RIGHT);if(r===sn.NONE)return null;if(this._label.getLocation(i)===sn.NONE){this._label.setLocation(i,r);return null}}},setShell:function t(e){this._shell=e;if(e!==null)e.addHole(this)},toPolygon:function t(e){var n=new Array(this._holes.size()).fill(null);for(var i=0;i<this._holes.size();i++){n[i]=this._holes.get(i).getLinearRing()}var r=e.createPolygon(this.getLinearRing(),n);return r},interfaces_:function t(){return[]},getClass:function t(){return bn}});function wn(){var t=arguments[0],e=arguments[1];bn.call(this,t,e)}X(wn,bn);$(wn.prototype,{setEdgeRing:function t(e,n){e.setMinEdgeRing(n)},getNext:function t(e){return e.getNextMin()},interfaces_:function t(){return[]},getClass:function t(){return wn}});function xn(){var t=arguments[0],e=arguments[1];bn.call(this,t,e)}X(xn,bn);$(xn.prototype,{buildMinimalRings:function t(){var e=new _t;var n=this._startDe;do{if(n.getMinEdgeRing()===null){var i=new wn(n,this._geometryFactory);e.add(i)}n=n.getNext()}while(n!==this._startDe);return e},setEdgeRing:function t(e,n){e.setEdgeRing(n)},linkDirectedEdgesForMinimalEdgeRings:function t(){var e=this._startDe;do{var n=e.getNode();n.getEdges().linkMinimalDirectedEdges(this);e=e.getNext()}while(e!==this._startDe)},getNext:function t(e){return e.getNext()},interfaces_:function t(){return[]},getClass:function t(){return xn}});function Sn(){}$(Sn.prototype,{locate:function t(e){},interfaces_:function t(){return[]},getClass:function t(){return Sn}});function Cn(){this._parent=null;this._atStart=null;this._max=null;this._index=null;this._subcollectionIterator=null;var t=arguments[0];this._parent=t;this._atStart=true;this._index=0;this._max=t.getNumGeometries()}$(Cn.prototype,{next:function t(){if(this._atStart){this._atStart=false;if(Cn.isAtomic(this._parent))this._index++;return this._parent}if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext()){return this._subcollectionIterator.next()}else{this._subcollectionIterator=null}}if(this._index>=this._max){throw new gt}var e=this._parent.getGeometryN(this._index++);if(e instanceof qt){this._subcollectionIterator=new Cn(e);return this._subcollectionIterator.next()}return e},remove:function t(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function t(){if(this._atStart){return true}if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext()){return true}this._subcollectionIterator=null}if(this._index>=this._max){return false}return true},interfaces_:function t(){return[ht]},getClass:function t(){return Cn}});Cn.isAtomic=function(t){return!(t instanceof qt)};function En(){this._geom=null;var t=arguments[0];this._geom=t}$(En.prototype,{locate:function t(e){return En.locate(e,this._geom)},interfaces_:function t(){return[Sn]},getClass:function t(){return En}});En.locatePointInPolygon=function(t,e){if(e.isEmpty())return sn.EXTERIOR;var n=e.getExteriorRing();var i=En.locatePointInRing(t,n);if(i!==sn.INTERIOR)return i;for(var r=0;r<e.getNumInteriorRing();r++){var a=e.getInteriorRingN(r);var o=En.locatePointInRing(t,a);if(o===sn.BOUNDARY)return sn.BOUNDARY;if(o===sn.INTERIOR)return sn.EXTERIOR}return sn.INTERIOR};En.locatePointInRing=function(t,e){if(!e.getEnvelopeInternal().intersects(t))return sn.EXTERIOR;return gn.locateInRing(t,e.getCoordinates())};En.containsPointInPolygon=function(t,e){return sn.EXTERIOR!==En.locatePointInPolygon(t,e)};En.locateInGeometry=function(t,e){if(e instanceof _e){return En.locatePointInPolygon(t,e)}else if(e instanceof qt){var n=new Cn(e);while(n.hasNext()){var i=n.next();if(i!==e){var r=En.locateInGeometry(t,i);if(r!==sn.EXTERIOR)return r}}}return sn.EXTERIOR};En.locate=function(t,e){if(e.isEmpty())return sn.EXTERIOR;return En.locateInGeometry(t,e)};function On(){this._edgeMap=new Ft;this._edgeList=null;this._ptInAreaLocation=[sn.NONE,sn.NONE]}$(On.prototype,{getNextCW:function t(e){this.getEdges();var n=this._edgeList.indexOf(e);var i=n-1;if(n===0)i=this._edgeList.size()-1;return this._edgeList.get(i)},propagateSideLabels:function t(e){var n=sn.NONE;for(var i=this.iterator();i.hasNext();){var r=i.next();var a=r.getLabel();if(a.isArea(e)&&a.getLocation(e,ln.LEFT)!==sn.NONE)n=a.getLocation(e,ln.LEFT)}if(n===sn.NONE)return null;var o=n;for(var i=this.iterator();i.hasNext();){var r=i.next();var a=r.getLabel();if(a.getLocation(e,ln.ON)===sn.NONE)a.setLocation(e,ln.ON,o);if(a.isArea(e)){var s=a.getLocation(e,ln.LEFT);var l=a.getLocation(e,ln.RIGHT);if(l!==sn.NONE){if(l!==o)throw new mn("side location conflict",r.getCoordinate());if(s===sn.NONE){Z.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")")}o=s}else{Z.isTrue(a.getLocation(e,ln.LEFT)===sn.NONE,"found single null side");a.setLocation(e,ln.RIGHT,o);a.setLocation(e,ln.LEFT,o)}}}},getCoordinate:function t(){var e=this.iterator();if(!e.hasNext())return null;var n=e.next();return n.getCoordinate()},print:function t(e){xt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var n=this.iterator();n.hasNext();){var i=n.next();i.print(e)}},isAreaLabelsConsistent:function t(e){this.computeEdgeEndLabels(e.getBoundaryNodeRule());return this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function t(e){var n=this.getEdges();if(n.size()<=0)return true;var i=n.size()-1;var r=n.get(i).getLabel();var a=r.getLocation(e,ln.LEFT);Z.isTrue(a!==sn.NONE,"Found unlabelled area edge");var o=a;for(var s=this.iterator();s.hasNext();){var l=s.next();var u=l.getLabel();Z.isTrue(u.isArea(e),"Found non-area edge");var c=u.getLocation(e,ln.LEFT);var f=u.getLocation(e,ln.RIGHT);if(c===f){return false}if(f!==o){return false}o=c}return true},findIndex:function t(e){this.iterator();for(var n=0;n<this._edgeList.size();n++){var i=this._edgeList.get(n);if(i===e)return n}return-1},iterator:function t(){return this.getEdges().iterator()},getEdges:function t(){if(this._edgeList===null){this._edgeList=new _t(this._edgeMap.values())}return this._edgeList},getLocation:function t(e,n,i){if(this._ptInAreaLocation[e]===sn.NONE){this._ptInAreaLocation[e]=En.locate(n,i[e].getGeometry())}return this._ptInAreaLocation[e]},toString:function t(){var e=new he;e.append("EdgeEndStar:   "+this.getCoordinate());e.append("\n");for(var n=this.iterator();n.hasNext();){var i=n.next();e.append(i);e.append("\n")}return e.toString()},computeEdgeEndLabels:function t(e){for(var n=this.iterator();n.hasNext();){var i=n.next();i.computeLabel(e)}},computeLabelling:function t(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule());this.propagateSideLabels(0);this.propagateSideLabels(1);var n=[false,false];for(var i=this.iterator();i.hasNext();){var r=i.next();var a=r.getLabel();for(var o=0;o<2;o++){if(a.isLine(o)&&a.getLocation(o)===sn.BOUNDARY)n[o]=true}}for(var i=this.iterator();i.hasNext();){var r=i.next();var a=r.getLabel();for(var o=0;o<2;o++){if(a.isAnyNull(o)){var s=sn.NONE;if(n[o]){s=sn.EXTERIOR}else{var l=r.getCoordinate();s=this.getLocation(o,l,e)}a.setAllLocationsIfNull(o,s)}}}},getDegree:function t(){return this._edgeMap.size()},insertEdgeEnd:function t(e,n){this._edgeMap.put(e,n);this._edgeList=null},interfaces_:function t(){return[]},getClass:function t(){return On}});function Tn(){}$(Tn.prototype,{interfaces_:function t(){return[]},getClass:function t(){return Tn}});Tn.isNorthern=function(t){return t===Tn.NE||t===Tn.NW};Tn.isOpposite=function(t,e){if(t===e)return false;var n=(t-e+4)%4;if(n===2)return true;return false};Tn.commonHalfPlane=function(t,e){if(t===e)return t;var n=(t-e+4)%4;if(n===2)return-1;var i=t<e?t:e;var r=t>e?t:e;if(i===0&&r===3)return 3;return i};Tn.isInHalfPlane=function(t,e){if(e===Tn.SE){return t===Tn.SE||t===Tn.SW}return t===e||t===e+1};Tn.quadrant=function(){if(typeof arguments[0]==="number"&&typeof arguments[1]==="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new U("Cannot compute the quadrant for point ( "+t+", "+e+" )");if(t>=0){if(e>=0)return Tn.NE;else return Tn.SE}else{if(e>=0)return Tn.NW;else return Tn.SW}}else if(arguments[0]instanceof Q&&arguments[1]instanceof Q){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new U("Cannot compute the quadrant for two identical points "+n);if(i.x>=n.x){if(i.y>=n.y)return Tn.NE;else return Tn.SE}else{if(i.y>=n.y)return Tn.NW;else return Tn.SW}}};Tn.NE=0;Tn.NW=1;Tn.SW=2;Tn.SE=3;function Mn(){On.apply(this);this._resultAreaEdgeList=null;this._label=null;this._SCANNING_FOR_INCOMING=1;this._LINKING_TO_OUTGOING=2}X(Mn,On);$(Mn.prototype,{linkResultDirectedEdges:function t(){this.getResultAreaEdges();var e=null;var n=null;var i=this._SCANNING_FOR_INCOMING;for(var r=0;r<this._resultAreaEdgeList.size();r++){var a=this._resultAreaEdgeList.get(r);var o=a.getSym();if(!a.getLabel().isArea())continue;if(e===null&&a.isInResult())e=a;switch(i){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;n=o;i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!a.isInResult())continue;n.setNext(a);i=this._SCANNING_FOR_INCOMING;break}}if(i===this._LINKING_TO_OUTGOING){if(e===null)throw new mn("no outgoing dirEdge found",this.getCoordinate());Z.isTrue(e.isInResult(),"unable to link last incoming dirEdge");n.setNext(e)}},insert:function t(e){var n=e;this.insertEdgeEnd(n,n)},getRightmostEdge:function t(){var e=this.getEdges();var n=e.size();if(n<1)return null;var i=e.get(0);if(n===1)return i;var r=e.get(n-1);var a=i.getQuadrant();var o=r.getQuadrant();if(Tn.isNorthern(a)&&Tn.isNorthern(o))return i;else if(!Tn.isNorthern(a)&&!Tn.isNorthern(o))return r;else{var s=null;if(i.getDy()!==0)return i;else if(r.getDy()!==0)return r}Z.shouldNeverReachHere("found two horizontal edges incident on node");return null},print:function t(e){xt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var n=this.iterator();n.hasNext();){var i=n.next();e.print("out ");i.print(e);e.println();e.print("in ");i.getSym().print(e);e.println()}},getResultAreaEdges:function t(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new _t;for(var e=this.iterator();e.hasNext();){var n=e.next();if(n.isInResult()||n.getSym().isInResult())this._resultAreaEdgeList.add(n)}return this._resultAreaEdgeList},updateLabelling:function t(e){for(var n=this.iterator();n.hasNext();){var i=n.next();var r=i.getLabel();r.setAllLocationsIfNull(0,e.getLocation(0));r.setAllLocationsIfNull(1,e.getLocation(1))}},linkAllDirectedEdges:function t(){this.getEdges();var e=null;var n=null;for(var i=this._edgeList.size()-1;i>=0;i--){var r=this._edgeList.get(i);var a=r.getSym();if(n===null)n=a;if(e!==null)a.setNext(e);e=r}n.setNext(e)},computeDepths:function t(){if(arguments.length===1){var e=arguments[0];var n=this.findIndex(e);var i=e.getLabel();var r=e.getDepth(ln.LEFT);var a=e.getDepth(ln.RIGHT);var o=this.computeDepths(n+1,this._edgeList.size(),r);var s=this.computeDepths(0,n,o);if(s!==a)throw new mn("depth mismatch at "+e.getCoordinate())}else if(arguments.length===3){var l=arguments[0],u=arguments[1],c=arguments[2];var f=c;for(var h=l;h<u;h++){var d=this._edgeList.get(h);var i=d.getLabel();d.setEdgeDepths(ln.RIGHT,f);f=d.getDepth(ln.LEFT)}return f}},mergeSymLabels:function t(){for(var e=this.iterator();e.hasNext();){var n=e.next();var i=n.getLabel();i.merge(n.getSym().getLabel())}},linkMinimalDirectedEdges:function t(e){var n=null;var i=null;var r=this._SCANNING_FOR_INCOMING;for(var a=this._resultAreaEdgeList.size()-1;a>=0;a--){var o=this._resultAreaEdgeList.get(a);var s=o.getSym();if(n===null&&o.getEdgeRing()===e)n=o;switch(r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==e)continue;i=s;r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==e)continue;i.setNextMin(o);r=this._SCANNING_FOR_INCOMING;break}}if(r===this._LINKING_TO_OUTGOING){Z.isTrue(n!==null,"found null for first outgoing dirEdge");Z.isTrue(n.getEdgeRing()===e,"unable to link last incoming dirEdge");i.setNextMin(n)}},getOutgoingDegree:function t(){if(arguments.length===0){var e=0;for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.isInResult())e++}return e}else if(arguments.length===1){var r=arguments[0];var e=0;for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.getEdgeRing()===r)e++}return e}},getLabel:function t(){return this._label},findCoveredLineEdges:function t(){var e=sn.NONE;for(var n=this.iterator();n.hasNext();){var i=n.next();var r=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){e=sn.INTERIOR;break}if(r.isInResult()){e=sn.EXTERIOR;break}}}if(e===sn.NONE)return null;var a=e;for(var n=this.iterator();n.hasNext();){var i=n.next();var r=i.getSym();if(i.isLineEdge()){i.getEdge().setCovered(a===sn.INTERIOR)}else{if(i.isInResult())a=sn.EXTERIOR;if(r.isInResult())a=sn.INTERIOR}}},computeLabelling:function t(e){On.prototype.computeLabelling.call(this,e);this._label=new yn(sn.NONE);for(var n=this.iterator();n.hasNext();){var i=n.next();var r=i.getEdge();var a=r.getLabel();for(var o=0;o<2;o++){var s=a.getLocation(o);if(s===sn.INTERIOR||s===sn.BOUNDARY)this._label.setLocation(o,sn.INTERIOR)}}},interfaces_:function t(){return[]},getClass:function t(){return Mn}});function In(){this._label=null;this._isInResult=false;this._isCovered=false;this._isCoveredSet=false;this._isVisited=false;if(arguments.length===0){}else if(arguments.length===1){var t=arguments[0];this._label=t}}$(In.prototype,{setVisited:function t(e){this._isVisited=e},setInResult:function t(e){this._isInResult=e},isCovered:function t(){return this._isCovered},isCoveredSet:function t(){return this._isCoveredSet},setLabel:function t(e){this._label=e},getLabel:function t(){return this._label},setCovered:function t(e){this._isCovered=e;this._isCoveredSet=true},updateIM:function t(e){Z.isTrue(this._label.getGeometryCount()>=2,"found partial label");this.computeIM(e)},isInResult:function t(){return this._isInResult},isVisited:function t(){return this._isVisited},interfaces_:function t(){return[]},getClass:function t(){return In}});function Rn(){In.apply(this);this._coord=null;this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t;this._edges=e;this._label=new yn(0,sn.NONE)}X(Rn,In);$(Rn.prototype,{isIncidentEdgeInResult:function t(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();){var n=e.next();if(n.getEdge().isInResult())return true}return false},isIsolated:function t(){return this._label.getGeometryCount()===1},getCoordinate:function t(){return this._coord},print:function t(e){e.println("node "+this._coord+" lbl: "+this._label)},computeIM:function t(e){},computeMergedLocation:function t(e,n){var i=sn.NONE;i=this._label.getLocation(n);if(!e.isNull(n)){var r=e.getLocation(n);if(i!==sn.BOUNDARY)i=r}return i},setLabel:function t(){if(arguments.length===2&&Number.isInteger(arguments[1])&&Number.isInteger(arguments[0])){var e=arguments[0],n=arguments[1];if(this._label===null){this._label=new yn(e,n)}else this._label.setLocation(e,n)}else return In.prototype.setLabel.apply(this,arguments)},getEdges:function t(){return this._edges},mergeLabel:function t(){if(arguments[0]instanceof Rn){var e=arguments[0];this.mergeLabel(e._label)}else if(arguments[0]instanceof yn){var n=arguments[0];for(var i=0;i<2;i++){var r=this.computeMergedLocation(n,i);var a=this._label.getLocation(i);if(a===sn.NONE)this._label.setLocation(i,r)}}},add:function t(e){this._edges.insert(e);e.setNode(this)},setLabelBoundary:function t(e){if(this._label===null)return null;var n=sn.NONE;if(this._label!==null)n=this._label.getLocation(e);var i=null;switch(n){case sn.BOUNDARY:i=sn.INTERIOR;break;case sn.INTERIOR:i=sn.BOUNDARY;break;default:i=sn.BOUNDARY;break}this._label.setLocation(e,i)},interfaces_:function t(){return[]},getClass:function t(){return Rn}});function Nn(){}$(Nn.prototype,{createNode:function t(e){return new Rn(e,null)},interfaces_:function t(){return[]},getClass:function t(){return Nn}});function An(){Nn.apply(this)}X(An,Nn);$(An.prototype,{createNode:function t(e){return new Rn(e,new Mn)},interfaces_:function t(){return[]},getClass:function t(){return An}});function Ln(){this.nodeMap=new Ft;this.nodeFact=null;var t=arguments[0];this.nodeFact=t}$(Ln.prototype,{find:function t(e){return this.nodeMap.get(e)},addNode:function t(){if(arguments[0]instanceof Q){var e=arguments[0];var n=this.nodeMap.get(e);if(n===null){n=this.nodeFact.createNode(e);this.nodeMap.put(e,n)}return n}else if(arguments[0]instanceof Rn){var i=arguments[0];var n=this.nodeMap.get(i.getCoordinate());if(n===null){this.nodeMap.put(i.getCoordinate(),i);return i}n.mergeLabel(i);return n}},print:function t(e){for(var n=this.iterator();n.hasNext();){var i=n.next();i.print(e)}},iterator:function t(){return this.nodeMap.values().iterator()},values:function t(){return this.nodeMap.values()},getBoundaryNodes:function t(e){var n=new _t;for(var i=this.iterator();i.hasNext();){var r=i.next();if(r.getLabel().getLocation(e)===sn.BOUNDARY)n.add(r)}return n},add:function t(e){var n=e.getCoordinate();var i=this.addNode(n);i.add(e)},interfaces_:function t(){return[]},getClass:function t(){return Ln}});function Pn(){this._edge=null;this._label=null;this._node=null;this._p0=null;this._p1=null;this._dx=null;this._dy=null;this._quadrant=null;if(arguments.length===1){var t=arguments[0];this._edge=t}else if(arguments.length===3){var e=arguments[0],n=arguments[1],i=arguments[2];Pn.call(this,e,n,i,null)}else if(arguments.length===4){var r=arguments[0],a=arguments[1],o=arguments[2],s=arguments[3];Pn.call(this,r);this.init(a,o);this._label=s}}$(Pn.prototype,{compareDirection:function t(e){if(this._dx===e._dx&&this._dy===e._dy)return 0;if(this._quadrant>e._quadrant)return 1;if(this._quadrant<e._quadrant)return-1;return ge.index(e._p0,e._p1,this._p1)},getDy:function t(){return this._dy},getCoordinate:function t(){return this._p0},setNode:function t(e){this._node=e},print:function t(e){var n=Math.atan2(this._dy,this._dx);var i=this.getClass().getName();var r=i.lastIndexOf(".");var a=i.substring(r+1);e.print("  "+a+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+n+"   "+this._label)},compareTo:function t(e){var n=e;return this.compareDirection(n)},getDirectedCoordinate:function t(){return this._p1},getDx:function t(){return this._dx},getLabel:function t(){return this._label},getEdge:function t(){return this._edge},getQuadrant:function t(){return this._quadrant},getNode:function t(){return this._node},toString:function t(){var e=Math.atan2(this._dy,this._dx);var n=this.getClass().getName();var i=n.lastIndexOf(".");var r=n.substring(i+1);return"  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label},computeLabel:function t(e){},init:function t(e,n){this._p0=e;this._p1=n;this._dx=n.x-e.x;this._dy=n.y-e.y;this._quadrant=Tn.quadrant(this._dx,this._dy);Z.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")},interfaces_:function t(){return[H]},getClass:function t(){return Pn}});function Dn(){this._isForward=null;this._isInResult=false;this._isVisited=false;this._sym=null;this._next=null;this._nextMin=null;this._edgeRing=null;this._minEdgeRing=null;this._depth=[0,-999,-999];var t=arguments[0],e=arguments[1];Pn.call(this,t);this._isForward=e;if(e){this.init(t.getCoordinate(0),t.getCoordinate(1))}else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}X(Dn,Pn);$(Dn.prototype,{getNextMin:function t(){return this._nextMin},getDepth:function t(e){return this._depth[e]},setVisited:function t(e){this._isVisited=e},computeDirectedLabel:function t(){this._label=new yn(this._edge.getLabel());if(!this._isForward)this._label.flip()},getNext:function t(){return this._next},setDepth:function t(e,n){if(this._depth[e]!==-999){if(this._depth[e]!==n)throw new mn("assigned depths do not match",this.getCoordinate())}this._depth[e]=n},isInteriorAreaEdge:function t(){var t=true;for(var e=0;e<2;e++){if(!(this._label.isArea(e)&&this._label.getLocation(e,ln.LEFT)===sn.INTERIOR&&this._label.getLocation(e,ln.RIGHT)===sn.INTERIOR)){t=false}}return t},setNextMin:function t(e){this._nextMin=e},print:function t(e){Pn.prototype.print.call(this,e);e.print(" "+this._depth[ln.LEFT]+"/"+this._depth[ln.RIGHT]);e.print(" ("+this.getDepthDelta()+")");if(this._isInResult)e.print(" inResult")},setMinEdgeRing:function t(e){this._minEdgeRing=e},isLineEdge:function t(){var e=this._label.isLine(0)||this._label.isLine(1);var n=!this._label.isArea(0)||this._label.allPositionsEqual(0,sn.EXTERIOR);var i=!this._label.isArea(1)||this._label.allPositionsEqual(1,sn.EXTERIOR);return e&&n&&i},setEdgeRing:function t(e){this._edgeRing=e},getMinEdgeRing:function t(){return this._minEdgeRing},getDepthDelta:function t(){var e=this._edge.getDepthDelta();if(!this._isForward)e=-e;return e},setInResult:function t(e){this._isInResult=e},getSym:function t(){return this._sym},isForward:function t(){return this._isForward},getEdge:function t(){return this._edge},printEdge:function t(e){this.print(e);e.print(" ");if(this._isForward)this._edge.print(e);else this._edge.printReverse(e)},setSym:function t(e){this._sym=e},setVisitedEdge:function t(e){this.setVisited(e);this._sym.setVisited(e)},setEdgeDepths:function t(e,n){var i=this.getEdge().getDepthDelta();if(!this._isForward)i=-i;var r=1;if(e===ln.LEFT)r=-1;var a=ln.opposite(e);var o=i*r;var s=n+o;this.setDepth(e,n);this.setDepth(a,s)},getEdgeRing:function t(){return this._edgeRing},isInResult:function t(){return this._isInResult},setNext:function t(e){this._next=e},isVisited:function t(){return this._isVisited},interfaces_:function t(){return[]},getClass:function t(){return Dn}});Dn.depthFactor=function(t,e){if(t===sn.EXTERIOR&&e===sn.INTERIOR)return 1;else if(t===sn.INTERIOR&&e===sn.EXTERIOR)return-1;return 0};function jn(){this._edges=new _t;this._nodes=null;this._edgeEndList=new _t;if(arguments.length===0){this._nodes=new Ln(new Nn)}else if(arguments.length===1){var t=arguments[0];this._nodes=new Ln(t)}}$(jn.prototype,{printEdges:function t(e){e.println("Edges:");for(var n=0;n<this._edges.size();n++){e.println("edge "+n+":");var i=this._edges.get(n);i.print(e);i.eiList.print(e)}},find:function t(e){return this._nodes.find(e)},addNode:function t(){if(arguments[0]instanceof Rn){var e=arguments[0];return this._nodes.addNode(e)}else if(arguments[0]instanceof Q){var n=arguments[0];return this._nodes.addNode(n)}},getNodeIterator:function t(){return this._nodes.iterator()},linkResultDirectedEdges:function t(){for(var e=this._nodes.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}},debugPrintln:function t(e){xt.out.println(e)},isBoundaryNode:function t(e,n){var i=this._nodes.find(n);if(i===null)return false;var r=i.getLabel();if(r!==null&&r.getLocation(e)===sn.BOUNDARY)return true;return false},linkAllDirectedEdges:function t(){for(var e=this._nodes.iterator();e.hasNext();){var n=e.next();n.getEdges().linkAllDirectedEdges()}},matchInSameDirection:function t(e,n,i,r){if(!e.equals(i))return false;if(ge.index(e,n,r)===ge.COLLINEAR&&Tn.quadrant(e,n)===Tn.quadrant(i,r))return true;return false},getEdgeEnds:function t(){return this._edgeEndList},debugPrint:function t(e){xt.out.print(e)},getEdgeIterator:function t(){return this._edges.iterator()},findEdgeInSameDirection:function t(e,n){for(var i=0;i<this._edges.size();i++){var r=this._edges.get(i);var a=r.getCoordinates();if(this.matchInSameDirection(e,n,a[0],a[1]))return r;if(this.matchInSameDirection(e,n,a[a.length-1],a[a.length-2]))return r}return null},insertEdge:function t(e){this._edges.add(e)},findEdgeEnd:function t(e){for(var n=this.getEdgeEnds().iterator();n.hasNext();){var i=n.next();if(i.getEdge()===e)return i}return null},addEdges:function t(e){for(var n=e.iterator();n.hasNext();){var i=n.next();this._edges.add(i);var r=new Dn(i,true);var a=new Dn(i,false);r.setSym(a);a.setSym(r);this.add(r);this.add(a)}},add:function t(e){this._nodes.add(e);this._edgeEndList.add(e)},getNodes:function t(){return this._nodes.values()},findEdge:function t(e,n){for(var i=0;i<this._edges.size();i++){var r=this._edges.get(i);var a=r.getCoordinates();if(e.equals(a[0])&&n.equals(a[1]))return r}return null},interfaces_:function t(){return[]},getClass:function t(){return jn}});jn.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}};function kn(){this._geometryFactory=new Ze;this._geomGraph=null;this._disconnectedRingcoord=null;var t=arguments[0];this._geomGraph=t}$(kn.prototype,{visitInteriorRing:function t(e,n){var i=e.getCoordinates();var r=i[0];var a=kn.findDifferentPoint(i,r);var o=n.findEdgeInSameDirection(r,a);var s=n.findEdgeEnd(o);var l=null;if(s.getLabel().getLocation(0,ln.RIGHT)===sn.INTERIOR){l=s}else if(s.getSym().getLabel().getLocation(0,ln.RIGHT)===sn.INTERIOR){l=s.getSym()}Z.isTrue(l!==null,"unable to find dirEdge with Interior on RHS");this.visitLinkedDirectedEdges(l)},visitShellInteriors:function t(e,n){if(e instanceof _e){var i=e;this.visitInteriorRing(i.getExteriorRing(),n)}if(e instanceof we){var r=e;for(var a=0;a<r.getNumGeometries();a++){var i=r.getGeometryN(a);this.visitInteriorRing(i.getExteriorRing(),n)}}},getCoordinate:function t(){return this._disconnectedRingcoord},setInteriorEdgesInResult:function t(e){for(var n=e.getEdgeEnds().iterator();n.hasNext();){var i=n.next();if(i.getLabel().getLocation(0,ln.RIGHT)===sn.INTERIOR){i.setInResult(true)}}},visitLinkedDirectedEdges:function t(e){var n=e;var i=e;do{Z.isTrue(i!==null,"found null Directed Edge");i.setVisited(true);i=i.getNext()}while(i!==n)},buildEdgeRings:function t(e){var n=new _t;for(var i=e.iterator();i.hasNext();){var r=i.next();if(r.isInResult()&&r.getEdgeRing()===null){var a=new xn(r,this._geometryFactory);a.linkDirectedEdgesForMinimalEdgeRings();var o=a.buildMinimalRings();n.addAll(o)}}return n},hasUnvisitedShellEdge:function t(e){for(var n=0;n<e.size();n++){var i=e.get(n);if(i.isHole())continue;var r=i.getEdges();var a=r.get(0);if(a.getLabel().getLocation(0,ln.RIGHT)!==sn.INTERIOR)continue;for(var o=0;o<r.size();o++){a=r.get(o);if(!a.isVisited()){this._disconnectedRingcoord=a.getCoordinate();return true}}}return false},isInteriorsConnected:function t(){var e=new _t;this._geomGraph.computeSplitEdges(e);var n=new jn(new An);n.addEdges(e);this.setInteriorEdgesInResult(n);n.linkResultDirectedEdges();var i=this.buildEdgeRings(n.getEdgeEnds());this.visitShellInteriors(this._geomGraph.getGeometry(),n);return!this.hasUnvisitedShellEdge(i)},interfaces_:function t(){return[]},getClass:function t(){return kn}});kn.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++){if(!t[n].equals(e))return t[n]}return null};function Fn(){this._boundaryRule=st.OGC_SFS_BOUNDARY_RULE;this._isIn=null;this._numBoundaries=null;if(arguments.length===0){}else if(arguments.length===1){var t=arguments[0];if(t===null)throw new U("Rule must be non-null");this._boundaryRule=t}}$(Fn.prototype,{locateInPolygonRing:function t(e,n){if(!n.getEnvelopeInternal().intersects(e))return sn.EXTERIOR;return gn.locateInRing(e,n.getCoordinates())},intersects:function t(e,n){return this.locate(e,n)!==sn.EXTERIOR},updateLocationInfo:function t(e){if(e===sn.INTERIOR)this._isIn=true;if(e===sn.BOUNDARY)this._numBoundaries++},computeLocation:function t(e,n){if(n instanceof ce){this.updateLocationInfo(this.locateOnPoint(e,n))}if(n instanceof le){this.updateLocationInfo(this.locateOnLineString(e,n))}else if(n instanceof _e){this.updateLocationInfo(this.locateInPolygon(e,n))}else if(n instanceof Xt){var i=n;for(var r=0;r<i.getNumGeometries();r++){var a=i.getGeometryN(r);this.updateLocationInfo(this.locateOnLineString(e,a))}}else if(n instanceof we){var o=n;for(var r=0;r<o.getNumGeometries();r++){var s=o.getGeometryN(r);this.updateLocationInfo(this.locateInPolygon(e,s))}}else if(n instanceof qt){var l=new Cn(n);while(l.hasNext()){var u=l.next();if(u!==n)this.computeLocation(e,u)}}},locateOnPoint:function t(e,n){var i=n.getCoordinate();if(i.equals2D(e))return sn.INTERIOR;return sn.EXTERIOR},locateOnLineString:function t(e,n){if(!n.getEnvelopeInternal().intersects(e))return sn.EXTERIOR;var i=n.getCoordinateSequence();if(!n.isClosed()){if(e.equals(i.getCoordinate(0))||e.equals(i.getCoordinate(i.size()-1))){return sn.BOUNDARY}}if(gn.isOnLine(e,i)){return sn.INTERIOR}return sn.EXTERIOR},locateInPolygon:function t(e,n){if(n.isEmpty())return sn.EXTERIOR;var i=n.getExteriorRing();var r=this.locateInPolygonRing(e,i);if(r===sn.EXTERIOR)return sn.EXTERIOR;if(r===sn.BOUNDARY)return sn.BOUNDARY;for(var a=0;a<n.getNumInteriorRing();a++){var o=n.getInteriorRingN(a);var s=this.locateInPolygonRing(e,o);if(s===sn.INTERIOR)return sn.EXTERIOR;if(s===sn.BOUNDARY)return sn.BOUNDARY}return sn.INTERIOR},locate:function t(e,n){if(n.isEmpty())return sn.EXTERIOR;if(n instanceof le){return this.locateOnLineString(e,n)}else if(n instanceof _e){return this.locateInPolygon(e,n)}this._isIn=false;this._numBoundaries=0;this.computeLocation(e,n);if(this._boundaryRule.isInBoundary(this._numBoundaries))return sn.BOUNDARY;if(this._numBoundaries>0||this._isIn)return sn.INTERIOR;return sn.EXTERIOR},interfaces_:function t(){return[]},getClass:function t(){return Fn}});function $n(){this.mce=null;this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t;this.chainIndex=e}$($n.prototype,{computeIntersections:function t(e,n){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,n)},interfaces_:function t(){return[]},getClass:function t(){return $n}});function Gn(){this._label=null;this._xValue=null;this._eventType=null;this._insertEvent=null;this._deleteEventIndex=null;this._obj=null;if(arguments.length===2){var t=arguments[0],e=arguments[1];this._eventType=Gn.DELETE;this._xValue=t;this._insertEvent=e}else if(arguments.length===3){var n=arguments[0],i=arguments[1],r=arguments[2];this._eventType=Gn.INSERT;this._label=n;this._xValue=i;this._obj=r}}$(Gn.prototype,{isDelete:function t(){return this._eventType===Gn.DELETE},setDeleteEventIndex:function t(e){this._deleteEventIndex=e},getObject:function t(){return this._obj},compareTo:function t(e){var n=e;if(this._xValue<n._xValue)return-1;if(this._xValue>n._xValue)return 1;if(this._eventType<n._eventType)return-1;if(this._eventType>n._eventType)return 1;return 0},getInsertEvent:function t(){return this._insertEvent},isInsert:function t(){return this._eventType===Gn.INSERT},isSameLabel:function t(e){if(this._label===null)return false;return this._label===e._label},getDeleteEventIndex:function t(){return this._deleteEventIndex},interfaces_:function t(){return[H]},getClass:function t(){return Gn}});Gn.INSERT=1;Gn.DELETE=2;function Un(){}$(Un.prototype,{interfaces_:function t(){return[]},getClass:function t(){return Un}});var Yn={reverseOrder:function t(){return{compare:function t(e,n){return n.compareTo(e)}}},min:function t(e){Yn.sort(e);return e.get(0)},sort:function t(e,n){var i=e.toArray();if(n){Vt.sort(i,n)}else{Vt.sort(i)}var r=e.iterator();for(var a=0,o=i.length;a<o;a++){r.next();r.set(i[a])}},singletonList:function t(e){var n=new _t;n.add(e);return n}};var Vn=Yn;function Hn(){this._hasIntersection=false;this._hasProper=false;this._hasProperInterior=false;this._properIntersectionPoint=null;this._li=null;this._includeProper=null;this._recordIsolated=null;this._isSelfIntersection=null;this._numIntersections=0;this.numTests=0;this._bdyNodes=null;this._isDone=false;this._isDoneWhenProperInt=false;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t;this._includeProper=e;this._recordIsolated=n}$(Hn.prototype,{isTrivialIntersection:function t(e,n,i,r){if(e===i){if(this._li.getIntersectionNum()===1){if(Hn.isAdjacentSegments(n,r))return true;if(e.isClosed()){var a=e.getNumPoints()-1;if(n===0&&r===a||r===0&&n===a){return true}}}}return false},getProperIntersectionPoint:function t(){return this._properIntersectionPoint},setIsDoneIfProperInt:function t(e){this._isDoneWhenProperInt=e},hasProperInteriorIntersection:function t(){return this._hasProperInterior},isBoundaryPointInternal:function t(e,n){for(var i=n.iterator();i.hasNext();){var r=i.next();var a=r.getCoordinate();if(e.isIntersection(a))return true}return false},hasProperIntersection:function t(){return this._hasProper},hasIntersection:function t(){return this._hasIntersection},isDone:function t(){return this._isDone},isBoundaryPoint:function t(e,n){if(n===null)return false;if(this.isBoundaryPointInternal(e,n[0]))return true;if(this.isBoundaryPointInternal(e,n[1]))return true;return false},setBoundaryNodes:function t(e,n){this._bdyNodes=new Array(2).fill(null);this._bdyNodes[0]=e;this._bdyNodes[1]=n},addIntersections:function t(e,n,i,r){if(e===i&&n===r)return null;this.numTests++;var a=e.getCoordinates()[n];var o=e.getCoordinates()[n+1];var s=i.getCoordinates()[r];var l=i.getCoordinates()[r+1];this._li.computeIntersection(a,o,s,l);if(this._li.hasIntersection()){if(this._recordIsolated){e.setIsolated(false);i.setIsolated(false)}this._numIntersections++;if(!this.isTrivialIntersection(e,n,i,r)){this._hasIntersection=true;if(this._includeProper||!this._li.isProper()){e.addIntersections(this._li,n,0);i.addIntersections(this._li,r,1)}if(this._li.isProper()){this._properIntersectionPoint=this._li.getIntersection(0).copy();this._hasProper=true;if(this._isDoneWhenProperInt){this._isDone=true}if(!this.isBoundaryPoint(this._li,this._bdyNodes))this._hasProperInterior=true}}}},interfaces_:function t(){return[]},getClass:function t(){return Hn}});Hn.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1};function zn(){Un.apply(this);this.events=new _t;this.nOverlaps=null}X(zn,Un);$(zn.prototype,{prepareEvents:function t(){Vn.sort(this.events);for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isDelete()){n.getInsertEvent().setDeleteEventIndex(e)}}},computeIntersections:function t(){if(arguments.length===1){var e=arguments[0];this.nOverlaps=0;this.prepareEvents();for(var n=0;n<this.events.size();n++){var i=this.events.get(n);if(i.isInsert()){this.processOverlaps(n,i.getDeleteEventIndex(),i,e)}if(e.isDone()){break}}}else if(arguments.length===3){if(arguments[2]instanceof Hn&&tt(arguments[0],vt)&&tt(arguments[1],vt)){var r=arguments[0],a=arguments[1],o=arguments[2];this.addEdges(r,r);this.addEdges(a,a);this.computeIntersections(o)}else if(typeof arguments[2]==="boolean"&&tt(arguments[0],vt)&&arguments[1]instanceof Hn){var s=arguments[0],l=arguments[1],u=arguments[2];if(u)this.addEdges(s,null);else this.addEdges(s);this.computeIntersections(l)}}},addEdge:function t(e,n){var i=e.getMonotoneChainEdge();var r=i.getStartIndexes();for(var a=0;a<r.length-1;a++){var o=new $n(i,a);var s=new Gn(n,i.getMinX(a),o);this.events.add(s);this.events.add(new Gn(i.getMaxX(a),s))}},processOverlaps:function t(e,n,i,r){var a=i.getObject();for(var o=e;o<n;o++){var s=this.events.get(o);if(s.isInsert()){var l=s.getObject();if(!i.isSameLabel(s)){a.computeIntersections(l,r);this.nOverlaps++}}}},addEdges:function t(){if(arguments.length===1){var e=arguments[0];for(var n=e.iterator();n.hasNext();){var i=n.next();this.addEdge(i,i)}}else if(arguments.length===2){var r=arguments[0],a=arguments[1];for(var n=r.iterator();n.hasNext();){var i=n.next();this.addEdge(i,a)}}},interfaces_:function t(){return[]},getClass:function t(){return zn}});function Bn(){}$(Bn.prototype,{visitItem:function t(e){},interfaces_:function t(){return[]},getClass:function t(){return Bn}});function Wn(){this._min=V.POSITIVE_INFINITY;this._max=V.NEGATIVE_INFINITY}$(Wn.prototype,{getMin:function t(){return this._min},intersects:function t(e,n){if(this._min>n||this._max<e)return false;return true},getMax:function t(){return this._max},toString:function t(){return an.toLineString(new Q(this._min,0),new Q(this._max,0))},interfaces_:function t(){return[]},getClass:function t(){return Wn}});function qn(){}$(qn.prototype,{compare:function t(e,n){var i=e;var r=n;var a=(i._min+i._max)/2;var o=(r._min+r._max)/2;if(a<o)return-1;if(a>o)return 1;return 0},interfaces_:function t(){return[B]},getClass:function t(){return qn}});Wn.NodeComparator=qn;function Xn(){Wn.apply(this);this._item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._min=t;this._max=e;this._item=n}X(Xn,Wn);$(Xn.prototype,{query:function t(e,n,i){if(!this.intersects(e,n))return null;i.visitItem(this._item)},interfaces_:function t(){return[]},getClass:function t(){return Xn}});function Kn(){Wn.apply(this);this._node1=null;this._node2=null;var t=arguments[0],e=arguments[1];this._node1=t;this._node2=e;this.buildExtent(this._node1,this._node2)}X(Kn,Wn);$(Kn.prototype,{buildExtent:function t(e,n){this._min=Math.min(e._min,n._min);this._max=Math.max(e._max,n._max)},query:function t(e,n,i){if(!this.intersects(e,n)){return null}if(this._node1!==null)this._node1.query(e,n,i);if(this._node2!==null)this._node2.query(e,n,i)},interfaces_:function t(){return[]},getClass:function t(){return Kn}});function Zn(){this._leaves=new _t;this._root=null;this._level=0}$(Zn.prototype,{buildTree:function t(){Vn.sort(this._leaves,new Wn.NodeComparator);var e=this._leaves;var n=null;var i=new _t;while(true){this.buildLevel(e,i);if(i.size()===1)return i.get(0);n=e;e=i;i=n}},insert:function t(e,n,i){if(this._root!==null)throw new IllegalStateException("Index cannot be added to once it has been queried");this._leaves.add(new Xn(e,n,i))},query:function t(e,n,i){this.init();this._root.query(e,n,i)},buildRoot:function t(){if(this._root!==null)return null;this._root=this.buildTree()},printNode:function t(e){xt.out.println(an.toLineString(new Q(e._min,this._level),new Q(e._max,this._level)))},init:function t(){if(this._root!==null)return null;this.buildRoot()},buildLevel:function t(e,n){this._level++;n.clear();for(var i=0;i<e.size();i+=2){var r=e.get(i);var a=i+1<e.size()?e.get(i):null;if(a===null){n.add(r)}else{var o=new Kn(e.get(i),e.get(i+1));n.add(o)}}},interfaces_:function t(){return[]},getClass:function t(){return Zn}});function Qn(){this.p0=null;this.p1=null;if(arguments.length===0){Qn.call(this,new Q,new Q)}else if(arguments.length===1){var t=arguments[0];Qn.call(this,t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0=e;this.p1=n}else if(arguments.length===4){var i=arguments[0],r=arguments[1],a=arguments[2],o=arguments[3];Qn.call(this,new Q(i,r),new Q(a,o))}}$(Qn.prototype,{minX:function t(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function t(){if(arguments[0]instanceof Qn){var e=arguments[0];var n=ge.index(this.p0,this.p1,e.p0);var i=ge.index(this.p0,this.p1,e.p1);if(n>=0&&i>=0)return Math.max(n,i);if(n<=0&&i<=0)return Math.max(n,i);return 0}else if(arguments[0]instanceof Q){var r=arguments[0];return ge.index(this.p0,this.p1,r)}},toGeometry:function t(e){return e.createLineString([this.p0,this.p1])},isVertical:function t(){return this.p0.x===this.p1.x},equals:function t(e){if(!(e instanceof Qn)){return false}var n=e;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)},intersection:function t(e){var n=new pn;n.computeIntersection(this.p0,this.p1,e.p0,e.p1);if(n.hasIntersection())return n.getIntersection(0);return null},project:function t(){if(arguments[0]instanceof Q){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new Q(e);var n=this.projectionFactor(e);var i=new Q;i.x=this.p0.x+n*(this.p1.x-this.p0.x);i.y=this.p0.y+n*(this.p1.y-this.p0.y);return i}else if(arguments[0]instanceof Qn){var r=arguments[0];var a=this.projectionFactor(r.p0);var o=this.projectionFactor(r.p1);if(a>=1&&o>=1)return null;if(a<=0&&o<=0)return null;var s=this.project(r.p0);if(a<0)s=this.p0;if(a>1)s=this.p1;var l=this.project(r.p1);if(o<0)l=this.p0;if(o>1)l=this.p1;return new Qn(s,l)}},normalize:function t(){if(this.p1.compareTo(this.p0)<0)this.reverse()},angle:function t(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function t(e){if(e===0)return this.p0;return this.p1},distancePerpendicular:function t(e){return hn.pointToLinePerpendicular(e,this.p0,this.p1)},minY:function t(){return Math.min(this.p0.y,this.p1.y)},midPoint:function t(){return Qn.midPoint(this.p0,this.p1)},projectionFactor:function t(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var n=this.p1.x-this.p0.x;var i=this.p1.y-this.p0.y;var r=n*n+i*i;if(r<=0)return V.NaN;var a=((e.x-this.p0.x)*n+(e.y-this.p0.y)*i)/r;return a},closestPoints:function t(e){var n=this.intersection(e);if(n!==null){return[n,n]}var i=new Array(2).fill(null);var r=V.MAX_VALUE;var a=null;var o=this.closestPoint(e.p0);r=o.distance(e.p0);i[0]=o;i[1]=e.p0;var s=this.closestPoint(e.p1);a=s.distance(e.p1);if(a<r){r=a;i[0]=s;i[1]=e.p1}var l=e.closestPoint(this.p0);a=l.distance(this.p0);if(a<r){r=a;i[0]=this.p0;i[1]=l}var u=e.closestPoint(this.p1);a=u.distance(this.p1);if(a<r){r=a;i[0]=this.p1;i[1]=u}return i},closestPoint:function t(e){var n=this.projectionFactor(e);if(n>0&&n<1){return this.project(e)}var i=this.p0.distance(e);var r=this.p1.distance(e);if(i<r)return this.p0;return this.p1},maxX:function t(){return Math.max(this.p0.x,this.p1.x)},getLength:function t(){return this.p0.distance(this.p1)},compareTo:function t(e){var n=e;var i=this.p0.compareTo(n.p0);if(i!==0)return i;return this.p1.compareTo(n.p1)},reverse:function t(){var e=this.p0;this.p0=this.p1;this.p1=e},equalsTopo:function t(e){return this.p0.equals(e.p0)&&this.p1.equals(e.p1)||this.p0.equals(e.p1)&&this.p1.equals(e.p0)},lineIntersection:function t(e){try{var n=fn.intersection(this.p0,this.p1,e.p0,e.p1);return n}catch(t){if(t instanceof cn){}else throw t}finally{}return null},maxY:function t(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function t(e,n){var i=this.p0.x+e*(this.p1.x-this.p0.x);var r=this.p0.y+e*(this.p1.y-this.p0.y);var a=this.p1.x-this.p0.x;var o=this.p1.y-this.p0.y;var s=Math.sqrt(a*a+o*o);var l=0;var u=0;if(n!==0){if(s<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");l=n*a/s;u=n*o/s}var c=i-u;var f=r+l;var h=new Q(c,f);return h},setCoordinates:function t(){if(arguments.length===1){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.p0.x=n.x;this.p0.y=n.y;this.p1.x=i.x;this.p1.y=i.y}},segmentFraction:function t(e){var n=this.projectionFactor(e);if(n<0)n=0;else if(n>1||V.isNaN(n))n=1;return n},toString:function t(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function t(){return this.p0.y===this.p1.y},distance:function t(){if(arguments[0]instanceof Qn){var e=arguments[0];return hn.segmentToSegment(this.p0,this.p1,e.p0,e.p1)}else if(arguments[0]instanceof Q){var n=arguments[0];return hn.pointToSegment(n,this.p0,this.p1)}},pointAlong:function t(e){var n=new Q;n.x=this.p0.x+e*(this.p1.x-this.p0.x);n.y=this.p0.y+e*(this.p1.y-this.p0.y);return n},hashCode:function t(){var e=java.lang.Double.doubleToLongBits(this.p0.x);e^=java.lang.Double.doubleToLongBits(this.p0.y)*31;var n=Math.trunc(e)^Math.trunc(e>>32);var i=java.lang.Double.doubleToLongBits(this.p1.x);i^=java.lang.Double.doubleToLongBits(this.p1.y)*31;var r=Math.trunc(i)^Math.trunc(i>>32);return n^r},interfaces_:function t(){return[H,W]},getClass:function t(){return Qn}});Qn.midPoint=function(t,e){return new Q((t.x+e.x)/2,(t.y+e.y)/2)};Qn.serialVersionUID=0x2d2172135f411c00;function Jn(){this._lines=null;this._isForcedToLineString=false;if(arguments.length===1){var t=arguments[0];this._lines=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this._lines=e;this._isForcedToLineString=n}}$(Jn.prototype,{filter:function t(e){if(this._isForcedToLineString&&e instanceof be){var n=e.getFactory().createLineString(e.getCoordinateSequence());this._lines.add(n);return null}if(e instanceof le)this._lines.add(e)},setForceToLineString:function t(e){this._isForcedToLineString=e},interfaces_:function t(){return[it]},getClass:function t(){return Jn}});Jn.getGeometry=function(){if(arguments.length===1){var t=arguments[0];return t.getFactory().buildGeometry(Jn.getLines(t))}else if(arguments.length===2){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Jn.getLines(e,n))}};Jn.getLines=function(){if(arguments.length===1){var t=arguments[0];return Jn.getLines(t,false)}else if(arguments.length===2){if(tt(arguments[0],dt)&&tt(arguments[1],dt)){var e=arguments[0],n=arguments[1];for(var i=e.iterator();i.hasNext();){var r=i.next();Jn.getLines(r,n)}return n}else if(arguments[0]instanceof at&&typeof arguments[1]==="boolean"){var a=arguments[0],o=arguments[1];var s=new _t;a.apply(new Jn(s,o));return s}else if(arguments[0]instanceof at&&tt(arguments[1],dt)){var l=arguments[0],u=arguments[1];if(l instanceof le){u.add(l)}else{l.apply(new Jn(u))}return u}}else if(arguments.length===3){if(typeof arguments[2]==="boolean"&&tt(arguments[0],dt)&&tt(arguments[1],dt)){var c=arguments[0],f=arguments[1],h=arguments[2];for(var i=c.iterator();i.hasNext();){var r=i.next();Jn.getLines(r,f,h)}return f}else if(typeof arguments[2]==="boolean"&&arguments[0]instanceof at&&tt(arguments[1],dt)){var d=arguments[0],p=arguments[1],v=arguments[2];d.apply(new Jn(p,v));return p}}};function ti(){this._items=new _t}$(ti.prototype,{visitItem:function t(e){this._items.add(e)},getItems:function t(){return this._items},interfaces_:function t(){return[Bn]},getClass:function t(){return ti}});function ei(){this._index=null;var t=arguments[0];if(!(tt(t,me)||t instanceof be))throw new U("Argument must be Polygonal or LinearRing");this._index=new ii(t)}$(ei.prototype,{locate:function t(e){var n=new vn(e);var i=new ni(n);this._index.query(e.y,e.y,i);return n.getLocation()},interfaces_:function t(){return[Sn]},getClass:function t(){return ei}});function ni(){this._counter=null;var t=arguments[0];this._counter=t}$(ni.prototype,{visitItem:function t(e){var n=e;this._counter.countSegment(n.getCoordinate(0),n.getCoordinate(1))},interfaces_:function t(){return[Bn]},getClass:function t(){return ni}});function ii(){this._index=new Zn;var t=arguments[0];this.init(t)}$(ii.prototype,{init:function t(e){var n=Jn.getLines(e);for(var i=n.iterator();i.hasNext();){var r=i.next();var a=r.getCoordinates();this.addLine(a)}},addLine:function t(e){for(var n=1;n<e.length;n++){var i=new Qn(e[n-1],e[n]);var r=Math.min(i.p0.y,i.p1.y);var a=Math.max(i.p0.y,i.p1.y);this._index.insert(r,a,i)}},query:function t(){if(arguments.length===2){var e=arguments[0],n=arguments[1];var i=new ti;this._index.query(e,n,i);return i.getItems()}else if(arguments.length===3){var r=arguments[0],a=arguments[1],o=arguments[2];this._index.query(r,a,o)}},interfaces_:function t(){return[]},getClass:function t(){return ii}});ei.SegmentVisitor=ni;ei.IntervalIndexedGeometry=ii;function ri(){this.coord=null;this.segmentIndex=null;this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new Q(t);this.segmentIndex=e;this.dist=n}$(ri.prototype,{getSegmentIndex:function t(){return this.segmentIndex},getCoordinate:function t(){return this.coord},print:function t(e){e.print(this.coord);e.print(" seg # = "+this.segmentIndex);e.println(" dist = "+this.dist)},compareTo:function t(e){var n=e;return this.compare(n.segmentIndex,n.dist)},isEndPoint:function t(e){if(this.segmentIndex===0&&this.dist===0)return true;if(this.segmentIndex===e)return true;return false},toString:function t(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function t(){return this.dist},compare:function t(e,n){if(this.segmentIndex<e)return-1;if(this.segmentIndex>e)return 1;if(this.dist<n)return-1;if(this.dist>n)return 1;return 0},interfaces_:function t(){return[H]},getClass:function t(){return ri}});function ai(){this._nodeMap=new Ft;this.edge=null;var t=arguments[0];this.edge=t}$(ai.prototype,{print:function t(e){e.println("Intersections:");for(var n=this.iterator();n.hasNext();){var i=n.next();i.print(e)}},iterator:function t(){return this._nodeMap.values().iterator()},addSplitEdges:function t(e){this.addEndpoints();var n=this.iterator();var i=n.next();while(n.hasNext()){var r=n.next();var a=this.createSplitEdge(i,r);e.add(a);i=r}},addEndpoints:function t(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0);this.add(this.edge.pts[e],e,0)},createSplitEdge:function t(e,n){var i=n.segmentIndex-e.segmentIndex+2;var r=this.edge.pts[n.segmentIndex];var a=n.dist>0||!n.coord.equals2D(r);if(!a){i--}var o=new Array(i).fill(null);var s=0;o[s++]=new Q(e.coord);for(var l=e.segmentIndex+1;l<=n.segmentIndex;l++){o[s++]=this.edge.pts[l]}if(a)o[s]=n.coord;return new ci(o,new yn(this.edge._label))},add:function t(e,n,i){var r=new ri(e,n,i);var a=this._nodeMap.get(r);if(a!==null){return a}this._nodeMap.put(r,r);return r},isIntersection:function t(e){for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.coord.equals(e))return true}return false},interfaces_:function t(){return[]},getClass:function t(){return ai}});function oi(){this._matrix=null;if(arguments.length===0){this._matrix=Array(3).fill().map(function(){return Array(3)});this.setAll(zt.FALSE)}else if(arguments.length===1){if(typeof arguments[0]==="string"){var t=arguments[0];oi.call(this);this.set(t)}else if(arguments[0]instanceof oi){var e=arguments[0];oi.call(this);this._matrix[sn.INTERIOR][sn.INTERIOR]=e._matrix[sn.INTERIOR][sn.INTERIOR];this._matrix[sn.INTERIOR][sn.BOUNDARY]=e._matrix[sn.INTERIOR][sn.BOUNDARY];this._matrix[sn.INTERIOR][sn.EXTERIOR]=e._matrix[sn.INTERIOR][sn.EXTERIOR];this._matrix[sn.BOUNDARY][sn.INTERIOR]=e._matrix[sn.BOUNDARY][sn.INTERIOR];this._matrix[sn.BOUNDARY][sn.BOUNDARY]=e._matrix[sn.BOUNDARY][sn.BOUNDARY];this._matrix[sn.BOUNDARY][sn.EXTERIOR]=e._matrix[sn.BOUNDARY][sn.EXTERIOR];this._matrix[sn.EXTERIOR][sn.INTERIOR]=e._matrix[sn.EXTERIOR][sn.INTERIOR];this._matrix[sn.EXTERIOR][sn.BOUNDARY]=e._matrix[sn.EXTERIOR][sn.BOUNDARY];this._matrix[sn.EXTERIOR][sn.EXTERIOR]=e._matrix[sn.EXTERIOR][sn.EXTERIOR]}}}$(oi.prototype,{isIntersects:function t(){return!this.isDisjoint()},isCovers:function t(){var e=oi.isTrue(this._matrix[sn.INTERIOR][sn.INTERIOR])||oi.isTrue(this._matrix[sn.INTERIOR][sn.BOUNDARY])||oi.isTrue(this._matrix[sn.BOUNDARY][sn.INTERIOR])||oi.isTrue(this._matrix[sn.BOUNDARY][sn.BOUNDARY]);return e&&this._matrix[sn.EXTERIOR][sn.INTERIOR]===zt.FALSE&&this._matrix[sn.EXTERIOR][sn.BOUNDARY]===zt.FALSE},isCoveredBy:function t(){var e=oi.isTrue(this._matrix[sn.INTERIOR][sn.INTERIOR])||oi.isTrue(this._matrix[sn.INTERIOR][sn.BOUNDARY])||oi.isTrue(this._matrix[sn.BOUNDARY][sn.INTERIOR])||oi.isTrue(this._matrix[sn.BOUNDARY][sn.BOUNDARY]);return e&&this._matrix[sn.INTERIOR][sn.EXTERIOR]===zt.FALSE&&this._matrix[sn.BOUNDARY][sn.EXTERIOR]===zt.FALSE},set:function t(){if(arguments.length===1){var e=arguments[0];for(var n=0;n<e.length;n++){var i=Math.trunc(n/3);var r=n%3;this._matrix[i][r]=zt.toDimensionValue(e.charAt(n))}}else if(arguments.length===3){var a=arguments[0],o=arguments[1],s=arguments[2];this._matrix[a][o]=s}},isContains:function t(){return oi.isTrue(this._matrix[sn.INTERIOR][sn.INTERIOR])&&this._matrix[sn.EXTERIOR][sn.INTERIOR]===zt.FALSE&&this._matrix[sn.EXTERIOR][sn.BOUNDARY]===zt.FALSE},setAtLeast:function t(){if(arguments.length===1){var e=arguments[0];for(var n=0;n<e.length;n++){var i=Math.trunc(n/3);var r=n%3;this.setAtLeast(i,r,zt.toDimensionValue(e.charAt(n)))}}else if(arguments.length===3){var a=arguments[0],o=arguments[1],s=arguments[2];if(this._matrix[a][o]<s){this._matrix[a][o]=s}}},setAtLeastIfValid:function t(e,n,i){if(e>=0&&n>=0){this.setAtLeast(e,n,i)}},isWithin:function t(){return oi.isTrue(this._matrix[sn.INTERIOR][sn.INTERIOR])&&this._matrix[sn.INTERIOR][sn.EXTERIOR]===zt.FALSE&&this._matrix[sn.BOUNDARY][sn.EXTERIOR]===zt.FALSE},isTouches:function t(e,n){if(e>n){return this.isTouches(n,e)}if(e===zt.A&&n===zt.A||e===zt.L&&n===zt.L||e===zt.L&&n===zt.A||e===zt.P&&n===zt.A||e===zt.P&&n===zt.L){return this._matrix[sn.INTERIOR][sn.INTERIOR]===zt.FALSE&&(oi.isTrue(this._matrix[sn.INTERIOR][sn.BOUNDARY])||oi.isTrue(this._matrix[sn.BOUNDARY][sn.INTERIOR])||oi.isTrue(this._matrix[sn.BOUNDARY][sn.BOUNDARY]))}return false},isOverlaps:function t(e,n){if(e===zt.P&&n===zt.P||e===zt.A&&n===zt.A){return oi.isTrue(this._matrix[sn.INTERIOR][sn.INTERIOR])&&oi.isTrue(this._matrix[sn.INTERIOR][sn.EXTERIOR])&&oi.isTrue(this._matrix[sn.EXTERIOR][sn.INTERIOR])}if(e===zt.L&&n===zt.L){return this._matrix[sn.INTERIOR][sn.INTERIOR]===1&&oi.isTrue(this._matrix[sn.INTERIOR][sn.EXTERIOR])&&oi.isTrue(this._matrix[sn.EXTERIOR][sn.INTERIOR])}return false},isEquals:function t(e,n){if(e!==n){return false}return oi.isTrue(this._matrix[sn.INTERIOR][sn.INTERIOR])&&this._matrix[sn.INTERIOR][sn.EXTERIOR]===zt.FALSE&&this._matrix[sn.BOUNDARY][sn.EXTERIOR]===zt.FALSE&&this._matrix[sn.EXTERIOR][sn.INTERIOR]===zt.FALSE&&this._matrix[sn.EXTERIOR][sn.BOUNDARY]===zt.FALSE},toString:function t(){var e=new oe("123456789");for(var n=0;n<3;n++){for(var i=0;i<3;i++){e.setCharAt(3*n+i,zt.toDimensionSymbol(this._matrix[n][i]))}}return e.toString()},setAll:function t(e){for(var n=0;n<3;n++){for(var i=0;i<3;i++){this._matrix[n][i]=e}}},get:function t(e,n){return this._matrix[e][n]},transpose:function t(){var e=this._matrix[1][0];this._matrix[1][0]=this._matrix[0][1];this._matrix[0][1]=e;e=this._matrix[2][0];this._matrix[2][0]=this._matrix[0][2];this._matrix[0][2]=e;e=this._matrix[2][1];this._matrix[2][1]=this._matrix[1][2];this._matrix[1][2]=e;return this},matches:function t(e){if(e.length!==9){throw new U("Should be length 9: "+e)}for(var n=0;n<3;n++){for(var i=0;i<3;i++){if(!oi.matches(this._matrix[n][i],e.charAt(3*n+i))){return false}}}return true},add:function t(e){for(var n=0;n<3;n++){for(var i=0;i<3;i++){this.setAtLeast(n,i,e.get(n,i))}}},isDisjoint:function t(){return this._matrix[sn.INTERIOR][sn.INTERIOR]===zt.FALSE&&this._matrix[sn.INTERIOR][sn.BOUNDARY]===zt.FALSE&&this._matrix[sn.BOUNDARY][sn.INTERIOR]===zt.FALSE&&this._matrix[sn.BOUNDARY][sn.BOUNDARY]===zt.FALSE},isCrosses:function t(e,n){if(e===zt.P&&n===zt.L||e===zt.P&&n===zt.A||e===zt.L&&n===zt.A){return oi.isTrue(this._matrix[sn.INTERIOR][sn.INTERIOR])&&oi.isTrue(this._matrix[sn.INTERIOR][sn.EXTERIOR])}if(e===zt.L&&n===zt.P||e===zt.A&&n===zt.P||e===zt.A&&n===zt.L){return oi.isTrue(this._matrix[sn.INTERIOR][sn.INTERIOR])&&oi.isTrue(this._matrix[sn.EXTERIOR][sn.INTERIOR])}if(e===zt.L&&n===zt.L){return this._matrix[sn.INTERIOR][sn.INTERIOR]===0}return false},interfaces_:function t(){return[z]},getClass:function t(){return oi}});oi.matches=function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]==="string"){var t=arguments[0],e=arguments[1];if(e===zt.SYM_DONTCARE){return true}if(e===zt.SYM_TRUE&&(t>=0||t===zt.TRUE)){return true}if(e===zt.SYM_FALSE&&t===zt.FALSE){return true}if(e===zt.SYM_P&&t===zt.P){return true}if(e===zt.SYM_L&&t===zt.L){return true}if(e===zt.SYM_A&&t===zt.A){return true}return false}else if(typeof arguments[0]==="string"&&typeof arguments[1]==="string"){var n=arguments[0],i=arguments[1];var r=new oi(n);return r.matches(i)}};oi.isTrue=function(t){if(t>=0||t===zt.TRUE){return true}return false};function si(){}$(si.prototype,{getChainStartIndices:function t(e){var n=0;var i=new _t;i.add(new de(n));do{var r=this.findChainEnd(e,n);i.add(new de(r));n=r}while(n<e.length-1);var a=si.toIntArray(i);return a},findChainEnd:function t(e,n){var i=Tn.quadrant(e[n],e[n+1]);var r=n+1;while(r<e.length){var a=Tn.quadrant(e[r-1],e[r]);if(a!==i)break;r++}return r-1},interfaces_:function t(){return[]},getClass:function t(){return si}});si.toIntArray=function(t){var e=new Array(t.size()).fill(null);for(var n=0;n<e.length;n++){e[n]=t.get(n).intValue()}return e};function li(){this.e=null;this.pts=null;this.startIndex=null;var t=arguments[0];this.e=t;this.pts=t.getCoordinates();var e=new si;this.startIndex=e.getChainStartIndices(this.pts)}$(li.prototype,{getCoordinates:function t(){return this.pts},getMaxX:function t(e){var n=this.pts[this.startIndex[e]].x;var i=this.pts[this.startIndex[e+1]].x;return n>i?n:i},getMinX:function t(e){var n=this.pts[this.startIndex[e]].x;var i=this.pts[this.startIndex[e+1]].x;return n<i?n:i},computeIntersectsForChain:function t(){if(arguments.length===4){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],n,n.startIndex[i],n.startIndex[i+1],r)}else if(arguments.length===6){var a=arguments[0],o=arguments[1],s=arguments[2],l=arguments[3],u=arguments[4],c=arguments[5];if(o-a===1&&u-l===1){c.addIntersections(this.e,a,s.e,l);return null}if(!this.overlaps(a,o,s,l,u))return null;var f=Math.trunc((a+o)/2);var h=Math.trunc((l+u)/2);if(a<f){if(l<h)this.computeIntersectsForChain(a,f,s,l,h,c);if(h<u)this.computeIntersectsForChain(a,f,s,h,u,c)}if(f<o){if(l<h)this.computeIntersectsForChain(f,o,s,l,h,c);if(h<u)this.computeIntersectsForChain(f,o,s,h,u,c)}}},overlaps:function t(e,n,i,r,a){return rt.intersects(this.pts[e],this.pts[n],i.pts[r],i.pts[a])},getStartIndexes:function t(){return this.startIndex},computeIntersects:function t(e,n){for(var i=0;i<this.startIndex.length-1;i++){for(var r=0;r<e.startIndex.length-1;r++){this.computeIntersectsForChain(i,e,r,n)}}},interfaces_:function t(){return[]},getClass:function t(){return li}});function ui(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++){for(var e=0;e<3;e++){this._depth[t][e]=ui.NULL_VALUE}}}$(ui.prototype,{getDepth:function t(e,n){return this._depth[e][n]},setDepth:function t(e,n,i){this._depth[e][n]=i},isNull:function t(){if(arguments.length===0){for(var e=0;e<2;e++){for(var n=0;n<3;n++){if(this._depth[e][n]!==ui.NULL_VALUE)return false}}return true}else if(arguments.length===1){var i=arguments[0];return this._depth[i][1]===ui.NULL_VALUE}else if(arguments.length===2){var r=arguments[0],a=arguments[1];return this._depth[r][a]===ui.NULL_VALUE}},normalize:function t(){for(var e=0;e<2;e++){if(!this.isNull(e)){var n=this._depth[e][1];if(this._depth[e][2]<n)n=this._depth[e][2];if(n<0)n=0;for(var i=1;i<3;i++){var r=0;if(this._depth[e][i]>n)r=1;this._depth[e][i]=r}}}},getDelta:function t(e){return this._depth[e][ln.RIGHT]-this._depth[e][ln.LEFT]},getLocation:function t(e,n){if(this._depth[e][n]<=0)return sn.EXTERIOR;return sn.INTERIOR},toString:function t(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},add:function t(){if(arguments.length===1){var e=arguments[0];for(var n=0;n<2;n++){for(var i=1;i<3;i++){var r=e.getLocation(n,i);if(r===sn.EXTERIOR||r===sn.INTERIOR){if(this.isNull(n,i)){this._depth[n][i]=ui.depthAtLocation(r)}else this._depth[n][i]+=ui.depthAtLocation(r)}}}}else if(arguments.length===3){var a=arguments[0],o=arguments[1],s=arguments[2];if(s===sn.INTERIOR)this._depth[a][o]++}},interfaces_:function t(){return[]},getClass:function t(){return ui}});ui.depthAtLocation=function(t){if(t===sn.EXTERIOR)return 0;if(t===sn.INTERIOR)return 1;return ui.NULL_VALUE};ui.NULL_VALUE=-1;function ci(){In.apply(this);this.pts=null;this._env=null;this.eiList=new ai(this);this._name=null;this._mce=null;this._isIsolated=true;this._depth=new ui;this._depthDelta=0;if(arguments.length===1){var t=arguments[0];ci.call(this,t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.pts=e;this._label=n}}X(ci,In);$(ci.prototype,{getDepth:function t(){return this._depth},getCollapsedEdge:function t(){var e=new Array(2).fill(null);e[0]=this.pts[0];e[1]=this.pts[1];var n=new ci(e,yn.toLineLabel(this._label));return n},isIsolated:function t(){return this._isIsolated},getCoordinates:function t(){return this.pts},setIsolated:function t(e){this._isIsolated=e},setName:function t(e){this._name=e},equals:function t(e){if(!(e instanceof ci))return false;var n=e;if(this.pts.length!==n.pts.length)return false;var i=true;var r=true;var a=this.pts.length;for(var o=0;o<this.pts.length;o++){if(!this.pts[o].equals2D(n.pts[o])){i=false}if(!this.pts[o].equals2D(n.pts[--a])){r=false}if(!i&&!r)return false}return true},getCoordinate:function t(){if(arguments.length===0){if(this.pts.length>0)return this.pts[0];return null}else if(arguments.length===1){var e=arguments[0];return this.pts[e]}},print:function t(e){e.print("edge "+this._name+": ");e.print("LINESTRING (");for(var n=0;n<this.pts.length;n++){if(n>0)e.print(",");e.print(this.pts[n].x+" "+this.pts[n].y)}e.print(")  "+this._label+" "+this._depthDelta)},computeIM:function t(e){ci.updateIM(this._label,e)},isCollapsed:function t(){if(!this._label.isArea())return false;if(this.pts.length!==3)return false;if(this.pts[0].equals(this.pts[2]))return true;return false},isClosed:function t(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function t(){return this.pts.length-1},getDepthDelta:function t(){return this._depthDelta},getNumPoints:function t(){return this.pts.length},printReverse:function t(e){e.print("edge "+this._name+": ");for(var n=this.pts.length-1;n>=0;n--){e.print(this.pts[n]+" ")}e.println("")},getMonotoneChainEdge:function t(){if(this._mce===null)this._mce=new li(this);return this._mce},getEnvelope:function t(){if(this._env===null){this._env=new rt;for(var e=0;e<this.pts.length;e++){this._env.expandToInclude(this.pts[e])}}return this._env},addIntersection:function t(e,n,i,r){var a=new Q(e.getIntersection(r));var o=n;var s=e.getEdgeDistance(i,r);var l=o+1;if(l<this.pts.length){var u=this.pts[l];if(a.equals2D(u)){o=l;s=0}}var c=this.eiList.add(a,o,s)},toString:function t(){var e=new oe;e.append("edge "+this._name+": ");e.append("LINESTRING (");for(var n=0;n<this.pts.length;n++){if(n>0)e.append(",");e.append(this.pts[n].x+" "+this.pts[n].y)}e.append(")  "+this._label+" "+this._depthDelta);return e.toString()},isPointwiseEqual:function t(e){if(this.pts.length!==e.pts.length)return false;for(var n=0;n<this.pts.length;n++){if(!this.pts[n].equals2D(e.pts[n])){return false}}return true},setDepthDelta:function t(e){this._depthDelta=e},getEdgeIntersectionList:function t(){return this.eiList},addIntersections:function t(e,n,i){for(var r=0;r<e.getIntersectionNum();r++){this.addIntersection(e,n,i,r)}},interfaces_:function t(){return[]},getClass:function t(){return ci}});ci.updateIM=function(){if(arguments.length===2&&arguments[1]instanceof oi&&arguments[0]instanceof yn){var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,ln.ON),t.getLocation(1,ln.ON),1);if(t.isArea()){e.setAtLeastIfValid(t.getLocation(0,ln.LEFT),t.getLocation(1,ln.LEFT),2);e.setAtLeastIfValid(t.getLocation(0,ln.RIGHT),t.getLocation(1,ln.RIGHT),2)}}else return In.prototype.updateIM.apply(this,arguments)};function fi(){jn.apply(this);this._parentGeom=null;this._lineEdgeMap=new qe;this._boundaryNodeRule=null;this._useBoundaryDeterminationRule=true;this._argIndex=null;this._boundaryNodes=null;this._hasTooFewPoints=false;this._invalidPoint=null;this._areaPtLocator=null;this._ptLocator=new Fn;if(arguments.length===2){var t=arguments[0],e=arguments[1];fi.call(this,t,e,st.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],r=arguments[2];this._argIndex=n;this._parentGeom=i;this._boundaryNodeRule=r;if(i!==null){this.add(i)}}}X(fi,jn);$(fi.prototype,{insertBoundaryPoint:function t(e,n){var i=this._nodes.addNode(n);var r=i.getLabel();var a=1;var o=sn.NONE;o=r.getLocation(e,ln.ON);if(o===sn.BOUNDARY)a++;var s=fi.determineBoundary(this._boundaryNodeRule,a);r.setLocation(e,s)},computeSelfNodes:function t(){if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.computeSelfNodes(e,n,false)}else if(arguments.length===3){var i=arguments[0],r=arguments[1],a=arguments[2];var o=new Hn(i,true,false);o.setIsDoneIfProperInt(a);var s=this.createEdgeSetIntersector();var l=this._parentGeom instanceof be||this._parentGeom instanceof _e||this._parentGeom instanceof we;var u=r||!l;s.computeIntersections(this._edges,o,u);this.addSelfIntersectionNodes(this._argIndex);return o}},computeSplitEdges:function t(e){for(var n=this._edges.iterator();n.hasNext();){var i=n.next();i.eiList.addSplitEdges(e)}},computeEdgeIntersections:function t(e,n,i){var r=new Hn(n,i,true);r.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes());var a=this.createEdgeSetIntersector();a.computeIntersections(this._edges,e._edges,r);return r},getGeometry:function t(){return this._parentGeom},getBoundaryNodeRule:function t(){return this._boundaryNodeRule},hasTooFewPoints:function t(){return this._hasTooFewPoints},addPoint:function t(){if(arguments[0]instanceof ce){var e=arguments[0];var n=e.getCoordinate();this.insertPoint(this._argIndex,n,sn.INTERIOR)}else if(arguments[0]instanceof Q){var i=arguments[0];this.insertPoint(this._argIndex,i,sn.INTERIOR)}},addPolygon:function t(e){this.addPolygonRing(e.getExteriorRing(),sn.EXTERIOR,sn.INTERIOR);for(var n=0;n<e.getNumInteriorRing();n++){var i=e.getInteriorRingN(n);this.addPolygonRing(i,sn.INTERIOR,sn.EXTERIOR)}},addEdge:function t(e){this.insertEdge(e);var n=e.getCoordinates();this.insertPoint(this._argIndex,n[0],sn.BOUNDARY);this.insertPoint(this._argIndex,n[n.length-1],sn.BOUNDARY)},addLineString:function t(e){var n=St.removeRepeatedPoints(e.getCoordinates());if(n.length<2){this._hasTooFewPoints=true;this._invalidPoint=n[0];return null}var i=new ci(n,new yn(this._argIndex,sn.INTERIOR));this._lineEdgeMap.put(e,i);this.insertEdge(i);Z.isTrue(n.length>=2,"found LineString with single point");this.insertBoundaryPoint(this._argIndex,n[0]);this.insertBoundaryPoint(this._argIndex,n[n.length-1])},getInvalidPoint:function t(){return this._invalidPoint},getBoundaryPoints:function t(){var e=this.getBoundaryNodes();var n=new Array(e.size()).fill(null);var i=0;for(var r=e.iterator();r.hasNext();){var a=r.next();n[i++]=a.getCoordinate().copy()}return n},getBoundaryNodes:function t(){if(this._boundaryNodes===null)this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex);return this._boundaryNodes},addSelfIntersectionNode:function t(e,n,i){if(this.isBoundaryNode(e,n))return null;if(i===sn.BOUNDARY&&this._useBoundaryDeterminationRule)this.insertBoundaryPoint(e,n);else this.insertPoint(e,n,i)},addPolygonRing:function t(e,n,i){if(e.isEmpty())return null;var r=St.removeRepeatedPoints(e.getCoordinates());if(r.length<4){this._hasTooFewPoints=true;this._invalidPoint=r[0];return null}var a=n;var o=i;if(ge.isCCW(r)){a=i;o=n}var s=new ci(r,new yn(this._argIndex,sn.BOUNDARY,a,o));this._lineEdgeMap.put(e,s);this.insertEdge(s);this.insertPoint(this._argIndex,r[0],sn.BOUNDARY)},insertPoint:function t(e,n,i){var r=this._nodes.addNode(n);var a=r.getLabel();if(a===null){r._label=new yn(e,i)}else a.setLocation(e,i)},createEdgeSetIntersector:function t(){return new zn},addSelfIntersectionNodes:function t(e){for(var n=this._edges.iterator();n.hasNext();){var i=n.next();var r=i.getLabel().getLocation(e);for(var a=i.eiList.iterator();a.hasNext();){var o=a.next();this.addSelfIntersectionNode(e,o.coord,r)}}},add:function t(){if(arguments.length===1&&arguments[0]instanceof at){var e=arguments[0];if(e.isEmpty())return null;if(e instanceof we)this._useBoundaryDeterminationRule=false;if(e instanceof _e)this.addPolygon(e);else if(e instanceof le)this.addLineString(e);else if(e instanceof ce)this.addPoint(e);else if(e instanceof ye)this.addCollection(e);else if(e instanceof Xt)this.addCollection(e);else if(e instanceof we)this.addCollection(e);else if(e instanceof qt)this.addCollection(e);else throw new UnsupportedOperationException(e.getClass().getName())}else return jn.prototype.add.apply(this,arguments)},addCollection:function t(e){for(var n=0;n<e.getNumGeometries();n++){var i=e.getGeometryN(n);this.add(i)}},locate:function t(e){if(tt(this._parentGeom,me)&&this._parentGeom.getNumGeometries()>50){if(this._areaPtLocator===null){this._areaPtLocator=new ei(this._parentGeom)}return this._areaPtLocator.locate(e)}return this._ptLocator.locate(e,this._parentGeom)},findEdge:function t(){if(arguments.length===1&&arguments[0]instanceof le){var e=arguments[0];return this._lineEdgeMap.get(e)}else return jn.prototype.findEdge.apply(this,arguments)},interfaces_:function t(){return[]},getClass:function t(){return fi}});fi.determineBoundary=function(t,e){return t.isInBoundary(e)?sn.BOUNDARY:sn.INTERIOR};function hi(){}$(hi.prototype,{createEdgeEndForNext:function t(e,n,i,r){var a=i.segmentIndex+1;if(a>=e.getNumPoints()&&r===null)return null;var o=e.getCoordinate(a);if(r!==null&&r.segmentIndex===i.segmentIndex)o=r.coord;var s=new Pn(e,i.coord,o,new yn(e.getLabel()));n.add(s)},createEdgeEndForPrev:function t(e,n,i,r){var a=i.segmentIndex;if(i.dist===0){if(a===0)return null;a--}var o=e.getCoordinate(a);if(r!==null&&r.segmentIndex>=a)o=r.coord;var s=new yn(e.getLabel());s.flip();var l=new Pn(e,i.coord,o,s);n.add(l)},computeEdgeEnds:function t(){if(arguments.length===1){var e=arguments[0];var n=new _t;for(var i=e;i.hasNext();){var r=i.next();this.computeEdgeEnds(r,n)}return n}else if(arguments.length===2){var a=arguments[0],o=arguments[1];var s=a.getEdgeIntersectionList();s.addEndpoints();var l=s.iterator();var u=null;var c=null;if(!l.hasNext())return null;var f=l.next();do{u=c;c=f;f=null;if(l.hasNext())f=l.next();if(c!==null){this.createEdgeEndForPrev(a,o,c,u);this.createEdgeEndForNext(a,o,c,f)}}while(c!==null)}},interfaces_:function t(){return[]},getClass:function t(){return hi}});function di(){this._edgeEnds=new _t;if(arguments.length===1){var t=arguments[0];di.call(this,null,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];Pn.call(this,n.getEdge(),n.getCoordinate(),n.getDirectedCoordinate(),new yn(n.getLabel()));this.insert(n)}}X(di,Pn);$(di.prototype,{insert:function t(e){this._edgeEnds.add(e)},print:function t(e){e.println("EdgeEndBundle--\x3e Label: "+this._label);for(var n=this.iterator();n.hasNext();){var i=n.next();i.print(e);e.println()}},iterator:function t(){return this._edgeEnds.iterator()},getEdgeEnds:function t(){return this._edgeEnds},computeLabelOn:function t(e,n){var i=0;var r=false;for(var a=this.iterator();a.hasNext();){var o=a.next();var s=o.getLabel().getLocation(e);if(s===sn.BOUNDARY)i++;if(s===sn.INTERIOR)r=true}var s=sn.NONE;if(r)s=sn.INTERIOR;if(i>0){s=fi.determineBoundary(n,i)}this._label.setLocation(e,s)},computeLabelSide:function t(e,n){for(var i=this.iterator();i.hasNext();){var r=i.next();if(r.getLabel().isArea()){var a=r.getLabel().getLocation(e,n);if(a===sn.INTERIOR){this._label.setLocation(e,n,sn.INTERIOR);return null}else if(a===sn.EXTERIOR)this._label.setLocation(e,n,sn.EXTERIOR)}}},getLabel:function t(){return this._label},computeLabelSides:function t(e){this.computeLabelSide(e,ln.LEFT);this.computeLabelSide(e,ln.RIGHT)},updateIM:function t(e){ci.updateIM(this._label,e)},computeLabel:function t(e){var n=false;for(var i=this.iterator();i.hasNext();){var r=i.next();if(r.getLabel().isArea())n=true}if(n)this._label=new yn(sn.NONE,sn.NONE,sn.NONE);else this._label=new yn(sn.NONE);for(var a=0;a<2;a++){this.computeLabelOn(a,e);if(n)this.computeLabelSides(a)}},interfaces_:function t(){return[]},getClass:function t(){return di}});function pi(){On.apply(this)}X(pi,On);$(pi.prototype,{updateIM:function t(e){for(var n=this.iterator();n.hasNext();){var i=n.next();i.updateIM(e)}},insert:function t(e){var n=this._edgeMap.get(e);if(n===null){n=new di(e);this.insertEdgeEnd(e,n)}else{n.insert(e)}},interfaces_:function t(){return[]},getClass:function t(){return pi}});function vi(){var t=arguments[0],e=arguments[1];Rn.call(this,t,e)}X(vi,Rn);$(vi.prototype,{updateIMFromEdges:function t(e){this._edges.updateIM(e)},computeIM:function t(e){e.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)},interfaces_:function t(){return[]},getClass:function t(){return vi}});function gi(){Nn.apply(this)}X(gi,Nn);$(gi.prototype,{createNode:function t(e){return new vi(e,new pi)},interfaces_:function t(){return[]},getClass:function t(){return gi}});function mi(){this._nodes=new Ln(new gi)}$(mi.prototype,{insertEdgeEnds:function t(e){for(var n=e.iterator();n.hasNext();){var i=n.next();this._nodes.add(i)}},getNodeIterator:function t(){return this._nodes.iterator()},copyNodesAndLabels:function t(e,n){for(var i=e.getNodeIterator();i.hasNext();){var r=i.next();var a=this._nodes.addNode(r.getCoordinate());a.setLabel(n,r.getLabel().getLocation(n))}},build:function t(e){this.computeIntersectionNodes(e,0);this.copyNodesAndLabels(e,0);var n=new hi;var i=n.computeEdgeEnds(e.getEdgeIterator());this.insertEdgeEnds(i)},computeIntersectionNodes:function t(e,n){for(var i=e.getEdgeIterator();i.hasNext();){var r=i.next();var a=r.getLabel().getLocation(n);for(var o=r.getEdgeIntersectionList().iterator();o.hasNext();){var s=o.next();var l=this._nodes.addNode(s.coord);if(a===sn.BOUNDARY)l.setLabelBoundary(n);else{if(l.getLabel().isNull(n))l.setLabel(n,sn.INTERIOR)}}}},interfaces_:function t(){return[]},getClass:function t(){return mi}});function _i(){this._li=new pn;this._geomGraph=null;this._nodeGraph=new mi;this._invalidPoint=null;var t=arguments[0];this._geomGraph=t}$(_i.prototype,{isNodeEdgeAreaLabelsConsistent:function t(){for(var e=this._nodeGraph.getNodeIterator();e.hasNext();){var n=e.next();if(!n.getEdges().isAreaLabelsConsistent(this._geomGraph)){this._invalidPoint=n.getCoordinate().copy();return false}}return true},getInvalidPoint:function t(){return this._invalidPoint},hasDuplicateRings:function t(){for(var e=this._nodeGraph.getNodeIterator();e.hasNext();){var n=e.next();for(var i=n.getEdges().iterator();i.hasNext();){var r=i.next();if(r.getEdgeEnds().size()>1){this._invalidPoint=r.getEdge().getCoordinate(0);return true}}}return false},isNodeConsistentArea:function t(){var e=this._geomGraph.computeSelfNodes(this._li,true,true);if(e.hasProperIntersection()){this._invalidPoint=e.getProperIntersectionPoint();return false}this._nodeGraph.build(this._geomGraph);return this.isNodeEdgeAreaLabelsConsistent()},interfaces_:function t(){return[]},getClass:function t(){return _i}});function yi(){}$(yi.prototype,{getBounds:function t(){},interfaces_:function t(){return[]},getClass:function t(){return yi}});function bi(){this._bounds=null;this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t;this._item=e}$(bi.prototype,{getItem:function t(){return this._item},getBounds:function t(){return this._bounds},interfaces_:function t(){return[yi,W]},getClass:function t(){return bi}});function wi(){this._size=null;this._items=null;this._size=0;this._items=new _t;this._items.add(null)}$(wi.prototype,{poll:function t(){if(this.isEmpty())return null;var e=this._items.get(1);this._items.set(1,this._items.get(this._size));this._size-=1;this.reorder(1);return e},size:function t(){return this._size},reorder:function t(e){var n=null;var i=this._items.get(e);for(;e*2<=this._size;e=n){n=e*2;if(n!==this._size&&this._items.get(n+1).compareTo(this._items.get(n))<0)n++;if(this._items.get(n).compareTo(i)<0)this._items.set(e,this._items.get(n));else break}this._items.set(e,i)},clear:function t(){this._size=0;this._items.clear()},isEmpty:function t(){return this._size===0},add:function t(e){this._items.add(null);this._size+=1;var n=this._size;this._items.set(0,e);for(;e.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2){this._items.set(n,this._items.get(Math.trunc(n/2)))}this._items.set(n,e)},interfaces_:function t(){return[]},getClass:function t(){return wi}});function xi(){this.normalOrder=null;var t=arguments[0];this.normalOrder=t}$(xi.prototype,{compare:function t(e,n){var i=e.getDistance();var r=n.getDistance();if(this.normalOrder){if(i>r){return 1}else if(i===r){return 0}return-1}else{if(i>r){return-1}else if(i===r){return 0}return 1}},interfaces_:function t(){return[B,W]},getClass:function t(){return xi}});function Si(){}$(Si.prototype,{insert:function t(e,n){},remove:function t(e,n){},query:function t(){if(arguments.length===1){var e=arguments[0]}else if(arguments.length===2){var n=arguments[0],i=arguments[1]}},interfaces_:function t(){return[]},getClass:function t(){return Si}});function Ci(){this._childBoundables=new _t;this._bounds=null;this._level=null;if(arguments.length===0){}else if(arguments.length===1){var t=arguments[0];this._level=t}}$(Ci.prototype,{getLevel:function t(){return this._level},size:function t(){return this._childBoundables.size()},getChildBoundables:function t(){return this._childBoundables},addChildBoundable:function t(e){Z.isTrue(this._bounds===null);this._childBoundables.add(e)},isEmpty:function t(){return this._childBoundables.isEmpty()},getBounds:function t(){if(this._bounds===null){this._bounds=this.computeBounds()}return this._bounds},interfaces_:function t(){return[yi,W]},getClass:function t(){return Ci}});Ci.serialVersionUID=0x5a1e55ec41369800;function Ei(){this._boundable1=null;this._boundable2=null;this._distance=null;this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t;this._boundable2=e;this._itemDistance=n;this._distance=this.distance()}$(Ei.prototype,{expandToQueue:function t(e,n){var i=Ei.isComposite(this._boundable1);var r=Ei.isComposite(this._boundable2);if(i&&r){if(Ei.area(this._boundable1)>Ei.area(this._boundable2)){this.expand(this._boundable1,this._boundable2,e,n);return null}else{this.expand(this._boundable2,this._boundable1,e,n);return null}}else if(i){this.expand(this._boundable1,this._boundable2,e,n);return null}else if(r){this.expand(this._boundable2,this._boundable1,e,n);return null}throw new U("neither boundable is composite")},isLeaves:function t(){return!(Ei.isComposite(this._boundable1)||Ei.isComposite(this._boundable2))},compareTo:function t(e){var n=e;if(this._distance<n._distance)return-1;if(this._distance>n._distance)return 1;return 0},expand:function t(e,n,i,r){var a=e.getChildBoundables();for(var o=a.iterator();o.hasNext();){var s=o.next();var l=new Ei(s,n,this._itemDistance);if(l.getDistance()<r){i.add(l)}}},getBoundable:function t(e){if(e===0)return this._boundable1;return this._boundable2},getDistance:function t(){return this._distance},distance:function t(){if(this.isLeaves()){return this._itemDistance.distance(this._boundable1,this._boundable2)}return this._boundable1.getBounds().distance(this._boundable2.getBounds())},interfaces_:function t(){return[H]},getClass:function t(){return Ei}});Ei.area=function(t){return t.getBounds().getArea()};Ei.isComposite=function(t){return t instanceof Ci};function Oi(){this._root=null;this._built=false;this._itemBoundables=new _t;this._nodeCapacity=null;if(arguments.length===0){Oi.call(this,Oi.DEFAULT_NODE_CAPACITY)}else if(arguments.length===1){var t=arguments[0];Z.isTrue(t>1,"Node capacity must be greater than 1");this._nodeCapacity=t}}$(Oi.prototype,{queryInternal:function t(){if(tt(arguments[2],Bn)&&arguments[0]instanceof Object&&arguments[1]instanceof Ci){var e=arguments[0],n=arguments[1],i=arguments[2];var r=n.getChildBoundables();for(var a=0;a<r.size();a++){var o=r.get(a);if(!this.getIntersectsOp().intersects(o.getBounds(),e)){continue}if(o instanceof Ci){this.queryInternal(e,o,i)}else if(o instanceof bi){i.visitItem(o.getItem())}else{Z.shouldNeverReachHere()}}}else if(tt(arguments[2],vt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ci){var s=arguments[0],l=arguments[1],u=arguments[2];var r=l.getChildBoundables();for(var a=0;a<r.size();a++){var o=r.get(a);if(!this.getIntersectsOp().intersects(o.getBounds(),s)){continue}if(o instanceof Ci){this.queryInternal(s,o,u)}else if(o instanceof bi){u.add(o.getItem())}else{Z.shouldNeverReachHere()}}}},getNodeCapacity:function t(){return this._nodeCapacity},lastNode:function t(e){return e.get(e.size()-1)},size:function t(){if(arguments.length===0){if(this.isEmpty()){return 0}this.build();return this.size(this._root)}else if(arguments.length===1){var e=arguments[0];var t=0;for(var n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof Ci){t+=this.size(i)}else if(i instanceof bi){t+=1}}return t}},removeItem:function t(e,n){var i=null;for(var r=e.getChildBoundables().iterator();r.hasNext();){var a=r.next();if(a instanceof bi){if(a.getItem()===n)i=a}}if(i!==null){e.getChildBoundables().remove(i);return true}return false},itemsTree:function t(){if(arguments.length===0){this.build();var e=this.itemsTree(this._root);if(e===null)return new _t;return e}else if(arguments.length===1){var n=arguments[0];var i=new _t;for(var r=n.getChildBoundables().iterator();r.hasNext();){var a=r.next();if(a instanceof Ci){var o=this.itemsTree(a);if(o!==null)i.add(o)}else if(a instanceof bi){i.add(a.getItem())}else{Z.shouldNeverReachHere()}}if(i.size()<=0)return null;return i}},insert:function t(e,n){Z.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built.");this._itemBoundables.add(new bi(e,n))},boundablesAtLevel:function t(){if(arguments.length===1){var e=arguments[0];var n=new _t;this.boundablesAtLevel(e,this._root,n);return n}else if(arguments.length===3){var i=arguments[0],r=arguments[1],a=arguments[2];Z.isTrue(i>-2);if(r.getLevel()===i){a.add(r);return null}for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();if(s instanceof Ci){this.boundablesAtLevel(i,s,a)}else{Z.isTrue(s instanceof bi);if(i===-1){a.add(s)}}}return null}},query:function t(){if(arguments.length===1){var e=arguments[0];this.build();var n=new _t;if(this.isEmpty()){return n}if(this.getIntersectsOp().intersects(this._root.getBounds(),e)){this.queryInternal(e,this._root,n)}return n}else if(arguments.length===2){var i=arguments[0],r=arguments[1];this.build();if(this.isEmpty()){return null}if(this.getIntersectsOp().intersects(this._root.getBounds(),i)){this.queryInternal(i,this._root,r)}}},build:function t(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1);this._itemBoundables=null;this._built=true},getRoot:function t(){this.build();return this._root},remove:function t(){if(arguments.length===2){var e=arguments[0],n=arguments[1];this.build();if(this.getIntersectsOp().intersects(this._root.getBounds(),e)){return this.remove(e,this._root,n)}return false}else if(arguments.length===3){var i=arguments[0],r=arguments[1],a=arguments[2];var o=this.removeItem(r,a);if(o)return true;var s=null;for(var l=r.getChildBoundables().iterator();l.hasNext();){var u=l.next();if(!this.getIntersectsOp().intersects(u.getBounds(),i)){continue}if(u instanceof Ci){o=this.remove(i,u,a);if(o){s=u;break}}}if(s!==null){if(s.getChildBoundables().isEmpty()){r.getChildBoundables().remove(s)}}return o}},createHigherLevels:function t(e,n){Z.isTrue(!e.isEmpty());var i=this.createParentBoundables(e,n+1);if(i.size()===1){return i.get(0)}return this.createHigherLevels(i,n+1)},depth:function t(){if(arguments.length===0){if(this.isEmpty()){return 0}this.build();return this.depth(this._root)}else if(arguments.length===1){var e=arguments[0];var n=0;for(var i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Ci){var a=this.depth(r);if(a>n)n=a}}return n+1}},createParentBoundables:function t(e,n){Z.isTrue(!e.isEmpty());var i=new _t;i.add(this.createNode(n));var r=new _t(e);Vn.sort(r,this.getComparator());for(var a=r.iterator();a.hasNext();){var o=a.next();if(this.lastNode(i).getChildBoundables().size()===this.getNodeCapacity()){i.add(this.createNode(n))}this.lastNode(i).addChildBoundable(o)}return i},isEmpty:function t(){if(!this._built)return this._itemBoundables.isEmpty();return this._root.isEmpty()},interfaces_:function t(){return[W]},getClass:function t(){return Oi}});Oi.compareDoubles=function(t,e){return t>e?1:t<e?-1:0};function Ti(){}Oi.IntersectsOp=Ti;Oi.serialVersionUID=-0x35ef64c82d4c5400;Oi.DEFAULT_NODE_CAPACITY=10;function Mi(){}$(Mi.prototype,{distance:function t(e,n){},interfaces_:function t(){return[]},getClass:function t(){return Mi}});function Ii(){if(arguments.length===0){Ii.call(this,Ii.DEFAULT_NODE_CAPACITY)}else if(arguments.length===1){var t=arguments[0];Oi.call(this,t)}}X(Ii,Oi);$(Ii.prototype,{createParentBoundablesFromVerticalSlices:function t(e,n){Z.isTrue(e.length>0);var i=new _t;for(var r=0;r<e.length;r++){i.addAll(this.createParentBoundablesFromVerticalSlice(e[r],n))}return i},createNode:function t(e){return new Ri(e)},size:function t(){if(arguments.length===0){return Oi.prototype.size.call(this)}else return Oi.prototype.size.apply(this,arguments)},insert:function t(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof rt){var e=arguments[0],n=arguments[1];if(e.isNull()){return null}Oi.prototype.insert.call(this,e,n)}else return Oi.prototype.insert.apply(this,arguments)},getIntersectsOp:function t(){return Ii.intersectsOp},verticalSlices:function t(e,n){var i=Math.trunc(Math.ceil(e.size()/n));var r=new Array(n).fill(null);var a=e.iterator();for(var o=0;o<n;o++){r[o]=new _t;var s=0;while(a.hasNext()&&s<i){var l=a.next();r[o].add(l);s++}}return r},query:function t(){if(arguments.length===1){var e=arguments[0];return Oi.prototype.query.call(this,e)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];Oi.prototype.query.call(this,n,i)}},getComparator:function t(){return Ii.yComparator},createParentBoundablesFromVerticalSlice:function t(e,n){return Oi.prototype.createParentBoundables.call(this,e,n)},remove:function t(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof rt){var e=arguments[0],n=arguments[1];return Oi.prototype.remove.call(this,e,n)}else return Oi.prototype.remove.apply(this,arguments)},depth:function t(){if(arguments.length===0){return Oi.prototype.depth.call(this)}else return Oi.prototype.depth.apply(this,arguments)},createParentBoundables:function t(e,n){Z.isTrue(!e.isEmpty());var i=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity()));var r=new _t(e);Vn.sort(r,Ii.xComparator);var a=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(a,n)},nearestNeighbour:function t(){if(arguments.length===1){if(tt(arguments[0],Mi)){var e=arguments[0];var n=new Ei(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(n)}else if(arguments[0]instanceof Ei){var i=arguments[0];return this.nearestNeighbour(i,V.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof Ii&&tt(arguments[1],Mi)){var r=arguments[0],a=arguments[1];var n=new Ei(this.getRoot(),r.getRoot(),a);return this.nearestNeighbour(n)}else if(arguments[0]instanceof Ei&&typeof arguments[1]==="number"){var o=arguments[0],s=arguments[1];var l=s;var u=null;var c=new wi;c.add(o);while(!c.isEmpty()&&l>0){var f=c.poll();var h=f.getDistance();if(h>=l)break;if(f.isLeaves()){l=h;u=f}else{f.expandToQueue(c,l)}}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}else if(arguments[0]instanceof Ei&&Number.isInteger(arguments[1])){var d=arguments[0],p=arguments[1];return this.nearestNeighbour(d,V.POSITIVE_INFINITY,p)}}else if(arguments.length===3){if(tt(arguments[2],Mi)&&arguments[0]instanceof rt&&arguments[1]instanceof Object){var v=arguments[0],g=arguments[1],m=arguments[2];var _=new bi(v,g);var n=new Ei(this.getRoot(),_,m);return this.nearestNeighbour(n)[0]}else if(Number.isInteger(arguments[2])&&arguments[0]instanceof Ei&&typeof arguments[1]==="number"){var y=arguments[0],b=arguments[1],w=arguments[2];var l=b;var c=new wi;c.add(y);var x=new java.util.PriorityQueue<Ei>(w,new xi(false));while(!c.isEmpty()&&l>=0){var f=c.poll();var h=f.getDistance();if(h>=l){break}if(f.isLeaves()){if(x.size()<w){x.add(f)}else{if(x.peek().getDistance()>h){x.poll();x.add(f)}l=x.peek().getDistance()}}else{f.expandToQueue(c,l)}}return Ii.getItems(x)}}else if(arguments.length===4){var S=arguments[0],C=arguments[1],E=arguments[2],O=arguments[3];var _=new bi(S,C);var n=new Ei(this.getRoot(),_,E);return this.nearestNeighbour(n,O)}},interfaces_:function t(){return[Si,W]},getClass:function t(){return Ii}});Ii.centreX=function(t){return Ii.avg(t.getMinX(),t.getMaxX())};Ii.avg=function(t,e){return(t+e)/2};Ii.getItems=function(t){var e=new Array(t.size()).fill(null);var n=t.iterator();var i=0;while(n.hasNext()){e[i]=n.next().getBoundable(0).getItem();i++}return e};Ii.centreY=function(t){return Ii.avg(t.getMinY(),t.getMaxY())};function Ri(){var t=arguments[0];Ci.call(this,t)}X(Ri,Ci);$(Ri.prototype,{computeBounds:function t(){var e=null;for(var n=this.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(e===null){e=new rt(i.getBounds())}else{e.expandToInclude(i.getBounds())}}return e},interfaces_:function t(){return[]},getClass:function t(){return Ri}});Ii.STRtreeNode=Ri;Ii.serialVersionUID=0x39920f7d5f261e0;Ii.xComparator={interfaces_:function t(){return[B]},compare:function t(e,n){return Oi.compareDoubles(Ii.centreX(e.getBounds()),Ii.centreX(n.getBounds()))}};Ii.yComparator={interfaces_:function t(){return[B]},compare:function t(e,n){return Oi.compareDoubles(Ii.centreY(e.getBounds()),Ii.centreY(n.getBounds()))}};Ii.intersectsOp={interfaces_:function t(){return[IntersectsOp]},intersects:function t(e,n){return e.intersects(n)}};Ii.DEFAULT_NODE_CAPACITY=10;function Ni(){this._graph=null;this._rings=new _t;this._totalEnv=new rt;this._index=null;this._nestedPt=null;var t=arguments[0];this._graph=t}$(Ni.prototype,{buildIndex:function t(){this._index=new Ii;for(var e=0;e<this._rings.size();e++){var n=this._rings.get(e);var i=n.getEnvelopeInternal();this._index.insert(i,n)}},getNestedPoint:function t(){return this._nestedPt},isNonNested:function t(){this.buildIndex();for(var e=0;e<this._rings.size();e++){var n=this._rings.get(e);var i=n.getCoordinates();var r=this._index.query(n.getEnvelopeInternal());for(var a=0;a<r.size();a++){var o=r.get(a);var s=o.getCoordinates();if(n===o)continue;if(!n.getEnvelopeInternal().intersects(o.getEnvelopeInternal()))continue;var l=Li.findPtNotNode(i,o,this._graph);if(l===null)continue;var u=gn.isInRing(l,s);if(u){this._nestedPt=l;return false}}}return true},add:function t(e){this._rings.add(e);this._totalEnv.expandToInclude(e.getEnvelopeInternal())},interfaces_:function t(){return[]},getClass:function t(){return Ni}});function Ai(){this._errorType=null;this._pt=null;if(arguments.length===1){var t=arguments[0];Ai.call(this,t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this._errorType=e;if(n!==null)this._pt=n.copy()}}$(Ai.prototype,{getErrorType:function t(){return this._errorType},getMessage:function t(){return Ai.errMsg[this._errorType]},getCoordinate:function t(){return this._pt},toString:function t(){var e="";if(this._pt!==null)e=" at or near point "+this._pt;return this.getMessage()+e},interfaces_:function t(){return[]},getClass:function t(){return Ai}});Ai.ERROR=0;Ai.REPEATED_POINT=1;Ai.HOLE_OUTSIDE_SHELL=2;Ai.NESTED_HOLES=3;Ai.DISCONNECTED_INTERIOR=4;Ai.SELF_INTERSECTION=5;Ai.RING_SELF_INTERSECTION=6;Ai.NESTED_SHELLS=7;Ai.DUPLICATE_RINGS=8;Ai.TOO_FEW_POINTS=9;Ai.INVALID_COORDINATE=10;Ai.RING_NOT_CLOSED=11;Ai.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];function Li(){this._parentGeometry=null;this._isSelfTouchingRingFormingHoleValid=false;this._validErr=null;var t=arguments[0];this._parentGeometry=t}$(Li.prototype,{checkInvalidCoordinates:function t(){if(arguments[0]instanceof Array){var e=arguments[0];for(var n=0;n<e.length;n++){if(!Li.isValid(e[n])){this._validErr=new Ai(Ai.INVALID_COORDINATE,e[n]);return null}}}else if(arguments[0]instanceof _e){var i=arguments[0];this.checkInvalidCoordinates(i.getExteriorRing().getCoordinates());if(this._validErr!==null)return null;for(var n=0;n<i.getNumInteriorRing();n++){this.checkInvalidCoordinates(i.getInteriorRingN(n).getCoordinates());if(this._validErr!==null)return null}}},checkHolesNotNested:function t(e,n){var i=new Ni(n);for(var r=0;r<e.getNumInteriorRing();r++){var a=e.getInteriorRingN(r);i.add(a)}var o=i.isNonNested();if(!o){this._validErr=new Ai(Ai.NESTED_HOLES,i.getNestedPoint())}},checkConsistentArea:function t(e){var n=new _i(e);var i=n.isNodeConsistentArea();if(!i){this._validErr=new Ai(Ai.SELF_INTERSECTION,n.getInvalidPoint());return null}if(n.hasDuplicateRings()){this._validErr=new Ai(Ai.DUPLICATE_RINGS,n.getInvalidPoint())}},isValid:function t(){this.checkValid(this._parentGeometry);return this._validErr===null},checkShellInsideHole:function t(e,n,i){var r=e.getCoordinates();var a=n.getCoordinates();var o=Li.findPtNotNode(r,n,i);if(o!==null){var s=gn.isInRing(o,a);if(!s){return o}}var l=Li.findPtNotNode(a,e,i);if(l!==null){var u=gn.isInRing(l,r);if(u){return l}return null}Z.shouldNeverReachHere("points in shell and hole appear to be equal");return null},checkNoSelfIntersectingRings:function t(e){for(var n=e.getEdgeIterator();n.hasNext();){var i=n.next();this.checkNoSelfIntersectingRing(i.getEdgeIntersectionList());if(this._validErr!==null)return null}},checkConnectedInteriors:function t(e){var n=new kn(e);if(!n.isInteriorsConnected())this._validErr=new Ai(Ai.DISCONNECTED_INTERIOR,n.getCoordinate())},checkNoSelfIntersectingRing:function t(e){var n=new Ut;var i=true;for(var r=e.iterator();r.hasNext();){var a=r.next();if(i){i=false;continue}if(n.contains(a.coord)){this._validErr=new Ai(Ai.RING_SELF_INTERSECTION,a.coord);return null}else{n.add(a.coord)}}},checkHolesInShell:function t(e,n){var i=e.getExteriorRing();var r=new ei(i);for(var a=0;a<e.getNumInteriorRing();a++){var o=e.getInteriorRingN(a);var s=Li.findPtNotNode(o.getCoordinates(),i,n);if(s===null)return null;var l=sn.EXTERIOR===r.locate(s);if(l){this._validErr=new Ai(Ai.HOLE_OUTSIDE_SHELL,s);return null}}},checkTooFewPoints:function t(e){if(e.hasTooFewPoints()){this._validErr=new Ai(Ai.TOO_FEW_POINTS,e.getInvalidPoint());return null}},getValidationError:function t(){this.checkValid(this._parentGeometry);return this._validErr},checkValid:function t(){if(arguments[0]instanceof ce){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof ye){var n=arguments[0];this.checkInvalidCoordinates(n.getCoordinates())}else if(arguments[0]instanceof be){var i=arguments[0];this.checkInvalidCoordinates(i.getCoordinates());if(this._validErr!==null)return null;this.checkClosedRing(i);if(this._validErr!==null)return null;var r=new fi(0,i);this.checkTooFewPoints(r);if(this._validErr!==null)return null;var a=new pn;r.computeSelfNodes(a,true,true);this.checkNoSelfIntersectingRings(r)}else if(arguments[0]instanceof le){var o=arguments[0];this.checkInvalidCoordinates(o.getCoordinates());if(this._validErr!==null)return null;var r=new fi(0,o);this.checkTooFewPoints(r)}else if(arguments[0]instanceof _e){var s=arguments[0];this.checkInvalidCoordinates(s);if(this._validErr!==null)return null;this.checkClosedRings(s);if(this._validErr!==null)return null;var r=new fi(0,s);this.checkTooFewPoints(r);if(this._validErr!==null)return null;this.checkConsistentArea(r);if(this._validErr!==null)return null;if(!this._isSelfTouchingRingFormingHoleValid){this.checkNoSelfIntersectingRings(r);if(this._validErr!==null)return null}this.checkHolesInShell(s,r);if(this._validErr!==null)return null;this.checkHolesNotNested(s,r);if(this._validErr!==null)return null;this.checkConnectedInteriors(r)}else if(arguments[0]instanceof we){var l=arguments[0];for(var u=0;u<l.getNumGeometries();u++){var c=l.getGeometryN(u);this.checkInvalidCoordinates(c);if(this._validErr!==null)return null;this.checkClosedRings(c);if(this._validErr!==null)return null}var r=new fi(0,l);this.checkTooFewPoints(r);if(this._validErr!==null)return null;this.checkConsistentArea(r);if(this._validErr!==null)return null;if(!this._isSelfTouchingRingFormingHoleValid){this.checkNoSelfIntersectingRings(r);if(this._validErr!==null)return null}for(var u=0;u<l.getNumGeometries();u++){var c=l.getGeometryN(u);this.checkHolesInShell(c,r);if(this._validErr!==null)return null}for(var u=0;u<l.getNumGeometries();u++){var c=l.getGeometryN(u);this.checkHolesNotNested(c,r);if(this._validErr!==null)return null}this.checkShellsNotNested(l,r);if(this._validErr!==null)return null;this.checkConnectedInteriors(r)}else if(arguments[0]instanceof qt){var f=arguments[0];for(var u=0;u<f.getNumGeometries();u++){var h=f.getGeometryN(u);this.checkValid(h);if(this._validErr!==null)return null}}else if(arguments[0]instanceof at){var d=arguments[0];this._validErr=null;if(d.isEmpty())return null;if(d instanceof ce)this.checkValid(d);else if(d instanceof ye)this.checkValid(d);else if(d instanceof be)this.checkValid(d);else if(d instanceof le)this.checkValid(d);else if(d instanceof _e)this.checkValid(d);else if(d instanceof we)this.checkValid(d);else if(d instanceof qt)this.checkValid(d);else throw new UnsupportedOperationException(d.getClass().getName())}},setSelfTouchingRingFormingHoleValid:function t(e){this._isSelfTouchingRingFormingHoleValid=e},checkShellNotNested:function t(e,n,i){var r=e.getCoordinates();var a=n.getExteriorRing();var o=a.getCoordinates();var s=Li.findPtNotNode(r,a,i);if(s===null)return null;var l=gn.isInRing(s,o);if(!l)return null;if(n.getNumInteriorRing()<=0){this._validErr=new Ai(Ai.NESTED_SHELLS,s);return null}var u=null;for(var c=0;c<n.getNumInteriorRing();c++){var f=n.getInteriorRingN(c);u=this.checkShellInsideHole(e,f,i);if(u===null)return null}this._validErr=new Ai(Ai.NESTED_SHELLS,u)},checkClosedRings:function t(e){this.checkClosedRing(e.getExteriorRing());if(this._validErr!==null)return null;for(var n=0;n<e.getNumInteriorRing();n++){this.checkClosedRing(e.getInteriorRingN(n));if(this._validErr!==null)return null}},checkClosedRing:function t(e){if(!e.isClosed()){var n=null;if(e.getNumPoints()>=1)n=e.getCoordinateN(0);this._validErr=new Ai(Ai.RING_NOT_CLOSED,n)}},checkShellsNotNested:function t(e,n){for(var i=0;i<e.getNumGeometries();i++){var r=e.getGeometryN(i);var a=r.getExteriorRing();for(var o=0;o<e.getNumGeometries();o++){if(i===o)continue;var s=e.getGeometryN(o);this.checkShellNotNested(a,s,n);if(this._validErr!==null)return null}}},interfaces_:function t(){return[]},getClass:function t(){return Li}});Li.findPtNotNode=function(t,e,n){var i=n.findEdge(e);var r=i.getEdgeIntersectionList();for(var a=0;a<t.length;a++){var o=t[a];if(!r.isIntersection(o))return o}return null};Li.isValid=function(){if(arguments[0]instanceof at){var t=arguments[0];var e=new Li(t);return e.isValid()}else if(arguments[0]instanceof Q){var n=arguments[0];if(V.isNaN(n.x))return false;if(V.isInfinite(n.x))return false;if(V.isNaN(n.y))return false;if(V.isInfinite(n.y))return false;return true}};function Pi(){this._factory=null;this._interiorPoint=null;this._maxWidth=0;var t=arguments[0];this._factory=t.getFactory();this.add(t)}$(Pi.prototype,{addPolygon:function t(e){if(e.isEmpty())return null;var n=null;var i=null;var r=this.horizontalBisector(e);if(r.getLength()===0){i=0;n=r.getCoordinate()}else{var a=r.intersection(e);var o=this.widestGeometry(a);i=o.getEnvelopeInternal().getWidth();n=Pi.centre(o.getEnvelopeInternal())}if(this._interiorPoint===null||i>this._maxWidth){this._interiorPoint=n;this._maxWidth=i}},getInteriorPoint:function t(){return this._interiorPoint},widestGeometry:function t(){if(arguments[0]instanceof qt){var e=arguments[0];if(e.isEmpty()){return e}var t=e.getGeometryN(0);for(var n=1;n<e.getNumGeometries();n++){if(e.getGeometryN(n).getEnvelopeInternal().getWidth()>t.getEnvelopeInternal().getWidth()){t=e.getGeometryN(n)}}return t}else if(arguments[0]instanceof at){var i=arguments[0];if(!(i instanceof qt)){return i}return this.widestGeometry(i)}},horizontalBisector:function t(e){var n=e.getEnvelopeInternal();var i=Di.getBisectorY(e);return this._factory.createLineString([new Q(n.getMinX(),i),new Q(n.getMaxX(),i)])},add:function t(e){if(e instanceof _e){this.addPolygon(e)}else if(e instanceof qt){var n=e;for(var i=0;i<n.getNumGeometries();i++){this.add(n.getGeometryN(i))}}},interfaces_:function t(){return[]},getClass:function t(){return Pi}});Pi.centre=function(t){return new Q(Pi.avg(t.getMinX(),t.getMaxX()),Pi.avg(t.getMinY(),t.getMaxY()))};Pi.avg=function(t,e){return(t+e)/2};function Di(){this._poly=null;this._centreY=null;this._hiY=V.MAX_VALUE;this._loY=-V.MAX_VALUE;var t=arguments[0];this._poly=t;this._hiY=t.getEnvelopeInternal().getMaxY();this._loY=t.getEnvelopeInternal().getMinY();this._centreY=Pi.avg(this._loY,this._hiY)}$(Di.prototype,{updateInterval:function t(e){if(e<=this._centreY){if(e>this._loY)this._loY=e}else if(e>this._centreY){if(e<this._hiY){this._hiY=e}}},getBisectorY:function t(){this.process(this._poly.getExteriorRing());for(var e=0;e<this._poly.getNumInteriorRing();e++){this.process(this._poly.getInteriorRingN(e))}var n=Pi.avg(this._hiY,this._loY);return n},process:function t(e){var n=e.getCoordinateSequence();for(var i=0;i<n.size();i++){var r=n.getY(i);this.updateInterval(r)}},interfaces_:function t(){return[]},getClass:function t(){return Di}});Di.getBisectorY=function(t){var e=new Di(t);return e.getBisectorY()};Pi.SafeBisectorFinder=Di;function ji(){this._geomFactory=null;this._skipEmpty=false;this._inputGeoms=null;var t=arguments[0];this._geomFactory=ji.extractFactory(t);this._inputGeoms=t}$(ji.prototype,{extractElements:function t(e,n){if(e===null)return null;for(var i=0;i<e.getNumGeometries();i++){var r=e.getGeometryN(i);if(this._skipEmpty&&r.isEmpty())continue;n.add(r)}},combine:function t(){var e=new _t;for(var n=this._inputGeoms.iterator();n.hasNext();){var i=n.next();this.extractElements(i,e)}if(e.size()===0){if(this._geomFactory!==null){return this._geomFactory.createGeometryCollection()}return null}return this._geomFactory.buildGeometry(e)},interfaces_:function t(){return[]},getClass:function t(){return ji}});ji.combine=function(){if(arguments.length===1){var t=arguments[0];var e=new ji(t);return e.combine()}else if(arguments.length===2){var n=arguments[0],i=arguments[1];var e=new ji(ji.createList(n,i));return e.combine()}else if(arguments.length===3){var r=arguments[0],a=arguments[1],o=arguments[2];var e=new ji(ji.createList(r,a,o));return e.combine()}};ji.extractFactory=function(t){if(t.isEmpty())return null;return t.iterator().next().getFactory()};ji.createList=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];var n=new _t;n.add(t);n.add(e);return n}else if(arguments.length===3){var i=arguments[0],r=arguments[1],a=arguments[2];var n=new _t;n.add(i);n.add(r);n.add(a);return n}};function ki(){this._pointGeom=null;this._otherGeom=null;this._geomFact=null;var t=arguments[0],e=arguments[1];this._pointGeom=t;this._otherGeom=e;this._geomFact=e.getFactory()}$(ki.prototype,{union:function t(){var e=new Fn;var n=new Ut;for(var i=0;i<this._pointGeom.getNumGeometries();i++){var r=this._pointGeom.getGeometryN(i);var a=r.getCoordinate();var o=e.locate(a,this._otherGeom);if(o===sn.EXTERIOR)n.add(a)}if(n.size()===0)return this._otherGeom;var s=null;var l=St.toCoordinateArray(n);if(l.length===1){s=this._geomFact.createPoint(l[0])}else{s=this._geomFact.createMultiPointFromCoords(l)}return ji.combine(s,this._otherGeom)},interfaces_:function t(){return[]},getClass:function t(){return ki}});ki.union=function(t,e){var n=new ki(t,e);return n.union()};function Fi(){this._inputGeom=null;this._factory=null;this._pruneEmptyGeometry=true;this._preserveGeometryCollectionType=true;this._preserveCollections=false;this._preserveType=false}$(Fi.prototype,{transformPoint:function t(e,n){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))},transformPolygon:function t(e,n){var i=true;var r=this.transformLinearRing(e.getExteriorRing(),e);if(r===null||!(r instanceof be)||r.isEmpty())i=false;var a=new _t;for(var o=0;o<e.getNumInteriorRing();o++){var s=this.transformLinearRing(e.getInteriorRingN(o),e);if(s===null||s.isEmpty()){continue}if(!(s instanceof be))i=false;a.add(s)}if(i)return this._factory.createPolygon(r,a.toArray([]));else{var l=new _t;if(r!==null)l.add(r);l.addAll(a);return this._factory.buildGeometry(l)}},createCoordinateSequence:function t(e){return this._factory.getCoordinateSequenceFactory().create(e)},getInputGeometry:function t(){return this._inputGeom},transformMultiLineString:function t(e,n){var i=new _t;for(var r=0;r<e.getNumGeometries();r++){var a=this.transformLineString(e.getGeometryN(r),e);if(a===null)continue;if(a.isEmpty())continue;i.add(a)}return this._factory.buildGeometry(i)},transformCoordinates:function t(e,n){return this.copy(e)},transformLineString:function t(e,n){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))},transformMultiPoint:function t(e,n){var i=new _t;for(var r=0;r<e.getNumGeometries();r++){var a=this.transformPoint(e.getGeometryN(r),e);if(a===null)continue;if(a.isEmpty())continue;i.add(a)}return this._factory.buildGeometry(i)},transformMultiPolygon:function t(e,n){var i=new _t;for(var r=0;r<e.getNumGeometries();r++){var a=this.transformPolygon(e.getGeometryN(r),e);if(a===null)continue;if(a.isEmpty())continue;i.add(a)}return this._factory.buildGeometry(i)},copy:function t(e){return e.copy()},transformGeometryCollection:function t(e,n){var i=new _t;for(var r=0;r<e.getNumGeometries();r++){var a=this.transform(e.getGeometryN(r));if(a===null)continue;if(this._pruneEmptyGeometry&&a.isEmpty())continue;i.add(a)}if(this._preserveGeometryCollectionType)return this._factory.createGeometryCollection(Ze.toGeometryArray(i));return this._factory.buildGeometry(i)},transform:function t(e){this._inputGeom=e;this._factory=e.getFactory();if(e instanceof ce)return this.transformPoint(e,null);if(e instanceof ye)return this.transformMultiPoint(e,null);if(e instanceof be)return this.transformLinearRing(e,null);if(e instanceof le)return this.transformLineString(e,null);if(e instanceof Xt)return this.transformMultiLineString(e,null);if(e instanceof _e)return this.transformPolygon(e,null);if(e instanceof we)return this.transformMultiPolygon(e,null);if(e instanceof qt)return this.transformGeometryCollection(e,null);throw new U("Unknown Geometry subtype: "+e.getClass().getName())},transformLinearRing:function t(e,n){var i=this.transformCoordinates(e.getCoordinateSequence(),e);if(i===null)return this._factory.createLinearRing(null);var r=i.size();if(r>0&&r<4&&!this._preserveType)return this._factory.createLineString(i);return this._factory.createLinearRing(i)},interfaces_:function t(){return[]},getClass:function t(){return Fi}});function $i(){this._snapTolerance=0;this._srcPts=null;this._seg=new Qn;this._allowSnappingToSourceVertices=false;this._isClosed=false;if(arguments[0]instanceof le&&typeof arguments[1]==="number"){var t=arguments[0],e=arguments[1];$i.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&typeof arguments[1]==="number"){var n=arguments[0],i=arguments[1];this._srcPts=n;this._isClosed=$i.isClosed(n);this._snapTolerance=i}}$($i.prototype,{snapVertices:function t(e,n){var i=this._isClosed?e.size()-1:e.size();for(var r=0;r<i;r++){var a=e.get(r);var o=this.findSnapForVertex(a,n);if(o!==null){e.set(r,new Q(o));if(r===0&&this._isClosed)e.set(e.size()-1,new Q(o))}}},findSnapForVertex:function t(e,n){for(var i=0;i<n.length;i++){if(e.equals2D(n[i]))return null;if(e.distance(n[i])<this._snapTolerance)return n[i]}return null},snapTo:function t(e){var n=new bt(this._srcPts);this.snapVertices(n,e);this.snapSegments(n,e);var i=n.toCoordinateArray();return i},snapSegments:function t(e,n){if(n.length===0)return null;var i=n.length;if(n[0].equals2D(n[n.length-1]))i=n.length-1;for(var r=0;r<i;r++){var a=n[r];var o=this.findSegmentIndexToSnap(a,e);if(o>=0){e.add(o+1,new Q(a),false)}}},findSegmentIndexToSnap:function t(e,n){var i=V.MAX_VALUE;var r=-1;for(var a=0;a<n.size()-1;a++){this._seg.p0=n.get(a);this._seg.p1=n.get(a+1);if(this._seg.p0.equals2D(e)||this._seg.p1.equals2D(e)){if(this._allowSnappingToSourceVertices)continue;else return-1}var o=this._seg.distance(e);if(o<this._snapTolerance&&o<i){i=o;r=a}}return r},setAllowSnappingToSourceVertices:function t(e){this._allowSnappingToSourceVertices=e},interfaces_:function t(){return[]},getClass:function t(){return $i}});$i.isClosed=function(t){if(t.length<=1)return false;return t[0].equals2D(t[t.length-1])};function Gi(){this._srcGeom=null;var t=arguments[0];this._srcGeom=t}$(Gi.prototype,{snapTo:function t(e,n){var i=this.extractTargetCoordinates(e);var r=new Ui(n,i);return r.transform(this._srcGeom)},snapToSelf:function t(e,n){var i=this.extractTargetCoordinates(this._srcGeom);var r=new Ui(e,i,true);var a=r.transform(this._srcGeom);var o=a;if(n&&tt(o,me)){o=a.buffer(0)}return o},computeSnapTolerance:function t(e){var n=this.computeMinimumSegmentLength(e);var i=n/10;return i},extractTargetCoordinates:function t(e){var n=new Ut;var i=e.getCoordinates();for(var r=0;r<i.length;r++){n.add(i[r])}return n.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function t(e){var n=V.MAX_VALUE;for(var i=0;i<e.length-1;i++){var r=e[i].distance(e[i+1]);if(r<n)n=r}return n},interfaces_:function t(){return[]},getClass:function t(){return Gi}});Gi.snap=function(t,e,n){var i=new Array(2).fill(null);var r=new Gi(t);i[0]=r.snapTo(e,n);var a=new Gi(e);i[1]=a.snapTo(i[0],n);return i};Gi.computeOverlaySnapTolerance=function(){if(arguments.length===1){var t=arguments[0];var e=Gi.computeSizeBasedSnapTolerance(t);var n=t.getPrecisionModel();if(n.getType()===Xe.FIXED){var i=1/n.getScale()*2/1.415;if(i>e)e=i}return e}else if(arguments.length===2){var r=arguments[0],a=arguments[1];return Math.min(Gi.computeOverlaySnapTolerance(r),Gi.computeOverlaySnapTolerance(a))}};Gi.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();var n=Math.min(e.getHeight(),e.getWidth());var i=n*Gi.SNAP_PRECISION_FACTOR;return i};Gi.snapToSelf=function(t,e,n){var i=new Gi(t);return i.snapToSelf(e,n)};Gi.SNAP_PRECISION_FACTOR=1e-9;function Ui(){Fi.apply(this);this._snapTolerance=null;this._snapPts=null;this._isSelfSnap=false;if(arguments.length===2){var t=arguments[0],e=arguments[1];this._snapTolerance=t;this._snapPts=e}else if(arguments.length===3){var n=arguments[0],i=arguments[1],r=arguments[2];this._snapTolerance=n;this._snapPts=i;this._isSelfSnap=r}}X(Ui,Fi);$(Ui.prototype,{snapLine:function t(e,n){var i=new $i(e,this._snapTolerance);i.setAllowSnappingToSourceVertices(this._isSelfSnap);return i.snapTo(n)},transformCoordinates:function t(e,n){var i=e.toCoordinateArray();var r=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},interfaces_:function t(){return[]},getClass:function t(){return Ui}});function Yi(){this._isFirst=true;this._commonMantissaBitsCount=53;this._commonBits=new Y;this._commonSignExp=null}$(Yi.prototype,{getCommon:function t(){return V.longBitsToDouble(this._commonBits)},add:function t(e){var n=V.doubleToLongBits(e);if(this._isFirst){this._commonBits=n;this._commonSignExp=Yi.signExpBits(this._commonBits);this._isFirst=false;return null}var i=Yi.signExpBits(n);if(i!==this._commonSignExp){this._commonBits.high=0|0;this._commonBits.low=0|0;return null}this._commonMantissaBitsCount=Yi.numCommonMostSigMantissaBits(this._commonBits,n);this._commonBits=Yi.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))},toString:function t(){if(arguments.length===1){var e=arguments[0];var n=V.longBitsToDouble(e);var i=Y.toBinaryString(e);var r="0000000000000000000000000000000000000000000000000000000000000000"+i;var a=r.substring(r.length-64);var o=a.substring(0,1)+"  "+a.substring(1,12)+"(exp) "+a.substring(12)+" [ "+n+" ]";return o}},interfaces_:function t(){return[]},getClass:function t(){return Yi}});Yi.getBit=function(t,e){var n=1<<e%32;if(e<32){return(t.low&n)!=0?1:0}return(t.high&n)!=0?1:0};Yi.signExpBits=function(t){return t.high>>>20};Yi.zeroLowerBits=function(t,e){var n="low";if(e>32){t.low=0|0;e%=32;n="high"}if(e>0){var i=e<32?~((1<<e)-1):0;t[n]&=i}return t};Yi.numCommonMostSigMantissaBits=function(t,e){var n=0;for(var i=52;i>=0;i--){if(Yi.getBit(t,i)!==Yi.getBit(e,i))return n;n++}return 52};function Vi(){this._commonCoord=null;this._ccFilter=new Hi}$(Vi.prototype,{addCommonBits:function t(e){var n=new zi(this._commonCoord);e.apply(n);e.geometryChanged()},removeCommonBits:function t(e){if(this._commonCoord.x===0&&this._commonCoord.y===0)return e;var n=new Q(this._commonCoord);n.x=-n.x;n.y=-n.y;var i=new zi(n);e.apply(i);e.geometryChanged();return e},getCommonCoordinate:function t(){return this._commonCoord},add:function t(e){e.apply(this._ccFilter);this._commonCoord=this._ccFilter.getCommonCoordinate()},interfaces_:function t(){return[]},getClass:function t(){return Vi}});function Hi(){this._commonBitsX=new Yi;this._commonBitsY=new Yi}$(Hi.prototype,{filter:function t(e){this._commonBitsX.add(e.x);this._commonBitsY.add(e.y)},getCommonCoordinate:function t(){return new Q(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},interfaces_:function t(){return[ot]},getClass:function t(){return Hi}});function zi(){this.trans=null;var t=arguments[0];this.trans=t}$(zi.prototype,{filter:function t(e,n){var i=e.getOrdinate(n,0)+this.trans.x;var r=e.getOrdinate(n,1)+this.trans.y;e.setOrdinate(n,0,i);e.setOrdinate(n,1,r)},isDone:function t(){return false},isGeometryChanged:function t(){return true},interfaces_:function t(){return[Wt]},getClass:function t(){return zi}});Vi.CommonCoordinateFilter=Hi;Vi.Translater=zi;function Bi(){}$(Bi.prototype,{interfaces_:function t(){return[]},getClass:function t(){return Bi}});Bi.octant=function(){if(typeof arguments[0]==="number"&&typeof arguments[1]==="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new U("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t);var i=Math.abs(e);if(t>=0){if(e>=0){if(n>=i)return 0;else return 1}else{if(n>=i)return 7;else return 6}}else{if(e>=0){if(n>=i)return 3;else return 2}else{if(n>=i)return 4;else return 5}}}else if(arguments[0]instanceof Q&&arguments[1]instanceof Q){var r=arguments[0],a=arguments[1];var o=a.x-r.x;var s=a.y-r.y;if(o===0&&s===0)throw new U("Cannot compute the octant for two identical points "+r);return Bi.octant(o,s)}};function Wi(){}$(Wi.prototype,{getCoordinates:function t(){},size:function t(){},getCoordinate:function t(e){},isClosed:function t(){},setData:function t(e){},getData:function t(){},interfaces_:function t(){return[]},getClass:function t(){return Wi}});function qi(){this._pts=null;this._data=null;var t=arguments[0],e=arguments[1];this._pts=t;this._data=e}$(qi.prototype,{getCoordinates:function t(){return this._pts},size:function t(){return this._pts.length},getCoordinate:function t(e){return this._pts[e]},isClosed:function t(){return this._pts[0].equals(this._pts[this._pts.length-1])},getSegmentOctant:function t(e){if(e===this._pts.length-1)return-1;return Bi.octant(this.getCoordinate(e),this.getCoordinate(e+1))},setData:function t(e){this._data=e},getData:function t(){return this._data},toString:function t(){return an.toLineString(new Te(this._pts))},interfaces_:function t(){return[Wi]},getClass:function t(){return qi}});function Xi(){}$(Xi.prototype,{interfaces_:function t(){return[]},getClass:function t(){return Xi}});Xi.relativeSign=function(t,e){if(t<e)return-1;if(t>e)return 1;return 0};Xi.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=Xi.relativeSign(e.x,n.x);var r=Xi.relativeSign(e.y,n.y);switch(t){case 0:return Xi.compareValue(i,r);case 1:return Xi.compareValue(r,i);case 2:return Xi.compareValue(r,-i);case 3:return Xi.compareValue(-i,r);case 4:return Xi.compareValue(-i,-r);case 5:return Xi.compareValue(-r,-i);case 6:return Xi.compareValue(-r,i);case 7:return Xi.compareValue(i,-r)}Z.shouldNeverReachHere("invalid octant value");return 0};Xi.compareValue=function(t,e){if(t<0)return-1;if(t>0)return 1;if(e<0)return-1;if(e>0)return 1;return 0};function Ki(){this._segString=null;this.coord=null;this.segmentIndex=null;this._segmentOctant=null;this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t;this.coord=new Q(e);this.segmentIndex=n;this._segmentOctant=i;this._isInterior=!e.equals2D(t.getCoordinate(n))}$(Ki.prototype,{getCoordinate:function t(){return this.coord},print:function t(e){e.print(this.coord);e.print(" seg # = "+this.segmentIndex)},compareTo:function t(e){var n=e;if(this.segmentIndex<n.segmentIndex)return-1;if(this.segmentIndex>n.segmentIndex)return 1;if(this.coord.equals2D(n.coord))return 0;return Xi.compare(this._segmentOctant,this.coord,n.coord)},isEndPoint:function t(e){if(this.segmentIndex===0&&!this._isInterior)return true;if(this.segmentIndex===e)return true;return false},isInterior:function t(){return this._isInterior},interfaces_:function t(){return[H]},getClass:function t(){return Ki}});function Zi(){this._nodeMap=new Ft;this._edge=null;var t=arguments[0];this._edge=t}$(Zi.prototype,{getSplitCoordinates:function t(){var e=new bt;this.addEndpoints();var n=this.iterator();var i=n.next();while(n.hasNext()){var r=n.next();this.addEdgeCoordinates(i,r,e);i=r}return e.toCoordinateArray()},addCollapsedNodes:function t(){var e=new _t;this.findCollapsesFromInsertedNodes(e);this.findCollapsesFromExistingVertices(e);for(var n=e.iterator();n.hasNext();){var i=n.next().intValue();this.add(this._edge.getCoordinate(i),i)}},print:function t(e){e.println("Intersections:");for(var n=this.iterator();n.hasNext();){var i=n.next();i.print(e)}},findCollapsesFromExistingVertices:function t(e){for(var n=0;n<this._edge.size()-2;n++){var i=this._edge.getCoordinate(n);var r=this._edge.getCoordinate(n+1);var a=this._edge.getCoordinate(n+2);if(i.equals2D(a)){e.add(new de(n+1))}}},addEdgeCoordinates:function t(e,n,i){var r=n.segmentIndex-e.segmentIndex+2;var a=this._edge.getCoordinate(n.segmentIndex);var o=n.isInterior()||!n.coord.equals2D(a);if(!o){r--}var s=0;i.add(new Q(e.coord),false);for(var l=e.segmentIndex+1;l<=n.segmentIndex;l++){i.add(this._edge.getCoordinate(l))}if(o){i.add(new Q(n.coord))}},iterator:function t(){return this._nodeMap.values().iterator()},addSplitEdges:function t(e){this.addEndpoints();this.addCollapsedNodes();var n=this.iterator();var i=n.next();while(n.hasNext()){var r=n.next();var a=this.createSplitEdge(i,r);e.add(a);i=r}},findCollapseIndex:function t(e,n,i){if(!e.coord.equals2D(n.coord))return false;var r=n.segmentIndex-e.segmentIndex;if(!n.isInterior()){r--}if(r===1){i[0]=e.segmentIndex+1;return true}return false},findCollapsesFromInsertedNodes:function t(e){var n=new Array(1).fill(null);var i=this.iterator();var r=i.next();while(i.hasNext()){var a=i.next();var o=this.findCollapseIndex(r,a,n);if(o)e.add(new de(n[0]));r=a}},getEdge:function t(){return this._edge},addEndpoints:function t(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0);this.add(this._edge.getCoordinate(e),e)},createSplitEdge:function t(e,n){var i=n.segmentIndex-e.segmentIndex+2;var r=this._edge.getCoordinate(n.segmentIndex);var a=n.isInterior()||!n.coord.equals2D(r);if(!a){i--}var o=new Array(i).fill(null);var s=0;o[s++]=new Q(e.coord);for(var l=e.segmentIndex+1;l<=n.segmentIndex;l++){o[s++]=this._edge.getCoordinate(l)}if(a)o[s]=new Q(n.coord);return new tr(o,this._edge.getData())},add:function t(e,n){var i=new Ki(this._edge,e,n,this._edge.getSegmentOctant(n));var r=this._nodeMap.get(i);if(r!==null){Z.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates");return r}this._nodeMap.put(i,i);return i},checkSplitEdgesCorrectness:function t(e){var n=this._edge.getCoordinates();var i=e.get(0);var r=i.getCoordinate(0);if(!r.equals2D(n[0]))throw new q("bad split edge start point at "+r);var a=e.get(e.size()-1);var o=a.getCoordinates();var s=o[o.length-1];if(!s.equals2D(n[n.length-1]))throw new q("bad split edge end point at "+s)},interfaces_:function t(){return[]},getClass:function t(){return Zi}});function Qi(){this._nodeList=null;this._edge=null;this._nodeIt=null;this._currNode=null;this._nextNode=null;this._currSegIndex=0;var t=arguments[0];this._nodeList=t;this._edge=t.getEdge();this._nodeIt=t.iterator();this.readNextNode()}$(Qi.prototype,{next:function t(){if(this._currNode===null){this._currNode=this._nextNode;this._currSegIndex=this._currNode.segmentIndex;this.readNextNode();return this._currNode}if(this._nextNode===null)return null;if(this._nextNode.segmentIndex===this._currNode.segmentIndex){this._currNode=this._nextNode;this._currSegIndex=this._currNode.segmentIndex;this.readNextNode();return this._currNode}if(this._nextNode.segmentIndex>this._currNode.segmentIndex){}return null},remove:function t(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function t(){if(this._nextNode===null)return false;return true},readNextNode:function t(){if(this._nodeIt.hasNext())this._nextNode=this._nodeIt.next();else this._nextNode=null},interfaces_:function t(){return[ht]},getClass:function t(){return Qi}});function Ji(){}$(Ji.prototype,{addIntersection:function t(e,n){},interfaces_:function t(){return[Wi]},getClass:function t(){return Ji}});function tr(){this._nodeList=new Zi(this);this._pts=null;this._data=null;var t=arguments[0],e=arguments[1];this._pts=t;this._data=e}$(tr.prototype,{getCoordinates:function t(){return this._pts},size:function t(){return this._pts.length},getCoordinate:function t(e){return this._pts[e]},isClosed:function t(){return this._pts[0].equals(this._pts[this._pts.length-1])},getSegmentOctant:function t(e){if(e===this._pts.length-1)return-1;return this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))},setData:function t(e){this._data=e},safeOctant:function t(e,n){if(e.equals2D(n))return 0;return Bi.octant(e,n)},getData:function t(){return this._data},addIntersection:function t(){if(arguments.length===2){var e=arguments[0],n=arguments[1];this.addIntersectionNode(e,n)}else if(arguments.length===4){var i=arguments[0],r=arguments[1],a=arguments[2],o=arguments[3];var s=new Q(i.getIntersection(o));this.addIntersection(s,r)}},toString:function t(){return an.toLineString(new Te(this._pts))},getNodeList:function t(){return this._nodeList},addIntersectionNode:function t(e,n){var i=n;var r=i+1;if(r<this._pts.length){var a=this._pts[r];if(e.equals2D(a)){i=r}}var o=this._nodeList.add(e,i);return o},addIntersections:function t(e,n,i){for(var r=0;r<e.getIntersectionNum();r++){this.addIntersection(e,n,i,r)}},interfaces_:function t(){return[Ji]},getClass:function t(){return tr}});tr.getNodedSubstrings=function(){if(arguments.length===1){var t=arguments[0];var e=new _t;tr.getNodedSubstrings(t,e);return e}else if(arguments.length===2){var n=arguments[0],i=arguments[1];for(var r=n.iterator();r.hasNext();){var a=r.next();a.getNodeList().addSplitEdges(i)}}};function er(){this._overlapSeg1=new Qn;this._overlapSeg2=new Qn}$(er.prototype,{overlap:function t(){if(arguments.length===2){var e=arguments[0],n=arguments[1]}else if(arguments.length===4){var i=arguments[0],r=arguments[1],a=arguments[2],o=arguments[3];i.getLineSegment(r,this._overlapSeg1);a.getLineSegment(o,this._overlapSeg2);this.overlap(this._overlapSeg1,this._overlapSeg2)}},interfaces_:function t(){return[]},getClass:function t(){return er}});function nr(){this._pts=null;this._start=null;this._end=null;this._env=null;this._context=null;this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t;this._start=e;this._end=n;this._context=i}$(nr.prototype,{getLineSegment:function t(e,n){n.p0=this._pts[e];n.p1=this._pts[e+1]},computeSelect:function t(e,n,i,r){var a=this._pts[n];var o=this._pts[i];if(i-n===1){r.select(this,n);return null}if(!e.intersects(a,o))return null;var s=Math.trunc((n+i)/2);if(n<s){this.computeSelect(e,n,s,r)}if(s<i){this.computeSelect(e,s,i,r)}},getCoordinates:function t(){var e=new Array(this._end-this._start+1).fill(null);var n=0;for(var i=this._start;i<=this._end;i++){e[n++]=this._pts[i]}return e},computeOverlaps:function t(){if(arguments.length===2){var e=arguments[0],n=arguments[1];this.computeOverlaps(this._start,this._end,e,e._start,e._end,n)}else if(arguments.length===6){var i=arguments[0],r=arguments[1],a=arguments[2],o=arguments[3],s=arguments[4],l=arguments[5];if(r-i===1&&s-o===1){l.overlap(this,i,a,o);return null}if(!this.overlaps(i,r,a,o,s))return null;var u=Math.trunc((i+r)/2);var c=Math.trunc((o+s)/2);if(i<u){if(o<c)this.computeOverlaps(i,u,a,o,c,l);if(c<s)this.computeOverlaps(i,u,a,c,s,l)}if(u<r){if(o<c)this.computeOverlaps(u,r,a,o,c,l);if(c<s)this.computeOverlaps(u,r,a,c,s,l)}}},setId:function t(e){this._id=e},select:function t(e,n){this.computeSelect(e,this._start,this._end,n)},getEnvelope:function t(){if(this._env===null){var e=this._pts[this._start];var n=this._pts[this._end];this._env=new rt(e,n)}return this._env},overlaps:function t(e,n,i,r,a){return rt.intersects(this._pts[e],this._pts[n],i._pts[r],i._pts[a])},getEndIndex:function t(){return this._end},getStartIndex:function t(){return this._start},getContext:function t(){return this._context},getId:function t(){return this._id},interfaces_:function t(){return[]},getClass:function t(){return nr}});function ir(){}$(ir.prototype,{interfaces_:function t(){return[]},getClass:function t(){return ir}});ir.getChainStartIndices=function(t){var e=0;var n=new _t;n.add(new de(e));do{var i=ir.findChainEnd(t,e);n.add(new de(i));e=i}while(e<t.length-1);var r=ir.toIntArray(n);return r};ir.findChainEnd=function(t,e){var n=e;while(n<t.length-1&&t[n].equals2D(t[n+1])){n++}if(n>=t.length-1){return t.length-1}var i=Tn.quadrant(t[n],t[n+1]);var r=e+1;while(r<t.length){if(!t[r-1].equals2D(t[r])){var a=Tn.quadrant(t[r-1],t[r]);if(a!==i)break}r++}return r-1};ir.getChains=function(){if(arguments.length===1){var t=arguments[0];return ir.getChains(t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];var i=new _t;var r=ir.getChainStartIndices(e);for(var a=0;a<r.length-1;a++){var o=new nr(e,r[a],r[a+1],n);i.add(o)}return i}};ir.toIntArray=function(t){var e=new Array(t.size()).fill(null);for(var n=0;n<e.length;n++){e[n]=t.get(n).intValue()}return e};function rr(){}$(rr.prototype,{computeNodes:function t(e){},getNodedSubstrings:function t(){},interfaces_:function t(){return[]},getClass:function t(){return rr}});function ar(){this._segInt=null;if(arguments.length===0){}else if(arguments.length===1){var t=arguments[0];this.setSegmentIntersector(t)}}$(ar.prototype,{setSegmentIntersector:function t(e){this._segInt=e},interfaces_:function t(){return[rr]},getClass:function t(){return ar}});function or(){this._monoChains=new _t;this._index=new Ii;this._idCounter=0;this._nodedSegStrings=null;this._nOverlaps=0;if(arguments.length===0){}else if(arguments.length===1){var t=arguments[0];ar.call(this,t)}}X(or,ar);$(or.prototype,{getMonotoneChains:function t(){return this._monoChains},getNodedSubstrings:function t(){return tr.getNodedSubstrings(this._nodedSegStrings)},getIndex:function t(){return this._index},add:function t(e){var n=ir.getChains(e.getCoordinates(),e);for(var i=n.iterator();i.hasNext();){var r=i.next();r.setId(this._idCounter++);this._index.insert(r.getEnvelope(),r);this._monoChains.add(r)}},computeNodes:function t(e){this._nodedSegStrings=e;for(var n=e.iterator();n.hasNext();){this.add(n.next())}this.intersectChains()},intersectChains:function t(){var e=new sr(this._segInt);for(var n=this._monoChains.iterator();n.hasNext();){var i=n.next();var r=this._index.query(i.getEnvelope());for(var a=r.iterator();a.hasNext();){var o=a.next();if(o.getId()>i.getId()){i.computeOverlaps(o,e);this._nOverlaps++}if(this._segInt.isDone())return null}}},interfaces_:function t(){return[]},getClass:function t(){return or}});function sr(){er.apply(this);this._si=null;var t=arguments[0];this._si=t}X(sr,er);$(sr.prototype,{overlap:function t(){if(arguments.length===4){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];var a=e.getContext();var o=i.getContext();this._si.processIntersections(a,n,o,r)}else return er.prototype.overlap.apply(this,arguments)},interfaces_:function t(){return[]},getClass:function t(){return sr}});or.SegmentOverlapAction=sr;function lr(){}$(lr.prototype,{processIntersections:function t(e,n,i,r){},isDone:function t(){},interfaces_:function t(){return[]},getClass:function t(){return lr}});function ur(){this._findAllIntersections=false;this._isCheckEndSegmentsOnly=false;this._li=null;this._interiorIntersection=null;this._intSegments=null;this._intersections=new _t;this._intersectionCount=0;this._keepIntersections=true;var t=arguments[0];this._li=t;this._interiorIntersection=null}$(ur.prototype,{getInteriorIntersection:function t(){return this._interiorIntersection},setCheckEndSegmentsOnly:function t(e){this._isCheckEndSegmentsOnly=e},getIntersectionSegments:function t(){return this._intSegments},count:function t(){return this._intersectionCount},getIntersections:function t(){return this._intersections},setFindAllIntersections:function t(e){this._findAllIntersections=e},setKeepIntersections:function t(e){this._keepIntersections=e},processIntersections:function t(e,n,i,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(e===i&&n===r)return null;if(this._isCheckEndSegmentsOnly){var a=this.isEndSegment(e,n)||this.isEndSegment(i,r);if(!a)return null}var o=e.getCoordinates()[n];var s=e.getCoordinates()[n+1];var l=i.getCoordinates()[r];var u=i.getCoordinates()[r+1];this._li.computeIntersection(o,s,l,u);if(this._li.hasIntersection()){if(this._li.isInteriorIntersection()){this._intSegments=new Array(4).fill(null);this._intSegments[0]=o;this._intSegments[1]=s;this._intSegments[2]=l;this._intSegments[3]=u;this._interiorIntersection=this._li.getIntersection(0);if(this._keepIntersections)this._intersections.add(this._interiorIntersection);this._intersectionCount++}}},isEndSegment:function t(e,n){if(n===0)return true;if(n>=e.size()-2)return true;return false},hasIntersection:function t(){return this._interiorIntersection!==null},isDone:function t(){if(this._findAllIntersections)return false;return this._interiorIntersection!==null},interfaces_:function t(){return[lr]},getClass:function t(){return ur}});ur.createAllIntersectionsFinder=function(t){var e=new ur(t);e.setFindAllIntersections(true);return e};ur.createAnyIntersectionFinder=function(t){return new ur(t)};ur.createIntersectionCounter=function(t){var e=new ur(t);e.setFindAllIntersections(true);e.setKeepIntersections(false);return e};function cr(){this._li=new pn;this._segStrings=null;this._findAllIntersections=false;this._segInt=null;this._isValid=true;var t=arguments[0];this._segStrings=t}$(cr.prototype,{execute:function t(){if(this._segInt!==null)return null;this.checkInteriorIntersections()},getIntersections:function t(){return this._segInt.getIntersections()},isValid:function t(){this.execute();return this._isValid},setFindAllIntersections:function t(e){this._findAllIntersections=e},checkInteriorIntersections:function t(){this._isValid=true;this._segInt=new ur(this._li);this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new or;e.setSegmentIntersector(this._segInt);e.computeNodes(this._segStrings);if(this._segInt.hasIntersection()){this._isValid=false;return null}},checkValid:function t(){this.execute();if(!this._isValid)throw new mn(this.getErrorMessage(),this._segInt.getInteriorIntersection())},getErrorMessage:function t(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+an.toLineString(e[0],e[1])+" and "+an.toLineString(e[2],e[3])},interfaces_:function t(){return[]},getClass:function t(){return cr}});cr.computeIntersections=function(t){var e=new cr(t);e.setFindAllIntersections(true);e.isValid();return e.getIntersections()};function fr(){this._nv=null;var t=arguments[0];this._nv=new cr(fr.toSegmentStrings(t))}$(fr.prototype,{checkValid:function t(){this._nv.checkValid()},interfaces_:function t(){return[]},getClass:function t(){return fr}});fr.toSegmentStrings=function(t){var e=new _t;for(var n=t.iterator();n.hasNext();){var i=n.next();e.add(new qi(i.getCoordinates(),i))}return e};fr.checkValid=function(t){var e=new fr(t);e.checkValid()};function hr(){this._geometryFactory=null;this._shellList=new _t;var t=arguments[0];this._geometryFactory=t}$(hr.prototype,{sortShellsAndHoles:function t(e,n,i){for(var r=e.iterator();r.hasNext();){var a=r.next();if(a.isHole()){i.add(a)}else{n.add(a)}}},computePolygons:function t(e){var n=new _t;for(var i=e.iterator();i.hasNext();){var r=i.next();var a=r.toPolygon(this._geometryFactory);n.add(a)}return n},placeFreeHoles:function t(e,n){for(var i=n.iterator();i.hasNext();){var r=i.next();if(r.getShell()===null){var a=this.findEdgeRingContaining(r,e);if(a===null)throw new mn("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(a)}}},buildMinimalEdgeRings:function t(e,n,i){var r=new _t;for(var a=e.iterator();a.hasNext();){var o=a.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings();var l=this.findShell(s);if(l!==null){this.placePolygonHoles(l,s);n.add(l)}else{i.addAll(s)}}else{r.add(o)}}return r},containsPoint:function t(e){for(var n=this._shellList.iterator();n.hasNext();){var i=n.next();if(i.containsPoint(e))return true}return false},buildMaximalEdgeRings:function t(e){var n=new _t;for(var i=e.iterator();i.hasNext();){var r=i.next();if(r.isInResult()&&r.getLabel().isArea()){if(r.getEdgeRing()===null){var a=new xn(r,this._geometryFactory);n.add(a);a.setInResult()}}}return n},placePolygonHoles:function t(e,n){for(var i=n.iterator();i.hasNext();){var r=i.next();if(r.isHole()){r.setShell(e)}}},getPolygons:function t(){var e=this.computePolygons(this._shellList);return e},findEdgeRingContaining:function t(e,n){var i=e.getLinearRing();var r=i.getEnvelopeInternal();var a=i.getCoordinateN(0);var o=null;var s=null;for(var l=n.iterator();l.hasNext();){var u=l.next();var c=u.getLinearRing();var f=c.getEnvelopeInternal();if(o!==null)s=o.getLinearRing().getEnvelopeInternal();var h=false;if(f.contains(r)&&gn.isInRing(a,c.getCoordinates()))h=true;if(h){if(o===null||s.contains(f)){o=u}}}return o},findShell:function t(e){var n=0;var i=null;for(var r=e.iterator();r.hasNext();){var a=r.next();if(!a.isHole()){i=a;n++}}Z.isTrue(n<=1,"found two shells in MinimalEdgeRing list");return i},add:function t(){if(arguments.length===1){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(arguments.length===2){var n=arguments[0],i=arguments[1];jn.linkResultDirectedEdges(i);var r=this.buildMaximalEdgeRings(n);var a=new _t;var o=this.buildMinimalEdgeRings(r,this._shellList,a);this.sortShellsAndHoles(o,this._shellList,a);this.placeFreeHoles(this._shellList,a)}},interfaces_:function t(){return[]},getClass:function t(){return hr}});function dr(){this._op=null;this._geometryFactory=null;this._ptLocator=null;this._lineEdgesList=new _t;this._resultLineList=new _t;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t;this._geometryFactory=e;this._ptLocator=n}$(dr.prototype,{collectLines:function t(e){for(var n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next();this.collectLineEdge(i,e,this._lineEdgesList);this.collectBoundaryTouchEdge(i,e,this._lineEdgesList)}},labelIsolatedLine:function t(e,n){var i=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(n));e.getLabel().setLocation(n,i)},build:function t(e){this.findCoveredLineEdges();this.collectLines(e);this.buildLines(e);return this._resultLineList},collectLineEdge:function t(e,n,i){var r=e.getLabel();var a=e.getEdge();if(e.isLineEdge()){if(!e.isVisited()&&_r.isResultOfOp(r,n)&&!a.isCovered()){i.add(a);e.setVisitedEdge(true)}}},findCoveredLineEdges:function t(){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();n.getEdges().findCoveredLineEdges()}for(var i=this._op.getGraph().getEdgeEnds().iterator();i.hasNext();){var r=i.next();var a=r.getEdge();if(r.isLineEdge()&&!a.isCoveredSet()){var o=this._op.isCoveredByA(r.getCoordinate());a.setCovered(o)}}},labelIsolatedLines:function t(e){for(var n=e.iterator();n.hasNext();){var i=n.next();var r=i.getLabel();if(i.isIsolated()){if(r.isNull(0))this.labelIsolatedLine(i,0);else this.labelIsolatedLine(i,1)}}},buildLines:function t(e){for(var n=this._lineEdgesList.iterator();n.hasNext();){var i=n.next();var r=i.getLabel();var a=this._geometryFactory.createLineString(i.getCoordinates());this._resultLineList.add(a);i.setInResult(true)}},collectBoundaryTouchEdge:function t(e,n,i){var r=e.getLabel();if(e.isLineEdge())return null;if(e.isVisited())return null;if(e.isInteriorAreaEdge())return null;if(e.getEdge().isInResult())return null;Z.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult());if(_r.isResultOfOp(r,n)&&n===_r.INTERSECTION){i.add(e.getEdge());e.setVisitedEdge(true)}},interfaces_:function t(){return[]},getClass:function t(){return dr}});function pr(){this._op=null;this._geometryFactory=null;this._resultPointList=new _t;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t;this._geometryFactory=e}$(pr.prototype,{filterCoveredNodeToPoint:function t(e){var n=e.getCoordinate();if(!this._op.isCoveredByLA(n)){var i=this._geometryFactory.createPoint(n);this._resultPointList.add(i)}},extractNonCoveredResultNodes:function t(e){for(var n=this._op.getGraph().getNodes().iterator();n.hasNext();){var i=n.next();if(i.isInResult())continue;if(i.isIncidentEdgeInResult())continue;if(i.getEdges().getDegree()===0||e===_r.INTERSECTION){var r=i.getLabel();if(_r.isResultOfOp(r,e)){this.filterCoveredNodeToPoint(i)}}}},build:function t(e){this.extractNonCoveredResultNodes(e);return this._resultPointList},interfaces_:function t(){return[]},getClass:function t(){return pr}});function vr(){this._li=new pn;this._resultPrecisionModel=null;this._arg=null;if(arguments.length===1){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel());this._arg=new Array(1).fill(null);this._arg[0]=new fi(0,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];vr.call(this,e,n,st.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var i=arguments[0],r=arguments[1],a=arguments[2];if(i.getPrecisionModel().compareTo(r.getPrecisionModel())>=0)this.setComputationPrecision(i.getPrecisionModel());else this.setComputationPrecision(r.getPrecisionModel());this._arg=new Array(2).fill(null);this._arg[0]=new fi(0,i,a);this._arg[1]=new fi(1,r,a)}}$(vr.prototype,{getArgGeometry:function t(e){return this._arg[e].getGeometry()},setComputationPrecision:function t(e){this._resultPrecisionModel=e;this._li.setPrecisionModel(this._resultPrecisionModel)},interfaces_:function t(){return[]},getClass:function t(){return vr}});function gr(){this._pts=null;this._orientation=null;var t=arguments[0];this._pts=t;this._orientation=gr.orientation(t)}$(gr.prototype,{compareTo:function t(e){var n=e;var i=gr.compareOriented(this._pts,this._orientation,n._pts,n._orientation);return i},interfaces_:function t(){return[H]},getClass:function t(){return gr}});gr.orientation=function(t){return St.increasingDirection(t)===1};gr.compareOriented=function(t,e,n,i){var r=e?1:-1;var a=i?1:-1;var o=e?t.length:-1;var s=i?n.length:-1;var l=e?0:t.length-1;var u=i?0:n.length-1;var c=0;while(true){var f=t[l].compareTo(n[u]);if(f!==0)return f;l+=r;u+=a;var h=l===o;var d=u===s;if(h&&!d)return-1;if(!h&&d)return 1;if(h&&d)return 0}};function mr(){this._edges=new _t;this._ocaMap=new Ft}$(mr.prototype,{print:function t(e){e.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n);if(n>0)e.print(",");e.print("(");var r=i.getCoordinates();for(var a=0;a<r.length;a++){if(a>0)e.print(",");e.print(r[a].x+" "+r[a].y)}e.println(")")}e.print(")  ")},addAll:function t(e){for(var n=e.iterator();n.hasNext();){this.add(n.next())}},findEdgeIndex:function t(e){for(var n=0;n<this._edges.size();n++){if(this._edges.get(n).equals(e))return n}return-1},iterator:function t(){return this._edges.iterator()},getEdges:function t(){return this._edges},get:function t(e){return this._edges.get(e)},findEqualEdge:function t(e){var n=new gr(e.getCoordinates());var i=this._ocaMap.get(n);return i},add:function t(e){this._edges.add(e);var n=new gr(e.getCoordinates());this._ocaMap.put(n,e)},interfaces_:function t(){return[]},getClass:function t(){return mr}});function _r(){this._ptLocator=new Fn;this._geomFact=null;this._resultGeom=null;this._graph=null;this._edgeList=new mr;this._resultPolyList=new _t;this._resultLineList=new _t;this._resultPointList=new _t;var t=arguments[0],e=arguments[1];vr.call(this,t,e);this._graph=new jn(new An);this._geomFact=t.getFactory()}X(_r,vr);$(_r.prototype,{insertUniqueEdge:function t(e){var n=this._edgeList.findEqualEdge(e);if(n!==null){var i=n.getLabel();var r=e.getLabel();if(!n.isPointwiseEqual(e)){r=new yn(e.getLabel());r.flip()}var a=n.getDepth();if(a.isNull()){a.add(i)}a.add(r);i.merge(r)}else{this._edgeList.add(e)}},getGraph:function t(){return this._graph},cancelDuplicateResultEdges:function t(){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next();var i=n.getSym();if(n.isInResult()&&i.isInResult()){n.setInResult(false);i.setInResult(false)}}},isCoveredByLA:function t(e){if(this.isCovered(e,this._resultLineList))return true;if(this.isCovered(e,this._resultPolyList))return true;return false},computeGeometry:function t(e,n,i,r){var a=new _t;a.addAll(e);a.addAll(n);a.addAll(i);if(a.isEmpty())return _r.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact);return this._geomFact.buildGeometry(a)},mergeSymLabels:function t(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var n=e.next();n.getEdges().mergeSymLabels()}},isCovered:function t(e,n){for(var i=n.iterator();i.hasNext();){var r=i.next();var a=this._ptLocator.locate(e,r);if(a!==sn.EXTERIOR)return true}return false},replaceCollapsedEdges:function t(){var e=new _t;for(var n=this._edgeList.iterator();n.hasNext();){var i=n.next();if(i.isCollapsed()){n.remove();e.add(i.getCollapsedEdge())}}this._edgeList.addAll(e)},updateNodeLabelling:function t(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var n=e.next();var i=n.getEdges().getLabel();n.getLabel().merge(i)}},getResultGeometry:function t(e){this.computeOverlay(e);return this._resultGeom},insertUniqueEdges:function t(e){for(var n=e.iterator();n.hasNext();){var i=n.next();this.insertUniqueEdge(i)}},computeOverlay:function t(e){this.copyPoints(0);this.copyPoints(1);this._arg[0].computeSelfNodes(this._li,false);this._arg[1].computeSelfNodes(this._li,false);this._arg[0].computeEdgeIntersections(this._arg[1],this._li,true);var n=new _t;this._arg[0].computeSplitEdges(n);this._arg[1].computeSplitEdges(n);var i=n;this.insertUniqueEdges(n);this.computeLabelsFromDepths();this.replaceCollapsedEdges();fr.checkValid(this._edgeList.getEdges());this._graph.addEdges(this._edgeList.getEdges());this.computeLabelling();this.labelIncompleteNodes();this.findResultAreaEdges(e);this.cancelDuplicateResultEdges();var r=new hr(this._geomFact);r.add(this._graph);this._resultPolyList=r.getPolygons();var a=new dr(this,this._geomFact,this._ptLocator);this._resultLineList=a.build(e);var o=new pr(this,this._geomFact,this._ptLocator);this._resultPointList=o.build(e);this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,e)},labelIncompleteNode:function t(e,n){var i=this._ptLocator.locate(e.getCoordinate(),this._arg[n].getGeometry());e.getLabel().setLocation(n,i)},copyPoints:function t(e){for(var n=this._arg[e].getNodeIterator();n.hasNext();){var i=n.next();var r=this._graph.addNode(i.getCoordinate());r.setLabel(e,i.getLabel().getLocation(e))}},findResultAreaEdges:function t(e){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next();var r=i.getLabel();if(r.isArea()&&!i.isInteriorAreaEdge()&&_r.isResultOfOp(r.getLocation(0,ln.RIGHT),r.getLocation(1,ln.RIGHT),e)){i.setInResult(true)}}},computeLabelsFromDepths:function t(){for(var e=this._edgeList.iterator();e.hasNext();){var n=e.next();var i=n.getLabel();var r=n.getDepth();if(!r.isNull()){r.normalize();for(var a=0;a<2;a++){if(!i.isNull(a)&&i.isArea()&&!r.isNull(a)){if(r.getDelta(a)===0){i.toLine(a)}else{Z.isTrue(!r.isNull(a,ln.LEFT),"depth of LEFT side has not been initialized");i.setLocation(a,ln.LEFT,r.getLocation(a,ln.LEFT));Z.isTrue(!r.isNull(a,ln.RIGHT),"depth of RIGHT side has not been initialized");i.setLocation(a,ln.RIGHT,r.getLocation(a,ln.RIGHT))}}}}}},computeLabelling:function t(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var n=e.next();n.getEdges().computeLabelling(this._arg)}this.mergeSymLabels();this.updateNodeLabelling()},labelIncompleteNodes:function t(){var e=0;for(var n=this._graph.getNodes().iterator();n.hasNext();){var i=n.next();var r=i.getLabel();if(i.isIsolated()){e++;if(r.isNull(0))this.labelIncompleteNode(i,0);else this.labelIncompleteNode(i,1)}i.getEdges().updateLabelling(r)}},isCoveredByA:function t(e){if(this.isCovered(e,this._resultPolyList))return true;return false},interfaces_:function t(){return[]},getClass:function t(){return _r}});_r.overlayOp=function(t,e,n){var i=new _r(t,e);var r=i.getResultGeometry(n);return r};_r.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return _r.createEmptyResult(_r.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}if(t.isGeometryCollection()||e.isGeometryCollection())throw new U("This method does not support GeometryCollection arguments");return br.overlayOp(t,e,_r.UNION)};_r.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return _r.createEmptyResult(_r.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return on.map(t,{interfaces_:function t(){return[MapOp]},map:function t(e){return e.intersection(n)}})}if(t.isGeometryCollection()||e.isGeometryCollection())throw new U("This method does not support GeometryCollection arguments");return br.overlayOp(t,e,_r.INTERSECTION)};_r.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return _r.createEmptyResult(_r.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}if(t.isGeometryCollection()||e.isGeometryCollection())throw new U("This method does not support GeometryCollection arguments");return br.overlayOp(t,e,_r.SYMDIFFERENCE)};_r.resultDimension=function(t,e,n){var i=e.getDimension();var r=n.getDimension();var a=-1;switch(t){case _r.INTERSECTION:a=Math.min(i,r);break;case _r.UNION:a=Math.max(i,r);break;case _r.DIFFERENCE:a=i;break;case _r.SYMDIFFERENCE:a=Math.max(i,r);break}return a};_r.createEmptyResult=function(t,e,n,i){var r=null;switch(_r.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection();break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon();break}return r};_r.difference=function(t,e){if(t.isEmpty())return _r.createEmptyResult(_r.DIFFERENCE,t,e,t.getFactory());if(e.isEmpty())return t.copy();if(t.isGeometryCollection()||e.isGeometryCollection())throw new U("This method does not support GeometryCollection arguments");return br.overlayOp(t,e,_r.DIFFERENCE)};_r.isResultOfOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];var n=t.getLocation(0);var i=t.getLocation(1);return _r.isResultOfOp(n,i,e)}else if(arguments.length===3){var r=arguments[0],a=arguments[1],o=arguments[2];if(r===sn.BOUNDARY)r=sn.INTERIOR;if(a===sn.BOUNDARY)a=sn.INTERIOR;switch(o){case _r.INTERSECTION:return r===sn.INTERIOR&&a===sn.INTERIOR;case _r.UNION:return r===sn.INTERIOR||a===sn.INTERIOR;case _r.DIFFERENCE:return r===sn.INTERIOR&&a!==sn.INTERIOR;case _r.SYMDIFFERENCE:return r===sn.INTERIOR&&a!==sn.INTERIOR||r!==sn.INTERIOR&&a===sn.INTERIOR}return false}};_r.INTERSECTION=1;_r.UNION=2;_r.DIFFERENCE=3;_r.SYMDIFFERENCE=4;function yr(){this._geom=new Array(2).fill(null);this._snapTolerance=null;this._cbr=null;var t=arguments[0],e=arguments[1];this._geom[0]=t;this._geom[1]=e;this.computeSnapTolerance()}$(yr.prototype,{selfSnap:function t(e){var n=new Gi(e);var i=n.snapTo(e,this._snapTolerance);return i},removeCommonBits:function t(e){this._cbr=new Vi;this._cbr.add(e[0]);this._cbr.add(e[1]);var n=new Array(2).fill(null);n[0]=this._cbr.removeCommonBits(e[0].copy());n[1]=this._cbr.removeCommonBits(e[1].copy());return n},prepareResult:function t(e){this._cbr.addCommonBits(e);return e},getResultGeometry:function t(e){var n=this.snap(this._geom);var i=_r.overlayOp(n[0],n[1],e);return this.prepareResult(i)},checkValid:function t(e){if(!e.isValid()){xt.out.println("Snapped geometry is invalid")}},computeSnapTolerance:function t(){this._snapTolerance=Gi.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},snap:function t(e){var n=this.removeCommonBits(e);var i=Gi.snap(n[0],n[1],this._snapTolerance);return i},interfaces_:function t(){return[]},getClass:function t(){return yr}});yr.overlayOp=function(t,e,n){var i=new yr(t,e);return i.getResultGeometry(n)};yr.union=function(t,e){return yr.overlayOp(t,e,_r.UNION)};yr.intersection=function(t,e){return yr.overlayOp(t,e,_r.INTERSECTION)};yr.symDifference=function(t,e){return yr.overlayOp(t,e,_r.SYMDIFFERENCE)};yr.difference=function(t,e){return yr.overlayOp(t,e,_r.DIFFERENCE)};function br(){this._geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this._geom[0]=t;this._geom[1]=e}$(br.prototype,{getResultGeometry:function t(e){var n=null;var i=false;var r=null;try{n=_r.overlayOp(this._geom[0],this._geom[1],e);var a=true;if(a)i=true}catch(t){if(t instanceof q){r=t}else throw t}finally{}if(!i){try{n=yr.overlayOp(this._geom[0],this._geom[1],e)}catch(t){if(t instanceof q){throw r}else throw t}finally{}}return n},interfaces_:function t(){return[]},getClass:function t(){return br}});br.overlayOp=function(t,e,n){var i=new br(t,e);return i.getResultGeometry(n)};br.union=function(t,e){return br.overlayOp(t,e,_r.UNION)};br.intersection=function(t,e){return br.overlayOp(t,e,_r.INTERSECTION)};br.symDifference=function(t,e){return br.overlayOp(t,e,_r.SYMDIFFERENCE)};br.difference=function(t,e){return br.overlayOp(t,e,_r.DIFFERENCE)};function wr(){this._geometryType=null;this._comps=null;var t=arguments[0],e=arguments[1];this._geometryType=t;this._comps=e}$(wr.prototype,{filter:function t(e){if(this._geometryType===null||wr.isOfType(e,this._geometryType))this._comps.add(e)},interfaces_:function t(){return[Bt]},getClass:function t(){return wr}});wr.isOfType=function(t,e){if(t.getGeometryType()===e)return true;if(e===at.TYPENAME_LINESTRING&&t.getGeometryType()===at.TYPENAME_LINEARRING)return true;return false};wr.extract=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return wr.extract(t,e,new _t)}else if(arguments.length===3){if(tt(arguments[2],vt)&&arguments[0]instanceof at&&typeof arguments[1]==="string"){var n=arguments[0],i=arguments[1],r=arguments[2];if(n.getGeometryType()===i){r.add(n)}else if(n instanceof qt){n.apply(new wr(i,r))}return r}else if(tt(arguments[2],vt)&&arguments[0]instanceof at&&arguments[1]instanceof Class){var a=arguments[0],o=arguments[1],s=arguments[2];return wr.extract(a,wr.toGeometryType(o),s)}}};function xr(){this._comps=null;var t=arguments[0];this._comps=t}$(xr.prototype,{filter:function t(e){if(e instanceof _e)this._comps.add(e)},interfaces_:function t(){return[Bt]},getClass:function t(){return xr}});xr.getPolygons=function(){if(arguments.length===1){var t=arguments[0];return xr.getPolygons(t,new _t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(e instanceof _e){n.add(e)}else if(e instanceof qt){e.apply(new xr(n))}return n}};function Sr(){this._inputPolys=null;this._geomFactory=null;var t=arguments[0];this._inputPolys=t;if(this._inputPolys===null)this._inputPolys=new _t}$(Sr.prototype,{reduceToGeometries:function t(e){var n=new _t;for(var i=e.iterator();i.hasNext();){var r=i.next();var a=null;if(tt(r,vt)){a=this.unionTree(r)}else if(r instanceof at){a=r}n.add(a)}return n},extractByEnvelope:function t(e,n,i){var r=new _t;for(var a=0;a<n.getNumGeometries();a++){var o=n.getGeometryN(a);if(o.getEnvelopeInternal().intersects(e))r.add(o);else i.add(o)}return this._geomFactory.buildGeometry(r)},unionOptimized:function t(e,n){var i=e.getEnvelopeInternal();var r=n.getEnvelopeInternal();if(!i.intersects(r)){var a=ji.combine(e,n);return a}if(e.getNumGeometries()<=1&&n.getNumGeometries()<=1)return this.unionActual(e,n);var o=i.intersection(r);return this.unionUsingEnvelopeIntersection(e,n,o)},union:function t(){if(this._inputPolys===null)throw new IllegalStateException("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();var e=new Ii(Sr.STRTREE_NODE_CAPACITY);for(var n=this._inputPolys.iterator();n.hasNext();){var i=n.next();e.insert(i.getEnvelopeInternal(),i)}this._inputPolys=null;var r=e.itemsTree();var a=this.unionTree(r);return a},binaryUnion:function t(){if(arguments.length===1){var e=arguments[0];return this.binaryUnion(e,0,e.size())}else if(arguments.length===3){var n=arguments[0],i=arguments[1],r=arguments[2];if(r-i<=1){var a=Sr.getGeometry(n,i);return this.unionSafe(a,null)}else if(r-i===2){return this.unionSafe(Sr.getGeometry(n,i),Sr.getGeometry(n,i+1))}else{var o=Math.trunc((r+i)/2);var a=this.binaryUnion(n,i,o);var s=this.binaryUnion(n,o,r);return this.unionSafe(a,s)}}},repeatedUnion:function t(e){var n=null;for(var i=e.iterator();i.hasNext();){var r=i.next();if(n===null)n=r.copy();else n=n.union(r)}return n},unionSafe:function t(e,n){if(e===null&&n===null)return null;if(e===null)return n.copy();if(n===null)return e.copy();return this.unionOptimized(e,n)},unionActual:function t(e,n){return Sr.restrictToPolygons(e.union(n))},unionTree:function t(e){var n=this.reduceToGeometries(e);var i=this.binaryUnion(n);return i},unionUsingEnvelopeIntersection:function t(e,n,i){var r=new _t;var a=this.extractByEnvelope(i,e,r);var o=this.extractByEnvelope(i,n,r);var s=this.unionActual(a,o);r.add(s);var l=ji.combine(r);return l},bufferUnion:function t(){if(arguments.length===1){var e=arguments[0];var n=e.get(0).getFactory();var i=n.buildGeometry(e);var r=i.buffer(0);return r}else if(arguments.length===2){var a=arguments[0],o=arguments[1];var n=a.getFactory();var i=n.createGeometryCollection([a,o]);var r=i.buffer(0);return r}},interfaces_:function t(){return[]},getClass:function t(){return Sr}});Sr.restrictToPolygons=function(t){if(tt(t,me)){return t}var e=xr.getPolygons(t);if(e.size()===1)return e.get(0);return t.getFactory().createMultiPolygon(Ze.toPolygonArray(e))};Sr.getGeometry=function(t,e){if(e>=t.size())return null;return t.get(e)};Sr.union=function(t){var e=new Sr(t);return e.union()};Sr.STRTREE_NODE_CAPACITY=4;function Cr(){this._polygons=new _t;this._lines=new _t;this._points=new _t;this._geomFact=null;if(arguments.length===1){if(tt(arguments[0],dt)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof at){var e=arguments[0];this.extract(e)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this._geomFact=i;this.extract(n)}}$(Cr.prototype,{unionNoOpt:function t(e){var n=this._geomFact.createPoint();return br.overlayOp(e,n,_r.UNION)},unionWithNull:function t(e,n){if(e===null&&n===null)return null;if(n===null)return e;if(e===null)return n;return e.union(n)},extract:function t(){if(tt(arguments[0],dt)){var e=arguments[0];for(var n=e.iterator();n.hasNext();){var i=n.next();this.extract(i)}}else if(arguments[0]instanceof at){var r=arguments[0];if(this._geomFact===null)this._geomFact=r.getFactory();wr.extract(r,at.TYPENAME_POLYGON,this._polygons);wr.extract(r,at.TYPENAME_LINESTRING,this._lines);wr.extract(r,at.TYPENAME_POINT,this._points)}},union:function t(){if(this._geomFact===null){return null}var e=null;if(this._points.size()>0){var n=this._geomFact.buildGeometry(this._points);e=this.unionNoOpt(n)}var i=null;if(this._lines.size()>0){var r=this._geomFact.buildGeometry(this._lines);i=this.unionNoOpt(r)}var a=null;if(this._polygons.size()>0){a=Sr.union(this._polygons)}var o=this.unionWithNull(i,a);var t=null;if(e===null)t=o;else if(o===null)t=e;else t=ki.union(e,o);if(t===null)return this._geomFact.createGeometryCollection();return t},interfaces_:function t(){return[]},getClass:function t(){return Cr}});Cr.union=function(){if(arguments.length===1){if(tt(arguments[0],dt)){var t=arguments[0];var e=new Cr(t);return e.union()}else if(arguments[0]instanceof at){var n=arguments[0];var e=new Cr(n);return e.union()}}else if(arguments.length===2){var i=arguments[0],r=arguments[1];var e=new Cr(i,r);return e.union()}};function Er(){}$(Er.prototype,{interfaces_:function t(){return[]},getClass:function t(){return Er}});Er.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return _r.createEmptyResult(_r.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}t.checkNotGeometryCollection(t);t.checkNotGeometryCollection(e);return br.overlayOp(t,e,_r.UNION)};function Or(){this._centroid=null;this._minDistance=V.MAX_VALUE;this._interiorPoint=null;var t=arguments[0];this._centroid=t.getCentroid().getCoordinate();this.addInterior(t);if(this._interiorPoint===null)this.addEndpoints(t)}$(Or.prototype,{addEndpoints:function t(){if(arguments[0]instanceof at){var e=arguments[0];if(e instanceof le){this.addEndpoints(e.getCoordinates())}else if(e instanceof qt){var n=e;for(var i=0;i<n.getNumGeometries();i++){this.addEndpoints(n.getGeometryN(i))}}}else if(arguments[0]instanceof Array){var r=arguments[0];this.add(r[0]);this.add(r[r.length-1])}},getInteriorPoint:function t(){return this._interiorPoint},addInterior:function t(){if(arguments[0]instanceof at){var e=arguments[0];if(e instanceof le){this.addInterior(e.getCoordinates())}else if(e instanceof qt){var n=e;for(var i=0;i<n.getNumGeometries();i++){this.addInterior(n.getGeometryN(i))}}}else if(arguments[0]instanceof Array){var r=arguments[0];for(var i=1;i<r.length-1;i++){this.add(r[i])}}},add:function t(e){var n=e.distance(this._centroid);if(n<this._minDistance){this._interiorPoint=new Q(e);this._minDistance=n}},interfaces_:function t(){return[]},getClass:function t(){return Or}});function Tr(){this._inputGeom=null;this._isClosedEndpointsInInterior=true;this._nonSimpleLocation=null;if(arguments.length===1){var t=arguments[0];this._inputGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this._inputGeom=e;this._isClosedEndpointsInInterior=!n.isInBoundary(2)}}$(Tr.prototype,{isSimpleMultiPoint:function t(e){if(e.isEmpty())return true;var n=new Ut;for(var i=0;i<e.getNumGeometries();i++){var r=e.getGeometryN(i);var a=r.getCoordinate();if(n.contains(a)){this._nonSimpleLocation=a;return false}n.add(a)}return true},isSimplePolygonal:function t(e){var n=Jn.getLines(e);for(var i=n.iterator();i.hasNext();){var r=i.next();if(!this.isSimpleLinearGeometry(r))return false}return true},hasClosedEndpointIntersection:function t(e){var n=new Ft;for(var i=e.getEdgeIterator();i.hasNext();){var r=i.next();var a=r.getMaximumSegmentIndex();var o=r.isClosed();var s=r.getCoordinate(0);this.addEndpoint(n,s,o);var l=r.getCoordinate(r.getNumPoints()-1);this.addEndpoint(n,l,o)}for(var i=n.values().iterator();i.hasNext();){var u=i.next();if(u.isClosed&&u.degree!==2){this._nonSimpleLocation=u.getCoordinate();return true}}return false},getNonSimpleLocation:function t(){return this._nonSimpleLocation},isSimpleLinearGeometry:function t(e){if(e.isEmpty())return true;var n=new fi(0,e);var i=new pn;var r=n.computeSelfNodes(i,true);if(!r.hasIntersection())return true;if(r.hasProperIntersection()){this._nonSimpleLocation=r.getProperIntersectionPoint();return false}if(this.hasNonEndpointIntersection(n))return false;if(this._isClosedEndpointsInInterior){if(this.hasClosedEndpointIntersection(n))return false}return true},hasNonEndpointIntersection:function t(e){for(var n=e.getEdgeIterator();n.hasNext();){var i=n.next();var r=i.getMaximumSegmentIndex();for(var a=i.getEdgeIntersectionList().iterator();a.hasNext();){var o=a.next();if(!o.isEndPoint(r)){this._nonSimpleLocation=o.getCoordinate();return true}}}return false},addEndpoint:function t(e,n,i){var r=e.get(n);if(r===null){r=new Mr(n);e.put(n,r)}r.addEndpoint(i)},computeSimple:function t(e){this._nonSimpleLocation=null;if(e.isEmpty())return true;if(e instanceof le)return this.isSimpleLinearGeometry(e);if(e instanceof Xt)return this.isSimpleLinearGeometry(e);if(e instanceof ye)return this.isSimpleMultiPoint(e);if(tt(e,me))return this.isSimplePolygonal(e);if(e instanceof qt)return this.isSimpleGeometryCollection(e);return true},isSimple:function t(){this._nonSimpleLocation=null;return this.computeSimple(this._inputGeom)},isSimpleGeometryCollection:function t(e){for(var n=0;n<e.getNumGeometries();n++){var i=e.getGeometryN(n);if(!this.computeSimple(i))return false}return true},interfaces_:function t(){return[]},getClass:function t(){return Tr}});Tr.isSimple=function(){if(arguments.length===1){var t=arguments[0];var e=new Tr(t);return e.isSimple()}else if(arguments.length===2){var n=arguments[0],i=arguments[1];var e=new Tr(n,i);return e.isSimple()}};function Mr(){this.pt=null;this.isClosed=null;this.degree=null;var t=arguments[0];this.pt=t;this.isClosed=false;this.degree=0}$(Mr.prototype,{addEndpoint:function t(e){this.degree++;this.isClosed|=e},getCoordinate:function t(){return this.pt},interfaces_:function t(){return[]},getClass:function t(){return Mr}});Tr.EndpointInfo=Mr;function Ir(){this._quadrantSegments=Ir.DEFAULT_QUADRANT_SEGMENTS;this._endCapStyle=Ir.CAP_ROUND;this._joinStyle=Ir.JOIN_ROUND;this._mitreLimit=Ir.DEFAULT_MITRE_LIMIT;this._isSingleSided=false;this._simplifyFactor=Ir.DEFAULT_SIMPLIFY_FACTOR;if(arguments.length===0){}else if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e);this.setEndCapStyle(n)}else if(arguments.length===4){var i=arguments[0],r=arguments[1],a=arguments[2],o=arguments[3];this.setQuadrantSegments(i);this.setEndCapStyle(r);this.setJoinStyle(a);this.setMitreLimit(o)}}$(Ir.prototype,{getEndCapStyle:function t(){return this._endCapStyle},isSingleSided:function t(){return this._isSingleSided},setQuadrantSegments:function t(e){this._quadrantSegments=e;if(this._quadrantSegments===0)this._joinStyle=Ir.JOIN_BEVEL;if(this._quadrantSegments<0){this._joinStyle=Ir.JOIN_MITRE;this._mitreLimit=Math.abs(this._quadrantSegments)}if(e<=0){this._quadrantSegments=1}if(this._joinStyle!==Ir.JOIN_ROUND){this._quadrantSegments=Ir.DEFAULT_QUADRANT_SEGMENTS}},getJoinStyle:function t(){return this._joinStyle},setJoinStyle:function t(e){this._joinStyle=e},setSimplifyFactor:function t(e){this._simplifyFactor=e<0?0:e},getSimplifyFactor:function t(){return this._simplifyFactor},getQuadrantSegments:function t(){return this._quadrantSegments},setEndCapStyle:function t(e){this._endCapStyle=e},getMitreLimit:function t(){return this._mitreLimit},setMitreLimit:function t(e){this._mitreLimit=e},setSingleSided:function t(e){this._isSingleSided=e},interfaces_:function t(){return[]},getClass:function t(){return Ir}});Ir.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)};Ir.CAP_ROUND=1;Ir.CAP_FLAT=2;Ir.CAP_SQUARE=3;Ir.JOIN_ROUND=1;Ir.JOIN_MITRE=2;Ir.JOIN_BEVEL=3;Ir.DEFAULT_QUADRANT_SEGMENTS=8;Ir.DEFAULT_MITRE_LIMIT=5;Ir.DEFAULT_SIMPLIFY_FACTOR=.01;function Rr(t){this.message=t||""}Rr.prototype=new Error;Rr.prototype.name="EmptyStackException";function Nr(){this.array_=[]}Nr.prototype=new vt;Nr.prototype.add=function(t){this.array_.push(t);return true};Nr.prototype.get=function(t){if(t<0||t>=this.size()){throw new IndexOutOfBoundsException}return this.array_[t]};Nr.prototype.push=function(t){this.array_.push(t);return t};Nr.prototype.pop=function(t){if(this.array_.length===0){throw new Rr}return this.array_.pop()};Nr.prototype.peek=function(){if(this.array_.length===0){throw new Rr}return this.array_[this.array_.length-1]};Nr.prototype.empty=function(){if(this.array_.length===0){return true}else{return false}};Nr.prototype.isEmpty=function(){return this.empty()};Nr.prototype.search=function(t){return this.array_.indexOf(t)};Nr.prototype.size=function(){return this.array_.length};Nr.prototype.toArray=function(){var t=[];for(var e=0,n=this.array_.length;e<n;e++){t.push(this.array_[e])}return t};function Ar(){this._minIndex=-1;this._minCoord=null;this._minDe=null;this._orientedDe=null}$(Ar.prototype,{getCoordinate:function t(){return this._minCoord},getRightmostSide:function t(e,n){var i=this.getRightmostSideOfSegment(e,n);if(i<0)i=this.getRightmostSideOfSegment(e,n-1);if(i<0){this._minCoord=null;this.checkForRightmostCoordinate(e)}return i},findRightmostEdgeAtVertex:function t(){var e=this._minDe.getEdge().getCoordinates();Z.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var n=e[this._minIndex-1];var i=e[this._minIndex+1];var r=ge.index(this._minCoord,i,n);var a=false;if(n.y<this._minCoord.y&&i.y<this._minCoord.y&&r===ge.COUNTERCLOCKWISE){a=true}else if(n.y>this._minCoord.y&&i.y>this._minCoord.y&&r===ge.CLOCKWISE){a=true}if(a){this._minIndex=this._minIndex-1}},getRightmostSideOfSegment:function t(e,n){var i=e.getEdge();var r=i.getCoordinates();if(n<0||n+1>=r.length)return-1;if(r[n].y===r[n+1].y)return-1;var a=ln.LEFT;if(r[n].y<r[n+1].y)a=ln.RIGHT;return a},getEdge:function t(){return this._orientedDe},checkForRightmostCoordinate:function t(e){var n=e.getEdge().getCoordinates();for(var i=0;i<n.length-1;i++){if(this._minCoord===null||n[i].x>this._minCoord.x){this._minDe=e;this._minIndex=i;this._minCoord=n[i]}}},findRightmostEdgeAtNode:function t(){var e=this._minDe.getNode();var n=e.getEdges();this._minDe=n.getRightmostEdge();if(!this._minDe.isForward()){this._minDe=this._minDe.getSym();this._minIndex=this._minDe.getEdge().getCoordinates().length-1}},findEdge:function t(e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(!i.isForward())continue;this.checkForRightmostCoordinate(i)}Z.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing");if(this._minIndex===0){this.findRightmostEdgeAtNode()}else{this.findRightmostEdgeAtVertex()}this._orientedDe=this._minDe;var r=this.getRightmostSide(this._minDe,this._minIndex);if(r===ln.LEFT){this._orientedDe=this._minDe.getSym()}},interfaces_:function t(){return[]},getClass:function t(){return Ar}});function Lr(){this.array_=[]}Lr.prototype.addLast=function(t){this.array_.push(t)};Lr.prototype.removeFirst=function(){return this.array_.shift()};Lr.prototype.isEmpty=function(){return this.array_.length===0};function Pr(){this._finder=null;this._dirEdgeList=new _t;this._nodes=new _t;this._rightMostCoord=null;this._env=null;this._finder=new Ar}$(Pr.prototype,{clearVisitedEdges:function t(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var n=e.next();n.setVisited(false)}},getRightmostCoordinate:function t(){return this._rightMostCoord},computeNodeDepth:function t(e){var n=null;for(var i=e.getEdges().iterator();i.hasNext();){var r=i.next();if(r.isVisited()||r.getSym().isVisited()){n=r;break}}if(n===null)throw new mn("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(n);for(var i=e.getEdges().iterator();i.hasNext();){var r=i.next();r.setVisited(true);this.copySymDepths(r)}},computeDepth:function t(e){this.clearVisitedEdges();var n=this._finder.getEdge();var i=n.getNode();var r=n.getLabel();n.setEdgeDepths(ln.RIGHT,e);this.copySymDepths(n);this.computeDepths(n)},create:function t(e){this.addReachable(e);this._finder.findEdge(this._dirEdgeList);this._rightMostCoord=this._finder.getCoordinate()},findResultEdges:function t(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var n=e.next();if(n.getDepth(ln.RIGHT)>=1&&n.getDepth(ln.LEFT)<=0&&!n.isInteriorAreaEdge()){n.setInResult(true)}}},computeDepths:function t(e){var n=new It;var i=new Lr;var r=e.getNode();i.addLast(r);n.add(r);e.setVisited(true);while(!i.isEmpty()){var a=i.removeFirst();n.add(a);this.computeNodeDepth(a);for(var o=a.getEdges().iterator();o.hasNext();){var s=o.next();var l=s.getSym();if(l.isVisited())continue;var u=l.getNode();if(!n.contains(u)){i.addLast(u);n.add(u)}}}},compareTo:function t(e){var n=e;if(this._rightMostCoord.x<n._rightMostCoord.x){return-1}if(this._rightMostCoord.x>n._rightMostCoord.x){return 1}return 0},getEnvelope:function t(){if(this._env===null){var e=new rt;for(var n=this._dirEdgeList.iterator();n.hasNext();){var i=n.next();var r=i.getEdge().getCoordinates();for(var a=0;a<r.length-1;a++){e.expandToInclude(r[a])}}this._env=e}return this._env},addReachable:function t(e){var n=new Nr;n.add(e);while(!n.empty()){var i=n.pop();this.add(i,n)}},copySymDepths:function t(e){var n=e.getSym();n.setDepth(ln.LEFT,e.getDepth(ln.RIGHT));n.setDepth(ln.RIGHT,e.getDepth(ln.LEFT))},add:function t(e,n){e.setVisited(true);this._nodes.add(e);for(var i=e.getEdges().iterator();i.hasNext();){var r=i.next();this._dirEdgeList.add(r);var a=r.getSym();var o=a.getNode();if(!o.isVisited())n.push(o)}},getNodes:function t(){return this._nodes},getDirectedEdges:function t(){return this._dirEdgeList},interfaces_:function t(){return[H]},getClass:function t(){return Pr}});function Dr(){this._inputLine=null;this._distanceTol=null;this._isDeleted=null;this._angleOrientation=ge.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}$(Dr.prototype,{isDeletable:function t(e,n,i,r){var a=this._inputLine[e];var o=this._inputLine[n];var s=this._inputLine[i];if(!this.isConcave(a,o,s))return false;if(!this.isShallow(a,o,s,r))return false;return this.isShallowSampled(a,o,e,i,r)},deleteShallowConcavities:function t(){var e=1;var n=this._inputLine.length-1;var i=this.findNextNonDeletedIndex(e);var r=this.findNextNonDeletedIndex(i);var a=false;while(r<this._inputLine.length){var o=false;if(this.isDeletable(e,i,r,this._distanceTol)){this._isDeleted[i]=Dr.DELETE;o=true;a=true}if(o)e=r;else e=i;i=this.findNextNonDeletedIndex(e);r=this.findNextNonDeletedIndex(i)}return a},isShallowConcavity:function t(e,n,i,r){var a=ge.index(e,n,i);var o=a===this._angleOrientation;if(!o)return false;var s=hn.pointToSegment(n,e,i);return s<r},isShallowSampled:function t(e,n,i,r,a){var o=Math.trunc((r-i)/Dr.NUM_PTS_TO_CHECK);if(o<=0)o=1;for(var s=i;s<r;s+=o){if(!this.isShallow(e,n,this._inputLine[s],a))return false}return true},isConcave:function t(e,n,i){var r=ge.index(e,n,i);var t=r===this._angleOrientation;return t},simplify:function t(e){this._distanceTol=Math.abs(e);if(e<0)this._angleOrientation=ge.CLOCKWISE;this._isDeleted=new Array(this._inputLine.length).fill(null);var n=false;do{n=this.deleteShallowConcavities()}while(n);return this.collapseLine()},findNextNonDeletedIndex:function t(e){var n=e+1;while(n<this._inputLine.length&&this._isDeleted[n]===Dr.DELETE){n++}return n},isShallow:function t(e,n,i,r){var a=hn.pointToSegment(n,e,i);return a<r},collapseLine:function t(){var e=new bt;for(var n=0;n<this._inputLine.length;n++){if(this._isDeleted[n]!==Dr.DELETE)e.add(this._inputLine[n])}return e.toCoordinateArray()},interfaces_:function t(){return[]},getClass:function t(){return Dr}});Dr.simplify=function(t,e){var n=new Dr(t);return n.simplify(e)};Dr.INIT=0;Dr.DELETE=1;Dr.KEEP=1;Dr.NUM_PTS_TO_CHECK=10;function jr(){this._ptList=null;this._precisionModel=null;this._minimimVertexDistance=0;this._ptList=new _t}$(jr.prototype,{getCoordinates:function t(){var e=this._ptList.toArray(jr.COORDINATE_ARRAY_TYPE);return e},setPrecisionModel:function t(e){this._precisionModel=e},addPt:function t(e){var n=new Q(e);this._precisionModel.makePrecise(n);if(this.isRedundant(n))return null;this._ptList.add(n)},reverse:function t(){},addPts:function t(e,n){if(n){for(var i=0;i<e.length;i++){this.addPt(e[i])}}else{for(var i=e.length-1;i>=0;i--){this.addPt(e[i])}}},isRedundant:function t(e){if(this._ptList.size()<1)return false;var n=this._ptList.get(this._ptList.size()-1);var i=e.distance(n);if(i<this._minimimVertexDistance)return true;return false},toString:function t(){var e=new Ze;var n=e.createLineString(this.getCoordinates());return n.toString()},closeRing:function t(){if(this._ptList.size()<1)return null;var e=new Q(this._ptList.get(0));var n=this._ptList.get(this._ptList.size()-1);var i=null;if(this._ptList.size()>=2)i=this._ptList.get(this._ptList.size()-2);if(e.equals(n))return null;this._ptList.add(e)},setMinimumVertexDistance:function t(e){this._minimimVertexDistance=e},interfaces_:function t(){return[]},getClass:function t(){return jr}});jr.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);function kr(){}$(kr.prototype,{interfaces_:function t(){return[]},getClass:function t(){return kr}});kr.toDegrees=function(t){return t*180/Math.PI};kr.normalize=function(t){while(t>Math.PI){t-=kr.PI_TIMES_2}while(t<=-Math.PI){t+=kr.PI_TIMES_2}return t};kr.angle=function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];var i=n.x-e.x;var r=n.y-e.y;return Math.atan2(r,i)}};kr.isAcute=function(t,e,n){var i=t.x-e.x;var r=t.y-e.y;var a=n.x-e.x;var o=n.y-e.y;var s=i*a+r*o;return s>0};kr.isObtuse=function(t,e,n){var i=t.x-e.x;var r=t.y-e.y;var a=n.x-e.x;var o=n.y-e.y;var s=i*a+r*o;return s<0};kr.interiorAngle=function(t,e,n){var i=kr.angle(e,t);var r=kr.angle(e,n);return Math.abs(r-i)};kr.normalizePositive=function(t){if(t<0){while(t<0){t+=kr.PI_TIMES_2}if(t>=kr.PI_TIMES_2)t=0}else{while(t>=kr.PI_TIMES_2){t-=kr.PI_TIMES_2}if(t<0)t=0}return t};kr.angleBetween=function(t,e,n){var i=kr.angle(e,t);var r=kr.angle(e,n);return kr.diff(i,r)};kr.diff=function(t,e){var n=null;if(t<e){n=e-t}else{n=t-e}if(n>Math.PI){n=2*Math.PI-n}return n};kr.toRadians=function(t){return t*Math.PI/180};kr.getTurn=function(t,e){var n=Math.sin(e-t);if(n>0){return kr.COUNTERCLOCKWISE}if(n<0){return kr.CLOCKWISE}return kr.NONE};kr.angleBetweenOriented=function(t,e,n){var i=kr.angle(e,t);var r=kr.angle(e,n);var a=r-i;if(a<=-Math.PI)return a+kr.PI_TIMES_2;if(a>Math.PI)return a-kr.PI_TIMES_2;return a};kr.PI_TIMES_2=2*Math.PI;kr.PI_OVER_2=Math.PI/2;kr.PI_OVER_4=Math.PI/4;kr.COUNTERCLOCKWISE=ge.COUNTERCLOCKWISE;kr.CLOCKWISE=ge.CLOCKWISE;kr.NONE=ge.COLLINEAR;function Fr(){this._maxCurveSegmentError=0;this._filletAngleQuantum=null;this._closingSegLengthFactor=1;this._segList=null;this._distance=0;this._precisionModel=null;this._bufParams=null;this._li=null;this._s0=null;this._s1=null;this._s2=null;this._seg0=new Qn;this._seg1=new Qn;this._offset0=new Qn;this._offset1=new Qn;this._side=0;this._hasNarrowConcaveAngle=false;var t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t;this._bufParams=e;this._li=new pn;this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments();if(e.getQuadrantSegments()>=8&&e.getJoinStyle()===Ir.JOIN_ROUND)this._closingSegLengthFactor=Fr.MAX_CLOSING_SEG_LEN_FACTOR;this.init(n)}$(Fr.prototype,{addNextSegment:function t(e,n){this._s0=this._s1;this._s1=this._s2;this._s2=e;this._seg0.setCoordinates(this._s0,this._s1);this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0);this._seg1.setCoordinates(this._s1,this._s2);this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1);if(this._s1.equals(this._s2))return null;var i=ge.index(this._s0,this._s1,this._s2);var r=i===ge.CLOCKWISE&&this._side===ln.LEFT||i===ge.COUNTERCLOCKWISE&&this._side===ln.RIGHT;if(i===0){this.addCollinear(n)}else if(r){this.addOutsideTurn(i,n)}else{this.addInsideTurn(i,n)}},addLineEndCap:function t(e,n){var i=new Qn(e,n);var r=new Qn;this.computeOffsetSegment(i,ln.LEFT,this._distance,r);var a=new Qn;this.computeOffsetSegment(i,ln.RIGHT,this._distance,a);var o=n.x-e.x;var s=n.y-e.y;var l=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Ir.CAP_ROUND:this._segList.addPt(r.p1);this.addDirectedFillet(n,l+Math.PI/2,l-Math.PI/2,ge.CLOCKWISE,this._distance);this._segList.addPt(a.p1);break;case Ir.CAP_FLAT:this._segList.addPt(r.p1);this._segList.addPt(a.p1);break;case Ir.CAP_SQUARE:var u=new Q;u.x=Math.abs(this._distance)*Math.cos(l);u.y=Math.abs(this._distance)*Math.sin(l);var c=new Q(r.p1.x+u.x,r.p1.y+u.y);var f=new Q(a.p1.x+u.x,a.p1.y+u.y);this._segList.addPt(c);this._segList.addPt(f);break}},getCoordinates:function t(){var e=this._segList.getCoordinates();return e},addMitreJoin:function t(e,n,i,r){var a=true;var o=null;try{o=fn.intersection(n.p0,n.p1,i.p0,i.p1);var s=r<=0?1:o.distance(e)/Math.abs(r);if(s>this._bufParams.getMitreLimit())a=false}catch(t){if(t instanceof cn){o=new Q(0,0);a=false}else throw t}finally{}if(a){this._segList.addPt(o)}else{this.addLimitedMitreJoin(n,i,r,this._bufParams.getMitreLimit())}},addOutsideTurn:function t(e,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Fr.OFFSET_SEGMENT_SEPARATION_FACTOR){this._segList.addPt(this._offset0.p1);return null}if(this._bufParams.getJoinStyle()===Ir.JOIN_MITRE){this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance)}else if(this._bufParams.getJoinStyle()===Ir.JOIN_BEVEL){this.addBevelJoin(this._offset0,this._offset1)}else{if(n)this._segList.addPt(this._offset0.p1);this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance);this._segList.addPt(this._offset1.p0)}},createSquare:function t(e){this._segList.addPt(new Q(e.x+this._distance,e.y+this._distance));this._segList.addPt(new Q(e.x+this._distance,e.y-this._distance));this._segList.addPt(new Q(e.x-this._distance,e.y-this._distance));this._segList.addPt(new Q(e.x-this._distance,e.y+this._distance));this._segList.closeRing()},addSegments:function t(e,n){this._segList.addPts(e,n)},addFirstSegment:function t(){this._segList.addPt(this._offset1.p0)},addCornerFillet:function t(e,n,i,r,a){var o=n.x-e.x;var s=n.y-e.y;var l=Math.atan2(s,o);var u=i.x-e.x;var c=i.y-e.y;var f=Math.atan2(c,u);if(r===ge.CLOCKWISE){if(l<=f)l+=2*Math.PI}else{if(l>=f)l-=2*Math.PI}this._segList.addPt(n);this.addDirectedFillet(e,l,f,r,a);this._segList.addPt(i)},addLastSegment:function t(){this._segList.addPt(this._offset1.p1)},initSideSegments:function t(e,n,i){this._s1=e;this._s2=n;this._side=i;this._seg1.setCoordinates(e,n);this.computeOffsetSegment(this._seg1,i,this._distance,this._offset1)},addLimitedMitreJoin:function t(e,n,i,r){var a=this._seg0.p1;var o=kr.angle(a,this._seg0.p0);var s=kr.angle(a,this._seg1.p1);var l=kr.angleBetweenOriented(this._seg0.p0,a,this._seg1.p1);var u=l/2;var c=kr.normalize(o+u);var f=kr.normalize(c+Math.PI);var h=r*i;var d=h*Math.abs(Math.sin(u));var p=i-d;var v=a.x+h*Math.cos(f);var g=a.y+h*Math.sin(f);var m=new Q(v,g);var _=new Qn(a,m);var y=_.pointAlongOffset(1,p);var b=_.pointAlongOffset(1,-p);if(this._side===ln.LEFT){this._segList.addPt(y);this._segList.addPt(b)}else{this._segList.addPt(b);this._segList.addPt(y)}},addDirectedFillet:function t(e,n,i,r,a){var o=r===ge.CLOCKWISE?-1:1;var s=Math.abs(n-i);var l=Math.trunc(s/this._filletAngleQuantum+.5);if(l<1)return null;var u=null,c=null;u=0;c=s/l;var f=u;var h=new Q;while(f<s){var d=n+o*f;h.x=e.x+a*Math.cos(d);h.y=e.y+a*Math.sin(d);this._segList.addPt(h);f+=c}},computeOffsetSegment:function t(e,n,i,r){var a=n===ln.LEFT?1:-1;var o=e.p1.x-e.p0.x;var s=e.p1.y-e.p0.y;var l=Math.sqrt(o*o+s*s);var u=a*i*o/l;var c=a*i*s/l;r.p0.x=e.p0.x-c;r.p0.y=e.p0.y+u;r.p1.x=e.p1.x-c;r.p1.y=e.p1.y+u},addInsideTurn:function t(e,n){this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1);if(this._li.hasIntersection()){this._segList.addPt(this._li.getIntersection(0))}else{this._hasNarrowConcaveAngle=true;if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Fr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR){this._segList.addPt(this._offset0.p1)}else{this._segList.addPt(this._offset0.p1);if(this._closingSegLengthFactor>0){var i=new Q((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i);var r=new Q((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else{this._segList.addPt(this._s1)}this._segList.addPt(this._offset1.p0)}}},createCircle:function t(e){var n=new Q(e.x+this._distance,e.y);this._segList.addPt(n);this.addDirectedFillet(e,0,2*Math.PI,-1,this._distance);this._segList.closeRing()},addBevelJoin:function t(e,n){this._segList.addPt(e.p1);this._segList.addPt(n.p0)},init:function t(e){this._distance=e;this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2));this._segList=new jr;this._segList.setPrecisionModel(this._precisionModel);this._segList.setMinimumVertexDistance(e*Fr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function t(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var n=this._li.getIntersectionNum();if(n>=2){if(this._bufParams.getJoinStyle()===Ir.JOIN_BEVEL||this._bufParams.getJoinStyle()===Ir.JOIN_MITRE){if(e)this._segList.addPt(this._offset0.p1);this._segList.addPt(this._offset1.p0)}else{this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,ge.CLOCKWISE,this._distance)}}},closeRing:function t(){this._segList.closeRing()},hasNarrowConcaveAngle:function t(){return this._hasNarrowConcaveAngle},interfaces_:function t(){return[]},getClass:function t(){return Fr}});Fr.OFFSET_SEGMENT_SEPARATION_FACTOR=.001;Fr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001;Fr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6;Fr.MAX_CLOSING_SEG_LEN_FACTOR=80;function $r(){this._distance=0;this._precisionModel=null;this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t;this._bufParams=e}$($r.prototype,{getOffsetCurve:function t(e,n){this._distance=n;if(n===0)return null;var i=n<0;var r=Math.abs(n);var a=this.getSegGen(r);if(e.length<=1){this.computePointCurve(e[0],a)}else{this.computeOffsetCurve(e,i,a)}var o=a.getCoordinates();if(i)St.reverse(o);return o},computeSingleSidedBufferCurve:function t(e,n,i){var r=this.simplifyTolerance(this._distance);if(n){i.addSegments(e,true);var a=Dr.simplify(e,-r);var o=a.length-1;i.initSideSegments(a[o],a[o-1],ln.LEFT);i.addFirstSegment();for(var s=o-2;s>=0;s--){i.addNextSegment(a[s],true)}}else{i.addSegments(e,false);var l=Dr.simplify(e,r);var u=l.length-1;i.initSideSegments(l[0],l[1],ln.LEFT);i.addFirstSegment();for(var s=2;s<=u;s++){i.addNextSegment(l[s],true)}}i.addLastSegment();i.closeRing()},computeRingBufferCurve:function t(e,n,i){var r=this.simplifyTolerance(this._distance);if(n===ln.RIGHT)r=-r;var a=Dr.simplify(e,r);var o=a.length-1;i.initSideSegments(a[o-1],a[0],n);for(var s=1;s<=o;s++){var l=s!==1;i.addNextSegment(a[s],l)}i.closeRing()},computeLineBufferCurve:function t(e,n){var i=this.simplifyTolerance(this._distance);var r=Dr.simplify(e,i);var a=r.length-1;n.initSideSegments(r[0],r[1],ln.LEFT);for(var o=2;o<=a;o++){n.addNextSegment(r[o],true)}n.addLastSegment();n.addLineEndCap(r[a-1],r[a]);var s=Dr.simplify(e,-i);var l=s.length-1;n.initSideSegments(s[l],s[l-1],ln.LEFT);for(var o=l-2;o>=0;o--){n.addNextSegment(s[o],true)}n.addLastSegment();n.addLineEndCap(s[1],s[0]);n.closeRing()},computePointCurve:function t(e,n){switch(this._bufParams.getEndCapStyle()){case Ir.CAP_ROUND:n.createCircle(e);break;case Ir.CAP_SQUARE:n.createSquare(e);break}},getLineCurve:function t(e,n){this._distance=n;if(n<0&&!this._bufParams.isSingleSided())return null;if(n===0)return null;var i=Math.abs(n);var r=this.getSegGen(i);if(e.length<=1){this.computePointCurve(e[0],r)}else{if(this._bufParams.isSingleSided()){var a=n<0;this.computeSingleSidedBufferCurve(e,a,r)}else this.computeLineBufferCurve(e,r)}var o=r.getCoordinates();return o},getBufferParameters:function t(){return this._bufParams},simplifyTolerance:function t(e){return e*this._bufParams.getSimplifyFactor()},getRingCurve:function t(e,n,i){this._distance=i;if(e.length<=2)return this.getLineCurve(e,i);if(i===0){return $r.copyCoordinates(e)}var r=this.getSegGen(i);this.computeRingBufferCurve(e,n,r);return r.getCoordinates()},computeOffsetCurve:function t(e,n,i){var r=this.simplifyTolerance(this._distance);if(n){var a=Dr.simplify(e,-r);var o=a.length-1;i.initSideSegments(a[o],a[o-1],ln.LEFT);i.addFirstSegment();for(var s=o-2;s>=0;s--){i.addNextSegment(a[s],true)}}else{var l=Dr.simplify(e,r);var u=l.length-1;i.initSideSegments(l[0],l[1],ln.LEFT);i.addFirstSegment();for(var s=2;s<=u;s++){i.addNextSegment(l[s],true)}}i.addLastSegment()},getSegGen:function t(e){return new Fr(this._precisionModel,this._bufParams,e)},interfaces_:function t(){return[]},getClass:function t(){return $r}});$r.copyCoordinates=function(t){var e=new Array(t.length).fill(null);for(var n=0;n<e.length;n++){e[n]=new Q(t[n])}return e};function Gr(){this._subgraphs=null;this._seg=new Qn;var t=arguments[0];this._subgraphs=t}$(Gr.prototype,{findStabbedSegments:function t(){if(arguments.length===1){var e=arguments[0];var n=new _t;for(var i=this._subgraphs.iterator();i.hasNext();){var r=i.next();var a=r.getEnvelope();if(e.y<a.getMinY()||e.y>a.getMaxY())continue;this.findStabbedSegments(e,r.getDirectedEdges(),n)}return n}else if(arguments.length===3){if(tt(arguments[2],vt)&&arguments[0]instanceof Q&&arguments[1]instanceof Dn){var o=arguments[0],s=arguments[1],l=arguments[2];var u=s.getEdge().getCoordinates();for(var i=0;i<u.length-1;i++){this._seg.p0=u[i];this._seg.p1=u[i+1];if(this._seg.p0.y>this._seg.p1.y)this._seg.reverse();var c=Math.max(this._seg.p0.x,this._seg.p1.x);if(c<o.x)continue;if(this._seg.isHorizontal())continue;if(o.y<this._seg.p0.y||o.y>this._seg.p1.y)continue;if(ge.index(this._seg.p0,this._seg.p1,o)===ge.RIGHT)continue;var f=s.getDepth(ln.LEFT);if(!this._seg.p0.equals(u[i]))f=s.getDepth(ln.RIGHT);var h=new Ur(this._seg,f);l.add(h)}}else if(tt(arguments[2],vt)&&arguments[0]instanceof Q&&tt(arguments[1],vt)){var d=arguments[0],p=arguments[1],v=arguments[2];for(var i=p.iterator();i.hasNext();){var g=i.next();if(!g.isForward())continue;this.findStabbedSegments(d,g,v)}}}},getDepth:function t(e){var n=this.findStabbedSegments(e);if(n.size()===0)return 0;var i=Vn.min(n);return i._leftDepth},interfaces_:function t(){return[]},getClass:function t(){return Gr}});function Ur(){this._upwardSeg=null;this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new Qn(t);this._leftDepth=e}$(Ur.prototype,{compareTo:function t(e){var n=e;if(this._upwardSeg.minX()>=n._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=n._upwardSeg.minX())return-1;var i=this._upwardSeg.orientationIndex(n._upwardSeg);if(i!==0)return i;i=-1*n._upwardSeg.orientationIndex(this._upwardSeg);if(i!==0)return i;return this._upwardSeg.compareTo(n._upwardSeg)},compareX:function t(e,n){var i=e.p0.compareTo(n.p0);if(i!==0)return i;return e.p1.compareTo(n.p1)},toString:function t(){return this._upwardSeg.toString()},interfaces_:function t(){return[H]},getClass:function t(){return Ur}});Gr.DepthSegment=Ur;function Yr(){this.p0=null;this.p1=null;this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t;this.p1=e;this.p2=n}$(Yr.prototype,{area:function t(){return Yr.area(this.p0,this.p1,this.p2)},signedArea:function t(){return Yr.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function t(e){if(e===null)throw new U("Supplied point is null.");return Yr.interpolateZ(e,this.p0,this.p1,this.p2)},longestSideLength:function t(){return Yr.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function t(){return Yr.isAcute(this.p0,this.p1,this.p2)},circumcentre:function t(){return Yr.circumcentre(this.p0,this.p1,this.p2)},area3D:function t(){return Yr.area3D(this.p0,this.p1,this.p2)},centroid:function t(){return Yr.centroid(this.p0,this.p1,this.p2)},inCentre:function t(){return Yr.inCentre(this.p0,this.p1,this.p2)},interfaces_:function t(){return[]},getClass:function t(){return Yr}});Yr.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)};Yr.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2};Yr.det=function(t,e,n,i){return t*i-e*n};Yr.interpolateZ=function(t,e,n,i){var r=e.x;var a=e.y;var o=n.x-r;var s=i.x-r;var l=n.y-a;var u=i.y-a;var c=o*u-s*l;var f=t.x-r;var h=t.y-a;var d=(u*f-s*h)/c;var p=(-l*f+o*h)/c;var v=e.z+d*(n.z-e.z)+p*(i.z-e.z);return v};Yr.longestSideLength=function(t,e,n){var i=t.distance(e);var r=e.distance(n);var a=n.distance(t);var o=i;if(r>o)o=r;if(a>o)o=a;return o};Yr.isAcute=function(t,e,n){if(!kr.isAcute(t,e,n))return false;if(!kr.isAcute(e,n,t))return false;if(!kr.isAcute(n,t,e))return false;return true};Yr.circumcentre=function(t,e,n){var i=n.x;var r=n.y;var a=t.x-i;var o=t.y-r;var s=e.x-i;var l=e.y-r;var u=2*Yr.det(a,o,s,l);var c=Yr.det(o,a*a+o*o,l,s*s+l*l);var f=Yr.det(a,a*a+o*o,s,s*s+l*l);var h=i-c/u;var d=r+f/u;return new Q(h,d)};Yr.perpendicularBisector=function(t,e){var n=e.x-t.x;var i=e.y-t.y;var r=new fn(t.x+n/2,t.y+i/2,1);var a=new fn(t.x-i+n/2,t.y+n+i/2,1);return new fn(r,a)};Yr.angleBisector=function(t,e,n){var i=e.distance(t);var r=e.distance(n);var a=i/(i+r);var o=n.x-t.x;var s=n.y-t.y;var l=new Q(t.x+a*o,t.y+a*s);return l};Yr.area3D=function(t,e,n){var i=e.x-t.x;var r=e.y-t.y;var a=e.z-t.z;var o=n.x-t.x;var s=n.y-t.y;var l=n.z-t.z;var u=r*l-a*s;var c=a*o-i*l;var f=i*s-r*o;var h=u*u+c*c+f*f;var d=Math.sqrt(h)/2;return d};Yr.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3;var r=(t.y+e.y+n.y)/3;return new Q(i,r)};Yr.inCentre=function(t,e,n){var i=e.distance(n);var r=t.distance(n);var a=t.distance(e);var o=i+r+a;var s=(i*t.x+r*e.x+a*n.x)/o;var l=(i*t.y+r*e.y+a*n.y)/o;return new Q(s,l)};function Vr(){this._inputGeom=null;this._distance=null;this._curveBuilder=null;this._curveList=new _t;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t;this._distance=e;this._curveBuilder=n}$(Vr.prototype,{addPoint:function t(e){if(this._distance<=0)return null;var n=e.getCoordinates();var i=this._curveBuilder.getLineCurve(n,this._distance);this.addCurve(i,sn.EXTERIOR,sn.INTERIOR)},addPolygon:function t(e){var n=this._distance;var i=ln.LEFT;if(this._distance<0){n=-this._distance;i=ln.RIGHT}var r=e.getExteriorRing();var a=St.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&a.length<3)return null;this.addPolygonRing(a,n,i,sn.EXTERIOR,sn.INTERIOR);for(var o=0;o<e.getNumInteriorRing();o++){var s=e.getInteriorRingN(o);var l=St.removeRepeatedPoints(s.getCoordinates());if(this._distance>0&&this.isErodedCompletely(s,-this._distance))continue;this.addPolygonRing(l,n,ln.opposite(i),sn.INTERIOR,sn.EXTERIOR)}},isTriangleErodedCompletely:function t(e,n){var i=new Yr(e[0],e[1],e[2]);var r=i.inCentre();var a=hn.pointToSegment(r,i.p0,i.p1);return a<Math.abs(n)},addLineString:function t(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var n=St.removeRepeatedPoints(e.getCoordinates());var i=this._curveBuilder.getLineCurve(n,this._distance);this.addCurve(i,sn.EXTERIOR,sn.INTERIOR)},addCurve:function t(e,n,i){if(e===null||e.length<2)return null;var r=new tr(e,new yn(0,sn.BOUNDARY,n,i));this._curveList.add(r)},getCurves:function t(){this.add(this._inputGeom);return this._curveList},addPolygonRing:function t(e,n,i,r,a){if(n===0&&e.length<be.MINIMUM_VALID_SIZE)return null;var o=r;var s=a;if(e.length>=be.MINIMUM_VALID_SIZE&&ge.isCCW(e)){o=a;s=r;i=ln.opposite(i)}var l=this._curveBuilder.getRingCurve(e,i,n);this.addCurve(l,o,s)},add:function t(e){if(e.isEmpty())return null;if(e instanceof _e)this.addPolygon(e);else if(e instanceof le)this.addLineString(e);else if(e instanceof ce)this.addPoint(e);else if(e instanceof ye)this.addCollection(e);else if(e instanceof Xt)this.addCollection(e);else if(e instanceof we)this.addCollection(e);else if(e instanceof qt)this.addCollection(e);else throw new UnsupportedOperationException(e.getClass().getName())},isErodedCompletely:function t(e,n){var i=e.getCoordinates();var r=0;if(i.length<4)return n<0;if(i.length===4)return this.isTriangleErodedCompletely(i,n);var a=e.getEnvelopeInternal();var o=Math.min(a.getHeight(),a.getWidth());if(n<0&&2*Math.abs(n)>o)return true;return false},addCollection:function t(e){for(var n=0;n<e.getNumGeometries();n++){var i=e.getGeometryN(n);this.add(i)}},interfaces_:function t(){return[]},getClass:function t(){return Vr}});function Hr(){this._hasIntersection=false;this._hasProper=false;this._hasProperInterior=false;this._hasInterior=false;this._properIntersectionPoint=null;this._li=null;this._isSelfIntersection=null;this.numIntersections=0;this.numInteriorIntersections=0;this.numProperIntersections=0;this.numTests=0;var t=arguments[0];this._li=t}$(Hr.prototype,{isTrivialIntersection:function t(e,n,i,r){if(e===i){if(this._li.getIntersectionNum()===1){if(Hr.isAdjacentSegments(n,r))return true;if(e.isClosed()){var a=e.size()-1;if(n===0&&r===a||r===0&&n===a){return true}}}}return false},getProperIntersectionPoint:function t(){return this._properIntersectionPoint},hasProperInteriorIntersection:function t(){return this._hasProperInterior},getLineIntersector:function t(){return this._li},hasProperIntersection:function t(){return this._hasProper},processIntersections:function t(e,n,i,r){if(e===i&&n===r)return null;this.numTests++;var a=e.getCoordinates()[n];var o=e.getCoordinates()[n+1];var s=i.getCoordinates()[r];var l=i.getCoordinates()[r+1];this._li.computeIntersection(a,o,s,l);if(this._li.hasIntersection()){this.numIntersections++;if(this._li.isInteriorIntersection()){this.numInteriorIntersections++;this._hasInterior=true}if(!this.isTrivialIntersection(e,n,i,r)){this._hasIntersection=true;e.addIntersections(this._li,n,0);i.addIntersections(this._li,r,1);if(this._li.isProper()){this.numProperIntersections++;this._hasProper=true;this._hasProperInterior=true}}}},hasIntersection:function t(){return this._hasIntersection},isDone:function t(){return false},hasInteriorIntersection:function t(){return this._hasInterior},interfaces_:function t(){return[lr]},getClass:function t(){return Hr}});Hr.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1};function zr(){this._bufParams=null;this._workingPrecisionModel=null;this._workingNoder=null;this._geomFact=null;this._graph=null;this._edgeList=new mr;var t=arguments[0];this._bufParams=t}$(zr.prototype,{setWorkingPrecisionModel:function t(e){this._workingPrecisionModel=e},insertUniqueEdge:function t(e){var n=this._edgeList.findEqualEdge(e);if(n!==null){var i=n.getLabel();var r=e.getLabel();if(!n.isPointwiseEqual(e)){r=new yn(e.getLabel());r.flip()}i.merge(r);var a=zr.depthDelta(r);var o=n.getDepthDelta();var s=o+a;n.setDepthDelta(s)}else{this._edgeList.add(e);e.setDepthDelta(zr.depthDelta(e.getLabel()))}},buildSubgraphs:function t(e,n){var i=new _t;for(var r=e.iterator();r.hasNext();){var a=r.next();var o=a.getRightmostCoordinate();var s=new Gr(i);var l=s.getDepth(o);a.computeDepth(l);a.findResultEdges();i.add(a);n.add(a.getDirectedEdges(),a.getNodes())}},createSubgraphs:function t(e){var n=new _t;for(var i=e.getNodes().iterator();i.hasNext();){var r=i.next();if(!r.isVisited()){var a=new Pr;a.create(r);n.add(a)}}Vn.sort(n,Vn.reverseOrder());return n},createEmptyResultGeometry:function t(){var e=this._geomFact.createPolygon();return e},getNoder:function t(e){if(this._workingNoder!==null)return this._workingNoder;var n=new or;var i=new pn;i.setPrecisionModel(e);n.setSegmentIntersector(new Hr(i));return n},buffer:function t(e,n){var i=this._workingPrecisionModel;if(i===null)i=e.getPrecisionModel();this._geomFact=e.getFactory();var r=new $r(i,this._bufParams);var a=new Vr(e,n,r);var o=a.getCurves();if(o.size()<=0){return this.createEmptyResultGeometry()}this.computeNodedEdges(o,i);this._graph=new jn(new An);this._graph.addEdges(this._edgeList.getEdges());var s=this.createSubgraphs(this._graph);var l=new hr(this._geomFact);this.buildSubgraphs(s,l);var u=l.getPolygons();if(u.size()<=0){return this.createEmptyResultGeometry()}var c=this._geomFact.buildGeometry(u);return c},computeNodedEdges:function t(e,n){var i=this.getNoder(n);i.computeNodes(e);var r=i.getNodedSubstrings();for(var a=r.iterator();a.hasNext();){var o=a.next();var s=o.getCoordinates();if(s.length===2&&s[0].equals2D(s[1]))continue;var l=o.getData();var u=new ci(o.getCoordinates(),new yn(l));this.insertUniqueEdge(u)}},setNoder:function t(e){this._workingNoder=e},interfaces_:function t(){return[]},getClass:function t(){return zr}});zr.depthDelta=function(t){var e=t.getLocation(0,ln.LEFT);var n=t.getLocation(0,ln.RIGHT);if(e===sn.INTERIOR&&n===sn.EXTERIOR)return 1;else if(e===sn.EXTERIOR&&n===sn.INTERIOR)return-1;return 0};zr.convertSegStrings=function(t){var e=new Ze;var n=new _t;while(t.hasNext()){var i=t.next();var r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};function Br(){this._noder=null;this._scaleFactor=null;this._offsetX=null;this._offsetY=null;this._isScaled=false;if(arguments.length===2){var t=arguments[0],e=arguments[1];Br.call(this,t,e,0,0)}else if(arguments.length===4){var n=arguments[0],i=arguments[1],r=arguments[2],a=arguments[3];this._noder=n;this._scaleFactor=i;this._isScaled=!this.isIntegerPrecision()}}$(Br.prototype,{rescale:function t(){if(tt(arguments[0],dt)){var e=arguments[0];for(var n=e.iterator();n.hasNext();){var i=n.next();this.rescale(i.getCoordinates())}}else if(arguments[0]instanceof Array){var r=arguments[0];var a=null;var o=null;if(r.length===2){a=new Q(r[0]);o=new Q(r[1])}for(var n=0;n<r.length;n++){r[n].x=r[n].x/this._scaleFactor+this._offsetX;r[n].y=r[n].y/this._scaleFactor+this._offsetY}if(r.length===2&&r[0].equals2D(r[1])){xt.out.println(r)}}},scale:function t(){if(tt(arguments[0],dt)){var e=arguments[0];var n=new _t(e.size());for(var i=e.iterator();i.hasNext();){var r=i.next();n.add(new tr(this.scale(r.getCoordinates()),r.getData()))}return n}else if(arguments[0]instanceof Array){var a=arguments[0];var o=new Array(a.length).fill(null);for(var i=0;i<a.length;i++){o[i]=new Q(Math.round((a[i].x-this._offsetX)*this._scaleFactor),Math.round((a[i].y-this._offsetY)*this._scaleFactor),a[i].z)}var s=St.removeRepeatedPoints(o);return s}},isIntegerPrecision:function t(){return this._scaleFactor===1},getNodedSubstrings:function t(){var e=this._noder.getNodedSubstrings();if(this._isScaled)this.rescale(e);return e},computeNodes:function t(e){var n=e;if(this._isScaled)n=this.scale(e);this._noder.computeNodes(n)},interfaces_:function t(){return[rr]},getClass:function t(){return Br}});function Wr(){this._li=new pn;this._segStrings=null;var t=arguments[0];this._segStrings=t}$(Wr.prototype,{checkEndPtVertexIntersections:function t(){if(arguments.length===0){for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();var i=n.getCoordinates();this.checkEndPtVertexIntersections(i[0],this._segStrings);this.checkEndPtVertexIntersections(i[i.length-1],this._segStrings)}}else if(arguments.length===2){var r=arguments[0],a=arguments[1];for(var e=a.iterator();e.hasNext();){var n=e.next();var i=n.getCoordinates();for(var o=1;o<i.length-1;o++){if(i[o].equals(r))throw new q("found endpt/interior pt intersection at index "+o+" :pt "+r)}}}},checkInteriorIntersections:function t(){if(arguments.length===0){for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();for(var i=this._segStrings.iterator();i.hasNext();){var r=i.next();this.checkInteriorIntersections(n,r)}}}else if(arguments.length===2){var a=arguments[0],o=arguments[1];var s=a.getCoordinates();var l=o.getCoordinates();for(var u=0;u<s.length-1;u++){for(var c=0;c<l.length-1;c++){this.checkInteriorIntersections(a,u,o,c)}}}else if(arguments.length===4){var f=arguments[0],h=arguments[1],d=arguments[2],p=arguments[3];if(f===d&&h===p)return null;var v=f.getCoordinates()[h];var g=f.getCoordinates()[h+1];var m=d.getCoordinates()[p];var _=d.getCoordinates()[p+1];this._li.computeIntersection(v,g,m,_);if(this._li.hasIntersection()){if(this._li.isProper()||this.hasInteriorIntersection(this._li,v,g)||this.hasInteriorIntersection(this._li,m,_)){throw new q("found non-noded intersection at "+v+"-"+g+" and "+m+"-"+_)}}}},checkValid:function t(){this.checkEndPtVertexIntersections();this.checkInteriorIntersections();this.checkCollapses()},checkCollapses:function t(){if(arguments.length===0){for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();this.checkCollapses(n)}}else if(arguments.length===1){var i=arguments[0];var r=i.getCoordinates();for(var e=0;e<r.length-2;e++){this.checkCollapse(r[e],r[e+1],r[e+2])}}},hasInteriorIntersection:function t(e,n,i){for(var r=0;r<e.getIntersectionNum();r++){var a=e.getIntersection(r);if(!(a.equals(n)||a.equals(i)))return true}return false},checkCollapse:function t(e,n,i){if(e.equals(i))throw new q("found non-noded collapse at "+Wr.fact.createLineString([e,n,i]))},interfaces_:function t(){return[]},getClass:function t(){return Wr}});Wr.fact=new Ze;function qr(){this._li=null;this._pt=null;this._originalPt=null;this._ptScaled=null;this._p0Scaled=null;this._p1Scaled=null;this._scaleFactor=null;this._minx=null;this._maxx=null;this._miny=null;this._maxy=null;this._corner=new Array(4).fill(null);this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._originalPt=t;this._pt=t;this._scaleFactor=e;this._li=n;if(e<=0)throw new U("Scale factor must be non-zero");if(e!==1){this._pt=new Q(this.scale(t.x),this.scale(t.y));this._p0Scaled=new Q;this._p1Scaled=new Q}this.initCorners(this._pt)}$(qr.prototype,{intersectsScaled:function t(e,n){var i=Math.min(e.x,n.x);var r=Math.max(e.x,n.x);var a=Math.min(e.y,n.y);var o=Math.max(e.y,n.y);var s=this._maxx<i||this._minx>r||this._maxy<a||this._miny>o;if(s)return false;var l=this.intersectsToleranceSquare(e,n);Z.isTrue(!(s&&l),"Found bad envelope test");return l},initCorners:function t(e){var n=.5;this._minx=e.x-n;this._maxx=e.x+n;this._miny=e.y-n;this._maxy=e.y+n;this._corner[0]=new Q(this._maxx,this._maxy);this._corner[1]=new Q(this._minx,this._maxy);this._corner[2]=new Q(this._minx,this._miny);this._corner[3]=new Q(this._maxx,this._miny)},intersects:function t(e,n){if(this._scaleFactor===1)return this.intersectsScaled(e,n);this.copyScaled(e,this._p0Scaled);this.copyScaled(n,this._p1Scaled);return this.intersectsScaled(this._p0Scaled,this._p1Scaled)},scale:function t(e){return Math.round(e*this._scaleFactor)},getCoordinate:function t(){return this._originalPt},copyScaled:function t(e,n){n.x=this.scale(e.x);n.y=this.scale(e.y)},getSafeEnvelope:function t(){if(this._safeEnv===null){var e=qr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new rt(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv},intersectsPixelClosure:function t(e,n){this._li.computeIntersection(e,n,this._corner[0],this._corner[1]);if(this._li.hasIntersection())return true;this._li.computeIntersection(e,n,this._corner[1],this._corner[2]);if(this._li.hasIntersection())return true;this._li.computeIntersection(e,n,this._corner[2],this._corner[3]);if(this._li.hasIntersection())return true;this._li.computeIntersection(e,n,this._corner[3],this._corner[0]);if(this._li.hasIntersection())return true;return false},intersectsToleranceSquare:function t(e,n){var i=false;var r=false;this._li.computeIntersection(e,n,this._corner[0],this._corner[1]);if(this._li.isProper())return true;this._li.computeIntersection(e,n,this._corner[1],this._corner[2]);if(this._li.isProper())return true;if(this._li.hasIntersection())i=true;this._li.computeIntersection(e,n,this._corner[2],this._corner[3]);if(this._li.isProper())return true;if(this._li.hasIntersection())r=true;this._li.computeIntersection(e,n,this._corner[3],this._corner[0]);if(this._li.isProper())return true;if(i&&r)return true;if(e.equals(this._pt))return true;if(n.equals(this._pt))return true;return false},addSnappedNode:function t(e,n){var i=e.getCoordinate(n);var r=e.getCoordinate(n+1);if(this.intersects(i,r)){e.addIntersection(this.getCoordinate(),n);return true}return false},interfaces_:function t(){return[]},getClass:function t(){return qr}});qr.SAFE_ENV_EXPANSION_FACTOR=.75;function Xr(){this.selectedSegment=new Qn}$(Xr.prototype,{select:function t(){if(arguments.length===1){var e=arguments[0]}else if(arguments.length===2){var n=arguments[0],i=arguments[1];n.getLineSegment(i,this.selectedSegment);this.select(this.selectedSegment)}},interfaces_:function t(){return[]},getClass:function t(){return Xr}});function Kr(){this._index=null;var t=arguments[0];this._index=t}$(Kr.prototype,{snap:function t(){if(arguments.length===1){var e=arguments[0];return this.snap(e,null,-1)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],r=arguments[2];var a=n.getSafeEnvelope();var o=new Zr(n,i,r);this._index.query(a,{interfaces_:function t(){return[Bn]},visitItem:function t(e){var n=e;n.select(a,o)}});return o.isNodeAdded()}},interfaces_:function t(){return[]},getClass:function t(){return Kr}});function Zr(){Xr.apply(this);this._hotPixel=null;this._parentEdge=null;this._hotPixelVertexIndex=null;this._isNodeAdded=false;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t;this._parentEdge=e;this._hotPixelVertexIndex=n}X(Zr,Xr);$(Zr.prototype,{isNodeAdded:function t(){return this._isNodeAdded},select:function t(){if(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof nr){var e=arguments[0],n=arguments[1];var i=e.getContext();if(this._parentEdge!==null){if(i===this._parentEdge&&n===this._hotPixelVertexIndex)return null}this._isNodeAdded=this._hotPixel.addSnappedNode(i,n)}else return Xr.prototype.select.apply(this,arguments)},interfaces_:function t(){return[]},getClass:function t(){return Zr}});Kr.HotPixelSnapAction=Zr;function Qr(){this._li=null;this._interiorIntersections=null;var t=arguments[0];this._li=t;this._interiorIntersections=new _t}$(Qr.prototype,{processIntersections:function t(e,n,i,r){if(e===i&&n===r)return null;var a=e.getCoordinates()[n];var o=e.getCoordinates()[n+1];var s=i.getCoordinates()[r];var l=i.getCoordinates()[r+1];this._li.computeIntersection(a,o,s,l);if(this._li.hasIntersection()){if(this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++){this._interiorIntersections.add(this._li.getIntersection(u))}e.addIntersections(this._li,n,0);i.addIntersections(this._li,r,1)}}},isDone:function t(){return false},getInteriorIntersections:function t(){return this._interiorIntersections},interfaces_:function t(){return[lr]},getClass:function t(){return Qr}});function Jr(){this._pm=null;this._li=null;this._scaleFactor=null;this._noder=null;this._pointSnapper=null;this._nodedSegStrings=null;var t=arguments[0];this._pm=t;this._li=new pn;this._li.setPrecisionModel(t);this._scaleFactor=t.getScale()}$(Jr.prototype,{checkCorrectness:function t(e){var n=tr.getNodedSubstrings(e);var i=new Wr(n);try{i.checkValid()}catch(t){if(t instanceof un){t.printStackTrace()}else throw t}finally{}},getNodedSubstrings:function t(){return tr.getNodedSubstrings(this._nodedSegStrings)},snapRound:function t(e,n){var i=this.findInteriorIntersections(e,n);this.computeIntersectionSnaps(i);this.computeVertexSnaps(e)},findInteriorIntersections:function t(e,n){var i=new Qr(n);this._noder.setSegmentIntersector(i);this._noder.computeNodes(e);return i.getInteriorIntersections()},computeVertexSnaps:function t(){if(tt(arguments[0],dt)){var e=arguments[0];for(var n=e.iterator();n.hasNext();){var i=n.next();this.computeVertexSnaps(i)}}else if(arguments[0]instanceof tr){var r=arguments[0];var a=r.getCoordinates();for(var o=0;o<a.length;o++){var s=new qr(a[o],this._scaleFactor,this._li);var l=this._pointSnapper.snap(s,r,o);if(l){r.addIntersection(a[o],o)}}}},computeNodes:function t(e){this._nodedSegStrings=e;this._noder=new or;this._pointSnapper=new Kr(this._noder.getIndex());this.snapRound(e,this._li)},computeIntersectionSnaps:function t(e){for(var n=e.iterator();n.hasNext();){var i=n.next();var r=new qr(i,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},interfaces_:function t(){return[rr]},getClass:function t(){return Jr}});function ta(){this._argGeom=null;this._distance=null;this._bufParams=new Ir;this._resultGeometry=null;this._saveException=null;if(arguments.length===1){var t=arguments[0];this._argGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this._argGeom=e;this._bufParams=n}}$(ta.prototype,{bufferFixedPrecision:function t(e){var n=new Br(new Jr(new Xe(1)),e.getScale());var i=new zr(this._bufParams);i.setWorkingPrecisionModel(e);i.setNoder(n);this._resultGeometry=i.buffer(this._argGeom,this._distance)},bufferReducedPrecision:function t(){if(arguments.length===0){for(var e=ta.MAX_PRECISION_DIGITS;e>=0;e--){try{this.bufferReducedPrecision(e)}catch(t){if(t instanceof mn){this._saveException=t}else throw t}finally{}if(this._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var n=arguments[0];var i=ta.precisionScaleFactor(this._argGeom,this._distance,n);var r=new Xe(i);this.bufferFixedPrecision(r)}},computeGeometry:function t(){this.bufferOriginalPrecision();if(this._resultGeometry!==null)return null;var e=this._argGeom.getFactory().getPrecisionModel();if(e.getType()===Xe.FIXED)this.bufferFixedPrecision(e);else this.bufferReducedPrecision()},setQuadrantSegments:function t(e){this._bufParams.setQuadrantSegments(e)},bufferOriginalPrecision:function t(){try{var e=new zr(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(t instanceof q){this._saveException=t}else throw t}finally{}},getResultGeometry:function t(e){this._distance=e;this.computeGeometry();return this._resultGeometry},setEndCapStyle:function t(e){this._bufParams.setEndCapStyle(e)},interfaces_:function t(){return[]},getClass:function t(){return ta}});ta.bufferOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];var n=new ta(t);var i=n.getResultGeometry(e);return i}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof at&&typeof arguments[1]==="number"){var r=arguments[0],a=arguments[1],o=arguments[2];var s=new ta(r);s.setQuadrantSegments(o);var i=s.getResultGeometry(a);return i}else if(arguments[2]instanceof Ir&&arguments[0]instanceof at&&typeof arguments[1]==="number"){var l=arguments[0],u=arguments[1],c=arguments[2];var s=new ta(l,c);var i=s.getResultGeometry(u);return i}}else if(arguments.length===4){var f=arguments[0],h=arguments[1],d=arguments[2],p=arguments[3];var s=new ta(f);s.setQuadrantSegments(d);s.setEndCapStyle(p);var i=s.getResultGeometry(h);return i}};ta.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal();var r=wt.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()));var a=e>0?e:0;var o=r+2*a;var s=Math.trunc(Math.log(o)/Math.log(10)+1);var l=n-s;var u=Math.pow(10,l);return u};ta.CAP_ROUND=Ir.CAP_ROUND;ta.CAP_BUTT=Ir.CAP_FLAT;ta.CAP_FLAT=Ir.CAP_FLAT;ta.CAP_SQUARE=Ir.CAP_SQUARE;ta.MAX_PRECISION_DIGITS=12;function ea(){this.treeSet=new Ut;this.list=new _t}$(ea.prototype,{filter:function t(e){if(!this.treeSet.contains(e)){this.list.add(e);this.treeSet.add(e)}},getCoordinates:function t(){var e=new Array(this.list.size()).fill(null);return this.list.toArray(e)},interfaces_:function t(){return[ot]},getClass:function t(){return ea}});ea.filterCoordinates=function(t){var e=new ea;for(var n=0;n<t.length;n++){e.filter(t[n])}return e.getCoordinates()};function na(){this._geomFactory=null;this._inputPts=null;if(arguments.length===1){var t=arguments[0];na.call(this,na.extractCoordinates(t),t.getFactory())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this._inputPts=ea.filterCoordinates(e);this._geomFactory=n}}$(na.prototype,{preSort:function t(e){var n=null;for(var i=1;i<e.length;i++){if(e[i].y<e[0].y||e[i].y===e[0].y&&e[i].x<e[0].x){n=e[0];e[0]=e[i];e[i]=n}}Vt.sort(e,1,e.length,new ia(e[0]));return e},computeOctRing:function t(e){var n=this.computeOctPts(e);var i=new bt;i.add(n,false);if(i.size()<3){return null}i.closeRing();return i.toCoordinateArray()},lineOrPolygon:function t(e){e=this.cleanRing(e);if(e.length===3){return this._geomFactory.createLineString([e[0],e[1]])}var n=this._geomFactory.createLinearRing(e);return this._geomFactory.createPolygon(n)},cleanRing:function t(e){Z.equals(e[0],e[e.length-1]);var n=new _t;var i=null;for(var r=0;r<=e.length-2;r++){var a=e[r];var o=e[r+1];if(a.equals(o)){continue}if(i!==null&&this.isBetween(i,a,o)){continue}n.add(a);i=a}n.add(e[e.length-1]);var s=new Array(n.size()).fill(null);return n.toArray(s)},isBetween:function t(e,n,i){if(ge.index(e,n,i)!==0){return false}if(e.x!==i.x){if(e.x<=n.x&&n.x<=i.x){return true}if(i.x<=n.x&&n.x<=e.x){return true}}if(e.y!==i.y){if(e.y<=n.y&&n.y<=i.y){return true}if(i.y<=n.y&&n.y<=e.y){return true}}return false},reduce:function t(e){var n=this.computeOctRing(e);if(n===null)return e;var i=new Ut;for(var r=0;r<n.length;r++){i.add(n[r])}for(var r=0;r<e.length;r++){if(!gn.isInRing(e[r],n)){i.add(e[r])}}var a=St.toCoordinateArray(i);if(a.length<3)return this.padArray3(a);return a},getConvexHull:function t(){if(this._inputPts.length===0){return this._geomFactory.createGeometryCollection()}if(this._inputPts.length===1){return this._geomFactory.createPoint(this._inputPts[0])}if(this._inputPts.length===2){return this._geomFactory.createLineString(this._inputPts)}var e=this._inputPts;if(this._inputPts.length>50){e=this.reduce(this._inputPts)}var n=this.preSort(e);var i=this.grahamScan(n);var r=this.toCoordinateArray(i);return this.lineOrPolygon(r)},padArray3:function t(e){var n=new Array(3).fill(null);for(var i=0;i<n.length;i++){if(i<e.length){n[i]=e[i]}else n[i]=e[0]}return n},computeOctPts:function t(e){var n=new Array(8).fill(null);for(var i=0;i<n.length;i++){n[i]=e[0]}for(var r=1;r<e.length;r++){if(e[r].x<n[0].x){n[0]=e[r]}if(e[r].x-e[r].y<n[1].x-n[1].y){n[1]=e[r]}if(e[r].y>n[2].y){n[2]=e[r]}if(e[r].x+e[r].y>n[3].x+n[3].y){n[3]=e[r]}if(e[r].x>n[4].x){n[4]=e[r]}if(e[r].x-e[r].y>n[5].x-n[5].y){n[5]=e[r]}if(e[r].y<n[6].y){n[6]=e[r]}if(e[r].x+e[r].y<n[7].x+n[7].y){n[7]=e[r]}}return n},toCoordinateArray:function t(e){var n=new Array(e.size()).fill(null);for(var i=0;i<e.size();i++){var r=e.get(i);n[i]=r}return n},grahamScan:function t(e){var n=null;var i=new Nr;i.push(e[0]);i.push(e[1]);i.push(e[2]);for(var r=3;r<e.length;r++){n=i.pop();while(!i.empty()&&ge.index(i.peek(),n,e[r])>0){n=i.pop()}i.push(n);i.push(e[r])}i.push(e[0]);return i},interfaces_:function t(){return[]},getClass:function t(){return na}});na.extractCoordinates=function(t){var e=new ea;t.apply(e);return e.getCoordinates()};function ia(){this._origin=null;var t=arguments[0];this._origin=t}$(ia.prototype,{compare:function t(e,n){var i=e;var r=n;return ia.polarCompare(this._origin,i,r)},interfaces_:function t(){return[B]},getClass:function t(){return ia}});ia.polarCompare=function(t,e,n){var i=e.x-t.x;var r=e.y-t.y;var a=n.x-t.x;var o=n.y-t.y;var s=ge.index(t,e,n);if(s===ge.COUNTERCLOCKWISE)return 1;if(s===ge.CLOCKWISE)return-1;var l=i*i+r*r;var u=a*a+o*o;if(l<u){return-1}if(l>u){return 1}return 0};na.RadialComparator=ia;function ra(){this._areaBasePt=null;this._triangleCent3=new Q;this._areasum2=0;this._cg3=new Q;this._lineCentSum=new Q;this._totalLength=0;this._ptCount=0;this._ptCentSum=new Q;var t=arguments[0];this._areaBasePt=null;this.add(t)}$(ra.prototype,{setAreaBasePoint:function t(e){this._areaBasePt=e},addPoint:function t(e){this._ptCount+=1;this._ptCentSum.x+=e.x;this._ptCentSum.y+=e.y},addLineSegments:function t(e){var n=0;for(var i=0;i<e.length-1;i++){var r=e[i].distance(e[i+1]);if(r===0)continue;n+=r;var a=(e[i].x+e[i+1].x)/2;this._lineCentSum.x+=r*a;var o=(e[i].y+e[i+1].y)/2;this._lineCentSum.y+=r*o}this._totalLength+=n;if(n===0&&e.length>0)this.addPoint(e[0])},addHole:function t(e){var n=ge.isCCW(e);for(var i=0;i<e.length-1;i++){this.addTriangle(this._areaBasePt,e[i],e[i+1],n)}this.addLineSegments(e)},getCentroid:function t(){var e=new Q;if(Math.abs(this._areasum2)>0){e.x=this._cg3.x/3/this._areasum2;e.y=this._cg3.y/3/this._areasum2}else if(this._totalLength>0){e.x=this._lineCentSum.x/this._totalLength;e.y=this._lineCentSum.y/this._totalLength}else if(this._ptCount>0){e.x=this._ptCentSum.x/this._ptCount;e.y=this._ptCentSum.y/this._ptCount}else{return null}return e},addShell:function t(e){if(e.length>0)this.setAreaBasePoint(e[0]);var n=!ge.isCCW(e);for(var i=0;i<e.length-1;i++){this.addTriangle(this._areaBasePt,e[i],e[i+1],n)}this.addLineSegments(e)},addTriangle:function t(e,n,i,r){var a=r?1:-1;ra.centroid3(e,n,i,this._triangleCent3);var o=ra.area2(e,n,i);this._cg3.x+=a*o*this._triangleCent3.x;this._cg3.y+=a*o*this._triangleCent3.y;this._areasum2+=a*o},add:function t(){if(arguments[0]instanceof _e){var e=arguments[0];this.addShell(e.getExteriorRing().getCoordinates());for(var n=0;n<e.getNumInteriorRing();n++){this.addHole(e.getInteriorRingN(n).getCoordinates())}}else if(arguments[0]instanceof at){var i=arguments[0];if(i.isEmpty())return null;if(i instanceof ce){this.addPoint(i.getCoordinate())}else if(i instanceof le){this.addLineSegments(i.getCoordinates())}else if(i instanceof _e){var r=i;this.add(r)}else if(i instanceof qt){var a=i;for(var n=0;n<a.getNumGeometries();n++){this.add(a.getGeometryN(n))}}}},interfaces_:function t(){return[]},getClass:function t(){return ra}});ra.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)};ra.centroid3=function(t,e,n,i){i.x=t.x+e.x+n.x;i.y=t.y+e.y+n.y;return null};ra.getCentroid=function(t){var e=new ra(t);return e.getCentroid()};function aa(){this._li=new pn;this._ptLocator=new Fn;this._arg=null;this._nodes=new Ln(new gi);this._im=null;this._isolatedEdges=new _t;this._invalidPoint=null;var t=arguments[0];this._arg=t}$(aa.prototype,{insertEdgeEnds:function t(e){for(var n=e.iterator();n.hasNext();){var i=n.next();this._nodes.add(i)}},computeProperIntersectionIM:function t(e,n){var i=this._arg[0].getGeometry().getDimension();var r=this._arg[1].getGeometry().getDimension();var a=e.hasProperIntersection();var o=e.hasProperInteriorIntersection();if(i===2&&r===2){if(a)n.setAtLeast("212101212")}else if(i===2&&r===1){if(a)n.setAtLeast("FFF0FFFF2");if(o)n.setAtLeast("1FFFFF1FF")}else if(i===1&&r===2){if(a)n.setAtLeast("F0FFFFFF2");if(o)n.setAtLeast("1F1FFFFFF")}else if(i===1&&r===1){if(o)n.setAtLeast("0FFFFFFFF")}},labelIsolatedEdges:function t(e,n){for(var i=this._arg[e].getEdgeIterator();i.hasNext();){var r=i.next();if(r.isIsolated()){this.labelIsolatedEdge(r,n,this._arg[n].getGeometry());this._isolatedEdges.add(r)}}},labelIsolatedEdge:function t(e,n,i){if(i.getDimension()>0){var r=this._ptLocator.locate(e.getCoordinate(),i);e.getLabel().setAllLocations(n,r)}else{e.getLabel().setAllLocations(n,sn.EXTERIOR)}},computeIM:function t(){var e=new oi;e.set(sn.EXTERIOR,sn.EXTERIOR,2);if(!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal())){this.computeDisjointIM(e);return e}this._arg[0].computeSelfNodes(this._li,false);this._arg[1].computeSelfNodes(this._li,false);var n=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,false);this.computeIntersectionNodes(0);this.computeIntersectionNodes(1);this.copyNodesAndLabels(0);this.copyNodesAndLabels(1);this.labelIsolatedNodes();this.computeProperIntersectionIM(n,e);var i=new hi;var r=i.computeEdgeEnds(this._arg[0].getEdgeIterator());this.insertEdgeEnds(r);var a=i.computeEdgeEnds(this._arg[1].getEdgeIterator());this.insertEdgeEnds(a);this.labelNodeEdges();this.labelIsolatedEdges(0,1);this.labelIsolatedEdges(1,0);this.updateIM(e);return e},labelNodeEdges:function t(){for(var e=this._nodes.iterator();e.hasNext();){var n=e.next();n.getEdges().computeLabelling(this._arg)}},copyNodesAndLabels:function t(e){for(var n=this._arg[e].getNodeIterator();n.hasNext();){var i=n.next();var r=this._nodes.addNode(i.getCoordinate());r.setLabel(e,i.getLabel().getLocation(e))}},labelIntersectionNodes:function t(e){for(var n=this._arg[e].getEdgeIterator();n.hasNext();){var i=n.next();var r=i.getLabel().getLocation(e);for(var a=i.getEdgeIntersectionList().iterator();a.hasNext();){var o=a.next();var s=this._nodes.find(o.coord);if(s.getLabel().isNull(e)){if(r===sn.BOUNDARY)s.setLabelBoundary(e);else s.setLabel(e,sn.INTERIOR)}}}},labelIsolatedNode:function t(e,n){var i=this._ptLocator.locate(e.getCoordinate(),this._arg[n].getGeometry());e.getLabel().setAllLocations(n,i)},computeIntersectionNodes:function t(e){for(var n=this._arg[e].getEdgeIterator();n.hasNext();){var i=n.next();var r=i.getLabel().getLocation(e);for(var a=i.getEdgeIntersectionList().iterator();a.hasNext();){var o=a.next();var s=this._nodes.addNode(o.coord);if(r===sn.BOUNDARY)s.setLabelBoundary(e);else{if(s.getLabel().isNull(e))s.setLabel(e,sn.INTERIOR)}}}},labelIsolatedNodes:function t(){for(var e=this._nodes.iterator();e.hasNext();){var n=e.next();var i=n.getLabel();Z.isTrue(i.getGeometryCount()>0,"node with empty label found");if(n.isIsolated()){if(i.isNull(0))this.labelIsolatedNode(n,0);else this.labelIsolatedNode(n,1)}}},updateIM:function t(e){for(var n=this._isolatedEdges.iterator();n.hasNext();){var i=n.next();i.updateIM(e)}for(var r=this._nodes.iterator();r.hasNext();){var a=r.next();a.updateIM(e);a.updateIMFromEdges(e)}},computeDisjointIM:function t(e){var n=this._arg[0].getGeometry();if(!n.isEmpty()){e.set(sn.INTERIOR,sn.EXTERIOR,n.getDimension());e.set(sn.BOUNDARY,sn.EXTERIOR,n.getBoundaryDimension())}var i=this._arg[1].getGeometry();if(!i.isEmpty()){e.set(sn.EXTERIOR,sn.INTERIOR,i.getDimension());e.set(sn.EXTERIOR,sn.BOUNDARY,i.getBoundaryDimension())}},interfaces_:function t(){return[]},getClass:function t(){return aa}});function oa(){this._rectEnv=null;var t=arguments[0];this._rectEnv=t.getEnvelopeInternal()}$(oa.prototype,{isContainedInBoundary:function t(e){if(e instanceof _e)return false;if(e instanceof ce)return this.isPointContainedInBoundary(e);if(e instanceof le)return this.isLineStringContainedInBoundary(e);for(var n=0;n<e.getNumGeometries();n++){var i=e.getGeometryN(n);if(!this.isContainedInBoundary(i))return false}return true},isLineSegmentContainedInBoundary:function t(e,n){if(e.equals(n))return this.isPointContainedInBoundary(e);if(e.x===n.x){if(e.x===this._rectEnv.getMinX()||e.x===this._rectEnv.getMaxX())return true}else if(e.y===n.y){if(e.y===this._rectEnv.getMinY()||e.y===this._rectEnv.getMaxY())return true}return false},isLineStringContainedInBoundary:function t(e){var n=e.getCoordinateSequence();var i=new Q;var r=new Q;for(var a=0;a<n.size()-1;a++){n.getCoordinate(a,i);n.getCoordinate(a+1,r);if(!this.isLineSegmentContainedInBoundary(i,r))return false}return true},isPointContainedInBoundary:function t(){if(arguments[0]instanceof ce){var e=arguments[0];return this.isPointContainedInBoundary(e.getCoordinate())}else if(arguments[0]instanceof Q){var n=arguments[0];return n.x===this._rectEnv.getMinX()||n.x===this._rectEnv.getMaxX()||n.y===this._rectEnv.getMinY()||n.y===this._rectEnv.getMaxY()}},contains:function t(e){if(!this._rectEnv.contains(e.getEnvelopeInternal()))return false;if(this.isContainedInBoundary(e))return false;return true},interfaces_:function t(){return[]},getClass:function t(){return oa}});oa.contains=function(t,e){var n=new oa(t);return n.contains(e)};function sa(){this._li=new pn;this._rectEnv=null;this._diagUp0=null;this._diagUp1=null;this._diagDown0=null;this._diagDown1=null;var t=arguments[0];this._rectEnv=t;this._diagUp0=new Q(t.getMinX(),t.getMinY());this._diagUp1=new Q(t.getMaxX(),t.getMaxY());this._diagDown0=new Q(t.getMinX(),t.getMaxY());this._diagDown1=new Q(t.getMaxX(),t.getMinY())}$(sa.prototype,{intersects:function t(e,n){var i=new rt(e,n);if(!this._rectEnv.intersects(i))return false;if(this._rectEnv.intersects(e))return true;if(this._rectEnv.intersects(n))return true;if(e.compareTo(n)>0){var r=e;e=n;n=r}var a=false;if(n.y>e.y)a=true;if(a){this._li.computeIntersection(e,n,this._diagDown0,this._diagDown1)}else{this._li.computeIntersection(e,n,this._diagUp0,this._diagUp1)}if(this._li.hasIntersection())return true;return false},interfaces_:function t(){return[]},getClass:function t(){return sa}});function la(){this._isDone=false}$(la.prototype,{applyTo:function t(e){for(var n=0;n<e.getNumGeometries()&&!this._isDone;n++){var i=e.getGeometryN(n);if(!(i instanceof qt)){this.visit(i);if(this.isDone()){this._isDone=true;return null}}else this.applyTo(i)}},interfaces_:function t(){return[]},getClass:function t(){return la}});function ua(){this._rectangle=null;this._rectEnv=null;var t=arguments[0];this._rectangle=t;this._rectEnv=t.getEnvelopeInternal()}$(ua.prototype,{intersects:function t(e){if(!this._rectEnv.intersects(e.getEnvelopeInternal()))return false;var n=new ca(this._rectEnv);n.applyTo(e);if(n.intersects())return true;var i=new fa(this._rectangle);i.applyTo(e);if(i.containsPoint())return true;var r=new ha(this._rectangle);r.applyTo(e);if(r.intersects())return true;return false},interfaces_:function t(){return[]},getClass:function t(){return ua}});ua.intersects=function(t,e){var n=new ua(t);return n.intersects(e)};function ca(){la.apply(this);this._rectEnv=null;this._intersects=false;var t=arguments[0];this._rectEnv=t}X(ca,la);$(ca.prototype,{isDone:function t(){return this._intersects===true},visit:function t(e){var n=e.getEnvelopeInternal();if(!this._rectEnv.intersects(n)){return null}if(this._rectEnv.contains(n)){this._intersects=true;return null}if(n.getMinX()>=this._rectEnv.getMinX()&&n.getMaxX()<=this._rectEnv.getMaxX()){this._intersects=true;return null}if(n.getMinY()>=this._rectEnv.getMinY()&&n.getMaxY()<=this._rectEnv.getMaxY()){this._intersects=true;return null}},intersects:function t(){return this._intersects},interfaces_:function t(){return[]},getClass:function t(){return ca}});function fa(){la.apply(this);this._rectSeq=null;this._rectEnv=null;this._containsPoint=false;var t=arguments[0];this._rectSeq=t.getExteriorRing().getCoordinateSequence();this._rectEnv=t.getEnvelopeInternal()}X(fa,la);$(fa.prototype,{isDone:function t(){return this._containsPoint===true},visit:function t(e){if(!(e instanceof _e))return null;var n=e.getEnvelopeInternal();if(!this._rectEnv.intersects(n))return null;var i=new Q;for(var r=0;r<4;r++){this._rectSeq.getCoordinate(r,i);if(!n.contains(i))continue;if(En.containsPointInPolygon(i,e)){this._containsPoint=true;return null}}},containsPoint:function t(){return this._containsPoint},interfaces_:function t(){return[]},getClass:function t(){return fa}});function ha(){la.apply(this);this._rectEnv=null;this._rectIntersector=null;this._hasIntersection=false;this._p0=new Q;this._p1=new Q;var t=arguments[0];this._rectEnv=t.getEnvelopeInternal();this._rectIntersector=new sa(this._rectEnv)}X(ha,la);$(ha.prototype,{intersects:function t(){return this._hasIntersection},isDone:function t(){return this._hasIntersection===true},visit:function t(e){var n=e.getEnvelopeInternal();if(!this._rectEnv.intersects(n))return null;var i=Jn.getLines(e);this.checkIntersectionWithLineStrings(i)},checkIntersectionWithLineStrings:function t(e){for(var n=e.iterator();n.hasNext();){var i=n.next();this.checkIntersectionWithSegments(i);if(this._hasIntersection)return null}},checkIntersectionWithSegments:function t(e){var n=e.getCoordinateSequence();for(var i=1;i<n.size();i++){n.getCoordinate(i-1,this._p0);n.getCoordinate(i,this._p1);if(this._rectIntersector.intersects(this._p0,this._p1)){this._hasIntersection=true;return null}}},interfaces_:function t(){return[]},getClass:function t(){return ha}});function da(){this._relate=null;if(arguments.length===2){var t=arguments[0],e=arguments[1];vr.call(this,t,e);this._relate=new aa(this._arg)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],r=arguments[2];vr.call(this,n,i,r);this._relate=new aa(this._arg)}}X(da,vr);$(da.prototype,{getIntersectionMatrix:function t(){return this._relate.computeIM()},interfaces_:function t(){return[]},getClass:function t(){return da}});da.covers=function(t,e){if(e.getDimension()===2&&t.getDimension()<2){return false}if(e.getDimension()===1&&t.getDimension()<1&&e.getLength()>0){return false}if(!t.getEnvelopeInternal().covers(e.getEnvelopeInternal()))return false;if(t.isRectangle()){return true}return new da(t,e).getIntersectionMatrix().isCovers()};da.intersects=function(t,e){if(!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal()))return false;if(t.isRectangle()){return ua.intersects(t,e)}if(e.isRectangle()){return ua.intersects(e,t)}if(t.isGeometryCollection()||e.isGeometryCollection()){var n=false;for(var i=0;i<t.getNumGeometries();i++){for(var r=0;r<e.getNumGeometries();r++){if(t.getGeometryN(i).intersects(e.getGeometryN(r))){return true}}}return false}return new da(t,e).getIntersectionMatrix().isIntersects()};da.touches=function(t,e){if(!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal()))return false;return new da(t,e).getIntersectionMatrix().isTouches(t.getDimension(),e.getDimension())};da.relate=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];var n=new da(t,e);var i=n.getIntersectionMatrix();return i}else if(arguments.length===3){var r=arguments[0],a=arguments[1],o=arguments[2];var n=new da(r,a,o);var i=n.getIntersectionMatrix();return i}};da.overlaps=function(t,e){if(!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal()))return false;return new da(t,e).getIntersectionMatrix().isOverlaps(t.getDimension(),e.getDimension())};da.crosses=function(t,e){if(!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal()))return false;return new da(t,e).getIntersectionMatrix().isCrosses(t.getDimension(),e.getDimension())};da.contains=function(t,e){if(e.getDimension()===2&&t.getDimension()<2){return false}if(e.getDimension()===1&&t.getDimension()<1&&e.getLength()>0){return false}if(!t.getEnvelopeInternal().contains(e.getEnvelopeInternal()))return false;if(t.isRectangle()){return oa.contains(t,e)}return new da(t,e).getIntersectionMatrix().isContains()};function pa(){this._centroid=null;this._minDistance=V.MAX_VALUE;this._interiorPoint=null;var t=arguments[0];this._centroid=t.getCentroid().getCoordinate();this.add(t)}$(pa.prototype,{getInteriorPoint:function t(){return this._interiorPoint},add:function t(){if(arguments[0]instanceof at){var e=arguments[0];if(e instanceof ce){this.add(e.getCoordinate())}else if(e instanceof qt){var n=e;for(var i=0;i<n.getNumGeometries();i++){this.add(n.getGeometryN(i))}}}else if(arguments[0]instanceof Q){var r=arguments[0];var a=r.distance(this._centroid);if(a<this._minDistance){this._interiorPoint=new Q(r);this._minDistance=a}}},interfaces_:function t(){return[]},getClass:function t(){return pa}});function va(){this._component=null;this._segIndex=null;this._pt=null;if(arguments.length===2){var t=arguments[0],e=arguments[1];va.call(this,t,va.INSIDE_AREA,e)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],r=arguments[2];this._component=n;this._segIndex=i;this._pt=r}}$(va.prototype,{isInsideArea:function t(){return this._segIndex===va.INSIDE_AREA},getCoordinate:function t(){return this._pt},getGeometryComponent:function t(){return this._component},getSegmentIndex:function t(){return this._segIndex},interfaces_:function t(){return[]},getClass:function t(){return va}});va.INSIDE_AREA=-1;function ga(){this._pts=null;var t=arguments[0];this._pts=t}$(ga.prototype,{filter:function t(e){if(e instanceof ce)this._pts.add(e)},interfaces_:function t(){return[Bt]},getClass:function t(){return ga}});ga.getPoints=function(){if(arguments.length===1){var t=arguments[0];if(t instanceof ce){return Vn.singletonList(t)}return ga.getPoints(t,new _t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(e instanceof ce){n.add(e)}else if(e instanceof qt){e.apply(new ga(n))}return n}};function ma(){this._locations=null;var t=arguments[0];this._locations=t}$(ma.prototype,{filter:function t(e){if(e instanceof ce||e instanceof le||e instanceof _e)this._locations.add(new va(e,0,e.getCoordinate()))},interfaces_:function t(){return[Bt]},getClass:function t(){return ma}});ma.getLocations=function(t){var e=new _t;t.apply(new ma(e));return e};function _a(){this._geom=null;this._terminateDistance=0;this._ptLocator=new Fn;this._minDistanceLocation=null;this._minDistance=V.MAX_VALUE;if(arguments.length===2){var t=arguments[0],e=arguments[1];_a.call(this,t,e,0)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null);this._geom[0]=n;this._geom[1]=i;this._terminateDistance=r}}$(_a.prototype,{computeContainmentDistance:function t(){if(arguments.length===0){var e=new Array(2).fill(null);this.computeContainmentDistance(0,e);if(this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];var r=this._geom[n];if(r.getDimension()<2)return null;var a=1-n;var o=xr.getPolygons(r);if(o.size()>0){var s=ma.getLocations(this._geom[a]);this.computeContainmentDistance(s,o,i);if(this._minDistance<=this._terminateDistance){this._minDistanceLocation[a]=i[0];this._minDistanceLocation[n]=i[1];return null}}}else if(arguments.length===3){if(arguments[2]instanceof Array&&tt(arguments[0],vt)&&tt(arguments[1],vt)){var l=arguments[0],u=arguments[1],c=arguments[2];for(var f=0;f<l.size();f++){var h=l.get(f);for(var d=0;d<u.size();d++){this.computeContainmentDistance(h,u.get(d),c);if(this._minDistance<=this._terminateDistance)return null}}}else if(arguments[2]instanceof Array&&arguments[0]instanceof va&&arguments[1]instanceof _e){var p=arguments[0],v=arguments[1],g=arguments[2];var m=p.getCoordinate();if(sn.EXTERIOR!==this._ptLocator.locate(m,v)){this._minDistance=0;g[0]=p;g[1]=new va(v,m);return null}}}},computeMinDistanceLinesPoints:function t(e,n,i){for(var r=0;r<e.size();r++){var a=e.get(r);for(var o=0;o<n.size();o++){var s=n.get(o);this.computeMinDistance(a,s,i);if(this._minDistance<=this._terminateDistance)return null}}},computeFacetDistance:function t(){var e=new Array(2).fill(null);var n=Jn.getLines(this._geom[0]);var i=Jn.getLines(this._geom[1]);var r=ga.getPoints(this._geom[0]);var a=ga.getPoints(this._geom[1]);this.computeMinDistanceLines(n,i,e);this.updateMinDistance(e,false);if(this._minDistance<=this._terminateDistance)return null;e[0]=null;e[1]=null;this.computeMinDistanceLinesPoints(n,a,e);this.updateMinDistance(e,false);if(this._minDistance<=this._terminateDistance)return null;e[0]=null;e[1]=null;this.computeMinDistanceLinesPoints(i,r,e);this.updateMinDistance(e,true);if(this._minDistance<=this._terminateDistance)return null;e[0]=null;e[1]=null;this.computeMinDistancePoints(r,a,e);this.updateMinDistance(e,false)},nearestLocations:function t(){this.computeMinDistance();return this._minDistanceLocation},updateMinDistance:function t(e,n){if(e[0]===null)return null;if(n){this._minDistanceLocation[0]=e[1];this._minDistanceLocation[1]=e[0]}else{this._minDistanceLocation[0]=e[0];this._minDistanceLocation[1]=e[1]}},nearestPoints:function t(){this.computeMinDistance();var e=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return e},computeMinDistance:function t(){if(arguments.length===0){if(this._minDistanceLocation!==null)return null;this._minDistanceLocation=new Array(2).fill(null);this.computeContainmentDistance();if(this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof le&&arguments[1]instanceof ce){var e=arguments[0],n=arguments[1],i=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;var r=e.getCoordinates();var a=n.getCoordinate();for(var o=0;o<r.length-1;o++){var s=hn.pointToSegment(a,r[o],r[o+1]);if(s<this._minDistance){this._minDistance=s;var l=new Qn(r[o],r[o+1]);var u=l.closestPoint(a);i[0]=new va(e,o,u);i[1]=new va(n,0,a)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof le&&arguments[1]instanceof le){var c=arguments[0],f=arguments[1],h=arguments[2];if(c.getEnvelopeInternal().distance(f.getEnvelopeInternal())>this._minDistance)return null;var r=c.getCoordinates();var d=f.getCoordinates();for(var o=0;o<r.length-1;o++){for(var p=0;p<d.length-1;p++){var s=hn.segmentToSegment(r[o],r[o+1],d[p],d[p+1]);if(s<this._minDistance){this._minDistance=s;var v=new Qn(r[o],r[o+1]);var g=new Qn(d[p],d[p+1]);var m=v.closestPoints(g);h[0]=new va(c,o,m[0]);h[1]=new va(f,p,m[1])}if(this._minDistance<=this._terminateDistance)return null}}}}},computeMinDistancePoints:function t(e,n,i){for(var r=0;r<e.size();r++){var a=e.get(r);for(var o=0;o<n.size();o++){var s=n.get(o);var l=a.getCoordinate().distance(s.getCoordinate());if(l<this._minDistance){this._minDistance=l;i[0]=new va(a,0,a.getCoordinate());i[1]=new va(s,0,s.getCoordinate())}if(this._minDistance<=this._terminateDistance)return null}}},distance:function t(){if(this._geom[0]===null||this._geom[1]===null)throw new U("null geometries are not supported");if(this._geom[0].isEmpty()||this._geom[1].isEmpty())return 0;this.computeMinDistance();return this._minDistance},computeMinDistanceLines:function t(e,n,i){for(var r=0;r<e.size();r++){var a=e.get(r);for(var o=0;o<n.size();o++){var s=n.get(o);this.computeMinDistance(a,s,i);if(this._minDistance<=this._terminateDistance)return null}}},interfaces_:function t(){return[]},getClass:function t(){return _a}});_a.distance=function(t,e){var n=new _a(t,e);return n.distance()};_a.isWithinDistance=function(t,e,n){var i=t.getEnvelopeInternal().distance(e.getEnvelopeInternal());if(i>n)return false;var r=new _a(t,e,n);return r.distance()<=n};_a.nearestPoints=function(t,e){var n=new _a(t,e);return n.nearestPoints()};$(at.prototype,{equalsTopo:function t(e){if(!this.getEnvelopeInternal().equals(e.getEnvelopeInternal()))return false;return da.relate(this,e).isEquals(this.getDimension(),e.getDimension())},union:function t(){if(arguments.length===0){return Cr.union(this)}else if(arguments.length===1){var e=arguments[0];return Er.union(this,e)}},isValid:function t(){return Li.isValid(this)},intersection:function t(e){if(this.isEmpty()||e.isEmpty())return _r.createEmptyResult(_r.INTERSECTION,this,e,this._factory);if(this.isGeometryCollection()){var n=e;return on.map(this,{interfaces_:function t(){return[MapOp]},map:function t(e){return e.intersection(n)}})}this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(e);return br.overlayOp(this,e,_r.INTERSECTION)},covers:function t(e){return da.covers(this,e)},coveredBy:function t(e){return da.covers(e,this)},touches:function t(e){return da.touches(this,e)},intersects:function t(e){return da.intersects(this,e)},within:function t(e){return da.within(this,e)},overlaps:function t(e){return da.overlaps(this,e)},disjoint:function t(e){return da.disjoint(this,e)},crosses:function t(e){return da.crosses(this,e)},buffer:function t(){if(arguments.length===1){var e=arguments[0];return ta.bufferOp(this,e)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return ta.bufferOp(this,n,i)}else if(arguments.length===3){var r=arguments[0],a=arguments[1],o=arguments[2];return ta.bufferOp(this,r,a,o)}},convexHull:function t(){return new na(this).getConvexHull()},relate:function t(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++){n[i]=arguments[i]}if(arguments.length===1){var r=arguments[0];return da.relate(this,r)}else if(arguments.length===2){var a=arguments[0],o=arguments[1];return da.relate(this,a).matches(o)}},getCentroid:function t(){if(this.isEmpty())return this._factory.createPoint();var e=ra.getCentroid(this);return this.createPointFromInternalCoord(e,this)},getInteriorPoint:function t(){if(this.isEmpty())return this._factory.createPoint();var e=null;var n=this.getDimension();if(n===0){var i=new pa(this);e=i.getInteriorPoint()}else if(n===1){var i=new Or(this);e=i.getInteriorPoint()}else{var i=new Pi(this);e=i.getInteriorPoint()}return this.createPointFromInternalCoord(e,this)},symDifference:function t(e){if(this.isEmpty()||e.isEmpty()){if(this.isEmpty()&&e.isEmpty())return _r.createEmptyResult(_r.SYMDIFFERENCE,this,e,this._factory);if(this.isEmpty())return e.copy();if(e.isEmpty())return this.copy()}this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(e);return br.overlayOp(this,e,_r.SYMDIFFERENCE)},createPointFromInternalCoord:function t(e,n){n.getPrecisionModel().makePrecise(e);return n.getFactory().createPoint(e)},toText:function t(){var e=new an;return e.write(this)},toString:function t(){this.toText()},contains:function t(e){return da.contains(this,e)},difference:function t(e){if(this.isEmpty())return _r.createEmptyResult(_r.DIFFERENCE,this,e,this._factory);if(e.isEmpty())return this.copy();this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(e);return br.overlayOp(this,e,_r.DIFFERENCE)},isSimple:function t(){var e=new Tr(this);return e.isSimple()},isWithinDistance:function t(e,n){var i=this.getEnvelopeInternal().distance(e.getEnvelopeInternal());if(i>n)return false;return _a.isWithinDistance(this,e,n)},distance:function t(e){return _a.distance(this,e)},isEquivalentClass:function t(e){return this.getClass()===e.getClass()}});var ya=angular.module("gmfObjectEditingComponent",[i["a"].module.name,r["a"].module.name,a["a"].module.name,m["a"].module.name,_["a"].name,b["a"].module.name,x["a"].module.name,C["a"].module.name]);ya.run(["$templateCache",function(t){t.put("gmf/objectediting",n(486))}]);ya.value("gmfObjecteditingTemplateUrl",function(t,e){var n=e["gmfObjecteditingTemplateurl"];return n!==undefined?n:"gmf/objectediting"});ba.$inject=["$element","$attrs","gmfObjecteditingTemplateUrl"];function ba(t,e,n){return n(t,e)}ya.component_={controller:"GmfObjecteditingController as oeCtrl",bindings:{active:"=gmfObjecteditingActive",feature:"<gmfObjecteditingFeature",geomType:"<gmfObjecteditingGeomtype",layerNodeId:"<gmfObjecteditingLayernodeid",map:"<gmfObjecteditingMap",sketchFeatures:"<gmfObjecteditingSketchfeatures"},templateUrl:ba};ya.component("gmfObjectediting",ya.component_);ya.Controller=function(t,e,n,i,r,a,o,s,p){this.active;this.feature;this.geomType;this.layerNodeId;this.map;this.sketchFeatures;this.scope_=t;this.timeout_=e;this.gettextCatalog_=n;this.gmfEditFeature_=i;this.gmfObjectEditingQuery_=r;this.queryableLayersInfo;this.selectedQueryableLayerInfo;this.queryableLayerListShown=false;this.copyFromActive=false;this.deleteFromActive=false;this.featureHasGeom;this.ngeoLayerHelper_=s;this.gmfTreeManager_=a;this.ngeoFeatureHelper_=o;this.ngeoToolActivateMgr_=p;this.skipGeometryChange_=false;this.process=_["a"].ProcessType.ADD;this.editableWMSLayer_=null;this.jstsOL3Parser_=new Je(undefined,{geom:{Point:h["a"],LineString:l["a"],LinearRing:R["a"],Polygon:d["a"],MultiPoint:c["a"],MultiLineString:u["a"],MultiPolygon:f["a"],GeometryCollection:N["a"]}});this.state_;this.geometryChanges_=[];this.defaultStyles_={};this.defaultStylesWoVertice_={};this.dirtyStyles_={};this.dirtyStylesWoVertice_={};this.pending=false;this.dirty=false;this.listenerKeys_=[];this.features_=new T["b"];this.interactions_=new T["b"];this.modify_=new P["a"]({deleteCondition:E["b"].deleteCondition,features:this.features_,style:o.getVertexStyle(false)});this.interactions_.push(this.modify_);this.modifyToolActivate_=new S["a"](this.modify_,"active");this.toolsActive=false;this.toolsToolActivate_=new S["a"](this,"toolsActive")};ya.Controller.$inject=["$scope","$timeout","gettextCatalog","gmfEditFeature","gmfObjectEditingQuery","gmfTreeManager","ngeoFeatureHelper","ngeoLayerHelper","ngeoToolActivateMgr"];ya.Controller.prototype.$onInit=function(){var t=this;this.gmfObjectEditingQuery_.getQueryableLayersInfo().then(this.handleGetQueryableLayersInfo_.bind(this));this.scope_.$watch(function(){return t.active},function(e,n){if(e!=n){t.toggle_(e)}});this.scope_.$watchCollection(function(){if(t.gmfTreeManager_.rootCtrl){return t.gmfTreeManager_.rootCtrl.children}},function(e){t.timeout_(function(){if(e){t.unregisterAllTreeCtrl_();t.gmfTreeManager_.rootCtrl.traverseDepthFirst(t.registerTreeCtrl_.bind(t))}})});var e=this.feature.getGeometry();this.state_=e?ya.Controller.State.UPDATE:ya.Controller.State.INSERT;this.scope_.$watchCollection(function(){return t.geometryChanges_},function(e,n){if(e.length){if(e.length===1){t.dirty=false}else{t.dirty=true}}});var n=[39,155,145];var i=[153,51,51];this.initializeStyles_(this.defaultStyles_,n);this.initializeStyles_(this.defaultStylesWoVertice_,n,false);this.initializeStyles_(this.dirtyStyles_,i);this.initializeStyles_(this.dirtyStylesWoVertice_,i,false);this.scope_.$watch(function(){return t.dirty},this.setFeatureStyle_.bind(this));this.features_.push(this.feature);this.featureHasGeom=!g.isEmpty(e);this.initializeInteractions_();this.toggle_(true);this.resetGeometryChanges_();this.scope_.$on("$destroy",this.handleDestroy_.bind(this))};ya.Controller.prototype.delete=function(){var t=this.gettextCatalog_;var e=t.getString("Do you really want to delete the feature?");if(confirm(e)){this.dirty=false;this.pending=true;this.gmfEditFeature_.deleteFeature(this.layerNodeId,this.feature).then(this.handleDeleteFeature_.bind(this))}};ya.Controller.prototype.save=function(){this.pending=true;var t=this.feature.clone();t.setId(this.feature.getId());var e=t.getGeometry();if(e){g.toXY(e)}if(this.state_===ya.Controller.State.INSERT){this.gmfEditFeature_.insertFeatures(this.layerNodeId,[t]).then(this.handleEditFeature_.bind(this))}else if(this.state_===ya.Controller.State.UPDATE){this.gmfEditFeature_.updateFeature(this.layerNodeId,t).then(this.handleEditFeature_.bind(this))}};ya.Controller.prototype.undo=function(){if(this.geometryChanges_.length<=1){return}this.skipGeometryChange_=true;this.geometryChanges_.pop();var t=ya.Controller.cloneGeometry_(this.geometryChanges_[this.geometryChanges_.length-1]);this.feature.setGeometry(t);this.skipGeometryChange_=false};ya.Controller.prototype.isStateInsert=function(){return this.state_===ya.Controller.State.INSERT};ya.Controller.prototype.handleDeleteFeature_=function(t){this.feature.setGeometry(null);this.resetGeometryChanges_();this.state_=ya.Controller.State.INSERT;this.pending=false;this.refreshWMSLayer_()};ya.Controller.prototype.handleEditFeature_=function(t){var e=(new I["a"]).readFeatures(t.data);if(e.length){this.feature.setId(e[0].getId())}this.resetGeometryChanges_();if(this.feature.getGeometry()){this.state_=ya.Controller.State.UPDATE}else{this.state_=ya.Controller.State.INSERT}this.pending=false;this.refreshWMSLayer_()};ya.Controller.prototype.initializeInteractions_=function(){this.interactions_.forEach(function(t){t.setActive(false);w["a"].interaction(t)})};ya.Controller.prototype.registerInteractions_=function(){var t=this;this.interactions_.forEach(function(e){t.map.addInteraction(e)})};ya.Controller.prototype.unregisterInteractions_=function(){var t=this;this.interactions_.forEach(function(e){t.map.removeInteraction(e)})};ya.Controller.prototype.toggle_=function(t){var e=this.listenerKeys_;var n=ya.Controller.NAMESPACE_+"-"+O["c"](this);var i=this.ngeoToolActivateMgr_;if(t){e.push(M["a"](this.feature,"change:"+this.feature.getGeometryName(),this.handleFeatureGeometryChange_,this));e.push(M["a"](this.modify_,"change:active",this.setFeatureStyle_,this));e.push(M["a"](this.modify_,"modifyend",this.handleModifyInteractionModifyEnd_,this));e.push(M["a"](window,"beforeunload",this.handleWindowBeforeUnload_,this));e.push(M["a"](this.sketchFeatures,"add",this.handleSketchFeaturesAdd_,this));i.registerTool(n,this.modifyToolActivate_,true);i.registerTool(n,this.toolsToolActivate_,false);this.registerInteractions_()}else{this.unregisterInteractions_();e.forEach(M["e"]);e.length=0;i.unregisterTool(n,this.modifyToolActivate_);i.unregisterTool(n,this.toolsToolActivate_)}this.toolsActive=t;this.modify_.setActive(t)};ya.Controller.prototype.undoAllChanges_=function(){var t=ya.Controller.cloneGeometry_(this.geometryChanges_[0]);this.feature.setGeometry(t);this.resetGeometryChanges_();this.dirty=false;this.setFeatureStyle_()};ya.Controller.prototype.resetGeometryChanges_=function(){if(this.geometryChanges_.length>1){this.geometryChanges_.length=0}if(this.geometryChanges_.length===0){var t=this.feature.getGeometry();var e=ya.Controller.cloneGeometry_(t);this.geometryChanges_.push(e)}};ya.Controller.prototype.handleModifyInteractionModifyEnd_=function(t){var e=this.feature.getGeometry();if(e instanceof f["a"]){var n=this.jstsOL3Parser_.read(e);var i=n.buffer(0);e=E["b"].toMulti(this.jstsOL3Parser_.write(i));this.skipGeometryChange_=true;this.feature.setGeometry(e.clone());this.skipGeometryChange_=false}var r=ya.Controller.cloneGeometry_(e);y["a"].assert(r);this.geometryChanges_.push(r);this.scope_.$apply()};ya.Controller.prototype.initializeStyles_=function(t,e,n){var i=n!==false;var r=e.slice();r.push(.3);var a=new D["a"]({radius:8,stroke:new k["a"]({color:e,width:1}),fill:new j["a"]({color:r})});t["Point"]=new F["c"]({image:a});t["MultiPoint"]=new F["c"]({image:a});t["LineString"]=[new F["c"]({stroke:new k["a"]({color:e,width:3})})];if(i){t["LineString"].push(this.ngeoFeatureHelper_.getVertexStyle(true))}t["MultiLineString"]=[new F["c"]({stroke:new k["a"]({color:e,width:3})})];if(i){t["MultiLineString"].push(this.ngeoFeatureHelper_.getVertexStyle(true))}t["Polygon"]=[new F["c"]({stroke:new k["a"]({color:e,width:2}),fill:new j["a"]({color:r})})];if(i){t["Polygon"].push(this.ngeoFeatureHelper_.getVertexStyle(true))}t["MultiPolygon"]=[new F["c"]({stroke:new k["a"]({color:e,width:2}),fill:new j["a"]({color:r})})];if(i){t["MultiPolygon"].push(this.ngeoFeatureHelper_.getVertexStyle(true))}};ya.Controller.prototype.setFeatureStyle_=function(){var t=this.feature.getGeometry();if(t){var e=t.getType();var n=this.modify_.getActive();var i=void 0;if(this.dirty){if(n){i=this.dirtyStyles_[e]}else{i=this.dirtyStylesWoVertice_[e]}}else{if(n){i=this.defaultStyles_[e]}else{i=this.defaultStylesWoVertice_[e]}}this.feature.setStyle(i)}};ya.Controller.prototype.registerTreeCtrl_=function(t){var e=t.node;if(e.children&&e.children.length){return}if(e.id===this.layerNodeId){var n=r["a"].getLayer(t);y["a"].assert(n instanceof A["a"]||n instanceof L["a"]);this.editableWMSLayer_=n}};ya.Controller.prototype.unregisterAllTreeCtrl_=function(){this.editableWMSLayer_=null};ya.Controller.prototype.refreshWMSLayer_=function(){if(this.editableWMSLayer_){this.ngeoLayerHelper_.refreshWMSLayer(this.editableWMSLayer_)}};ya.Controller.prototype.handleWindowBeforeUnload_=function(t){var e=this.gettextCatalog_;if(this.dirty){var n=e.getString("There are unsaved changes.");(t||window.event).returnValue=n;return n}return undefined};ya.Controller.prototype.handleSketchFeaturesAdd_=function(t){var e=t.element;var n=e.getGeometry();var i=this.feature.getGeometry();if(i){var r=this.jstsOL3Parser_.read(i);var a=this.jstsOL3Parser_.read(n);var o=void 0;if(this.process===_["a"].ProcessType.ADD){o=r.union(a)}else{if(r.intersects(a)){o=r.difference(a)}}if(o){var s=this.jstsOL3Parser_.write(o);var l=E["b"].toMulti(s);this.feature.setGeometry(l.clone())}}else if(this.process===_["a"].ProcessType.ADD){this.feature.setGeometry(E["b"].toMulti(n.clone()))}this.sketchFeatures.clear()};ya.Controller.prototype.handleFeatureGeometryChange_=function(){var t=this;var e=this.feature.getGeometry();this.timeout_(function(){t.featureHasGeom=!g.isEmpty(e)});if(this.skipGeometryChange_){return}if(e){this.timeout_(function(){t.geometryChanges_.push(e.clone())})}};ya.Controller.prototype.handleGetQueryableLayersInfo_=function(t){this.queryableLayersInfo=t;if(this.queryableLayersInfo.length){this.selectedQueryableLayerInfo=this.queryableLayersInfo[0]}};ya.Controller.prototype.handleDestroy_=function(){this.features_.clear();this.toggle_(false);this.undoAllChanges_()};ya.Controller.cloneGeometry_=function(t){var e=null;if(t){e=t.clone()}return e};ya.Controller.NAMESPACE_="oe";ya.Controller.State={INSERT:"insert",UPDATE:"update"};ya.controller("GmfObjecteditingController",ya.Controller);var wa=e["a"]=ya},function(t,e,n){"use strict";var i=n(10);var r=n(322);var a=n(321);var o=n(225);var s=["+proj="+a["a"],"+lat_0=46.95240555555556","+lon_0=7.439583333333333","+k_0=1","+x_0=2600000","+y_0=1200000","+ellps=bessel","+towgs84=674.374,15.056,405.346,0,0,0,0","+units=m","+no_defs"].join(" ");var l=[242e4,103e4,29e5,135e4];o["a"].defs("EPSG:2056",s);r["a"](o["a"]);i["h"]("EPSG:2056").setExtent(l);var u="EPSG:2056";e["a"]=u},function(t,e,n){"use strict";var i=n(2);var r=n(4);var a=n(72);var o=n(153);var s=function t(e,n,r){var a=this;var o=r;this.url_=o.url;this.maxFeatures_=o.maxFeatures!==undefined?o.maxFeatures:50;this.wfsTypes_={};i["a"].assertArray(o.wfsTypes,"wfsTypes is not correctly set");o.wfsTypes.forEach(function(t){a.wfsTypes_[t.featureType]=t});this.defaultFeatureNS_=o.defaultFeatureNS;this.defaultFeaturePrefix_=o.defaultFeaturePrefix;this.pointRecenterZoom_=o.pointRecenterZoom;this.$http_=e;this.result_=n};s.$inject=["$http","ngeoQueryResult","ngeoWfsPermalinkOptions"];s.$inject=["$http","ngeoQueryResult","ngeoWfsPermalinkOptions"];s.prototype.clear=function(){this.clearResult_()};s.prototype.issue=function(t,e){i["a"].assert(this.url_,"url is not set. to use the wfs permalink service, "+"set the value `ngeoWfsPermalinkOptions`");this.clearResult_();var n=t.wfsType;if(!this.wfsTypes_.hasOwnProperty(n)){return}var r=this.wfsTypes_[n];var a=this.createFilters_(t.filterGroups);if(a===null){return}this.issueRequest_(r,a,e,t.showFeatures)};s.prototype.issueRequest_=function(t,e,n,i){var r=this;var a=new o["a"];var s=a.writeGetFeature({srsName:n.getView().getProjection().getCode(),featureNS:t.featureNS!==undefined?t.featureNS:this.defaultFeatureNS_,featurePrefix:t.featurePrefix!==undefined?t.featurePrefix:this.defaultFeaturePrefix_,featureTypes:[t.featureType],outputFormat:"GML3",filter:e,maxFeatures:this.maxFeatures_});var l=(new XMLSerializer).serializeToString(s);var u={headers:{"Content-Type":"text/xml; charset=UTF-8"}};this.$http_.post(this.url_,l,u).then(function(e){var o=a.readFeatures(e.data);if(o.length==0){return}var s=n.getSize();if(s!==undefined){var l=r.pointRecenterZoom_;var u=[10,10,10,10];n.getView().fit(r.getExtent_(o),{size:s,maxZoom:l,padding:u})}if(i){var c={features:o,id:t.featureType,identifierAttributeField:t.label,label:t.featureType,pending:false};r.result_.sources.push(c);r.result_.total=o.length}})};s.prototype.getExtent_=function(t){return t.reduce(function(t,e){return r["q"](t,e.getGeometry().getExtent())},r["j"]())};s.prototype.createFilters_=function(t){if(t.length==0){return null}var e=a;var n=function t(n){var i=n.filters.map(function(t){var n=t.condition;if(Array.isArray(n)){return s.or_(n.map(function(n){return e.equalTo(t.property,n)}))}else{return e.equalTo(t.property,t.condition)}});return s.and_(i)};return s.or_(t.map(n))};s.and_=function(t){return s.joinFilters_(t,a["and"])};s.or_=function(t){return s.joinFilters_(t,a["or"])};s.joinFilters_=function(t,e){return t.reduce(function(t,n){if(t===null){return n}else{i["a"].assert(n!==null);return e(t,n)}},null)};s.prototype.clearResult_=function(){this.result_.total=0;this.result_.sources.forEach(function(t){t.features.length=0})};s.module=angular.module("ngeoWfsPermalink",[]);s.module.value("ngeoWfsPermalinkOptions",{url:"",wfsTypes:[],defaultFeatureNS:"",defaultFeaturePrefix:""});s.module.service("ngeoWfsPermalink",s);e["a"]=s},function(t,e,n){"use strict";var i=n(333);var r=angular.module("ngeoLayertreeModule",[i["a"].name]);e["a"]=r},function(t,e,n){"use strict";var i=n(2);var r=n(122);var a=n(233);var o=n(70);var s=n(473);var l=n.n(s);var u=n(472);var c=n.n(u);var f=n(615);var h=n.n(f);var d=angular.module("ngeoGrid",[a["a"].module.name,r["a"].name,"floatThead"]);d.run(["$templateCache",function(t){t.put("ngeo/grid",n(471))}]);d.value("ngeoGridTemplateUrl",function(t){var e=t["ngeoGridTemplateurl"];return e!==undefined?e:"ngeo/grid"});p.$inject=["$attrs","ngeoGridTemplateUrl"];function p(t,e){return e(t)}d.component_={controller:"ngeoGridController as ctrl",bindings:{configuration:"=ngeoGridConfiguration"},templateUrl:p};d.component("ngeoGrid",d.component_);d.Controller_=function(t){this.scope_=t;this.configuration;this.selectedRows;this.sortedBy;this.sortAscending=true;this.floatTheadConfig={scrollContainer:function t(e){return e.closest(".ngeo-grid-table-container")}}};d.Controller_.$inject=["$scope"];d.Controller_.prototype.$onInit=function(){this.selectedRows=this.configuration.selectedRows};d.Controller_.prototype.sort=function(t){this.sortAscending=this.sortedBy===t?!this.sortAscending:true;this.sortedBy=t;var e=this.sortAscending?1:-1;this.configuration.data.sort(function(n,i){if(!n[t]){return 1}if(!i[t]){return-1}return n[t]>i[t]?e:-e})};d.Controller_.prototype.clickRow=function(t,e){var n=this.isShiftKeyOnly_(e);var i=this.isPlatformModifierKeyOnly_(e);this.clickRow_(t,n,i)};d.Controller_.prototype.clickRow_=function(t,e,n){if(e&&!n){this.selectRange_(t)}else if(!e&&n){this.configuration.toggleRow(t)}else{var i=this.configuration.isRowSelected(t);this.configuration.unselectAll();if(!i){this.configuration.selectRow(t)}}};d.Controller_.prototype.selectRange_=function(t){var e=a["a"].getRowUid(t);var n=this.configuration.data;if(this.configuration.isRowSelected(t)){return}var r=undefined;var o=[];for(var s=0;s<n.length;s++){var l=n[s];var u=a["a"].getRowUid(l);if(e===u){r=s}else if(this.configuration.isRowSelected(l)){o.push(s)}}i["a"].assert(r!==undefined);if(o.length==0){this.configuration.selectRow(t)}var c=Infinity;var f=o[0];for(var h=0;h<o.length;h++){var d=o[h];var p=Math.abs(d-r);if(c>p){c=p;f=d}}var v=r<f?r:f;var g=r>f?r:f;for(var m=v;m<=g;m++){this.configuration.selectRow(n[m])}};d.Controller_.prototype.preventTextSelection=function(t){var e=this.isShiftKeyOnly_(t);var n=this.isPlatformModifierKeyOnly_(t);if(e||n){t.preventDefault()}};d.Controller_.prototype.isPlatformModifierKeyOnly_=function(t){return!t.altKey&&(o["d"]?t.metaKey:t.ctrlKey)&&!t.shiftKey};d.Controller_.prototype.isShiftKeyOnly_=function(t){return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};d.controller("ngeoGridController",d.Controller_);e["a"]=d},function(t,e,n){"use strict";var i=n(317);var r=angular.module("ngeoGridModule",[i["a"].name]);e["a"]=r},function(t,e,n){"use strict";function i(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t);var n=this.a;var i=this.rf;var r=1/i;var a=2*r-Math.pow(r,2);var o=this.e=Math.sqrt(a);this.R=this.k0*n*Math.sqrt(1-a)/(1-a*Math.pow(e,2));this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(t),4));this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2));var l=Math.log(Math.tan(Math.PI/4+t/2));var u=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*l+this.alpha*o/2*u}function r(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2));var n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y)));var i=-this.alpha*(e+n)+this.K;var r=2*(Math.atan(Math.exp(i))-Math.PI/4);var a=this.alpha*(t.x-this.lambda0);var o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(a)));var s=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(a));t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0;t.x=this.R*o+this.x0;return t}function a(t){var e=t.x-this.x0;var n=t.y-this.y0;var i=e/this.R;var r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4);var a=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i));var o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r)));var s=this.lambda0+o/this.alpha;var l=0;var u=a;var c=-1e3;var f=0;while(Math.abs(u-c)>1e-7){if(++f>20){return}l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2));c=u;u=2*Math.atan(Math.exp(l))-Math.PI/2}t.x=s;t.y=u;return t}var o=["somerc"];e["a"]={init:i,forward:r,inverse:a,names:o}},function(t,e,n){"use strict";var i=1;var r=2;var a=3;var o=4;var s=5;var l=-1;var u=/\s/;var c=/[A-Za-z]/;var f=/[A-Za-z84]/;var h=/[,\]]/;var d=/[\d\.E\-\+]/;function p(t){if(typeof t!=="string"){throw new Error("not a string")}this.text=t.trim();this.level=0;this.place=0;this.root=null;this.stack=[];this.currentObject=null;this.state=i}p.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==o){while(u.test(t)){if(this.place>=this.text.length){return}t=this.text[this.place++]}}switch(this.state){case i:return this.neutral(t);case r:return this.keyword(t);case o:return this.quoted(t);case s:return this.afterquote(t);case a:return this.number(t);case l:return}};p.prototype.afterquote=function(t){if(t==='"'){this.word+='"';this.state=o;return}if(h.test(t)){this.word=this.word.trim();this.afterItem(t);return}throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)};p.prototype.afterItem=function(t){if(t===","){if(this.word!==null){this.currentObject.push(this.word)}this.word=null;this.state=i;return}if(t==="]"){this.level--;if(this.word!==null){this.currentObject.push(this.word);this.word=null}this.state=i;this.currentObject=this.stack.pop();if(!this.currentObject){this.state=l}return}};p.prototype.number=function(t){if(d.test(t)){this.word+=t;return}if(h.test(t)){this.word=parseFloat(this.word);this.afterItem(t);return}throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)};p.prototype.quoted=function(t){if(t==='"'){this.state=s;return}this.word+=t;return};p.prototype.keyword=function(t){if(f.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word);this.level++;if(this.root===null){this.root=e}else{this.currentObject.push(e)}this.stack.push(this.currentObject);this.currentObject=e;this.state=i;return}if(h.test(t)){this.afterItem(t);return}throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place)};p.prototype.neutral=function(t){if(c.test(t)){this.word=t;this.state=r;return}if(t==='"'){this.word="";this.state=o;return}if(d.test(t)){this.word=t;this.state=a;return}if(h.test(t)){this.afterItem(t);return}throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place)};p.prototype.output=function(){while(this.place<this.text.length){this.readCharicter()}if(this.state===l){return this.root}throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function v(t){var e=new p(t);return e.output()}function g(t,e,n){if(Array.isArray(e)){n.unshift(e);e=null}var i=e?{}:t;var r=n.reduce(function(t,e){m(e,t);return t},i);if(e){t[e]=r}}function m(t,e){if(!Array.isArray(t)){e[t]=true;return}var n=t.shift();if(n==="PARAMETER"){n=t.shift()}if(t.length===1){if(Array.isArray(t[0])){e[n]={};m(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=true;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){if(!(n in e)){e[n]=[]}e[n].push(t);return}if(!Array.isArray(n)){e[n]={}}var i;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]};if(t.length===3){m(t[2],e[n])}return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]};if(t.length===4){m(t[3],e[n])}return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]];g(e,n,t);return;default:i=-1;while(++i<t.length){if(!Array.isArray(t[i])){return m(t,e[n])}}return g(e,n,t)}}var _=.017453292519943295;function y(t,e){var n=e[0];var i=e[1];if(!(n in t)&&i in t){t[n]=t[i];if(e.length===3){t[n]=e[2](t[n])}}}function b(t){return t*_}function w(t){if(t.type==="GEOGCS"){t.projName="longlat"}else if(t.type==="LOCAL_CS"){t.projName="identity";t.local=true}else{if(typeof t.PROJECTION==="object"){t.projName=Object.keys(t.PROJECTION)[0]}else{t.projName=t.PROJECTION}}if(t.AXIS){var e="";for(var n=0,i=t.AXIS.length;n<i;++n){var r=t.AXIS[n];var a=r[0].toLowerCase();if(a.indexOf("north")!==-1){e+="n"}else if(a.indexOf("south")!==-1){e+="s"}else if(a.indexOf("east")!==-1){e+="e"}else if(a.indexOf("west")!==-1){e+="w"}}if(e.length===2){e+="u"}if(e.length===3){t.axis=e}}if(t.UNIT){t.units=t.UNIT.name.toLowerCase();if(t.units==="metre"){t.units="meter"}if(t.UNIT.convert){if(t.type==="GEOGCS"){if(t.DATUM&&t.DATUM.SPHEROID){t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a}}else{t.to_meter=t.UNIT.convert}}}var o=t.GEOGCS;if(t.type==="GEOGCS"){o=t}if(o){if(o.DATUM){t.datumCode=o.DATUM.name.toLowerCase()}else{t.datumCode=o.name.toLowerCase()}if(t.datumCode.slice(0,2)==="d_"){t.datumCode=t.datumCode.slice(2)}if(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949"){t.datumCode="nzgd49"}if(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984"){if(t.PROJECTION==="Mercator_Auxiliary_Sphere"){t.sphere=true}t.datumCode="wgs84"}if(t.datumCode.slice(-6)==="_ferro"){t.datumCode=t.datumCode.slice(0,-6)}if(t.datumCode.slice(-8)==="_jakarta"){t.datumCode=t.datumCode.slice(0,-8)}if(~t.datumCode.indexOf("belge")){t.datumCode="rnb72"}if(o.DATUM&&o.DATUM.SPHEROID){t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk");if(t.ellps.toLowerCase().slice(0,13)==="international"){t.ellps="intl"}t.a=o.DATUM.SPHEROID.a;t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)}if(o.DATUM&&o.DATUM.TOWGS84){t.datum_params=o.DATUM.TOWGS84}if(~t.datumCode.indexOf("osgb_1936")){t.datumCode="osgb36"}if(~t.datumCode.indexOf("osni_1952")){t.datumCode="osni52"}if(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965")){t.datumCode="ire65"}if(t.datumCode==="ch1903+"){t.datumCode="ch1903"}if(~t.datumCode.indexOf("israel")){t.datumCode="isr93"}}if(t.b&&!isFinite(t.b)){t.b=t.a}function s(e){var n=t.to_meter||1;return e*n}var l=function(e){return y(t,e)};var u=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",b],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",b],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",b],["lat0","latitude_of_origin",b],["lat0","standard_parallel_1",b],["lat1","standard_parallel_1",b],["lat2","standard_parallel_2",b],["azimuth","Azimuth"],["alpha","azimuth",b],["srsCode","name"]];u.forEach(l);if(!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")){t.long0=t.longc}if(!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")){t.lat0=b(t.lat1>0?90:-90);t.lat_ts=t.lat1}}var x=function(t){var e=v(t);var n=e.shift();var i=e.shift();e.unshift(["name",i]);e.unshift(["type",n]);var r={};m(e,r);w(r);return r};t.exports=x},function(t,e,n){"use strict";var i=n(225);var r=n(319);i["a"].Proj.projections.add(r["a"]);var a="somerc";e["a"]=a},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(10);var r=n(181);var a=n(166);function o(t){var e=Object.keys(t.defs);var n=e.length;var o=void 0,s=void 0;for(o=0;o<n;++o){var l=e[o];if(!Object(i["h"])(l)){var u=t.defs(l);Object(i["d"])(new a["a"]({code:l,axisOrientation:u.axis,metersPerUnit:u.to_meter,units:u.units}))}}for(o=0;o<n;++o){var c=e[o];var f=Object(i["h"])(c);for(s=0;s<n;++s){var h=e[s];var d=Object(i["h"])(h);if(!Object(r["c"])(c,h)){if(t.defs[c]===t.defs[h]){Object(i["c"])([f,d])}else{var p=t(c,h);Object(i["b"])(f,d,p.forward,p.inverse)}}}}}},function(t,e,n){"use strict";var i=n(10);var r=n(4);var a=function t(){};a.prototype.stringToCoordinates=function(t){var e=t.match(/([\d\.']+)[\s,]+([\d\.']+)/);if(e){var n=parseFloat(e[1].replace("'",""));var i=parseFloat(e[2].replace("'",""));if(!isNaN(n)&&!isNaN(i)){return[n,i]}}return null};a.prototype.getProjectionList=function(t){var e=void 0,n=void 0;var r=[];t.forEach(function(t){e=t.toUpperCase();if(e.substr(0,5)!="EPSG:"){e="EPSG:"+e}n=i["h"](e);if(n!==null){r.push(n)}else{console.error("The projection "+e+" is not defined in ol.proj.")}});return r};a.prototype.tryProjections=function(t,e,n,a){var o=void 0;if(a===undefined){a=[n]}a.some(function(a){try{o=i["n"](t,a,n);if(r["f"](e,o)){return true}}catch(t){}o=null});return o};a.prototype.tryProjectionsWithInversion=function(t,e,n,i){var r=this.tryProjections(t,e,n,i);if(r===null){r=this.tryProjections(t.reverse(),e,n,i)}return r};a.module=angular.module("ngeoAutoProjection",[]);a.module.service("ngeoAutoProjection",a);e["a"]=a},function(t,e,n){"use strict";var i=n(60);var r=function t(e,n){this.$http_=n;this.url_=e.get("fulltextsearchUrl");var r=this.url_.split("?");this.baseUrl_=r[0];var a=r.length==2?"?"+r[1]:"";this.defaultParams_=i["b"].decodeQueryString(a)};r.$inject=["$injector","$http"];r.$inject=["$injector","$http"];r.prototype.search=function(t,e){var n=this;var r=Object.assign({},this.defaultParams_,e);r["query"]=t;var a=this.baseUrl_+"?"+i["b"].encodeQueryString(r);return new Promise(function(t,e){n.$http_.get(a).then(function(e){return t(e["data"])}).catch(e)})};r.module=angular.module("gmfSearchFulltextSearch",[]);r.module.service("gmfSearchFulltextSearch",r);e["a"]=r},function(t,e,n){"use strict";var i=n(389);var r=n(324);var a=n(572);var o=n.n(a);var s=angular.module("gmfSearchModule",[i["a"].name,r["a"].module.name]);e["a"]=s},function(t,e,n){"use strict";(function(t){var i=n(55);var r=n(223);var a=n(23);var o=n(2);var s=n(95);var l=n(109);var u=n(65);var c=n(305);var f=n(234);var h=n(147);var d=n(7);var p=n(3);var v=n(103);var g=n(31);var m=n(93);var _=n(37);var y=n(15);var b=n(182);var w=n.n(b);function x(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var S=angular.module("gmfPrintComponent",[r["a"].module.name,a["a"].module.name,s["a"].module.name,l["a"].module.name,u["a"].module.name,c["a"].module.name,f["a"].module.name,h["a"].module.name]);S.value("gmfPrintTemplateUrl",function(t,e){var n=e["gmfPrintTemplateurl"];return n!==undefined?n:"gmf/print"});S.run(["$templateCache",function(t){t.put("gmf/print",n(485))}]);S.PrintStateEnum={NOT_IN_USE:"notInUse",PRINTING:"printing",ERROR_ON_REPORT:"errorOnReport",CAPABILITIES_NOT_LOADED:"capabilitiesNotLoaded",ERROR_ON_GETCAPABILITIES:"errorOnGetCapabilities"};S.value("gmfPrintState",{state:S.PrintStateEnum.CAPABILITIES_NOT_LOADED});C.$inject=["$element","$attrs","gmfPrintTemplateUrl"];function C(t,e,n){return n(t,e)}S.component_={bindings:{map:"<gmfPrintMap",active:"=gmfPrintActive",rotateMask:"<?gmfPrintRotatemask",fieldValues:"<?gmfPrintFieldvalues",hiddenAttributeNames:"<?gmfPrintHiddenattributes",attributesOut:"=?gmfPrintAttributesOut"},controller:"GmfPrintController",templateUrl:C,transclude:true};S.component("gmfPrint",S.component_);S.optionsLegendType;S.optionsType;S.Controller_=function(){e.$inject=["$element","$rootScope","$scope","$timeout","$q","$injector","gettextCatalog","ngeoLayerHelper","ngeoFeatureOverlayMgr","ngeoPrintUtils","ngeoCreatePrint","gmfPrintUrl","gmfAuthenticationService","ngeoQueryResult","$filter","gmfPrintState","gmfThemes"];function e(n,i,r,a,o,s,l,u,c,f,h,d,p,v,g,m,_){var y=this;x(this,e);this.gmfPrintState_=m;this.translate_=g("translate");this.map;this.active;this.rotateMask=false;this.fieldValues={};this.attributesOut;this.$rootScope_=i;this.$scope_=r;this.$timeout_=a;this.$q_=o;this.gettextCatalog_=l;this.ngeoLayerHelper_=u;this.featureOverlayLayer_=c.getLayer();this.ngeoPrintUtils_=f;this.ngeoPrint_=h(d);this.ngeoQueryResult_=v;this.gmfAuthenticationService_=p;this.gmfThemes_=_;this.cacheVersion_="0";if(s.has("cacheVersion")){this.cacheVersion_=s.get("cacheVersion")}this.scaleInput=false;this.gmfLegendOptions_={useBbox:true,label:{},params:{}};if(s.has("gmfPrintOptions")){var b=s.get("gmfPrintOptions");if(b.scaleInput){this.scaleInput=b.scaleInput}if(b.legend){Object.assign(this.gmfLegendOptions_,b.legend)}}this.requestCanceler_=null;this.statusTimeoutPromise_=null;this.onDragPreviousMousePosition_=null;this.rotationTimeoutPromise_=null;this.postComposeListenerKey_;this.pointerDragListenerKey_;this.mapViewResolutionChangeKey_;this.curRef_="";this.formats_=[];this.layouts_=[];this.layout_={};this.paperSize_=[];this.layoutInfo={};this.rotation=0;this.hiddenAttributeNames;this.scaleManuallySelected_=false;this.rotationInput_=n.find(".gmf-print-rotation-input");this.rotationInput_.on("input",function(e){var n=t(e.target).val();if(n!==""){y.setRotation(n)}});this.rotationInput_.on("change",function(e){var n=t(e.target).val();if(n!==""){y.setRotation(n)}});this.postcomposeListener_;this.capabilities_;this.ogcServers_;this.currentThemes_}e.prototype.$onInit=function t(){var e=this;p["a"](this.map.getView(),"change:rotation",function(t){e.updateRotation_(Math.round(y["h"](t.target.getRotation())))});this.$scope_.$watch(function(){return e.gmfAuthenticationService_.getRoleId()},function(){e.gmfPrintState_.state=S.PrintStateEnum.CAPABILITIES_NOT_LOADED;e.capabilities_=null});this.$scope_.$watch(function(){return e.active},function(t){e.togglePrintPanel_(t)});this.$rootScope_.$on("gmfStartPrint",function(t,n){e.print(""+n)});this.$rootScope_.$on("gmfCancelPrint",function(){e.cancel()});this.gmfThemes_.getOgcServersObject().then(function(t){e.ogcServers_=t});this.gmfThemes_.getThemesObject().then(function(t){e.currentThemes_=t});var n=function t(){return e.paperSize_};var i=void 0;if(this.rotateMask){i=function t(){return e.rotation}}this.postcomposeListener_=this.ngeoPrintUtils_.createPrintMaskPostcompose(n,this.getScaleFn.bind(this),i)};e.prototype.getScaleFn=function t(e){o["a"].assert(this.layoutInfo.scales);o["a"].assert(this.layoutInfo.scale!==undefined);if(!this.scaleManuallySelected_&&(this.layoutInfo.scale===-1||d["f"](this.layoutInfo.scales,this.layoutInfo.scale))){var n=e.size;var i=e.viewState.resolution;this.layoutInfo.scale=this.getOptimalScale_(n,i)}return this.layoutInfo.scale};e.prototype.togglePrintPanel_=function t(e){var n=this;if(e){if(!this.capabilities_){this.getCapabilities_()}this.capabilities_.then(function(t){if(!n.active){return}n.gmfPrintState_.state=S.PrintStateEnum.NOT_IN_USE;n.parseCapabilities_(t);n.postComposeListenerKey_=p["a"](n.map,"postcompose",n.postcomposeListener_);n.pointerDragListenerKey_=p["a"](n.map,"pointerdrag",n.onPointerDrag_,n);n.mapViewResolutionChangeKey_=p["a"](n.map.getView(),"change:resolution",function(){n.scaleManuallySelected_=false});n.map.render()},function(t){n.gmfPrintState_.state=S.PrintStateEnum.ERROR_ON_GETCAPABILITIES;n.capabilities_=null})}else{p["e"](this.postComposeListenerKey_);p["e"](this.pointerDragListenerKey_);p["e"](this.mapViewResolutionChangeKey_);this.setRotation(0);this.map.render()}};e.prototype.getCapabilities_=function t(e){this.capabilities_=this.ngeoPrint_.getCapabilities({withCredentials:true,params:e?{role:e,cache_version:this.cacheVersion_}:{cache_version:this.cacheVersion_}})};e.prototype.parseCapabilities_=function t(e){var n=this;var i=e["data"];this.formats_=i["formats"]||[];this.layouts_=i["layouts"];this.layout_=i["layouts"][0];this.layoutInfo.layouts=[];this.layouts_.forEach(function(t){n.layoutInfo.layouts.push(t.name)});this.updateFields_()};e.prototype.updateFields_=function t(){var e=this;this.layoutInfo.layout=this.layout_.name;var n=this.isAttributeInCurrentLayout_("map");o["a"].assertObject(n);var i=n["clientInfo"];o["a"].assertObject(i);this.paperSize_=[i["width"],i["height"]];this.updateCustomFields_();this.layoutInfo.legend=this.fieldValues["legend"]!==false;this.layoutInfo.scales=i["scales"]||[];this.layoutInfo.dpis=i["dpiSuggestions"]||[];var r=this.map.getSize();var a=this.map.getView().getResolution();this.layoutInfo.scale=this.getOptimalScale_(r,a);this.layoutInfo.dpi=this.layoutInfo.dpi&&this.layoutInfo.dpis.indexOf(this.layoutInfo.dpi)>0?this.layoutInfo.dpi:this.layoutInfo.dpis[0];this.layoutInfo.formats={};this.formats_.forEach(function(t){e.layoutInfo.formats[t]=true});this.attributesOut=this.layoutInfo["simpleAttributes"];this.map.render()};e.prototype.updateCustomFields_=function t(){var e=this;var n=void 0,i=void 0,r=void 0,a=void 0;if(!this.layoutInfo.simpleAttributes){this.layoutInfo.simpleAttributes=[]}if(!this.layoutInfo.attributes){this.layoutInfo.attributes=[]}var o=this.layoutInfo.simpleAttributes;var s=o.splice(0,o.length);this.layout_.attributes.forEach(function(t){e.layoutInfo.attributes.push(t.name);if(!t["clientParams"]){n=""+t.name;var o=t.default;r=o!==undefined&&o!==""?o:e.fieldValues[n];i=""+t.type;switch(i){case"String":a=n==="comments"?"textarea":"text";break;case"Boolean":a="checkbox";break;case"Number":a="number";r=parseFloat(r);r=isNaN(r)?0:r;break;default:a=i}s.forEach(function(t){if(t.name===n&&t.type===a){return r=t.value}});e.layoutInfo.simpleAttributes.push({name:n,type:a,value:r})}})};e.prototype.isAttributeInCurrentLayout_=function t(e){var n=null;this.layout_.attributes.forEach(function(t){if(t.name===e){return n=t}});return n};e.prototype.setRotation=function t(e){this.updateRotation_(e);if(this.rotateMask){this.map.render()}else{this.map.getView().setRotation(y["i"](this.rotation))}};e.prototype.updateRotation_=function t(e){this.rotation=y["a"](e,-180,180);this.rotationInput_.val(this.rotation.toString())};e.prototype.onPointerDrag_=function t(e){var n=this;var i=e.originalEvent;var r=this.map.getView().getCenter();if(this.active&&i.altKey&&i.shiftKey&&r){var a=this.map.getPixelFromCoordinate(r);var o=e.pixel;if(this.rotationTimeoutPromise_===null){this.onDragPreviousMousePosition_=null}else{this.$timeout_.cancel(this.rotationTimeoutPromise_);var s=this.onDragPreviousMousePosition_[0]-a[0];var l=this.onDragPreviousMousePosition_[1]-a[1];var u=o[0]-a[0];var c=o[1]-a[1];var f=Math.sqrt(Math.pow(s,2)+Math.pow(l,2));var h=Math.sqrt(Math.pow(u,2)+Math.pow(c,2));var d=s*c-l*u>0?1:-1;var p=(s*u+l*c)/(f*h);p=p<=1?d*Math.acos(p):0;var v=h/200;var g=Math.round(y["h"](p)*v);this.setRotation(this.rotation+g);this.$scope_.$digest()}this.rotationTimeoutPromise_=this.$timeout_(function(){n.rotationTimeoutPromise_=null},500);this.onDragPreviousMousePosition_=o}};e.prototype.print=function t(e){if(this.gmfPrintState_.state===S.PrintStateEnum.PRINTING){return}this.requestCanceler_=this.$q_.defer();this.gmfPrintState_.state=S.PrintStateEnum.PRINTING;var n=this.map.getSize();var i=this.map.getView().getResolution()||0;var r=this.layoutInfo.scale||this.getOptimalScale_(n,i);var a=this.getDataSource_();var s={};if(this.layoutInfo.attributes.indexOf("datasource")>=0){s["datasource"]=a}if(this.layoutInfo.simpleAttributes){this.layoutInfo.simpleAttributes.forEach(function(t){s[t.name]=t.value})}if(this.layoutInfo.legend){var l=this.map.getView().getCenter();var u=this.paperSize_[0]*r/2/f["a"].INCHES_PER_METER_/f["a"].DOTS_PER_INCH_;var c=this.paperSize_[1]*r/2/f["a"].INCHES_PER_METER_/f["a"].DOTS_PER_INCH_;var h=[l[0]-u,l[1]-c,l[0]+u,l[1]+c];var d=this.getLegend_(r,this.layoutInfo.dpi,h);if(d!==null){s["legend"]=d}}o["a"].assertNumber(this.layoutInfo.dpi);o["a"].assertString(this.layoutInfo.layout);var p=new _["a"]({});p.setView(this.map.getView());var g=this.ngeoLayerHelper_.getFlatLayers(this.map.getLayerGroup());var y=[];var b=true;for(var w=0,x=g.length;w<x;w++){var C=g[w];var E=C.get("metadata");if(E){var O=E.ogcServer;var T=E.printLayers||E.layers;if(O&&T){var M=this.ogcServers_[O];if(M){C=this.ngeoLayerHelper_.createBasicWMSLayer(M.url,T,M.imageType,M.type,undefined,undefined,undefined,undefined,{opacity:g.opacity});C.setZIndex(-200)}else{console.error("Missing ogcServer:",O)}}}if(C instanceof v["a"]&&C.get("printNativeAngle")===false){b=false}y.push(C)}p.setLayerGroup(new m["a"]({layers:y,printNativeAngle:b}));var I=this.ngeoPrint_.createSpec(p,r,this.layoutInfo.dpi,this.layoutInfo.layout,e,s);var R=[];this.ngeoPrint_.encodeLayer(R,this.featureOverlayLayer_,i);if(R.length>0){I.attributes.map.layers.unshift(R[0])}this.ngeoPrint_.createReport(I,{timeout:this.requestCanceler_.promise}).then(this.handleCreateReportSuccess_.bind(this),this.handleCreateReportError_.bind(this));p.setTarget(null)};e.prototype.cancel=function t(){if(this.requestCanceler_!==null){this.requestCanceler_.resolve()}if(this.statusTimeoutPromise_!==null){this.$timeout_.cancel(this.statusTimeoutPromise_)}if(this.curRef_.length>0){this.ngeoPrint_.cancel(this.curRef_)}this.resetPrintStates_()};e.prototype.resetPrintStates_=function t(e){this.gmfPrintState_.state=e||S.PrintStateEnum.NOT_IN_USE;this.curRef_=""};e.prototype.getDataSource_=function t(){var e=void 0,n=void 0,i=void 0;var r=[];var a=this.ngeoQueryResult_.sources;a.forEach(function(t){n=[];i=[];t.features.forEach(function(t,e){o["a"].assert(t);var r=u["a"].getFilteredFeatureValues(t);if(e===0){i=Object.keys(r).map(function t(e){return this.translate_(e)},this)}n.push(Object.keys(r).map(function(t){return r[t]}))},this);if(i.length){e={title:this.translate_(t.label),table:{columns:i,data:n}};r.push(e)}},this);return r};e.prototype.getOptimalScale_=function t(e,n){var i=this.layoutInfo.scales.slice();if(e!==undefined&&n!==undefined){return this.ngeoPrintUtils_.getOptimalScale(e,n,this.paperSize_,i.reverse())}return this.layoutInfo.scales[0]};e.prototype.handleCreateReportSuccess_=function t(e){var n=e.data;var i=n.ref;o["a"].assert(i.length>0);this.curRef_=i;this.getStatus_(i)};e.prototype.getStatus_=function t(e){this.requestCanceler_=this.$q_.defer();this.ngeoPrint_.getStatus(e,{timeout:this.requestCanceler_.promise}).then(this.handleGetStatusSuccess_.bind(this,e),this.handleCreateReportError_.bind(this))};e.prototype.handleGetStatusSuccess_=function t(e,n){var i=this;var r=n.data;var a=r.done;if(a){if(r.status!="error"){window.location.href=this.ngeoPrint_.getReportUrl(e);this.resetPrintStates_()}else{console.error(r.error);this.handleCreateReportError_()}}else{this.statusTimeoutPromise_=this.$timeout_(function(){i.getStatus_(e)},1e3,false)}};e.prototype.handleCreateReportError_=function t(){this.resetPrintStates_(S.PrintStateEnum.ERROR_ON_REPORT)};e.prototype.getLegend_=function t(e,n,r){var a=this;var o={classes:[]};var s=this.gettextCatalog_;var l=this.ngeoLayerHelper_.getGroupFromMap(this.map,i["a"].DATALAYERGROUP_NAME);var u=this.ngeoLayerHelper_.getFlatLayers(l);u.reverse().forEach(function(t){var i=[];if(t.getVisible()&&t.getSource()){if(t instanceof g["a"]){var l=""+t.get("layerNodeName");var u=a.getMetadataLegendImage_(l);if(!u){u=a.ngeoLayerHelper_.getWMTSLegendURL(t)}if(u){i.push({name:s.getString(l),icons:[u]})}}else{var c=t.getSource();var f=c.getParams()["LAYERS"].split(",");f.forEach(function(o){var l=a.getMetadataLegendImage_(o);if(!l){l=a.ngeoLayerHelper_.getWMSLegendURL(c.getUrl(),o,e,undefined,undefined,undefined,c.serverType_,n,a.gmfLegendOptions_.useBbox?r:undefined,a.map.getView().getProjection().getCode(),a.gmfLegendOptions_.params[t.getSource().serverType_])}var u=l?"image":c.serverType_;if(l&&o.length!==0){i.push(Object.assign({name:a.gmfLegendOptions_.label[u]===false?"":s.getString(o),icons:[l]},u==="qgis"?{dpi:n}:{}))}})}}if(i.length>0){o["classes"].push({classes:i})}});return o["classes"].length>0?o:null};e.prototype.getMetadataLegendImage_=function t(e){var n=a["a"].findGroupByLayerNodeName(this.currentThemes_,e);var i=void 0;if(n&&n.children){i=a["a"].findObjectByName(n.children,e)}var r=void 0;if(i&&i.metadata){r=i.metadata.legendImage}return r};e.prototype.setLayout=function t(e){var n=void 0;this.layouts_.forEach(function(t){if(t.name===e){n=t;return true}});this.layout_=n;this.updateFields_()};e.prototype.getSetScale=function t(e){if(e!==undefined){var n=this.map.getSize()||[0,0];this.layoutInfo.scale=e;var i=this.ngeoPrintUtils_.getOptimalResolution(n,this.paperSize_,e);var r=this.map.getView().constrainResolution(i,0,1);this.map.getView().setResolution(r);this.map.render();this.scaleManuallySelected_=true}return this.layoutInfo.scale};e.prototype.setDpi=function t(e){this.layoutInfo.dpi=e};e.prototype.isState=function t(e){return this.gmfPrintState_.state===S.PrintStateEnum[e]};return e}();S.controller("GmfPrintController",S.Controller_);e["a"]=S}).call(this,n(38))},function(t,e,n){"use strict";var i=n(255);var r=n(3);var a=angular.module("gmfObjecteditingGetWMSFeatureComponent",[i["a"].module.name]);a.directive_=function(){return{controller:"gmfObjecteditinggetwmsfeatureController",scope:{active:"=gmfObjecteditinggetwmsfeatureActive",features:"<gmfObjecteditinggetwmsfeatureFeatures",layerInfo:"=gmfObjecteditinggetwmsfeatureLayerinfo",map:"<gmfObjecteditinggetwmsfeatureMap"},bindToController:true}};a.directive("gmfObjecteditinggetwmsfeature",a.directive_);a.Controller_=function(t,e){var n=this;this.active;t.$watch(function(){return n.active},this.handleActiveChange_.bind(this));this.features;this.layerInfo;this.map;this.gmfObjectEditingQuery_=e};a.Controller_.$inject=["$scope","gmfObjectEditingQuery"];a.Controller_.prototype.handleActiveChange_=function(t){if(t){r["a"](this.map,"click",this.handleMapClick_,this)}else{r["c"](this.map,"click",this.handleMapClick_,this)}};a.Controller_.prototype.handleMapClick_=function(t){var e=this;this.gmfObjectEditingQuery_.getFeatureInfo(this.layerInfo,t.coordinate,this.map).then(function(t){if(t){e.features.push(t)}})};a.controller("gmfObjecteditinggetwmsfeatureController",a.Controller_);e["a"]=a},function(t,e,n){"use strict";var i=n(272);var r=n(160);function a(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var o=angular.module("gmfPermalinkShareComponent",[i["a"].module.name,r["a"].module.name]);o.run(["$templateCache",function(t){t.put("gmf/permalink/shareComponent",n(491))}]);o.value("gmfPermalinkShareTemplateUrl",function(t){var e=t["gmfPermalinkShareTemplateUrl"];return e!==undefined?e:"gmf/permalink/shareComponent"});s.$inject=["$attrs","gmfPermalinkShareTemplateUrl"];function s(t,e){return e(t)}o.component_={bindings:{enableEmail:"<gmfShareEmail"},controller:"GmfShareController",templateUrl:s};o.component("gmfShare",o.component_);var l=function(){t.$inject=["$scope","ngeoLocation","gmfShareService","$q","$attrs"];function t(e,n,r,o,s){a(this,t);this.$scope_=e;this.gmfShareService_=r;this.$q_=o;this.ngeoLocation_=n;this.enableEmail;this.shortLink;this.email;this.message;this.permalink_=this.ngeoLocation_.getUriString();this.showLengthWarning=this.permalink_.length>i["a"].URL_MAX_LEN||n.getPath()>i["a"].URL_PATH_MAX_LEN;this.successfullySent=false;this.errorOnsend=false;this.errorOnGetShortUrl=false;this.getShortUrl()}t.prototype.getShortUrl=function t(){var e=this;this.$q_.when(this.gmfShareService_.getShortUrl(this.permalink_)).then(function(t){e.shortLink=t.data.short_url;e.errorOnGetShortUrl=false},function(t){e.shortLink=e.permalink;e.errorOnGetShortUrl=true})};t.prototype.sendShortUrl=function t(){var e=this;if(this.$scope_["gmfShareForm"].$valid){this.$q_.when(this.gmfShareService_.sendShortUrl(this.permalink_,this.email,this.message)).then(function(t){e.successfullySent=true},function(t){e.errorOnsend=true})}};return t}();o.controller("GmfShareController",l);e["a"]=o},function(t,e,n){"use strict";var i=n(214);var r=n(272);var a=n(328);var o=n(575);var s=n.n(o);var l=angular.module("gmfPermalinkModule",[i["a"].module.name,r["a"].module.name,a["a"].name]);e["a"]=l},function(t,e,n){"use strict";var i=n(2);var r=n(19);var a=n(113);var o=n(37);var s=n(12);var l=n(35);var u=n(109);var c=n(101);var f=angular.module("gmfDrawProfileLine",[u["a"].module.name]);f.directive_=function(){return{scope:true,controller:"GmfDrawprofilelineController as ctrl",restrict:"A",bindToController:{getMapFn:"&gmfDrawprofilelineMap",line:"=gmfDrawprofilelineLine",active:"=gmfDrawprofilelineActive",getStyleFn:"&?gmfDrawprofilelineStyle"}}};f.directive("gmfDrawprofileline",f.directive_);f.Controller_=function(t,e,n,o){var u=this;this.line;this.map_=null;this.active;this.features_=new r["b"];var f=o.getFeatureOverlay();f.setFeatures(this.features_);var h=void 0;var d=this["getStyleFn"];if(d){h=d();i["a"].assertInstanceof(h,s["c"])}else{h=new s["c"]({stroke:new l["a"]({color:"#ffcc33",width:2})})}f.setStyle(h);this.interaction=new a["a"]({type:"LineString",features:this.features_});c["a"].interaction(this.interaction);this.interaction.on("change:active",function(){if(u.interaction.getActive()){u.clear_()}});this.interaction.on("drawend",function(t){u.line=t.feature.getGeometry();n(function(){u.interaction.setActive(false)},0)});t.$watch(function(){return u.line},function(t,e){if(t===null){u.clear_()}});t.$watch(function(){return u.active},function(t){if(t===false){u.clear_()}u.interaction.setActive(u.active)})};f.Controller_.$inject=["$scope","$element","$timeout","ngeoFeatureOverlayMgr"];f.Controller_.prototype.$onInit=function(){var t=this["getMapFn"]();i["a"].assertInstanceof(t,o["a"]);this.map_=t;this.map_.addInteraction(this.interaction)};f.Controller_.prototype.clear_=function(){this.features_.clear();this.line=null};f.controller("GmfDrawprofilelineController",f.Controller_);e["a"]=f},function(t,e,n){(function(t,i){true?i(e,n(117)):undefined})(this,function(t,e){"use strict";function n(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);e.setFullYear(t.y);return e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function i(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));e.setUTCFullYear(t.y);return e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function r(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function a(t){var a=t.dateTime,s=t.date,l=t.time,u=t.periods,c=t.days,f=t.shortDays,mt=t.months,_t=t.shortMonths;var yt=h(u),bt=d(u),wt=h(c),xt=d(c),St=h(f),Ct=d(f),Et=h(mt),Ot=d(mt),Tt=h(_t),Mt=d(_t);var It={a:Vt,A:Ht,b:zt,B:Bt,c:null,d:P,e:P,f:$,H:D,I:j,j:k,L:F,m:G,M:U,p:Wt,q:qt,Q:vt,s:gt,S:Y,u:V,U:H,V:z,w:B,W:W,x:null,X:null,y:q,Y:X,Z:K,"%":pt};var Rt={a:Xt,A:Kt,b:Zt,B:Qt,c:null,d:Z,e:Z,f:nt,H:Q,I:J,j:tt,L:et,m:it,M:rt,p:Jt,q:te,Q:vt,s:gt,S:at,u:ot,U:st,V:lt,w:ut,W:ct,x:null,X:null,y:ft,Y:ht,Z:dt,"%":pt};var Nt={a:jt,A:kt,b:Ft,B:$t,c:Gt,d:C,e:C,f:R,H:O,I:O,j:E,L:I,m:S,M:T,p:Dt,q:x,Q:A,s:L,S:M,u:v,U:g,V:m,w:p,W:_,x:Ut,X:Yt,y:b,Y:y,Z:w,"%":N};It.x=At(s,It);It.X=At(l,It);It.c=At(a,It);Rt.x=At(s,Rt);Rt.X=At(l,Rt);Rt.c=At(a,Rt);function At(t,e){return function(n){var i=[],r=-1,a=0,s=t.length,l,u,c;if(!(n instanceof Date))n=new Date(+n);while(++r<s){if(t.charCodeAt(r)===37){i.push(t.slice(a,r));if((u=o[l=t.charAt(++r)])!=null)l=t.charAt(++r);else u=l==="e"?" ":"0";if(c=e[l])l=c(n,u);i.push(l);a=r+1}}i.push(t.slice(a,r));return i.join("")}}function Lt(t,a){return function(o){var s=r(1900,undefined,1),l=Pt(s,t,o+="",0),u,c;if(l!=o.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(s.s*1e3+("L"in s?s.L:0));if(a&&!("Z"in s))s.Z=0;if("p"in s)s.H=s.H%12+s.p*12;if(s.m===undefined)s.m="q"in s?s.q:0;if("V"in s){if(s.V<1||s.V>53)return null;if(!("w"in s))s.w=1;if("Z"in s){u=i(r(s.y,0,1)),c=u.getUTCDay();u=c>4||c===0?e.utcMonday.ceil(u):e.utcMonday(u);u=e.utcDay.offset(u,(s.V-1)*7);s.y=u.getUTCFullYear();s.m=u.getUTCMonth();s.d=u.getUTCDate()+(s.w+6)%7}else{u=n(r(s.y,0,1)),c=u.getDay();u=c>4||c===0?e.timeMonday.ceil(u):e.timeMonday(u);u=e.timeDay.offset(u,(s.V-1)*7);s.y=u.getFullYear();s.m=u.getMonth();s.d=u.getDate()+(s.w+6)%7}}else if("W"in s||"U"in s){if(!("w"in s))s.w="u"in s?s.u%7:"W"in s?1:0;c="Z"in s?i(r(s.y,0,1)).getUTCDay():n(r(s.y,0,1)).getDay();s.m=0;s.d="W"in s?(s.w+6)%7+s.W*7-(c+5)%7:s.w+s.U*7-(c+6)%7}if("Z"in s){s.H+=s.Z/100|0;s.M+=s.Z%100;return i(s)}return n(s)}}function Pt(t,e,n,i){var r=0,a=e.length,s=n.length,l,u;while(r<a){if(i>=s)return-1;l=e.charCodeAt(r++);if(l===37){l=e.charAt(r++);u=Nt[l in o?e.charAt(r++):l];if(!u||(i=u(t,n,i))<0)return-1}else if(l!=n.charCodeAt(i++)){return-1}}return i}function Dt(t,e,n){var i=yt.exec(e.slice(n));return i?(t.p=bt[i[0].toLowerCase()],n+i[0].length):-1}function jt(t,e,n){var i=St.exec(e.slice(n));return i?(t.w=Ct[i[0].toLowerCase()],n+i[0].length):-1}function kt(t,e,n){var i=wt.exec(e.slice(n));return i?(t.w=xt[i[0].toLowerCase()],n+i[0].length):-1}function Ft(t,e,n){var i=Tt.exec(e.slice(n));return i?(t.m=Mt[i[0].toLowerCase()],n+i[0].length):-1}function $t(t,e,n){var i=Et.exec(e.slice(n));return i?(t.m=Ot[i[0].toLowerCase()],n+i[0].length):-1}function Gt(t,e,n){return Pt(t,a,e,n)}function Ut(t,e,n){return Pt(t,s,e,n)}function Yt(t,e,n){return Pt(t,l,e,n)}function Vt(t){return f[t.getDay()]}function Ht(t){return c[t.getDay()]}function zt(t){return _t[t.getMonth()]}function Bt(t){return mt[t.getMonth()]}function Wt(t){return u[+(t.getHours()>=12)]}function qt(t){return 1+~~(t.getMonth()/3)}function Xt(t){return f[t.getUTCDay()]}function Kt(t){return c[t.getUTCDay()]}function Zt(t){return _t[t.getUTCMonth()]}function Qt(t){return mt[t.getUTCMonth()]}function Jt(t){return u[+(t.getUTCHours()>=12)]}function te(t){return 1+~~(t.getUTCMonth()/3)}return{format:function(t){var e=At(t+="",It);e.toString=function(){return t};return e},parse:function(t){var e=Lt(t+="",false);e.toString=function(){return t};return e},utcFormat:function(t){var e=At(t+="",Rt);e.toString=function(){return t};return e},utcParse:function(t){var e=Lt(t+="",true);e.toString=function(){return t};return e}}}var o={"-":"",_:" ",0:"0"},s=/^\s*\d+/,l=/^%/,u=/[\\^$*+?|[\]().{}]/g;function c(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function f(t){return t.replace(u,"\\$&")}function h(t){return new RegExp("^(?:"+t.map(f).join("|")+")","i")}function d(t){var e={},n=-1,i=t.length;while(++n<i)e[t[n].toLowerCase()]=n;return e}function p(t,e,n){var i=s.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function v(t,e,n){var i=s.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function g(t,e,n){var i=s.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function m(t,e,n){var i=s.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function _(t,e,n){var i=s.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function y(t,e,n){var i=s.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function b(t,e,n){var i=s.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function w(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function x(t,e,n){var i=s.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function S(t,e,n){var i=s.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function C(t,e,n){var i=s.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function E(t,e,n){var i=s.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function O(t,e,n){var i=s.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function T(t,e,n){var i=s.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function M(t,e,n){var i=s.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function I(t,e,n){var i=s.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function R(t,e,n){var i=s.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function N(t,e,n){var i=l.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function A(t,e,n){var i=s.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function L(t,e,n){var i=s.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function P(t,e){return c(t.getDate(),e,2)}function D(t,e){return c(t.getHours(),e,2)}function j(t,e){return c(t.getHours()%12||12,e,2)}function k(t,n){return c(1+e.timeDay.count(e.timeYear(t),t),n,3)}function F(t,e){return c(t.getMilliseconds(),e,3)}function $(t,e){return F(t,e)+"000"}function G(t,e){return c(t.getMonth()+1,e,2)}function U(t,e){return c(t.getMinutes(),e,2)}function Y(t,e){return c(t.getSeconds(),e,2)}function V(t){var e=t.getDay();return e===0?7:e}function H(t,n){return c(e.timeSunday.count(e.timeYear(t)-1,t),n,2)}function z(t,n){var i=t.getDay();t=i>=4||i===0?e.timeThursday(t):e.timeThursday.ceil(t);return c(e.timeThursday.count(e.timeYear(t),t)+(e.timeYear(t).getDay()===4),n,2)}function B(t){return t.getDay()}function W(t,n){return c(e.timeMonday.count(e.timeYear(t)-1,t),n,2)}function q(t,e){return c(t.getFullYear()%100,e,2)}function X(t,e){return c(t.getFullYear()%1e4,e,4)}function K(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+c(e/60|0,"0",2)+c(e%60,"0",2)}function Z(t,e){return c(t.getUTCDate(),e,2)}function Q(t,e){return c(t.getUTCHours(),e,2)}function J(t,e){return c(t.getUTCHours()%12||12,e,2)}function tt(t,n){return c(1+e.utcDay.count(e.utcYear(t),t),n,3)}function et(t,e){return c(t.getUTCMilliseconds(),e,3)}function nt(t,e){return et(t,e)+"000"}function it(t,e){return c(t.getUTCMonth()+1,e,2)}function rt(t,e){return c(t.getUTCMinutes(),e,2)}function at(t,e){return c(t.getUTCSeconds(),e,2)}function ot(t){var e=t.getUTCDay();return e===0?7:e}function st(t,n){return c(e.utcSunday.count(e.utcYear(t)-1,t),n,2)}function lt(t,n){var i=t.getUTCDay();t=i>=4||i===0?e.utcThursday(t):e.utcThursday.ceil(t);return c(e.utcThursday.count(e.utcYear(t),t)+(e.utcYear(t).getUTCDay()===4),n,2)}function ut(t){return t.getUTCDay()}function ct(t,n){return c(e.utcMonday.count(e.utcYear(t)-1,t),n,2)}function ft(t,e){return c(t.getUTCFullYear()%100,e,2)}function ht(t,e){return c(t.getUTCFullYear()%1e4,e,4)}function dt(){return"+0000"}function pt(){return"%"}function vt(t){return+t}function gt(t){return Math.floor(+t/1e3)}var mt;_t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _t(e){mt=a(e);t.timeFormat=mt.format;t.timeParse=mt.parse;t.utcFormat=mt.utcFormat;t.utcParse=mt.utcParse;return mt}var yt="%Y-%m-%dT%H:%M:%S.%LZ";function bt(t){return t.toISOString()}var wt=Date.prototype.toISOString?bt:t.utcFormat(yt);function xt(t){var e=new Date(t);return isNaN(e)?null:e}var St=+new Date("2000-01-01T00:00:00.000Z")?xt:t.utcParse(yt);t.isoFormat=wt;t.isoParse=St;t.timeFormatDefaultLocale=_t;t.timeFormatLocale=a;Object.defineProperty(t,"__esModule",{value:true})})},function(t,e,n){"use strict";var i=n(121);var r=n(497);var a=n.n(r);var o=n(496);var s=n.n(o);var l=n(578);var u=n.n(l);var c=angular.module("gmfLayertreeTimeSliderComponent",[i["a"].module.name,"ui.slider"]);c.run(["$templateCache",function(t){t.put("gmf/layertree/timesliderComponent",n(494))}]);c.directive_=function(t,e){return{scope:{onDateSelected:"&gmfTimeSliderOnDateSelected",time:"=gmfTimeSliderTime"},bindToController:true,controller:"gmfTimeSliderController as sliderCtrl",restrict:"AE",templateUrl:"gmf/layertree/timesliderComponent",link:{pre:function t(e,n,i,r){r.init();r.sliderOptions["stop"]=a;r.sliderOptions["slide"]=o;function a(t,n){r.onDateSelected({time:o(t,n)});e.$apply()}function o(t,n){var i=void 0,a=void 0,o=void 0;if(n.values){i=new Date(r.getClosestValue_(n.values[0]));a=new Date(r.getClosestValue_(n.values[1]));r.dates=[i,a];o={start:i.getTime(),end:a.getTime()}}else{i=new Date(r.getClosestValue_(n.value));r.dates=i;o={start:i.getTime()}}e.$apply();return o}}}}};c.directive_.$inject=["$timeout","$filter"];c.directive("gmfTimeSlider",c.directive_);c.Controller_=function(t,e){this.ngeoWMSTime_=e;this.onDateSelected;this.time;this.isModeRange;this.minValue;this.maxValue;this.timeValueList;this.sliderOptions;this.dates};c.Controller_.$inject=["$scope","ngeoWMSTime"];c.Controller_.prototype.init=function(){this.timeValueList=this.getTimeValueList_();var t=this.ngeoWMSTime_.getOptions(this.time);this.isModeRange=this.time.mode==="range";this.minValue=t.minDate;this.maxValue=t.maxDate;this.dates=this.isModeRange?[t.values[0],t.values[1]]:t.values;this.sliderOptions={range:this.isModeRange,min:this.minValue,max:this.maxValue}};c.Controller_.prototype.getTimeValueList_=function(){var t=this.time;var e=null;var n=new Date(this.minValue);var i=new Date(this.maxValue);if(t.values){e=[];t.values.forEach(function(t){e.push(new Date(t).getTime())})}else{var r=1024;var a=new Date(n.getTime());a.setFullYear(n.getFullYear()+r*t.interval[0]);a.setMonth(n.getMonth()+r*t.interval[1],n.getDate()+r*t.interval[2]);a.setSeconds(n.getSeconds()+r*t.interval[3]);if(a>i){e=[];for(var o=0;;o++){var s=new Date(n.getTime());s.setFullYear(n.getFullYear()+o*t.interval[0]);s.setMonth(n.getMonth()+o*t.interval[1],n.getDate()+o*t.interval[2]);s.setSeconds(n.getSeconds()+o*t.interval[3]);if(s<=i){e.push(s.getTime())}else{break}}}}return e};c.Controller_.prototype.getClosestValue_=function(t){if(t<=this.minValue){return this.minValue}if(t>=this.maxValue){return this.maxValue}if(this.timeValueList){var e=void 0;var n=0;var i=this.timeValueList.length-1;while(i-n>1){e=Math.floor((n+i)/2);if(this.timeValueList[e]>=t){i=e}else{n=e}}var r=Math.abs(this.timeValueList[n]-t);var a=Math.abs(this.timeValueList[i]-t);return this.timeValueList[r<a?n:i]}else{var o=new Date(t);var s=new Date(this.minValue);var l=new Date(this.minValue);var u=new Date(this.maxValue);var c=Math.abs(o-l);for(var f=1;;f++){var h=new Date(s.getTime());h.setFullYear(s.getFullYear()+f*this.time.interval[0]);h.setMonth(s.getMonth()+f*this.time.interval[1],s.getDate()+f*this.time.interval[2]);h.setSeconds(s.getSeconds()+f*this.time.interval[3]);if(h>u){break}var d=Math.abs(o-h);if(d<=c){l=h;c=d}else{break}}return l.getTime()}};c.Controller_.prototype.getLocalizedDate=function(t){return this.ngeoWMSTime_.formatTimeValue(t,this.time.resolution)};c.controller("gmfTimeSliderController",c.Controller_);e["a"]=c},function(t,e,n){"use strict";var i=n(126);var r=n(292);var a=n.n(r);var o=angular.module("ngeoLayertree",[i["a"].module.name]);o.value("ngeoLayertreeTemplateUrl",function(t,e){var n=e["ngeoLayertreeTemplateurl"];return n!==undefined?n:"ngeo/layertree"});o.run(["$templateCache",function(t){t.put("ngeo/layertree",n(499))}]);o.directive_=function(t){return{restrict:"A",scope:true,templateUrl:t,controller:i["a"]}};o.directive_.$inject=["ngeoLayertreeTemplateUrl"];o.directive("ngeoLayertree",o.directive_);e["a"]=o},function(t,e,n){"use strict";var i=n(135);var r=n(1);function a(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var o=angular.module("gmfLayertreeDatasourceGroupTreeComponent",[i["a"].module.name]);o.run(["$templateCache",function(t){t.put("gmf/layertree/datasourceGroupTreeComponent",n(500))}]);o.value("gmfLayertreeDatasourceGroupTreeTemplateUrl",function(t){var e=t["gmfLayertreeDatasourceGroupTreeTemplateUrl"];return e!==undefined?e:"gmf/layertree/datasourceGroupTreeComponent"});s.$inject=["$attrs","gmfLayertreeDatasourceGroupTreeTemplateUrl"];function s(t,e){return e(t)}o.Controller_=function(){t.$inject=["$scope","ngeoDataSources"];function t(e,n){a(this,t);this.group;this.scope_=e;this.dataSources_=n.collection}t.prototype.getGroupUid=function t(){return"datasourcegrouptree-"+r["c"](this.group)};t.prototype.toggle=function t(){this.group.toggleVisibilityState()};t.prototype.toggleDataSource=function t(e){e.visible=!e.visible};t.prototype.remove=function t(){for(var e=this.group.dataSources.length-1,n=0;e>=n;e--){this.dataSources_.remove(this.group.dataSources[e])}};t.prototype.removeDataSource=function t(e){this.dataSources_.remove(e)};return t}();o.component("gmfDatasourcegrouptree",{bindings:{group:"<"},controller:o.Controller_,templateUrl:s});e["a"]=o},function(t,e,n){"use strict";var i=n(160);var r=n(216);var a=angular.module("ngeoStatemanagerModule",[i["a"].module.name,r["a"].module.name]);e["a"]=a},function(t,e,n){"use strict";var i=n(184);var r=n(239);var a=n(1);function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var s=angular.module("gmfWmtscapabilitylayertree",[i["a"].module.name,r["a"].module.name]);s.run(["$templateCache",function(t){t.put("ngeo/import/wmtsCapabilityLayertreeComponent",n(503))}]);s.value("gmfWmtscapabilitylayertreTemplateUrl",function(t){var e=t["gmfWmtscapabilitylayertreTemplateUrl"];return e!==undefined?e:"ngeo/import/wmtsCapabilityLayertreeComponent"});l.$inject=["$attrs","gmfWmtscapabilitylayertreTemplateUrl"];function l(t,e){return e(t)}s.Controller_=function(){t.$inject=["gmfExternalDataSourcesManager"];function t(e){o(this,t);this.capabilities;this.layers;this.url;this.gmfExternalDataSourcesManager_=e}t.prototype.createAndAddDataSource=function t(e){var n=this.gmfExternalDataSourcesManager_;n.createAndAddDataSourceFromWMTSCapability(e,this.capabilities,this.url)};t.prototype.getUid=function t(e){return a["c"](e)};return t}();s.component("gmfWmtscapabilitylayertree",{bindings:{capabilities:"<",layers:"<",url:"<"},controller:s.Controller_,templateUrl:l});e["a"]=s},function(t,e,n){"use strict";var i=n(184);var r=n(239);var a=n(1);var o=n(292);var s=n.n(o);function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var u=angular.module("gmfWmscapabilitylayertreenode",[i["a"].module.name,r["a"].module.name]);u.run(["$templateCache",function(t){t.put("gmf/import/wmsCapabilityLayertreeComponent",n(504))}]);u.value("gmfWmscapabilitylayertreenodeTemplateUrl",function(t){var e=t["gmfWmscapabilitylayertreenodeTemplateUrl"];return e!==undefined?e:"gmf/import/wmsCapabilityLayertreeComponent"});c.$inject=["$attrs","gmfWmscapabilitylayertreenodeTemplateUrl"];function c(t,e){return e(t)}u.Controller_=function(){t.$inject=["gmfExternalDataSourcesManager"];function t(e){l(this,t);this.capabilities;this.layer;this.url;this.gmfExternalDataSourcesManager_=e}t.prototype.createAndAddDataSource=function t(e){this.gmfExternalDataSourcesManager_.createAndAddDataSourceFromWMSCapability(e,this.capabilities,this.url)};t.prototype.getUid=function t(e){return a["c"](e)};return t}();u.component("gmfWmscapabilitylayertreenode",{bindings:{capabilities:"<",layer:"<",url:"<"},controller:u.Controller_,templateUrl:c});e["a"]=u},function(t,e,n){"use strict";var i=n(184);var r=n(337);var a=n(336);var o=n(2);var s=n(211);var l=n(53);var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function c(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var f=angular.module("gmfImportdatasource",[i["a"].module.name,r["a"].name,a["a"].name,s["a"].module.name]);f.run(["$templateCache",function(t){t.put("gmf/import/importdatasourceComponent",n(502))}]);f.value("gmfImportdatasourceTemplateUrl",function(t){var e=t["gmfImportdatasourceTemplateUrl"];return e!==undefined?e:"gmf/import/importdatasourceComponent"});h.$inject=["$attrs","gmfImportdatasourceTemplateUrl"];function h(t,e){return e(t)}f.Controller_=function(){t.$inject=["$element","$filter","$injector","$scope","$timeout","gmfExternalDataSourcesManager","ngeoQuerent"];function t(e,n,i,r,a,s,l){var u=this;c(this,t);this.map;this.element_=e;this.scope_=r;this.timeout_=a;this.gmfExternalDataSourcesManager_=s;this.ngeoQuerent_=l;this.file;this.url;this.fileInput_=e.find("input[type=file]");this.hasError=false;this.hasErrorPromise_=null;this.mode=f.Controller_.Mode.ONLINE;this.modes=[f.Controller_.Mode.LOCAL,f.Controller_.Mode.ONLINE];this.pending=false;this.unitPrefixFormat_=n("ngeoUnitPrefix");this.wmsCapabilities=null;this.wmtsCapabilities=null;this.serversEngine_;var h=i.has("gmfExternalOGCServers")?i.get("gmfExternalOGCServers"):undefined;if(h){var d=h.map(function(t){return t["url"]});this.serversEngine_=new Bloodhound({datumTokenizer:function t(e){o["a"].assertString(e);var n=Bloodhound.tokenizers.whitespace(e);o["a"].assert(n);var i=[];for(var r=n,a=Array.isArray(r),s=0,r=a?r:r[Symbol.iterator]();;){var l;if(a){if(s>=r.length)break;l=r[s++]}else{s=r.next();if(s.done)break;l=s.value}var u=l;var c=0;while(c+1<u.length){i.push(u.substr(c,u.length));c++}}return i},queryTokenizer:Bloodhound.tokenizers.whitespace,identify:false,local:d})}this.fileInput_.on("change",function(){u.file=u.fileInput_[0].files&&u.fileInput_[0].files[0]?u.fileInput_[0].files[0]:undefined;u.scope_.$apply()})}t.prototype.$onInit=function t(){var e=this;this.gmfExternalDataSourcesManager_.map=this.map;if(this.serversEngine_){this.timeout_(function(){o["a"].assert(e.serversEngine_);var t=e.element_.find("input[name=url]");var n=e.element_.find("button.gmf-importdatasource-connect-btn");t.typeahead({hint:true,highlight:true,minLength:1},{name:"url",source:e.serversEngine_.ttAdapter()}).bind("typeahead:select",function(t,i){e.timeout_(function(){e.url=i;e.scope_.$apply();n.focus()})})})}};t.prototype.browse=function t(){this.hasError=false;this.element_.find("input[type=file][name=file]").click()};t.prototype.connect=function t(){var e=this;var n=o["a"].assertString(this.url);var i=l["a"].guessServiceTypeByUrl(n);this.startWorking_();if(i===l["a"].Type.WMS){this.ngeoQuerent_.wmsGetCapabilities(n).then(function(t){e.wmsCapabilities=t;e.stopWorking_()},function(){e.stopWorking_(true)})}else if(i===l["a"].Type.WMTS){this.ngeoQuerent_.wmtsGetCapabilities(n).then(function(t){e.wmtsCapabilities=t;e.stopWorking_()},function(){e.stopWorking_(true)})}else{this.timeout_(function(){e.stopWorking_(true)})}};t.prototype.load=function t(){var e=this;var n=o["a"].assert(this.file);this.gmfExternalDataSourcesManager_.createAndAddDataSourceFromFile(n,function(t){if(!t){e.hasError=true}})};t.prototype.startWorking_=function t(){this.pending=true;this.hasError=false;this.wmsCapabilities=null;this.wmtsCapabilities=null};t.prototype.stopWorking_=function t(){var e=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.pending=false;if(n){this.hasError=true;if(this.hasErrorPromise_){this.timeout_.cancel(this.hasErrorPromise_)}this.hasErrorPromise_=this.timeout_(function(){e.hasError=false;e.hasErrorPromise_=null},3e3)}};u(t,[{key:"fileNameAndSize",get:function t(){var e="";var n=this.file;if(n!==undefined){var i=this.unitPrefixFormat_(n.size,"o");e=n.name+", "+i}return e}}]);return t}();f.Controller_.Mode={LOCAL:"Local",ONLINE:"Online"};f.component("gmfImportdatasource",{bindings:{map:"<"},controller:f.Controller_,templateUrl:h});e["a"]=f},function(t,e,n){"use strict";var i=n(2);var r=n(264);var a=n(263);var o=n(158);var s=n(45);var l=n(24);var u=n(308);var c=n(261);var f=n(260);var h=n(240);var d=n(256);var p=n(101);var v=n(65);var g=n(63);var m=n(94);var _=n(54);var y=n(110);var b=n(207);var w=n(1);var x=n(14);var S=n(19);var C=n(3);var E=n(7);var O=n(12);var T=n(140);var M=n(33);var I=n(81);var R=n(615);var N=n.n(R);function A(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var L=angular.module("ngeoRule",[a["a"].name,o["a"].module.name,h["a"].module.name,d["a"].name,v["a"].module.name,m["a"].module.name]);L.run(["$templateCache",function(t){t.put("ngeo/filter/rulecomponent",n(507))}]);L.value("ngeoRuleTemplateUrl",function(t){var e=t["ngeoRuleTemplateUrl"];return e!==undefined?e:"ngeo/filter/rulecomponent"});P.$inject=["$attrs","ngeoRuleTemplateUrl"];function P(t,e){return e(t)}L.RuleController_=function(){t.$inject=["gettextCatalog","$scope","$timeout","ngeoFeatureHelper","ngeoRuleHelper","ngeoToolActivateMgr"];function t(e,n,i,r,a,o){var s,l;A(this,t);this.featureOverlay;this.map;this.rule;this.toolGroup;this.gettextCatalog_=e;this.scope_=n;this.timeout_=i;this.ngeoFeatureHelper_=r;this.ngeoRuleHelper_=a;this.ngeoToolActivateMgr_=o;this.clone;var h=_["a"].OperatorType;var d=_["a"].SpatialOperatorType;var p=_["a"].TemporalOperatorType;this.operators=(s={},s[h.EQUAL_TO]=e.getString("Is equal to"),s[h.GREATER_THAN]=e.getString("Is greater than"),s[h.GREATER_THAN_OR_EQUAL_TO]=e.getString("Is greater than or equal to"),s[h.LESSER_THAN]=e.getString("Is lesser than"),s[h.LESSER_THAN_OR_EQUAL_TO]=e.getString("Is lesser than or equal to"),s[h.NOT_EQUAL_TO]=e.getString("Is not equal to"),s[h.LIKE]=e.getString("Contains"),s[d.CONTAINS]=e.getString("Contains"),s[d.INTERSECTS]=e.getString("Intersects"),s[d.WITHIN]=e.getString("Is inside of"),s[p.BEGINS]=e.getString("Begins at"),s[p.DURING]=e.getString("During"),s[p.ENDS]=e.getString("Ends at"),s[p.EQUALS]=e.getString("Is equal to"),s);this.operatorsShortFormat=(l={},l[h.EQUAL_TO]="=",l[h.GREATER_THAN]=">",l[h.GREATER_THAN_OR_EQUAL_TO]=">=",l[h.LESSER_THAN]="<",l[h.LESSER_THAN_OR_EQUAL_TO]="<=",l[h.NOT_EQUAL_TO]="!=",l[h.LIKE]="~",l[p.BEGINS]=">=",l[p.ENDS]="<=",l[p.EQUALS]="=",l);this.timeRangeMode={widget:"datepicker",maxValue:null,minValue:null,maxDefValue:this.createDate_(),minDefValue:this.createWeekAgoDate_(),mode:"range",interval:[0,1,0,0]};this.timeValueMode={widget:"datepicker",maxValue:null,minValue:null,maxDefValue:this.createDate_(),minDefValue:this.createDate_(),mode:"value",interval:[0,1,0,0]};this.toolActivate_;this.unlisteners_=[];this.drawActive=false;this.drawToolActivate=new g["a"](this,"drawActive");this.drawnFeatures=new S["b"];this.menu_=null;this.selectedFeatures=new S["b"];this.interactions_=new S["b"];this.modify_=new u["a"]({features:this.selectedFeatures,style:r.getVertexStyle(false)});this.interactions_.push(this.modify_);this.rotate_=new c["a"]({features:this.selectedFeatures,style:new O["c"]({text:new T["a"]({text:"",font:"normal 18px FontAwesome",fill:new M["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.rotate_);this.translate_=new f["a"]({features:this.selectedFeatures,style:new O["c"]({text:new T["a"]({text:"",font:"normal 18px FontAwesome",fill:new M["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.translate_);this.listenerKeys_=[];this.initializeInteractions_();this.modifyToolActivate=new g["a"](this.modify_,"active");this.rotateToolActivate=new g["a"](this.rotate_,"active");this.translateToolActivate=new g["a"](this.translate_,"active");this.geomType=null}t.prototype.$onInit=function t(){var e=this;this.clone=this.ngeoRuleHelper_.cloneRule(this.rule);this.toolActivate_=new g["a"](this.rule,"active");this.ngeoToolActivateMgr_.registerTool(this.toolGroup,this.toolActivate_);this.scope_.$watch(function(){return e.rule.active},this.handleActiveChange_.bind(this));if(this.clone.type===s["a"].DATE||this.clone.type===s["a"].DATETIME){this.unlisteners_.push(this.scope_.$watch(function(){return e.clone.getExpression()},function(t){e.timeValueMode.minDefValue=t||e.createDate_()}));this.unlisteners_.push(this.scope_.$watch(function(){return e.clone.lowerBoundary},function(t){e.timeRangeMode.minDefValue=t||e.createWeekAgoDate_()}));this.unlisteners_.push(this.scope_.$watch(function(){return e.clone.upperBoundary},function(t){e.timeRangeMode.maxDefValue=t||e.createDate_()}))}else if(this.clone.type===s["a"].GEOMETRY){this.unlisteners_.push(this.scope_.$watch(function(){return e.clone.operator},function(t){if(t&&t===_["a"].SpatialOperatorType.CONTAINS){var n=i["a"].assertInstanceof(e.clone,y["a"]);var r=n.feature.getGeometry();if(r){var a=e.ngeoFeatureHelper_.getType(n.feature);var o=[l["a"].CIRCLE,l["a"].POLYGON,l["a"].RECTANGLE];if(!E["f"](o,a)){e.clone.setExpression(null)}}}}));this.unlisteners_.push(this.scope_.$watch(function(){return e.clone.expression},function(t){if(t){var n=i["a"].assertInstanceof(e.clone,y["a"]);e.geomType=e.ngeoFeatureHelper_.getType(n.feature)}else{e.geomType=null}}));this.unlisteners_.push(this.scope_.$watch(function(){var t=e.clone.getExpression()!==null;var n=e.rule.active===true;var i=e.modify_.getActive()||e.rotate_.getActive()||e.translate_.getActive();return t&&n&&i},function(t){if(t){var n=i["a"].assertInstanceof(e.clone,y["a"]);e.selectedFeatures.push(n.feature)}else{e.selectedFeatures.clear()}}))}};t.prototype.$onDestroy=function t(){if(this.rule.active){this.rule.active=false;this.handleActiveChange_(false,true)}this.ngeoToolActivateMgr_.unregisterTool(this.toolGroup,this.toolActivate_);for(var e=0,n=this.unlisteners_.length;e<n;e++){this.unlisteners_[e]()}this.unlisteners_.length=0;this.clone.destroy()};t.prototype.toggle=function t(){if(this.rule.active){this.cancel()}else{this.rule.active=true}};t.prototype.apply=function t(){this.ngeoRuleHelper_.extendRule(this.clone,this.rule);this.rule.active=false};t.prototype.cancel=function t(){this.ngeoRuleHelper_.extendRule(this.rule,this.clone);this.rule.active=false};t.prototype.reset=function t(){this.clone.reset();this.rule.reset()};t.prototype.toggleChoiceSelection=function t(e){var n=i["a"].assertInstanceof(this.clone,b["a"]);var r=n.getExpression()?n.getExpression().split(","):[];var a=r.indexOf(e);if(a>-1){r.splice(a,1)}else{r.push(e)}n.setExpression(r.length?r.join(","):null)};t.prototype.onDateSelected=function t(e){this.clone.setExpression(e["start"])};t.prototype.onDateRangeSelected=function t(e){this.clone.lowerBoundary=e["start"];this.clone.upperBoundary=e["end"]};t.prototype.createDate_=function t(e){var n=new Date;if(e!==undefined){var i=n.getTime()-e;n.setTime(i)}return n.toISOString()};t.prototype.createWeekAgoDate_=function t(){return this.createDate_(1e3*60*60*24*7)};t.prototype.timeToDate=function t(e){var n=new Date(e);return n.toLocaleDateString()};t.prototype.handleActiveChange_=function t(e,n){if(!(this.rule instanceof y["a"])||!(this.clone instanceof y["a"])||e===n){return}var r=this.listenerKeys_;var a=["ngeo-rule-",w["c"](this)].join("-");var o=this.ngeoToolActivateMgr_;var s=this.rule.feature;var l=this.clone.feature;var u=this.map.getViewport();i["a"].assertElement(u);if(e){r.push(C["a"](this.drawnFeatures,"add",this.handleFeaturesAdd_,this));r.push(C["a"](u,"contextmenu",this.handleMapContextMenu_,this));r.push(C["a"](this.translate_,"translateend",this.handleTranslateEnd_,this));r.push(C["a"](this.rotate_,"rotateend",this.handleRotateEnd_,this));this.featureOverlay.removeFeature(s);this.featureOverlay.addFeature(l);this.registerInteractions_();o.registerTool(a,this.drawToolActivate,false);o.registerTool(a,this.modifyToolActivate,true);o.registerTool(a,this.rotateToolActivate,false);o.registerTool(a,this.translateToolActivate,false);this.modify_.setActive(true);if(l.getGeometry()){this.ngeoFeatureHelper_.setStyle(l,true)}}else{l.setStyle(null);r.forEach(C["e"]);r.length=0;this.drawActive=false;o.unregisterTool(a,this.drawToolActivate);o.unregisterTool(a,this.modifyToolActivate);o.unregisterTool(a,this.rotateToolActivate);o.unregisterTool(a,this.translateToolActivate);this.modify_.setActive(false);this.unregisterInteractions_();if(this.selectedFeatures.getLength()){this.featureOverlay.removeFeature(l)}this.featureOverlay.addFeature(s);this.selectedFeatures.clear()}};t.prototype.initializeInteractions_=function t(){this.interactions_.forEach(function(t){t.setActive(false);p["a"].interaction(t)})};t.prototype.registerInteractions_=function t(){var e=this;this.interactions_.forEach(function(t){e.map.addInteraction(t)})};t.prototype.unregisterInteractions_=function t(){var e=this;this.interactions_.forEach(function(t){e.map.removeInteraction(t)})};t.prototype.handleFeaturesAdd_=function t(e){var n=this;this.timeout_(function(){var t=i["a"].assertInstanceof(n.clone,y["a"]);var r=t.feature;var a=i["a"].assertInstanceof(e.element,x["a"]);var o=i["a"].assertInstanceof(a.getGeometry(),I["a"]);t.geometry=o;n.drawActive=false;var s=n.ngeoFeatureHelper_.getNonSpatialProperties(a);n.ngeoFeatureHelper_.clearNonSpatialProperties(r);r.setProperties(s);n.ngeoFeatureHelper_.setStyle(r,true);n.scope_.$apply()})};t.prototype.getRuleGeometryType=function t(){var e=i["a"].assertInstanceof(this.rule,y["a"]);return this.ngeoFeatureHelper_.getType(e.feature)};t.prototype.handleMapContextMenu_=function t(e){var n=this;this.removeMenu_();var i=this.map.getEventPixel(e);var a=this.map.getCoordinateFromPixel(i);var o=this.map.forEachFeatureAtPixel(i,function(t){var e=false;if(E["f"](n.selectedFeatures.getArray(),t)){e=t}return e});o=o?o:null;var s=[];if(o){var u=this.ngeoFeatureHelper_.getType(o);var c=this.gettextCatalog_;if(u==l["a"].CIRCLE||u==l["a"].LINE_STRING||u==l["a"].POLYGON||u==l["a"].RECTANGLE){s.push({cls:"fa fa-arrows",label:c.getString("Move"),name:"move"})}if(u==l["a"].LINE_STRING||u==l["a"].POLYGON||u==l["a"].RECTANGLE){s.push({cls:"fa fa-rotate-right",label:c.getString("Rotate"),name:"rotate"})}}if(s.length){this.menu_=new r["a"]({actions:s});C["a"](this.menu_,"actionclick",this.handleMenuActionClick_,this);this.map.addOverlay(this.menu_);this.menu_.open(a);e.preventDefault();e.stopPropagation();this.scope_.$apply()}};t.prototype.removeMenu_=function t(){if(this.menu_){C["c"](this.menu_,"actionclick",this.handleMenuActionClick_,this);this.map.removeOverlay(this.menu_);this.menu_=null}};t.prototype.handleMenuActionClick_=function t(e){var n=e.detail.action;switch(n){case"move":this.translate_.setActive(true);this.scope_.$apply();break;case"rotate":this.rotate_.setActive(true);this.scope_.$apply();break;default:console.log("FIXME - support: "+n);break}};t.prototype.handleRotateEnd_=function t(e){this.rotate_.setActive(false);this.scope_.$apply()};t.prototype.handleTranslateEnd_=function t(e){this.translate_.setActive(false);this.scope_.$apply()};return t}();L.component("ngeoRule",{bindings:{featureOverlay:"<",map:"<",rule:"<",toolGroup:"<"},controller:L.RuleController_,templateUrl:P});e["a"]=L},function(t,e,n){"use strict";var i=n(2);var r=n(147);var a=n(180);var o=n(339);var s=n(158);var l=n(45);var u=n(110);var c=n(240);var f=n(1);var h=n(7);var d=n(615);var p=n.n(d);function v(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var g=angular.module("ngeoFilter",[s["a"].module.name,o["a"].name,c["a"].module.name,r["a"].module.name]);g.run(["$templateCache",function(t){t.put("ngeo/filter",n(506))}]);g.value("ngeoFilterTemplateUrl",function(t){var e=t["ngeoFilterTemplateUrl"];return e!==undefined?e:"ngeo/filter"});m.$inject=["$attrs","ngeoFilterTemplateUrl"];function m(t,e){return e(t)}g.component("ngeoFilter",{bindings:{aRuleIsActive:"=",customRules:"<",datasource:"<",directedRules:"<",featureOverlay:"<",map:"<",toolGroup:"<"},controller:"ngeoFilterController",templateUrl:m});g.FilterController_=function(){t.$inject=["gettextCatalog","$scope","$timeout","ngeoMapQuerent","ngeoRuleHelper"];function t(e,n,i,r,o){v(this,t);this.aRuleIsActive;this.customRules;this.datasource;this.directedRules;this.featureOverlay;this.map;this.toolGroup;this.gettextCatalog_=e;this.scope_=n;this.timeout_=i;this.ngeoMapQuerent_=r;this.ngeoRuleHelper_=o;this.conditions=[{text:e.getString("All"),value:a["a"].AND},{text:e.getString("At least one"),value:a["a"].OR},{text:e.getString("None"),value:a["a"].NOT}];this.geometryAttributes=[];this.otherAttributes=[];this.ruleUnlisteners_={}}t.prototype.$onInit=function t(){var e=this;this.scope_.$watch(function(){return e.aRuleIsActive},this.handleARuleIsActiveChange_.bind(this));var n=i["a"].assert(this.datasource.attributes);for(var r=n,a=Array.isArray(r),o=0,r=a?r:r[Symbol.iterator]();;){var s;if(a){if(o>=r.length)break;s=r[o++]}else{o=r.next();if(o.done)break;s=o.value}var u=s;if(u.type===l["a"].GEOMETRY){this.geometryAttributes.push(u)}else{this.otherAttributes.push(u)}}var c=[].concat(this.customRules,this.directedRules);for(var f=c,h=Array.isArray(f),d=0,f=h?f:f[Symbol.iterator]();;){var p;if(h){if(d>=f.length)break;p=f[d++]}else{d=f.next();if(d.done)break;p=d.value}var v=p;this.registerRule_(v)}this.apply()};t.prototype.$onDestroy=function t(){if(this.datasource.filterRules!==null){this.datasource.filterRules=null}this.featureOverlay.clear()};t.prototype.hasARule=function t(){return[].concat(this.customRules,this.directedRules).length>0};t.prototype.apply=function t(){var e=this;this.datasource.filterRules=null;this.timeout_(function(){var t=e.getRulesWithValue_();if(t.length){e.datasource.filterRules=t;e.ngeoMapQuerent_.clear()}})};t.prototype.getData=function t(){var e=this.getRulesWithValue_();if(!e.length){return}var n=this.datasource;var r=1e3;var a=this.map;var o=a.getView().getProjection().getCode();var s=this.ngeoRuleHelper_.createFilter({dataSource:n,filterRules:e,srsName:o});i["a"].assert(s);this.ngeoMapQuerent_.issue({dataSources:[n],filter:s,limit:r,map:a})};t.prototype.getRulesWithValue_=function t(){var e=[];var n=[].concat(this.customRules,this.directedRules);for(var i=n,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.value){e.push(s)}}return e};t.prototype.createAndAddCustomRule=function t(e){var n=this.ngeoRuleHelper_.createRuleFromAttribute(e,true);this.registerRule_(n);this.customRules.push(n);this.timeout_(function(){n.active=true},1)};t.prototype.setCondition=function t(e){if(this.datasource.filterCondition!==e.value){this.datasource.filterCondition=e.value}};t.prototype.removeCustomRule=function t(e){var n=this;e.active=false;this.timeout_(function(){h["j"](n.customRules,e);n.unregisterRule_(e);e.destroy()})};t.prototype.registerRule_=function t(e){var n=f["c"](e);this.ruleUnlisteners_[n]=this.scope_.$watch(function(){return e.active},this.handleRuleActiveChange_.bind(this));if(e instanceof u["a"]){this.featureOverlay.addFeature(e.feature)}};t.prototype.unregisterRule_=function t(e){var n=f["c"](e);var r=this.ruleUnlisteners_[n];i["a"].assert(r);r();delete this.ruleUnlisteners_[n];if(e instanceof u["a"]){this.featureOverlay.removeFeature(e.feature)}};t.prototype.handleRuleActiveChange_=function t(){var e=false;var n=[].concat(this.customRules,this.directedRules);for(var i=n,r=Array.isArray(i),a=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.active){e=true;break}}this.aRuleIsActive=e};t.prototype.handleARuleIsActiveChange_=function t(){if(this.aRuleIsActive){return}var e=[].concat(this.customRules,this.directedRules);for(var n=e,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var a;if(i){if(r>=n.length)break;a=n[r++]}else{r=n.next();if(r.done)break;a=r.value}var o=a;if(o.active){o.active=false;break}}};return t}();g.controller("ngeoFilterController",g.FilterController_);e["a"]=g},function(t,e,n){"use strict";var i=n(2);var r=n(196);var a=n(75);var o=n(23);var s=angular.module("GmfEditingFeatureSelectorComponent",[r["a"].name,a["a"].module.name,o["a"].module.name]);s.run(["$templateCache",function(t){t.put("gmf/editing/editFeatureSelectorComponent",n(514))}]);s.component_=function(){return{controller:"GmfEditfeatureselectorController as efsCtrl",scope:{active:"=gmfEditfeatureselectorActive",map:"<gmfEditfeatureselectorMap",tolerance:"<?gmfEditfeatureselectorTolerance",vectorLayer:"<gmfEditfeatureselectorVector",selectedEditableTreeCtrl:"=?gmfEditfeatureselectorTree",closeAfterSave:"=?gmfEditfeatureselectorCloseaftersave"},bindToController:true,templateUrl:"gmf/editing/editFeatureSelectorComponent"}};s.directive("gmfEditfeatureselector",s.component_);s.Controller_=function(t,e,n,a){var o=this;this.active=this.active===true;t.$watch(function(){return o.active},this.handleActiveChange_.bind(this));this.map;this.tolerance;this.vectorLayer;this.closeAfterSave;this.scope_=t;this.$timeout_=e;this.gmfThemes_=n;this.gmfTreeManager_=a;var s=function t(e){var n=this;this.$timeout_(function(){if(e){var t=n.editableTreeCtrls;t.length=0;n.gmfTreeManager_.rootCtrl.traverseDepthFirst(function(e){if(e.node.editable){i["a"].assert(e.children.length===0);t.push(e)}})}},0)};this.treeCtrlsWatcherUnregister_=t.$watchCollection(function(){if(a.rootCtrl){return a.rootCtrl.children}},s.bind(this));this.dirty=false;this.editableTreeCtrls=[];this.selectedEditableTreeCtrl=null;t.$watch(function(){return o.selectedEditableTreeCtrl},function(t,e){o.dirty=false;o.state=r["a"].State.IDLE});this.state=r["a"].State.IDLE;t.$watch(function(){return o.state},function(t,e){if(t===r["a"].State.STOP_EDITING_EXECUTE||t===r["a"].State.DEACTIVATE_EXECUTE){o.selectedEditableTreeCtrl=null}if(t===r["a"].State.DEACTIVATE_EXECUTE){o.active=false}});t.$on("$destroy",this.handleDestroy_.bind(this))};s.Controller_.$inject=["$scope","$timeout","gmfThemes","gmfTreeManager"];s.Controller_.prototype.stopEditing=function(){this.state=r["a"].State.STOP_EDITING_PENDING};s.Controller_.prototype.handleActiveChange_=function(t){var e=this;if(!t){if(!this.dirty){this.stopEditing()}else{this.$timeout_(function(){e.active=true;e.stopEditing()})}}};s.Controller_.prototype.handleDestroy_=function(){this.treeCtrlsWatcherUnregister_()};s.controller("GmfEditfeatureselectorController",s.Controller_);e["a"]=s},function(t,e,n){"use strict";var i=n(189);var r=n(122);var a=n(24);var o=n(226);var s=n(3);var l=n(12);var u=angular.module("ngeoMeasurelength",[i["a"].module.name,r["a"].name]);u.directive_=function(t,e,n,i){return{restrict:"A",require:"^^ngeoDrawfeature",link:function r(u,c,f,h){var d=e.getString("Click to start drawing line");var p=e.getString("Click to continue drawing<br>"+"Double-click or click last point to finish");var v=new o["a"](n("ngeoUnitPrefix"),e,{style:new l["c"],startMsg:t("<div translate>"+d+"</div>")(u)[0],continueMsg:t("<div translate>"+p+"</div>")(u)[0],precision:i.has("ngeoMeasurePrecision")?i.get("ngeoMeasurePrecision"):undefined,tolerance:i.has("ngeoSnappingTolerance")?i.get("ngeoSnappingTolerance"):undefined,source:i.has("ngeoSnappingSource")?i.get("ngeoSnappingSource"):undefined});h.registerInteraction(v);h.measureLength=v;s["a"](v,"measureend",h.handleDrawEnd.bind(h,a["a"].LINE_STRING),h);s["a"](v,"change:active",h.handleActiveChange,h)}}};u.directive_.$inject=["$compile","gettextCatalog","$filter","$injector"];u.directive("ngeoMeasurelength",u.directive_);e["a"]=u},function(t,e,n){"use strict";var i=n(189);var r=n(122);var a=n(24);var o=n(238);var s=n(3);var l=n(14);var u=n(32);var c=n(12);var f=angular.module("ngeoMeasureazimut",[i["a"].module.name,r["a"].name]);f.directive_=function(t,e,n,i){return{restrict:"A",require:"^^ngeoDrawfeature",link:function r(f,h,d,p){var v=e.getString("Click to start drawing circle");var g=e.getString("Click to finish");var m=new o["a"](n("ngeoUnitPrefix"),n("number"),{style:new c["c"],startMsg:t("<div translate>"+v+"</div>")(f)[0],continueMsg:t("<div translate>"+g+"</div>")(f)[0],precision:i.has("ngeoMeasurePrecision")?i.get("ngeoMeasurePrecision"):undefined,decimals:i.has("ngeoMeasureDecimals")?i.get("ngeoMeasureDecimals"):undefined});p.registerInteraction(m);p.measureAzimut=m;s["a"](m,"measureend",function(t){var e=t.detail.feature.getGeometry();var n=e.getGeometries()[1];var i=Object(u["b"])(n,64);t.detail.feature=new l["a"](i);var r=o["a"].getAzimut(e.getGeometries()[0]);t.detail.feature.set("azimut",r);p.handleDrawEnd(a["a"].CIRCLE,t)},p);s["a"](m,"change:active",p.handleActiveChange,p)}}};f.directive_.$inject=["$compile","gettextCatalog","$filter","$injector"];f.directive("ngeoMeasureazimut",f.directive_);e["a"]=f},function(t,e,n){"use strict";var i=n(189);var r=n(24);var a=n(283);var o=n(3);var s=n(12);var l=angular.module("ngeoMeasurearea",[i["a"].module.name]);l.directive_=function(t,e,n,i){return{restrict:"A",require:"^^ngeoDrawfeature",link:function l(u,c,f,h){var d=e.getString("Click to start drawing polygon");var p=e.getString("Click to continue drawing<br>"+"Double-click or click starting point to finish");var v=new a["a"](n("ngeoUnitPrefix"),e,{style:new s["c"],startMsg:t("<div translate>"+d+"</div>")(u)[0],continueMsg:t("<div translate>"+p+"</div>")(u)[0],precision:i.has("ngeoMeasurePrecision")?i.get("ngeoMeasurePrecision"):undefined});h.registerInteraction(v);h.measureArea=v;o["a"](v,"measureend",h.handleDrawEnd.bind(h,r["a"].POLYGON),h);o["a"](v,"change:active",h.handleActiveChange,h)}}};l.directive_.$inject=["$compile","gettextCatalog","$filter","$injector"];l.directive("ngeoMeasurearea",l.directive_);e["a"]=l},function(t,e,n){"use strict";var i=n(24);var r=n(3);var a=n(113);var o=angular.module("ngeoDrawtext",[]);o.directive_=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function t(e,n,o,s){var l=new a["a"]({type:"Point"});s.registerInteraction(l);s.drawText=l;r["a"](l,"drawend",s.handleDrawEnd.bind(s,i["a"].TEXT),s);r["a"](l,"change:active",s.handleActiveChange,s)}}};o.directive("ngeoDrawtext",o.directive_);e["a"]=o},function(t,e,n){"use strict";var i=n(24);var r=n(3);var a=n(113);var o=n(32);var s=angular.module("ngeoDrawrectangle",[]);s.directive_=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function t(e,n,s,l){var u=new a["a"]({type:"LineString",geometryFunction:function t(e,n){if(!n){n=new o["a"](null)}var i=e[0];var r=e[1];n.setCoordinates([[i,[i[0],r[1]],r,[r[0],i[1]],i]]);return n},maxPoints:2});l.registerInteraction(u);l.drawRectangle=u;r["a"](u,"drawend",l.handleDrawEnd.bind(l,i["a"].RECTANGLE),l);r["a"](u,"change:active",l.handleActiveChange,l)}}};s.directive("ngeoDrawrectangle",s.directive_);e["a"]=s},function(t,e,n){"use strict";var i=n(24);var r=n(3);var a=n(113);var o=angular.module("ngeoDrawpoint",[]);o.directive_=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function t(e,n,o,s){var l=new a["a"]({type:"Point"});s.registerInteraction(l);s.drawPoint=l;r["a"](l,"drawend",s.handleDrawEnd.bind(s,i["a"].POINT),s);r["a"](l,"change:active",s.handleActiveChange,s)}}};o.directive("ngeoDrawpoint",o.directive_);e["a"]=o},function(t,e,n){"use strict";var i=angular.module("ngeoColorpicker",[]);i.value("ngeoColorpickerTemplateUrl",function(t,e){var n=e["ngeoColorpickerTemplateurl"];return n!==undefined?n:"ngeo/misc/colorpickerComponent"});i.run(["$templateCache",function(t){t.put("ngeo/misc/colorpickerComponent",n(520))}]);i.component_=function(t){return{restrict:"A",scope:{colors:"<?ngeoColorpicker",color:"=?ngeoColorpickerColor"},controller:"NgeoColorpickerController as ctrl",bindToController:true,templateUrl:t}};i.component_.$inject=["ngeoColorpickerTemplateUrl"];i.directive("ngeoColorpicker",i.component_);i.DEFAULT_COLORS=[["#F4EB37","#CDDC39","#62AF44","#009D57","#0BA9CC","#4186F0","#3F5BA9","#7C3592","#A61B4A","#DB4436","#F8971B","#F4B400","#795046"],["#F9F7A6","#E6EEA3","#B7DBAB","#7CCFA9","#93D7E8","#9FC3FF","#A7B5D7","#C6A4CF","#D698AD","#EE9C96","#FAD199","#FFDD5E","#B29189"],["#ffffff","#CCCCCC","#777","#000000"]];i.Controller_=function(t,e,n){this.colors=this.colors||i.DEFAULT_COLORS;this.color};i.Controller_.$inject=["$scope","$element","$attrs"];i.Controller_.prototype.setColor=function(t){this.color=t};i.controller("NgeoColorpickerController",i.Controller_);e["a"]=i},function(t,e,n){"use strict";var i=n(210);function r(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var a=function(){t.$inject=["ngeoDataSourcesHelper"];function t(e){r(this,t);this.ngeoDataSourcesHelper_=e}t.prototype.describe=function t(e){if(e.ogcServerType==="qgisserver"&&e.wfsUrl_&&e.getOGCLayerNames().length==1&&!e.attributes){this.ngeoDataSourcesHelper_.getDataSourceAttributes(e)}};return t}();a.module=angular.module("gmfDatasourceWFSAliases",[i["a"].module.name]);a.module.service("gmfWFSAliases",a);e["a"]=a},function(t,e,n){"use strict";n.d(e,"a",function(){return i});n.d(e,"b",function(){return r});var i="Invalid date";function r(){return this._invalidDate}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});n.d(e,"b",function(){return r});var i={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function r(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];if(e||!n){return e}this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)});return this._longDateFormat[t]}},function(t,e,n){"use strict";n.d(e,"b",function(){return r});n.d(e,"a",function(){return a});var i=n(123);var r={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function a(t,e,n){var r=this._calendar[t]||this._calendar["sameElse"];return Object(i["a"])(r)?r.call(e,n):r}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(41);function r(t,e,n){var r=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),o=0,s;for(s=0;s<r;s++){if(n&&t[s]!==e[s]||!n&&Object(i["a"])(t[s])!==Object(i["a"])(e[s])){o++}}return o+a}},function(t,e,n){var i;
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */var r=r||function(t){"use strict";if(typeof t==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var e=t.document,n=function(){return t.URL||t.webkitURL||t},i=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,a=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},o=/constructor/i.test(t.HTMLElement)||t.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u="application/octet-stream",c=1e3*40,f=function(t){var e=function(){if(typeof t==="string"){n().revokeObjectURL(t)}else{t.remove()}};setTimeout(e,c)},h=function(t,e,n){e=[].concat(e);var i=e.length;while(i--){var r=t["on"+e[i]];if(typeof r==="function"){try{r.call(t,n||t)}catch(t){l(t)}}}},d=function(t){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)){return new Blob([String.fromCharCode(65279),t],{type:t.type})}return t},p=function(e,l,c){if(!c){e=d(e)}var p=this,v=e.type,g=v===u,m,_=function(){h(p,"writestart progress write writeend".split(" "))},y=function(){if((s||g&&o)&&t.FileReader){var i=new FileReader;i.onloadend=function(){var e=s?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;");var n=t.open(e,"_blank");if(!n)t.location.href=e;e=undefined;p.readyState=p.DONE;_()};i.readAsDataURL(e);p.readyState=p.INIT;return}if(!m){m=n().createObjectURL(e)}if(g){t.location.href=m}else{var r=t.open(m,"_blank");if(!r){t.location.href=m}}p.readyState=p.DONE;_();f(m)};p.readyState=p.INIT;if(r){m=n().createObjectURL(e);setTimeout(function(){i.href=m;i.download=l;a(i);_();f(m);p.readyState=p.DONE});return}y()},v=p.prototype,g=function(t,e,n){return new p(t,e||t.name||"download",n)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(t,e,n){e=e||t.name||"download";if(!n){t=d(t)}return navigator.msSaveOrOpenBlob(t,e)}}v.abort=function(){};v.readyState=v.INIT=0;v.WRITING=1;v.DONE=2;v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null;return g}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof t!=="undefined"&&t.exports){t.exports.saveAs=r}else if("function"!=="undefined"&&n(525)!==null&&n(524)!==null){!(i=function(){return r}.call(e,n,e,t),i!==undefined&&(t.exports=i))}},function(t,e,n){"use strict";var i=n(45);var r={};r.setGeometryType=function(t,e){var n=/gml:((Multi)?(Point|Line|Polygon|Curve|Surface|Geometry)).*/;if(n.exec(e)){t.type=i["a"].GEOMETRY;if(/^gml:Point/.exec(e)){t.geomType="Point"}else if(/^gml:LineString|^gml:Curve/.exec(e)){t.geomType="LineString"}else if(/^gml:Polygon|^gml:Surface/.exec(e)){t.geomType="Polygon"}else if(/^gml:MultiPoint/.exec(e)){t.geomType="MultiPoint"}else if(/^gml:MultiLineString|^gml:MultiCurve/.exec(e)){t.geomType="MultiLineString"}else if(/^gml:MultiPolygon|^gml:MultiSurface/.exec(e)){t.geomType="MultiPolygon"}}return!!t.type&&!!t.geomType};e["a"]=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var r=function(){t.$inject=["$http","gmfLayersUrl"];function t(e,n){i(this,t);this.http_=e;this.baseUrl_=n;this.promises_={}}t.prototype.getAttributeValues=function t(e,n){var i=e.id+"_"+n;var r=e.name;if(!this.promises_[i]){var a=this.baseUrl_+"/"+r+"/values/"+n;this.promises_[i]=this.http_.get(a).then(this.handleGetAttributeValues_.bind(this))}return this.promises_[i]};t.prototype.handleGetAttributeValues_=function t(e){var n=e.data;return n.items};return t}();r.module=angular.module("gmfEnumerateAttribute",[]);r.module.service("gmfEnumerateAttribute",r);e["a"]=r},function(t,e,n){"use strict";var i=n(356);var r=n(210);var a=n(45);var o=n(7);var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var u=function(){t.$inject=["$q","gmfEnumerateAttribute","ngeoDataSourcesHelper"];function t(e,n,i){l(this,t);this.q_=e;this.gmfEnumerateAttribute_=n;this.ngeoDataSourcesHelper_=i;this.collection_;this.cache_}t.prototype.getDataSource=function t(e){return this.ngeoDataSourcesHelper_.getDataSource(e)};t.prototype.prepareFiltrableDataSource=function t(e){var n=this;var i=this.q_.defer();this.ngeoDataSourcesHelper_.getDataSourceAttributes(e).then(function(t){var r=e.gmfLayer.metadata||{};var s=r.enumeratedAttributes;if(s&&s.length){var l=[];var u=function t(i){if(o["f"](s,i.name)&&i.type!==a["a"].SELECT&&(!i.choices||!i.choices.length)){l.push(n.gmfEnumerateAttribute_.getAttributeValues(e,i.name).then(function(t){var e=t.map(function(t){return t.value});i.type=a["a"].SELECT;i.choices=e}))}};for(var c=t,f=Array.isArray(c),h=0,c=f?c:c[Symbol.iterator]();;){var d;if(f){if(h>=c.length)break;d=c[h++]}else{h=c.next();if(h.done)break;d=h.value}var p=d;u(p)}return n.q_.all(l).then(i.resolve(e))}else{i.resolve(e)}});return i.promise};s(t,[{key:"collection",get:function t(){return this.ngeoDataSourcesHelper_.collection}}]);return t}();u.module=angular.module("gmfDataSourcesHelper",[r["a"].module.name,i["a"].module.name]);u.module.service("gmfDataSourcesHelper",u);e["a"]=u},function(t,e,n){"use strict";e["a"]={POINT:"point",LINE:"line"}},function(t,e,n){"use strict";var i=n(1);var r=n(14);var a=n(7);var o=n(27);var s=n(84);var l=n(77);var u=n(144);var c=n(5);var f=n(156);var h=n(25);var d=n(8);var p=n(36);var v=n(88);var g=n(83);var m=n(89);var _=n(21);var y=n(32);var b=n(15);var w=n(10);var x=n(33);var S=n(224);var C=n(133);var E=n(106);var O=n(35);var T=n(12);var M=n(140);var I=n(0);var R=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var N=void 0;var A=null;function L(){return A}var P=void 0;var D=void 0;var j=void 0;var k=void 0;var F=void 0;var $=void 0;var G=null;function U(){return G}var Y=void 0;var V=null;function H(){return V}var z=void 0;var B=null;function W(){return B}var q=null;function X(){return q}var K=null;function Z(){return K}function Q(){N=[255,255,255,1];A=new x["a"]({color:N});P=[20,2];D=C["a"].PIXELS;j=C["a"].PIXELS;k=[64,64];F="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png";$=.5;G=new S["a"]({anchor:P,anchorOrigin:E["a"].BOTTOM_LEFT,anchorXUnits:D,anchorYUnits:j,crossOrigin:"anonymous",rotation:0,scale:$,size:k,src:F});Y="NO_IMAGE";V=new O["a"]({color:N,width:1});z=new O["a"]({color:[51,51,51,1],width:2});B=new M["a"]({font:"bold 16px Helvetica",fill:A,stroke:z,scale:.8});q=new T["c"]({fill:A,image:G,text:B,stroke:V,zIndex:0});K=[q]}var J=function t(e){var n=e?e:{};u["a"].call(this);if(!K){Q()}this.defaultDataProjection=Object(w["h"])("EPSG:4326");this.defaultStyle_=n.defaultStyle?n.defaultStyle:K;this.extractStyles_=n.extractStyles!==undefined?n.extractStyles:true;this.writeStyles_=n.writeStyles!==undefined?n.writeStyles:true;this.sharedStyles_={};this.showPointNames_=n.showPointNames!==undefined?n.showPointNames:true};Object(i["d"])(J,u["a"]);var tt=["http://www.google.com/kml/ext/2.2"];var et=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"];var nt="http://www.opengis.net/kml/2.2 "+"https://developers.google.com/kml/schema/kml22gx.xsd";var it={fraction:C["a"].FRACTION,pixels:C["a"].PIXELS,insetPixels:C["a"].PIXELS};function rt(t,e){var n=null;var i=[0,0];var r="start";if(t.getImage()){var a=t.getImage().getImageSize();if(a===null){a=k}if(a.length==2){var o=t.getImage().getScale();i[0]=o*a[0]/2;i[1]=-o*a[1]/2;r="left"}}if(t.getText()!==null){var s=t.getText();n=s.clone();n.setFont(s.getFont()||B.getFont());n.setScale(s.getScale()||B.getScale());n.setFill(s.getFill()||B.getFill());n.setStroke(s.getStroke()||z)}else{n=B.clone()}n.setText(e);n.setOffsetX(i[0]);n.setOffsetY(i[1]);n.setTextAlign(r);var l=new T["c"]({text:n});return l}function at(t,e,n,i,r){return function(a,o){var s=r;var l=void 0;var u="";if(s){var c=a.getGeometry();if(c){s=c.getType()===d["a"].POINT}}if(s){u=a.get("name");s=s&&u}if(t){if(s){l=rt(t[0],u);return t.concat(l)}return t}if(e){var f=ot(e,n,i);if(s){l=rt(f[0],u);return f.concat(l)}return f}if(s){l=rt(n[0],u);return n.concat(l)}return n}}function ot(t,e,n){if(Array.isArray(t)){return t}else if(typeof t==="string"){if(!(t in n)&&"#"+t in n){t="#"+t}return ot(n[t],e,n)}else{return e}}function st(t){var e=Object(I["e"])(t,false);var n=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(n){var i=n[1];return[parseInt(i.substr(6,2),16),parseInt(i.substr(4,2),16),parseInt(i.substr(2,2),16),parseInt(i.substr(0,2),16)/255]}else{return undefined}}function lt(t){var e=Object(I["e"])(t,false);var n=[];var i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;var r=void 0;while(r=i.exec(e)){var a=parseFloat(r[1]);var o=parseFloat(r[2]);var s=r[3]?parseFloat(r[3]):0;n.push(a,o,s);e=e.substr(r[0].length)}if(e!==""){return undefined}return n}function ut(t){var e=Object(I["e"])(t,false).trim();var n=t.baseURI;if(!n||n=="about:blank"){n=window.location.href}if(n){var i=new URL(e,n);return i.href}else{return e}}function ct(t){var e=t.getAttribute("xunits");var n=t.getAttribute("yunits");var i=void 0;if(e!=="insetPixels"){if(n!=="insetPixels"){i=E["a"].BOTTOM_LEFT}else{i=E["a"].TOP_LEFT}}else{if(n!=="insetPixels"){i=E["a"].BOTTOM_RIGHT}else{i=E["a"].TOP_RIGHT}}return{x:parseFloat(t.getAttribute("x")),xunits:it[e],y:parseFloat(t.getAttribute("y")),yunits:it[n],origin:i}}function ft(t){return Object(c["d"])(t)}var ht=Object(I["r"])(et,{Pair:Zt});function dt(t,e){return Object(I["u"])(undefined,ht,t,e)}var pt=Object(I["r"])(et,{Icon:Object(I["n"])(Rt),heading:Object(I["n"])(c["d"]),hotSpot:Object(I["n"])(ct),scale:Object(I["n"])(ft)});function vt(t,e){var n=Object(I["u"])({},pt,t,e);if(!n){return}var i=e[e.length-1];var r="Icon"in n?n["Icon"]:{};var a=!("Icon"in n)||Object.keys(r).length>0;var o=void 0;var s=r["href"];if(s){o=s}else if(a){o=F}var l=void 0,u=void 0,c=void 0;var f=E["a"].BOTTOM_LEFT;var h=n["hotSpot"];if(h){l=[h.x,h.y];u=h.xunits;c=h.yunits;f=h.origin}else if(o===F){l=P;u=D;c=j}else if(/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(o)){l=[.5,0];u=C["a"].FRACTION;c=C["a"].FRACTION}var d=void 0;var p=r["x"];var v=r["y"];if(p!==undefined&&v!==undefined){d=[p,v]}var g=void 0;var m=r["w"];var _=r["h"];if(m!==undefined&&_!==undefined){g=[m,_]}var y=void 0;var w=n["heading"];if(w!==undefined){y=Object(b["i"])(w)}var x=n["scale"];if(a){if(o==F){g=k;if(x===undefined){x=$}}var O=new S["a"]({anchor:l,anchorOrigin:f,anchorXUnits:u,anchorYUnits:c,crossOrigin:"anonymous",offset:d,offsetOrigin:E["a"].BOTTOM_LEFT,rotation:y,scale:x,size:g,src:o});i["imageStyle"]=O}else{i["imageStyle"]=Y}}var gt=Object(I["r"])(et,{color:Object(I["n"])(st),scale:Object(I["n"])(ft)});function mt(t,e){var n=Object(I["u"])({},gt,t,e);if(!n){return}var i=e[e.length-1];var r=new M["a"]({fill:new x["a"]({color:"color"in n?n["color"]:N}),scale:n["scale"]});i["textStyle"]=r}var _t=Object(I["r"])(et,{color:Object(I["n"])(st),width:Object(I["n"])(c["d"])});function yt(t,e){var n=Object(I["u"])({},_t,t,e);if(!n){return}var i=e[e.length-1];var r=new O["a"]({color:"color"in n?n["color"]:N,width:"width"in n?n["width"]:1});i["strokeStyle"]=r}var bt=Object(I["r"])(et,{color:Object(I["n"])(st),fill:Object(I["n"])(c["a"]),outline:Object(I["n"])(c["a"])});function wt(t,e){var n=Object(I["u"])({},bt,t,e);if(!n){return}var i=e[e.length-1];var r=new x["a"]({color:"color"in n?n["color"]:N});i["fillStyle"]=r;var a=n["fill"];if(a!==undefined){i["fill"]=a}var o=n["outline"];if(o!==undefined){i["outline"]=o}}var xt=Object(I["r"])(et,{coordinates:Object(I["o"])(lt)});function St(t,e){return Object(I["u"])(null,xt,t,e)}function Ct(t,e){var n=e[e.length-1];var i=n.flatCoordinates;var r=Object(I["e"])(t,false);var a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i;var o=a.exec(r);if(o){var s=parseFloat(o[1]);var l=parseFloat(o[2]);var u=parseFloat(o[3]);i.push(s,l,u,0)}else{i.push(0,0,0,0)}}var Et=Object(I["r"])(tt,{Track:Object(I["j"])(Mt)});function Ot(t,e){var n=Object(I["u"])([],Et,t,e);if(!n){return undefined}var i=new v["a"](null);i.setLineStrings(n);return i}var Tt=Object(I["r"])(et,{when:de},Object(I["r"])(tt,{coord:Ct}));function Mt(t,e){var n=Object(I["u"])({flatCoordinates:[],whens:[]},Tt,t,e);if(!n){return undefined}var i=n.flatCoordinates;var r=n.whens;for(var a=0,o=Math.min(i.length,r.length);a<o;++a){i[4*a+3]=r[a]}var s=new p["a"](null);s.setFlatCoordinates(h["a"].XYZM,i);return s}var It=Object(I["r"])(et,{href:Object(I["n"])(ut)},Object(I["r"])(tt,{x:Object(I["n"])(c["d"]),y:Object(I["n"])(c["d"]),w:Object(I["n"])(c["d"]),h:Object(I["n"])(c["d"])}));function Rt(t,e){var n=Object(I["u"])({},It,t,e);if(n){return n}else{return null}}var Nt=Object(I["r"])(et,{coordinates:Object(I["o"])(lt)});function At(t,e){return Object(I["u"])(null,Nt,t,e)}var Lt=Object(I["r"])(et,{extrude:Object(I["n"])(c["a"]),tessellate:Object(I["n"])(c["a"]),altitudeMode:Object(I["n"])(c["h"])});function Pt(t,e){var n=Object(I["u"])({},Lt,t,e);var i=At(t,e);if(i){var r=new p["a"](null);r.setFlatCoordinates(h["a"].XYZ,i);r.setProperties(n);return r}else{return undefined}}function Dt(t,e){var n=Object(I["u"])({},Lt,t,e);var i=At(t,e);if(i){var r=new y["a"](null);r.setFlatCoordinates(h["a"].XYZ,i,[i.length]);r.setProperties(n);return r}else{return undefined}}var jt=Object(I["r"])(et,{LineString:Object(I["j"])(Pt),LinearRing:Object(I["j"])(Dt),MultiGeometry:Object(I["j"])(kt),Point:Object(I["j"])(Ft),Polygon:Object(I["j"])(Gt)});function kt(t,e){var n=Object(I["u"])([],jt,t,e);if(!n){return null}if(n.length===0){return new f["a"](n)}var i=void 0;var r=true;var s=n[0].getType();var l=void 0;for(var u=1,c=n.length;u<c;++u){l=n[u];if(l.getType()!=s){r=false;break}}if(r){var h=void 0;var p=void 0;if(s==d["a"].POINT){var _=n[0];h=_.getLayout();p=_.getFlatCoordinates();for(var y=1,b=n.length;y<b;++y){l=n[y];Object(a["c"])(p,l.getFlatCoordinates())}i=new g["a"](null);i.setFlatCoordinates(h,p);Vt(i,n)}else if(s==d["a"].LINE_STRING){i=new v["a"](null);i.setLineStrings(n);Vt(i,n)}else if(s==d["a"].POLYGON){i=new m["a"](null);i.setPolygons(n);Vt(i,n)}else if(s==d["a"].GEOMETRY_COLLECTION){i=new f["a"](n)}else{Object(o["a"])(false,37)}}else{i=new f["a"](n)}return i}function Ft(t,e){var n=Object(I["u"])({},Lt,t,e);var i=At(t,e);if(i){var r=new _["a"](null);r.setFlatCoordinates(h["a"].XYZ,i);r.setProperties(n);return r}else{return undefined}}var $t=Object(I["r"])(et,{innerBoundaryIs:se,outerBoundaryIs:ue});function Gt(t,e){var n=Object(I["u"])({},Lt,t,e);var i=Object(I["u"])([null],$t,t,e);if(i&&i[0]){var r=new y["a"](null);var o=i[0];var s=[o.length];for(var l=1,u=i.length;l<u;++l){Object(a["c"])(o,i[l]);s.push(o.length)}r.setFlatCoordinates(h["a"].XYZ,o,s);r.setProperties(n);return r}else{return undefined}}var Ut=Object(I["r"])(et,{IconStyle:vt,LabelStyle:mt,LineStyle:yt,PolyStyle:wt});function Yt(t,e){var n=Object(I["u"])({},Ut,t,e);if(!n){return null}var i="fillStyle"in n?n["fillStyle"]:A;var r=n["fill"];if(r!==undefined&&!r){i=null}var a="imageStyle"in n?n["imageStyle"]:G;if(a==Y){a=undefined}var o="textStyle"in n?n["textStyle"]:B;var s="strokeStyle"in n?n["strokeStyle"]:V;var l=n["outline"];if(l!==undefined&&!l){s=null}return[new T["c"]({fill:i,image:a,stroke:s,text:o,zIndex:undefined})]}function Vt(t,e){var n=e.length;var i=new Array(e.length);var r=new Array(e.length);var a=new Array(e.length);var o=void 0,s=void 0,l=void 0;o=s=l=false;for(var u=0;u<n;++u){var c=e[u];i[u]=c.get("extrude");r[u]=c.get("tessellate");a[u]=c.get("altitudeMode");o=o||i[u]!==undefined;s=s||r[u]!==undefined;l=l||a[u]}if(o){t.set("extrude",i)}if(s){t.set("tessellate",r)}if(l){t.set("altitudeMode",a)}}var Ht=Object(I["r"])(et,{displayName:Object(I["n"])(c["h"]),value:Object(I["n"])(c["h"])});function zt(t,e){var n=t.getAttribute("name");Object(I["t"])(Ht,t,e);var i=e[e.length-1];if(n!==null){i[n]=i.value}else if(i.displayName!==null){i[i.displayName]=i.value}delete i["value"]}var Bt=Object(I["r"])(et,{Data:zt,SchemaData:te});function Wt(t,e){Object(I["t"])(Bt,t,e)}var qt=Object(I["r"])(et,{LatLonAltBox:ie,Lod:ae});function Xt(t,e){Object(I["t"])(qt,t,e)}var Kt=Object(I["r"])(et,{Style:Object(I["n"])(Yt),key:Object(I["n"])(c["h"]),styleUrl:Object(I["n"])(ut)});function Zt(t,e){var n=Object(I["u"])({},Kt,t,e);if(!n){return}var i=n["key"];if(i&&i=="normal"){var r=n["styleUrl"];if(r){e[e.length-1]=r}var a=n["Style"];if(a){e[e.length-1]=a}}}function Qt(t,e){var n=dt(t,e);if(!n){return}var i=e[e.length-1];if(Array.isArray(n)){i["Style"]=n}else if(typeof n==="string"){i["styleUrl"]=n}else{Object(o["a"])(false,38)}}var Jt=Object(I["r"])(et,{SimpleData:ee});function te(t,e){Object(I["t"])(Jt,t,e)}function ee(t,e){var n=t.getAttribute("name");if(n!==null){var i=Object(c["h"])(t);var r=e[e.length-1];r[n]=i}}var ne=Object(I["r"])(et,{altitudeMode:Object(I["n"])(c["h"]),minAltitude:Object(I["n"])(c["d"]),maxAltitude:Object(I["n"])(c["d"]),north:Object(I["n"])(c["d"]),south:Object(I["n"])(c["d"]),east:Object(I["n"])(c["d"]),west:Object(I["n"])(c["d"])});function ie(t,e){var n=Object(I["u"])({},ne,t,e);if(!n){return}var i=e[e.length-1];var r=[parseFloat(n["west"]),parseFloat(n["south"]),parseFloat(n["east"]),parseFloat(n["north"])];i["extent"]=r;i["altitudeMode"]=n["altitudeMode"];i["minAltitude"]=parseFloat(n["minAltitude"]);i["maxAltitude"]=parseFloat(n["maxAltitude"])}var re=Object(I["r"])(et,{minLodPixels:Object(I["n"])(c["d"]),maxLodPixels:Object(I["n"])(c["d"]),minFadeExtent:Object(I["n"])(c["d"]),maxFadeExtent:Object(I["n"])(c["d"])});function ae(t,e){var n=Object(I["u"])({},re,t,e);if(!n){return}var i=e[e.length-1];i["minLodPixels"]=parseFloat(n["minLodPixels"]);i["maxLodPixels"]=parseFloat(n["maxLodPixels"]);i["minFadeExtent"]=parseFloat(n["minFadeExtent"]);i["maxFadeExtent"]=parseFloat(n["maxFadeExtent"])}var oe=Object(I["r"])(et,{LinearRing:Object(I["o"])(St)});function se(t,e){var n=Object(I["u"])(undefined,oe,t,e);if(n){var i=e[e.length-1];i.push(n)}}var le=Object(I["r"])(et,{LinearRing:Object(I["o"])(St)});function ue(t,e){var n=Object(I["u"])(undefined,le,t,e);if(n){var i=e[e.length-1];i[0]=n}}var ce=Object(I["r"])(et,{ExtendedData:Wt,Region:Xt,Link:he,address:Object(I["n"])(c["h"]),description:Object(I["n"])(c["h"]),name:Object(I["n"])(c["h"]),open:Object(I["n"])(c["a"]),phoneNumber:Object(I["n"])(c["h"]),visibility:Object(I["n"])(c["a"])});var fe=Object(I["r"])(et,{href:Object(I["n"])(ut)});function he(t,e){Object(I["t"])(fe,t,e)}function de(t,e){var n=e[e.length-1];var i=n.whens;var r=Object(I["e"])(t,false);var a=Date.parse(r);i.push(isNaN(a)?0:a)}var pe=Object(I["r"])(et,{ExtendedData:Wt,Region:Xt,MultiGeometry:Object(I["n"])(kt,"geometry"),LineString:Object(I["n"])(Pt,"geometry"),LinearRing:Object(I["n"])(Dt,"geometry"),Point:Object(I["n"])(Ft,"geometry"),Polygon:Object(I["n"])(Gt,"geometry"),Style:Object(I["n"])(Yt),StyleMap:Qt,address:Object(I["n"])(c["h"]),description:Object(I["n"])(c["h"]),name:Object(I["n"])(c["h"]),open:Object(I["n"])(c["a"]),phoneNumber:Object(I["n"])(c["h"]),styleUrl:Object(I["n"])(ut),visibility:Object(I["n"])(c["a"])},Object(I["r"])(tt,{MultiTrack:Object(I["n"])(Ot,"geometry"),Track:Object(I["n"])(Mt,"geometry")}));J.prototype.readDocumentOrFolder_=function(t,e){var n=Object(I["r"])(et,{Document:Object(I["i"])(this.readDocumentOrFolder_,this),Folder:Object(I["i"])(this.readDocumentOrFolder_,this),Placemark:Object(I["j"])(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)});var i=Object(I["u"])([],n,t,e,this);if(i){return i}else{return undefined}};J.prototype.readPlacemark_=function(t,e){var n=Object(I["u"])({geometry:null},pe,t,e);if(!n){return undefined}var i=new r["a"];var a=t.getAttribute("id");if(a!==null){i.setId(a)}var o=e[0];var s=n["geometry"];if(s){Object(l["b"])(s,false,o)}i.setGeometry(s);delete n["geometry"];if(this.extractStyles_){var u=n["Style"];var c=n["styleUrl"];var f=at(u,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(f)}delete n["Style"];i.setProperties(n);return i};J.prototype.readSharedStyle_=function(t,e){var n=t.getAttribute("id");if(n!==null){var i=Yt(t,e);if(i){var r=void 0;var a=t.baseURI;if(!a||a=="about:blank"){a=window.location.href}if(a){var o=new URL("#"+n,a);r=o.href}else{r="#"+n}this.sharedStyles_[r]=i}}};J.prototype.readSharedStyleMap_=function(t,e){var n=t.getAttribute("id");if(n===null){return}var i=dt(t,e);if(!i){return}var r=void 0;var a=t.baseURI;if(!a||a=="about:blank"){a=window.location.href}if(a){var o=new URL("#"+n,a);r=o.href}else{r="#"+n}this.sharedStyles_[r]=i};J.prototype.readFeature;J.prototype.readFeatureFromNode=function(t,e){if(!Object(a["f"])(et,t.namespaceURI)){return null}var n=this.readPlacemark_(t,[this.getReadOptions(t,e)]);if(n){return n}else{return null}};J.prototype.readFeatures;J.prototype.readFeaturesFromNode=function(t,e){if(!Object(a["f"])(et,t.namespaceURI)){return[]}var n=void 0;var i=t.localName;if(i=="Document"||i=="Folder"){n=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]);if(n){return n}else{return[]}}else if(i=="Placemark"){var r=this.readPlacemark_(t,[this.getReadOptions(t,e)]);if(r){return[r]}else{return[]}}else if(i=="kml"){n=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var s=this.readFeaturesFromNode(o,e);if(s){Object(a["c"])(n,s)}}return n}else{return[]}};J.prototype.readName=function(t){if(Object(I["g"])(t)){return this.readNameFromDocument(t)}else if(Object(I["h"])(t)){return this.readNameFromNode(t)}else if(typeof t==="string"){var e=Object(I["s"])(t);return this.readNameFromDocument(e)}else{return undefined}};J.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling){if(e.nodeType==Node.ELEMENT_NODE){var n=this.readNameFromNode(e);if(n){return n}}}return undefined};J.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling){if(Object(a["f"])(et,e.namespaceURI)&&e.localName=="name"){return Object(c["h"])(e)}}for(var n=t.firstElementChild;n;n=n.nextElementSibling){var i=n.localName;if(Object(a["f"])(et,n.namespaceURI)&&(i=="Document"||i=="Folder"||i=="Placemark"||i=="kml")){var r=this.readNameFromNode(n);if(r){return r}}}return undefined};J.prototype.readNetworkLinks=function(t){var e=[];if(Object(I["g"])(t)){Object(a["c"])(e,this.readNetworkLinksFromDocument(t))}else if(Object(I["h"])(t)){Object(a["c"])(e,this.readNetworkLinksFromNode(t))}else if(typeof t==="string"){var n=Object(I["s"])(t);Object(a["c"])(e,this.readNetworkLinksFromDocument(n))}return e};J.prototype.readNetworkLinksFromDocument=function(t){var e=[];for(var n=t.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){Object(a["c"])(e,this.readNetworkLinksFromNode(n))}}return e};J.prototype.readNetworkLinksFromNode=function(t){var e=[];for(var n=t.firstElementChild;n;n=n.nextElementSibling){if(Object(a["f"])(et,n.namespaceURI)&&n.localName=="NetworkLink"){var i=Object(I["u"])({},ce,n,[]);e.push(i)}}for(var r=t.firstElementChild;r;r=r.nextElementSibling){var o=r.localName;if(Object(a["f"])(et,r.namespaceURI)&&(o=="Document"||o=="Folder"||o=="kml")){Object(a["c"])(e,this.readNetworkLinksFromNode(r))}}return e};J.prototype.readRegion=function(t){var e=[];if(Object(I["g"])(t)){Object(a["c"])(e,this.readRegionFromDocument(t))}else if(Object(I["h"])(t)){Object(a["c"])(e,this.readRegionFromNode(t))}else if(typeof t==="string"){var n=Object(I["s"])(t);Object(a["c"])(e,this.readRegionFromDocument(n))}return e};J.prototype.readRegionFromDocument=function(t){var e=[];for(var n=t.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){Object(a["c"])(e,this.readRegionFromNode(n))}}return e};J.prototype.readRegionFromNode=function(t){var e=[];for(var n=t.firstElementChild;n;n=n.nextElementSibling){if(Object(a["f"])(et,n.namespaceURI)&&n.localName=="Region"){var i=Object(I["u"])({},qt,n,[]);e.push(i)}}for(var r=t.firstElementChild;r;r=r.nextElementSibling){var o=r.localName;if(Object(a["f"])(et,r.namespaceURI)&&(o=="Document"||o=="Folder"||o=="kml")){Object(a["c"])(e,this.readRegionFromNode(r))}}return e};J.prototype.readProjection;function ve(t,e){var n=Object(s["a"])(e);var i=n.length==4?n[3]:1;var r=[i*255,n[2],n[1],n[0]];for(var a=0;a<4;++a){var o=parseInt(r[a],10).toString(16);r[a]=o.length==1?"0"+o:o}Object(c["n"])(t,r.join(""))}function ge(t,e,n){var i=n[n.length-1];var r=i["layout"];var a=i["stride"];var s=void 0;if(r==h["a"].XY||r==h["a"].XYM){s=2}else if(r==h["a"].XYZ||r==h["a"].XYZM){s=3}else{Object(o["a"])(false,34)}var l=e.length;var u="";if(l>0){u+=e[0];for(var f=1;f<s;++f){u+=","+e[f]}for(var d=a;d<l;d+=a){u+=" "+e[d];for(var p=1;p<s;++p){u+=","+e[d+p]}}}Object(c["n"])(t,u)}var me=Object(I["r"])(et,{Data:Object(I["l"])(_e),value:Object(I["l"])(be),displayName:Object(I["l"])(ye)});function _e(t,e,n){t.setAttribute("name",e.name);var i={node:t};var r=e.value;if((typeof r==="undefined"?"undefined":R(r))=="object"){if(r!==null&&r.displayName){Object(I["v"])(i,me,I["b"],[r.displayName],n,["displayName"])}if(r!==null&&r.value){Object(I["v"])(i,me,I["b"],[r.value],n,["value"])}}else{Object(I["v"])(i,me,I["b"],[r],n,["value"])}}function ye(t,e){Object(c["j"])(t,e)}function be(t,e){Object(c["n"])(t,e)}var we=Object(I["r"])(et,{Placemark:Object(I["l"])(Qe)});var xe=function t(e,n,i){var r=n[n.length-1].node;return Object(I["d"])(r.namespaceURI,"Placemark")};function Se(t,e,n){var i={node:t};Object(I["v"])(i,we,xe,e,n,undefined,this)}var Ce=Object(I["q"])("Data");function Ee(t,e,n){var i={node:t};var r=e.names;var a=e.values;var o=r.length;for(var s=0;s<o;s++){Object(I["v"])(i,me,Ce,[{name:r[s],value:a[s]}],n)}}var Oe=Object(I["r"])(et,["href"],Object(I["r"])(tt,["x","y","w","h"]));var Te=Object(I["r"])(et,{href:Object(I["l"])(c["n"])},Object(I["r"])(tt,{x:Object(I["l"])(c["l"]),y:Object(I["l"])(c["l"]),w:Object(I["l"])(c["l"]),h:Object(I["l"])(c["l"])}));var Me=function t(e,n,i){return Object(I["d"])(tt[0],"gx:"+i)};function Ie(t,e,n){var i={node:t};var r=n[n.length-1].node;var a=Oe[r.namespaceURI];var o=Object(I["p"])(e,a);Object(I["v"])(i,Te,I["b"],o,n,a);a=Oe[tt[0]];o=Object(I["p"])(e,a);Object(I["v"])(i,Te,Me,o,n,a)}var Re=Object(I["r"])(et,["scale","heading","Icon","hotSpot"]);var Ne=Object(I["r"])(et,{Icon:Object(I["l"])(Ie),heading:Object(I["l"])(c["l"]),hotSpot:Object(I["l"])(pn),scale:Object(I["l"])(cn)});function Ae(t,e,n){var i={node:t};var r={};var a=e.getSrc();var o=e.getSize();var s=e.getImageSize();var l={href:a};if(o){l["w"]=o[0];l["h"]=o[1];var u=e.getAnchor();var c=e.getOrigin();if(c&&s&&c[0]!==0&&c[1]!==o[1]){l["x"]=c[0];l["y"]=s[1]-(c[1]+o[1])}if(u&&(u[0]!==o[0]/2||u[1]!==o[1]/2)){var f={x:u[0],xunits:C["a"].PIXELS,y:o[1]-u[1],yunits:C["a"].PIXELS};r["hotSpot"]=f}}r["Icon"]=l;var h=e.getScale();if(h!==1){r["scale"]=h}var d=e.getRotation();if(d!==0){r["heading"]=d}var p=n[n.length-1].node;var v=Re[p.namespaceURI];var g=Object(I["p"])(r,v);Object(I["v"])(i,Ne,I["b"],g,n,v)}var Le=Object(I["r"])(et,["color","scale"]);var Pe=Object(I["r"])(et,{color:Object(I["l"])(ve),scale:Object(I["l"])(cn)});function De(t,e,n){var i={node:t};var r={};var a=e.getFill();if(a){r["color"]=a.getColor()}var o=e.getScale();if(o&&o!==1){r["scale"]=o}var s=n[n.length-1].node;var l=Le[s.namespaceURI];var u=Object(I["p"])(r,l);Object(I["v"])(i,Pe,I["b"],u,n,l)}var je=Object(I["r"])(et,["color","width"]);var ke=Object(I["r"])(et,{color:Object(I["l"])(ve),width:Object(I["l"])(c["l"])});function Fe(t,e,n){var i={node:t};var r={color:e.getColor(),width:e.getWidth()};var a=n[n.length-1].node;var o=je[a.namespaceURI];var s=Object(I["p"])(r,o);Object(I["v"])(i,ke,I["b"],s,n,o)}var $e={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"};var Ge=function t(e,n,i){if(e){var r=n[n.length-1].node;return Object(I["d"])(r.namespaceURI,$e[e.getType()])}};var Ue=Object(I["q"])("Point");var Ye=Object(I["q"])("LineString");var Ve=Object(I["q"])("LinearRing");var He=Object(I["q"])("Polygon");var ze=Object(I["r"])(et,{LineString:Object(I["l"])(en),Point:Object(I["l"])(en),Polygon:Object(I["l"])(on),GeometryCollection:Object(I["l"])(Be)});function Be(t,e,n){var i={node:t};var r=e.getType();var a=void 0;var s=void 0;if(r==d["a"].GEOMETRY_COLLECTION){a=e.getGeometries();s=Ge}else if(r==d["a"].MULTI_POINT){a=e.getPoints();s=Ue}else if(r==d["a"].MULTI_LINE_STRING){a=e.getLineStrings();s=Ye}else if(r==d["a"].MULTI_POLYGON){a=e.getPolygons();s=He}else{Object(o["a"])(false,39)}Object(I["v"])(i,ze,s,a,n)}var We=Object(I["r"])(et,{LinearRing:Object(I["l"])(en)});function qe(t,e,n){var i={node:t};Object(I["v"])(i,We,Ve,[e],n)}var Xe=Object(I["r"])(et,{ExtendedData:Object(I["l"])(Ee),MultiGeometry:Object(I["l"])(Be),LineString:Object(I["l"])(en),LinearRing:Object(I["l"])(en),Point:Object(I["l"])(en),Polygon:Object(I["l"])(on),Style:Object(I["l"])(dn),address:Object(I["l"])(c["n"]),description:Object(I["l"])(c["n"]),name:Object(I["l"])(c["n"]),open:Object(I["l"])(c["i"]),phoneNumber:Object(I["l"])(c["n"]),styleUrl:Object(I["l"])(c["n"]),visibility:Object(I["l"])(c["i"])});var Ke=Object(I["r"])(et,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]);var Ze=Object(I["q"])("ExtendedData");function Qe(t,e,n){var i={node:t};if(e.getId()){t.setAttribute("id",e.getId())}var r=e.getProperties();var a={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};a[e.getGeometryName()]=1;var o=Object.keys(r||{}).sort().filter(function(t){return!a[t]});if(o.length>0){var s=Object(I["p"])(r,o);var u={names:o,values:s};Object(I["v"])(i,Xe,Ze,[u],n)}var c=e.getStyleFunction();if(c){var f=c(e,0);if(f){var h=Array.isArray(f)?f[0]:f;if(this.writeStyles_){r["Style"]=h}var d=h.getText();if(d){r["name"]=d.getText()}}}var p=n[n.length-1].node;var v=Ke[p.namespaceURI];var g=Object(I["p"])(r,v);Object(I["v"])(i,Xe,I["b"],g,n,v);var m=n[0];var _=e.getGeometry();if(_){_=Object(l["b"])(_,true,m)}Object(I["v"])(i,Xe,Ge,[_],n)}var Je=Object(I["r"])(et,["extrude","tessellate","altitudeMode","coordinates"]);var tn=Object(I["r"])(et,{extrude:Object(I["l"])(c["i"]),tessellate:Object(I["l"])(c["i"]),altitudeMode:Object(I["l"])(c["n"]),coordinates:Object(I["l"])(ge)});function en(t,e,n){var i=e.getFlatCoordinates();var r={node:t};r["layout"]=e.getLayout();r["stride"]=e.getStride();var a=e.getProperties();a.coordinates=i;var o=n[n.length-1].node;var s=Je[o.namespaceURI];var l=Object(I["p"])(a,s);Object(I["v"])(r,tn,I["b"],l,n,s)}var nn=Object(I["r"])(et,{outerBoundaryIs:Object(I["l"])(qe),innerBoundaryIs:Object(I["l"])(qe)});var rn=Object(I["q"])("innerBoundaryIs");var an=Object(I["q"])("outerBoundaryIs");function on(t,e,n){var i=e.getLinearRings();var r=i.shift();var a={node:t};Object(I["v"])(a,nn,rn,i,n);Object(I["v"])(a,nn,an,[r],n)}var sn=Object(I["r"])(et,{color:Object(I["l"])(ve)});var ln=Object(I["q"])("color");function un(t,e,n){var i={node:t};Object(I["v"])(i,sn,ln,[e.getColor()],n)}function cn(t,e){Object(c["l"])(t,Math.round(e*1e6)/1e6)}var fn=Object(I["r"])(et,["IconStyle","LabelStyle","LineStyle","PolyStyle"]);var hn=Object(I["r"])(et,{IconStyle:Object(I["l"])(Ae),LabelStyle:Object(I["l"])(De),LineStyle:Object(I["l"])(Fe),PolyStyle:Object(I["l"])(un)});function dn(t,e,n){var i={node:t};var r={};var a=e.getFill();var o=e.getStroke();var s=e.getImage();var l=e.getText();if(s instanceof S["a"]){r["IconStyle"]=s}if(l){r["LabelStyle"]=l}if(o){r["LineStyle"]=o}if(a){r["PolyStyle"]=a}var u=n[n.length-1].node;var c=fn[u.namespaceURI];var f=Object(I["p"])(r,c);Object(I["v"])(i,hn,I["b"],f,n,c)}function pn(t,e){t.setAttribute("x",e.x);t.setAttribute("y",e.y);t.setAttribute("xunits",e.xunits);t.setAttribute("yunits",e.yunits)}var vn=Object(I["r"])(et,["Document","Placemark"]);var gn=Object(I["r"])(et,{Document:Object(I["l"])(Se),Placemark:Object(I["l"])(Qe)});J.prototype.writeFeatures;J.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var n=Object(I["d"])(et[4],"kml");var i="http://www.w3.org/2000/xmlns/";n.setAttributeNS(i,"xmlns:gx",tt[0]);n.setAttributeNS(i,"xmlns:xsi",I["c"]);n.setAttributeNS(I["c"],"xsi:schemaLocation",nt);var r={node:n};var a={};if(t.length>1){a["Document"]=t}else if(t.length==1){a["Placemark"]=t[0]}var o=vn[n.namespaceURI];var s=Object(I["p"])(a,o);Object(I["v"])(r,gn,I["b"],s,[e],o,this);return n};e["a"]=J},function(t,e,n){"use strict";var i=n(1);var r=n(14);var a=n(7);var o=n(77);var s=n(144);var l=n(5);var u=n(25);var c=n(36);var f=n(88);var h=n(21);var d=n(10);var p=n(0);var v=function t(e){var n=e?e:{};s["a"].call(this);this.defaultDataProjection=Object(d["h"])("EPSG:4326");this.readExtensions_=n.readExtensions};Object(i["d"])(v,s["a"]);var g=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];var m="http://www.topografix.com/GPX/1/1 "+"http://www.topografix.com/GPX/1/1/gpx.xsd";var _={rte:q,trk:X,wpt:K};var y=Object(p["r"])(g,{rte:Object(p["j"])(q),trk:Object(p["j"])(X),wpt:Object(p["j"])(K)});var b=Object(p["r"])(g,{text:Object(p["n"])(l["h"],"linkText"),type:Object(p["n"])(l["h"],"linkType")});var w=Object(p["r"])(g,{name:Object(p["n"])(l["h"]),cmt:Object(p["n"])(l["h"]),desc:Object(p["n"])(l["h"]),src:Object(p["n"])(l["h"]),link:V,number:Object(p["n"])(l["f"]),extensions:H,type:Object(p["n"])(l["h"]),rtept:z});var x=Object(p["r"])(g,{ele:Object(p["n"])(l["d"]),time:Object(p["n"])(l["c"])});var S=Object(p["r"])(g,{name:Object(p["n"])(l["h"]),cmt:Object(p["n"])(l["h"]),desc:Object(p["n"])(l["h"]),src:Object(p["n"])(l["h"]),link:V,number:Object(p["n"])(l["f"]),type:Object(p["n"])(l["h"]),extensions:H,trkseg:W});var C=Object(p["r"])(g,{trkpt:B});var E=Object(p["r"])(g,{ele:Object(p["n"])(l["d"]),time:Object(p["n"])(l["c"])});var O=Object(p["r"])(g,{ele:Object(p["n"])(l["d"]),time:Object(p["n"])(l["c"]),magvar:Object(p["n"])(l["d"]),geoidheight:Object(p["n"])(l["d"]),name:Object(p["n"])(l["h"]),cmt:Object(p["n"])(l["h"]),desc:Object(p["n"])(l["h"]),src:Object(p["n"])(l["h"]),link:V,sym:Object(p["n"])(l["h"]),type:Object(p["n"])(l["h"]),fix:Object(p["n"])(l["h"]),sat:Object(p["n"])(l["f"]),hdop:Object(p["n"])(l["d"]),vdop:Object(p["n"])(l["d"]),pdop:Object(p["n"])(l["d"]),ageofdgpsdata:Object(p["n"])(l["d"]),dgpsid:Object(p["n"])(l["f"]),extensions:H});var T=["text","type"];var M=Object(p["r"])(g,{text:Object(p["l"])(l["n"]),type:Object(p["l"])(l["n"])});var I=Object(p["r"])(g,["name","cmt","desc","src","link","number","type","rtept"]);var R=Object(p["r"])(g,{name:Object(p["l"])(l["n"]),cmt:Object(p["l"])(l["n"]),desc:Object(p["l"])(l["n"]),src:Object(p["l"])(l["n"]),link:Object(p["l"])(Z),number:Object(p["l"])(l["m"]),type:Object(p["l"])(l["n"]),rtept:Object(p["k"])(Object(p["l"])(Q))});var N=Object(p["r"])(g,["ele","time"]);var A=Object(p["r"])(g,["name","cmt","desc","src","link","number","type","trkseg"]);var L=Object(p["r"])(g,{name:Object(p["l"])(l["n"]),cmt:Object(p["l"])(l["n"]),desc:Object(p["l"])(l["n"]),src:Object(p["l"])(l["n"]),link:Object(p["l"])(Z),number:Object(p["l"])(l["m"]),type:Object(p["l"])(l["n"]),trkseg:Object(p["k"])(Object(p["l"])(et))});var P=Object(p["q"])("trkpt");var D=Object(p["r"])(g,{trkpt:Object(p["l"])(Q)});var j=Object(p["r"])(g,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]);var k=Object(p["r"])(g,{ele:Object(p["l"])(l["l"]),time:Object(p["l"])(l["k"]),magvar:Object(p["l"])(l["l"]),geoidheight:Object(p["l"])(l["l"]),name:Object(p["l"])(l["n"]),cmt:Object(p["l"])(l["n"]),desc:Object(p["l"])(l["n"]),src:Object(p["l"])(l["n"]),link:Object(p["l"])(Z),sym:Object(p["l"])(l["n"]),type:Object(p["l"])(l["n"]),fix:Object(p["l"])(l["n"]),sat:Object(p["l"])(l["m"]),hdop:Object(p["l"])(l["l"]),vdop:Object(p["l"])(l["l"]),pdop:Object(p["l"])(l["l"]),ageofdgpsdata:Object(p["l"])(l["l"]),dgpsid:Object(p["l"])(l["m"])});var F={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function $(t,e,n){var i=t.getGeometry();if(i){var r=F[i.getType()];if(r){var a=e[e.length-1].node;return Object(p["d"])(a.namespaceURI,r)}}}var G=Object(p["r"])(g,{rte:Object(p["l"])(J),trk:Object(p["l"])(tt),wpt:Object(p["l"])(nt)});function U(t,e,n,i){t.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat")));if("ele"in i){t.push(i["ele"]);delete i["ele"];e.hasZ=true}else{t.push(0)}if("time"in i){t.push(i["time"]);delete i["time"];e.hasM=true}else{t.push(0)}return t}function Y(t,e,n){var i=u["a"].XY;var r=2;if(t.hasZ&&t.hasM){i=u["a"].XYZM;r=4}else if(t.hasZ){i=u["a"].XYZ;r=3}else if(t.hasM){i=u["a"].XYM;r=3}if(r!==4){for(var a=0,o=e.length/4;a<o;a++){e[a*r]=e[a*4];e[a*r+1]=e[a*4+1];if(t.hasZ){e[a*r+2]=e[a*4+2]}if(t.hasM){e[a*r+2]=e[a*4+3]}}e.length=e.length/4*r;if(n){for(var s=0,l=n.length;s<l;s++){n[s]=n[s]/4*r}}}return i}function V(t,e){var n=e[e.length-1];var i=t.getAttribute("href");if(i!==null){n["link"]=i}Object(p["t"])(b,t,e)}function H(t,e){var n=e[e.length-1];n["extensionsNode_"]=t}function z(t,e){var n=Object(p["u"])({},x,t,e);if(n){var i=e[e.length-1];var r=i["flatCoordinates"];var a=i["layoutOptions"];U(r,a,t,n)}}function B(t,e){var n=Object(p["u"])({},E,t,e);if(n){var i=e[e.length-1];var r=i["flatCoordinates"];var a=i["layoutOptions"];U(r,a,t,n)}}function W(t,e){var n=e[e.length-1];Object(p["t"])(C,t,e);var i=n["flatCoordinates"];var r=n["ends"];r.push(i.length)}function q(t,e){var n=e[0];var i=Object(p["u"])({flatCoordinates:[],layoutOptions:{}},w,t,e);if(!i){return undefined}var a=i["flatCoordinates"];delete i["flatCoordinates"];var s=i["layoutOptions"];delete i["layoutOptions"];var l=Y(s,a);var u=new c["a"](null);u.setFlatCoordinates(l,a);Object(o["b"])(u,false,n);var f=new r["a"](u);f.setProperties(i);return f}function X(t,e){var n=e[0];var i=Object(p["u"])({flatCoordinates:[],ends:[],layoutOptions:{}},S,t,e);if(!i){return undefined}var a=i["flatCoordinates"];delete i["flatCoordinates"];var s=i["ends"];delete i["ends"];var l=i["layoutOptions"];delete i["layoutOptions"];var u=Y(l,a,s);var c=new f["a"](null);c.setFlatCoordinates(u,a,s);Object(o["b"])(c,false,n);var h=new r["a"](c);h.setProperties(i);return h}function K(t,e){var n=e[0];var i=Object(p["u"])({},O,t,e);if(!i){return undefined}var a={};var s=U([],a,t,i);var l=Y(a,s);var u=new h["a"](s,l);Object(o["b"])(u,false,n);var c=new r["a"](u);c.setProperties(i);return c}v.prototype.handleReadExtensions_=function(t){if(!t){t=[]}for(var e=0,n=t.length;e<n;++e){var i=t[e];if(this.readExtensions_){var r=i.get("extensionsNode_")||null;this.readExtensions_(i,r)}i.set("extensionsNode_",undefined)}};v.prototype.readFeature;v.prototype.readFeatureFromNode=function(t,e){if(!Object(a["f"])(g,t.namespaceURI)){return null}var n=_[t.localName];if(!n){return null}var i=n(t,[this.getReadOptions(t,e)]);if(!i){return null}this.handleReadExtensions_([i]);return i};v.prototype.readFeatures;v.prototype.readFeaturesFromNode=function(t,e){if(!Object(a["f"])(g,t.namespaceURI)){return[]}if(t.localName=="gpx"){var n=Object(p["u"])([],y,t,[this.getReadOptions(t,e)]);if(n){this.handleReadExtensions_(n);return n}else{return[]}}return[]};v.prototype.readProjection;function Z(t,e,n){t.setAttribute("href",e);var i=n[n.length-1];var r=i["properties"];var a=[r["linkText"],r["linkType"]];Object(p["v"])({node:t},M,p["b"],a,n,T)}function Q(t,e,n){var i=n[n.length-1];var r=i.node;var a=r.namespaceURI;var o=i["properties"];t.setAttributeNS(null,"lat",e[1]);t.setAttributeNS(null,"lon",e[0]);var s=i["geometryLayout"];switch(s){case u["a"].XYZM:if(e[3]!==0){o["time"]=e[3]}case u["a"].XYZ:if(e[2]!==0){o["ele"]=e[2]}break;case u["a"].XYM:if(e[2]!==0){o["time"]=e[2]}break;default:}var l=t.nodeName=="rtept"?N[a]:j[a];var c=Object(p["p"])(o,l);Object(p["v"])({node:t,properties:o},k,p["b"],c,n,l)}function J(t,e,n){var i=n[0];var r=e.getProperties();var a={node:t,properties:r};var s=e.getGeometry();if(s){s=Object(o["b"])(s,true,i);a["geometryLayout"]=s.getLayout();r["rtept"]=s.getCoordinates()}var l=n[n.length-1].node;var u=I[l.namespaceURI];var c=Object(p["p"])(r,u);Object(p["v"])(a,R,p["b"],c,n,u)}function tt(t,e,n){var i=n[0];var r=e.getProperties();var a={node:t,properties:r};var s=e.getGeometry();if(s){s=Object(o["b"])(s,true,i);r["trkseg"]=s.getLineStrings()}var l=n[n.length-1].node;var u=A[l.namespaceURI];var c=Object(p["p"])(r,u);Object(p["v"])(a,L,p["b"],c,n,u)}function et(t,e,n){var i={node:t,geometryLayout:e.getLayout(),properties:{}};Object(p["v"])(i,D,P,e.getCoordinates(),n)}function nt(t,e,n){var i=n[0];var r=n[n.length-1];r["properties"]=e.getProperties();var a=e.getGeometry();if(a){a=Object(o["b"])(a,true,i);r["geometryLayout"]=a.getLayout();Q(t,a.getCoordinates(),n)}}v.prototype.writeFeatures;v.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var n=Object(p["d"])("http://www.topografix.com/GPX/1/1","gpx");var i="http://www.w3.org/2000/xmlns/";n.setAttributeNS(i,"xmlns:xsi",p["c"]);n.setAttributeNS(p["c"],"xsi:schemaLocation",m);n.setAttribute("version","1.1");n.setAttribute("creator","OpenLayers");Object(p["v"])({node:n},G,$,t,[e]);return n};e["a"]=v},function(t,e,n){"use strict";var i=n(1);var r=n(7);var a=n(244);var o=n(144);var s=n(9);var l=n(0);var u=function t(e){var n=e?e:{};this.featureNS_="http://mapserver.gis.umn.edu/mapserver";this.gmlFormat_=new a["a"];this.layers_=n.layers?n.layers:null;o["a"].call(this)};Object(i["d"])(u,o["a"]);var c="_feature";var f="_layer";u.prototype.getLayers=function(){return this.layers_};u.prototype.setLayers=function(t){this.layers_=t};u.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var n=t.localName;var i=[];if(t.childNodes.length===0){return i}if(n=="msGMLOutput"){for(var a=0,o=t.childNodes.length;a<o;a++){var s=t.childNodes[a];if(s.nodeType!==Node.ELEMENT_NODE){continue}var u=e[0];var h=f;var d=s.localName.replace(h,"");if(this.layers_&&!Object(r["f"])(this.layers_,d)){continue}var p=d+c;u["featureType"]=p;u["featureNS"]=this.featureNS_;var v={};v[p]=Object(l["j"])(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var g=Object(l["r"])([u["featureNS"],null],v);s.setAttribute("namespaceURI",this.featureNS_);var m=Object(l["u"])([],g,s,e,this.gmlFormat_);if(m){Object(r["c"])(i,m)}}}if(n=="FeatureCollection"){var _=Object(l["u"])([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);if(_){i=_}}return i};u.prototype.readFeatures;u.prototype.readFeaturesFromNode=function(t,e){var n={};if(e){Object(s["a"])(n,this.getReadOptions(t,e))}return this.readFeatures_(t,[n])};u.prototype.writeFeatureNode=function(t,e){};u.prototype.writeFeaturesNode=function(t,e){};u.prototype.writeGeometryNode=function(t,e){};e["a"]=u},function(t,e,n){"use strict";n.d(e,"a",function(){return i});function i(t,e,n,i){var r=t[e];var a=t[e+1];var o=0;for(var s=e+i;s<n;s+=i){var l=t[s];var u=t[s+1];o+=Math.sqrt((l-r)*(l-r)+(u-a)*(u-a));r=l;a=u}return o}function r(t,e,n,r){var a=i(t,e,n,r);var o=t[n-r]-t[e];var s=t[n-r+1]-t[e+1];a+=Math.sqrt(o*o+s*s);return a}},function(t,e,n){"use strict";e["a"]={IMAGE:"image",VECTOR:"vector"}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});function i(t,e,n,i,r,a){var o=[t[e],t[e+1]];var s=[];var l=void 0;for(;e+i<n;e+=i){s[0]=t[e+i];s[1]=t[e+i+1];l=r.call(a,o,s);if(l){return l}o[0]=s[0];o[1]=s[1]}return false}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});n.d(e,"b",function(){return o});var i=n(7);var r=n(171);function a(t,e,n,a,o,s,l){var u=void 0,c=void 0,f=void 0,h=void 0,d=void 0,p=void 0,v=void 0;var g=o[s+1];var m=[];for(var _=0,y=n.length;_<y;++_){var b=n[_];h=t[b-a];p=t[b-a+1];for(u=e;u<b;u+=a){d=t[u];v=t[u+1];if(g<=p&&v<=g||p<=g&&g<=v){f=(g-p)/(v-p)*(d-h)+h;m.push(f)}h=d;p=v}}var w=NaN;var x=-Infinity;m.sort(i["i"]);h=m[0];for(u=1,c=m.length;u<c;++u){d=m[u];var S=Math.abs(d-h);if(S>x){f=(h+d)/2;if(Object(r["c"])(t,e,n,a,f,g)){w=f;x=S}}h=d}if(isNaN(w)){w=o[s]}if(l){l.push(w,g,x);return l}else{return[w,g,x]}}function o(t,e,n,i,r){var o=[];for(var s=0,l=n.length;s<l;++s){var u=n[s];o=a(t,e,u,i,r,2*s,o);e=u[u.length-1]}return o}},function(t,e,n){"use strict";var i=function t(e,n,i){var r=void 0,a=void 0;this.isValidFileSize=function(t){return!(t>2e7)};this.isWmsGetCap=function(t){return/<(WMT_MS_Capabilities|WMS_Capabilities)/.test(t)};this.isWmtsGetCap=function(t){return/<Capabilities/.test(t)};this.isKml=function(t){return/<kml/.test(t)&&/<\/kml>/.test(t)};this.isGpx=function(t){return/<gpx/.test(t)&&/<\/gpx>/.test(t)};this.read=function(t){var n=e.defer();if(r&&r.readyState===FileReader.LOADING){r.abort()}r=new FileReader;r.onload=function(t){n.resolve(t.target.result)};r.onerror=function(t){var e=t.target.error;console.error("Reading file failed: ",e);n.reject({message:e.code==20?i("Operation canceled"):i("Read failed"),reason:e.message})};r.onprogress=function(t){n.notify(t)};r.readAsText(t);return n.promise};this.load=function(t,r){if(a){a.resolve()}a=r||e.defer();var o=e.defer();n.get(t,{timeout:a.promise}).then(function(t){o.resolve(t.data)},function(t){console.error("Uploading file failed: ",t);o.reject({message:i("Upload failed"),reason:t})});return o.promise}};i.$inject=["$q","$http","gettext"];i.$inject=["$q","$http","gettext"];i.module=angular.module("ngeoFile",[]);i.module.service("ngeoFile",i);e["a"]=i},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(1);var r=n(7);var a=n(10);var o=n(276);var s=function t(e){this.matrixIds_=e.matrixIds;o["a"].call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})};Object(i["d"])(s,o["a"]);s.prototype.getMatrixId=function(t){return this.matrixIds_[t]};s.prototype.getMatrixIds=function(){return this.matrixIds_};e["b"]=s;function l(t,e,n){var i=[];var o=[];var l=[];var u=[];var c=[];var f=n!==undefined?n:[];var h="SupportedCRS";var d="TileMatrix";var p="Identifier";var v="ScaleDenominator";var g="TopLeftCorner";var m="TileWidth";var _="TileHeight";var y=t[h];var b=Object(a["h"])(y.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(a["h"])(y);var w=b.getMetersPerUnit();var x=b.getAxisOrientation().substr(0,2)=="ne";t[d].sort(function(t,e){return e[v]-t[v]});t[d].forEach(function(e){var n=void 0;if(f.length>0){n=Object(r["d"])(f,function(n){if(e[p]==n[d]){return true}if(e[p].indexOf(":")===-1){return t[p]+":"+e[p]===n[d]}return false})}else{n=true}if(n){o.push(e[p]);var a=e[v]*28e-5/w;var s=e[m];var h=e[_];if(x){l.push([e[g][1],e[g][0]])}else{l.push(e[g])}i.push(a);u.push(s==h?s:[s,h]);c.push([e["MatrixWidth"],-e["MatrixHeight"]])}});return new s({extent:e,origins:l,resolutions:i,matrixIds:o,tileSizes:u,sizes:c})}},function(t,e,n){"use strict";var i=n(1);var r=n(291);var a=n(125);var o=function t(e){r["a"].call(this,e)};Object(i["d"])(o,r["a"]);o.prototype.expireCache=function(t){while(this.canExpireCache()){var e=this.peekLast();var n=e.tileCoord[0].toString();if(n in t&&t[n].contains(e.tileCoord)){break}else{this.pop().dispose()}}};o.prototype.pruneExceptNewestZ=function(){if(this.getCount()===0){return}var t=this.peekFirstKey();var e=Object(a["b"])(t);var n=e[0];this.forEach(function(t){if(t.tileCoord[0]!==n){this.remove(Object(a["c"])(t.tileCoord));t.dispose()}},this)};e["a"]=o},function(t,e,n){"use strict";var i=n(4);var r=n(15);var a=n(10);var o=10;var s=.25;var l=function t(e,n,r,s,l){this.sourceProj_=e;this.targetProj_=n;var u={};var c=Object(a["j"])(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];if(!u[e]){u[e]=c(t)}return u[e]};this.maxSourceExtent_=s;this.errorThresholdSquared_=l*l;this.triangles_=[];this.wrapsXInSource_=false;this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Object(i["E"])(s)==Object(i["E"])(this.sourceProj_.getExtent());this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(i["E"])(this.sourceProj_.getExtent()):null;this.targetWorldWidth_=this.targetProj_.getExtent()?Object(i["E"])(this.targetProj_.getExtent()):null;var f=Object(i["C"])(r);var h=Object(i["D"])(r);var d=Object(i["w"])(r);var p=Object(i["v"])(r);var v=this.transformInv_(f);var g=this.transformInv_(h);var m=this.transformInv_(d);var _=this.transformInv_(p);this.addQuad_(f,h,d,p,v,g,m,_,o);if(this.wrapsXInSource_){var y=Infinity;this.triangles_.forEach(function(t,e,n){y=Math.min(y,t.source[0][0],t.source[1][0],t.source[2][0])});this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-y>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];if(e[0][0]-y>this.sourceWorldWidth_/2){e[0][0]-=this.sourceWorldWidth_}if(e[1][0]-y>this.sourceWorldWidth_/2){e[1][0]-=this.sourceWorldWidth_}if(e[2][0]-y>this.sourceWorldWidth_/2){e[2][0]-=this.sourceWorldWidth_}var n=Math.min(e[0][0],e[1][0],e[2][0]);var i=Math.max(e[0][0],e[1][0],e[2][0]);if(i-n<this.sourceWorldWidth_/2){t.source=e}}}.bind(this))}u={}};l.prototype.addTriangle_=function(t,e,n,i,r,a){this.triangles_.push({source:[i,r,a],target:[t,e,n]})};l.prototype.addQuad_=function(t,e,n,a,o,l,u,c,f){var h=Object(i["b"])([o,l,u,c]);var d=this.sourceWorldWidth_?Object(i["E"])(h)/this.sourceWorldWidth_:null;var p=this.sourceWorldWidth_;var v=this.sourceProj_.canWrapX()&&d>.5&&d<1;var g=false;if(f>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var m=Object(i["b"])([t,e,n,a]);var _=Object(i["E"])(m)/this.targetWorldWidth_;g|=_>s}if(!v&&this.sourceProj_.isGlobal()&&d){g|=d>s}}if(!g&&this.maxSourceExtent_){if(!Object(i["F"])(h,this.maxSourceExtent_)){return}}if(!g){if(!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(c[0])||!isFinite(c[1])){if(f>0){g=true}else{return}}}if(f>0){if(!g){var y=[(t[0]+n[0])/2,(t[1]+n[1])/2];var b=this.transformInv_(y);var w=void 0;if(v){var x=(Object(r["d"])(o[0],p)+Object(r["d"])(u[0],p))/2;w=x-Object(r["d"])(b[0],p)}else{w=(o[0]+u[0])/2-b[0]}var S=(o[1]+u[1])/2-b[1];var C=w*w+S*S;g=C>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var E=[(e[0]+n[0])/2,(e[1]+n[1])/2];var O=this.transformInv_(E);var T=[(a[0]+t[0])/2,(a[1]+t[1])/2];var M=this.transformInv_(T);this.addQuad_(t,e,E,T,o,l,O,M,f-1);this.addQuad_(T,E,n,a,M,O,u,c,f-1)}else{var I=[(t[0]+e[0])/2,(t[1]+e[1])/2];var R=this.transformInv_(I);var N=[(n[0]+a[0])/2,(n[1]+a[1])/2];var A=this.transformInv_(N);this.addQuad_(t,I,N,a,o,R,A,c,f-1);this.addQuad_(I,e,n,N,R,l,u,A,f-1)}return}}if(v){if(!this.canWrapXInSource_){return}this.wrapsXInSource_=true}this.addTriangle_(t,n,a,o,u,c);this.addTriangle_(t,e,n,o,l,u)};l.prototype.calculateSourceExtent=function(){var t=Object(i["j"])();this.triangles_.forEach(function(e,n,r){var a=e.source;Object(i["r"])(t,a[0]);Object(i["r"])(t,a[1]);Object(i["r"])(t,a[2])});return t};l.prototype.getTriangles=function(){return this.triangles_};e["a"]=l},function(t,e,n){"use strict";var i=n(1);var r=function t(e){var n=i["b"]?i["b"].split("-")[0]:"latest";this.message="Assertion failed. See https://openlayers.org/en/"+n+"/doc/errors/#"+e+" for details.";this.code=e;this.name="AssertionError"};Object(i["d"])(r,Error);e["a"]=r},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(r=[n(38),n(118)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){return t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})},function(t,e,n){(function(t,i){true?i(e,n(280),n(22)):undefined})(this,function(t,e,n){"use strict";function i(){n.event.stopImmediatePropagation()}function r(){n.event.preventDefault();n.event.stopImmediatePropagation()}function a(t){var e=t.document.documentElement,i=n.select(t).on("dragstart.drag",r,true);if("onselectstart"in e){i.on("selectstart.drag",r,true)}else{e.__noselect=e.style.MozUserSelect;e.style.MozUserSelect="none"}}function o(t,e){var i=t.document.documentElement,a=n.select(t).on("dragstart.drag",null);if(e){a.on("click.drag",r,true);setTimeout(function(){a.on("click.drag",null)},0)}if("onselectstart"in i){a.on("selectstart.drag",null)}else{i.style.MozUserSelect=i.__noselect;delete i.__noselect}}function s(t){return function(){return t}}function l(t,e,n,i,r,a,o,s,l,u){this.target=t;this.type=e;this.subject=n;this.identifier=i;this.active=r;this.x=a;this.y=o;this.dx=s;this.dy=l;this._=u}l.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function u(){return!n.event.ctrlKey&&!n.event.button}function c(){return this.parentNode}function f(t){return t==null?{x:n.event.x,y:n.event.y}:t}function h(){return navigator.maxTouchPoints||"ontouchstart"in this}function d(){var t=u,d=c,p=f,v=h,g={},m=e.dispatch("start","drag","end"),_=0,y,b,w,x,S=0;function C(t){t.on("mousedown.drag",E).filter(v).on("touchstart.drag",M).on("touchmove.drag",I).on("touchend.drag touchcancel.drag",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(){if(x||!t.apply(this,arguments))return;var e=N("mouse",d.apply(this,arguments),n.mouse,this,arguments);if(!e)return;n.select(n.event.view).on("mousemove.drag",O,true).on("mouseup.drag",T,true);a(n.event.view);i();w=false;y=n.event.clientX;b=n.event.clientY;e("start")}function O(){r();if(!w){var t=n.event.clientX-y,e=n.event.clientY-b;w=t*t+e*e>S}g.mouse("drag")}function T(){n.select(n.event.view).on("mousemove.drag mouseup.drag",null);o(n.event.view,w);r();g.mouse("end")}function M(){if(!t.apply(this,arguments))return;var e=n.event.changedTouches,r=d.apply(this,arguments),a=e.length,o,s;for(o=0;o<a;++o){if(s=N(e[o].identifier,r,n.touch,this,arguments)){i();s("start")}}}function I(){var t=n.event.changedTouches,e=t.length,i,a;for(i=0;i<e;++i){if(a=g[t[i].identifier]){r();a("drag")}}}function R(){var t=n.event.changedTouches,e=t.length,r,a;if(x)clearTimeout(x);x=setTimeout(function(){x=null},500);for(r=0;r<e;++r){if(a=g[t[r].identifier]){i();a("end")}}}function N(t,e,i,r,a){var o=i(e,t),s,u,c,f=m.copy();if(!n.customEvent(new l(C,"beforestart",s,t,_,o[0],o[1],0,0,f),function(){if((n.event.subject=s=p.apply(r,a))==null)return false;u=s.x-o[0]||0;c=s.y-o[1]||0;return true}))return;return function h(d){var p=o,v;switch(d){case"start":g[t]=h,v=_++;break;case"end":delete g[t],--_;case"drag":o=i(e,t),v=_;break}n.customEvent(new l(C,d,s,t,v,o[0]+u,o[1]+c,o[0]-p[0],o[1]-p[1],f),f.apply,f,[d,r,a])}}C.filter=function(e){return arguments.length?(t=typeof e==="function"?e:s(!!e),C):t};C.container=function(t){return arguments.length?(d=typeof t==="function"?t:s(t),C):d};C.subject=function(t){return arguments.length?(p=typeof t==="function"?t:s(t),C):p};C.touchable=function(t){return arguments.length?(v=typeof t==="function"?t:s(!!t),C):v};C.on=function(){var t=m.on.apply(m,arguments);return t===m?C:t};C.clickDistance=function(t){return arguments.length?(S=(t=+t)*t,C):Math.sqrt(S)};return C}t.drag=d;t.dragDisable=a;t.dragEnable=o;Object.defineProperty(t,"__esModule",{value:true})})},function(t,e,n){(function(t,n){true?n(e):undefined})(this,function(t){"use strict";var e="$";function n(){}n.prototype=i.prototype={constructor:n,has:function(t){return e+t in this},get:function(t){return this[e+t]},set:function(t,n){this[e+t]=n;return this},remove:function(t){var n=e+t;return n in this&&delete this[n]},clear:function(){for(var t in this)if(t[0]===e)delete this[t]},keys:function(){var t=[];for(var n in this)if(n[0]===e)t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)if(n[0]===e)t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)if(n[0]===e)t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)if(n[0]===e)++t;return t},empty:function(){for(var t in this)if(t[0]===e)return false;return true},each:function(t){for(var n in this)if(n[0]===e)t(this[n],n.slice(1),this)}};function i(t,e){var i=new n;if(t instanceof n)t.each(function(t,e){i.set(e,t)});else if(Array.isArray(t)){var r=-1,a=t.length,o;if(e==null)while(++r<a)i.set(r,t[r]);else while(++r<a)i.set(e(o=t[r],r,t),o)}else if(t)for(var s in t)i.set(s,t[s]);return i}function r(){var t=[],e=[],n,r,u;function c(e,a,o,s){if(a>=t.length){if(n!=null)e.sort(n);return r!=null?r(e):e}var l=-1,u=e.length,f=t[a++],h,d,p=i(),v,g=o();while(++l<u){if(v=p.get(h=f(d=e[l])+"")){v.push(d)}else{p.set(h,[d])}}p.each(function(t,e){s(g,e,c(t,a,o,s))});return g}function f(n,i){if(++i>t.length)return n;var a,o=e[i-1];if(r!=null&&i>=t.length)a=n.entries();else a=[],n.each(function(t,e){a.push({key:e,values:f(t,i)})});return o!=null?a.sort(function(t,e){return o(t.key,e.key)}):a}return u={object:function(t){return c(t,0,a,o)},map:function(t){return c(t,0,s,l)},entries:function(t){return f(c(t,0,s,l),0)},key:function(e){t.push(e);return u},sortKeys:function(n){e[t.length-1]=n;return u},sortValues:function(t){n=t;return u},rollup:function(t){r=t;return u}}}function a(){return{}}function o(t,e,n){t[e]=n}function s(){return i()}function l(t,e,n){t.set(e,n)}function u(){}var c=i.prototype;u.prototype=f.prototype={constructor:u,has:c.has,add:function(t){t+="";this[e+t]=t;return this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};function f(t,e){var n=new u;if(t instanceof u)t.each(function(t){n.add(t)});else if(t){var i=-1,r=t.length;if(e==null)while(++i<r)n.add(t[i]);else while(++i<r)n.add(e(t[i],i,t))}return n}function h(t){var e=[];for(var n in t)e.push(n);return e}function d(t){var e=[];for(var n in t)e.push(t[n]);return e}function p(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e}t.nest=r;t.set=f;t.map=i;t.keys=h;t.values=d;t.entries=p;Object.defineProperty(t,"__esModule",{value:true})})},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var i=n(352);var r=n(351);var a=n(350);var o=n(286);var s=n(285);var l=n(96);var u=n(192);var c=n(116);var f=n(217);var h={calendar:i["b"],longDateFormat:r["a"],invalidDate:a["a"],ordinal:o["b"],dayOfMonthOrdinalParse:o["a"],relativeTime:s["a"],months:l["b"],monthsShort:l["c"],week:u["a"],weekdays:c["a"],weekdaysMin:c["b"],weekdaysShort:c["c"],meridiemParse:f["a"]}},function(t,e){t.exports='<h3>Total: {{ $ctrl.result.total }}</h3> <ul class="nav nav-tabs" role=tablist> <li ng-repeat="source in $ctrl.result.sources" role=presentation ng-if=source.features.length> <a href="#{{ ::source.id }}" aria-controls="{{ ::source.id }}" role=tab data-toggle=tab> <span>{{ ::source.label }}</span> <span>({{ ::source.features.length }})</span> </a> </li> </ul> <div class=tab-content> <div ng-repeat="source in $ctrl.result.sources" role=tabpanel class=tab-pane ng-if=source.features.length id="{{ ::source.id }}"> <div ng-repeat="feature in ::source.features"> <h3>{{ ::feature.get(\'display_name\') }}</h3> <div ng-repeat="(key, value) in ::feature.getProperties()" ng-init="value = value !== undefined ? value : \'\'"> <span ng-if="::(key !== feature.getGeometryName() && key !== \'ngeo_feature_type_\')"> <span ng-bind=::key></span>: <span ng-bind=::value></span> </span> </div> </div> </div> </div> '},function(t){t.exports={a:"2.4.4"}},function(t,e,n){(function(e){t.exports=e["Bloodhound"]=n(480)}).call(this,n(294))},function(t,e,n){var i,r,a;
/**
 * @preserve jQuery DateTimePicker
 * @homepage http://xdsoft.net/jqplugins/datetimepicker/
 * @author Chupurnov Valeriy (<chupurnov@gmail.com>)
 */var o=function(t){"use strict";var e={i18n:{ar:{months:["كانون الثاني","شباط","آذار","نيسان","مايو","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],dayOfWeekShort:["ن","ث","ع","خ","ج","س","ح"],dayOfWeek:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت","الأحد"]},ro:{months:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],dayOfWeekShort:["Du","Lu","Ma","Mi","Jo","Vi","Sâ"],dayOfWeek:["Duminică","Luni","Marţi","Miercuri","Joi","Vineri","Sâmbătă"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeekShort:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],dayOfWeek:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},is:{months:["Janúar","Febrúar","Mars","Apríl","Maí","Júní","Júlí","Ágúst","September","Október","Nóvember","Desember"],dayOfWeekShort:["Sun","Mán","Þrið","Mið","Fim","Fös","Lau"],dayOfWeek:["Sunnudagur","Mánudagur","Þriðjudagur","Miðvikudagur","Fimmtudagur","Föstudagur","Laugardagur"]},bg:{months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],dayOfWeekShort:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],dayOfWeek:["Неделя","Понеделник","Вторник","Сряда","Четвъртък","Петък","Събота"]},fa:{months:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],dayOfWeekShort:["یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],dayOfWeek:["یک‌شنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنج‌شنبه","جمعه","شنبه","یک‌شنبه"]},ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeekShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],dayOfWeek:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"]},uk:{months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dayOfWeekShort:["Ндл","Пнд","Втр","Срд","Чтв","Птн","Сбт"],dayOfWeek:["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},el:{months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],dayOfWeekShort:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"],dayOfWeek:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeekShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayOfWeek:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeekShort:["zo","ma","di","wo","do","vr","za"],dayOfWeek:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeekShort:["Paz","Pts","Sal","Çar","Per","Cum","Cts"],dayOfWeek:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeekShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],dayOfWeek:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeekShort:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],dayOfWeek:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeekShort:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],dayOfWeek:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัส","ศุกร์","เสาร์","อาทิตย์"]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeekShort:["nd","pn","wt","śr","cz","pt","sb"],dayOfWeek:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeekShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],dayOfWeek:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeekShort:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},km:{months:["មករា​","កុម្ភៈ","មិនា​","មេសា​","ឧសភា​","មិថុនា​","កក្កដា​","សីហា​","កញ្ញា​","តុលា​","វិច្ឆិកា","ធ្នូ​"],dayOfWeekShort:["អាទិ​","ច័ន្ទ​","អង្គារ​","ពុធ​","ព្រហ​​","សុក្រ​","សៅរ៍"],dayOfWeek:["អាទិត្យ​","ច័ន្ទ​","អង្គារ​","ពុធ​","ព្រហស្បតិ៍​","សុក្រ​","សៅរ៍"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeekShort:["일","월","화","수","목","금","토"],dayOfWeek:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeekShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayOfWeek:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"]},da:{months:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],dayOfWeekShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],dayOfWeek:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeekShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],dayOfWeek:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"]},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeekShort:["日","月","火","水","木","金","土"],dayOfWeek:["日曜","月曜","火曜","水曜","木曜","金曜","土曜"]},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayOfWeekShort:["CN","T2","T3","T4","T5","T6","T7"],dayOfWeek:["Chủ nhật","Thứ hai","Thứ ba","Thứ tư","Thứ năm","Thứ sáu","Thứ bảy"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeekShort:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"],dayOfWeek:["Nedelja","Ponedeljek","Torek","Sreda","Četrtek","Petek","Sobota"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayOfWeekShort:["Ne","Po","Út","St","Čt","Pá","So"]},hu:{months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dayOfWeekShort:["Va","Hé","Ke","Sze","Cs","Pé","Szo"],dayOfWeek:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeekShort:["B","Be","Ça","Ç","Ca","C","Ş"],dayOfWeek:["Bazar","Bazar ertəsi","Çərşənbə axşamı","Çərşənbə","Cümə axşamı","Cümə","Şənbə"]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeekShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],dayOfWeek:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"]},ca:{months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeekShort:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"],dayOfWeek:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"]},"en-GB":{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},et:{months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeekShort:["P","E","T","K","N","R","L"],dayOfWeek:["Pühapäev","Esmaspäev","Teisipäev","Kolmapäev","Neljapäev","Reede","Laupäev"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeekShort:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."],dayOfWeek:["Igandea","Astelehena","Asteartea","Asteazkena","Osteguna","Ostirala","Larunbata"]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeekShort:["Su","Ma","Ti","Ke","To","Pe","La"],dayOfWeek:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeekShort:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"],dayOfWeek:["Domingo","Luns","Martes","Mércores","Xoves","Venres","Sábado"]},hr:{months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeekShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],dayOfWeek:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"]},ko:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeekShort:["일","월","화","수","목","금","토"],dayOfWeek:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},lt:{months:["Sausio","Vasario","Kovo","Balandžio","Gegužės","Birželio","Liepos","Rugpjūčio","Rugsėjo","Spalio","Lapkričio","Gruodžio"],dayOfWeekShort:["Sek","Pir","Ant","Tre","Ket","Pen","Šeš"],dayOfWeek:["Sekmadienis","Pirmadienis","Antradienis","Trečiadienis","Ketvirtadienis","Penktadienis","Šeštadienis"]},lv:{months:["Janvāris","Februāris","Marts","Aprīlis ","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeekShort:["Sv","Pr","Ot","Tr","Ct","Pk","St"],dayOfWeek:["Svētdiena","Pirmdiena","Otrdiena","Trešdiena","Ceturtdiena","Piektdiena","Sestdiena"]},mk:{months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],dayOfWeekShort:["нед","пон","вто","сре","чет","пет","саб"],dayOfWeek:["Недела","Понеделник","Вторник","Среда","Четврток","Петок","Сабота"]},mn:{months:["1-р сар","2-р сар","3-р сар","4-р сар","5-р сар","6-р сар","7-р сар","8-р сар","9-р сар","10-р сар","11-р сар","12-р сар"],dayOfWeekShort:["Дав","Мяг","Лха","Пүр","Бсн","Бям","Ням"],dayOfWeek:["Даваа","Мягмар","Лхагва","Пүрэв","Баасан","Бямба","Ням"]},"pt-BR":{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeekShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayOfWeek:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"]},sk:{months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dayOfWeekShort:["Ne","Po","Ut","St","Št","Pi","So"],dayOfWeek:["Nedeľa","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota"]},sq:{months:["Janar","Shkurt","Mars","Prill","Maj","Qershor","Korrik","Gusht","Shtator","Tetor","Nëntor","Dhjetor"],dayOfWeekShort:["Die","Hën","Mar","Mër","Enj","Pre","Shtu"],dayOfWeek:["E Diel","E Hënë","E Martē","E Mërkurë","E Enjte","E Premte","E Shtunë"]},"sr-YU":{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeekShort:["Ned","Pon","Uto","Sre","čet","Pet","Sub"],dayOfWeek:["Nedelja","Ponedeljak","Utorak","Sreda","Četvrtak","Petak","Subota"]},sr:{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],dayOfWeekShort:["нед","пон","уто","сре","чет","пет","суб"],dayOfWeek:["Недеља","Понедељак","Уторак","Среда","Четвртак","Петак","Субота"]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeekShort:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],dayOfWeek:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"]},"zh-TW":{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},zh:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},ug:{months:["1-ئاي","2-ئاي","3-ئاي","4-ئاي","5-ئاي","6-ئاي","7-ئاي","8-ئاي","9-ئاي","10-ئاي","11-ئاي","12-ئاي"],dayOfWeek:["يەكشەنبە","دۈشەنبە","سەيشەنبە","چارشەنبە","پەيشەنبە","جۈمە","شەنبە"]},he:{months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dayOfWeekShort:["א'","ב'","ג'","ד'","ה'","ו'","שבת"],dayOfWeek:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת","ראשון"]},hy:{months:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր"],dayOfWeekShort:["Կի","Երկ","Երք","Չոր","Հնգ","Ուրբ","Շբթ"],dayOfWeek:["Կիրակի","Երկուշաբթի","Երեքշաբթի","Չորեքշաբթի","Հինգշաբթի","Ուրբաթ","Շաբաթ"]},kg:{months:["Үчтүн айы","Бирдин айы","Жалган Куран","Чын Куран","Бугу","Кулжа","Теке","Баш Оона","Аяк Оона","Тогуздун айы","Жетинин айы","Бештин айы"],dayOfWeekShort:["Жек","Дүй","Шей","Шар","Бей","Жум","Ише"],dayOfWeek:["Жекшемб","Дүйшөмб","Шейшемб","Шаршемб","Бейшемби","Жума","Ишенб"]},rm:{months:["Schaner","Favrer","Mars","Avrigl","Matg","Zercladur","Fanadur","Avust","Settember","October","November","December"],dayOfWeekShort:["Du","Gli","Ma","Me","Gie","Ve","So"],dayOfWeek:["Dumengia","Glindesdi","Mardi","Mesemna","Gievgia","Venderdi","Sonda"]},ka:{months:["იანვარი","თებერვალი","მარტი","აპრილი","მაისი","ივნისი","ივლისი","აგვისტო","სექტემბერი","ოქტომბერი","ნოემბერი","დეკემბერი"],dayOfWeekShort:["კვ","ორშ","სამშ","ოთხ","ხუთ","პარ","შაბ"],dayOfWeek:["კვირა","ორშაბათი","სამშაბათი","ოთხშაბათი","ხუთშაბათი","პარასკევი","შაბათი"]}},ownerDocument:document,contentWindow:window,value:"",rtl:false,format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:false,step:60,monthChangeSpinner:true,closeOnDateSelect:false,closeOnTimeSelect:true,closeOnWithoutClick:true,closeOnInputClick:true,openOnFocus:true,timepicker:true,datepicker:true,weeks:false,defaultTime:false,defaultDate:false,minDate:false,maxDate:false,minTime:false,maxTime:false,minDateTime:false,maxDateTime:false,allowTimes:[],opened:false,initTime:true,inline:false,theme:"",touchMovedThreshold:5,onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onGetWeekOfYear:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:true,inverseButton:false,hours12:false,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:true,todayButton:true,prevButton:true,nextButton:true,defaultSelect:true,scrollMonth:true,scrollTime:true,scrollInput:true,lazyInit:false,mask:false,validateOnBlur:true,allowBlank:true,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:"",id:"",fixed:false,roundTime:"round",className:"",weekends:[],highlightedDates:[],highlightedPeriods:[],allowDates:[],allowDateRe:null,disabledDates:[],disabledWeekDays:[],yearOffset:0,beforeShowDay:null,enterLikeTab:true,showApplyButton:false};var n=null,i=null,r="en",a="en";var o={meridiem:["AM","PM"]};var s=function(){var r=e.i18n[a],s={days:r.dayOfWeek,daysShort:r.dayOfWeekShort,months:r.months,monthsShort:t.map(r.months,function(t){return t.substring(0,3)})};if(typeof DateFormatter==="function"){n=i=new DateFormatter({dateSettings:t.extend({},o,s)})}};var l={moment:{default_options:{format:"YYYY/MM/DD HH:mm",formatDate:"YYYY/MM/DD",formatTime:"HH:mm"},formatter:{parseDate:function(t,e){if(c(e)){return i.parseDate(t,e)}var n=moment(t,e);return n.isValid()?n.toDate():false},formatDate:function(t,e){if(c(e)){return i.formatDate(t,e)}return moment(t).format(e)},formatMask:function(t){return t.replace(/Y{4}/g,"9999").replace(/Y{2}/g,"99").replace(/M{2}/g,"19").replace(/D{2}/g,"39").replace(/H{2}/g,"29").replace(/m{2}/g,"59").replace(/s{2}/g,"59")}}}};t.datetimepicker={setLocale:function(t){var n=e.i18n[t]?t:r;if(a!==n){a=n;s()}},setDateFormatter:function(i){if(typeof i==="string"&&l.hasOwnProperty(i)){var r=l[i];t.extend(e,r.default_options);n=r.formatter}else{n=i}}};var u={RFC_2822:"D, d M Y H:i:s O",ATOM:"Y-m-dTH:i:sP",ISO_8601:"Y-m-dTH:i:sO",RFC_822:"D, d M y H:i:s O",RFC_850:"l, d-M-y H:i:s T",RFC_1036:"D, d M y H:i:s O",RFC_1123:"D, d M Y H:i:s O",RSS:"D, d M Y H:i:s O",W3C:"Y-m-dTH:i:sP"};var c=function(t){return Object.values(u).indexOf(t)===-1?false:true};t.extend(t.datetimepicker,u);s();if(!window.getComputedStyle){window.getComputedStyle=function(t){this.el=t;this.getPropertyValue=function(e){var n=/(-([a-z]))/g;if(e==="float"){e="styleFloat"}if(n.test(e)){e=e.replace(n,function(t,e,n){return n.toUpperCase()})}return t.currentStyle[e]||null};return this}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(t,e){var n,i;for(n=e||0,i=this.length;n<i;n+=1){if(this[n]===t){return n}}return-1}}Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()};t.fn.xdsoftScroller=function(e,n){return this.each(function(){var i=t(this),r=function(t){var e={x:0,y:0},n;if(t.type==="touchstart"||t.type==="touchmove"||t.type==="touchend"||t.type==="touchcancel"){n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e.x=n.clientX;e.y=n.clientY}else if(t.type==="mousedown"||t.type==="mouseup"||t.type==="mousemove"||t.type==="mouseover"||t.type==="mouseout"||t.type==="mouseenter"||t.type==="mouseleave"){e.x=t.clientX;e.y=t.clientY}return e},a,o,s,l,u,c=100,f=false,h=0,d=0,p=0,v=false,g=0,m=function(){};if(n==="hide"){i.find(".xdsoft_scrollbar").hide();return}if(!t(this).hasClass("xdsoft_scroller_box")){a=i.children().eq(0);o=i[0].clientHeight;s=a[0].offsetHeight;l=t('<div class="xdsoft_scrollbar"></div>');u=t('<div class="xdsoft_scroller"></div>');l.append(u);i.addClass("xdsoft_scroller_box").append(l);m=function t(e){var n=r(e).y-h+g;if(n<0){n=0}if(n+u[0].offsetHeight>p){n=p-u[0].offsetHeight}i.trigger("scroll_element.xdsoft_scroller",[c?n/c:0])};u.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(a){if(!o){i.trigger("resize_scroll.xdsoft_scroller",[n])}h=r(a).y;g=parseInt(u.css("margin-top"),10);p=l[0].offsetHeight;if(a.type==="mousedown"||a.type==="touchstart"){if(e.ownerDocument){t(e.ownerDocument.body).addClass("xdsoft_noselect")}t([e.ownerDocument.body,e.contentWindow]).on("touchend mouseup.xdsoft_scroller",function n(){t([e.ownerDocument.body,e.contentWindow]).off("touchend mouseup.xdsoft_scroller",n).off("mousemove.xdsoft_scroller",m).removeClass("xdsoft_noselect")});t(e.ownerDocument.body).on("mousemove.xdsoft_scroller",m)}else{v=true;a.stopPropagation();a.preventDefault()}}).on("touchmove",function(t){if(v){t.preventDefault();m(t)}}).on("touchend touchcancel",function(){v=false;g=0});i.on("scroll_element.xdsoft_scroller",function(t,e){if(!o){i.trigger("resize_scroll.xdsoft_scroller",[e,true])}e=e>1?1:e<0||isNaN(e)?0:e;u.css("margin-top",c*e);setTimeout(function(){a.css("marginTop",-parseInt((a[0].offsetHeight-o)*e,10))},10)}).on("resize_scroll.xdsoft_scroller",function(t,e,n){var r,f;o=i[0].clientHeight;s=a[0].offsetHeight;r=o/s;f=r*l[0].offsetHeight;if(r>1){u.hide()}else{u.show();u.css("height",parseInt(f>10?f:10,10));c=l[0].offsetHeight-u[0].offsetHeight;if(n!==true){i.trigger("scroll_element.xdsoft_scroller",[e||Math.abs(parseInt(a.css("marginTop"),10))/(s-o)])}}});i.on("mousewheel",function(t){var e=Math.abs(parseInt(a.css("marginTop"),10));e=e-t.deltaY*20;if(e<0){e=0}i.trigger("scroll_element.xdsoft_scroller",[e/(s-o)]);t.stopPropagation();return false});i.on("touchstart",function(t){f=r(t);d=Math.abs(parseInt(a.css("marginTop"),10))});i.on("touchmove",function(t){if(f){t.preventDefault();var e=r(t);i.trigger("scroll_element.xdsoft_scroller",[(d-(e.y-f.y))/(s-o)])}});i.on("touchend touchcancel",function(){f=false;d=0})}i.trigger("resize_scroll.xdsoft_scroller",[n])})};t.fn.datetimepicker=function(i,r){var o=this,s=48,l=57,u=96,c=105,h=17,d=46,p=13,v=27,g=8,m=37,_=38,y=39,b=40,w=9,x=116,S=65,C=67,E=86,O=90,T=89,M=false,I=t.isPlainObject(i)||!i?t.extend(true,{},e,i):t.extend(true,{},e),R=0,N,A,L=function(t){t.on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function e(){if(t.is(":disabled")||t.data("xdsoft_datetimepicker")){return}clearTimeout(R);R=setTimeout(function(){if(!t.data("xdsoft_datetimepicker")){N(t)}t.off("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",e).trigger("open.xdsoft")},100)})};N=function(e){var r=t('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),o=t('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),R=t('<div class="xdsoft_datepicker active"></div>'),N=t('<div class="xdsoft_monthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button>'+'<div class="xdsoft_label xdsoft_month"><span></span><i></i></div>'+'<div class="xdsoft_label xdsoft_year"><span></span><i></i></div>'+'<button type="button" class="xdsoft_next"></button></div>'),A=t('<div class="xdsoft_calendar"></div>'),L=t('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),P=L.find(".xdsoft_time_box").eq(0),D=t('<div class="xdsoft_time_variant"></div>'),j=t('<button type="button" class="xdsoft_save_selected blue-gradient-button">Save Selected</button>'),k=t('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),F=t('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),$=false,G,U,Y,V,H,z=0,B,W;if(I.id){r.attr("id",I.id)}if(I.style){r.attr("style",I.style)}if(I.weeks){r.addClass("xdsoft_showweeks")}if(I.rtl){r.addClass("xdsoft_rtl")}r.addClass("xdsoft_"+I.theme);r.addClass(I.className);N.find(".xdsoft_month span").after(k);N.find(".xdsoft_year span").after(F);N.find(".xdsoft_month,.xdsoft_year").on("touchstart mousedown.xdsoft",function(e){var n=t(this).find(".xdsoft_select").eq(0),i=0,r=0,a=n.is(":visible"),o,s;N.find(".xdsoft_select").hide();if(B.currentTime){i=B.currentTime[t(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()}n[a?"hide":"show"]();for(o=n.find("div.xdsoft_option"),s=0;s<o.length;s+=1){if(o.eq(s).data("value")===i){break}else{r+=o[0].offsetHeight}}n.xdsoftScroller(I,r/(n.children()[0].offsetHeight-n[0].clientHeight));e.stopPropagation();return false});var q=function(t){var e=t.originalEvent;var n=e.touches?e.touches[0]:e;this.touchStartPosition=this.touchStartPosition||n;var i=Math.abs(this.touchStartPosition.clientX-n.clientX);var r=Math.abs(this.touchStartPosition.clientY-n.clientY);var a=Math.sqrt(i*i+r*r);if(a>I.touchMovedThreshold){this.touchMoved=true}};N.find(".xdsoft_select").xdsoftScroller(I).on("touchstart mousedown.xdsoft",function(t){var e=t.originalEvent;this.touchMoved=false;this.touchStartPosition=e.touches?e.touches[0]:e;t.stopPropagation();t.preventDefault()}).on("touchmove",".xdsoft_option",q).on("touchend mousedown.xdsoft",".xdsoft_option",function(){if(!this.touchMoved){if(B.currentTime===undefined||B.currentTime===null){B.currentTime=B.now()}var e=B.currentTime.getFullYear();if(B&&B.currentTime){B.currentTime[t(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](t(this).data("value"))}t(this).parent().parent().hide();r.trigger("xchange.xdsoft");if(I.onChangeMonth&&t.isFunction(I.onChangeMonth)){I.onChangeMonth.call(r,B.currentTime,r.data("input"))}if(e!==B.currentTime.getFullYear()&&t.isFunction(I.onChangeYear)){I.onChangeYear.call(r,B.currentTime,r.data("input"))}}});r.getValue=function(){return B.getCurrentTime()};r.setOptions=function(i){var a={};I=t.extend(true,{},I,i);if(i.allowTimes&&t.isArray(i.allowTimes)&&i.allowTimes.length){I.allowTimes=t.extend(true,[],i.allowTimes)}if(i.weekends&&t.isArray(i.weekends)&&i.weekends.length){I.weekends=t.extend(true,[],i.weekends)}if(i.allowDates&&t.isArray(i.allowDates)&&i.allowDates.length){I.allowDates=t.extend(true,[],i.allowDates)}if(i.allowDateRe&&Object.prototype.toString.call(i.allowDateRe)==="[object String]"){I.allowDateRe=new RegExp(i.allowDateRe)}if(i.highlightedDates&&t.isArray(i.highlightedDates)&&i.highlightedDates.length){t.each(i.highlightedDates,function(e,i){var r=t.map(i.split(","),t.trim),o,s=new f(n.parseDate(r[0],I.formatDate),r[1],r[2]),l=n.formatDate(s.date,I.formatDate);if(a[l]!==undefined){o=a[l].desc;if(o&&o.length&&s.desc&&s.desc.length){a[l].desc=o+"\n"+s.desc}}else{a[l]=s}});I.highlightedDates=t.extend(true,[],a)}if(i.highlightedPeriods&&t.isArray(i.highlightedPeriods)&&i.highlightedPeriods.length){a=t.extend(true,[],I.highlightedDates);t.each(i.highlightedPeriods,function(e,i){var r,o,s,l,u,c,h;if(t.isArray(i)){r=i[0];o=i[1];s=i[2];h=i[3]}else{var d=t.map(i.split(","),t.trim);r=n.parseDate(d[0],I.formatDate);o=n.parseDate(d[1],I.formatDate);s=d[2];h=d[3]}while(r<=o){l=new f(r,s,h);u=n.formatDate(r,I.formatDate);r.setDate(r.getDate()+1);if(a[u]!==undefined){c=a[u].desc;if(c&&c.length&&l.desc&&l.desc.length){a[u].desc=c+"\n"+l.desc}}else{a[u]=l}}});I.highlightedDates=t.extend(true,[],a)}if(i.disabledDates&&t.isArray(i.disabledDates)&&i.disabledDates.length){I.disabledDates=t.extend(true,[],i.disabledDates)}if(i.disabledWeekDays&&t.isArray(i.disabledWeekDays)&&i.disabledWeekDays.length){I.disabledWeekDays=t.extend(true,[],i.disabledWeekDays)}if((I.open||I.opened)&&!I.inline){e.trigger("open.xdsoft")}if(I.inline){$=true;r.addClass("xdsoft_inline");e.after(r).hide()}if(I.inverseButton){I.next="xdsoft_prev";I.prev="xdsoft_next"}if(I.datepicker){R.addClass("active")}else{R.removeClass("active")}if(I.timepicker){L.addClass("active")}else{L.removeClass("active")}if(I.value){B.setCurrentTime(I.value);if(e&&e.val){e.val(B.str)}}if(isNaN(I.dayOfWeekStart)){I.dayOfWeekStart=0}else{I.dayOfWeekStart=parseInt(I.dayOfWeekStart,10)%7}if(!I.timepickerScrollbar){P.xdsoftScroller(I,"hide")}if(I.minDate&&/^[\+\-](.*)$/.test(I.minDate)){I.minDate=n.formatDate(B.strToDateTime(I.minDate),I.formatDate)}if(I.maxDate&&/^[\+\-](.*)$/.test(I.maxDate)){I.maxDate=n.formatDate(B.strToDateTime(I.maxDate),I.formatDate)}if(I.minDateTime&&/^\+(.*)$/.test(I.minDateTime)){I.minDateTime=B.strToDateTime(I.minDateTime).dateFormat(I.formatDate)}if(I.maxDateTime&&/^\+(.*)$/.test(I.maxDateTime)){I.maxDateTime=B.strToDateTime(I.maxDateTime).dateFormat(I.formatDate)}j.toggle(I.showApplyButton);N.find(".xdsoft_today_button").css("visibility",!I.todayButton?"hidden":"visible");N.find("."+I.prev).css("visibility",!I.prevButton?"hidden":"visible");N.find("."+I.next).css("visibility",!I.nextButton?"hidden":"visible");K(I);if(I.validateOnBlur){e.off("blur.xdsoft").on("blur.xdsoft",function(){if(I.allowBlank&&(!t.trim(t(this).val()).length||typeof I.mask==="string"&&t.trim(t(this).val())===I.mask.replace(/[0-9]/g,"_"))){t(this).val(null);r.data("xdsoft_datetime").empty()}else{var e=n.parseDate(t(this).val(),I.format);if(e){t(this).val(n.formatDate(e,I.format))}else{var i=+[t(this).val()[0],t(this).val()[1]].join(""),a=+[t(this).val()[2],t(this).val()[3]].join("");if(!I.datepicker&&I.timepicker&&i>=0&&i<24&&a>=0&&a<60){t(this).val([i,a].map(function(t){return t>9?t:"0"+t}).join(":"))}else{t(this).val(n.formatDate(B.now(),I.format))}}r.data("xdsoft_datetime").setCurrentTime(t(this).val())}r.trigger("changedatetime.xdsoft");r.trigger("close.xdsoft")})}I.dayOfWeekStartPrev=I.dayOfWeekStart===0?6:I.dayOfWeekStart-1;r.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")};r.data("options",I).on("touchstart mousedown.xdsoft",function(t){t.stopPropagation();t.preventDefault();F.hide();k.hide();return false});P.append(D);P.xdsoftScroller(I);r.on("afterOpen.xdsoft",function(){P.xdsoftScroller(I)});r.append(R).append(L);if(I.withoutCopyright!==true){r.append(o)}R.append(N).append(A).append(j);t(I.parentID).append(r);G=function(){var e=this;e.now=function(t){var n=new Date,i,r;if(!t&&I.defaultDate){i=e.strToDateTime(I.defaultDate);n.setFullYear(i.getFullYear());n.setMonth(i.getMonth());n.setDate(i.getDate())}n.setFullYear(n.getFullYear());if(!t&&I.defaultTime){r=e.strtotime(I.defaultTime);n.setHours(r.getHours());n.setMinutes(r.getMinutes());n.setSeconds(r.getSeconds());n.setMilliseconds(r.getMilliseconds())}return n};e.isValidDate=function(t){if(Object.prototype.toString.call(t)!=="[object Date]"){return false}return!isNaN(t.getTime())};e.setCurrentTime=function(t,n){if(typeof t==="string"){e.currentTime=e.strToDateTime(t)}else if(e.isValidDate(t)){e.currentTime=t}else if(!t&&!n&&I.allowBlank&&!I.inline){e.currentTime=null}else{e.currentTime=e.now()}r.trigger("xchange.xdsoft")};e.empty=function(){e.currentTime=null};e.getCurrentTime=function(){return e.currentTime};e.nextMonth=function(){if(e.currentTime===undefined||e.currentTime===null){e.currentTime=e.now()}var n=e.currentTime.getMonth()+1,i;if(n===12){e.currentTime.setFullYear(e.currentTime.getFullYear()+1);n=0}i=e.currentTime.getFullYear();e.currentTime.setDate(Math.min(new Date(e.currentTime.getFullYear(),n+1,0).getDate(),e.currentTime.getDate()));e.currentTime.setMonth(n);if(I.onChangeMonth&&t.isFunction(I.onChangeMonth)){I.onChangeMonth.call(r,B.currentTime,r.data("input"))}if(i!==e.currentTime.getFullYear()&&t.isFunction(I.onChangeYear)){I.onChangeYear.call(r,B.currentTime,r.data("input"))}r.trigger("xchange.xdsoft");return n};e.prevMonth=function(){if(e.currentTime===undefined||e.currentTime===null){e.currentTime=e.now()}var n=e.currentTime.getMonth()-1;if(n===-1){e.currentTime.setFullYear(e.currentTime.getFullYear()-1);n=11}e.currentTime.setDate(Math.min(new Date(e.currentTime.getFullYear(),n+1,0).getDate(),e.currentTime.getDate()));e.currentTime.setMonth(n);if(I.onChangeMonth&&t.isFunction(I.onChangeMonth)){I.onChangeMonth.call(r,B.currentTime,r.data("input"))}r.trigger("xchange.xdsoft");return n};e.getWeekOfYear=function(e){if(I.onGetWeekOfYear&&t.isFunction(I.onGetWeekOfYear)){var n=I.onGetWeekOfYear.call(r,e);if(typeof n!=="undefined"){return n}}var i=new Date(e.getFullYear(),0,1);if(i.getDay()!==4){i.setMonth(0,1+(4-i.getDay()+7)%7)}return Math.ceil(((e-i)/864e5+i.getDay()+1)/7)};e.strToDateTime=function(t){var i=[],r,a;if(t&&t instanceof Date&&e.isValidDate(t)){return t}i=/^([+-]{1})(.*)$/.exec(t);if(i){i[2]=n.parseDate(i[2],I.formatDate)}if(i&&i[2]){r=i[2].getTime()-i[2].getTimezoneOffset()*6e4;a=new Date(e.now(true).getTime()+parseInt(i[1]+"1",10)*r)}else{a=t?n.parseDate(t,I.format):e.now()}if(!e.isValidDate(a)){a=e.now()}return a};e.strToDate=function(t){if(t&&t instanceof Date&&e.isValidDate(t)){return t}var i=t?n.parseDate(t,I.formatDate):e.now(true);if(!e.isValidDate(i)){i=e.now(true)}return i};e.strtotime=function(t){if(t&&t instanceof Date&&e.isValidDate(t)){return t}var i=t?n.parseDate(t,I.formatTime):e.now(true);if(!e.isValidDate(i)){i=e.now(true)}return i};e.str=function(){var t=I.format;if(I.yearOffset){t=t.replace("Y",e.currentTime.getFullYear()+I.yearOffset);t=t.replace("y",String(e.currentTime.getFullYear()+I.yearOffset).substring(2,4))}return n.formatDate(e.currentTime,t)};e.currentTime=this.now()};B=new G;j.on("touchend click",function(t){t.preventDefault();r.data("changed",true);B.setCurrentTime(X());e.val(B.str());r.trigger("close.xdsoft")});N.find(".xdsoft_today_button").on("touchend mousedown.xdsoft",function(){r.data("changed",true);B.setCurrentTime(0,true);r.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){var t=B.getCurrentTime(),n,i;t=new Date(t.getFullYear(),t.getMonth(),t.getDate());n=B.strToDate(I.minDate);n=new Date(n.getFullYear(),n.getMonth(),n.getDate());if(t<n){return}i=B.strToDate(I.maxDate);i=new Date(i.getFullYear(),i.getMonth(),i.getDate());if(t>i){return}e.val(B.str());e.trigger("change");r.trigger("close.xdsoft")});N.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var e=t(this),n=0,i=false;(function t(r){if(e.hasClass(I.next)){B.nextMonth()}else if(e.hasClass(I.prev)){B.prevMonth()}if(I.monthChangeSpinner){if(!i){n=setTimeout(t,r||100)}}})(500);t([I.ownerDocument.body,I.contentWindow]).on("touchend mouseup.xdsoft",function e(){clearTimeout(n);i=true;t([I.ownerDocument.body,I.contentWindow]).off("touchend mouseup.xdsoft",e)})});L.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var e=t(this),n=0,i=false,r=110;(function t(a){var o=P[0].clientHeight,s=D[0].offsetHeight,l=Math.abs(parseInt(D.css("marginTop"),10));if(e.hasClass(I.next)&&s-o-I.timeHeightInTimePicker>=l){D.css("marginTop","-"+(l+I.timeHeightInTimePicker)+"px")}else if(e.hasClass(I.prev)&&l-I.timeHeightInTimePicker>=0){D.css("marginTop","-"+(l-I.timeHeightInTimePicker)+"px")}P.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(D[0].style.marginTop,10)/(s-o))]);r=r>10?10:r-10;if(!i){n=setTimeout(t,a||r)}})(500);t([I.ownerDocument.body,I.contentWindow]).on("touchend mouseup.xdsoft",function e(){clearTimeout(n);i=true;t([I.ownerDocument.body,I.contentWindow]).off("touchend mouseup.xdsoft",e)})});U=0;r.on("xchange.xdsoft",function(o){clearTimeout(U);U=setTimeout(function(){if(B.currentTime===undefined||B.currentTime===null){B.currentTime=B.now()}var o="",s=new Date(B.currentTime.getFullYear(),B.currentTime.getMonth(),1,12,0,0),l=0,u,c=B.now(),f=false,h=false,d=false,p=false,v,g,m,_,y,b,w=[],x,S=true,C="",E,O,T;while(s.getDay()!==I.dayOfWeekStart){s.setDate(s.getDate()-1)}o+="<table><thead><tr>";if(I.weeks){o+="<th></th>"}for(u=0;u<7;u+=1){o+="<th>"+I.i18n[a].dayOfWeekShort[(u+I.dayOfWeekStart)%7]+"</th>"}o+="</tr></thead>";o+="<tbody>";if(I.maxDate!==false){f=B.strToDate(I.maxDate);f=new Date(f.getFullYear(),f.getMonth(),f.getDate(),23,59,59,999)}if(I.minDate!==false){h=B.strToDate(I.minDate);h=new Date(h.getFullYear(),h.getMonth(),h.getDate())}if(I.minDateTime!==false){d=B.strToDate(I.minDateTime);d=new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds())}if(I.maxDateTime!==false){p=B.strToDate(I.maxDateTime);p=new Date(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds())}var M;if(p!==false){M=(p.getFullYear()*12+p.getMonth())*31+p.getDate()}while(l<B.currentTime.countDaysInMonth()||s.getDay()!==I.dayOfWeekStart||B.currentTime.getMonth()===s.getMonth()){w=[];l+=1;g=s.getDay();m=s.getDate();_=s.getFullYear();y=s.getMonth();b=B.getWeekOfYear(s);T="";w.push("xdsoft_date");if(I.beforeShowDay&&t.isFunction(I.beforeShowDay.call)){x=I.beforeShowDay.call(r,s)}else{x=null}if(I.allowDateRe&&Object.prototype.toString.call(I.allowDateRe)==="[object RegExp]"){if(!I.allowDateRe.test(n.formatDate(s,I.formatDate))){w.push("xdsoft_disabled")}}if(I.allowDates&&I.allowDates.length>0){if(I.allowDates.indexOf(n.formatDate(s,I.formatDate))===-1){w.push("xdsoft_disabled")}}var R=(s.getFullYear()*12+s.getMonth())*31+s.getDate();if(f!==false&&s>f||d!==false&&s<d||h!==false&&s<h||p!==false&&R>M||x&&x[0]===false){w.push("xdsoft_disabled")}if(I.disabledDates.indexOf(n.formatDate(s,I.formatDate))!==-1){w.push("xdsoft_disabled")}if(I.disabledWeekDays.indexOf(g)!==-1){w.push("xdsoft_disabled")}if(e.is("[disabled]")){w.push("xdsoft_disabled")}if(x&&x[1]!==""){w.push(x[1])}if(B.currentTime.getMonth()!==y){w.push("xdsoft_other_month")}if((I.defaultSelect||r.data("changed"))&&n.formatDate(B.currentTime,I.formatDate)===n.formatDate(s,I.formatDate)){w.push("xdsoft_current")}if(n.formatDate(c,I.formatDate)===n.formatDate(s,I.formatDate)){w.push("xdsoft_today")}if(s.getDay()===0||s.getDay()===6||I.weekends.indexOf(n.formatDate(s,I.formatDate))!==-1){w.push("xdsoft_weekend")}if(I.highlightedDates[n.formatDate(s,I.formatDate)]!==undefined){v=I.highlightedDates[n.formatDate(s,I.formatDate)];w.push(v.style===undefined?"xdsoft_highlighted_default":v.style);T=v.desc===undefined?"":v.desc}if(I.beforeShowDay&&t.isFunction(I.beforeShowDay)){w.push(I.beforeShowDay(s))}if(S){o+="<tr>";S=false;if(I.weeks){o+="<th>"+b+"</th>"}}o+='<td data-date="'+m+'" data-month="'+y+'" data-year="'+_+'"'+' class="xdsoft_date xdsoft_day_of_week'+s.getDay()+" "+w.join(" ")+'" title="'+T+'">'+"<div>"+m+"</div>"+"</td>";if(s.getDay()===I.dayOfWeekStartPrev){o+="</tr>";S=true}s.setDate(m+1)}o+="</tbody></table>";A.html(o);N.find(".xdsoft_label span").eq(0).text(I.i18n[a].months[B.currentTime.getMonth()]);N.find(".xdsoft_label span").eq(1).text(B.currentTime.getFullYear()+I.yearOffset);C="";E="";y="";var L=0;if(I.minTime!==false){var P=B.strtotime(I.minTime);L=60*P.getHours()+P.getMinutes()}var j=24*60;if(I.maxTime!==false){var P=B.strtotime(I.maxTime);j=60*P.getHours()+P.getMinutes()}if(I.minDateTime!==false){var P=B.strToDateTime(I.minDateTime);var $=n.formatDate(B.currentTime,I.formatDate)===n.formatDate(P,I.formatDate);if($){var y=60*P.getHours()+P.getMinutes();if(y>L)L=y}}if(I.maxDateTime!==false){var P=B.strToDateTime(I.maxDateTime);var G=n.formatDate(B.currentTime,I.formatDate)===n.formatDate(P,I.formatDate);if(G){var y=60*P.getHours()+P.getMinutes();if(y<j)j=y}}O=function i(a,o){var s=B.now(),l,u=I.allowTimes&&t.isArray(I.allowTimes)&&I.allowTimes.length;s.setHours(a);a=parseInt(s.getHours(),10);s.setMinutes(o);o=parseInt(s.getMinutes(),10);w=[];var f=60*a+o;if(e.is("[disabled]")||f>=j||f<L){w.push("xdsoft_disabled")}l=new Date(B.currentTime);l.setHours(parseInt(B.currentTime.getHours(),10));if(!u){l.setMinutes(Math[I.roundTime](B.currentTime.getMinutes()/I.step)*I.step)}if((I.initTime||I.defaultSelect||r.data("changed"))&&l.getHours()===parseInt(a,10)&&(!u&&I.step>59||l.getMinutes()===parseInt(o,10))){if(I.defaultSelect||r.data("changed")){w.push("xdsoft_current")}else if(I.initTime){w.push("xdsoft_init_time")}}if(parseInt(c.getHours(),10)===parseInt(a,10)&&parseInt(c.getMinutes(),10)===parseInt(o,10)){w.push("xdsoft_today")}C+='<div class="xdsoft_time '+w.join(" ")+'" data-hour="'+a+'" data-minute="'+o+'">'+n.formatDate(s,I.formatTime)+"</div>"};if(!I.allowTimes||!t.isArray(I.allowTimes)||!I.allowTimes.length){for(l=0,u=0;l<(I.hours12?12:24);l+=1){for(u=0;u<60;u+=I.step){var U=l*60+u;if(U<L)continue;if(U>=j)continue;E=(l<10?"0":"")+l;y=(u<10?"0":"")+u;O(E,y)}}}else{for(l=0;l<I.allowTimes.length;l+=1){E=B.strtotime(I.allowTimes[l]).getHours();y=B.strtotime(I.allowTimes[l]).getMinutes();O(E,y)}}D.html(C);i="";for(l=parseInt(I.yearStart,10);l<=parseInt(I.yearEnd,10);l+=1){i+='<div class="xdsoft_option '+(B.currentTime.getFullYear()===l?"xdsoft_current":"")+'" data-value="'+l+'">'+(l+I.yearOffset)+"</div>"}F.children().eq(0).html(i);for(l=parseInt(I.monthStart,10),i="";l<=parseInt(I.monthEnd,10);l+=1){i+='<div class="xdsoft_option '+(B.currentTime.getMonth()===l?"xdsoft_current":"")+'" data-value="'+l+'">'+I.i18n[a].months[l]+"</div>"}k.children().eq(0).html(i);t(r).trigger("generate.xdsoft")},10);o.stopPropagation()}).on("afterOpen.xdsoft",function(){if(I.timepicker){var t,e,n,i;if(D.find(".xdsoft_current").length){t=".xdsoft_current"}else if(D.find(".xdsoft_init_time").length){t=".xdsoft_init_time"}if(t){e=P[0].clientHeight;n=D[0].offsetHeight;i=D.find(t).index()*I.timeHeightInTimePicker+1;if(n-e<i){i=n-e}P.trigger("scroll_element.xdsoft_scroller",[parseInt(i,10)/(n-e)])}else{P.trigger("scroll_element.xdsoft_scroller",[0])}}});Y=0;A.on("touchend click.xdsoft","td",function(n){n.stopPropagation();Y+=1;var i=t(this),a=B.currentTime;if(a===undefined||a===null){B.currentTime=B.now();a=B.currentTime}if(i.hasClass("xdsoft_disabled")){return false}a.setDate(1);a.setFullYear(i.data("year"));a.setMonth(i.data("month"));a.setDate(i.data("date"));r.trigger("select.xdsoft",[a]);e.val(B.str());if(I.onSelectDate&&t.isFunction(I.onSelectDate)){I.onSelectDate.call(r,B.currentTime,r.data("input"),n)}r.data("changed",true);r.trigger("xchange.xdsoft");r.trigger("changedatetime.xdsoft");if((Y>1||(I.closeOnDateSelect===true||I.closeOnDateSelect===false&&!I.timepicker))&&!I.inline){r.trigger("close.xdsoft")}setTimeout(function(){Y=0},200)});D.on("touchstart","div",function(t){this.touchMoved=false}).on("touchmove","div",q).on("touchend click.xdsoft","div",function(e){if(!this.touchMoved){e.stopPropagation();var n=t(this),i=B.currentTime;if(i===undefined||i===null){B.currentTime=B.now();i=B.currentTime}if(n.hasClass("xdsoft_disabled")){return false}i.setHours(n.data("hour"));i.setMinutes(n.data("minute"));r.trigger("select.xdsoft",[i]);r.data("input").val(B.str());if(I.onSelectTime&&t.isFunction(I.onSelectTime)){I.onSelectTime.call(r,B.currentTime,r.data("input"),e)}r.data("changed",true);r.trigger("xchange.xdsoft");r.trigger("changedatetime.xdsoft");if(I.inline!==true&&I.closeOnTimeSelect===true){r.trigger("close.xdsoft")}}});R.on("mousewheel.xdsoft",function(t){if(!I.scrollMonth){return true}if(t.deltaY<0){B.nextMonth()}else{B.prevMonth()}return false});e.on("mousewheel.xdsoft",function(t){if(!I.scrollInput){return true}if(!I.datepicker&&I.timepicker){V=D.find(".xdsoft_current").length?D.find(".xdsoft_current").eq(0).index():0;if(V+t.deltaY>=0&&V+t.deltaY<D.children().length){V+=t.deltaY}if(D.children().eq(V).length){D.children().eq(V).trigger("mousedown")}return false}if(I.datepicker&&!I.timepicker){R.trigger(t,[t.deltaY,t.deltaX,t.deltaY]);if(e.val){e.val(B.str())}r.trigger("changedatetime.xdsoft");return false}});r.on("changedatetime.xdsoft",function(e){if(I.onChangeDateTime&&t.isFunction(I.onChangeDateTime)){var n=r.data("input");I.onChangeDateTime.call(r,B.currentTime,n,e);delete I.value;n.trigger("change")}}).on("generate.xdsoft",function(){if(I.onGenerate&&t.isFunction(I.onGenerate)){I.onGenerate.call(r,B.currentTime,r.data("input"))}if($){r.trigger("afterOpen.xdsoft");$=false}}).on("click.xdsoft",function(t){t.stopPropagation()});V=0;W=function(t,e){do{t=t.parentNode;if(!t||e(t)===false){break}}while(t.nodeName!=="HTML")};H=function(){var e,n,i,a,o,s,l,u,c,f,h,d,p;u=r.data("input");e=u.offset();n=u[0];f="top";i=e.top+n.offsetHeight-1;a=e.left;o="absolute";c=t(I.contentWindow).width();d=t(I.contentWindow).height();p=t(I.contentWindow).scrollTop();if(I.ownerDocument.documentElement.clientWidth-e.left<R.parent().outerWidth(true)){var v=R.parent().outerWidth(true)-n.offsetWidth;a=a-v}if(u.parent().css("direction")==="rtl"){a-=r.outerWidth()-u.outerWidth()}if(I.fixed){i-=p;a-=t(I.contentWindow).scrollLeft();o="fixed"}else{l=false;W(n,function(t){if(t===null){return false}if(I.contentWindow.getComputedStyle(t).getPropertyValue("position")==="fixed"){l=true;return false}});if(l){o="fixed";if(i+r.outerHeight()>d+p){f="bottom";i=d+p-e.top}else{i-=p}}else{if(i+r[0].offsetHeight>d+p){i=e.top-r[0].offsetHeight+1}}if(i<0){i=0}if(a+n.offsetWidth>c){a=c-n.offsetWidth}}s=r[0];W(s,function(t){var e;e=I.contentWindow.getComputedStyle(t).getPropertyValue("position");if(e==="relative"&&c>=t.offsetWidth){a=a-(c-t.offsetWidth)/2;return false}});h={position:o,left:a,top:"",bottom:""};h[f]=i;r.css(h)};r.on("open.xdsoft",function(e){var n=true;if(I.onShow&&t.isFunction(I.onShow)){n=I.onShow.call(r,B.currentTime,r.data("input"),e)}if(n!==false){r.show();H();t(I.contentWindow).off("resize.xdsoft",H).on("resize.xdsoft",H);if(I.closeOnWithoutClick){t([I.ownerDocument.body,I.contentWindow]).on("touchstart mousedown.xdsoft",function e(){r.trigger("close.xdsoft");t([I.ownerDocument.body,I.contentWindow]).off("touchstart mousedown.xdsoft",e)})}}}).on("close.xdsoft",function(e){var n=true;N.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide();if(I.onClose&&t.isFunction(I.onClose)){n=I.onClose.call(r,B.currentTime,r.data("input"),e)}if(n!==false&&!I.opened&&!I.inline){r.hide()}e.stopPropagation()}).on("toggle.xdsoft",function(){if(r.is(":visible")){r.trigger("close.xdsoft")}else{r.trigger("open.xdsoft")}}).data("input",e);z=0;r.data("xdsoft_datetime",B);r.setOptions(I);function X(){var t=false,n;if(I.startDate){t=B.strToDate(I.startDate)}else{t=I.value||(e&&e.val&&e.val()?e.val():"");if(t){t=B.strToDateTime(t);if(I.yearOffset){t=new Date(t.getFullYear()-I.yearOffset,t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}}else if(I.defaultDate){t=B.strToDateTime(I.defaultDate);if(I.defaultTime){n=B.strtotime(I.defaultTime);t.setHours(n.getHours());t.setMinutes(n.getMinutes())}}}if(t&&B.isValidDate(t)){r.data("changed",true)}else{t=""}return t||0}function K(i){var r=function(t,e){var n=t.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(n).test(e)},a=function(t){try{if(i.ownerDocument.selection&&i.ownerDocument.selection.createRange){var e=i.ownerDocument.selection.createRange();return e.getBookmark().charCodeAt(2)-2}if(t.setSelectionRange){return t.selectionStart}}catch(t){return 0}},o=function(t,e){t=typeof t==="string"||t instanceof String?i.ownerDocument.getElementById(t):t;if(!t){return false}if(t.createTextRange){var n=t.createTextRange();n.collapse(true);n.moveEnd("character",e);n.moveStart("character",e);n.select();return true}if(t.setSelectionRange){t.setSelectionRange(e,e);return true}return false};if(i.mask){e.off("keydown.xdsoft")}if(i.mask===true){if(n.formatMask){i.mask=n.formatMask(i.format)}else{i.mask=i.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")}}if(t.type(i.mask)==="string"){if(!r(i.mask,e.val())){e.val(i.mask.replace(/[0-9]/g,"_"));o(e[0],0)}e.on("paste.xdsoft",function(n){var a=n.clipboardData||n.originalEvent.clipboardData||window.clipboardData,s=a.getData("text"),l=this.value,u=this.selectionStart;var c=l.substr(0,u);var f=l.substr(u+s.length);l=c+s+f;u+=s.length;if(r(i.mask,l)){this.value=l;o(this,u)}else if(t.trim(l)===""){this.value=i.mask.replace(/[0-9]/g,"_")}else{e.trigger("error_input.xdsoft")}n.preventDefault();return false});e.on("keydown.xdsoft",function(n){var a=this.value,f=n.which,I=this.selectionStart,R=this.selectionEnd,N=I!==R,A;if(f>=s&&f<=l||f>=u&&f<=c||(f===g||f===d)){A=f===g||f===d?"_":String.fromCharCode(u<=f&&f<=c?f-s:f);if(f===g&&I&&!N){I-=1}while(true){var L=i.mask.substr(I,1);var P=I<i.mask.length;var D=I>0;var j=/[^0-9_]/;var k=j.test(L);var F=k&&P&&D;if(!F)break;I+=f===g&&!N?-1:1}if(N){var $=R-I;var G=i.mask.replace(/[0-9]/g,"_");var U=G.substr(I,$);var Y=U.substr(1);var V=a.substr(0,I);var H=A+Y;var z=a.substr(I+$);a=V+H+z}else{var B=a.substr(0,I);var W=A;var q=a.substr(I+1);a=B+W+q}if(t.trim(a)===""){a=G}else{if(I===i.mask.length){n.preventDefault();return false}}I+=f===g?0:1;while(/[^0-9_]/.test(i.mask.substr(I,1))&&I<i.mask.length&&I>0){I+=f===g?0:1}if(r(i.mask,a)){this.value=a;o(this,I)}else if(t.trim(a)===""){this.value=i.mask.replace(/[0-9]/g,"_")}else{e.trigger("error_input.xdsoft")}}else{if([S,C,E,O,T].indexOf(f)!==-1&&M||[v,_,b,m,y,x,h,w,p].indexOf(f)!==-1){return true}}n.preventDefault();return false})}}B.setCurrentTime(X());e.data("xdsoft_datetimepicker",r).on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function(){if(e.is(":disabled")||e.data("xdsoft_datetimepicker").is(":visible")&&I.closeOnInputClick){return}if(!I.openOnFocus){return}clearTimeout(z);z=setTimeout(function(){if(e.is(":disabled")){return}$=true;B.setCurrentTime(X(),true);if(I.mask){K(I)}r.trigger("open.xdsoft")},100)}).on("keydown.xdsoft",function(e){var n,i=e.which;if([p].indexOf(i)!==-1&&I.enterLikeTab){n=t("input:visible,textarea:visible,button:visible,a:visible");r.trigger("close.xdsoft");n.eq(n.index(this)+1).focus();return false}if([w].indexOf(i)!==-1){r.trigger("close.xdsoft");return true}}).on("blur.xdsoft",function(){r.trigger("close.xdsoft")})};A=function(e){var n=e.data("xdsoft_datetimepicker");if(n){n.data("xdsoft_datetime",null);n.remove();e.data("xdsoft_datetimepicker",null).off(".xdsoft");t(I.contentWindow).off("resize.xdsoft");t([I.contentWindow,I.ownerDocument.body]).off("mousedown.xdsoft touchstart");if(e.unmousewheel){e.unmousewheel()}}};t(I.ownerDocument).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(t){if(t.keyCode===h){M=true}}).on("keyup.xdsoftctrl",function(t){if(t.keyCode===h){M=false}});this.each(function(){var e=t(this).data("xdsoft_datetimepicker"),a;if(e){if(t.type(i)==="string"){switch(i){case"show":t(this).select().focus();e.trigger("open.xdsoft");break;case"hide":e.trigger("close.xdsoft");break;case"toggle":e.trigger("toggle.xdsoft");break;case"destroy":A(t(this));break;case"reset":this.value=this.defaultValue;if(!this.value||!e.data("xdsoft_datetime").isValidDate(n.parseDate(this.value,I.format))){e.data("changed",false)}e.data("xdsoft_datetime").setCurrentTime(this.value);break;case"validate":a=e.data("input");a.trigger("blur.xdsoft");break;default:if(e[i]&&t.isFunction(e[i])){o=e[i](r)}}}else{e.setOptions(i)}return 0}if(t.type(i)!=="string"){if(!I.lazyInit||I.open||I.inline){N(t(this))}else{L(t(this))}}});return o};t.fn.datetimepicker.defaults=e;function f(t,e,n){"use strict";this.date=t;this.desc=e;this.style=n}};(function(o){if(true){!(r=[n(38),n(517)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(o)},function(t,e,n){n(522);t.exports="ngSanitize"},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(r=[n(38),n(118)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){return t.fn.scrollParent=function(e){var n=this.css("position"),i=n==="absolute",r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var e=t(this);if(i&&e.css("position")==="static"){return false}return r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return n==="fixed"||!a.length?t(this[0].ownerDocument||document):a}})},function(t,e,n){var i,r,a;(function(o){if(true){!(r=[n(38),n(118)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){return t.ui.plugin={add:function(e,n,i){var r,a=t.ui[e].prototype;for(r in i){a.plugins[r]=a.plugins[r]||[];a.plugins[r].push([n,i[r]])}},call:function(t,e,n,i){var r,a=t.plugins[e];if(!a){return}if(!i&&(!t.element[0].parentNode||t.element[0].parentNode.nodeType===11)){return}for(r=0;r<a.length;r++){if(t.options[a[r][0]]){a[r][1].apply(t.element,n)}}}}})},function(t,e,n){var i,r,a;
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(r=[n(38),n(118)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){return t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])}})})},function(t,e,n){var i,r,a;(function(o){if(true){!(r=[n(38),n(118)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){return t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})},function(t,e,n){(function(t){+function(t){"use strict";var e='[data-dismiss="alert"]';var n=function(n){t(n).on("click",e,this.close)};n.VERSION="3.3.7";n.TRANSITION_DURATION=150;n.prototype.close=function(e){var i=t(this);var r=i.attr("data-target");if(!r){r=i.attr("href");r=r&&r.replace(/.*(?=#[^\s]*$)/,"")}var a=t(r==="#"?[]:r);if(e)e.preventDefault();if(!a.length){a=i.closest(".alert")}a.trigger(e=t.Event("close.bs.alert"));if(e.isDefaultPrevented())return;a.removeClass("in");function o(){a.detach().trigger("closed.bs.alert").remove()}t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o()};function i(e){return this.each(function(){var i=t(this);var r=i.data("bs.alert");if(!r)i.data("bs.alert",r=new n(this));if(typeof e=="string")r[e].call(i)})}var r=t.fn.alert;t.fn.alert=i;t.fn.alert.Constructor=n;t.fn.alert.noConflict=function(){t.fn.alert=r;return this};t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(t)}).call(this,n(38))},function(t,e,n){(function(e){t.exports=e["angular"]=n(536)}).call(this,n(294))},function(t,e,n){"use strict";var i=n(2);var r=n(13);var a={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"};var o=a;var s=n(60);var l=n(1);var u=n(14);var c=n(84);var f=n(7);var h=n(77);var d=n(170);var p=function t(){h["a"].call(this)};Object(l["d"])(p,h["a"]);function v(t){if(typeof t==="string"){return t}else{return""}}p.prototype.getType=function(){return d["a"].TEXT};p.prototype.readFeature=function(t,e){return this.readFeatureFromText(v(t),this.adaptOptions(e))};p.prototype.readFeatureFromText=function(t,e){};p.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(v(t),this.adaptOptions(e))};p.prototype.readFeaturesFromText=function(t,e){};p.prototype.readGeometry=function(t,e){return this.readGeometryFromText(v(t),this.adaptOptions(e))};p.prototype.readGeometryFromText=function(t,e){};p.prototype.readProjection=function(t){return this.readProjectionFromText(v(t))};p.prototype.readProjectionFromText=function(t){return this.defaultDataProjection};p.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))};p.prototype.writeFeatureText=function(t,e){};p.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))};p.prototype.writeFeaturesText=function(t,e){};p.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))};p.prototype.writeGeometryText=function(t,e){};var g=p;var m=n(25);var _=n(36);var y=n(88);var b=n(83);var w=n(89);var x=n(21);var S=n(32);var C=n(68);var E=n(33);var O=n(35);var T=n(12);var M=n(140);var I=function t(e){g.call(this);var n=e!==undefined?e:{};this.accuracy_=n.accuracy!==undefined?n.accuracy:t.ACCURACY_;this.encodeStyles_=n.encodeStyles!==undefined?n.encodeStyles:true;this.propertiesFunction_=n.properties!==undefined?n.properties:t.defaultPropertiesFunction_;this.setStyle_=n.setStyle!==undefined?n.setStyle:true;this.prevX_=0;this.prevY_=0;t.LegacyProperties_=n.propertiesType!==undefined&&n.propertiesType;this.defaultValues_=n.defaultValues!==undefined?n.defaultValues:{}};l["d"](I,g);I.StyleTypes_={LineString:o.LINE_STRING,Point:o.POINT,Polygon:o.POLYGON,MultiLineString:o.LINE_STRING,MultiPoint:o.POINT,MultiPolygon:o.POLYGON};I.LegacyProperties_={};I.prototype.readFeature;I.prototype.readFeatures;I.prototype.readGeometry;I.prototype.writeFeature;I.prototype.writeFeatures;I.prototype.writeGeometry;I.CHAR64_=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz";I.ACCURACY_=.1;I.defaultPropertiesFunction_=function(t){return t.getProperties()};I.encodeSignedNumber_=function(t){var e=t<<1;if(t<0){e=~e}return I.encodeNumber_(e)};I.encodeNumber_=function(t){var e="";while(t>=32){e+=I.CHAR64_.charAt(32|t&31);t>>=5}e+=I.CHAR64_.charAt(t);return e};I.encodeStyles_=function(t,e,n){var r=I.StyleTypes_[e];i["a"].assert(r!==undefined);for(var a=0;a<t.length;++a){var s=t[a];var l=s.getFill();var u=s.getImage();var c=s.getStroke();var f=s.getText();if(r==o.POLYGON){if(l!==null){I.encodeStylePolygon_(l,c,n)}}else if(r==o.LINE_STRING){if(c!==null){I.encodeStyleLine_(c,n)}}else if(r==o.POINT){if(u!==null){I.encodeStylePoint_(u,n)}}if(f!==null){I.encodeStyleText_(f,n)}}};I.encodeStyleLine_=function(t,e){I.encodeStyleStroke_(t,e)};I.encodeStylePoint_=function(t,e){if(t instanceof C["a"]){var n=t.getRadius();if(e.length>0){e.push("'")}e.push(encodeURIComponent("pointRadius*"+n));var i=t.getFill();if(i!==null){I.encodeStyleFill_(i,e)}var r=t.getStroke();if(r!==null){I.encodeStyleStroke_(r,e)}}};I.encodeStylePolygon_=function(t,e,n){I.encodeStyleFill_(t,n);if(e!==null){I.encodeStyleStroke_(e,n)}};I.encodeStyleFill_=function(t,e,n){var r=n!==undefined?n:"fillColor";var a=t.getColor();if(a!==null){i["a"].assert(Array.isArray(a),"only supporting fill colors");var o=c["a"](a);i["a"].assert(Array.isArray(o),"fill color must be an array");var l=s["b"].rgbArrayToHex(o);if(e.length>0){e.push("'")}e.push(encodeURIComponent(r+"*"+l))}};I.encodeStyleStroke_=function(t,e){var n=t.getColor();if(n!==null){i["a"].assert(Array.isArray(n));var r=c["a"](n);i["a"].assert(Array.isArray(r),"only supporting stroke colors");var a=s["b"].rgbArrayToHex(r);if(e.length>0){e.push("'")}e.push(encodeURIComponent("strokeColor*"+a))}var o=t.getWidth();if(o!==undefined){if(e.length>0){e.push("'")}e.push(encodeURIComponent("strokeWidth*"+o))}};I.encodeStyleText_=function(t,e){var n=t.getFont();if(n!==undefined){var i=n.split(" ");if(i.length>=3){if(e.length>0){e.push("'")}e.push(encodeURIComponent("fontSize*"+i[1]))}}var r=t.getFill();if(r!==null){I.encodeStyleFill_(r,e,"fontColor")}};I.readLineStringGeometry_=function(t){i["a"].assert(t.substring(0,2)==="l(");i["a"].assert(t[t.length-1]==")");t=t.substring(2,t.length-1);var e=this.decodeCoordinates_(t);var n=new _["a"](null);n.setFlatCoordinates(m["a"].XY,e);return n};I.readMultiLineStringGeometry_=function(t){i["a"].assert(t.substring(0,2)==="L(");i["a"].assert(t[t.length-1]==")");t=t.substring(2,t.length-1);var e=[];var n=[];var r=t.split("'");for(var a=0,o=r.length;a<o;++a){e=this.decodeCoordinates_(r[a],e);n[a]=e.length}var s=new y["a"](null);s.setFlatCoordinates(m["a"].XY,e,n);return s};I.readPointGeometry_=function(t){i["a"].assert(t.substring(0,2)==="p(");i["a"].assert(t[t.length-1]==")");t=t.substring(2,t.length-1);var e=this.decodeCoordinates_(t);i["a"].assert(e.length===2);var n=new x["a"](null);n.setFlatCoordinates(m["a"].XY,e);return n};I.readMultiPointGeometry_=function(t){i["a"].assert(t.substring(0,2)==="P(");i["a"].assert(t[t.length-1]==")");t=t.substring(2,t.length-1);var e=this.decodeCoordinates_(t);var n=new b["a"](null);n.setFlatCoordinates(m["a"].XY,e);return n};I.readPolygonGeometry_=function(t){i["a"].assert(t.substring(0,2)==="a(");i["a"].assert(t[t.length-1]==")");t=t.substring(2,t.length-1);var e=[];var n=[];var r=t.split("'");for(var a=0,o=r.length;a<o;++a){e=this.decodeCoordinates_(r[a],e);var s=e.length;if(a===0){e[s++]=e[0];e[s++]=e[1]}else{e[s++]=e[n[a-1]];e[s++]=e[n[a-1]+1]}n[a]=s}var l=new S["a"](null);l.setFlatCoordinates(m["a"].XY,e,n);return l};I.readMultiPolygonGeometry_=function(t){i["a"].assert(t.substring(0,2)==="A(");i["a"].assert(t[t.length-1]==")");t=t.substring(2,t.length-1);var e=[];var n=[];var r=t.split(")(");for(var a=0,o=r.length;a<o;++a){var s=r[a].split("'");var l=n[a]=[];for(var u=0,c=s.length;u<c;++u){e=this.decodeCoordinates_(s[u],e);var f=e.length;if(u===0){e[f++]=e[0];e[f++]=e[1]}else{e[f++]=e[l[u-1]];e[f++]=e[l[u-1]+1]}l[u]=f}}var h=new w["a"](null);h.setFlatCoordinates(m["a"].XY,e,n);return h};I.setStyleInFeature_=function(t,e){if(t==""){return}var n=I.getStyleProperties_(t,e);var i=n["fillColor"];var r=n["fontSize"];var a=n["fontColor"];var o=n["pointRadius"];var s=n["strokeColor"];var l=n["strokeWidth"];var u=null;if(i!==undefined){u=new E["a"]({color:i})}var c=null;if(s!==undefined&&l!==undefined){c=new O["a"]({color:s,width:l})}var f=null;if(o!==undefined){f=new C["a"]({radius:o,fill:u,stroke:c});u=c=null}var h=null;if(r!==undefined&&a!==undefined){h=new M["a"]({font:r+" sans-serif",fill:new E["a"]({color:a})})}var d=new T["c"]({fill:u,image:f,stroke:c,text:h});e.setStyle(d)};I.setStyleProperties_=function(t,e){var n=I.getStyleProperties_(t,e);var i=e.getGeometry();if(i instanceof x["a"]){if(n["isLabel"]||n[r["a"].IS_TEXT]){delete n["strokeColor"];delete n["fillColor"]}else{delete n["fontColor"];delete n["fontSize"]}}else{delete n["fontColor"];if(i instanceof _["a"]){delete n["fillColor"];delete n["fillOpacity"]}}if(n["fontSize"]){var a=parseFloat(n["fontSize"]);if(n["fontSize"].indexOf("px")!==-1){a=Math.round(a/1.333333)}n["fontSize"]=a}var o={};for(var s in n){var l=n[s];if(I.LegacyProperties_[s]){o[I.LegacyProperties_[s]]=l}else{o[s]=l}}e.setProperties(o)};I.castValue_=function(t,e){var n=[r["a"].ANGLE,r["a"].OPACITY,r["a"].SIZE,r["a"].STROKE,"pointRadius","strokeWidth"];var i=[r["a"].IS_CIRCLE,r["a"].IS_RECTANGLE,r["a"].IS_TEXT,r["a"].SHOW_MEASURE,r["a"].SHOW_LABEL,"isCircle","isRectangle","isLabel","showMeasure","showLabel"];if(f["f"](n,t)){return+e}else if(f["f"](i,t)){return e==="true"?true:false}else{return e}};I.getStyleProperties_=function(t,e){var n=t.split("'");var r={};for(var a=0;a<n.length;++a){var o=decodeURIComponent(n[a]);var s=o.split("*");i["a"].assert(s.length===2);var l=s[0];var u=s[1];r[l]=I.castValue_(l,u)}return r};I.writeLineStringGeometry_=function(t){i["a"].assertInstanceof(t,_["a"]);var e=t.getFlatCoordinates();var n=t.getStride();var r=e.length;return"l("+this.encodeCoordinates_(e,n,0,r)+")"};I.writeMultiLineStringGeometry_=function(t){i["a"].assertInstanceof(t,y["a"]);var e=t.getEnds();var n=e.length;var r=t.getFlatCoordinates();var a=t.getStride();var o=0;var s=["L("];for(var l=0;l<n;++l){var u=e[l];var c=this.encodeCoordinates_(r,a,o,u);if(l!==0){s.push("'")}s.push(c);o=u}s.push(")");return s.join("")};I.writePointGeometry_=function(t){i["a"].assertInstanceof(t,x["a"]);var e=t.getFlatCoordinates();var n=t.getStride();var r=e.length;return"p("+this.encodeCoordinates_(e,n,0,r)+")"};I.writeMultiPointGeometry_=function(t){i["a"].assertInstanceof(t,b["a"]);var e=t.getFlatCoordinates();var n=t.getStride();var r=e.length;return"P("+this.encodeCoordinates_(e,n,0,r)+")"};I.encodeRings_=function(t,e,n,i,r){var a=i.length;for(var o=0;o<a;++o){var s=i[o]-e;var l=this.encodeCoordinates_(t,e,n,s);if(o!==0){r.push("'")}r.push(l);n=i[o]}return n};I.writePolygonGeometry_=function(t){i["a"].assertInstanceof(t,S["a"]);var e=t.getFlatCoordinates();var n=t.getStride();var r=t.getEnds();var a=0;var o=["a("];I.encodeRings_.call(this,e,n,a,r,o);o.push(")");return o.join("")};I.writeMultiPolygonGeometry_=function(t){i["a"].assertInstanceof(t,w["a"]);var e=t.getFlatCoordinates();var n=t.getStride();var r=t.getEndss();var a=r.length;var o=0;var s=["A"];for(var l=0;l<a;++l){var u=r[l];s.push("(");o=I.encodeRings_.call(this,e,n,o,u,s);s.push(")")}return s.join("")};I.GEOMETRY_READERS_={P:I.readMultiPointGeometry_,L:I.readMultiLineStringGeometry_,A:I.readMultiPolygonGeometry_,l:I.readLineStringGeometry_,p:I.readPointGeometry_,a:I.readPolygonGeometry_};I.GEOMETRY_WRITERS_={MultiLineString:I.writeMultiLineStringGeometry_,MultiPoint:I.writeMultiPointGeometry_,MultiPolygon:I.writeMultiPolygonGeometry_,LineString:I.writeLineStringGeometry_,Point:I.writePointGeometry_,Polygon:I.writePolygonGeometry_};I.prototype.decodeCoordinates_=function(t,e){var n=t.length;var i=0;var r=e!==undefined?e:[];var a=r.length;while(i<n){var o=void 0;var s=0;var l=0;do{o=I.CHAR64_.indexOf(t.charAt(i++));l|=(o&31)<<s;s+=5}while(o>=32);var u=l&1?~(l>>1):l>>1;this.prevX_+=u;s=0;l=0;do{o=I.CHAR64_.indexOf(t.charAt(i++));l|=(o&31)<<s;s+=5}while(o>=32);var c=l&1?~(l>>1):l>>1;this.prevY_+=c;r[a++]=this.prevX_*this.accuracy_;r[a++]=this.prevY_*this.accuracy_}return r};I.prototype.encodeCoordinates_=function(t,e,n,i){var r="";for(var a=n;a<i;a+=e){var o=t[a];var s=t[a+1];o=Math.floor(o/this.accuracy_);s=Math.floor(s/this.accuracy_);var l=o-this.prevX_;var u=s-this.prevY_;this.prevX_=o;this.prevY_=s;r+=I.encodeSignedNumber_(l)+I.encodeSignedNumber_(u)}return r};I.prototype.readFeatureFromText=function(t,e){i["a"].assert(t.length>2);i["a"].assert(t[1]==="(");i["a"].assert(t[t.length-1]===")");var n=t.indexOf("~");var r=n>=0?t.substring(0,n)+")":t;var a=this.readGeometryFromText(r,e);var o=new u["a"](a);if(n>=0){var s=t.substring(n+1,t.length-1);n=s.indexOf("~");var l=n>=0?s.substring(0,n):s;if(l!=""){var c=l.split("'");for(var f=0;f<c.length;++f){var h=decodeURIComponent(c[f]);var d=h.split("*");i["a"].assert(d.length===2);var p=d[0];var v=d[1];if(!this.setStyle_&&I.LegacyProperties_[p]){p=I.LegacyProperties_[p]}o.set(p,I.castValue_(p,v))}}if(n>=0){var g=s.substring(n+1);if(this.setStyle_){I.setStyleInFeature_(g,o)}else{I.setStyleProperties_(g,o)}}}return o};I.prototype.readFeaturesFromText=function(t,e){var n=this;i["a"].assert(t[0]==="F");this.prevX_=0;this.prevY_=0;var r=[];t=t.substring(1);while(t.length>0){var a=t.indexOf(")");i["a"].assert(a>=0);var o=this.readFeatureFromText(t.substring(0,a+1),e);r.push(o);t=t.substring(a+1)}r.forEach(function(t){for(var e in n.defaultValues_){var i=I.LegacyProperties_[e];if(t.get(i)===undefined){t.set(i,n.defaultValues_[e].call(null,t))}}});return r};I.prototype.readGeometryFromText=function(t,e){var n=I.GEOMETRY_READERS_[t[0]];i["a"].assert(n!==undefined);return n.call(this,t)};I.prototype.writeFeatureText=function(t,e){var n=[];var r="";var a=t.getGeometry();if(a){r=this.writeGeometryText(a,e)}if(r.length>0){i["a"].assert(r[r.length-1]===")");r=r.substring(0,r.length-1);n.push(r)}var o=[];var s=this.propertiesFunction_(t);for(var l in s){var u=s[l];if(u!==undefined&&u!==null&&l!==t.getGeometryName()){if(o.length!==0){o.push("'")}var c=encodeURIComponent(l.replace(/[()'*]/g,"_")+"*"+u.toString().replace(/[()'*]/g,"_"));o.push(c)}}if(o.length>0){n.push("~");Array.prototype.push.apply(n,o)}if(this.encodeStyles_){var f=t.getStyleFunction();if(f!==undefined){var h=f.call(t,0);if(h!==null){var d=[];h=Array.isArray(h)?h:[h];I.encodeStyles_(h,a.getType(),d);if(d.length>0){n.push("~");Array.prototype.push.apply(n,d)}}}}n.push(")");return n.join("")};I.prototype.writeFeaturesText=function(t,e){this.prevX_=0;this.prevY_=0;var n=[];if(t.length>0){n.push("F");for(var i=0,r=t.length;i<r;++i){n.push(this.writeFeatureText(t[i],e))}}return n.join("")};I.prototype.writeGeometryText=function(t,e){var n=I.GEOMETRY_WRITERS_[t.getType()];i["a"].assert(n!==undefined);var r=h["b"](t,true,e);return n.call(this,r)};var R=e["a"]=I},function(t,e,n){"use strict";(function(t){var i=n(470);var r=n.n(i);var a=n(469);var o=n.n(a);var s=n(2);var l=angular.module("ngeoSortable",[]);l.component_=function(e){return{restrict:"A",link:function n(i,r,a){var o=i.$eval(a["ngeoSortable"])||[];s["a"].assert(Array.isArray(o));i.$watchCollection(function(){return o},function(){o.length&&e(h,0)});var l=i.$eval(a["ngeoSortableOptions"]);var u=d(l);var c=i.$eval(a["ngeoSortableCallback"]);var f=i.$eval(a["ngeoSortableCallbackCtx"]);function h(){var e=r.children();for(var n=0;n<e.length;++n){angular.element(e[n]).data("idx",n)}var a=t(r);if(a.data("ui-sortable")){a.off("sortupdate");a.sortable("destroy")}var s={axis:"y",classes:{"ui-sortable-helper":u["draggerClassName"]}};if(u["handleClassName"]){s["handle"]="."+u["handleClassName"]}if(u["placeholderClassName"]){s["placeholder"]=u["placeholderClassName"];s["forcePlaceholderSize"]=true}a.sortable(s);a.on("sortupdate",function(e,n){var a=t(n.item[0]).data("idx");var s=n.item.index();t(n.item[0]).data("idx",s);i.$apply(function(){o.splice(s,0,o.splice(a,1)[0])});if(c instanceof Function){c.apply(f,[r,o])}})}function d(t){var e=void 0;var n="ngeo-sortable-handle";if(t===undefined){e={handleClassName:n}}else{if(t["handleClassName"]===undefined){t["handleClassName"]=n}e=t}return e}}}};l.component_.$inject=["$timeout"];l.directive("ngeoSortable",l.component_);e["a"]=l}).call(this,n(38))},function(t,e,n){"use strict";(function(t){var i=n(482);var r=n.n(i);var a=n(481);var o=n.n(a);var s=angular.module("ngeoPopover",[]);s.component_=function(){return{restrict:"A",scope:true,controller:"NgeoPopoverController as popoverCtrl",link:function e(n,i,r,a){a.anchorElm.on("hidden.bs.popover",function(){var t=a.anchorElm.data("bs.popover");t["inState"].click=false});a.anchorElm.on("inserted.bs.popover",function(){a.bodyElm.show();a.shown=true});a.anchorElm.popover({container:"body",html:true,content:a.bodyElm,placement:r["ngeoPopoverPlacement"]||"right"});if(r["ngeoPopoverDismiss"]){t(r["ngeoPopoverDismiss"]).on("scroll",function(){a.dismissPopover()})}n.$on("$destroy",function(){a.anchorElm.popover("destroy");a.anchorElm.unbind("inserted.bs.popover");a.anchorElm.unbind("hidden.bs.popover")})}}};s.anchorComponent=function(){return{restrict:"A",require:"^^ngeoPopover",link:function t(e,n,i,r){r.anchorElm=n}}};s.contentComponent=function(){return{restrict:"A",require:"^^ngeoPopover",link:function t(e,n,i,r){r.bodyElm=n;n.hide()}}};s.PopoverController_=function(t){this.shown=false;this.anchorElm=undefined;this.bodyElm=undefined;function e(t){if(this.anchorElm[0]!==t.target&&this.bodyElm.parent()[0]!==t.target&this.bodyElm.parent().find(t.target).length===0&&this.shown){this.dismissPopover()}}angular.element("body").on("mousedown",e.bind(this));t.$on("$destroy",function(){angular.element("body").off("mousedown",e)})};s.PopoverController_.$inject=["$scope"];s.PopoverController_.prototype.dismissPopover=function(){this.shown=false;this.anchorElm.popover("hide")};s.controller("NgeoPopoverController",s.PopoverController_);s.directive("ngeoPopover",s.component_);s.directive("ngeoPopoverAnchor",s.anchorComponent);s.directive("ngeoPopoverContent",s.contentComponent);e["a"]=s}).call(this,n(38))},function(t,e,n){"use strict";(function(t){var i=n(55);var r=n(75);var a=n(324);var o=n(23);var s=n(2);var l=n(109);var u=n(323);var c=n(348);var f=n(388);var h=n(309);var d=n(14);var p=n(84);var v=n(21);var g=n(9);var m=n(136);var _=n(10);var y=n(68);var b=n(33);var w=n(124);var x=n(35);var S=n(12);var C=n(131);function E(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var O=angular.module("gmfSearch",[r["a"].module.name,a["a"].module.name,o["a"].module.name,u["a"].module.name,c["a"].name,h["a"].name,l["a"].module.name,f["a"].name]);O.gmfSearchTemplateUrl_=function(t,e){var n=e["gmfSearchTemplateurl"];return n!==undefined?n:"gmf/search"};O.run(["$templateCache",function(t){t.put("gmf/search",n(476))}]);T.$inject=["$element","$attrs","gmfSearchTemplateUrl"];function T(t,e,n){return n(t,e)}O.component_={bindings:{inputValue:"=?gmfSearchInputValue",placeholder:"@?gmfSearchPlaceholder",map:"<gmfSearchMap",datasources:"<gmfSearchDatasources",typeaheadOptions:"<?gmfSearchOptions",featuresStyles:"<?gmfSearchStyles",clearButton:"=?gmfSearchClearbutton",colorChooser:"<?gmfSearchColorchooser",coordinatesProjections:"<?gmfSearchCoordinatesprojections",additionalListeners:"<gmfSearchListeners",maxZoom:"<?gmfSearchMaxzoom",delay:"<?gmfSearchDelay",onInitCallback:"<?gmfSearchOnInit",searchActionCallback:"&?gmfSearchAction"},controller:"gmfSearchController",templateUrl:T};O.value("gmfSearchTemplateUrl",O.gmfSearchTemplateUrl_);O.component("gmfSearch",O.component_);O.SearchController_=function(){e.$inject=["$element","$scope","$compile","$timeout","$injector","gettextCatalog","ngeoAutoProjection","ngeoSearchCreateGeoJSONBloodhound","ngeoFeatureOverlayMgr","gmfThemes","gmfTreeManager","gmfSearchFulltextSearch"];function e(t,n,i,r,a,o,s,l,u,c,f,h){E(this,e);this.element_=t;this.scope_=n;this.compile_=i;this.timeout_=r;this.gettextCatalog_=o;this.gmfThemes_=c;this.gmfTreeManager_=f;this.fullTextSearch_=h;this.ngeoSearchCreateGeoJSONBloodhound_=l;this.ngeoFeatureOverlayMgr=u;this.ngeoLocation_;if(a.has("ngeoLocation")){this.ngeoLocation_=a.get("ngeoLocation")}this.ngeoAutoProjection_=s;this.map;this.styles_={};this.onInitCallback;this.searchActionCallback;this.clearButton;this.colorChooser;this.placeholder;this.delay;this.maxZoom=16;this.coordinatesProjections;this.featureOverlay_=u.getFeatureOverlay();this.datasources=[];this.typeaheadOptions;this.options={highlight:true};this.featuresStyles;this.datasets=[];this.inputValue="";this.color;this.displayColorPicker=false;this.listeners;this.additionalListeners}e.prototype.$onInit=function t(){var e=this;var n=this.gettextCatalog_;this.clearButton=this.clearButton!==false;this.colorChooser=this.colorChooser===true;if(this.delay===undefined){this.delay=50}this.placeholder=this.placeholder!==undefined?this.placeholder:n.getString("Search…");var i=this.coordinatesProjections;if(i===undefined){i=[this.map.getView().getProjection()]}else{i=this.ngeoAutoProjection_.getProjectionList(i)}this.coordinatesProjections=i;if(!this.clearButton){this.element_.find("input").on("focus blur",function(){e.clear()})}if(this.onInitCallback){this.onInitCallback()}this.initStyles_();this.featureOverlay_.setStyle(this.getSearchStyle_.bind(this));if(this.typeaheadOptions){g["a"](this.options,this.typeaheadOptions)}this.initDatasets_();this.scope_.$watch(function(){return e.color},this.setStyleColor.bind(this));this.listeners=this.mergeListeners_(this.additionalListeners,{select:this.select_.bind(this),close:this.close_.bind(this),datasetsempty:this.datasetsempty_.bind(this)});if(this.ngeoLocation_){var r=this.ngeoLocation_.getParam("search");if(r){var a=1;if(this.ngeoLocation_.getParam("search-select-index")){a=parseInt(this.ngeoLocation_.getParam("search-select-index"),10)}var o=void 0;if(this.ngeoLocation_.getParam("search-maxzoom")){o=parseInt(this.ngeoLocation_.getParam("search-maxzoom"),10)}else if(this.ngeoLocation_.getParam("map_zoom")){o=parseInt(this.ngeoLocation_.getParam("map_zoom"),10)}this.fulltextsearch_(r,a,o)}}};e.prototype.mergeListeners_=function t(e,n){if(e===undefined){return n}return{open:e.open,close:e.close===undefined?n.close:function(){n.close();e.close()},cursorchange:e.cursorchange,datasetsempty:e.datasetsempty,select:e.select===undefined?n.select:function(t,i,r){n.select(t,i,r);e.select(t,i,r)},autocomplete:e.autocomplete}};e.prototype.initDatasets_=function t(){var e=this;var n=this.gettextCatalog_;var i=function t(i){var r=e.datasources[i];var a=r.groupValues!==undefined?r.groupValues:[];var o=r.groupActions?r.groupActions:[];var s=[];if(a.length===0){s.push({title:"",filter:e.filterLayername_()})}else{a.forEach(function(t){s.push({title:t,filter:this.filterLayername_(t)})},e)}o.forEach(function(t){s.push({title:n.getString(t["title"]),filter:this.filterAction_(t["action"])})},e);s.forEach(function(t){this.datasets.push(this.createDataset_({bloodhoundOptions:r.bloodhoundOptions,datasetTitle:t["title"],groupsKey:"layer_name",labelKey:r.labelKey,projection:r.projection,typeaheadDatasetOptions:r.typeaheadDatasetOptions,url:r.url},t["filter"]))},e)};for(var r=0;r<this.datasources.length;r++){i(r)}this.datasets.push({source:this.createSearchCoordinates_(this.map.getView()),name:"coordinates",display:"label",templates:{header:function t(){var t=n.getString("Recenter to");return'<div class="gmf-search-header" translate>'+t+"</div>"},suggestion:function t(e){var n=e["label"];var i='<p class="gmf-search-label">'+n+"</p>";i='<div class="gmf-search-datum">'+i+"</div>";return i}}})};e.prototype.createDataset_=function t(e,n){var i=this.gettextCatalog_;var r=this.scope_;var a=this.compile_;var o=this.createAndInitBloodhound_(e,n);var s={limit:Infinity,source:o.ttAdapter(),display:function t(n){var i=n;return i.get(e.labelKey)},templates:{header:function t(){if(e.datasetTitle===undefined){return""}else{var t=i.getString(e.datasetTitle);return'<div class="gmf-search-header">'+t+"</div>"}},suggestion:function t(n){var i=n;var o=r.$new(true);o["feature"]=i;var s='<p class="gmf-search-label" translate>'+i.get(e.labelKey)+"</p>";s+='<p class="gmf-search-group" translate>'+(i.get("layer_name")||e.datasetTitle)+"</p>";s='<div class="gmf-search-datum">'+s+"</div>";return a(s)(o)}}};if(e.typeaheadDatasetOptions){g["a"](s,e.typeaheadDatasetOptions)}return s};e.prototype.filterAction_=function t(e){return function(t){var n=t["properties"];if(n["actions"]){return!n["layer_name"]&&n["actions"].some(function(t){return t.action===e})}else{return false}}};e.prototype.filterLayername_=function t(e){return function(t){var n=t["properties"]["layer_name"];if(n===undefined){return false}if(e===undefined){return true}return n===e}};e.prototype.createAndInitBloodhound_=function t(e,n){var i=this.map.getView().getProjection().getCode();var r=this.getBloodhoudRemoteOptions_();var a=this.ngeoSearchCreateGeoJSONBloodhound_(e.url,n,_["h"](i),_["h"](e.projection),e.bloodhoundOptions,r);a.initialize();return a};e.prototype.getBloodhoudRemoteOptions_=function t(){var e=this.gettextCatalog_;return{rateLimitWait:this.delay,prepare:function t(n,i){var r=i.url;var a=e.currentLanguage;i.xhrFields={withCredentials:true};i.url=C["a"](r,{query:n,lang:a});return i}}};e.prototype.createSearchCoordinates_=function t(e){var n=e.getProjection();var i=n.getExtent();return function(t,e){var r=[];var a=this.ngeoAutoProjection_.stringToCoordinates(t);if(a===null){return}var o=this.ngeoAutoProjection_.tryProjectionsWithInversion(a,i,n,this.coordinatesProjections);if(o===null){return}r.push({label:a.join(" "),position:o,tt_source:"coordinates"});e(r)}.bind(this)};e.prototype.initStyles_=function t(){this.styles_[i["a"].COORDINATES_LAYER_NAME]=new S["c"]({image:new w["a"]({stroke:new x["a"]({color:[0,0,0,.7],width:2}),points:4,radius:8,radius2:0,angle:0})});var e=new b["a"]({color:[65,134,240,.5]});var n=new x["a"]({color:[65,134,240,1],width:2});this.styles_["default"]=new S["c"]({fill:e,image:new y["a"]({fill:e,radius:5,stroke:n}),stroke:n});var r=this.featuresStyles||{};g["a"](this.styles_,r)};e.prototype.getSearchStyle_=function t(e,n){s["a"].assert(e);var i=this.styles_[e.get("layer_name")]||this.styles_["default"];if(this.color){var r=p["a"](this.color);var a=r.slice();a[3]=1;var o=r.slice();o[3]=.5;var l=i.getStroke();if(l){l.setColor(a)}var u=i.getFill();if(u){u.setColor(o)}var c=i.getImage();if(c){c=c.clone();var f=c.getStroke();if(f){f.setColor(a)}var h=c.getFill();if(h){h.setColor(o)}i.setImage(c)}}return i};e.prototype.setStyleColor=function t(e){if(e){this.color=e;this.ngeoFeatureOverlayMgr.getLayer().changed()}};e.prototype.setTTDropdownVisibility_=function t(){if(this.clearButton){var e=this.element_.find(".twitter-typeahead .tt-menu");this.inputValue?e.show():e.hide()}};e.prototype.onClearButton=function t(){this.featureOverlay_.clear();this.clear()};e.prototype.clear=function e(){var n=this.element_.find(".twitter-typeahead");var i=n.children(".tt-menu");var r=n.children("input");this.inputValue="";t(r[1]).typeahead("val","");i.children(".tt-dataset").empty();this.setTTDropdownVisibility_();this.displayColorPicker=false};e.prototype.blur=function e(){var n=this.element_.find(".twitter-typeahead");var i=n.children("input");this.timeout_(function(){t(i[1]).blur()})};e.prototype.select_=function t(e,n,r){if(n["tt_source"]==="coordinates"){var a=new v["a"](n["position"]);this.featureOverlay_.clear();this.featureOverlay_.addFeature(new d["a"]({geometry:a,layer_name:i["a"].COORDINATES_LAYER_NAME}));this.map.getView().setCenter(n["position"]);this.leaveSearch_()}else{s["a"].assertInstanceof(n,d["a"]);this.selectFromGMF_(e,n,r)}};e.prototype.selectFromGMF_=function t(e,n,i){var r=this;var a=n.get("actions");var s=n.getGeometry();if(a){var l=function t(e,n){var i=a[e];var l=i["action"];var u=i["data"];if(l=="add_theme"){r.gmfThemes_.getThemesObject().then(function(t){var e=o["a"].findThemeByName(t,u);if(e){r.gmfTreeManager_.addFirstLevelGroups(e.children)}})}else if(l=="add_group"){r.gmfTreeManager_.addGroupByName(u,true)}else if(l=="add_layer"){var c=r.datasources[0].groupActions;var f=void 0;c.forEach(function(t){if(t["action"]==="add_layer"){return f=true}});if(f){var h=!!s;r.gmfTreeManager_.addGroupByLayerName(u,true,h)}}else{if(r.searchActionCallback){r.searchActionCallback(i)}}};for(var u=0,c=a.length;u<c;u++){l(u,c)}}var f=this.map.getSize();if(s&&f){var h=this.map.getView();this.featureOverlay_.clear();this.featureOverlay_.addFeature(n);this.displayColorPicker=true;var d=s.getType()==="GeometryCollection"?s.getExtent():s;h.fit(d,{size:f,maxZoom:this.maxZoom})}this.leaveSearch_()};e.prototype.leaveSearch_=function t(){if(!this.clearButton){this.clear()}this.blur()};e.prototype.close_=function t(e){if(!this.clearButton){this.setTTDropdownVisibility_()}};e.prototype.datasetsempty_=function e(n,i,r){var a=this.element_.find(".twitter-typeahead .tt-menu");var o=a.children(".gmf-search-no-results");if(o.length==0){var s=t('<div class="gmf-search-no-results" translate>No result found</div>');a.append(s)}if(r){o.show();a.addClass("gmf-search-no-results")}else{a.removeClass("gmf-search-no-results");o.hide()}};e.prototype.fulltextsearch_=function t(e,n,i){var r=this;if(n<1){n=1}this.fullTextSearch_.search(e,{limit:n}).then(function(t){if(t&&t.features[n-1]){var e=new m["a"];var a=e.readFeature(t.features[n-1]);r.featureOverlay_.addFeature(a);var o={};if(i!==undefined){o.maxZoom=i;o.size=r.map.getSize()}r.map.getView().fit(a.getGeometry().getExtent(),o);r.inputValue=a.get("label")}})};return e}();O.controller("gmfSearchController",O.SearchController_);e["a"]=O}).call(this,n(38))},function(t,e,n){"use strict";(function(t){var n=angular.module("ngeoRecenter",[]);n.directive_=function(){return{restrict:"A",link:function e(n,i,r){var a=r["ngeoRecenterMap"];var o=n.$eval(a);function s(t){var e=t.attr("ngeo-extent");if(e!==undefined){var i=o.getSize();o.getView().fit(n.$eval(e),{size:i})}var r=t.attr("ngeo-zoom");if(r!==undefined){o.getView().setZoom(n.$eval(r))}}i.on("click","*",function(e){s(angular.element(t(this)))});i.on("change",function(t){var e=t.target.options[t.target.selectedIndex];s(angular.element(e))})}}};n.directive("ngeoRecenter",n.directive_);e["a"]=n}).call(this,n(38))},function(t,e,n){(function(t,n){true?n(e):undefined})(this,function(t){"use strict";function e(t){return+t}function n(t){return t*t}function i(t){return t*(2-t)}function r(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function a(t){return t*t*t}function o(t){return--t*t*t+1}function s(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var l=3;var u=function t(e){e=+e;function n(t){return Math.pow(t,e)}n.exponent=t;return n}(l);var c=function t(e){e=+e;function n(t){return 1-Math.pow(1-t,e)}n.exponent=t;return n}(l);var f=function t(e){e=+e;function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}n.exponent=t;return n}(l);var h=Math.PI,d=h/2;function p(t){return 1-Math.cos(t*d)}function v(t){return Math.sin(t*d)}function g(t){return(1-Math.cos(h*t))/2}function m(t){return Math.pow(2,10*t-10)}function _(t){return 1-Math.pow(2,-10*t)}function y(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function b(t){return 1-Math.sqrt(1-t*t)}function w(t){return Math.sqrt(1- --t*t)}function x(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var S=4/11,C=6/11,E=8/11,O=3/4,T=9/11,M=10/11,I=15/16,R=21/22,N=63/64,A=1/S/S;function L(t){return 1-P(1-t)}function P(t){return(t=+t)<S?A*t*t:t<E?A*(t-=C)*t+O:t<M?A*(t-=T)*t+I:A*(t-=R)*t+N}function D(t){return((t*=2)<=1?1-P(1-t):P(t-1)+1)/2}var j=1.70158;var k=function t(e){e=+e;function n(t){return t*t*((e+1)*t-e)}n.overshoot=t;return n}(j);var F=function t(e){e=+e;function n(t){return--t*t*((e+1)*t+e)+1}n.overshoot=t;return n}(j);var $=function t(e){e=+e;function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}n.overshoot=t;return n}(j);var G=2*Math.PI,U=1,Y=.3;var V=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=G);function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}r.amplitude=function(e){return t(e,n*G)};r.period=function(n){return t(e,n)};return r}(U,Y);var H=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=G);function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}r.amplitude=function(e){return t(e,n*G)};r.period=function(n){return t(e,n)};return r}(U,Y);var z=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=G);function r(t){return((t=t*2-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}r.amplitude=function(e){return t(e,n*G)};r.period=function(n){return t(e,n)};return r}(U,Y);t.easeBack=$;t.easeBackIn=k;t.easeBackInOut=$;t.easeBackOut=F;t.easeBounce=P;t.easeBounceIn=L;t.easeBounceInOut=D;t.easeBounceOut=P;t.easeCircle=x;t.easeCircleIn=b;t.easeCircleInOut=x;t.easeCircleOut=w;t.easeCubic=s;t.easeCubicIn=a;t.easeCubicInOut=s;t.easeCubicOut=o;t.easeElastic=H;t.easeElasticIn=V;t.easeElasticInOut=z;t.easeElasticOut=H;t.easeExp=y;t.easeExpIn=m;t.easeExpInOut=y;t.easeExpOut=_;t.easeLinear=e;t.easePoly=f;t.easePolyIn=u;t.easePolyInOut=f;t.easePolyOut=c;t.easeQuad=r;t.easeQuadIn=n;t.easeQuadInOut=r;t.easeQuadOut=i;t.easeSin=g;t.easeSinIn=p;t.easeSinInOut=g;t.easeSinOut=v;Object.defineProperty(t,"__esModule",{value:true})})},function(t,e,n){"use strict";var i=n(2);var r=function t(e,n,r,a,o){var s=a.$watchCollection(function(){return e},function(){var t=void 0,i=void 0,a=void 0;if(r){for(t=e.length-1,a=0;t>=0;--t){if(o(e[t])){n[a++]=e[t]}}}else{for(t=0,i=e.length,a=0;t<i;++t){if(o(e[t])){n[a++]=e[t]}}}n.length=a});var l=a.$watchCollection(function(){return n},function(){var t=void 0,a=void 0,s=void 0;if(r){for(t=0,a=e.length,s=n.length-1;t<a;++t){if(o(e[t])){e[t]=n[s--]}}i["a"].assert(s==-1)}else{for(t=0,a=e.length,s=0;t<a;++t){if(o(e[t])){e[t]=n[s++]}}i["a"].assert(s==n.length)}});return function(){s();l()}};e["a"]=r},function(t,e,n){"use strict";var i={};i.Permalink3dParam={ENABLED:"3d_enabled",LON:"3d_lon",LAT:"3d_lat",ELEVATION:"3d_elevation",HEADING:"3d_heading",PITCH:"3d_pitch",PREFIX:"3d_"};e["a"]=i},function(t,e,n){"use strict";(function(t){var i=n(1);var r=n(115);var a=function e(n){var i=n!==undefined?n:{};var a=void 0;if(i.element){a=i.element;delete i.element}else{a=t("<div />")[0]}this.closeEl_=t("<button>",{class:"close",html:"&times;"});this.contentEl_=t("<div/>").append(this.closeEl_).append(a);i.element=t("<div />")[0];r["a"].call(this,i)};i["d"](a,r["a"]);a.prototype.setMap=function(e){var n=this;var i=this.getElement();var a=this.getMap();if(a){t(i).popover("destroy")}r["a"].prototype.setMap.call(this,e);if(e){var o=this.contentEl_;window.setTimeout(function(){t(i).popover({content:o,html:true,placement:"top",template:['<div class="popover ngeo-popover" role="tooltip">','  <div class="arrow"></div>','  <h3 class="popover-title"></h3>','  <div class="popover-content"></div>',"</div>"].join("")}).popover("show")},0);this.closeEl_.one("click",function(){var t=n.getMap();if(t){t.removeOverlay(n)}})}};e["a"]=a}).call(this,n(38))},function(t,e,n){"use strict";(function(t){var i=n(273);var r=n(378);var a=n.n(r);var o=n(608);var s=n.n(o);var l=angular.module("ngeoDateTimePicker",["gettext"]);l.component_=function(){return{restrict:"A",controller:l.Controller_,bindToController:true,scope:{options:"<ngeoDatetimepickerOptions"}}};l.directive("ngeoDatetimepicker",l.component_);l.Controller_=function(t,e){this.element_=t;this.gettextCatalog_=e;this.options};l.Controller_.$inject=["$element","gettextCatalog"];l.Controller_.prototype.$onInit=function(){var e=this.gettextCatalog_.getCurrentLanguage();t.datetimepicker.setLocale(e);t.datetimepicker.setDateFormatter(new i["a"]);if(typeof this.options==="string"){this.options=angular.fromJson(this.options)}this.element_.datetimepicker(this.options)};l.controller("ngeoDateTimePickerController",l.Controller_);e["a"]=l}).call(this,n(38))},function(t,e,n){"use strict";(function(t){var i=n(65);var r=n(1);var a=n(21);var o=n(36);var s=angular.module("ngeoExportfeatures",[i["a"].module.name]);s.directive_=function(){return{controller:"ngeoExportfeaturesController as efCtrl",scope:true,bindToController:{features:"=ngeoExportfeaturesFeatures"}}};s.directive("ngeoExportfeatures",s.directive_);s.Controller_=function(e,n,a,o){var s=this;this.features;this.element_=e;var l=r["c"](this);var u=["ngeo-exportfeature",l].join("-");this.id_=u;this.featureHelper_=o;var c=void 0;if(n.has("ngeoExportFeatureFormats")){c=n.get("ngeoExportFeatureFormats")}else{c=[i["a"].FormatType.KML]}this.menu_=null;this.items_=[];if(c.length>1){e.attr("id",u);var f=t("<ul />",{class:"dropdown-menu","aria-labelledby":u}).appendTo(e.parent()[0]);this.menu_=f;var h=void 0;c.forEach(function(e){h=t("<li />").appendTo(f).append(t("<a />",{href:"#",text:e}).on(["click",u].join("."),s.handleMenuItemClick_.bind(s,e)));s.items_.push(h)})}this.formats_=c;e.on(["click",u].join("."),this.handleElementClick_.bind(this));a.$on("$destroy",this.handleDestroy_.bind(this))};s.Controller_.$inject=["$element","$injector","$scope","ngeoFeatureHelper"];s.Controller_.prototype.handleElementClick_=function(){var t=this;var e=this.features.getArray();if(this.formats_.length===1){this.featureHelper_.export(e,this.formats_[0])}else if(e.length===1){var n=e[0];var r=n.getGeometry();var s=void 0;this.formats_.forEach(function(e,n){s=t.items_[n];if(e===i["a"].FormatType.GPX){if(r instanceof a["a"]||r instanceof o["a"]){s.removeClass("disabled")}else{s.addClass("disabled")}}})}};s.Controller_.prototype.handleMenuItemClick_=function(e,n){if(!t(n.target.parentElement).hasClass("disabled")){var i=this.features.getArray();this.featureHelper_.export(i,e)}};s.Controller_.prototype.handleDestroy_=function(){var t=this.id_;this.element_.off(["click",t].join("."));if(this.menu_){this.menu_.remove();this.items_.forEach(function(e){e.off(["click",t].join("."))});this.items_.length=0;this.menu_=null}};s.controller("ngeoExportfeaturesController",s.Controller_);e["a"]=s}).call(this,n(38))},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(71);var r;if(Object.keys){r=Object.keys}else{r=function(t){var e,n=[];for(e in t){if(Object(i["a"])(t,e)){n.push(e)}}return n}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var i,r,a;
/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(r=[n(38),n(118)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){return t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+ ++t}})}}(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){t(this).removeAttr("id")}})}})})},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function(o){if(true){!(r=[n(38),n(118)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){(function(){var e,n=Math.max,i=Math.abs,r=/left|center|right/,a=/top|center|bottom/,o=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,u=t.fn.position;function c(t,e,n){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?n/100:1)]}function f(e,n){return parseInt(t.css(e,n),10)||0}function h(e){var n=e[0];if(n.nodeType===9){return{width:e.width(),height:e.height(),offset:{top:0,left:0}}}if(t.isWindow(n)){return{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}}if(n.preventDefault){return{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}}return{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.position={scrollbarWidth:function(){if(e!==undefined){return e}var n,i,r=t("<div "+"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'>"+"<div style='height:100px;width:auto;'></div></div>"),a=r.children()[0];t("body").append(r);n=a.offsetWidth;r.css("overflow","scroll");i=a.offsetWidth;if(n===i){i=r[0].clientWidth}r.remove();return e=n-i},getScrollInfo:function(e){var n=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),r=n==="scroll"||n==="auto"&&e.width<e.element[0].scrollWidth,a=i==="scroll"||i==="auto"&&e.height<e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]),r=!!n[0]&&n[0].nodeType===9,a=!i&&!r;return{element:n,isWindow:i,isDocument:r,offset:a?t(e).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}};t.fn.position=function(e){if(!e||!e.of){return u.apply(this,arguments)}e=t.extend({},e);var l,d,p,v,g,m,_=t(e.of),y=t.position.getWithinInfo(e.within),b=t.position.getScrollInfo(y),w=(e.collision||"flip").split(" "),x={};m=h(_);if(_[0].preventDefault){e.at="left top"}d=m.width;p=m.height;v=m.offset;g=t.extend({},v);t.each(["my","at"],function(){var t=(e[this]||"").split(" "),n,i;if(t.length===1){t=r.test(t[0])?t.concat(["center"]):a.test(t[0])?["center"].concat(t):["center","center"]}t[0]=r.test(t[0])?t[0]:"center";t[1]=a.test(t[1])?t[1]:"center";n=o.exec(t[0]);i=o.exec(t[1]);x[this]=[n?n[0]:0,i?i[0]:0];e[this]=[s.exec(t[0])[0],s.exec(t[1])[0]]});if(w.length===1){w[1]=w[0]}if(e.at[0]==="right"){g.left+=d}else if(e.at[0]==="center"){g.left+=d/2}if(e.at[1]==="bottom"){g.top+=p}else if(e.at[1]==="center"){g.top+=p/2}l=c(x.at,d,p);g.left+=l[0];g.top+=l[1];return this.each(function(){var r,a,o=t(this),s=o.outerWidth(),u=o.outerHeight(),h=f(this,"marginLeft"),m=f(this,"marginTop"),S=s+h+f(this,"marginRight")+b.width,C=u+m+f(this,"marginBottom")+b.height,E=t.extend({},g),O=c(x.my,o.outerWidth(),o.outerHeight());if(e.my[0]==="right"){E.left-=s}else if(e.my[0]==="center"){E.left-=s/2}if(e.my[1]==="bottom"){E.top-=u}else if(e.my[1]==="center"){E.top-=u/2}E.left+=O[0];E.top+=O[1];r={marginLeft:h,marginTop:m};t.each(["left","top"],function(n,i){if(t.ui.position[w[n]]){t.ui.position[w[n]][i](E,{targetWidth:d,targetHeight:p,elemWidth:s,elemHeight:u,collisionPosition:r,collisionWidth:S,collisionHeight:C,offset:[l[0]+O[0],l[1]+O[1]],my:e.my,at:e.at,within:y,elem:o})}});if(e.using){a=function(t){var r=v.left-E.left,a=r+d-s,l=v.top-E.top,c=l+p-u,f={target:{element:_,left:v.left,top:v.top,width:d,height:p},element:{element:o,left:E.left,top:E.top,width:s,height:u},horizontal:a<0?"left":r>0?"right":"center",vertical:c<0?"top":l>0?"bottom":"middle"};if(d<s&&i(r+a)<d){f.horizontal="center"}if(p<u&&i(l+c)<p){f.vertical="middle"}if(n(i(r),i(a))>n(i(l),i(c))){f.important="horizontal"}else{f.important="vertical"}e.using.call(this,t,f)}}o.offset(t.extend(E,{using:a}))})};t.ui.position={fit:{left:function(t,e){var i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,o=t.left-e.collisionPosition.marginLeft,s=r-o,l=o+e.collisionWidth-a-r,u;if(e.collisionWidth>a){if(s>0&&l<=0){u=t.left+s+e.collisionWidth-a-r;t.left+=s-u}else if(l>0&&s<=0){t.left=r}else{if(s>l){t.left=r+a-e.collisionWidth}else{t.left=r}}}else if(s>0){t.left+=s}else if(l>0){t.left-=l}else{t.left=n(t.left-o,t.left)}},top:function(t,e){var i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,a=e.within.height,o=t.top-e.collisionPosition.marginTop,s=r-o,l=o+e.collisionHeight-a-r,u;if(e.collisionHeight>a){if(s>0&&l<=0){u=t.top+s+e.collisionHeight-a-r;t.top+=s-u}else if(l>0&&s<=0){t.top=r}else{if(s>l){t.top=r+a-e.collisionHeight}else{t.top=r}}}else if(s>0){t.top+=s}else if(l>0){t.top-=l}else{t.top=n(t.top-o,t.top)}}},flip:{left:function(t,e){var n=e.within,r=n.offset.left+n.scrollLeft,a=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,s=t.left-e.collisionPosition.marginLeft,l=s-o,u=s+e.collisionWidth-a-o,c=e.my[0]==="left"?-e.elemWidth:e.my[0]==="right"?e.elemWidth:0,f=e.at[0]==="left"?e.targetWidth:e.at[0]==="right"?-e.targetWidth:0,h=-2*e.offset[0],d,p;if(l<0){d=t.left+c+f+h+e.collisionWidth-a-r;if(d<0||d<i(l)){t.left+=c+f+h}}else if(u>0){p=t.left-e.collisionPosition.marginLeft+c+f+h-o;if(p>0||i(p)<u){t.left+=c+f+h}}},top:function(t,e){var n=e.within,r=n.offset.top+n.scrollTop,a=n.height,o=n.isWindow?n.scrollTop:n.offset.top,s=t.top-e.collisionPosition.marginTop,l=s-o,u=s+e.collisionHeight-a-o,c=e.my[1]==="top",f=c?-e.elemHeight:e.my[1]==="bottom"?e.elemHeight:0,h=e.at[1]==="top"?e.targetHeight:e.at[1]==="bottom"?-e.targetHeight:0,d=-2*e.offset[1],p,v;if(l<0){v=t.top+f+h+d+e.collisionHeight-a-r;if(v<0||v<i(l)){t.top+=f+h+d}}else if(u>0){p=t.top-e.collisionPosition.marginTop+f+h+d-o;if(p>0||i(p)<u){t.top+=f+h+d}}}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments);t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments);t.ui.position.fit.top.apply(this,arguments)}}}})();return t.ui.position})},,,function(t,e){t.exports='<div class=gmf-displayquerywindow ng-class="{\'desktop\': ctrl.desktop, \'mobile\': !ctrl.desktop}" ng-show=ctrl.open> <button class=collapse-button type=button ng-show=::!ctrl.desktop ngeo-swipe-up="ctrl.collapsed = false" ngeo-swipe-down="ctrl.collapsed = true" ngeo-swipe-disable-mouse ng-click="ctrl.collapsed = !ctrl.collapsed" ng-class="[ctrl.collapsed ? \'collapse-button-up\' : \'collapse-button-down\']"> </button> <div class=windowcontainer ng-swipe-disable-mouse ng-swipe-left=ctrl.next() ng-swipe-right=ctrl.previous()> <button type=button class="btn fa-close close" ng-click=ctrl.close()> </button> <div class=animation-container ng-class="[ctrl.collapsed ? \'\' : \'animation-container-detailed\', ctrl.isNext ? \'next\' : \'previous\']"> <div ng-animate-swap=ctrl.animate class="slide-animation gmf-animatable"> <div class="header ui-draggable-handle"> <p class=title>{{ctrl.source.label | translate}}</p> <p class=subtitle>{{ctrl.getFeatureValues()[ctrl.source.identifierAttributeField]}}</p> </div> <div class=details> <table> <tr ng-repeat="(key, value) in ctrl.getFeatureValues()" ng-if="value !== undefined"> <td class=details-key ng-bind-html="key | translate | ngeoTrustHtml"></td> <td class=details-value ng-bind-html="value | removeCDATA | ngeoTrustHtml"></td> </tr> </table> </div> </div> </div> <div class=navigate> <div class=placeholder> <button type=button class="previous btn" ng-disabled=ctrl.isFirst() ng-show="ctrl.getResultLength() > 1" ng-click=ctrl.previous()> <span ng-show=::ctrl.desktop>{{\'Prev.\' | translate}}</span> </button> </div> <div class=results> <span ng-show=::!ctrl.desktop>{{\'Result\' | translate}}</span> <span>{{ctrl.currentResult + 1}}</span> <span>/</span> <span>{{ctrl.getResultLength()}}</span> <div ng-show=::ctrl.desktop class=dropup> <button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span class="fa fa-filter"></span> <span class="fa fa-caret-up"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role=menu> <li> <a href=# ng-click=ctrl.setSelectedSource(null)> <i class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedSource === null}"> </i> <span>{{\'All layers\' | translate}} ({{ctrl.ngeoQueryResult.total}})</span> </a> </li> <li role=separator class=divider> </li> <li ng-repeat-start="source in ctrl.ngeoQueryResult.sources | filter: ctrl.sourcesFilter" ng-repeat-end ng-class="{\'disabled\': source.features.length <= 0}"> <a href=# ng-click=ctrl.setSelectedSource(source)> <i class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedSource === source}"> </i> <span>{{source.label | translate}} ({{source.features.length}})</span> </a> </li> </ul> </div> </div> <div class=placeholder> <button type=button class="next btn" ng-disabled=ctrl.isLast() ng-show="ctrl.getResultLength() > 1" ng-click=ctrl.next()> <span ng-show=::ctrl.desktop>{{\'Next\' | translate}}</span> </button> </div> </div> </div> </div> '},function(t,e){
/**
 * @license AngularJS v1.7.0
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(t,e){"use strict";var n=e.module("ngTouch",[]);n.info({angularVersion:"1.7.0"});function i(t){return e.$$lowercase(t.nodeName||t[0]&&t[0].nodeName)}n.factory("$swipe",[function(){var t=10;var n={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};function i(t){var e=t.originalEvent||t;var n=e.touches&&e.touches.length?e.touches:[e];var i=e.changedTouches&&e.changedTouches[0]||n[0];return{x:i.clientX,y:i.clientY}}function r(t,i){var r=[];e.forEach(t,function(t){var e=n[t][i];if(e){r.push(e)}});return r.join(" ")}return{bind:function(e,n,a){var o,s;var l;var u;var c=false;a=a||["mouse","touch","pointer"];e.on(r(a,"start"),function(t){l=i(t);c=true;o=0;s=0;u=l;if(n["start"]){n["start"](l,t)}});var f=r(a,"cancel");if(f){e.on(f,function(t){c=false;if(n["cancel"]){n["cancel"](t)}})}e.on(r(a,"move"),function(e){if(!c)return;if(!l)return;var r=i(e);o+=Math.abs(r.x-u.x);s+=Math.abs(r.y-u.y);u=r;if(o<t&&s<t){return}if(s>o){c=false;if(n["cancel"]){n["cancel"](e)}return}else{e.preventDefault();if(n["move"]){n["move"](r,e)}}});e.on(r(a,"end"),function(t){if(!c)return;c=false;if(n["end"]){n["end"](i(t),t)}})}}}]);function r(t,i,r){n.directive(t,["$parse","$swipe",function(n,a){var o=75;var s=.3;var l=30;return function(u,c,f){var h=n(f[t]);var d,p;function v(t){if(!d)return false;var e=Math.abs(t.y-d.y);var n=(t.x-d.x)*i;return p&&e<o&&n>0&&n>l&&e/n<s}var g=["touch"];if(!e.isDefined(f["ngSwipeDisableMouse"])){g.push("mouse")}a.bind(c,{start:function(t,e){d=t;p=true},cancel:function(t){p=false},end:function(t,e){if(v(t)){u.$apply(function(){c.triggerHandler(r);h(u,{$event:e})})}}},g)}}])}r("ngSwipeLeft",-1,"swipeleft");r("ngSwipeRight",1,"swiperight")})(window,window.angular)},function(t,e,n){n(452);t.exports="ngTouch"},function(t,e){
/**
 * @license AngularJS v1.7.0
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(t,e){"use strict";var n=1;var i=8;var r="-add";var a="-remove";var o="ng-";var s="-active";var l="-prepare";var u="ng-animate";var c="$$ngAnimateChildren";var f="",h,d,p,v;if(t.ontransitionend===undefined&&t.onwebkittransitionend!==undefined){f="-webkit-";h="WebkitTransition";d="webkitTransitionEnd transitionend"}else{h="transition";d="transitionend"}if(t.onanimationend===undefined&&t.onwebkitanimationend!==undefined){f="-webkit-";p="WebkitAnimation";v="webkitAnimationEnd animationend"}else{p="animation";v="animationend"}var g="Duration";var m="Property";var _="Delay";var y="TimingFunction";var b="IterationCount";var w="PlayState";var x=9999;var S=p+_;var C=p+g;var E=h+_;var O=h+g;var T=e.$$minErr("ng");function M(t,e,n){if(!t){throw T("areq","Argument '{0}' is {1}",e||"?",n||"required")}return t}function I(t,e){if(!t&&!e)return"";if(!t)return e;if(!e)return t;if(Et(t))t=t.join(" ");if(Et(e))e=e.join(" ");return t+" "+e}function R(t){var e={};if(t&&(t.to||t.from)){e.to=t.to;e.from=t.from}return e}function N(t,e,n){var i="";t=Et(t)?t:t&&Rt(t)&&t.length?t.split(/\s+/):[];Ct(t,function(t,r){if(t&&t.length>0){i+=r>0?" ":"";i+=n?e+t:t+e}});return i}function A(t,e){var n=t.indexOf(e);if(e>=0){t.splice(n,1)}}function L(t){if(t instanceof At){switch(t.length){case 0:return t;case 1:if(t[0].nodeType===n){return t}break;default:return At(P(t))}}if(t.nodeType===n){return At(t)}}function P(t){if(!t[0])return t;for(var e=0;e<t.length;e++){var i=t[e];if(i.nodeType===n){return i}}}function D(t,e,n){Ct(e,function(e){t.addClass(e,n)})}function j(t,e,n){Ct(e,function(e){t.removeClass(e,n)})}function k(t){return function(e,n){if(n.addClass){D(t,e,n.addClass);n.addClass=null}if(n.removeClass){j(t,e,n.removeClass);n.removeClass=null}}}function F(t){t=t||{};if(!t.$$prepared){var e=t.domOperation||Lt;t.domOperation=function(){t.$$domOperationFired=true;e();e=Lt};t.$$prepared=true}return t}function $(t,e){G(t,e);U(t,e)}function G(t,e){if(e.from){t.css(e.from);e.from=null}}function U(t,e){if(e.to){t.css(e.to);e.to=null}}function Y(t,e,n){var i=e.options||{};var r=n.options||{};var a=(i.addClass||"")+" "+(r.addClass||"");var o=(i.removeClass||"")+" "+(r.removeClass||"");var s=V(t.attr("class"),a,o);if(r.preparationClasses){i.preparationClasses=K(r.preparationClasses,i.preparationClasses);delete r.preparationClasses}var l=i.domOperation!==Lt?i.domOperation:null;St(i,r);if(l){i.domOperation=l}if(s.addClass){i.addClass=s.addClass}else{i.addClass=null}if(s.removeClass){i.removeClass=s.removeClass}else{i.removeClass=null}e.addClass=i.addClass;e.removeClass=i.removeClass;return i}function V(t,e,n){var i=1;var o=-1;var s={};t=u(t);e=u(e);Ct(e,function(t,e){s[e]=i});n=u(n);Ct(n,function(t,e){s[e]=s[e]===i?null:o});var l={addClass:"",removeClass:""};Ct(s,function(e,n){var s,u;if(e===i){s="addClass";u=!t[n]||t[n+a]}else if(e===o){s="removeClass";u=t[n]||t[n+r]}if(u){if(l[s].length){l[s]+=" "}l[s]+=n}});function u(t){if(Rt(t)){t=t.split(" ")}var e={};Ct(t,function(t){if(t.length){e[t]=true}});return e}return l}function H(t){return t instanceof At?t[0]:t}function z(t,e,n){var i="";if(e){i=N(e,o,true)}if(n.addClass){i=K(i,N(n.addClass,r))}if(n.removeClass){i=K(i,N(n.removeClass,a))}if(i.length){n.preparationClasses=i;t.addClass(i)}}function B(t,e){if(e.preparationClasses){t.removeClass(e.preparationClasses);e.preparationClasses=null}if(e.activeClasses){t.removeClass(e.activeClasses);e.activeClasses=null}}function W(t,e){var n=e?"-"+e+"s":"";X(t,[E,n]);return[E,n]}function q(t,e){var n=e?"paused":"";var i=p+w;X(t,[i,n]);return[i,n]}function X(t,e){var n=e[0];var i=e[1];t.style[n]=i}function K(t,e){if(!t)return e;if(!e)return t;return t+" "+e}var Z=["$$rAF",function(t){var e,n;function i(t){e=e.concat(t);r()}e=i.queue=[];i.waitUntilQuiet=function(e){if(n)n();n=t(function(){n=null;e();r()})};return i;function r(){if(!e.length)return;var i=e.shift();for(var a=0;a<i.length;a++){i[a]()}if(!n){t(function(){if(!n)r()})}}}];var Q=["$interpolate",function(t){return{link:function(e,n,i){var r=i.ngAnimateChildren;if(Rt(r)&&r.length===0){n.data(c,true)}else{a(t(r)(e));i.$observe("ngAnimateChildren",a)}function a(t){t=t==="on"||t==="true";n.data(c,t)}}}}];var J="$$animateCss";var tt=1e3;var et=3;var nt=1.5;var it={transitionDuration:O,transitionDelay:E,transitionProperty:h+m,animationDuration:C,animationDelay:S,animationIterationCount:p+b};var rt={transitionDuration:O,transitionDelay:E,animationDuration:C,animationDelay:S};function at(t){return[C,t+"s"]}function ot(t,e){var n=e?S:E;return[n,t+"s"]}function st(t,e,n){var i=Object.create(null);var r=t.getComputedStyle(e)||{};Ct(n,function(t,e){var n=r[t];if(n){var a=n.charAt(0);if(a==="-"||a==="+"||a>=0){n=lt(n)}if(n===0){n=null}i[e]=n}});return i}function lt(t){var e=0;var n=t.split(/\s*,\s*/);Ct(n,function(t){if(t.charAt(t.length-1)==="s"){t=t.substring(0,t.length-1)}t=parseFloat(t)||0;e=e?Math.max(t,e):t});return e}function ut(t){return t===0||t!=null}function ct(t,e){var n=h;var i=t+"s";if(e){n+=g}else{i+=" linear all"}return[n,i]}function ft(){var t=Object.create(null);return{flush:function(){t=Object.create(null)},count:function(e){var n=t[e];return n?n.total:0},get:function(e){var n=t[e];return n&&n.value},put:function(e,n){if(!t[e]){t[e]={total:1,value:n}}else{t[e].total++}}}}function ht(t,e,n){Ct(n,function(n){t[n]=Ot(t[n])?t[n]:e.style.getPropertyValue(n)})}var dt=["$animateProvider",function(t){var e=ft();var n=ft();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(t,i,l,u,c,f,g,_){var b=k(i);var w=0;function S(t,e){var n="$$ngAnimateParentKey";var i=t.parentNode;var r=i[n]||(i[n]=++w);return r+"-"+t.getAttribute("class")+"-"+e}function C(n,i,r,a){var o=e.get(r);if(!o){o=st(t,n,a);if(o.animationIterationCount==="infinite"){o.animationIterationCount=1}}e.put(r,o);return o}function E(r,a,o,s){var l;if(e.count(o)>0){l=n.get(o);if(!l){var u=N(a,"-stagger");i.addClass(r,u);l=st(t,r,s);l.animationDuration=Math.max(l.animationDuration,0);l.transitionDuration=Math.max(l.transitionDuration,0);i.removeClass(r,u);n.put(o,l)}}return l||{}}var O=[];function T(t){O.push(t);g.waitUntilQuiet(function(){e.flush();n.flush();var t=c();for(var i=0;i<O.length;i++){O[i](t)}O.length=0})}function M(t,e,n){var i=C(t,e,n,it);var r=i.animationDelay;var a=i.transitionDelay;i.maxDelay=r&&a?Math.max(r,a):r||a;i.maxDuration=Math.max(i.animationDuration*i.animationIterationCount,i.transitionDuration);return i}return function t(n,c){var g=c||{};if(!g.$$prepared){g=F(xt(g))}var w={};var C=H(n);if(!C||!C.parentNode||!_.enabled()){return $t()}var O=[];var I=n.attr("class");var L=R(g);var P;var D;var j;var k;var Y;var V;var z;var B;var K;var Z;var Q=[];if(g.duration===0||!f.animations&&!f.transitions){return $t()}var it=g.event&&Et(g.event)?g.event.join(" "):g.event;var st=it&&g.structural;var lt="";var ft="";if(st){lt=N(it,o,true)}else if(it){lt=it}if(g.addClass){ft+=N(g.addClass,r)}if(g.removeClass){if(ft.length){ft+=" "}ft+=N(g.removeClass,a)}if(g.applyClassesEarly&&ft.length){b(n,g)}var dt=[lt,ft].join(" ").trim();var pt=I+" "+dt;var vt=N(dt,s);var gt=L.to&&Object.keys(L.to).length>0;var mt=(g.keyframeStyle||"").length>0;if(!mt&&!gt&&!dt){return $t()}var _t,yt;if(g.stagger>0){var bt=parseFloat(g.stagger);yt={transitionDelay:bt,animationDelay:bt,transitionDuration:0,animationDuration:0}}else{_t=S(C,pt);yt=E(C,dt,_t,rt)}if(!g.$$skipPreparationClasses){i.addClass(n,dt)}var wt;if(g.transitionStyle){var St=[h,g.transitionStyle];X(C,St);O.push(St)}if(g.duration>=0){wt=C.style[h].length>0;var Ot=ct(g.duration,wt);X(C,Ot);O.push(Ot)}if(g.keyframeStyle){var Tt=[p,g.keyframeStyle];X(C,Tt);O.push(Tt)}var Mt=yt?g.staggerIndex>=0?g.staggerIndex:e.count(_t):0;var It=Mt===0;if(It&&!g.skipBlocking){W(C,x)}var Rt=M(C,pt,_t);var Nt=Rt.maxDelay;V=Math.max(Nt,0);B=Rt.maxDuration;var At={};At.hasTransitions=Rt.transitionDuration>0;At.hasAnimations=Rt.animationDuration>0;At.hasTransitionAll=At.hasTransitions&&Rt.transitionProperty==="all";At.applyTransitionDuration=gt&&(At.hasTransitions&&!At.hasTransitionAll||At.hasAnimations&&!At.hasTransitions);At.applyAnimationDuration=g.duration&&At.hasAnimations;At.applyTransitionDelay=ut(g.delay)&&(At.applyTransitionDuration||At.hasTransitions);At.applyAnimationDelay=ut(g.delay)&&At.hasAnimations;At.recalculateTimingStyles=ft.length>0;if(At.applyTransitionDuration||At.applyAnimationDuration){B=g.duration?parseFloat(g.duration):B;if(At.applyTransitionDuration){At.hasTransitions=true;Rt.transitionDuration=B;wt=C.style[h+m].length>0;O.push(ct(B,wt))}if(At.applyAnimationDuration){At.hasAnimations=true;Rt.animationDuration=B;O.push(at(B))}}if(B===0&&!At.recalculateTimingStyles){return $t()}if(g.delay!=null){var Pt;if(typeof g.delay!=="boolean"){Pt=parseFloat(g.delay);V=Math.max(Pt,0)}if(At.applyTransitionDelay){O.push(ot(Pt))}if(At.applyAnimationDelay){O.push(ot(Pt,true))}}if(g.duration==null&&Rt.transitionDuration>0){At.recalculateTimingStyles=At.recalculateTimingStyles||It}z=V*tt;K=B*tt;if(!g.skipBlocking){At.blockTransition=Rt.transitionDuration>0;At.blockKeyframeAnimation=Rt.animationDuration>0&&yt.animationDelay>0&&yt.animationDuration===0}if(g.from){if(g.cleanupStyles){ht(w,C,Object.keys(g.from))}G(n,g)}if(At.blockTransition||At.blockKeyframeAnimation){Ft(B)}else if(!g.skipBlocking){W(C,false)}return{$$willAnimate:true,end:Dt,start:function(){if(P)return;Y={end:Dt,cancel:jt,resume:null,pause:null};k=new l(Y);T(Ut);return k}};function Dt(){kt()}function jt(){kt(true)}function kt(t){if(P||j&&D)return;P=true;D=false;if(!g.$$skipPreparationClasses){i.removeClass(n,dt)}i.removeClass(n,vt);q(C,false);W(C,false);Ct(O,function(t){C.style[t[0]]=""});b(n,g);$(n,g);if(Object.keys(w).length){Ct(w,function(t,e){if(t){C.style.setProperty(e,t)}else{C.style.removeProperty(e)}})}if(g.onDone){g.onDone()}if(Q&&Q.length){n.off(Q.join(" "),Gt)}var e=n.data(J);if(e){u.cancel(e[0].timer);n.removeData(J)}if(k){k.complete(!t)}}function Ft(t){if(At.blockTransition){W(C,t)}if(At.blockKeyframeAnimation){q(C,!!t)}}function $t(){k=new l({end:Dt,cancel:jt});T(Lt);kt();return{$$willAnimate:false,start:function(){return k},end:Dt}}function Gt(t){t.stopPropagation();var e=t.originalEvent||t;if(e.target!==C){return}var n=e.$manualTimeStamp||Date.now();var i=parseFloat(e.elapsedTime.toFixed(et));if(Math.max(n-Z,0)>=z&&i>=B){j=true;kt()}}function Ut(){if(P)return;if(!C.parentNode){kt();return}var t=function(t){if(!j){D=!t;if(Rt.animationDuration){var e=q(C,D);if(D){O.push(e)}else{A(O,e)}}}else if(D&&t){D=false;kt()}};var e=Mt>0&&(Rt.transitionDuration&&yt.transitionDuration===0||Rt.animationDuration&&yt.animationDuration===0)&&Math.max(yt.animationDelay,yt.transitionDelay);if(e){u(r,Math.floor(e*Mt*tt),false)}else{r()}Y.resume=function(){t(true)};Y.pause=function(){t(false)};function r(){if(P)return;Ft(false);Ct(O,function(t){var e=t[0];var n=t[1];C.style[e]=n});b(n,g);i.addClass(n,vt);if(At.recalculateTimingStyles){pt=C.getAttribute("class")+" "+dt;_t=S(C,pt);Rt=M(C,pt,_t);Nt=Rt.maxDelay;V=Math.max(Nt,0);B=Rt.maxDuration;if(B===0){kt();return}At.hasTransitions=Rt.transitionDuration>0;At.hasAnimations=Rt.animationDuration>0}if(At.applyAnimationDelay){Nt=typeof g.delay!=="boolean"&&ut(g.delay)?parseFloat(g.delay):Nt;V=Math.max(Nt,0);Rt.animationDelay=Nt;Pt=ot(Nt,true);O.push(Pt);C.style[Pt[0]]=Pt[1]}z=V*tt;K=B*tt;if(g.easing){var t,e=g.easing;if(At.hasTransitions){t=h+y;O.push([t,e]);C.style[t]=e}if(At.hasAnimations){t=p+y;O.push([t,e]);C.style[t]=e}}if(Rt.transitionDuration){Q.push(d)}if(Rt.animationDuration){Q.push(v)}Z=Date.now();var r=z+nt*K;var o=Z+r;var s=n.data(J)||[];var l=true;if(s.length){var c=s[0];l=o>c.expectedEndTime;if(l){u.cancel(c.timer)}else{s.push(kt)}}if(l){var f=u(a,r,false);s[0]={timer:f,expectedEndTime:o};s.push(kt);n.data(J,s)}if(Q.length){n.on(Q.join(" "),Gt)}if(g.to){if(g.cleanupStyles){ht(w,C,Object.keys(g.to))}U(n,g)}}function a(){var t=n.data(J);if(t){for(var e=1;e<t.length;e++){t[e]()}n.removeData(J)}}}}}]}];var pt=["$$animationProvider",function(t){t.drivers.push("$$animateCssDriver");var e="ng-animate-shim";var n="ng-anchor";var i="ng-anchor-out";var r="ng-anchor-in";function a(t){return t.parentNode&&t.parentNode.nodeType===11}this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(t,o,s,l,u,c,f){if(!u.animations&&!u.transitions)return Lt;var h=f[0].body;var d=H(l);var p=At(a(d)||h.contains(d)?d:h);return function t(e){return e.from&&e.to?_(e.from,e.to,e.classes,e.anchors):y(e)};function v(t){return t.replace(/\bng-\S+\b/g,"")}function g(t,e){if(Rt(t))t=t.split(" ");if(Rt(e))e=e.split(" ");return t.filter(function(t){return e.indexOf(t)===-1}).join(" ")}function m(a,o,l){var u=At(H(o).cloneNode(true));var c=v(b(u));o.addClass(e);l.addClass(e);u.addClass(n);p.append(u);var f,d=y();if(!d){f=w();if(!f){return x()}}var m=d||f;return{start:function(){var t;var e=m.start();e.done(function(){e=null;if(!f){f=w();if(f){e=f.start();e.done(function(){e=null;x();t.complete()});return e}}x();t.complete()});t=new s({end:n,cancel:n});return t;function n(){if(e){e.end()}}}};function _(t){var e={};var n=H(t).getBoundingClientRect();Ct(["width","height","top","left"],function(t){var i=n[t];switch(t){case"top":i+=h.scrollTop;break;case"left":i+=h.scrollLeft;break}e[t]=Math.floor(i)+"px"});return e}function y(){var e=t(u,{addClass:i,delay:true,from:_(o)});return e.$$willAnimate?e:null}function b(t){return t.attr("class")||""}function w(){var e=v(b(l));var n=g(e,c);var a=g(c,e);var o=t(u,{to:_(l),addClass:r+" "+n,removeClass:i+" "+a,delay:true});return o.$$willAnimate?o:null}function x(){u.remove();o.removeClass(e);l.removeClass(e)}}function _(t,e,n,i){var r=y(t,Lt);var a=y(e,Lt);var o=[];Ct(i,function(t){var e=t["out"];var i=t["in"];var r=m(n,e,i);if(r){o.push(r)}});if(!r&&!a&&o.length===0)return;return{start:function(){var t=[];if(r){t.push(r.start())}if(a){t.push(a.start())}Ct(o,function(e){t.push(e.start())});var e=new s({end:n,cancel:n});s.all(t,function(t){e.complete(t)});return e;function n(){Ct(t,function(t){t.end()})}}}}function y(e){var n=e.element;var i=e.options||{};if(e.structural){i.event=e.event;i.structural=true;i.applyClassesEarly=true;if(e.event==="leave"){i.onDone=i.domOperation}}if(i.preparationClasses){i.event=K(i.event,i.preparationClasses)}var r=t(n,i);return r.$$willAnimate?r:null}}]}];var vt=["$animateProvider",function(t){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(e,n,i){var r=k(i);return function(t,e,i,o){var s=false;if(arguments.length===3&&It(i)){o=i;i=null}o=F(o);if(!i){i=t.attr("class")||"";if(o.addClass){i+=" "+o.addClass}if(o.removeClass){i+=" "+o.removeClass}}var l=o.addClass;var u=o.removeClass;var c=a(i);var f,h;if(c.length){var d,p;if(e==="leave"){p="leave";d="afterLeave"}else{p="before"+e.charAt(0).toUpperCase()+e.substr(1);d=e}if(e!=="enter"&&e!=="move"){f=b(t,e,o,c,p)}h=b(t,e,o,c,d)}if(!f&&!h)return;function v(){o.domOperation();r(t,o)}function g(){s=true;v();$(t,o)}var m;return{$$willAnimate:true,end:function(){if(m){m.end()}else{g();m=new n;m.complete(true)}return m},start:function(){if(m){return m}m=new n;var t;var e=[];if(f){e.push(function(e){t=f(e)})}if(e.length){e.push(function(t){v();t(true)})}else{v()}if(h){e.push(function(e){t=h(e)})}m.setHost({end:function(){r()},cancel:function(){r(true)}});n.chain(e,i);return m;function i(t){g(t);m.complete(t)}function r(e){if(!s){(t||Lt)(e);i(e)}}}};function _(t,e,i,r,a){var o;switch(i){case"animate":o=[e,r.from,r.to,a];break;case"setClass":o=[e,l,u,a];break;case"addClass":o=[e,l,a];break;case"removeClass":o=[e,u,a];break;default:o=[e,a];break}o.push(r);var s=t.apply(t,o);if(s){if(Mt(s.start)){s=s.start()}if(s instanceof n){s.done(a)}else if(Mt(s)){return s}}return Lt}function y(t,e,i,r,a){var o=[];Ct(r,function(r){var s=r[a];if(!s)return;o.push(function(){var r;var a;var o=false;var l=function(t){if(!o){o=true;(a||Lt)(t);r.complete(!t)}};r=new n({end:function(){l()},cancel:function(){l(true)}});a=_(s,t,e,i,function(t){var e=t===false;l(e)});return r})});return o}function b(t,e,i,r,a){var o=y(t,e,i,r,a);if(o.length===0){var s,l;if(a==="beforeSetClass"){s=y(t,"removeClass",i,r,"beforeRemoveClass");l=y(t,"addClass",i,r,"beforeAddClass")}else if(a==="setClass"){s=y(t,"removeClass",i,r,"removeClass");l=y(t,"addClass",i,r,"addClass")}if(s){o=o.concat(s)}if(l){o=o.concat(l)}}if(o.length===0)return;return function t(e){var i=[];if(o.length){Ct(o,function(t){i.push(t())})}if(i.length){n.all(i,e)}else{e()}return function t(e){Ct(i,function(t){if(e){t.cancel()}else{t.end()}})}}}};function a(n){n=Et(n)?n:n.split(" ");var i=[],r={};for(var a=0;a<n.length;a++){var o=n[a],s=t.$$registeredAnimations[o];if(s&&!r[o]){i.push(e.get(s));r[o]=true}}return i}}]}];var gt=["$$animationProvider",function(t){t.drivers.push("$$animateJsDriver");this.$get=["$$animateJs","$$AnimateRunner",function(t,e){return function t(i){if(i.from&&i.to){var r=n(i.from);var a=n(i.to);if(!r&&!a)return;return{start:function(){var t=[];if(r){t.push(r.start())}if(a){t.push(a.start())}e.all(t,o);var n=new e({end:i(),cancel:i()});return n;function i(){return function(){Ct(t,function(t){t.end()})}}function o(t){n.complete(t)}}}}else{return n(i)}};function n(e){var n=e.element;var i=e.event;var r=e.options;var a=e.classes;return t(n,i,a,r)}}]}];var mt="data-ng-animate";var _t="$ngAnimatePin";var yt=["$animateProvider",function(e){var i=1;var r=2;var a=" ";var o=this.rules={skip:[],cancel:[],join:[]};function s(t){if(!t){return null}var e=t.split(a);var n=Object.create(null);Ct(e,function(t){n[t]=true});return n}function l(t,e){if(t&&e){var n=s(e);return t.split(a).some(function(t){return n[t]})}}function u(t,e,n){return o[t].some(function(t){return t(e,n)})}function f(t,e){var n=(t.addClass||"").length>0;var i=(t.removeClass||"").length>0;return e?n&&i:n||i}o.join.push(function(t,e){return!t.structural&&f(t)});o.skip.push(function(t,e){return!t.structural&&!f(t)});o.skip.push(function(t,e){return e.event==="leave"&&t.structural});o.skip.push(function(t,e){return e.structural&&e.state===r&&!t.structural});o.cancel.push(function(t,e){return e.structural&&t.structural});o.cancel.push(function(t,e){return e.state===r&&t.structural});o.cancel.push(function(t,e){if(e.structural)return false;var n=t.addClass;var i=t.removeClass;var r=e.addClass;var a=e.removeClass;if(Nt(n)&&Nt(i)||Nt(r)&&Nt(a)){return false}return l(n,a)||l(i,r)});this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(a,o,s,l,h,d,p,v,g,m,_){var y=new h;var b=new h;var w=null;function x(){var t=false;return function(e){if(t){e()}else{o.$$postDigest(function(){t=true;e()})}}}var S=o.$watch(function(){return v.totalPendingRequests===0},function(t){if(!t)return;S();o.$$postDigest(function(){o.$$postDigest(function(){if(w===null){w=true}})})});var C=Object.create(null);var E=e.customFilter();var O=e.classNameFilter();var T=function(){return true};var I=E||T;var R=!O?T:function(t,e){var n=[t.getAttribute("class"),e.addClass,e.removeClass].join(" ");return O.test(n)};var N=k(g);function A(t,e){return Y(t,e,{})}var D=t.Node.prototype.contains||function(t){return this===t||!!(this.compareDocumentPosition(t)&16)};function j(t,e,n){var i=[];var r=C[n];if(r){Ct(r,function(r){if(D.call(r.node,e)){i.push(r.callback)}else if(n==="leave"&&D.call(r.node,t)){i.push(r.callback)}})}return i}function G(t,e,n){var i=P(e);return t.filter(function(t){var e=t.node===i&&(!n||t.callback===n);return!e})}function U(t,e){if(t==="close"&&!e.parentNode){V.off(e)}}var V={on:function(t,e,n){var i=P(e);C[t]=C[t]||[];C[t].push({node:i,callback:n});At(e).on("$destroy",function(){var r=y.get(i);if(!r){V.off(t,e,n)}})},off:function(t,e,n){if(arguments.length===1&&!Rt(arguments[0])){e=arguments[0];for(var i in C){C[i]=G(C[i],e)}return}var r=C[t];if(!r)return;C[t]=arguments.length===1?null:G(r,e,n)},pin:function(t,e){M(Tt(t),"element","not an element");M(Tt(e),"parentElement","not an element");t.data(_t,e)},push:function(t,e,n,i){n=n||{};n.domOperation=i;return W(t,e,n)},enabled:function(t,e){var n=arguments.length;if(n===0){e=!!w}else{var i=Tt(t);if(!i){e=w=!!t}else{var r=H(t);if(n===1){e=!b.get(r)}else{b.set(r,!e)}}}return e}};return V;function W(t,e,n){var s=xt(n);var l=L(t);var c=H(l);var h=c&&c.parentNode;s=F(s);var v=new p;var g=x();if(Et(s.addClass)){s.addClass=s.addClass.join(" ")}if(s.addClass&&!Rt(s.addClass)){s.addClass=null}if(Et(s.removeClass)){s.removeClass=s.removeClass.join(" ")}if(s.removeClass&&!Rt(s.removeClass)){s.removeClass=null}if(s.from&&!It(s.from)){s.from=null}if(s.to&&!It(s.to)){s.to=null}if(!w||!c||!I(c,e,n)||!R(c,s)){W();return v}var m=["enter","move","leave"].indexOf(e)>=0;var S=_();var C=S||b.get(c);var E=!C&&y.get(c)||{};var O=!!E.state;if(!C&&(!O||E.state!==i)){C=!K(c,h,e)}if(C){if(S)V(v,e,"start");W();if(S)V(v,e,"close");return v}if(m){q(c)}var T={structural:m,element:l,event:e,addClass:s.addClass,removeClass:s.removeClass,close:W,options:s,runner:v};if(O){var M=u("skip",T,E);if(M){if(E.state===r){W();return v}else{Y(l,E,T);return E.runner}}var P=u("cancel",T,E);if(P){if(E.state===r){E.runner.end()}else if(E.structural){E.close()}else{Y(l,E,T);return E.runner}}else{var D=u("join",T,E);if(D){if(E.state===r){A(l,T)}else{z(l,m?e:null,s);e=T.event=E.event;s=Y(l,E,T);return E.runner}}}}else{A(l,T)}var k=T.structural;if(!k){k=T.event==="animate"&&Object.keys(T.options.to||{}).length>0||f(T)}if(!k){W();X(c);return v}var G=(E.counter||0)+1;T.counter=G;Z(c,i,T);o.$$postDigest(function(){l=L(t);var n=y.get(c);var i=!n;n=n||{};var a=l.parent()||[];var o=a.length>0&&(n.event==="animate"||n.structural||f(n));if(i||n.counter!==G||!o){if(i){N(l,s);$(l,s)}if(i||m&&n.event!==e){s.domOperation();v.end()}if(!o){X(c)}return}e=!n.structural&&f(n,true)?"setClass":n.event;Z(c,r);var u=d(l,e,n.options);v.setHost(u);V(v,e,"start",{});u.done(function(t){W(!t);var n=y.get(c);if(n&&n.counter===G){X(c)}V(v,e,"close",{})})});return v;function V(t,e,n,i){g(function(){var t=j(h,c,e);if(t.length){a(function(){Ct(t,function(t){t(l,n,i)});U(n,c)})}else{U(n,c)}});t.progress(e,n,i)}function W(t){B(l,s);N(l,s);$(l,s);s.domOperation();v.complete(!t)}}function q(t){var e=t.querySelectorAll("["+mt+"]");Ct(e,function(t){var e=parseInt(t.getAttribute(mt),10);var n=y.get(t);if(n){switch(e){case r:n.runner.end();case i:y.delete(t);break}}})}function X(t){t.removeAttribute(mt);y.delete(t)}function K(t,e,i){var r=l[0].body;var a=H(s);var o=t===r||t.nodeName==="HTML";var u=t===a;var f=false;var h=b.get(t);var d;var p=At.data(t,_t);if(p){e=H(p)}while(e){if(!u){u=e===a}if(e.nodeType!==n){break}var v=y.get(e)||{};if(!f){var g=b.get(e);if(g===true&&h!==false){h=true;break}else if(g===false){h=false}f=v.structural}if(Nt(d)||d===true){var m=At.data(e,c);if(Ot(m)){d=m}}if(f&&d===false)break;if(!o){o=e===r}if(o&&u){break}if(!u){p=At.data(e,_t);if(p){e=H(p);continue}}e=e.parentNode}var _=(!f||d)&&h!==true;return _&&u&&o}function Z(t,e,n){n=n||{};n.state=e;t.setAttribute(mt,e);var i=y.get(t);var r=i?St(i,n):n;y.set(t,r)}}]}];var bt=["$animateProvider",function(t){var e="ng-animate-ref";var n=this.drivers=[];var i="$$animationRunner";function r(t,e){t.data(i,e)}function a(t){t.removeData(i)}function o(t){return t.data(i)}this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(t,i,s,c,f,h){var d=[];var p=k(t);function v(t){var e={children:[]};var n,i=new f;for(n=0;n<t.length;n++){var r=t[n];i.set(r.domNode,t[n]={domNode:r.domNode,fn:r.fn,children:[]})}for(n=0;n<t.length;n++){a(t[n])}return o(e);function a(t){if(t.processed)return t;t.processed=true;var n=t.domNode;var r=n.parentNode;i.set(n,t);var o;while(r){o=i.get(r);if(o){if(!o.processed){o=a(o)}break}r=r.parentNode}(o||e).children.push(t);return t}function o(t){var e=[];var n=[];var i;for(i=0;i<t.children.length;i++){n.push(t.children[i])}var r=n.length;var a=0;var o=[];for(i=0;i<n.length;i++){var s=n[i];if(r<=0){r=a;a=0;e.push(o);o=[]}o.push(s.fn);s.children.forEach(function(t){a++;n.push(t)});r--}if(o.length){e.push(o)}return e}}return function(f,g,m){m=F(m);var _=["enter","move","leave"].indexOf(g)>=0;var y=new c({end:function(){N()},cancel:function(){N(true)}});if(!n.length){N();return y}r(f,y);var b=I(f.attr("class"),I(m.addClass,m.removeClass));var w=m.tempClasses;if(w){b+=" "+w;m.tempClasses=null}var x;if(_){x="ng-"+g+l;t.addClass(f,x)}d.push({element:f,classes:b,event:g,structural:_,options:m,beforeStart:T,close:N});f.on("$destroy",R);if(d.length>1)return y;i.$$postDigest(function(){var t=[];Ct(d,function(e){if(o(e.element)){t.push(e)}else{e.close()}});d.length=0;var e=C(t);var n=[];Ct(e,function(t){n.push({domNode:H(t.from?t.from.element:t.element),fn:function e(){t.beforeStart();var n,i=t.close;var r=t.anchors?t.from.element||t.to.element:t.element;if(o(r)){var a=O(t);if(a){n=a.start}}if(!n){i()}else{var s=n();s.done(function(t){i(!t)});M(t,s)}}})});h(v(n))});return y;function S(t){var n="["+e+"]";var i=t.hasAttribute(e)?[t]:t.querySelectorAll(n);var r=[];Ct(i,function(t){var n=t.getAttribute(e);if(n&&n.length){r.push(t)}});return r}function C(t){var n=[];var i={};Ct(t,function(t,r){var a=t.element;var o=H(a);var s=t.event;var l=["enter","move"].indexOf(s)>=0;var u=t.structural?S(o):[];if(u.length){var c=l?"to":"from";Ct(u,function(t){var n=t.getAttribute(e);i[n]=i[n]||{};i[n][c]={animationID:r,element:At(t)}})}else{n.push(t)}});var r={};var a={};Ct(i,function(e,i){var o=e.from;var s=e.to;if(!o||!s){var l=o?o.animationID:s.animationID;var u=l.toString();if(!r[u]){r[u]=true;n.push(t[l])}return}var c=t[o.animationID];var f=t[s.animationID];var h=o.animationID.toString();if(!a[h]){var d=a[h]={structural:true,beforeStart:function(){c.beforeStart();f.beforeStart()},close:function(){c.close();f.close()},classes:E(c.classes,f.classes),from:c,to:f,anchors:[]};if(d.classes.length){n.push(d)}else{n.push(c);n.push(f)}}a[h].anchors.push({out:o.element,in:s.element})});return n}function E(t,e){t=t.split(" ");e=e.split(" ");var n=[];for(var i=0;i<t.length;i++){var r=t[i];if(r.substring(0,3)==="ng-")continue;for(var a=0;a<e.length;a++){if(r===e[a]){n.push(r);break}}}return n.join(" ")}function O(t){for(var e=n.length-1;e>=0;e--){var i=n[e];var r=s.get(i);var a=r(t);if(a){return a}}}function T(){f.addClass(u);if(w){t.addClass(f,w)}if(x){t.removeClass(f,x);x=null}}function M(t,e){if(t.from&&t.to){n(t.from.element);n(t.to.element)}else{n(t.element)}function n(t){var n=o(t);if(n)n.setHost(e)}}function R(){var t=o(f);if(t&&(g!=="leave"||!m.$$domOperationFired)){t.end()}}function N(e){f.off("$destroy",R);a(f);p(f,m);$(f,m);m.domOperation();if(w){t.removeClass(f,w)}f.removeClass(u);y.complete(!e)}}}]}];var wt=["$animate","$rootScope",function(t,e){return{restrict:"A",transclude:"element",terminal:true,priority:600,link:function(e,n,i,r,a){var o,s;e.$watchCollection(i.ngAnimateSwap||i["for"],function(i){if(o){t.leave(o)}if(s){s.$destroy();s=null}if(i||i===0){s=e.$new();a(s,function(e){o=e;t.enter(e,null,n)})}})}}}];var xt;var St;var Ct;var Et;var Ot;var Tt;var Mt;var It;var Rt;var Nt;var At;var Lt;e.module("ngAnimate",[],function t(){Lt=e.noop;xt=e.copy;St=e.extend;At=e.element;Ct=e.forEach;Et=e.isArray;Rt=e.isString;It=e.isObject;Nt=e.isUndefined;Ot=e.isDefined;Mt=e.isFunction;Tt=e.isElement}).info({angularVersion:"1.7.0"}).directive("ngAnimateSwap",wt).directive("ngAnimateChildren",Q).factory("$$rAFScheduler",Z).provider("$$animateQueue",yt).provider("$$animation",bt).provider("$animateCss",dt).provider("$$animateCssDriver",pt).provider("$$animateJs",vt).provider("$$animateJsDriver",gt)})(window,window.angular)},function(t,e,n){n(454);t.exports="ngAnimate"},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(r=[n(38),n(118)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){return t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})})},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(r=[n(38),n(293),n(456),n(381),n(118),n(236)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,n){if(t(e).css("overflow")==="hidden"){return false}var i=n&&n==="left"?"scrollLeft":"scrollTop",r=false;if(e[i]>0){return true}e[i]=1;r=e[i]>0;e[i]=0;return r},_create:function(){var e,n=this.options,i=this;this._addClass("ui-resizable");t.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(e);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css(e);this._proportionallyResize()}this._setupHandles();if(n.autoHide){t(this.element).on("mouseenter",function(){if(n.disabled){return}i._removeClass("ui-resizable-autohide");i._handles.show()}).on("mouseleave",function(){if(n.disabled){return}if(!i.resizing){i._addClass("ui-resizable-autohide");i._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,n=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){n(this.element);e=this.element;this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e);e.remove()}this.originalElement.css("resize",this.originalResizeStyle);n(this.originalElement);return this},_setOption:function(t,e){this._super(t,e);switch(t){case"handles":this._removeHandles();this._setupHandles();break;default:break}},_setupHandles:function(){var e=this.options,n,i,r,a,o,s=this;this.handles=e.handles||(!t(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=t();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}r=this.handles.split(",");this.handles={};for(i=0;i<r.length;i++){n=t.trim(r[i]);a="ui-resizable-"+n;o=t("<div>");this._addClass(o,"ui-resizable-handle "+a);o.css({zIndex:e.zIndex});this.handles[n]=".ui-resizable-"+n;this.element.append(o)}}this._renderAxis=function(e){var n,i,r,a;e=e||this.element;for(n in this.handles){if(this.handles[n].constructor===String){this.handles[n]=this.element.children(this.handles[n]).first().show()}else if(this.handles[n].jquery||this.handles[n].nodeType){this.handles[n]=t(this.handles[n]);this._on(this.handles[n],{mousedown:s._mouseDown})}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){i=t(this.handles[n],this.element);a=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth();r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");e.css(r,a);this._proportionallyResize()}this._handles=this._handles.add(this.handles[n])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){if(!s.resizing){if(this.className){o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}s.axis=o&&o[1]?o[1]:"se"}});if(e.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide")}},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var n,i,r=false;for(n in this.handles){i=t(this.handles[n])[0];if(i===e.target||t.contains(i,e.target)){r=true}}return!this.options.disabled&&r},_mouseStart:function(e){var n,i,r,a=this.options,o=this.element;this.resizing=true;this._renderProxy();n=this._num(this.helper.css("left"));i=this._num(this.helper.css("top"));if(a.containment){n+=t(a.containment).scrollLeft()||0;i+=t(a.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:n,top:i};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()};this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()};this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()};this.originalPosition={left:n,top:i};this.originalMousePosition={left:e.pageX,top:e.pageY};this.aspectRatio=typeof a.aspectRatio==="number"?a.aspectRatio:this.originalSize.width/this.originalSize.height||1;r=t(".ui-resizable-"+this.axis).css("cursor");t("body").css("cursor",r==="auto"?this.axis+"-resize":r);this._addClass("ui-resizable-resizing");this._propagate("start",e);return true},_mouseDrag:function(e){var n,i,r=this.originalMousePosition,a=this.axis,o=e.pageX-r.left||0,s=e.pageY-r.top||0,l=this._change[a];this._updatePrevProperties();if(!l){return false}n=l.apply(this,[e,o,s]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey){n=this._updateRatio(n,e)}n=this._respectSize(n,e);this._updateCache(n);this._propagate("resize",e);i=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!t.isEmptyObject(i)){this._updatePrevProperties();this._trigger("resize",e,this.ui());this._applyChanges()}return false},_mouseStop:function(e){this.resizing=false;var n,i,r,a,o,s,l,u=this.options,c=this;if(this._helper){n=this._proportionallyResizeElements;i=n.length&&/textarea/i.test(n[0].nodeName);r=i&&this._hasScroll(n[0],"left")?0:c.sizeDiff.height;a=i?0:c.sizeDiff.width;o={width:c.helper.width()-a,height:c.helper.height()-r};s=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null;l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null;if(!u.animate){this.element.css(t.extend(o,{top:l,left:s}))}c.helper.height(c.size.height);c.helper.width(c.size.width);if(this._helper&&!u.animate){this._proportionallyResize()}}t("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",e);if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};if(this.position.top!==this.prevPosition.top){t.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){t.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){t.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){t.height=this.size.height+"px"}this.helper.css(t);return t},_updateVirtualBoundaries:function(t){var e,n,i,r,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||t){e=a.minHeight*this.aspectRatio;i=a.minWidth/this.aspectRatio;n=a.maxHeight*this.aspectRatio;r=a.maxWidth/this.aspectRatio;if(e>a.minWidth){a.minWidth=e}if(i>a.minHeight){a.minHeight=i}if(n<a.maxWidth){a.maxWidth=n}if(r<a.maxHeight){a.maxHeight=r}}this._vBoundaries=a},_updateCache:function(t){this.offset=this.helper.offset();if(this._isNumber(t.left)){this.position.left=t.left}if(this._isNumber(t.top)){this.position.top=t.top}if(this._isNumber(t.height)){this.size.height=t.height}if(this._isNumber(t.width)){this.size.width=t.width}},_updateRatio:function(t){var e=this.position,n=this.size,i=this.axis;if(this._isNumber(t.height)){t.width=t.height*this.aspectRatio}else if(this._isNumber(t.width)){t.height=t.width/this.aspectRatio}if(i==="sw"){t.left=e.left+(n.width-t.width);t.top=null}if(i==="nw"){t.top=e.top+(n.height-t.height);t.left=e.left+(n.width-t.width)}return t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,i=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,r=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,a=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,o=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,s=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,u=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);if(a){t.width=e.minWidth}if(o){t.height=e.minHeight}if(i){t.width=e.maxWidth}if(r){t.height=e.maxHeight}if(a&&u){t.left=s-e.minWidth}if(i&&u){t.left=s-e.maxWidth}if(o&&c){t.top=l-e.minHeight}if(r&&c){t.top=l-e.maxHeight}if(!t.width&&!t.height&&!t.left&&t.top){t.top=null}else if(!t.width&&!t.height&&!t.top&&t.left){t.left=null}return t},_getPaddingPlusBorderDimensions:function(t){var e=0,n=[],i=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],r=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];for(;e<4;e++){n[e]=parseFloat(i[e])||0;n[e]+=parseFloat(r[e])||0}return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var t,e=0,n=this.helper||this.element;for(;e<this._proportionallyResizeElements.length;e++){t=this._proportionallyResizeElements[e];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(t)}t.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})}},_renderProxy:function(){var e=this.element,n=this.options;this.elementOffset=e.offset();if(this._helper){this.helper=this.helper||t("<div style='overflow:hidden;'></div>");this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize,i=this.originalPosition;return{left:i.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize,r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},sw:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,n,i]))},ne:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},nw:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,n,i]))}},_propagate:function(e,n){t.ui.plugin.call(this,e,[n,this.ui()]);e!=="resize"&&this._trigger(e,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});t.ui.plugin.add("resizable","animate",{stop:function(e){var n=t(this).resizable("instance"),i=n.options,r=n._proportionallyResizeElements,a=r.length&&/textarea/i.test(r[0].nodeName),o=a&&n._hasScroll(r[0],"left")?0:n.sizeDiff.height,s=a?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-o},u=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,c=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(t.extend(l,c&&u?{top:c,left:u}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};if(r&&r.length){t(r[0]).css({width:i.width,height:i.height})}n._updateCache(i);n._propagate("resize",e)}})}});t.ui.plugin.add("resizable","containment",{start:function(){var e,n,i,r,a,o,s,l=t(this).resizable("instance"),u=l.options,c=l.element,f=u.containment,h=f instanceof t?f.get(0):/parent/.test(f)?c.parent().get(0):f;if(!h){return}l.containerElement=t(h);if(/document/.test(f)||f===document){l.containerOffset={left:0,top:0};l.containerPosition={left:0,top:0};l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}}else{e=t(h);n=[];t(["Top","Right","Left","Bottom"]).each(function(t,i){n[t]=l._num(e.css("padding"+i))});l.containerOffset=e.offset();l.containerPosition=e.position();l.containerSize={height:e.innerHeight()-n[3],width:e.innerWidth()-n[1]};i=l.containerOffset;r=l.containerSize.height;a=l.containerSize.width;o=l._hasScroll(h,"left")?h.scrollWidth:a;s=l._hasScroll(h)?h.scrollHeight:r;l.parentData={element:h,left:i.left,top:i.top,width:o,height:s}}},resize:function(e){var n,i,r,a,o=t(this).resizable("instance"),s=o.options,l=o.containerOffset,u=o.position,c=o._aspectRatio||e.shiftKey,f={top:0,left:0},h=o.containerElement,d=true;if(h[0]!==document&&/static/.test(h.css("position"))){f=l}if(u.left<(o._helper?l.left:0)){o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-f.left);if(c){o.size.height=o.size.width/o.aspectRatio;d=false}o.position.left=s.helper?l.left:0}if(u.top<(o._helper?l.top:0)){o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top);if(c){o.size.width=o.size.height*o.aspectRatio;d=false}o.position.top=o._helper?l.top:0}r=o.containerElement.get(0)===o.element.parent().get(0);a=/relative|absolute/.test(o.containerElement.css("position"));if(r&&a){o.offset.left=o.parentData.left+o.position.left;o.offset.top=o.parentData.top+o.position.top}else{o.offset.left=o.element.offset().left;o.offset.top=o.element.offset().top}n=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-f.left:o.offset.left-l.left));i=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-f.top:o.offset.top-l.top));if(n+o.size.width>=o.parentData.width){o.size.width=o.parentData.width-n;if(c){o.size.height=o.size.width/o.aspectRatio;d=false}}if(i+o.size.height>=o.parentData.height){o.size.height=o.parentData.height-i;if(c){o.size.width=o.size.height*o.aspectRatio;d=false}}if(!d){o.position.left=o.prevPosition.left;o.position.top=o.prevPosition.top;o.size.width=o.prevSize.width;o.size.height=o.prevSize.height}},stop:function(){var e=t(this).resizable("instance"),n=e.options,i=e.containerOffset,r=e.containerPosition,a=e.containerElement,o=t(e.helper),s=o.offset(),l=o.outerWidth()-e.sizeDiff.width,u=o.outerHeight()-e.sizeDiff.height;if(e._helper&&!n.animate&&/relative/.test(a.css("position"))){t(this).css({left:s.left-r.left-i.left,width:l,height:u})}if(e._helper&&!n.animate&&/static/.test(a.css("position"))){t(this).css({left:s.left-r.left-i.left,width:l,height:u})}}});t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),n=e.options;t(n.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,n){var i=t(this).resizable("instance"),r=i.options,a=i.originalSize,o=i.originalPosition,s={height:i.size.height-a.height||0,width:i.size.width-a.width||0,top:i.position.top-o.top||0,left:i.position.left-o.left||0};t(r.alsoResize).each(function(){var e=t(this),i=t(this).data("ui-resizable-alsoresize"),r={},a=e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(a,function(t,e){var n=(i[e]||0)+(s[e]||0);if(n&&n>=0){r[e]=n||null}});e.css(r)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}});t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),n=e.size;e.ghost=e.originalElement.clone();e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0});e._addClass(e.ghost,"ui-resizable-ghost");if(t.uiBackCompat!==false&&typeof e.options.ghost==="string"){e.ghost.addClass(this.options.ghost)}e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");if(e.ghost){e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})}},stop:function(){var e=t(this).resizable("instance");if(e.ghost&&e.helper){e.helper.get(0).removeChild(e.ghost.get(0))}}});t.ui.plugin.add("resizable","grid",{resize:function(){var e,n=t(this).resizable("instance"),i=n.options,r=n.size,a=n.originalSize,o=n.originalPosition,s=n.axis,l=typeof i.grid==="number"?[i.grid,i.grid]:i.grid,u=l[0]||1,c=l[1]||1,f=Math.round((r.width-a.width)/u)*u,h=Math.round((r.height-a.height)/c)*c,d=a.width+f,p=a.height+h,v=i.maxWidth&&i.maxWidth<d,g=i.maxHeight&&i.maxHeight<p,m=i.minWidth&&i.minWidth>d,_=i.minHeight&&i.minHeight>p;i.grid=l;if(m){d+=u}if(_){p+=c}if(v){d-=u}if(g){p-=c}if(/^(se|s|e)$/.test(s)){n.size.width=d;n.size.height=p}else if(/^(ne)$/.test(s)){n.size.width=d;n.size.height=p;n.position.top=o.top-h}else if(/^(sw)$/.test(s)){n.size.width=d;n.size.height=p;n.position.left=o.left-f}else{if(p-c<=0||d-u<=0){e=n._getPaddingPlusBorderDimensions(this)}if(p-c>0){n.size.height=p;n.position.top=o.top-h}else{p=c-e.height;n.size.height=p;n.position.top=o.top+a.height-p}if(d-u>0){n.size.width=d;n.position.left=o.left-f}else{d=u-e.width;n.size.width=d;n.position.left=o.left+a.width-d}}}});return t.ui.resizable})},,,,,,,,,,,,function(t,e,n){(function(t){
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
(function(t){t.support.touch="ontouchend"in document;if(!t.support.touch){return}var e=t.ui.mouse.prototype,n=e._mouseInit,i=e._mouseDestroy,r;function a(t,e){if(t.originalEvent.touches.length>1){return}t.preventDefault();var n=t.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(e,true,true,window,1,n.screenX,n.screenY,n.clientX,n.clientY,false,false,false,false,0,null);t.target.dispatchEvent(i)}e._touchStart=function(t){var e=this;if(r||!e._mouseCapture(t.originalEvent.changedTouches[0])){return}r=true;e._touchMoved=false;a(t,"mouseover");a(t,"mousemove");a(t,"mousedown")};e._touchMove=function(t){if(!r){return}this._touchMoved=true;a(t,"mousemove")};e._touchEnd=function(t){if(!r){return}a(t,"mouseup");a(t,"mouseout");if(!this._touchMoved){a(t,"click")}r=false};e._mouseInit=function(){var e=this;e.element.bind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")});n.call(e)};e._mouseDestroy=function(){var e=this;e.element.unbind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")});i.call(e)}})(t)}).call(this,n(38))},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Sortable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Sortable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(r=[n(38),n(293),n(382),n(383),n(380),n(118),n(236)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){return t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return t>=e&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(t,e){this._super(t,e);if(t==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--){this.items[t].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(e,n){var i=null,r=false,a=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(e);t(e.target).parents().each(function(){if(t.data(this,a.widgetName+"-item")===a){i=t(this);return false}});if(t.data(e.target,a.widgetName+"-item")===a){i=t(e.target)}if(!i){return false}if(this.options.handle&&!n){t(this.options.handle,i).find("*").addBack().each(function(){if(this===e.target){r=true}});if(!r){return false}}this.currentItem=i;this._removeCurrentsFromItems();return true},_mouseStart:function(e,n,i){var r,a,o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(e);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(e);this.originalPageX=e.pageX;this.originalPageY=e.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(o.containment){this._setContainment()}if(o.cursor&&o.cursor!=="auto"){a=this.document.find("body");this.storedCursor=a.css("cursor");a.css("cursor",o.cursor);this.storedStylesheet=t("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)}if(o.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",o.opacity)}if(o.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",o.zIndex)}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",e,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!i){for(r=this.containers.length-1;r>=0;r--){this.containers[r]._trigger("activate",e,this._uiHash(this))}}if(t.ui.ddmanager){t.ui.ddmanager.current=this}if(t.ui.ddmanager&&!o.dropBehaviour){t.ui.ddmanager.prepareOffsets(this,e)}this.dragging=true;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(e);return true},_mouseDrag:function(e){var n,i,r,a,o=this.options,s=false;this.position=this._generatePosition(e);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity){this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed}else if(e.pageY-this.overflowOffset.top<o.scrollSensitivity){this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity){this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed}else if(e.pageX-this.overflowOffset.left<o.scrollSensitivity){this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed}}else{if(e.pageY-this.document.scrollTop()<o.scrollSensitivity){s=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed)}else if(this.window.height()-(e.pageY-this.document.scrollTop())<o.scrollSensitivity){s=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)}if(e.pageX-this.document.scrollLeft()<o.scrollSensitivity){s=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed)}else if(this.window.width()-(e.pageX-this.document.scrollLeft())<o.scrollSensitivity){s=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed)}}if(s!==false&&t.ui.ddmanager&&!o.dropBehaviour){t.ui.ddmanager.prepareOffsets(this,e)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(n=this.items.length-1;n>=0;n--){i=this.items[n];r=i.item[0];a=this._intersectsWithPointer(i);if(!a){continue}if(i.instance!==this.currentContainer){continue}if(r!==this.currentItem[0]&&this.placeholder[a===1?"next":"prev"]()[0]!==r&&!t.contains(this.placeholder[0],r)&&(this.options.type==="semi-dynamic"?!t.contains(this.element[0],r):true)){this.direction=a===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(i)){this._rearrange(e,i)}else{break}this._trigger("change",e,this._uiHash());break}}this._contactContainers(e);if(t.ui.ddmanager){t.ui.ddmanager.drag(this,e)}this._trigger("sort",e,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(e,n){if(!e){return}if(t.ui.ddmanager&&!this.options.dropBehaviour){t.ui.ddmanager.drop(this,e)}if(this.options.revert){var i=this,r=this.placeholder.offset(),a=this.options.axis,o={};if(!a||a==="x"){o.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)}if(!a||a==="y"){o.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)}this.reverting=true;t(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else{this._clear(e,n)}return false},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null}));if(this.options.helper==="original"){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("deactivate",null,this._uiHash(this));if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",null,this._uiHash(this));this.containers[e].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}t.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){t(this.domPosition.prev).after(this.currentItem)}else{t(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];e=e||{};t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);if(n){i.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}});if(!i.length&&e.key){i.push(e.key+"=")}return i.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];e=e||{};n.each(function(){i.push(t(e.item||this).attr(e.attribute||"id")||"")});return i},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,a=t.left,o=a+t.width,s=t.top,l=s+t.height,u=this.offset.click.top,c=this.offset.click.left,f=this.options.axis==="x"||i+u>s&&i+u<l,h=this.options.axis==="y"||e+c>a&&e+c<o,d=f&&h;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]){return d}else{return a<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&s<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l}},_intersectsWithPointer:function(t){var e,n,i=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),a=i&&r;if(!a){return false}e=this._getDragVerticalDirection();n=this._getDragHorizontalDirection();return this.floating?n==="right"||e==="down"?2:1:e&&(e==="down"?2:1)},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();if(this.floating&&r){return r==="right"&&n||r==="left"&&!n}else{return i&&(i==="down"&&e||i==="up"&&!e)}},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return t!==0&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return t!==0&&(t>0?"right":"left")},refresh:function(t){this._refreshItems(t);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var n,i,r,a,o=[],s=[],l=this._connectWith();if(l&&e){for(n=l.length-1;n>=0;n--){r=t(l[n],this.document[0]);for(i=r.length-1;i>=0;i--){a=t.data(r[i],this.widgetFullName);if(a&&a!==this&&!a.options.disabled){s.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}}}s.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function u(){o.push(this)}for(n=s.length-1;n>=0;n--){s[n][0].each(u)}return t(o)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;n<e.length;n++){if(e[n]===t.item[0]){return false}}return true})},_refreshItems:function(e){this.items=[];this.containers=[this];var n,i,r,a,o,s,l,u,c=this.items,f=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready){for(n=h.length-1;n>=0;n--){r=t(h[n],this.document[0]);for(i=r.length-1;i>=0;i--){a=t.data(r[i],this.widgetFullName);if(a&&a!==this&&!a.options.disabled){f.push([t.isFunction(a.options.items)?a.options.items.call(a.element[0],e,{item:this.currentItem}):t(a.options.items,a.element),a]);this.containers.push(a)}}}}for(n=f.length-1;n>=0;n--){o=f[n][1];s=f[n][0];for(i=0,u=s.length;i<u;i++){l=t(s[i]);l.data(this.widgetName+"-item",o);c.push({item:l,instance:o,width:0,height:0,left:0,top:0})}}},refreshPositions:function(e){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var n,i,r,a;for(n=this.items.length-1;n>=0;n--){i=this.items[n];if(i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]){continue}r=this.options.toleranceElement?t(this.options.toleranceElement,i.item):i.item;if(!e){i.width=r.outerWidth();i.height=r.outerHeight()}a=r.offset();i.left=a.left;i.top=a.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(n=this.containers.length-1;n>=0;n--){a=this.containers[n].element.offset();this.containers[n].containerCache.left=a.left;this.containers[n].containerCache.top=a.top;this.containers[n].containerCache.width=this.containers[n].element.outerWidth();this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}}return this},_createPlaceholder:function(e){e=e||this;var n,i=e.options;if(!i.placeholder||i.placeholder.constructor===String){n=i.placeholder;i.placeholder={element:function(){var i=e.currentItem[0].nodeName.toLowerCase(),r=t("<"+i+">",e.document[0]);e._addClass(r,"ui-sortable-placeholder",n||e.currentItem[0].className)._removeClass(r,"ui-sortable-helper");if(i==="tbody"){e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(r))}else if(i==="tr"){e._createTrPlaceholder(e.currentItem,r)}else if(i==="img"){r.attr("src",e.currentItem.attr("src"))}if(!n){r.css("visibility","hidden")}return r},update:function(t,r){if(n&&!i.forcePlaceholderSize){return}if(!r.height()){r.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10))}if(!r.width()){r.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}}}}e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem));e.currentItem.after(e.placeholder);i.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,n){var i=this;e.children().each(function(){t("<td>&#160;</td>",i.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(e){var n,i,r,a,o,s,l,u,c,f,h=null,d=null;for(n=this.containers.length-1;n>=0;n--){if(t.contains(this.currentItem[0],this.containers[n].element[0])){continue}if(this._intersectsWith(this.containers[n].containerCache)){if(h&&t.contains(this.containers[n].element[0],h.element[0])){continue}h=this.containers[n];d=n}else{if(this.containers[n].containerCache.over){this.containers[n]._trigger("out",e,this._uiHash(this));this.containers[n].containerCache.over=0}}}if(!h){return}if(this.containers.length===1){if(!this.containers[d].containerCache.over){this.containers[d]._trigger("over",e,this._uiHash(this));this.containers[d].containerCache.over=1}}else{r=1e4;a=null;c=h.floating||this._isFloating(this.currentItem);o=c?"left":"top";s=c?"width":"height";f=c?"pageX":"pageY";for(i=this.items.length-1;i>=0;i--){if(!t.contains(this.containers[d].element[0],this.items[i].item[0])){continue}if(this.items[i].item[0]===this.currentItem[0]){continue}l=this.items[i].item.offset()[o];u=false;if(e[f]-l>this.items[i][s]/2){u=true}if(Math.abs(e[f]-l)<r){r=Math.abs(e[f]-l);a=this.items[i];this.direction=u?"up":"down"}}if(!a&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[d]){if(!this.currentContainer.containerCache.over){this.containers[d]._trigger("over",e,this._uiHash());this.currentContainer.containerCache.over=1}return}a?this._rearrange(e,a,null,true):this._rearrange(e,null,this.containers[d].element,true);this._trigger("change",e,this._uiHash());this.containers[d]._trigger("change",e,this._uiHash(this));this.currentContainer=this.containers[d];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[d]._trigger("over",e,this._uiHash(this));this.containers[d].containerCache.over=1}},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;if(!i.parents("body").length){t(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0])}if(i[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!i[0].style.width||n.forceHelperSize){i.width(this.currentItem.width())}if(!i[0].style.height||n.forceHelperSize){i.height(this.currentItem.height())}return i},_adjustOffsetFromHelper:function(e){if(typeof e==="string"){e=e.split(" ")}if(t.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left"in e){this.offset.click.left=e.left+this.margins.left}if("right"in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top"in e){this.offset.click.top=e.top+this.margins.top}if("bottom"in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])){e.left+=this.scrollParent.scrollLeft();e.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&t.ui.ie){e={top:0,left:0}}return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options;if(r.containment==="parent"){r.containment=this.helper[0].parentNode}if(r.containment==="document"||r.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,r.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(r.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(r.containment)){e=t(r.containment)[0];n=t(r.containment).offset();i=t(e).css("overflow")!=="hidden";this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,n){if(!n){n=this.position}var i=e==="absolute"?1:-1,r=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,a=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())*i}},_generatePosition:function(e){var n,i,r=this.options,a=e.pageX,o=e.pageY,s=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(s[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(e.pageX-this.offset.click.left<this.containment[0]){a=this.containment[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<this.containment[1]){o=this.containment[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>this.containment[2]){a=this.containment[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>this.containment[3]){o=this.containment[3]+this.offset.click.top}}if(r.grid){n=this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1];o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n;i=this.originalPageX+Math.round((a-this.originalPageX)/r.grid[0])*r.grid[0];a=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?e.item[0]:e.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){if(r===this.counter){this.refreshPositions(!i)}})},_clear:function(t,e){this.reverting=false;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(n in this._storedCSS){if(this._storedCSS[n]==="auto"||this._storedCSS[n]==="static"){this._storedCSS[n]=""}}this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!e){i.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!e){i.push(function(t){this._trigger("update",t,this._uiHash())})}if(this!==this.currentContainer){if(!e){i.push(function(t){this._trigger("remove",t,this._uiHash())});i.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer));i.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))}}function r(t,e,n){return function(i){n._trigger(t,i,e._uiHash(e))}}for(n=this.containers.length-1;n>=0;n--){if(!e){i.push(r("deactivate",this,this.containers[n]))}if(this.containers[n].containerCache.over){i.push(r("out",this,this.containers[n]));this.containers[n].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(!e){this._trigger("beforeStop",t,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null}if(!e){for(n=0;n<i.length;n++){i[n].call(this,t)}this._trigger("stop",t,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function(){if(t.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}})})},function(t,e){t.exports='<div class=ngeo-grid-table-container> <table float-thead=ctrl.floatTheadConfig ng-model=ctrl.configuration.data class="table table-bordered table-striped table-hover"> <thead class=table-header> <tr> <th ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-click=ctrl.sort(columnDefs.name) ng-bind-html="columnDefs.name | ngeoTrustHtml | translate"> <i ng-show="ctrl.sortedBy !== columnDefs.name" class="fa fa-fw"></i> <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === true" class="fa fa-caret-up"></i> <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === false" class="fa fa-caret-down"></i> </th> </tr> </thead> <tbody> <tr ng-repeat="attributes in ctrl.configuration.data" ng-class="[\'row-\' + ctrl.configuration.getRowUid(attributes), ctrl.configuration.isRowSelected(attributes) ? \'ngeo-grid-active\': \'\']" ng-click="ctrl.clickRow(attributes, $event)" ng-mousedown=ctrl.preventTextSelection($event)> <td ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-bind-html="attributes[columnDefs.name] | removeCDATA | ngeoTrustHtml"></td> </tr> </tbody> </table> </div> '},function(t,e,n){(function(t){
/**
 * floatThead wrapper for AngularJS
 * @version v0.1.0 - 2015-10-25
 * @link https://github.com/brandon-barker/angular-floatThead
 * @author Brandon Barker
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function(){"use strict";angular.module("floatThead",[]).directive("floatThead",["$timeout","$log",e]);function e(e,n){var i={require:"?ngModel",scope:{floatThead:"=?",floatTheadEnabled:"=?"},controller:["$scope","$element","$attrs",function(t,e,n){if(!n.hasOwnProperty("floatTheadEnabled")){t.floatTheadEnabled=n.floatTheadEnabled=true}if(!n.hasOwnProperty("floatThead")||n.floatThead===""){t.floatThead=n.floatThead={}}}],link:r,restrict:"A"};return i;function r(i,r,a,o){i.$watch("floatTheadEnabled",function(e){if(e===true){if(angular.isObject(i.floatThead)){t(r).floatThead(i.floatThead)}}else{t(r).floatThead("destroy")}});i.$watch("floatThead",function(e,n){if(e===n||!i.floatTheadEnabled){return}t(r).floatThead("destroy");if(angular.isObject(e)){t(r).floatThead(e)}},true);if(o){o.$formatters.push(function(){if(i.floatTheadEnabled&&angular.isObject(i.floatThead)){e(function(){t(r).floatThead("reflow")})}})}else{n.info("floatThead: ngModel not provided!")}r.bind("update",function(){e(function(){t(r).floatThead("reflow")},0)});r.bind("$destroy",function(){t(r).floatThead("destroy")})}}})()}).call(this,n(38))},function(t,e,n){(function(e){/** @preserve jQuery.floatThead 2.1.2 - https://mkoryak.github.io/floatThead/ - Copyright (c) 2012 - 2018 Misha Koryak **/
// @license MIT
(function(t){t.floatThead=t.floatThead||{};t.floatThead.defaults={headerCellSelector:"tr:visible:first>*:visible",zIndex:1001,position:"auto",top:0,bottom:0,scrollContainer:function(e){return t([])},responsiveContainer:function(e){return t([])},getSizingRow:function(t,e,n){return t.find("tbody tr:visible:first>*:visible")},floatTableClass:"floatThead-table",floatWrapperClass:"floatThead-wrapper",floatContainerClass:"floatThead-container",copyTableClass:true,autoReflow:false,debug:false,support:{bootstrap:true,datatables:true,jqueryUI:true,perfectScrollbar:true},floatContainerCss:{"overflow-x":"hidden"}};var e=function e(){var n={};var i=Object.prototype.hasOwnProperty,r=["Arguments","Function","String","Number","Date","RegExp"];n.has=function(t,e){return i.call(t,e)};n.keys=Object.keys||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)if(n.has(t,i))e.push(i);return e};var a=0;n.uniqueId=function(t){var e=++a+"";return t?t+e:e};t.each(r,function(){var t=this;n["is"+t]=function(e){return Object.prototype.toString.call(e)=="[object "+t+"]"}});n.debounce=function(t,e,n){var i,r,a,o,s;return function(){a=this;r=arguments;o=new Date;var l=function(){var u=new Date-o;if(u<e){i=setTimeout(l,e-u)}else{i=null;if(!n)s=t.apply(a,r)}};var u=n&&!i;if(!i){i=setTimeout(l,e)}if(u)s=t.apply(a,r);return s}};return n}();var n=typeof MutationObserver!=="undefined";var i=function(){for(var t=3,e=document.createElement("b"),n=e.all||[];t=1+t,e.innerHTML="\x3c!--[if gt IE "+t+"]><i><![endif]--\x3e",n[0];);return 4<t?t:document.documentMode}();var r=/Gecko\//.test(navigator.userAgent);var a=/WebKit\//.test(navigator.userAgent);if(!(i||r||a)){i=11}var o=function(){if(a){var e=t("<div>").css("width",0).append(t("<table>").css("max-width","100%").append(t("<tr>").append(t("<th>").append(t("<div>").css("min-width",100).text("X")))));t("body").append(e);var n=e.find("table").width()==0;e.remove();return n}return false};var s=!r&&!i;var l=t(window);var u=r&&window.matchMedia;if(!window.matchMedia||u){var c=window.onbeforeprint;var f=window.onafterprint;window.onbeforeprint=function(){c&&c();l.triggerHandler("beforeprint")};window.onafterprint=function(){f&&f();l.triggerHandler("afterprint")}}function h(t,n){if(i==8){var r=l.width();var a=e.debounce(function(){var t=l.width();if(r!=t){r=t;n()}},1);l.on(t,a)}else{l.on(t,e.debounce(n,1))}}function d(e){var n=e[0];var i=n.parentElement;do{var r=window.getComputedStyle(i).getPropertyValue("overflow");if(r!="visible")break}while(i=i.parentElement);if(i==document.body){return t([])}return t(i)}function p(t){window&&window.console&&window.console.error&&window.console.error("jQuery.floatThead: "+t)}function v(t){var e=t.getBoundingClientRect();return e.width||e.right-e.left}function g(){var t=document.createElement("scrolltester");t.style.cssText="width:100px;height:100px;overflow:scroll!important;position:absolute;top:-9999px;display:block";document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;document.body.removeChild(t);return e}function m(t){if(t.dataTableSettings){for(var e=0;e<t.dataTableSettings.length;e++){var n=t.dataTableSettings[e].nTable;if(t[0]==n){return true}}}return false}function _(t,e,n){var i=n?"outerWidth":"width";if(o&&t.css("max-width")){var r=0;if(n){r+=parseInt(t.css("borderLeft"),10);r+=parseInt(t.css("borderRight"),10)}for(var a=0;a<e.length;a++){r+=v(e.get(a))}return r}else{return t[i]()}}t.fn.floatThead=function(r){r=r||{};if(i<8){return this}var c=null;if(e.isFunction(o)){o=o()}if(e.isString(r)){var f=r;var y=Array.prototype.slice.call(arguments,1);var b=this;this.filter("table").each(function(){var n=t(this);var i=n.data("floatThead-lazy");if(i){n.floatThead(i)}var r=n.data("floatThead-attached");if(r&&e.isFunction(r[f])){var a=r[f].apply(this,y);if(a!==undefined){b=a}}});return b}var w=t.extend({},t.floatThead.defaults||{},r);t.each(r,function(n,i){if(!(n in t.floatThead.defaults)&&w.debug){p("Used ["+n+"] key to init plugin, but that param is not an option for the plugin. Valid options are: "+e.keys(t.floatThead.defaults).join(", "))}});if(w.debug){var x=t.fn.jquery.split(".");if(parseInt(x[0],10)==1&&parseInt(x[1],10)<=7){p("jQuery version "+t.fn.jquery+" detected! This plugin supports 1.8 or better, or 1.7.x with jQuery UI 1.8.24 -> http://jqueryui.com/resources/download/jquery-ui-1.8.24.zip")}}this.filter(":not(."+w.floatTableClass+")").each(function(){var r=e.uniqueId();var o=t(this);if(o.data("floatThead-attached")){return true}if(!o.is("table")){throw new Error('jQuery.floatThead must be run on a table element. ex: $("table").floatThead();')}n=w.autoReflow&&n;var f=o.children("thead:first");var y=o.children("tbody:first");if(f.length==0||y.length==0){if(w.debug){if(f.length==0){p("The thead element is missing.")}else{p("The tbody element is missing.")}}o.data("floatThead-lazy",w);o.unbind("reflow").one("reflow",function(){o.floatThead(w)});return}if(o.data("floatThead-lazy")){o.unbind("reflow")}o.data("floatThead-lazy",false);var b=true;var x,S;var C={vertical:0,horizontal:0};if(e.isFunction(g)){g=g()}var E=0;if(w.scrollContainer===true){w.scrollContainer=d}var O=w.scrollContainer(o)||t([]);var T=O.length>0;var M=T?t([]):w.responsiveContainer(o)||t([]);var I=gt();var R=null;if(w.position==="auto"){R=null}else if(w.position==="fixed"){R=false}else if(w.position==="absolute"){R=true}else if(w.debug){p('Invalid value given to "position" option, valid is "fixed", "absolute" and "auto". You passed: ',w.position)}if(R==null){R=T}var N=o.find("caption");var A=N.length==1;if(A){var L=(N.css("caption-side")||N.attr("align")||"top")==="top"}var P=t("<fthfoot>").css({display:"table-footer-group","border-spacing":0,height:0,"border-collapse":"collapse",visibility:"hidden"});var D=false;var j=t([]);var k=i<=9&&!T&&R;var F=t("<table/>");var $=t("<colgroup/>");var G=o.children("colgroup:first");var U=true;if(G.length==0){G=t("<colgroup/>");U=false}var Y=t("<fthtr>").css({display:"table-row","border-spacing":0,height:0,"border-collapse":"collapse"});var V=t("<div>").css(w.floatContainerCss).attr("aria-hidden","true");var H=false;var z=t("<thead/>");var B=t('<tr class="size-row" aria-hidden="true"/>');var W=t([]);var q=t([]);var X=t([]);var K=t([]);z.append(B);o.prepend(G);if(s){P.append(Y);o.append(P)}F.append($);V.append(F);if(w.copyTableClass){F.attr("class",o.attr("class"))}F.attr({cellpadding:o.attr("cellpadding"),cellspacing:o.attr("cellspacing"),border:o.attr("border")});var Z=o.css("display");F.css({borderCollapse:o.css("borderCollapse"),border:o.css("border"),display:Z});if(!T){F.css("width","auto")}if(Z==="none"){H=true}F.addClass(w.floatTableClass).css({margin:0,"border-bottom-width":0});if(R){var Q=function(e,n){var i=e.css("position");var r=i=="relative"||i=="absolute";var a=e;if(!r||n){var o={paddingLeft:e.css("paddingLeft"),paddingRight:e.css("paddingRight")};V.css(o);a=e.data("floatThead-containerWrap")||e.wrap(t("<div>").addClass(w.floatWrapperClass).css({position:"relative",clear:"both"})).parent();e.data("floatThead-containerWrap",a);D=true}return a};if(T){j=Q(O,true);j.prepend(V)}else{j=Q(o);o.before(V)}}else{o.before(V)}V.css({position:R?"absolute":"fixed",marginTop:0,top:R?0:"auto",zIndex:w.zIndex,willChange:"transform"});V.addClass(w.floatContainerClass);ot();var J={"table-layout":"fixed"};var tt={"table-layout":o.css("tableLayout")||"auto"};var et=o[0].style.width||"";var nt=o.css("minWidth")||"";function it(t){return t+".fth-"+r+".floatTHead"}function rt(){var e=0;f.children("tr:visible").each(function(){e+=t(this).outerHeight(true)});if(o.css("border-collapse")=="collapse"){var n=parseInt(o.css("border-top-width"),10);var i=parseInt(o.find("thead tr:first").find(">*:first").css("border-top-width"),10);if(n>i){e-=n/2}}B.outerHeight(e);W.outerHeight(e)}function at(){var t=_(o,K,true);var e=I?M:O;var n=e.length?v(e[0]):t;var i=e.css("overflow-y")!="hidden"?n-C.vertical:n;V.width(i);if(T){var r=100*t/i;F.css("width",r+"%")}else{F.outerWidth(t)}}function ot(){x=(e.isFunction(w.top)?w.top(o):w.top)||0;S=(e.isFunction(w.bottom)?w.bottom(o):w.bottom)||0}function st(){var e;var n=f.find(w.headerCellSelector);if(U){e=G.find("col").length}else{e=0;n.each(function(){e+=parseInt(t(this).attr("colspan")||1,10)})}if(e!==E){E=e;var i=[],r=[],a=[],o;for(var l=0;l<e;l++){o=n.eq(l).text();i.push('<th class="floatThead-col" aria-label="'+o+'"/>');r.push("<col/>");a.push(t("<fthtd>").css({display:"table-cell",height:0,width:"auto"}))}r=r.join("");i=i.join("");if(s){Y.empty();Y.append(a);K=Y.find("fthtd")}B.html(i);W=B.find("th");if(!U){G.html(r)}q=G.find("col");$.html(r);X=$.find("col")}return e}function lt(){if(!b){b=true;if(R){var t=_(o,K,true);var e=j.width();if(t>e){o.css("minWidth",t)}}o.css(J);F.css(J);F.append(f);y.before(z);rt()}}function ut(){if(b){b=false;if(R){o.width(et)}z.detach();o.prepend(f);o.css(tt);F.css(tt);o.css("minWidth",nt);o.css("minWidth",_(o,K))}}var ct=false;function ft(t){if(ct!=t){ct=t;o.triggerHandler("floatThead",[t,V])}}function ht(t){if(R!=t){R=t;V.css({position:R?"absolute":"fixed"})}}function dt(t,e,n,i){if(s){return n}else if(i){return w.getSizingRow(t,e,n)}else{return e}}function pt(){var t;var e=st();return function(){var n=V.scrollLeft();q=G.find("col");var r=dt(o,q,K,i);if(r.length==e&&e>0){if(!U){for(t=0;t<e;t++){q.eq(t).css("width","")}}ut();var a=[];for(t=0;t<e;t++){a[t]=v(r.get(t))}for(t=0;t<e;t++){X.eq(t).width(a[t]);q.eq(t).width(a[t])}lt()}else{F.append(f);o.css(tt);F.css(tt);rt()}V.scrollLeft(n);o.triggerHandler("reflowed",[V])}}function vt(t){var e=O.css("border-"+t+"-width");var n=0;if(e&&~e.indexOf("px")){n=parseInt(e,10)}return n}function gt(){return M.css("overflow-x")=="auto"}function mt(){var t=O.scrollTop();var e;var n=0;var i=A?N.outerHeight(true):0;var r=L?i:-i;var s=V.height();var u=o.offset();var c=0;var f=0;if(T){var h=O.offset();n=u.top-h.top+t;if(A&&L){n+=i}c=vt("left");f=vt("top");n-=f}else{e=u.top-x-s+S+C.horizontal}var d=l.scrollTop();var p=l.scrollLeft();var v=function(){return(gt()?M:O).scrollLeft()||0};var g=v();return function(h){I=gt();var m=o[0].offsetWidth<=0&&o[0].offsetHeight<=0;if(!m&&H){H=false;setTimeout(function(){o.triggerHandler("reflow")},1);return null}if(m){H=true;if(!R){return null}}if(h=="windowScroll"){d=l.scrollTop();p=l.scrollLeft()}else if(h=="containerScroll"){if(M.length){if(!I){return}g=M.scrollLeft()}else{t=O.scrollTop();g=O.scrollLeft()}}else if(h!="init"){d=l.scrollTop();p=l.scrollLeft();t=O.scrollTop();g=v()}if(a&&(d<0||p<0)){return}if(k){if(h=="windowScrollDone"){ht(true)}else{ht(false)}}else if(h=="windowScrollDone"){return null}u=o.offset();if(A&&L){u.top+=i}var _,y;var b=o.outerHeight();if(T&&R){if(n>=t){var w=n-t+f;_=w>0?w:0;ft(false)}else{_=D?f:t;ft(true)}y=c}else if(!T&&R){if(d>e+b+r){_=b-s+r}else if(u.top>=d+x){_=0;ut();ft(false)}else{_=x+d-u.top+n+(L?i:0);lt();ft(true)}y=g}else if(T&&!R){if(n>t||t-n>b){_=u.top-d;ut();ft(false)}else{_=u.top+t-d-n;lt();ft(true)}y=u.left+g-p}else if(!T&&!R){if(d>e+b+r){_=b+x-d+e+r}else if(u.top>d+x){_=u.top-d;lt();ft(false)}else{_=x;ft(true)}y=u.left+g-p}return{top:Math.round(_),left:Math.round(y)}}}function _t(){var t=null;var e=null;var n=null;return function(r,a,o){if(r!=null&&(t!=r.top||e!=r.left)){if(i===8){V.css({top:r.top,left:r.left})}else{var s="translateX("+r.left+"px) translateY("+r.top+"px)";var l={"-webkit-transform":s,"-moz-transform":s,"-ms-transform":s,"-o-transform":s,transform:s,top:0};l[/rtl/i.test(document.documentElement.dir||"")?"right":"left"]=0;V.css(l)}t=r.top;e=r.left}if(a){at()}if(o){rt()}var u=(I?M:O).scrollLeft();if(!R||n!=u){V.scrollLeft(u);n=u}}}function yt(){if(O.length){if(w.support&&w.support.perfectScrollbar&&O.data().perfectScrollbar){C={horizontal:0,vertical:0}}else{if(O.css("overflow-x")=="scroll"){C.horizontal=g}else{var t=O.width(),e=_(o,K);var n=i<r?g:0;C.horizontal=t-n<e?g:0}if(O.css("overflow-y")=="scroll"){C.vertical=g}else{var i=O.height(),r=o.height();var a=t<e?g:0;C.vertical=i-a<r?g:0}}}}yt();var bt;var wt=function(){bt=pt();bt()};wt();var xt=mt();var St=_t();St(xt("init"),true);var Ct=e.debounce(function(){St(xt("windowScrollDone"),false)},1);var Et=function(){St(xt("windowScroll"),false);if(k){Ct()}};var Ot=function(){St(xt("containerScroll"),false)};var Tt=function(){if(o.is(":hidden")){return}ot();yt();wt();xt=mt();St=_t();St(xt("resize"),true,true)};var Mt=e.debounce(function(){if(o.is(":hidden")){return}yt();ot();wt();xt=mt();St(xt("reflow"),true,true)},1);var It=function(){ut()};var Rt=function(){lt()};var Nt=function(t){if(t.matches){It()}else{Rt()}};var At=null;if(window.matchMedia&&window.matchMedia("print").addListener&&!u){At=window.matchMedia("print");At.addListener(Nt)}else{l.on("beforeprint",It);l.on("afterprint",Rt)}if(T){if(R){O.on(it("scroll"),Ot)}else{O.on(it("scroll"),Ot);l.on(it("scroll"),Et)}}else{M.on(it("scroll"),Ot);l.on(it("scroll"),Et)}l.on(it("load"),Mt);h(it("resize"),Tt);o.on("reflow",Mt);if(w.support&&w.support.datatables&&m(o)){o.on("filter",Mt).on("sort",Mt).on("page",Mt)}if(w.support&&w.support.bootstrap){l.on(it("shown.bs.tab"),Mt)}if(w.support&&w.support.jqueryUI){l.on(it("tabsactivate"),Mt)}if(n){var Lt=null;if(e.isFunction(w.autoReflow)){Lt=w.autoReflow(o,O)}if(!Lt){Lt=O.length?O[0]:o[0]}c=new MutationObserver(function(t){var e=function(t){return t&&t[0]&&(t[0].nodeName=="THEAD"||t[0].nodeName=="TD"||t[0].nodeName=="TH")};for(var n=0;n<t.length;n++){if(!(e(t[n].addedNodes)||e(t[n].removedNodes))){Mt();break}}});c.observe(Lt,{childList:true,subtree:true})}o.data("floatThead-attached",{destroy:function(){var t=".fth-"+r;ut();o.css(tt);G.remove();s&&P.remove();if(z.parent().length){z.replaceWith(f)}ft(false);if(n){c.disconnect();c=null}o.off("reflow reflowed");O.off(t);M.off(t);if(D){if(O.length){O.unwrap()}else{o.unwrap()}}if(T){O.data("floatThead-containerWrap",false)}else{o.data("floatThead-containerWrap",false)}o.css("minWidth",nt);V.remove();o.data("floatThead-attached",false);l.off(t);if(At){At.removeListener(Nt)}It=Rt=function(){};return function t(){return o.floatThead(w)}},reflow:function(){Mt()},setHeaderHeight:function(){rt()},getFloatContainer:function(){return V},getRowGroups:function(){if(b){return V.find(">table>thead").add(o.children("tbody,tfoot"))}else{return o.children("thead,tbody,tfoot")}}})});return this}})(function(){var i=e;if(typeof t!=="undefined"&&t.exports&&!i){i=n(38)}return i}())}).call(this,n(38))},function(t,e){t.exports='<div class=ngeo-googlestreetview-instructions ng-if="$ctrl.location === null" translate> Click on a road on the map to start StreetView. </div> <div class=ngeo-googlestreetview-nodata ng-if=$ctrl.noDataAtLocation translate> Street View data not found for this location. </div> '},function(t,e){t.exports='<ul class=gmf-theme-selector> <li ng-repeat="theme in $ctrl.themes" ng-click=$ctrl.setTheme(theme) ng-class="{\'gmf-theme-selector-active\': $ctrl.gmfThemeManager.getThemeName() == theme.name}"> <img class=gmf-thumb ng-src={{::theme.icon}} /> <span class=gmf-text>{{theme.name | translate}}</span> </li> </ul> '},function(t,e){t.exports='<div class=gmf-search> <input type=text ng-attr-placeholder={{$ctrl.placeholder|translate}} class=form-control ng-model=$ctrl.inputValue ngeo-search=$ctrl.options ngeo-search-datasets=$ctrl.datasets ngeo-search-listeners=$ctrl.listeners> <span class="gmf-clear-button ng-hide" ng-hide="!$ctrl.clearButton || $ctrl.inputValue == \'\'" ng-click=$ctrl.onClearButton()> </span> </div> <span ng-if=$ctrl.colorChooser> <span ng-show=$ctrl.displayColorPicker ngeo-popover ngeo-popover-placement=bottom> <button class="gmf-color-button fa fa-tint" ngeo-popover-anchor data-original-title="{{\'Change the color of the search result\'|translate}}"></button> <div ngeo-popover-content> <div ngeo-colorpicker ngeo-colorpicker-color=$ctrl.color></div> </div> </span> </span> '},function(t,e){var n=t.exports={};var i;var r;function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){i=setTimeout}else{i=a}}catch(t){i=a}try{if(typeof clearTimeout==="function"){r=clearTimeout}else{r=o}}catch(t){r=o}})();function s(t){if(i===setTimeout){return setTimeout(t,0)}if((i===a||!i)&&setTimeout){i=setTimeout;return setTimeout(t,0)}try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}function l(t){if(r===clearTimeout){return clearTimeout(t)}if((r===o||!r)&&clearTimeout){r=clearTimeout;return clearTimeout(t)}try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}var u=[];var c=false;var f;var h=-1;function d(){if(!c||!f){return}c=false;if(f.length){u=f.concat(u)}else{h=-1}if(u.length){p()}}function p(){if(c){return}var t=s(d);c=true;var e=u.length;while(e){f=u;u=[];while(++h<e){if(f){f[h].run()}}h=-1;e=u.length}f=null;c=false;l(t)}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){e[n-1]=arguments[n]}}u.push(new v(t,e));if(u.length===1&&!c){s(p)}};function v(t,e){this.fun=t;this.array=e}v.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function g(){}n.on=g;n.addListener=g;n.once=g;n.off=g;n.removeListener=g;n.removeAllListeners=g;n.emit=g;n.prependListener=g;n.prependOnceListener=g;n.listeners=function(t){return[]};n.binding=function(t){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(t){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},function(t,e,n){(function(t,e){(function(t,n){"use strict";if(t.setImmediate){return}var i=1;var r={};var a=false;var o=t.document;var s;function l(t){if(typeof t!=="function"){t=new Function(""+t)}var e=new Array(arguments.length-1);for(var n=0;n<e.length;n++){e[n]=arguments[n+1]}var a={callback:t,args:e};r[i]=a;s(i);return i++}function u(t){delete r[t]}function c(t){var e=t.callback;var i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i);break}}function f(t){if(a){setTimeout(f,0,t)}else{var e=r[t];if(e){a=true;try{c(e)}finally{u(t);a=false}}}}function h(){s=function(t){e.nextTick(function(){f(t)})}}function d(){if(t.postMessage&&!t.importScripts){var e=true;var n=t.onmessage;t.onmessage=function(){e=false};t.postMessage("","*");t.onmessage=n;return e}}function p(){var e="setImmediate$"+Math.random()+"$";var n=function(n){if(n.source===t&&typeof n.data==="string"&&n.data.indexOf(e)===0){f(+n.data.slice(e.length))}};if(t.addEventListener){t.addEventListener("message",n,false)}else{t.attachEvent("onmessage",n)}s=function(n){t.postMessage(e+n,"*")}}function v(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;f(e)};s=function(e){t.port2.postMessage(e)}}function g(){var t=o.documentElement;s=function(e){var n=o.createElement("script");n.onreadystatechange=function(){f(e);n.onreadystatechange=null;t.removeChild(n);n=null};t.appendChild(n)}}function m(){s=function(t){setTimeout(f,0,t)}}var _=Object.getPrototypeOf&&Object.getPrototypeOf(t);_=_&&_.setTimeout?_:t;if({}.toString.call(t.process)==="[object process]"){h()}else if(d()){p()}else if(t.MessageChannel){v()}else if(o&&"onreadystatechange"in o.createElement("script")){g()}else{m()}_.setImmediate=l;_.clearImmediate=u})(typeof self==="undefined"?typeof t==="undefined"?this:t:self)}).call(this,n(294),n(477))},function(t,e,n){(function(t){var i=typeof t!=="undefined"&&t||typeof self!=="undefined"&&self||window;var r=Function.prototype.apply;e.setTimeout=function(){return new a(r.call(setTimeout,i,arguments),clearTimeout)};e.setInterval=function(){return new a(r.call(setInterval,i,arguments),clearInterval)};e.clearTimeout=e.clearInterval=function(t){if(t){t.close()}};function a(t,e){this._id=t;this._clearFn=e}a.prototype.unref=a.prototype.ref=function(){};a.prototype.close=function(){this._clearFn.call(i,this._id)};e.enroll=function(t,e){clearTimeout(t._idleTimeoutId);t._idleTimeout=e};e.unenroll=function(t){clearTimeout(t._idleTimeoutId);t._idleTimeout=-1};e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;if(e>=0){t._idleTimeoutId=setTimeout(function e(){if(t._onTimeout)t._onTimeout()},e)}};n(478);e.setImmediate=typeof self!=="undefined"&&self.setImmediate||typeof t!=="undefined"&&t.setImmediate||this&&this.setImmediate;e.clearImmediate=typeof self!=="undefined"&&self.clearImmediate||typeof t!=="undefined"&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(294))},function(t,e,n){(function(i){var r,a;var r,a;
/*!
 * typeahead.js 1.2.0
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2017 Twitter, Inc. and other contributors; Licensed MIT
 */
/*!
 * typeahead.js 1.2.0
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2017 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(i,o){if(true){!(r=[n(38)],a=function(t){return i["Bloodhound"]=o(t)}.apply(e,r),a!==undefined&&(t.exports=a))}else{}})(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return typeof t==="string"},isNumber:function(t){return typeof t==="number"},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return typeof t==="undefined"},isElement:function(t){return!!(t&&t.nodeType===1)},isJQuery:function(e){return e instanceof t},toStr:function t(n){return e.isUndefined(n)||n===null?"":n+""},bind:t.proxy,each:function(e,n){t.each(e,i);function i(t,e){return n(e,t)}},map:t.map,filter:t.grep,every:function(e,n){var i=true;if(!e){return i}t.each(e,function(t,r){if(!(i=n.call(null,r,t,e))){return false}});return!!i},some:function(e,n){var i=false;if(!e){return i}t.each(e,function(t,r){if(i=n.call(null,r,t,e)){return false}});return!!i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(true,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function e(n){return t.isFunction(n)?n:i;function i(){return String(n)}},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var a=this,o=arguments,s,l;s=function(){i=null;if(!n){r=t.apply(a,o)}};l=n&&!i;clearTimeout(i);i=setTimeout(s,e);if(l){r=t.apply(a,o)}return r}},throttle:function(t,e){var n,i,r,a,o,s;o=0;s=function(){o=new Date;r=null;a=t.apply(n,i)};return function(){var l=new Date,u=e-(l-o);n=this;i=arguments;if(u<=0){clearTimeout(r);r=null;o=l;a=t.apply(n,i)}else if(!r){r=setTimeout(s,u)}return a}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},guid:function(){function t(t){var e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return"tt-"+t()+t(true)+t(true)+t()},noop:function(){}}}();var n="1.2.0";var i=function(){"use strict";return{nonword:n,whitespace:t,ngram:i,obj:{nonword:r(n),whitespace:r(t),ngram:r(i)}};function t(t){t=e.toStr(t);return t?t.split(/\s+/):[]}function n(t){t=e.toStr(t);return t?t.split(/\W+/):[]}function i(t){t=e.toStr(t);var n=[],i="";e.each(t.split(""),function(t){if(t.match(/\s+/)){i=""}else{n.push(i+t);i+=t}});return n}function r(t){return function n(i){i=e.isArray(i)?i:[].slice.call(arguments,0);return function n(r){var a=[];e.each(i,function(n){a=a.concat(t(e.toStr(r[n])))});return a}}}}();var r=function(){"use strict";function n(n){this.maxSize=e.isNumber(n)?n:100;this.reset();if(this.maxSize<=0){this.set=this.get=t.noop}}e.mixin(n.prototype,{set:function t(e,n){var i=this.list.tail,a;if(this.size>=this.maxSize){this.list.remove(i);delete this.hash[i.key];this.size--}if(a=this.hash[e]){a.val=n;this.list.moveToFront(a)}else{a=new r(e,n);this.list.add(a);this.hash[e]=a;this.size++}},get:function t(e){var n=this.hash[e];if(n){this.list.moveToFront(n);return n.val}},reset:function t(){this.size=0;this.hash={};this.list=new i}});function i(){this.head=this.tail=null}e.mixin(i.prototype,{add:function t(e){if(this.head){e.next=this.head;this.head.prev=e}this.head=e;this.tail=this.tail||e},remove:function t(e){e.prev?e.prev.next=e.next:this.head=e.next;e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(t){this.remove(t);this.add(t)}});function r(t,e){this.key=t;this.val=e;this.prev=this.next=null}return n}();var a=function(){"use strict";var n;try{n=window.localStorage;n.setItem("~~~","!");n.removeItem("~~~")}catch(t){n=null}function i(t,i){this.prefix=["__",t,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix));this.ls=i||n;!this.ls&&this._noop()}e.mixin(i.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(t){if(t.name==="QuotaExceededError"){this.clear();this._noop()}}},get:function(t){if(this.isExpired(t)){this.remove(t)}return o(this.ls.getItem(this._prefix(t)))},set:function(t,n,i){if(e.isNumber(i)){this._safeSet(this._ttlKey(t),a(r()+i))}else{this.ls.removeItem(this._ttlKey(t))}return this._safeSet(this._prefix(t),a(n))},remove:function(t){this.ls.removeItem(this._ttlKey(t));this.ls.removeItem(this._prefix(t));return this},clear:function(){var t,e=s(this.keyMatcher);for(t=e.length;t--;){this.remove(e[t])}return this},isExpired:function(t){var n=o(this.ls.getItem(this._ttlKey(t)));return e.isNumber(n)&&r()>n?true:false}});return i;function r(){return(new Date).getTime()}function a(t){return JSON.stringify(e.isUndefined(t)?null:t)}function o(e){return t.parseJSON(e)}function s(t){var e,i,r=[],a=n.length;for(e=0;e<a;e++){if((i=n.key(e)).match(t)){r.push(i.replace(t,""))}}return r}}();var o=function(){"use strict";var n=0,i={},a=new r(10);function o(t){t=t||{};this.maxPendingRequests=t.maxPendingRequests||6;this.cancelled=false;this.lastReq=null;this._send=t.transport;this._get=t.limiter?t.limiter(this._get):this._get;this._cache=t.cache===false?new r(0):a}o.setMaxPendingRequests=function t(e){this.maxPendingRequests=e};o.resetCache=function t(){a.reset()};e.mixin(o.prototype,{_fingerprint:function e(n){n=n||{};return n.url+n.type+t.param(n.data||{})},_get:function(t,e){var r=this,a,o;a=this._fingerprint(t);if(this.cancelled||a!==this.lastReq){return}if(o=i[a]){o.done(s).fail(l)}else if(n<this.maxPendingRequests){n++;i[a]=this._send(t).done(s).fail(l).always(u)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}function s(t){e(null,t);r._cache.set(a,t)}function l(){e(true)}function u(){n--;delete i[a];if(r.onDeckRequestArgs){r._get.apply(r,r.onDeckRequestArgs);r.onDeckRequestArgs=null}}},get:function(n,i){var r,a;i=i||t.noop;n=e.isString(n)?{url:n}:n||{};a=this._fingerprint(n);this.cancelled=false;this.lastReq=a;if(r=this._cache.get(a)){i(null,r)}else{this._get(n,i)}},cancel:function(){this.cancelled=true}});return o}();var s=window.SearchIndex=function(){"use strict";var n="c",i="i";function r(n){n=n||{};if(!n.datumTokenizer||!n.queryTokenizer){t.error("datumTokenizer and queryTokenizer are both required")}this.identify=n.identify||e.stringify;this.datumTokenizer=n.datumTokenizer;this.queryTokenizer=n.queryTokenizer;this.matchAnyQueryToken=n.matchAnyQueryToken;this.reset()}e.mixin(r.prototype,{bootstrap:function t(e){this.datums=e.datums;this.trie=e.trie},add:function(t){var r=this;t=e.isArray(t)?t:[t];e.each(t,function(t){var s,l;r.datums[s=r.identify(t)]=t;l=a(r.datumTokenizer(t));e.each(l,function(t){var e,a,l;e=r.trie;a=t.split("");while(l=a.shift()){e=e[n][l]||(e[n][l]=o());e[i].push(s)}})})},get:function t(n){var i=this;return e.map(n,function(t){return i.datums[t]})},search:function t(r){var o=this,u,c;u=a(this.queryTokenizer(r));e.each(u,function(t){var e,r,a,s;if(c&&c.length===0&&!o.matchAnyQueryToken){return false}e=o.trie;r=t.split("");while(e&&(a=r.shift())){e=e[n][a]}if(e&&r.length===0){s=e[i].slice(0);c=c?l(c,s):s}else{if(!o.matchAnyQueryToken){c=[];return false}}});return c?e.map(s(c),function(t){return o.datums[t]}):[]},all:function t(){var e=[];for(var n in this.datums){e.push(this.datums[n])}return e},reset:function t(){this.datums={};this.trie=o()},serialize:function t(){return{datums:this.datums,trie:this.trie}}});return r;function a(t){t=e.filter(t,function(t){return!!t});t=e.map(t,function(t){return t.toLowerCase()});return t}function o(){var t={};t[i]=[];t[n]={};return t}function s(t){var e={},n=[];for(var i=0,r=t.length;i<r;i++){if(!e[t[i]]){e[t[i]]=true;n.push(t[i])}}return n}function l(t,e){var n=0,i=0,r=[];t=t.sort();e=e.sort();var a=t.length,o=e.length;while(n<a&&i<o){if(t[n]<e[i]){n++}else if(t[n]>e[i]){i++}else{r.push(t[n]);n++;i++}}return r}}();var l=function(){"use strict";var t;t={data:"data",protocol:"protocol",thumbprint:"thumbprint"};function n(t){this.url=t.url;this.ttl=t.ttl;this.cache=t.cache;this.prepare=t.prepare;this.transform=t.transform;this.transport=t.transport;this.thumbprint=t.thumbprint;this.storage=new a(t.cacheKey)}e.mixin(n.prototype,{_settings:function t(){return{url:this.url,type:"GET",dataType:"json"}},store:function e(n){if(!this.cache){return}this.storage.set(t.data,n,this.ttl);this.storage.set(t.protocol,location.protocol,this.ttl);this.storage.set(t.thumbprint,this.thumbprint,this.ttl)},fromCache:function e(){var n={},i;if(!this.cache){return null}n.data=this.storage.get(t.data);n.protocol=this.storage.get(t.protocol);n.thumbprint=this.storage.get(t.thumbprint);i=n.thumbprint!==this.thumbprint||n.protocol!==location.protocol;return n.data&&!i?n.data:null},fromNetwork:function(t){var e=this,n;if(!t){return}n=this.prepare(this._settings());this.transport(n).fail(i).done(r);function i(){t(true)}function r(n){t(null,e.transform(n))}},clear:function t(){this.storage.clear();return this}});return n}();var u=function(){"use strict";function t(t){this.url=t.url;this.prepare=t.prepare;this.transform=t.transform;this.indexResponse=t.indexResponse;this.transport=new o({cache:t.cache,limiter:t.limiter,transport:t.transport,maxPendingRequests:t.maxPendingRequests})}e.mixin(t.prototype,{_settings:function t(){return{url:this.url,type:"GET",dataType:"json"}},get:function t(e,n){var i=this,r;if(!n){return}e=e||"";r=this.prepare(e,this._settings());return this.transport.get(r,a);function a(t,e){t?n([]):n(i.transform(e))}},cancelLastRequest:function t(){this.transport.cancel()}});return t}();var c=function(){"use strict";return function n(a){var o,s;o={initialize:true,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,matchAnyQueryToken:false,sufficient:5,indexRemote:false,sorter:null,local:[],prefetch:null,remote:null};a=e.mixin(o,a||{});!a.datumTokenizer&&t.error("datumTokenizer is required");!a.queryTokenizer&&t.error("queryTokenizer is required");s=a.sorter;a.sorter=s?function(t){return t.sort(s)}:e.identity;a.local=e.isFunction(a.local)?a.local():a.local;a.prefetch=i(a.prefetch);a.remote=r(a.remote);return a};function i(i){var r;if(!i){return null}r={url:null,ttl:24*60*60*1e3,cache:true,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null};i=e.isString(i)?{url:i}:i;i=e.mixin(r,i);!i.url&&t.error("prefetch requires url to be set");i.transform=i.filter||i.transform;i.cacheKey=i.cacheKey||i.url;i.thumbprint=n+i.thumbprint;i.transport=i.transport?s(i.transport):t.ajax;return i}function r(n){var i;if(!n){return}i={url:null,cache:true,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null};n=e.isString(n)?{url:n}:n;n=e.mixin(i,n);!n.url&&t.error("remote requires url to be set");n.transform=n.filter||n.transform;n.prepare=a(n);n.limiter=o(n);n.transport=n.transport?s(n.transport):t.ajax;delete n.replace;delete n.wildcard;delete n.rateLimitBy;delete n.rateLimitWait;return n}function a(t){var e,n,i;e=t.prepare;n=t.replace;i=t.wildcard;if(e){return e}if(n){e=r}else if(t.wildcard){e=a}else{e=o}return e;function r(t,e){e.url=n(e.url,t);return e}function a(t,e){e.url=e.url.replace(i,encodeURIComponent(t));return e}function o(t,e){return e}}function o(t){var n,i,r;n=t.limiter;i=t.rateLimitBy;r=t.rateLimitWait;if(!n){n=/^throttle$/i.test(i)?o(r):a(r)}return n;function a(t){return function n(i){return e.debounce(i,t)}}function o(t){return function n(i){return e.throttle(i,t)}}}function s(n){return function i(r){var a=t.Deferred();n(r,o,s);return a;function o(t){e.defer(function(){a.resolve(t)})}function s(t){e.defer(function(){a.reject(t)})}}}}();var f=function(){"use strict";var n;n=window&&window.Bloodhound;function r(t){t=c(t);this.sorter=t.sorter;this.identify=t.identify;this.sufficient=t.sufficient;this.indexRemote=t.indexRemote;this.local=t.local;this.remote=t.remote?new u(t.remote):null;this.prefetch=t.prefetch?new l(t.prefetch):null;this.index=new s({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer});t.initialize!==false&&this.initialize()}r.noConflict=function t(){window&&(window.Bloodhound=n);return r};r.tokenizers=i;e.mixin(r.prototype,{__ttAdapter:function t(){var e=this;return this.remote?n:i;function n(t,n,i){return e.search(t,n,i)}function i(t,n){return e.search(t,n)}},_loadPrefetch:function e(){var n=this,i,r;i=t.Deferred();if(!this.prefetch){i.resolve()}else if(r=this.prefetch.fromCache()){this.index.bootstrap(r);i.resolve()}else{this.prefetch.fromNetwork(a)}return i.promise();function a(t,e){if(t){return i.reject()}n.add(e);n.prefetch.store(n.index.serialize());i.resolve()}},_initialize:function t(){var e=this,n;this.clear();(this.initPromise=this._loadPrefetch()).done(i);return this.initPromise;function i(){e.add(e.local)}},initialize:function t(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function t(e){this.index.add(e);return this},get:function t(n){n=e.isArray(n)?n:[].slice.call(arguments);return this.index.get(n)},search:function t(n,i,r){var a=this,o;i=i||e.noop;r=r||e.noop;o=this.sorter(this.index.search(n));i(this.remote?o.slice():o);if(this.remote&&o.length<this.sufficient){this.remote.get(n,s)}else if(this.remote){this.remote.cancelLastRequest()}return this;function s(t){var n=[];e.each(t,function(t){!e.some(o,function(e){return a.identify(t)===a.identify(e)})&&n.push(t)});a.indexRemote&&a.add(n);r(n)}},all:function t(){return this.index.all()},clear:function t(){this.index.reset();return this},clearPrefetchCache:function t(){this.prefetch&&this.prefetch.clear();return this},clearRemoteCache:function t(){o.resetCache();return this},ttAdapter:function t(){return this.__ttAdapter()}});return r}();return f});(function(i,o){if(true){!(r=[n(38)],a=function(t){return o(t)}.apply(e,r),a!==undefined&&(t.exports=a))}else{}})(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return typeof t==="string"},isNumber:function(t){return typeof t==="number"},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return typeof t==="undefined"},isElement:function(t){return!!(t&&t.nodeType===1)},isJQuery:function(e){return e instanceof t},toStr:function t(n){return e.isUndefined(n)||n===null?"":n+""},bind:t.proxy,each:function(e,n){t.each(e,i);function i(t,e){return n(e,t)}},map:t.map,filter:t.grep,every:function(e,n){var i=true;if(!e){return i}t.each(e,function(t,r){if(!(i=n.call(null,r,t,e))){return false}});return!!i},some:function(e,n){var i=false;if(!e){return i}t.each(e,function(t,r){if(i=n.call(null,r,t,e)){return false}});return!!i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(true,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function e(n){return t.isFunction(n)?n:i;function i(){return String(n)}},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var a=this,o=arguments,s,l;s=function(){i=null;if(!n){r=t.apply(a,o)}};l=n&&!i;clearTimeout(i);i=setTimeout(s,e);if(l){r=t.apply(a,o)}return r}},throttle:function(t,e){var n,i,r,a,o,s;o=0;s=function(){o=new Date;r=null;a=t.apply(n,i)};return function(){var l=new Date,u=e-(l-o);n=this;i=arguments;if(u<=0){clearTimeout(r);r=null;o=l;a=t.apply(n,i)}else if(!r){r=setTimeout(s,u)}return a}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},guid:function(){function t(t){var e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return"tt-"+t()+t(true)+t(true)+t()},noop:function(){}}}();var n=function(){"use strict";var t={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return n;function n(n){var o,s;s=e.mixin({},t,n);o={css:a(),classes:s,html:i(s),selectors:r(s)};return{css:o.css,html:o.html,classes:o.classes,selectors:o.selectors,mixin:function(t){e.mixin(t,o)}}}function i(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div role="listbox" class="'+t.menu+'"></div>'}}function r(t){var n={};e.each(t,function(t,e){n[e]="."+t});return n}function a(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};if(e.isMsie()){e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}return t}}();var r=function(){"use strict";var n,i;n="typeahead:";i={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"};function r(e){if(!e||!e.el){t.error("EventBus initialized without el")}this.$el=t(e.el)}e.mixin(r.prototype,{_trigger:function(e,i){var r=t.Event(n+e);this.$el.trigger.call(this.$el,r,i||[]);return r},before:function(t){var e,n;e=[].slice.call(arguments,1);n=this._trigger("before"+t,e);return n.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1));if(e=i[t]){this._trigger(e,[].slice.call(arguments,1))}}});return r}();var a=function(){"use strict";var t=/\s+/,e=u();return{onSync:a,onAsync:r,off:o,trigger:s};function n(e,n,i,r){var a;if(!i){return this}n=n.split(t);i=r?c(i,r):i;this._callbacks=this._callbacks||{};while(a=n.shift()){this._callbacks[a]=this._callbacks[a]||{sync:[],async:[]};this._callbacks[a][e].push(i)}return this}function r(t,e,i){return n.call(this,"async",t,e,i)}function a(t,e,i){return n.call(this,"sync",t,e,i)}function o(e){var n;if(!this._callbacks){return this}e=e.split(t);while(n=e.shift()){delete this._callbacks[n]}return this}function s(n){var i,r,a,o,s;if(!this._callbacks){return this}n=n.split(t);a=[].slice.call(arguments,1);while((i=n.shift())&&(r=this._callbacks[i])){o=l(r.sync,this,[i].concat(a));s=l(r.async,this,[i].concat(a));o()&&e(s)}return this}function l(t,e,n){return i;function i(){var i;for(var r=0,a=t.length;!i&&r<a;r+=1){i=t[r].apply(e,n)===false}return!i}}function u(){var t;if(window.setImmediate){t=function t(e){i(function(){e()})}}else{t=function t(e){setTimeout(function(){e()},0)}}return t}function c(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}}();var o=function(t){"use strict";var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:false,caseSensitive:false,diacriticInsensitive:false};var i={A:"[AaªÀ-Åà-åĀ-ąǍǎȀ-ȃȦȧᴬᵃḀḁẚẠ-ảₐ℀℁℻⒜Ⓐⓐ㍱-㍴㎀-㎄㎈㎉㎩-㎯㏂㏊㏟㏿Ａａ]",B:"[BbᴮᵇḂ-ḇℬ⒝Ⓑⓑ㍴㎅-㎇㏃㏈㏔㏝Ｂｂ]",C:"[CcÇçĆ-čᶜ℀ℂ℃℅℆ℭⅭⅽ⒞Ⓒⓒ㍶㎈㎉㎝㎠㎤㏄-㏇Ｃｃ]",D:"[DdĎďǄ-ǆǱ-ǳᴰᵈḊ-ḓⅅⅆⅮⅾ⒟Ⓓⓓ㋏㍲㍷-㍹㎗㎭-㎯㏅㏈Ｄｄ]",E:"[EeÈ-Ëè-ëĒ-ěȄ-ȇȨȩᴱᵉḘ-ḛẸ-ẽₑ℡ℯℰⅇ⒠Ⓔⓔ㉐㋍㋎Ｅｅ]",F:"[FfᶠḞḟ℉ℱ℻⒡Ⓕⓕ㎊-㎌㎙ﬀ-ﬄＦｆ]",G:"[GgĜ-ģǦǧǴǵᴳᵍḠḡℊ⒢Ⓖⓖ㋌㋍㎇㎍-㎏㎓㎬㏆㏉㏒㏿Ｇｇ]",H:"[HhĤĥȞȟʰᴴḢ-ḫẖℋ-ℎ⒣Ⓗⓗ㋌㍱㎐-㎔㏊㏋㏗Ｈｈ]",I:"[IiÌ-Ïì-ïĨ-İĲĳǏǐȈ-ȋᴵᵢḬḭỈ-ịⁱℐℑℹⅈⅠ-ⅣⅥ-ⅨⅪⅫⅰ-ⅳⅵ-ⅸⅺⅻ⒤Ⓘⓘ㍺㏌㏕ﬁﬃＩｉ]",J:"[JjĲ-ĵǇ-ǌǰʲᴶⅉ⒥ⒿⓙⱼＪｊ]",K:"[KkĶķǨǩᴷᵏḰ-ḵK⒦Ⓚⓚ㎄㎅㎉㎏㎑㎘㎞㎢㎦㎪㎸㎾㏀㏆㏍-㏏Ｋｋ]",L:"[LlĹ-ŀǇ-ǉˡᴸḶḷḺ-ḽℒℓ℡Ⅼⅼ⒧Ⓛⓛ㋏㎈㎉㏐-㏓㏕㏖㏿ﬂﬄＬｌ]",M:"[MmᴹᵐḾ-ṃ℠™ℳⅯⅿ⒨Ⓜⓜ㍷-㍹㎃㎆㎎㎒㎖㎙-㎨㎫㎳㎷㎹㎽㎿㏁㏂㏎㏐㏔-㏖㏘㏙㏞㏟Ｍｍ]",N:"[NnÑñŃ-ŉǊ-ǌǸǹᴺṄ-ṋⁿℕ№⒩Ⓝⓝ㎁㎋㎚㎱㎵㎻㏌㏑Ｎｎ]",O:"[OoºÒ-Öò-öŌ-őƠơǑǒǪǫȌ-ȏȮȯᴼᵒỌ-ỏₒ℅№ℴ⒪Ⓞⓞ㍵㏇㏒㏖Ｏｏ]",P:"[PpᴾᵖṔ-ṗℙ⒫Ⓟⓟ㉐㍱㍶㎀㎊㎩-㎬㎰㎴㎺㏋㏗-㏚Ｐｐ]",Q:"[Qqℚ⒬Ⓠⓠ㏃Ｑｑ]",R:"[RrŔ-řȐ-ȓʳᴿᵣṘ-ṛṞṟ₨ℛ-ℝ⒭Ⓡⓡ㋍㍴㎭-㎯㏚㏛Ｒｒ]",S:"[SsŚ-šſȘșˢṠ-ṣ₨℁℠⒮Ⓢⓢ㎧㎨㎮-㎳㏛㏜ﬆＳｓ]",T:"[TtŢ-ťȚțᵀᵗṪ-ṱẗ℡™⒯Ⓣⓣ㉐㋏㎔㏏ﬅﬆＴｔ]",U:"[UuÙ-Üù-üŨ-ųƯưǓǔȔ-ȗᵁᵘᵤṲ-ṷỤ-ủ℆⒰Ⓤⓤ㍳㍺Ｕｕ]",V:"[VvᵛᵥṼ-ṿⅣ-Ⅷⅳ-ⅷ⒱Ⓥⓥⱽ㋎㍵㎴-㎹㏜㏞Ｖｖ]",W:"[WwŴŵʷᵂẀ-ẉẘ⒲Ⓦⓦ㎺-㎿㏝Ｗｗ]",X:"[XxˣẊ-ẍₓ℻Ⅸ-Ⅻⅸ-ⅻ⒳Ⓧⓧ㏓Ｘｘ]",Y:"[YyÝýÿŶ-ŸȲȳʸẎẏẙỲ-ỹ⒴Ⓨⓨ㏉Ｙｙ]",Z:"[ZzŹ-žǱ-ǳᶻẐ-ẕℤℨ⒵Ⓩⓩ㎐-㎔Ｚｚ]"};return function i(r){var o;r=e.mixin({},n,r);if(!r.node||!r.pattern){return}r.pattern=e.isArray(r.pattern)?r.pattern:[r.pattern];o=a(r.pattern,r.caseSensitive,r.wordsOnly,r.diacriticInsensitive);l(r.node,s);function s(e){var n,i,a;if(n=o.exec(e.data)){a=t.createElement(r.tagName);r.className&&(a.className=r.className);i=e.splitText(n.index);i.splitText(n[0].length);a.appendChild(i.cloneNode(true));e.parentNode.replaceChild(a,i)}return!!n}function l(t,e){var n,i=3;for(var r=0;r<t.childNodes.length;r++){n=t.childNodes[r];if(n.nodeType===i){r+=e(n)?1:0}else{l(n,e)}}}};function r(t){return i[t.toUpperCase()]||t}function a(t,n,i,a){var o=[],s;for(var l=0,u=t.length;l<u;l++){var c=e.escapeRegExChars(t[l]);if(a){c=c.replace(/\S/g,r)}o.push(c)}s=i?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")";return n?new RegExp(s):new RegExp(s,"i")}}(window.document);var s=function(){"use strict";var n;n={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function i(n,i){n=n||{};if(!n.input){t.error("input is missing")}i.mixin(this);this.$hint=t(n.hint);this.$input=t(n.input);this.$input.attr({"aria-activedescendant":"","aria-owns":this.$input.attr("id")+"_listbox",role:"combobox","aria-readonly":"true","aria-autocomplete":"list"});t(i.menu).attr("id",this.$input.attr("id")+"_listbox");this.query=this.$input.val();this.queryWhenFocused=this.hasFocus()?this.query:null;this.$overflowHelper=r(this.$input);this._checkLanguageDirection();if(this.$hint.length===0){this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop}this.onSync("cursorchange",this._updateDescendent)}i.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")};e.mixin(i.prototype,a,{_onBlur:function t(){this.resetInputValue();this.trigger("blurred")},_onFocus:function t(){this.queryWhenFocused=this.query;this.trigger("focused")},_onKeydown:function t(e){var i=n[e.which||e.keyCode];this._managePreventDefault(i,e);if(i&&this._shouldTrigger(i,e)){this.trigger(i+"Keyed",e)}},_onInput:function t(){this._setQuery(this.getInputValue());this.clearHintIfInvalid();this._checkLanguageDirection()},_managePreventDefault:function t(e,n){var i;switch(e){case"up":case"down":i=!s(n);break;default:i=false}i&&n.preventDefault()},_shouldTrigger:function t(e,n){var i;switch(e){case"tab":i=!s(n);break;default:i=true}return i},_checkLanguageDirection:function t(){var e=(this.$input.css("direction")||"ltr").toLowerCase();if(this.dir!==e){this.dir=e;this.$hint.attr("dir",e);this.trigger("langDirChanged",e)}},_setQuery:function t(e,n){var i,r;i=o(e,this.query);r=i?this.query.length!==e.length:false;this.query=e;if(!n&&!i){this.trigger("queryChanged",this.query)}else if(!n&&r){this.trigger("whitespaceChanged",this.query)}},_updateDescendent:function t(e,n){this.$input.attr("aria-activedescendant",n)},bind:function(){var t=this,i,r,a,o;i=e.bind(this._onBlur,this);r=e.bind(this._onFocus,this);a=e.bind(this._onKeydown,this);o=e.bind(this._onInput,this);this.$input.on("blur.tt",i).on("focus.tt",r).on("keydown.tt",a);if(!e.isMsie()||e.isMsie()>9){this.$input.on("input.tt",o)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(i){if(n[i.which||i.keyCode]){return}e.defer(e.bind(t._onInput,t,i))})}return this},focus:function t(){this.$input.focus()},blur:function t(){this.$input.blur()},getLangDir:function t(){return this.dir},getQuery:function t(){return this.query||""},setQuery:function t(e,n){this.setInputValue(e);this._setQuery(e,n)},hasQueryChangedSinceLastFocus:function t(){return this.query!==this.queryWhenFocused},getInputValue:function t(){return this.$input.val()},setInputValue:function t(e){this.$input.val(e);this.clearHintIfInvalid();this._checkLanguageDirection()},resetInputValue:function t(){this.setInputValue(this.query)},getHint:function t(){return this.$hint.val()},setHint:function t(e){this.$hint.val(e)},clearHint:function t(){this.setHint("")},clearHintIfInvalid:function t(){var e,n,i,r;e=this.getInputValue();n=this.getHint();i=e!==n&&n.indexOf(e)===0;r=e!==""&&i&&!this.hasOverflow();!r&&this.clearHint()},hasFocus:function t(){return this.$input.is(":focus")},hasOverflow:function t(){var e=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var t,n,i;t=this.$input.val().length;n=this.$input[0].selectionStart;if(e.isNumber(n)){return n===t}else if(document.selection){i=document.selection.createRange();i.moveStart("character",-t);return t===i.text.length}return true},destroy:function e(){this.$hint.off(".tt");this.$input.off(".tt");this.$overflowHelper.remove();this.$hint=this.$input=this.$overflowHelper=t("<div>")}});return i;function r(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function o(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function s(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}}();var l=function(){"use strict";var n,i;n={dataset:"tt-selectable-dataset",val:"tt-selectable-display",obj:"tt-selectable-object"};i=e.getIdGenerator();function r(n,r){n=n||{};n.templates=n.templates||{};n.templates.notFound=n.templates.notFound||n.templates.empty;if(!n.source){t.error("missing source")}if(!n.node){t.error("missing node")}if(n.name&&!u(n.name)){t.error("invalid dataset name: "+n.name)}r.mixin(this);this.highlight=!!n.highlight;this.name=e.toStr(n.name||i());this.limit=n.limit||5;this.displayFn=s(n.display||n.displayKey);this.templates=l(n.templates,this.displayFn);this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source;this.async=e.isUndefined(n.async)?this.source.length>2:!!n.async;this._resetLastSuggestion();this.$el=t(n.node).attr("role","presentation").addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}r.extractData=function e(i){var r=t(i);if(r.data(n.obj)){return{dataset:r.data(n.dataset)||"",val:r.data(n.val)||"",obj:r.data(n.obj)||null}}return null};e.mixin(r.prototype,a,{_overwrite:function t(e,n){n=n||[];if(n.length){this._renderSuggestions(e,n)}else if(this.async&&this.templates.pending){this._renderPending(e)}else if(!this.async&&this.templates.notFound){this._renderNotFound(e)}else{this._empty()}this.trigger("rendered",n,false,this.name)},_append:function t(e,n){n=n||[];if(n.length&&this.$lastSuggestion.length){this._appendSuggestions(e,n)}else if(n.length){this._renderSuggestions(e,n)}else if(!this.$lastSuggestion.length&&this.templates.notFound){this._renderNotFound(e)}this.trigger("rendered",n,true,this.name)},_renderSuggestions:function t(e,n){var i;i=this._getSuggestionsFragment(e,n);this.$lastSuggestion=i.children().last();this.$el.html(i).prepend(this._getHeader(e,n)).append(this._getFooter(e,n))},_appendSuggestions:function t(e,n){var i,r;i=this._getSuggestionsFragment(e,n);r=i.children().last();this.$lastSuggestion.after(i);this.$lastSuggestion=r},_renderPending:function t(e){var n=this.templates.pending;this._resetLastSuggestion();n&&this.$el.html(n({query:e,dataset:this.name}))},_renderNotFound:function t(e){var n=this.templates.notFound;this._resetLastSuggestion();n&&this.$el.html(n({query:e,dataset:this.name}))},_empty:function t(){this.$el.empty();this._resetLastSuggestion()},_getSuggestionsFragment:function i(r,a){var s=this,l;l=document.createDocumentFragment();e.each(a,function e(i){var a,o;o=s._injectQuery(r,i);a=t(s.templates.suggestion(o)).data(n.dataset,s.name).data(n.obj,i).data(n.val,s.displayFn(i)).addClass(s.classes.suggestion+" "+s.classes.selectable);l.appendChild(a[0])});this.highlight&&o({className:this.classes.highlight,node:l,pattern:r});return t(l)},_getFooter:function t(e,n){return this.templates.footer?this.templates.footer({query:e,suggestions:n,dataset:this.name}):null},_getHeader:function t(e,n){return this.templates.header?this.templates.header({query:e,suggestions:n,dataset:this.name}):null},_resetLastSuggestion:function e(){this.$lastSuggestion=t()},_injectQuery:function t(n,i){return e.isObject(i)?e.mixin({_query:n},i):i},update:function e(n){var i=this,r=false,a=false,o=0;this.cancel();this.cancel=function e(){r=true;i.cancel=t.noop;i.async&&i.trigger("asyncCanceled",n,i.name)};this.source(n,s,l);!a&&s([]);function s(t){if(a){return}a=true;t=(t||[]).slice(0,i.limit);o=t.length;i._overwrite(n,t);if(o<i.limit&&i.async){i.trigger("asyncRequested",n,i.name)}}function l(e){e=e||[];if(!r&&o<i.limit){i.cancel=t.noop;var a=Math.abs(o-i.limit);o+=a;i._append(n,e.slice(0,a));i.async&&i.trigger("asyncReceived",n,i.name)}}},cancel:t.noop,clear:function t(){this._empty();this.cancel();this.trigger("cleared")},isEmpty:function t(){return this.$el.is(":empty")},destroy:function e(){this.$el=t("<div>")}});return r;function s(t){t=t||e.stringify;return e.isFunction(t)?t:n;function n(e){return e[t]}}function l(n,i){return{notFound:n.notFound&&e.templatify(n.notFound),pending:n.pending&&e.templatify(n.pending),header:n.header&&e.templatify(n.header),footer:n.footer&&e.templatify(n.footer),suggestion:n.suggestion||r};function r(n){return t('<div role="option">').attr("id",e.guid()).text(i(n))}}function u(t){return/^[_a-zA-Z0-9-]+$/.test(t)}}();var u=function(){"use strict";function n(n,i){var r=this;n=n||{};if(!n.node){t.error("node is required")}i.mixin(this);this.$node=t(n.node);this.query=null;this.datasets=e.map(n.datasets,a);function a(e){var n=r.$node.find(e.node).first();e.node=n.length?n:t("<div>").appendTo(r.$node);return new l(e,i)}}e.mixin(n.prototype,a,{_onSelectableClick:function e(n){this.trigger("selectableClicked",t(n.currentTarget))},_onRendered:function t(e,n,i,r){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetRendered",n,i,r)},_onCleared:function t(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetCleared")},_propagate:function t(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function t(){return e.every(this.datasets,e.bind(function t(e){var n=e.isEmpty();this.$node.attr("aria-expanded",!n);return n},this))},_getSelectables:function t(){return this.$node.find(this.selectors.selectable)},_removeCursor:function t(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function t(e){var n,i,r,a;n=e.position().top;i=n+e.outerHeight(true);r=this.$node.scrollTop();a=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10);if(n<0){this.$node.scrollTop(r+n)}else if(a<i){this.$node.scrollTop(r+(i-a))}},bind:function(){var n=this,i;i=e.bind(this._onSelectableClick,this);this.$node.on("click.tt",this.selectors.selectable,i);this.$node.on("mouseover",this.selectors.selectable,function(){n.setCursor(t(this))});this.$node.on("mouseleave",function(){n._removeCursor()});e.each(this.datasets,function(t){t.onSync("asyncRequested",n._propagate,n).onSync("asyncCanceled",n._propagate,n).onSync("asyncReceived",n._propagate,n).onSync("rendered",n._onRendered,n).onSync("cleared",n._onCleared,n)});return this},isOpen:function t(){return this.$node.hasClass(this.classes.open)},open:function t(){this.$node.scrollTop(0);this.$node.addClass(this.classes.open)},close:function t(){this.$node.attr("aria-expanded",false);this.$node.removeClass(this.classes.open);this._removeCursor()},setLanguageDirection:function t(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function t(e){var n,i,r,a;i=this.getActiveSelectable();n=this._getSelectables();r=i?n.index(i):-1;a=r+e;a=(a+1)%(n.length+1)-1;a=a<-1?n.length-1:a;return a===-1?null:n.eq(a)},setCursor:function t(e){this._removeCursor();if(e=e&&e.first()){e.addClass(this.classes.cursor);this._ensureVisible(e)}},getSelectableData:function t(e){return e&&e.length?l.extractData(e):null},getActiveSelectable:function t(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function t(){var e=this._getSelectables().first();return e.length?e:null},update:function t(n){var i=n!==this.query;if(i){this.query=n;e.each(this.datasets,r)}return i;function r(t){t.update(n)}},empty:function t(){e.each(this.datasets,n);this.query=null;this.$node.addClass(this.classes.empty);function n(t){t.clear()}},destroy:function n(){this.$node.off(".tt");this.$node=t("<div>");e.each(this.datasets,i);function i(t){t.destroy()}}});return n}();var c=function(){"use strict";function n(n){this.$el=t("<span></span>",{role:"status","aria-live":"polite"}).css({position:"absolute",padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"});n.$input.after(this.$el);e.each(n.menu.datasets,e.bind(function(t){if(t.onSync){t.onSync("rendered",e.bind(this.update,this));t.onSync("cleared",e.bind(this.cleared,this))}},this))}e.mixin(n.prototype,{update:function t(e,n){var i=n.length;var r;if(i===1){r={result:"result",is:"is"}}else{r={result:"results",is:"are"}}this.$el.text(i+" "+r.result+" "+r.is+" available, use up and down arrow keys to navigate.")},cleared:function(){this.$el.text("")}});return n}();var f=function(){"use strict";var t=u.prototype;function n(){u.apply(this,[].slice.call(arguments,0))}e.mixin(n.prototype,u.prototype,{open:function e(){!this._allDatasetsEmpty()&&this._show();return t.open.apply(this,[].slice.call(arguments,0))},close:function e(){this._hide();return t.close.apply(this,[].slice.call(arguments,0))},_onRendered:function e(){if(this._allDatasetsEmpty()){this._hide()}else{this.isOpen()&&this._show()}return t._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function e(){if(this._allDatasetsEmpty()){this._hide()}else{this.isOpen()&&this._show()}return t._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function e(n){this.$node.css(n==="ltr"?this.css.ltr:this.css.rtl);return t.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function t(){this.$node.hide()},_show:function t(){this.$node.css("display","block")}});return n}();var h=function(){"use strict";function n(n,r){var a,o,s,l,u,c,f,h,d,p,v;n=n||{};if(!n.input){t.error("missing input")}if(!n.menu){t.error("missing menu")}if(!n.eventBus){t.error("missing event bus")}r.mixin(this);this.eventBus=n.eventBus;this.minLength=e.isNumber(n.minLength)?n.minLength:1;this.input=n.input;this.menu=n.menu;this.enabled=true;this.autoselect=!!n.autoselect;this.active=false;this.input.hasFocus()&&this.activate();this.dir=this.input.getLangDir();this._hacks();this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this);a=i(this,"activate","open","_onFocused");o=i(this,"deactivate","_onBlurred");s=i(this,"isActive","isOpen","_onEnterKeyed");l=i(this,"isActive","isOpen","_onTabKeyed");u=i(this,"isActive","_onEscKeyed");c=i(this,"isActive","open","_onUpKeyed");f=i(this,"isActive","open","_onDownKeyed");h=i(this,"isActive","isOpen","_onLeftKeyed");d=i(this,"isActive","isOpen","_onRightKeyed");p=i(this,"_openIfActive","_onQueryChanged");v=i(this,"_openIfActive","_onWhitespaceChanged");this.input.bind().onSync("focused",a,this).onSync("blurred",o,this).onSync("enterKeyed",s,this).onSync("tabKeyed",l,this).onSync("escKeyed",u,this).onSync("upKeyed",c,this).onSync("downKeyed",f,this).onSync("leftKeyed",h,this).onSync("rightKeyed",d,this).onSync("queryChanged",p,this).onSync("whitespaceChanged",v,this).onSync("langDirChanged",this._onLangDirChanged,this)}e.mixin(n.prototype,{_hacks:function n(){var i,r;i=this.input.$input||t("<div>");r=this.menu.$node||t("<div>");i.on("blur.tt",function(t){var n,a,o;n=document.activeElement;a=r.is(n);o=r.has(n).length>0;if(e.isMsie()&&(a||o)){t.preventDefault();t.stopImmediatePropagation();e.defer(function(){i.focus()})}});r.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function t(e,n){this.select(n)},_onDatasetCleared:function t(){this._updateHint()},_onDatasetRendered:function t(e,n,i,r){this._updateHint();if(this.autoselect){var a=this.selectors.cursor.substr(1);this.menu.$node.find(this.selectors.suggestion).first().addClass(a)}this.eventBus.trigger("render",n,i,r)},_onAsyncRequested:function t(e,n,i){this.eventBus.trigger("asyncrequest",i,n)},_onAsyncCanceled:function t(e,n,i){this.eventBus.trigger("asynccancel",i,n)},_onAsyncReceived:function t(e,n,i){this.eventBus.trigger("asyncreceive",i,n)},_onFocused:function t(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function t(){if(this.input.hasQueryChangedSinceLastFocus()){this.eventBus.trigger("change",this.input.getQuery())}},_onEnterKeyed:function t(e,n){var i;if(i=this.menu.getActiveSelectable()){if(this.select(i)){n.preventDefault();n.stopPropagation()}}else if(this.autoselect){if(this.select(this.menu.getTopSelectable())){n.preventDefault();n.stopPropagation()}}},_onTabKeyed:function t(e,n){var i;if(i=this.menu.getActiveSelectable()){this.select(i)&&n.preventDefault()}else if(i=this.menu.getTopSelectable()){this.autocomplete(i)&&n.preventDefault()}},_onEscKeyed:function t(){this.close()},_onUpKeyed:function t(){this.moveCursor(-1)},_onDownKeyed:function t(){this.moveCursor(+1)},_onLeftKeyed:function t(){if(this.dir==="rtl"&&this.input.isCursorAtEnd()){this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())}},_onRightKeyed:function t(){if(this.dir==="ltr"&&this.input.isCursorAtEnd()){this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())}},_onQueryChanged:function t(e,n){this._minLengthMet(n)?this.menu.update(n):this.menu.empty()},_onWhitespaceChanged:function t(){this._updateHint()},_onLangDirChanged:function t(e,n){if(this.dir!==n){this.dir=n;this.menu.setLanguageDirection(n)}},_openIfActive:function t(){this.isActive()&&this.open()},_minLengthMet:function t(n){n=e.isString(n)?n:this.input.getQuery()||"";return n.length>=this.minLength},_updateHint:function t(){var n,i,r,a,o,l,u;n=this.menu.getTopSelectable();i=this.menu.getSelectableData(n);r=this.input.getInputValue();if(i&&!e.isBlankString(r)&&!this.input.hasOverflow()){a=s.normalizeQuery(r);o=e.escapeRegExChars(a);l=new RegExp("^(?:"+o+")(.+$)","i");u=l.exec(i.val);u&&this.input.setHint(r+u[1])}else{this.input.clearHint()}},isEnabled:function t(){return this.enabled},enable:function t(){this.enabled=true},disable:function t(){this.enabled=false},isActive:function t(){return this.active},activate:function t(){if(this.isActive()){return true}else if(!this.isEnabled()||this.eventBus.before("active")){return false}else{this.active=true;this.eventBus.trigger("active");return true}},deactivate:function t(){if(!this.isActive()){return true}else if(this.eventBus.before("idle")){return false}else{this.active=false;this.close();this.eventBus.trigger("idle");return true}},isOpen:function t(){return this.menu.isOpen()},open:function t(){if(!this.isOpen()&&!this.eventBus.before("open")){this.menu.open();this._updateHint();this.eventBus.trigger("open")}return this.isOpen()},close:function t(){if(this.isOpen()&&!this.eventBus.before("close")){this.menu.close();this.input.clearHint();this.input.resetInputValue();this.eventBus.trigger("close")}return!this.isOpen()},setVal:function t(n){this.input.setQuery(e.toStr(n))},getVal:function t(){return this.input.getQuery()},select:function t(e){var n=this.menu.getSelectableData(e);if(n&&!this.eventBus.before("select",n.obj,n.dataset)){this.input.setQuery(n.val,true);this.eventBus.trigger("select",n.obj,n.dataset);this.close();return true}return false},autocomplete:function t(e){var n,i,r;n=this.input.getQuery();i=this.menu.getSelectableData(e);r=i&&n!==i.val;if(r&&!this.eventBus.before("autocomplete",i.obj,i.dataset)){this.input.setQuery(i.val);this.eventBus.trigger("autocomplete",i.obj,i.dataset);return true}return false},moveCursor:function t(e){var n,i,r,a,o,s,l;n=this.input.getQuery();i=this.menu.selectableRelativeToCursor(e);r=this.menu.getSelectableData(i);a=r?r.obj:null;o=r?r.dataset:null;l=i?i.attr("id"):null;this.input.trigger("cursorchange",l);s=this._minLengthMet()&&this.menu.update(n);if(!s&&!this.eventBus.before("cursorchange",a,o)){this.menu.setCursor(i);if(r){this.input.setInputValue(r.val)}else{this.input.resetInputValue();this._updateHint()}this.eventBus.trigger("cursorchange",a,o);return true}return false},destroy:function t(){this.input.destroy();this.menu.destroy()}});return n;function i(t){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);e.each(n,function(e){return t[e].apply(t,i)})}}}();(function(){"use strict";var i,a,o;i=t.fn.typeahead;a={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"};o={initialize:function i(o,l){var v;l=e.isArray(l)?l:[].slice.call(arguments,1);o=o||{};v=n(o.classNames);return this.each(g);function g(){var n,i,g,_,y,b,w,x,S,C,E,O;e.each(l,function(t){t.highlight=!!o.highlight});n=t(this);i=t(v.html.wrapper);g=m(o.hint);_=m(o.menu);y=o.hint!==false&&!g;b=o.menu!==false&&!_;y&&(g=d(n,v));b&&(_=t(v.html.menu).css(v.css.menu));g&&g.val("");n=p(n,v);if(y||b){i.css(v.css.wrapper);n.css(y?v.css.input:v.css.inputWithNoHint);n.wrap(i).parent().prepend(y?g:null).append(b?_:null)}O=b?f:u;w=new r({el:n});x=new s({hint:g,input:n},v);S=new O({node:_,datasets:l},v);C=new c({$input:n,menu:S});E=new h({input:x,menu:S,eventBus:w,minLength:o.minLength,autoselect:o.autoselect},v);n.data(a.www,v);n.data(a.typeahead,E)}},isEnabled:function t(){var e;l(this.first(),function(t){e=t.isEnabled()});return e},enable:function t(){l(this,function(t){t.enable()});return this},disable:function t(){l(this,function(t){t.disable()});return this},isActive:function t(){var e;l(this.first(),function(t){e=t.isActive()});return e},activate:function t(){l(this,function(t){t.activate()});return this},deactivate:function t(){l(this,function(t){t.deactivate()});return this},isOpen:function t(){var e;l(this.first(),function(t){e=t.isOpen()});return e},open:function t(){l(this,function(t){t.open()});return this},close:function t(){l(this,function(t){t.close()});return this},select:function e(n){var i=false,r=t(n);l(this.first(),function(t){i=t.select(r)});return i},autocomplete:function e(n){var i=false,r=t(n);l(this.first(),function(t){i=t.autocomplete(r)});return i},moveCursor:function t(e){var n=false;l(this.first(),function(t){n=t.moveCursor(e)});return n},val:function t(n){var i;if(!arguments.length){l(this.first(),function(t){i=t.getVal()});return i}else{l(this,function(t){t.setVal(e.toStr(n))});return this}},destroy:function t(){l(this,function(t,e){g(e);t.destroy()});return this}};t.fn.typeahead=function(t){if(o[t]){return o[t].apply(this,[].slice.call(arguments,1))}else{return o.initialize.apply(this,arguments)}};t.fn.typeahead.noConflict=function e(){t.fn.typeahead=i;return this};function l(e,n){e.each(function(){var e=t(this),i;(i=e.data(a.typeahead))&&n(i,e)})}function d(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(v(t)).prop({readonly:true,required:false}).removeAttr("id name placeholder").removeClass("required").attr({spellcheck:"false",tabindex:-1})}function p(t,e){t.data(a.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")});t.addClass(e.classes.input).attr({spellcheck:false});try{!t.attr("dir")&&t.attr("dir","auto")}catch(t){}return t}function v(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function g(t){var n,i;n=t.data(a.www);i=t.parent().filter(n.selectors.wrapper);e.each(t.data(a.attrs),function(n,i){e.isUndefined(n)?t.removeAttr(i):t.attr(i,n)});t.removeData(a.typeahead).removeData(a.www).removeData(a.attr).removeClass(n.classes.input);if(i.length){t.detach().insertAfter(i);i.remove()}}function m(n){var i,r;i=e.isJQuery(n)||e.isElement(n);r=i?t(n).first():[];return r.length?r:null}})()})}).call(this,n(479).setImmediate)},function(t,e,n){(function(t){+function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.3.7";e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype);e.prototype.constructor=e;e.prototype.getDefaults=function(){return e.DEFAULTS};e.prototype.setContent=function(){var t=this.tip();var e=this.getTitle();var n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e);t.find(".popover-content").children().detach().end()[this.options.html?typeof n=="string"?"html":"append":"text"](n);t.removeClass("fade top bottom left right in");if(!t.find(".popover-title").html())t.find(".popover-title").hide()};e.prototype.hasContent=function(){return this.getTitle()||this.getContent()};e.prototype.getContent=function(){var t=this.$element;var e=this.options;return t.attr("data-content")||(typeof e.content=="function"?e.content.call(t[0]):e.content)};e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};function n(n){return this.each(function(){var i=t(this);var r=i.data("bs.popover");var a=typeof n=="object"&&n;if(!r&&/destroy|hide/.test(n))return;if(!r)i.data("bs.popover",r=new e(this,a));if(typeof n=="string")r[n]()})}var i=t.fn.popover;t.fn.popover=n;t.fn.popover.Constructor=e;t.fn.popover.noConflict=function(){t.fn.popover=i;return this}}(t)}).call(this,n(38))},function(t,e,n){(function(t){+function(t){"use strict";var e=function(t,e){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",t,e)};e.VERSION="3.3.7";e.TRANSITION_DURATION=150;e.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};e.prototype.init=function(e,n,i){this.enabled=true;this.type=e;this.$element=t(n);this.options=this.getOptions(i);this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:false,hover:false,focus:false};if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}var r=this.options.trigger.split(" ");for(var a=r.length;a--;){var o=r[a];if(o=="click"){this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this))}else if(o!="manual"){var s=o=="hover"?"mouseenter":"focusin";var l=o=="hover"?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this));this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};e.prototype.getDefaults=function(){return e.DEFAULTS};e.prototype.getOptions=function(e){e=t.extend({},this.getDefaults(),this.$element.data(),e);if(e.delay&&typeof e.delay=="number"){e.delay={show:e.delay,hide:e.delay}}return e};e.prototype.getDelegateOptions=function(){var e={};var n=this.getDefaults();this._options&&t.each(this._options,function(t,i){if(n[t]!=i)e[t]=i});return e};e.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(!n){n=new this.constructor(e.currentTarget,this.getDelegateOptions());t(e.currentTarget).data("bs."+this.type,n)}if(e instanceof t.Event){n.inState[e.type=="focusin"?"focus":"hover"]=true}if(n.tip().hasClass("in")||n.hoverState=="in"){n.hoverState="in";return}clearTimeout(n.timeout);n.hoverState="in";if(!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){if(n.hoverState=="in")n.show()},n.options.delay.show)};e.prototype.isInStateTrue=function(){for(var t in this.inState){if(this.inState[t])return true}return false};e.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(!n){n=new this.constructor(e.currentTarget,this.getDelegateOptions());t(e.currentTarget).data("bs."+this.type,n)}if(e instanceof t.Event){n.inState[e.type=="focusout"?"focus":"hover"]=false}if(n.isInStateTrue())return;clearTimeout(n.timeout);n.hoverState="out";if(!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){if(n.hoverState=="out")n.hide()},n.options.delay.hide)};e.prototype.show=function(){var n=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!i)return;var r=this;var a=this.tip();var o=this.getUID(this.type);this.setContent();a.attr("id",o);this.$element.attr("aria-describedby",o);if(this.options.animation)a.addClass("fade");var s=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement;var l=/\s?auto?\s?/i;var u=l.test(s);if(u)s=s.replace(l,"")||"top";a.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this);this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition();var f=a[0].offsetWidth;var h=a[0].offsetHeight;if(u){var d=s;var p=this.getPosition(this.$viewport);s=s=="bottom"&&c.bottom+h>p.bottom?"top":s=="top"&&c.top-h<p.top?"bottom":s=="right"&&c.right+f>p.width?"left":s=="left"&&c.left-f<p.left?"right":s;a.removeClass(d).addClass(s)}var v=this.getCalculatedOffset(s,c,f,h);this.applyPlacement(v,s);var g=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type);r.hoverState=null;if(t=="out")r.leave(r)};t.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",g).emulateTransitionEnd(e.TRANSITION_DURATION):g()}};e.prototype.applyPlacement=function(e,n){var i=this.tip();var r=i[0].offsetWidth;var a=i[0].offsetHeight;var o=parseInt(i.css("margin-top"),10);var s=parseInt(i.css("margin-left"),10);if(isNaN(o))o=0;if(isNaN(s))s=0;e.top+=o;e.left+=s;t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0);i.addClass("in");var l=i[0].offsetWidth;var u=i[0].offsetHeight;if(n=="top"&&u!=a){e.top=e.top+a-u}var c=this.getViewportAdjustedDelta(n,e,l,u);if(c.left)e.left+=c.left;else e.top+=c.top;var f=/top|bottom/.test(n);var h=f?c.left*2-r+l:c.top*2-a+u;var d=f?"offsetWidth":"offsetHeight";i.offset(e);this.replaceArrow(h,i[0][d],f)};e.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")};e.prototype.setContent=function(){var t=this.tip();var e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e);t.removeClass("fade in top bottom left right")};e.prototype.hide=function(n){var i=this;var r=t(this.$tip);var a=t.Event("hide.bs."+this.type);function o(){if(i.hoverState!="in")r.detach();if(i.$element){i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type)}n&&n()}this.$element.trigger(a);if(a.isDefaultPrevented())return;r.removeClass("in");t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",o).emulateTransitionEnd(e.TRANSITION_DURATION):o();this.hoverState=null;return this};e.prototype.fixTitle=function(){var t=this.$element;if(t.attr("title")||typeof t.attr("data-original-title")!="string"){t.attr("data-original-title",t.attr("title")||"").attr("title","")}};e.prototype.hasContent=function(){return this.getTitle()};e.prototype.getPosition=function(e){e=e||this.$element;var n=e[0];var i=n.tagName=="BODY";var r=n.getBoundingClientRect();if(r.width==null){r=t.extend({},r,{width:r.right-r.left,height:r.bottom-r.top})}var a=window.SVGElement&&n instanceof window.SVGElement;var o=i?{top:0,left:0}:a?null:e.offset();var s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()};var l=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},r,s,l,o)};e.prototype.getCalculatedOffset=function(t,e,n,i){return t=="bottom"?{top:e.top+e.height,left:e.left+e.width/2-n/2}:t=="top"?{top:e.top-i,left:e.left+e.width/2-n/2}:t=="left"?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}};e.prototype.getViewportAdjustedDelta=function(t,e,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var a=this.options.viewport&&this.options.viewport.padding||0;var o=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-a-o.scroll;var l=e.top+a-o.scroll+i;if(s<o.top){r.top=o.top-s}else if(l>o.top+o.height){r.top=o.top+o.height-l}}else{var u=e.left-a;var c=e.left+a+n;if(u<o.left){r.left=o.left-u}else if(c>o.right){r.left=o.left+o.width-c}}return r};e.prototype.getTitle=function(){var t;var e=this.$element;var n=this.options;t=e.attr("data-original-title")||(typeof n.title=="function"?n.title.call(e[0]):n.title);return t};e.prototype.getUID=function(t){do{t+=~~(Math.random()*1e6)}while(document.getElementById(t));return t};e.prototype.tip=function(){if(!this.$tip){this.$tip=t(this.options.template);if(this.$tip.length!=1){throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}}return this.$tip};e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};e.prototype.enable=function(){this.enabled=true};e.prototype.disable=function(){this.enabled=false};e.prototype.toggleEnabled=function(){this.enabled=!this.enabled};e.prototype.toggle=function(e){var n=this;if(e){n=t(e.currentTarget).data("bs."+this.type);if(!n){n=new this.constructor(e.currentTarget,this.getDelegateOptions());t(e.currentTarget).data("bs."+this.type,n)}}if(e){n.inState.click=!n.inState.click;if(n.isInStateTrue())n.enter(n);else n.leave(n)}else{n.tip().hasClass("in")?n.leave(n):n.enter(n)}};e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout);this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type);if(t.$tip){t.$tip.detach()}t.$tip=null;t.$arrow=null;t.$viewport=null;t.$element=null})};function n(n){return this.each(function(){var i=t(this);var r=i.data("bs.tooltip");var a=typeof n=="object"&&n;if(!r&&/destroy|hide/.test(n))return;if(!r)i.data("bs.tooltip",r=new e(this,a));if(typeof n=="string")r[n]()})}var i=t.fn.tooltip;t.fn.tooltip=n;t.fn.tooltip.Constructor=e;t.fn.tooltip.noConflict=function(){t.fn.tooltip=i;return this}}(t)}).call(this,n(38))},function(t,e){t.exports='<div class="text-center btn-group dropup" gmf-elevation gmf-elevation-active=ctrl.active gmf-elevation-elevation=ctrl.elevationValue gmf-elevation-loading=ctrl.elevationLoading gmf-elevation-layer=ctrl.selectedElevationLayer gmf-elevation-layersconfig=ctrl.layersconfig gmf-elevation-map=::ctrl.map> <a type=button class="btn btn-default" aria-expanded=false ng-class="::{\'dropdown-toggle\': ctrl.layers.length > 1}" ng-attr-data-toggle="{{::(ctrl.layers.length > 1) ? \'dropdown\' : \'\'}}"> <span class=gmf-elevationwidget-value> {{ctrl.elevationValue}} <span ng-show=ctrl.elevationLoading class="fa fa-spinner"></span> <span ng-show="!ctrl.elevationValue && !ctrl.elevationLoading" translate>Elevation…</span> </span><span class=caret ng-if="::ctrl.layers.length > 1"></span> </a> <ul class="dropdown-menu dropdown-menu-right" role=menu ng-if="::ctrl.layers.length > 1"> <li class=dropdown-header translate>Elevation data sources</li> <li ng-repeat="elevationItem in ::ctrl.layers"> <a href ng-click="ctrl.selectedElevationLayer = elevationItem"> <span class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedElevationLayer === elevationItem}"></span> {{elevationItem | translate}} </a> </li> </ul> </div> '},function(t,e){t.exports='<div class="gmf-profile-container panel" ng-show=ctrl.active> <div class=ngeo-profile ng-show=!ctrl.isErrored ngeo-profile=ctrl.profileData ngeo-profile-highlight=ctrl.profileHighlight ngeo-profile-options=::ctrl.profileOptions> </div> <ul class=gmf-profile-legend ng-show=!ctrl.isErrored> <li ng-repeat="name in ::ctrl.getLayersNames()"> <i class="fa fa-minus" ng-style=ctrl.getStyle(name)></i> {{name | translate}} <span ng-if="ctrl.currentPoint.elevations[name] != null"> {{ctrl.currentPoint.elevations[name]}}&nbsp;{{ctrl.currentPoint.yUnits}} </span> </li> </ul> <div class="gmf-profile-export btn-group dropup" ng-show=!ctrl.isErrored> <a class=dropdown-toggle href="" ng-show="ctrl.profileData.length !== 0" data-toggle=dropdown aria-expanded=false> {{\'Export\' | translate}}&nbsp;<i class="fa fa-caret-up"></i> </a> <ul class="dropdown-menu dropdown-menu-right" role=menu> <li> <a href="" ng-click=::ctrl.downloadCsv()> <i class="fa fa-table"></i>&nbsp;{{\'Download CSV\' | translate}}</a> </li> </ul> </div> <div class=gmf-profile-error ng-show=ctrl.isErrored> <p>{{\'The profile service does not respond, please try later.\' | translate}}</p> </div> <div class=close ng-click="ctrl.line = null">&times;</div> </div> '},function(t,e){t.exports='<div class=gmf-print> <div ng-show="$ctrl.isState(\'CAPABILITIES_NOT_LOADED\') !== true && $ctrl.isState(\'ERROR_ON_GETCAPABILITIES\') !== true"> <div class="gmf-print-layout-selector form-horizontal"><ng-transclude/></div> <div ng-repeat="attribute in $ctrl.layoutInfo.simpleAttributes" class="gmf-print-layoutinfo form-group"> <div ng-if="$ctrl.hiddenAttributeNames === undefined || $ctrl.hiddenAttributeNames.indexOf(attribute.name) < 0"> <input ng-if="attribute.type === \'number\'" ng-model=attribute.value class=form-control type=number ng-attr-placeholder="{{attribute.name | translate}}"> <input ng-if="attribute.type === \'text\'" ng-model=attribute.value class=form-control type=text ng-attr-placeholder="{{attribute.name | translate}}"> <textarea ng-if="attribute.type === \'textarea\'" ng-model=attribute.value class=form-control row=3 ng-attr-placeholder="{{attribute.name | translate}}"></textarea> <div ng-if="attribute.type === \'checkbox\'" class=checkbox> <label> <input ng-model=attribute.value type=checkbox> <span>{{attribute.name | translate}}</span> </label> </div> </div> </div> <div ng-show="$ctrl.layoutInfo.legend !== undefined" class="gmf-print-legend checkbox"> <label> <input ng-model=$ctrl.layoutInfo.legend type=checkbox> <span translate>Legend</span> </label> </div> <div class="gmf-print-layout-selector form-horizontal"> <div ng-show="$ctrl.layoutInfo.layouts.length !== 1" class=form-group> <label class="control-label col-md-5" translate>Layout</label> <div class=col-md-7> <div class="btn-group btn-block"> <button type=button class="btn btn-default form-control" data-toggle=dropdown> <span>{{$ctrl.layoutInfo.layout | translate}}&nbsp;</span> <i class="fa fa-caret-down"></i> </button> <ul class="dropdown-menu dropdown-menu-right btn-block" role=menu> <li ng-repeat="layout in $ctrl.layoutInfo.layouts"> <a ng-click=$ctrl.setLayout(layout) href="">{{layout | translate}}</a> </li> </ul> </div> </div> </div> <div ng-show="$ctrl.layoutInfo.scales.length !== 1" class="gmf-print-scale-selector form-group"> <label class="control-label col-md-5" translate>Scale</label> <div class=col-md-7> <div class="btn-group btn-block"> <button type=button class="btn btn-default form-control" data-toggle=dropdown aria-expanded=false> <span>{{$ctrl.layoutInfo.scale | ngeoScalify}}&nbsp;</span> <i class="fa fa-caret-down"></i> </button> <ul class="dropdown-menu dropdown-menu-right btn-block" role=menu> <li ng-repeat="scale in $ctrl.layoutInfo.scales"> <a ng-click=$ctrl.getSetScale(scale) href="">{{scale | ngeoScalify}}</a> </li> <span ng-if=$ctrl.scaleInput> <li class=dropdown-header translate>Manual entry</li> <li> <div class=gmf-print-custom-scale> 1 : <input class=gmf-print-custom-scale-input type=number min=1 ng-model=$ctrl.getSetScale ng-model-options="{getterSetter: true}"> </div> </li> </span> </ul> </div> </div> </div> <div ng-show="$ctrl.layoutInfo.dpis.length !== 1" class="gmf-print-dpi-selector form-group"> <label class="control-label col-md-3" translate>DPI</label> <div class=col-md-5> <div class="btn-group btn-block"> <button type=button class="btn btn-default form-control" data-toggle=dropdown aria-expanded=false> <span>{{$ctrl.layoutInfo.dpi}}&nbsp;</span> <i class="fa fa-caret-down"></i> </button> <ul class="dropdown-menu dropdown-menu-right btn-block" role=menu> <li ng-repeat="dpi in $ctrl.layoutInfo.dpis"> <a href="" ng-click=$ctrl.setDpi(dpi)>{{dpi}}</a> </li> </ul> </div> </div> </div> <div class="gmf-print-rotation-selector form-group"> <label class="control-label col-md-3" translate>Rotation</label> <div class=col-md-5> <input class="form-control gmf-print-rotation-input" type=range value=0 min=-180 max=180 data-toggle=tooltip title="{{\'You can also use Alt+Shift on the map\' | translate}}"> </div> <div class=col-md-4> <input class="form-control gmf-print-rotation-input" type=number min=-180 max=180 value=0> </div> </div> </div> <div class="gmf-print-actions form-group pull-right"> <span ng-show="$ctrl.isState(\'PRINTING\')"> <i class="fa fa-refresh fa-spin"></i> </span> <a ng-show="$ctrl.isState(\'PRINTING\')" class="gmf-print-cancel btn btn-link" href="" ng-click=$ctrl.cancel() translate>Abort</a> <button ng-show=$ctrl.layoutInfo.formats.png class="gmf-print-image btn btn-primary" ng-disabled="$ctrl.isState(\'PRINTING\')" ng-click="$ctrl.print(\'png\')" translate>Image</button> <button ng-show=$ctrl.layoutInfo.formats.pdf class="gmf-print-pdf btn btn-primary" ng-disabled="$ctrl.isState(\'PRINTING\')" ng-click="$ctrl.print(\'pdf\')" translate>PDF</button> </div> <div ng-show="$ctrl.isState(\'ERROR_ON_REPORT\')" class="gmf-print-error-report form-group pull-left text-danger"> <p>{{\'Error during the print, please try again.\' | translate}}</p> </div> </div> <div ng-show="$ctrl.isState(\'CAPABILITIES_NOT_LOADED\')" class="gmf-print-wait form-group pull-left"> <p>{{\'Connecting to the print server, please wait.\' | translate}}</p> </div> <div ng-show="$ctrl.isState(\'ERROR_ON_GETCAPABILITIES\')" class="gmf-print-error-capabilities form-group pull-left text-danger"> <p>{{\'The print server is unavailable. Please, try later.\' | translate}}</p> </div> </div> '},function(t,e){t.exports='<gmf-objecteditingtools gmf-objecteditingtools-active=oeCtrl.toolsActive gmf-objecteditingtools-copyfromactive=oeCtrl.copyFromActive gmf-objecteditingtools-deletefromactive=oeCtrl.deleteFromActive gmf-objecteditingtools-feature=oeCtrl.feature gmf-objecteditingtools-geomtype=::oeCtrl.geomType gmf-objecteditingtools-map=::oeCtrl.map gmf-objecteditingtools-process=oeCtrl.process gmf-objecteditingtools-queryablelayerinfo=oeCtrl.selectedQueryableLayerInfo gmf-objecteditingtools-requireslayer=oeCtrl.queryableLayerListShown gmf-objecteditingtools-sketchfeatures=::oeCtrl.sketchFeatures> </gmf-objecteditingtools> <div class=form-group ng-show=oeCtrl.queryableLayerListShown> <label ng-show="oeCtrl.copyFromActive === true" class=control-label>{{\'Copy from:\' | translate}}</label> <label ng-show="oeCtrl.deleteFromActive === true" class=control-label>{{\'Cut from:\' | translate}}</label> <select class=form-control ng-model=oeCtrl.selectedQueryableLayerInfo ng-options="layerInfo.layerNode.name | translate for layerInfo in oeCtrl.queryableLayersInfo"> </select> </div> <form novalidate name=form class="form gmf-objectediting-form"> <input type=submit value="{{\'Save\' | translate}}" class="btn btn-sm btn-default gmf-objectediting-btn-save" ng-click="form.$valid && oeCtrl.save()" ng-disabled="!oeCtrl.dirty || oeCtrl.pending || !oeCtrl.featureHasGeom" title="{{\'Save modifications\' | translate}}"> <a class="btn btn-sm btn-link gmf-objectediting-btn-undo" ng-click=oeCtrl.undo() ng-disabled="!oeCtrl.dirty || oeCtrl.pending" title="{{\'Undo latest modifications\' | translate}}" href>{{\'Undo\' | translate}}</a> <a class="btn btn-sm btn-link gmf-objectediting-btn-delete" ng-click=oeCtrl.delete() ng-disabled="oeCtrl.isStateInsert() || oeCtrl.pending" title="{{\'Delete the feature\' | translate}}" href>{{\'Delete\' | translate}}</a> </form> '},function(t,e){t.exports='<div class=btn-group role=group aria-label=""> <a href ngeo-btn ngeo-createfeature ngeo-createfeature-active=oetCtrl.drawActive ngeo-createfeature-features=::oetCtrl.sketchFeatures ngeo-createfeature-geom-type=::oetCtrl.geomType ngeo-createfeature-map=::oetCtrl.map class="btn btn-sm btn-default" ng-class="{active: oetCtrl.drawActive}" ng-if="::(oetCtrl.geomType === \'MultiPoint\')" ng-model=oetCtrl.drawActive title="{{\'Add a point to the geometry\' | translate}}"> <span class="fa fa-plus-square-o gmf-icon-oe-draw"> </span> </a> <a href ngeo-btn ngeo-createfeature ngeo-createfeature-active=oetCtrl.drawActive ngeo-createfeature-features=::oetCtrl.sketchFeatures ngeo-createfeature-geom-type=::oetCtrl.geomType ngeo-createfeature-map=::oetCtrl.map class="btn btn-sm btn-default" ng-class="{active: oetCtrl.drawActive}" ng-if="::(oetCtrl.geomType === \'MultiLineString\')" ng-model=oetCtrl.drawActive title="{{\'Add a linestring to the geometry\' | translate}}"> <span class="fa fa-plus-square-o gmf-icon-oe-draw"> </span> </a> <a href ngeo-btn ngeo-createfeature ngeo-createfeature-active=oetCtrl.drawActive ngeo-createfeature-features=::oetCtrl.sketchFeatures ngeo-createfeature-geom-type=::oetCtrl.geomType ngeo-createfeature-map=::oetCtrl.map class="btn btn-sm btn-default" ng-class="{active: oetCtrl.drawActive}" ng-if="::(oetCtrl.geomType === \'MultiPolygon\')" ng-model=oetCtrl.drawActive title="{{\'Add a polygon to the geometry\' | translate}}"> <span class="fa fa-plus-square-o gmf-icon-oe-draw"> </span> </a> <a href ngeo-btn ngeo-createfeature ngeo-createfeature-active=oetCtrl.eraseActive ngeo-createfeature-features=::oetCtrl.sketchFeatures ngeo-createfeature-geom-type=::oetCtrl.geomTypePolygon ngeo-createfeature-map=::oetCtrl.map class="btn btn-sm btn-default" ng-class="{active: oetCtrl.eraseActive}" ng-model=oetCtrl.eraseActive title="{{\'Erase geometry\' | translate}}"> <span class="fa fa-minus-square-o gmf-icon-oe-erase"> </span> </a> <a href ng-if="::oetCtrl.geomType === \'MultiPolygon\'" ngeo-btn ngeo-createregularpolygonfromclick ngeo-createregularpolygonfromclick-active=oetCtrl.drawTriangleActive ngeo-createregularpolygonfromclick-angle=oetCtrl.triangleAngle ngeo-createregularpolygonfromclick-features=::oetCtrl.sketchFeatures ngeo-createregularpolygonfromclick-map=::oetCtrl.map ngeo-createregularpolygonfromclick-radius=::oetCtrl.triangleRadius class="btn btn-sm btn-default ngeo-createregularpolygonfromclick" ng-class="{active: oetCtrl.drawTriangleActive}" ng-model=oetCtrl.drawTriangleActive title="{{\'Draw a triangle\' | translate}}"> <span class="fa fa-play fa-rotate-270 gmf-icon-oe-triangle"> </span> </a> <a href ngeo-btn gmf-objecteditinggetwmsfeature gmf-objecteditinggetwmsfeature-active=oetCtrl.copyFromActive gmf-objecteditinggetwmsfeature-features=::oetCtrl.sketchFeatures gmf-objecteditinggetwmsfeature-layerinfo=oetCtrl.queryableLayerInfo gmf-objecteditinggetwmsfeature-map=::oetCtrl.map class="btn btn-sm btn-default gmf-objecteditinggetwmsfeature-add" ng-class="{active: oetCtrl.copyFromActive}" ng-model=oetCtrl.copyFromActive title="{{\'Copy from external WMS feature\' | translate}}"> <span class="fa fa-clone gmf-icon-oe-copyfrom"> </span> </a> <a href ngeo-btn gmf-objecteditinggetwmsfeature gmf-objecteditinggetwmsfeature-active=oetCtrl.deleteFromActive gmf-objecteditinggetwmsfeature-features=::oetCtrl.sketchFeatures gmf-objecteditinggetwmsfeature-layerinfo=oetCtrl.queryableLayerInfo gmf-objecteditinggetwmsfeature-map=::oetCtrl.map class="btn btn-sm btn-default gmf-objecteditinggetwmsfeature-delete" ng-class="{active: oetCtrl.deleteFromActive}" ng-model=oetCtrl.deleteFromActive title="{{\'Cut from external WMS feature\' | translate}}"> <span class="fa fa-scissors gmf-icon-oe-deletefrom"> </span> </a> </div> '},function(t,e){t.exports='<div class="btn-group dropup"> <a type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span class=gmf-mouseposition-control-target></span> <span class=caret></span> </a> <ul class="dropdown-menu dropdown-menu-right" role=menu> <li class=dropdown-header translate>Coordinate systems</li> <li ng-repeat="projitem in ::ctrl.projections"> <a href ng-click=ctrl.setProjection(projitem)> <span class="fa fa-fw" ng-class="{\'fa-check\': ctrl.projection == projitem}"></span> {{::projitem.label}} </a> </li> </ul> </div> '},function(t,e){t.exports="<div ngeo-map=ctrl.map ngeo-map-manage-resize=ctrl.manageResize ngeo-map-resize-transition=ctrl.resizeTransition> </div> "},function(t,e){t.exports='<div class="btn-group btn-block" ng-class="::{\'dropup\': scaleselectorCtrl.options.dropup}"> <button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span ng-bind-html="scaleselectorCtrl.currentScale | ngeoScalify | ngeoTrustHtml"></span>&nbsp;<i class=caret></i> </button> <ul class="dropdown-menu btn-block" role=menu> <li ng-repeat="zoomLevel in ::scaleselectorCtrl.zoomLevels"> <a href ng-click=scaleselectorCtrl.changeZoom(zoomLevel) ng-bind-html="scaleselectorCtrl.getScale(zoomLevel) | ngeoScalify | ngeoTrustHtml"> </a> </li> </ul> </div> '},function(t,e){t.exports='<div class=modal-header> <button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button> <h4 class=modal-title translate>Share this map</h4> </div> <div class=modal-body> <form role=form name=gmfShareForm novalidate> <div class=form-group> <label for=gmfShareInputShortLink translate>Permalink</label> <input type=text class=form-control id=gmfShareInputShortLink onclick=this.select() ng-model=$ctrl.shortLink readonly=True> <p class=help-block translate>Copy this link to share it.</p> <p class=text-danger ng-if=$ctrl.showLengthWarning> <span class="fa fa-exclamation-triangle"></span> {{\'You have a lot of drawn elements in this map. The above link may not be correctly supported by some browsers.\' | translate}} </p> <p class=text-danger ng-if=$ctrl.errorOnGetShortUrl> <span class="fa fa-exclamation"></span> {{\'Error, cannot get the shortened URL.\' | translate}} </p> </div> <hr ng-if=::$ctrl.enableEmail> <div class=gmf-share-email ng-if=::$ctrl.enableEmail> <div class=form-group> <label for=gmfShareInputEmail translate>Send this link to</label> <input type=email class=form-control name=inputEmail id=gmfShareInputEmail placeholder=E-mail ng-model=$ctrl.email required> <span ng-show="gmfShareForm.$submitted || gmfShareForm.inputEmail.$touched"> <span class=text-danger ng-show="gmfShareForm.inputEmail.$error.email || gmfShareForm.inputEmail.$error.required"> <i class="fa fa-exclamation-triangle" aria-hidden=true></i> {{\'Invalid email.\' | translate}}</span> </span> </div> <div class=form-group> <textarea class=form-control ng-attr-placeholder="{{\'Message (optional)\' | translate }}" ng-model=$ctrl.message></textarea> </div> <span class=text-success ng-if=$ctrl.successfullySent> <i class="fa fa-check" aria-hidden=true></i> {{ \'Link successfully sent.\' | translate }} </span> <span class=text-danger ng-if=$ctrl.errorOnsend> <i class="fa fa-exclamation" aria-hidden=true></i> {{ \'Error, the link has not been sent.\' | translate }} </span> </div> <div class=text-right> <button type=button class="btn btn-default" data-dismiss=modal translate>Close</button> <button ng-if=::$ctrl.enableEmail type=submit class="btn btn-default btn-primary" ng-click=$ctrl.sendShortUrl() ng-disabled=!gmfShareForm.$valid translate>Send </button> </div> </form> </div> '},function(t,e){t.exports='<div class=lidar-panel gmf-drawprofileline gmf-drawprofileline-active=$ctrl.active gmf-drawprofileline-map=::$ctrl.map gmf-drawprofileline-line=$ctrl.line> <p> <button class="btn btn-default" ngeo-btn ng-model=ctrl.interaction.active translate>Draw LIDAR profile line </button> </p> <p> <em ng-if=ctrl.interaction.active class="text-muted small" translate> Draw a line on the map to display the corresponding LIDAR profile. Use double-click to finish the drawing. </em> </p> <div ng-if=$ctrl.ready> <div ng-if=!!$ctrl.line> <div> <button class="btn btn-default" ng-click=$ctrl.csvExport() translate> CSV export </button> <button class="btn btn-default" ng-click=$ctrl.pngExport() translate> PNG export </button> <button class="btn btn-default" ng-if=!!$ctrl.line ng-click=$ctrl.resetPlot() data-toggle=tooltip data-placement=left data-original-title="{{\'Reset profile\'|translate}}"> <span class="fa fa-refresh"></span> </button> </div> <hr> <button class="btn btn-default" ngeo-btn ng-model=measureActive ng-click=$ctrl.setMeasureActive() data-toggle=tooltip data-placement=left data-original-title="{{\'Take measure on the graph\'|translate}}" translate> Take measure </button> <button class="btn btn-default" ng-if=!!$ctrl.line ng-click=$ctrl.clearMeasure() data-toggle=tooltip data-placement=left data-original-title="{{\'Clear measure\'|translate}}"> <span class="fa fa-eraser"></span> </button> </div> <div> <hr> <p translate>Material</p> <select ng-options="option.name | translate for option in ::$ctrl.getAvailablePointAttributes()" ng-model-options="{getterSetter: true}" ng-model=$ctrl.getSetSelectedPointAttribute> </select> </div> <hr> <p translate>Classes</p> <div ng-repeat="(key, classification) in ::$ctrl.getClassification()"> <input ng-true-value=1 ng-false-value=0 ng-model=classification.visible ng-change="$ctrl.setClassification(classification, key)" ng-checked=!!classification.visible type=checkbox> <span>{{classification.name}}</span> </div> </div> <div ng-if=!$ctrl.ready> <p translate>Initializing, please wait...</p> </div> </div> '},function(t,e){t.exports='<div id=gmf-lidarprofile-container class=panel ng-show=$ctrl.active> <div class=lidarprofile> <div class=lidar-error></div> <canvas class=lidar-canvas></canvas> <svg class=lidar-svg style=fill:#ff0;position:absolute;z-index:1></svg> </div> <div class=lidar-legend> <div class=width-info></div> <div class=lod-info></div> <div class=lidar-info></div> </div> <div class=close ng-click="$ctrl.line = null">&times; </div> </div> '},function(t,e){t.exports='<div class=gmf-time-slider> <div ui-slider=sliderCtrl.sliderOptions ng-model=sliderCtrl.dates> <span class="ui-slider-handle ui-state-default ui-corner-all" tabindex=0 data-toggle=tooltip title=""> </span> </div> <div class=gmf-time-slider-displayed-dates> <div class=gmf-time-slider-start-date ng-if="::sliderCtrl.time.mode === \'range\'"> <span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates[0])}}</span> </div> <div class=gmf-time-slider-start-date ng-if="::sliderCtrl.time.mode === \'value\'"> <span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates)}}</span> </div> <div class=gmf-time-slider-end-date ng-if="::sliderCtrl.time.mode === \'range\'"> <span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates[1])}}</span> </div> </div> </div> '},function(t,e,n){(function(t){angular.module("ui.slider",[]).value("uiSliderConfig",{}).directive("uiSlider",["uiSliderConfig","$timeout",function(e,n){e=e||{};return{require:"ngModel",compile:function(){var i=function(i,r,a,o){function s(t,e){return e?parseFloat(t):parseInt(t,10)}var l=angular.copy(i.$eval(a.uiSlider));var u=angular.extend(l||{},e);var c={min:null,max:null};var f=["min","max","step","lowerBound","upperBound"];var h=!angular.isUndefined(a.useDecimals)?true:false;var d=angular.isDefined(u["updateOn"])?u["updateOn"]:"slide";var p=function(){if(angular.isArray(o.$viewValue)&&u.range!==true){console.warn("Change your range option of ui-slider. When assigning ngModel an array of values then the range option should be set to true.");u.range=true}angular.forEach(f,function(t){if(angular.isDefined(a[t])){u[t]=s(a[t],h)}});r.slider(u);p=angular.noop};angular.forEach(f,function(t){a.$observe(t,function(e){if(!!e){p();u[t]=s(e,h);r.slider("option",t,s(e,h));o.$render()}})});a.$observe("disabled",function(t){p();r.slider("option","disabled",!!t)});i.$watch(a.uiSlider,function(t){p();if(t!==undefined){r.slider("option",t)}},true);n(p,0,true);r.bind(d,function(e,n){var a;if(n.values){var s=n.values.slice();if(u.lowerBound&&s[0]<u.lowerBound){s[0]=Math.max(s[0],u.lowerBound)}if(u.upperBound&&s[1]>u.upperBound){s[1]=Math.min(s[1],u.upperBound)}if(s[0]!==n.values[0]||s[1]!==n.values[1]){a=true;n.values=s}}else{var l=n.value;if(u.lowerBound&&l<u.lowerBound){l=Math.max(l,u.lowerBound)}if(u.upperBound&&l>u.upperBound){l=Math.min(l,u.upperBound)}if(l!==n.value){a=true;n.value=l}}o.$setViewValue(n.values||n.value);t(n.handle).find(".ui-slider-tip").text(n.value);i.$apply();if(a){setTimeout(function(){r.slider("value",n.values||n.value)},0);return false}});o.$render=function(){p();var t=u.range===true?"values":"value";if(u.range!==true&&isNaN(o.$viewValue)&&!(o.$viewValue instanceof Array)){o.$viewValue=0}else if(u.range&&!angular.isDefined(o.$viewValue)){o.$viewValue=[0,0]}if(u.range===true){if(o.$viewValue&&angular.isString(o.$viewValue)&&(o.$viewValue.match(/,/g)||[]).length===1){var e=o.$viewValue.split(",");o.$viewValue=[Number(e[0]),Number(e[1])]}if(angular.isDefined(u.min)&&u.min>o.$viewValue[0]){o.$viewValue[0]=u.min}if(angular.isDefined(u.max)&&u.max<o.$viewValue[1]){o.$viewValue[1]=u.max}if(o.$viewValue[0]>o.$viewValue[1]){if(c.min>=o.$viewValue[1]){o.$viewValue[1]=c.min}if(c.max<=o.$viewValue[0]){o.$viewValue[0]=c.max}}c.min=o.$viewValue[0];c.max=o.$viewValue[1]}r.slider(t,o.$viewValue)};i.$watch(a.ngModel,function(){if(u.range===true){o.$render();t(r).find(".ui-slider-tip").each(function(e,n){t(n).text(o.$viewValue[e])})}else{t(r).find(".ui-slider-tip").text(o.$viewValue)}},true);function v(){if(r.hasClass("ui-slider")){r.slider("destroy")}}i.$on("$destroy",v);r.one("$destroy",v)};var r=function(e,i,r,a){var o=angular.extend({},e.$eval(r.uiSlider));var s=["min","max","step","tick","tip"];angular.forEach(s,function(t){if(angular.isDefined(r[t])){o[t]=r[t]}});if(angular.isDefined(o["tick"])&&angular.isDefined(o["step"])){var l=parseInt((parseInt(o["max"])-parseInt(o["min"]))/parseInt(o["step"]));for(var u=l;u>=0;u--){var c=u/l*100+"%";t("<div/>").addClass("ui-slider-tick").appendTo(i).css({left:c})}}if(angular.isDefined(o["tip"])){n(function(){var e=i.find(".ui-slider-handle");if(e&&e.length>1&&a.$viewValue&&angular.isArray(a.$viewValue)){t(e[0]).append('<div class="ui-slider-tip">'+a.$viewValue[0]+"</div>");t(e[1]).append('<div class="ui-slider-tip">'+a.$viewValue[1]+"</div>")}else{i.find(".ui-slider-handle").append('<div class="ui-slider-tip">'+a.$viewValue+"</div>")}},10)}};return{pre:i,post:r}}}}])}).call(this,n(38))},function(t,e,n){n(495);t.exports="ui.slider"},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Slider 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Slider 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(r=[n(38),n(293),n(371),n(118),n(236)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){return t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:false,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var e,n,i=this.options,r=this.element.find(".ui-slider-handle"),a="<span tabindex='0'></span>",o=[];n=i.values&&i.values.length||1;if(r.length>n){r.slice(n).remove();r=r.slice(0,n)}for(e=r.length;e<n;e++){o.push(a)}this.handles=r.add(t(o.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;if(e.range){if(e.range===true){if(!e.values){e.values=[this._valueMin(),this._valueMin()]}else if(e.values.length&&e.values.length!==2){e.values=[e.values[0],e.values[0]]}else if(t.isArray(e.values)){e.values=e.values.slice(0)}}if(!this.range||!this.range.length){this.range=t("<div>").appendTo(this.element);this._addClass(this.range,"ui-slider-range")}else{this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max");this.range.css({left:"",bottom:""})}if(e.range==="min"||e.range==="max"){this._addClass(this.range,"ui-slider-range-"+e.range)}}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();if(this.range){this.range.remove()}this._mouseDestroy()},_mouseCapture:function(e){var n,i,r,a,o,s,l,u,c=this,f=this.options;if(f.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();n={x:e.pageX,y:e.pageY};i=this._normValueFromMouse(n);r=this._valueMax()-this._valueMin()+1;this.handles.each(function(e){var n=Math.abs(i-c.values(e));if(r>n||r===n&&(e===c._lastChangedValue||c.values(e)===f.min)){r=n;a=t(this);o=e}});s=this._start(e,o);if(s===false){return false}this._mouseSliding=true;this._handleIndex=o;this._addClass(a,null,"ui-state-active");a.trigger("focus");l=a.offset();u=!t(e.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=u?{left:0,top:0}:{left:e.pageX-l.left-a.width()/2,top:e.pageY-l.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(e,o,i)}this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);this._slide(t,this._handleIndex,n);return false},_mouseStop:function(t){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=false;this._stop(t,this._handleIndex);this._change(t,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,r,a;if(this.orientation==="horizontal"){e=this.elementSize.width;n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{e=this.elementSize.height;n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}i=n/e;if(i>1){i=1}if(i<0){i=0}if(this.orientation==="vertical"){i=1-i}r=this._valueMax()-this._valueMin();a=this._valueMin()+i*r;return this._trimAlignValue(a)},_uiHash:function(t,e,n){var i={handle:this.handles[t],handleIndex:t,value:e!==undefined?e:this.value()};if(this._hasMultipleValues()){i.value=e!==undefined?e:this.values(t);i.values=n||this.values()}return i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,n){var i,r,a=this.value(),o=this.values();if(this._hasMultipleValues()){r=this.values(e?0:1);a=this.values(e);if(this.options.values.length===2&&this.options.range===true){n=e===0?Math.min(r,n):Math.max(r,n)}o[e]=n}if(n===a){return}i=this._trigger("slide",t,this._uiHash(e,n,o));if(i===false){return}if(this._hasMultipleValues()){this.values(e,n)}else{this.value(n)}},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){this._lastChangedValue=e;this._trigger("change",t,this._uiHash(e))}},value:function(t){if(arguments.length){this.options.value=this._trimAlignValue(t);this._refreshValue();this._change(null,0);return}return this._value()},values:function(e,n){var i,r,a;if(arguments.length>1){this.options.values[e]=this._trimAlignValue(n);this._refreshValue();this._change(null,e);return}if(arguments.length){if(t.isArray(arguments[0])){i=this.options.values;r=arguments[0];for(a=0;a<i.length;a+=1){i[a]=this._trimAlignValue(r[a]);this._change(null,a)}this._refreshValue()}else{if(this._hasMultipleValues()){return this._values(e)}else{return this.value()}}}else{return this._values()}},_setOption:function(e,n){var i,r=0;if(e==="range"&&this.options.range===true){if(n==="min"){this.options.value=this._values(0);this.options.values=null}else if(n==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}if(t.isArray(this.options.values)){r=this.options.values.length}this._super(e,n);switch(e){case"orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();if(this.options.range){this._refreshRange(n)}this.handles.css(n==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=r-1;i>=0;i--){this._change(null,i)}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_setOptionDisabled:function(t){this._super(t);this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;t=this._trimAlignValue(t);return t},_values:function(t){var e,n,i;if(arguments.length){e=this.options.values[t];e=this._trimAlignValue(e);return e}else if(this._hasMultipleValues()){n=this.options.values.slice();for(i=0;i<n.length;i+=1){n[i]=this._trimAlignValue(n[i])}return n}else{return[]}},_trimAlignValue:function(t){if(t<=this._valueMin()){return this._valueMin()}if(t>=this._valueMax()){return this._valueMax()}var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;if(Math.abs(n)*2>=e){i+=n>0?e:-e}return parseFloat(i.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),n=this.options.step,i=Math.round((t-e)/n)*n;t=i+e;if(t>this.options.max){t-=n}this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);if(this.options.min!==null){t=Math.max(t,this._precisionOf(this.options.min))}return t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return n===-1?0:e.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){if(t==="vertical"){this.range.css({width:"",left:""})}if(t==="horizontal"){this.range.css({height:"",bottom:""})}},_refreshValue:function(){var e,n,i,r,a,o=this.options.range,s=this.options,l=this,u=!this._animateOff?s.animate:false,c={};if(this._hasMultipleValues()){this.handles.each(function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100;c[l.orientation==="horizontal"?"left":"bottom"]=n+"%";t(this).stop(1,1)[u?"animate":"css"](c,s.animate);if(l.options.range===true){if(l.orientation==="horizontal"){if(i===0){l.range.stop(1,1)[u?"animate":"css"]({left:n+"%"},s.animate)}if(i===1){l.range[u?"animate":"css"]({width:n-e+"%"},{queue:false,duration:s.animate})}}else{if(i===0){l.range.stop(1,1)[u?"animate":"css"]({bottom:n+"%"},s.animate)}if(i===1){l.range[u?"animate":"css"]({height:n-e+"%"},{queue:false,duration:s.animate})}}}e=n})}else{i=this.value();r=this._valueMin();a=this._valueMax();n=a!==r?(i-r)/(a-r)*100:0;c[this.orientation==="horizontal"?"left":"bottom"]=n+"%";this.handle.stop(1,1)[u?"animate":"css"](c,s.animate);if(o==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[u?"animate":"css"]({width:n+"%"},s.animate)}if(o==="max"&&this.orientation==="horizontal"){this.range.stop(1,1)[u?"animate":"css"]({width:100-n+"%"},s.animate)}if(o==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[u?"animate":"css"]({height:n+"%"},s.animate)}if(o==="max"&&this.orientation==="vertical"){this.range.stop(1,1)[u?"animate":"css"]({height:100-n+"%"},s.animate)}}},_handleEvents:{keydown:function(e){var n,i,r,a,o=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:e.preventDefault();if(!this._keySliding){this._keySliding=true;this._addClass(t(e.target),null,"ui-state-active");n=this._start(e,o);if(n===false){return}}break}a=this.options.step;if(this._hasMultipleValues()){i=r=this.values(o)}else{i=r=this.value()}switch(e.keyCode){case t.ui.keyCode.HOME:r=this._valueMin();break;case t.ui.keyCode.END:r=this._valueMax();break;case t.ui.keyCode.PAGE_UP:r=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax()){return}r=this._trimAlignValue(i+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin()){return}r=this._trimAlignValue(i-a);break}this._slide(e,o,r)},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(e,n);this._change(e,n);this._removeClass(t(e.target),null,"ui-state-active")}}}})})},function(t,e){t.exports='<div class=gmf-layertree-root-tools ng-if=layertreeCtrl.isRoot> <a href ng-if="gmfLayertreeCtrl.nodesCount() > 0" ng-click=gmfLayertreeCtrl.removeAllNodes()> <span class="fa fa-trash"></span> {{\'Clear all\' | translate}} </a> </div> <div ng-if=::!layertreeCtrl.isRoot id=gmf-layertree-node-{{::layertreeCtrl.uid}} ng-class="[layertreeCtrl.node.children ? \'gmf-layertree-group\' : \'gmf-layertree-leaf\', \'gmf-layertree-depth-\' + layertreeCtrl.depth, gmfLayertreeCtrl.getResolutionStyle(layertreeCtrl.node), gmfLayertreeCtrl.getNodeState(layertreeCtrl)]"> <div class=ngeo-sortable-handle ng-show="layertreeCtrl.depth === 1 && layertreeCtrl.parent.children.length > 1"> <i class="gmf-layertree-sortable-handle-icon fa fa-ellipsis-v"></i> </div> <a ng-if=::layertreeCtrl.node.children data-toggle=collapse href=#gmf-layertree-layer-group-{{::layertreeCtrl.uid}} aria-expanded={{::layertreeCtrl.node.metadata.isExpanded}} class="fa gmf-layertree-expand-node fa-fw"> </a> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl) ng-if=::!layertreeCtrl.node.children ng-class="::{\'gmf-layertree-no-layer-icon\' : !gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl)}" class=gmf-layertree-layer-icon> <div> <img ng-if="::(legendIconUrl=gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl))" ng-src={{::legendIconUrl}}>  </div> </a> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl) ng-if=::layertreeCtrl.node.children> <span ng-switch="layertreeCtrl.node.children && !layertreeCtrl.layer.loading"> <i ng-switch-when=true class="fa fa-fw gmf-layertree-state"></i> <i ng-switch-when=false class="fa fa-fw fa-refresh fa-spin"></i> </span> </a> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl) class=gmf-layertree-name data-toggle=tooltip data-placement=top title="{{layertreeCtrl.node.name | translate}}"> {{layertreeCtrl.node.name | translate}} <i class="gmf-icon gmf-icon-search-go gmf-layertree-zoom" data-toggle=tooltip data-placement=bottom data-title="{{\'Not visible at current scale. Click to zoom.\'|translate}}" ng-click="::gmfLayertreeCtrl.zoomToResolution(layertreeCtrl); $event.preventDefault(); $event.stopPropagation();" ng-if="gmfLayertreeCtrl.getNodeState(layertreeCtrl) == \'on\'"> </i> <span ngeo-popover ngeo-popover-dismiss=.content ng-if="gmfLayertreeCtrl.getNodeState(layertreeCtrl) !== \'off\' && layertreeCtrl.node.time && layertreeCtrl.node.time.mode !== \'disabled\'"> <span ngeo-popover-anchor class="fa fa-clock-o" ng-click="$event.preventDefault(); $event.stopPropagation()"> </span> <div ngeo-popover-content> <ngeo-date-picker ng-if="::layertreeCtrl.node.time.widget === \'datepicker\'" time=layertreeCtrl.node.time on-date-selected="gmfLayertreeCtrl.updateWMSTimeLayerState(layertreeCtrl, time)"> </ngeo-date-picker> <gmf-time-slider ng-if="::layertreeCtrl.node.time.widget === \'slider\'" gmf-time-slider-time=layertreeCtrl.node.time gmf-time-slider-on-date-selected="gmfLayertreeCtrl.updateWMSTimeLayerState(layertreeCtrl, time)"> </gmf-time-slider> </div> </span> <span class="fa fa-pencil" data-toggle=tooltip data-placement=right title="{{\'Currently editing this layer\'|translate}}" ng-if=layertreeCtrl.properties.editing> </span> </a> <span class=gmf-layertree-right-buttons> <a href="" ng-if="::layertreeCtrl.depth == 1" ng-click=gmfLayertreeCtrl.removeNode(layertreeCtrl.node)> <span class="fa fa-trash"></span> </a> <a class=gmf-layertree-node-menu-btn href="" ng-if=::gmfLayertreeCtrl.supportsCustomization(layertreeCtrl) ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-menu-\' + layertreeCtrl.uid)"> <span class="fa fa-cog"></span> </a> <span ngeo-popover ng-if="::(layertreeCtrl.depth === 1 && !layertreeCtrl.node.mixed) || (layertreeCtrl.depth > 1 && layertreeCtrl.parent.node.mixed && !layertreeCtrl.node.children) || (gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend) || layertreeCtrl.getDataSource().filtrable" ngeo-popover-dismiss=.content> <span ngeo-popover-anchor class="extra-actions fa fa-cog"> </span> <div ngeo-popover-content> <ul> <li ng-if="::(layertreeCtrl.depth === 1 && !layertreeCtrl.node.mixed) || (layertreeCtrl.depth > 1 && layertreeCtrl.parent.node.mixed)"> <i class="fa fa-tint fa-fw"></i> <span for=layer-opactity>{{\'Opacity\'|translate}}</span> <input class=input-action name=layer-opactity type=range min=0 max=1 step=0.01 ng-model=layertreeCtrl.layer.opacity /> </li> <li ng-if="::gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend"> <i class="fa fa-th-list fa-fw"></i> <a ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\'); popoverCtrl.dismissPopover()" data-toggle=collapse href=""> {{\'Show/hide legend\'|translate}} </a> </li> <li ng-if="layertreeCtrl.getDataSource() && layertreeCtrl.getDataSource().filtrable"> <i class="fa fa-filter fa-fw"></i> <a ng-click=gmfLayertreeCtrl.toggleFiltrableDataSource(layertreeCtrl.getDataSource()) href=""> {{\'Filter\'|translate}} </a> </li> </ul> </div> </span> <span class=gmf-layertree-metadata ng-if=::layertreeCtrl.node.metadata.metadataUrl> <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow === true"> <a title="{{\'More informations\'|translate}}" href={{::layertreeCtrl.node.metadata.metadataUrl}} target=blank_> </a> </span> <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow !== true"> <a title="{{\'More informations\'|translate}}" href="" ng-click=gmfLayertreeCtrl.displayMetadata(layertreeCtrl)> </a> </span> </span> </span> </div> <div class=gmf-layertree-node-menu id=gmf-layertree-node-menu-{{::layertreeCtrl.uid}} style=display:none ng-if=::gmfLayertreeCtrl.supportsCustomization(layertreeCtrl)> <div ng-if=::gmfLayertreeCtrl.supportsOpacityChange(layertreeCtrl)> <i class="fa fa-tint fa-fw"></i> <span for=layer-opactity>{{\'Opacity\'|translate}}</span> <input class=input-action name=layer-opactity type=range min=0 max=1 step=0.01 ng-model=layertreeCtrl.layer.opacity /> </div> <a class=gmf-layertree-node-menu-togglelegend ng-if=::gmfLayertreeCtrl.supportsLegend(layertreeCtrl) data-toggle=collapse ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')" href=""> <span class="fa fa-th-list"> </span> {{\'Show/hide legend\'|translate}} </a> </div> <div ng-if="::!layertreeCtrl.isRoot && gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend" id=gmf-layertree-node-{{::layertreeCtrl.uid}}-legend class="collapse gmf-layertree-legend" ng-class="[gmfLayertreeCtrl.getNodeState(layertreeCtrl), layertreeCtrl.node.metadata.isLegendExpanded ? \'in\' : \'\']"> <a title="{{\'Hide legend\'|translate}}" data-toggle=collapse ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')" href=""> {{\'Hide legend\'|translate}} </a> <div ng-if="gmfLayertreeCtrl.isNodeLegendVisible(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')"> <div ng-repeat="(title, url) in gmfLayertreeCtrl.getLegendsObject(layertreeCtrl)"> <p ng-if="gmfLayertreeCtrl.getNumberOfLegendsObject(layertreeCtrl) > 1">{{title|translate}}</p> <img ng-src={{url}}> </div> </div> </div> <ul class=gmf-layertree-root-external-datasources ng-if="layertreeCtrl.isRoot && (gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmsGroups.length || gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmtsGroups.length || gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup.dataSources.length)"> <gmf-datasourcegrouptree class="gmf-layertree-node gmf-layertree-depth-1" ng-repeat="wmtsGroup in gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmtsGroups" group=wmtsGroup> </gmf-datasourcegrouptree> <gmf-datasourcegrouptree class="gmf-layertree-node gmf-layertree-depth-1" ng-repeat="wmsGroup in gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmsGroups" group=wmsGroup> </gmf-datasourcegrouptree> <gmf-datasourcegrouptree class="gmf-layertree-node gmf-layertree-depth-1" ng-if=gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup.dataSources.length group=gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup> </gmf-datasourcegrouptree> </ul> <ul id=gmf-layertree-layer-group-{{::layertreeCtrl.uid}} ng-if=::layertreeCtrl.node.children ng-class="{collapse: !layertreeCtrl.isRoot, in : layertreeCtrl.node.metadata.isExpanded}" ngeo-sortable="::layertreeCtrl.isRoot && layertreeCtrl.node.children" ngeo-sortable-options="{handleClassName: \'ngeo-sortable-handle\', draggerClassName: \'gmf-layertree-dragger\', placeholderClassName : \'gmf-layertree-curr-drag-item\'}" ngeo-sortable-callback=::gmfLayertreeCtrl.afterReorder ngeo-sortable-callback-ctx=::gmfLayertreeCtrl> <li class=gmf-layertree-node ng-repeat="node in layertreeCtrl.node.children" ng-class="\'gmf-layertree-depth-\' + layertreeCtrl.depth" ngeo-layertree=node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> '},function(t,e){t.exports='<span ng-if=::!layertreeCtrl.isRoot>{{::layertreeCtrl.node.name}}</span> <input type=checkbox ng-if="::layertreeCtrl.node && !layertreeCtrl.node.children" ng-model=layertreeCtrl.getSetActive ng-model-options="{getterSetter: true}"/> <ul ng-if=::layertreeCtrl.node.children> <li ng-repeat="node in ::layertreeCtrl.node.children" ngeo-layertree=::node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> '},function(t,e){t.exports='<div class="gmf-layertree-group gmf-layertree-depth-1 {{$ctrl.group.visibilityState}}"> <a data-toggle=collapse href=#gmf-layertree-layer-group-{{::$ctrl.getGroupUid()}} aria-expanded=true class="fa gmf-layertree-expand-node fa-fw"> </a> <a class="fa fa-fw gmf-layertree-state" href ng-click=$ctrl.toggle()> </a> <a class=gmf-layertree-name href ng-click=$ctrl.toggle()> <span>{{$ctrl.group.title | translate}}</span> </a> <span class=gmf-layertree-right-buttons> <a href="" ng-click=$ctrl.remove()> <span class="fa fa-trash"></span> </a> </span> </div> <ul id=gmf-layertree-layer-group-{{::$ctrl.getGroupUid()}} class="collapse in"> <li class="gmf-layertree-node gmf-layertree-depth-2" ng-class="[dataSource.visible ? \'on\' : \'off\']" ng-repeat="dataSource in $ctrl.group.dataSources"> <div class=gmf-layertree-leaf> <a href ng-click=$ctrl.toggleDataSource(dataSource) class="gmf-layertree-layer-icon gmf-layertree-no-layer-icon"> </a> <a class=gmf-layertree-name href ng-click=$ctrl.toggleDataSource(dataSource)> <span>{{dataSource.name | translate}}</span> </a> <span class=gmf-layertree-right-buttons> <a href="" ng-click=$ctrl.removeDataSource(dataSource)> <span class="fa fa-trash"></span> </a> </span> </div> </li> </ul> '},function(t,e,n){t.exports=n.p+"crosshair.3aa99e.svg"},function(t,e){t.exports='<div class=form-group> <select class=form-control ng-model=$ctrl.mode ng-options="mode | translate for mode in $ctrl.modes" ng-click="$ctrl.hasError = false"> </select> </div> <div> <form name=idsl_form novalidate ng-show="$ctrl.mode === \'Local\'"> <div class=form-group> <div class=input-group> <input name=file type=file required/> <input class=form-control placeholder="{{\'No file\' | translate}}" readonly=readonly type=text value={{$ctrl.fileNameAndSize}} ng-click=$ctrl.browse() /> <span class=input-group-btn> <button class="btn btn-default" type=button ng-click=$ctrl.browse() translate>Browse</button> </span> </div> </div> <div class=form-group> <button class="btn btn-sm btn-default form-control" ng-class="{\'has-error\': $ctrl.hasError}" title="{{\'Load a file from local\' | translate}}" type=submit ng-click="idsl_form.$valid && $ctrl.load()" ng-disabled="$ctrl.file === undefined || $ctrl.hasError"> <span ng-if=!$ctrl.hasError>{{\'Load local file\' | translate}}</span> <span ng-if=$ctrl.hasError>{{\'Unable to load the file\' | translate}}</span> </button> </div> </form> <form name=idsc_form novalidate ng-show="$ctrl.mode === \'Online\'"> <div class="form-group gmf-importdatasource-url-form-group"> <input autocomplete=off class=form-control name=url placeholder="{{\'Choose or enter online resource URL\' | translate}}" required type=url ng-disabled=$ctrl.pending ng-model=$ctrl.url /> </div> <div class=form-group> <button class="btn btn-sm btn-default form-control gmf-importdatasource-connect-btn" ng-class="{\'has-error\': $ctrl.hasError}" title="{{\'Connect to online resource\' | translate}}" type=submit ng-click="idsc_form.$valid && $ctrl.connect()" ng-disabled="idsc_form.$invalid || $ctrl.pending"> <span ng-if=$ctrl.pending>{{\'Connecting, please wait...\' | translate}}</span> <span ng-if="!$ctrl.pending && $ctrl.hasError">{{\'Failed to connect\' | translate}}</span> <span ng-if="!$ctrl.pending && !$ctrl.hasError">{{\'Connect\' | translate}}</span> </button> </div> </form> </div> <div class=gmf-importdatasource-layers ng-if="$ctrl.wmsCapabilities !== null || $ctrl.wmtsCapabilities !== null"> <hr/> <gmf-wmscapabilitylayertreenode capabilities=::$ctrl.wmsCapabilities layer=::$ctrl.wmsCapabilities.Capability.Layer url=::$ctrl.url ng-if="$ctrl.wmsCapabilities !== null"> </gmf-wmscapabilitylayertreenode> <gmf-wmtscapabilitylayertree capabilities=::$ctrl.wmtsCapabilities layers=::$ctrl.wmtsCapabilities.Contents.Layer url=::$ctrl.url ng-if="$ctrl.wmtsCapabilities !== null"> </gmf-wmtscapabilitylayertree> </div> '},function(t,e){t.exports='<ul> <li ng-repeat="layer in ::$ctrl.layers"> <div class=gmf-wmscapabilitylayertreenode-header> <span class=gmf-wmscapabilitylayertreenode-popover-container ngeo-popover ngeo-popover-dismiss=.content ngeo-popover-placement=left> <span ngeo-popover-anchor class="fa fa-cog gmf-wmscapabilitylayertreenode-actions"> </span> <div class=gmf-wmscapabilitylayertreenode-popover-content ngeo-popover-content> <ul> <li> <i class="fa fa-plus fa-fw"></i> <a href="" ng-click="$ctrl.createAndAddDataSource(layer); popoverCtrl.dismissPopover()"> <span translate>Add layer</span> </a> </li> <li ng-if="::(layer.Abstract !== undefined)"> <i class="fa fa-th-list fa-fw"></i> <a aria-expanded=false data-toggle=collapse href=#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}} ng-click=popoverCtrl.dismissPopover()> <span translate>Open/Close description</span> </a> </li> </ul> </div> </span> <a class="fa fa-circle-thin gmf-wmscapabilitylayertreenode-no-icon fa-fw"></a> <span class=gmf-wmscapabilitylayertreenode-title>{{ ::layer.Title }}</span> <div class="collapse gmf-wmscapabilitylayertreenode-description" id=gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}} ng-if="::(layer.Abstract !== undefined)"> <a aria-expanded=false class=gmf-wmscapabilitylayertreenode-description-toggle data-toggle=collapse href=#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}> <span translate>Hide description</span> </a> <span class=gmf-wmscapabilitylayertreenode-description-content>{{ ::layer.Abstract }}</span> </div> </div> </li> </ul> '},function(t,e){t.exports='<ul> <li ng-repeat="layer in ::$ctrl.layer.Layer"> <div class=gmf-wmscapabilitylayertreenode-header> <span class=gmf-wmscapabilitylayertreenode-popover-container ng-if="::(layer.Name !== undefined || layer.Abstract !== undefined)" ngeo-popover ngeo-popover-dismiss=.content ngeo-popover-placement=left> <span ngeo-popover-anchor class="fa fa-cog gmf-wmscapabilitylayertreenode-actions"> </span> <div class=gmf-wmscapabilitylayertreenode-popover-content ngeo-popover-content> <ul> <li ng-if="::(layer.Name !== undefined)"> <i class="fa fa-plus fa-fw"></i> <a href="" ng-click="$ctrl.createAndAddDataSource(layer); popoverCtrl.dismissPopover()"> <span translate>Add layer</span> </a> </li> <li ng-if="::(layer.Abstract !== undefined)"> <i class="fa fa-th-list fa-fw"></i> <a aria-expanded=false data-toggle=collapse href=#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}} ng-click=popoverCtrl.dismissPopover()> <span translate>Open/Close description</span> </a> </li> </ul> </div> </span> <a aria-expanded=false class="fa gmf-wmscapabilitylayertreenode-expand-node fa-fw" data-toggle=collapse href=#gmf-wmscapabilitylayertreenode-children-{{::$ctrl.getUid(layer)}} ng-if="::(layer.Layer !== undefined && layer.Layer.length)"></a> <span ng-if="::(layer.Layer !== undefined && layer.Layer.length)" class="fa fa-fw gmf-wmscapabilitylayertreenode-group"> </span> <a class="fa fa-circle-thin gmf-wmscapabilitylayertreenode-no-icon fa-fw" ng-if="::(layer.Layer === undefined || layer.Layer.length === 0)"></a> <span class=gmf-wmscapabilitylayertreenode-title>{{ ::layer.Title }}</span> <div class="collapse gmf-wmscapabilitylayertreenode-description" id=gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}} ng-if="::(layer.Abstract !== undefined)"> <a aria-expanded=false class=gmf-wmscapabilitylayertreenode-description-toggle data-toggle=collapse href=#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}> <span translate>Hide description</span> </a> <span class=gmf-wmscapabilitylayertreenode-description-content>{{ ::layer.Abstract }}</span> </div> </div> <gmf-wmscapabilitylayertreenode class=collapse id=gmf-wmscapabilitylayertreenode-children-{{::$ctrl.getUid(layer)}} capabilities=::$ctrl.capabilities layer=::layer ng-if="::(layer.Layer !== undefined)"> </gmf-wmscapabilitylayertreenode> </li> </ul> '},function(t,e){t.exports='<div class=form-group ng-switch=$ctrl.filtrableDataSources.length> <span ng-switch-when=0 translate>No filtrable layer available!</span> <select class=form-control ng-disabled=$ctrl.aRuleIsActive ng-switch-default ng-model=$ctrl.gmfDataSourceBeingFiltered.dataSource ng-options="dataSource.name | translate for dataSource in $ctrl.filtrableDataSources"> <option value="" translate>-- Layer to filter --</option> </select> <div ng-if="$ctrl.customRules && $ctrl.directedRules && $ctrl.readyDataSource"> <hr class=gmf-filterselector-separator /> <div class="dropdown gmf-filterselector-savedfilters"> <a class="btn btn-link dropdown-toggle ngeo-filter-condition-button" ng-class="{disabled: $ctrl.aRuleIsActive || $ctrl.gmfSavedFilters.currentDataSourceItems.length === 0}" type=button data-toggle=dropdown ng-disabled="$ctrl.aRuleIsActive || $ctrl.gmfSavedFilters.currentDataSourceItems.length === 0"> <span translate>Saved</span> <span class=caret></span> </a> <ul class=dropdown-menu> <li ng-repeat="item in $ctrl.gmfSavedFilters.currentDataSourceItems"> <a href ng-click=$ctrl.saveFilterLoadItem(item)> <span>{{::item.name}}</span> </a> </li> <li role=separator class=divider></li> <li> <a href ng-click=$ctrl.saveFilterManage()> <span translate>Manage saved filters</span> </a> </li> </ul> </div> <ngeo-filter a-rule-is-active=$ctrl.aRuleIsActive custom-rules=$ctrl.customRules datasource=$ctrl.readyDataSource directed-rules=$ctrl.directedRules feature-overlay=$ctrl.featureOverlay map=$ctrl.map tool-group=$ctrl.toolGroup> </ngeo-filter> <div> <a class="btn btn-link gmf-filterselector-savebtn" type=button data-toggle=dropdown ng-click="!$ctrl.aRuleIsActive && $ctrl.saveFilterShowModal()" ng-disabled=$ctrl.aRuleIsActive> <span class="fa fa-save"></span> <span translate>Save</span> </a> </div> </div> <ngeo-modal ng-model=$ctrl.saveFilterSaveModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title>{{\'Save filter\' | translate}}</h4> </div> <div class=modal-body> <p class=gmf-filterselector-savefilter-desc translate> You can save the filter that you created to re-load it later. </p> <input type=text class=form-control name=name ng-model=$ctrl.saveFilterName placeholder="{{\'Filter name\' | translate}}"/> </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal>{{\'Cancel\' | translate}}</button> <button type=button ng-click=$ctrl.saveFilterSave() ng-disabled="$ctrl.saveFilterName === \'\'" class="btn btn-primary">{{\'Save\' | translate}}</button> </div> </ngeo-modal> <ngeo-modal ng-model=$ctrl.saveFilterManageModalShown> <div class=gmf-filterselector-managefilter-modal> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title>{{\'Manage filters\' | translate}}</h4> </div> <div class=modal-body> <ul> <li ng-repeat="item in $ctrl.gmfSavedFilters.currentDataSourceItems"> <span>{{::item.name}}</span> <a href ng-click=$ctrl.saveFilterRemoveItem(item)> {{ \'Delete\' | translate }} </a> <div class=gmf-eol></div> </li> </ul> </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal>{{\'Close\' | translate}}</button> </div> </div> </ngeo-modal> </div> '},function(t,e){t.exports='<div class=dropdown> <a class="btn btn-link dropdown-toggle ngeo-filter-condition-button" ng-class="{disabled: $ctrl.aRuleIsActive}" type=button data-toggle=dropdown ng-disabled=$ctrl.aRuleIsActive> <span class="fa fa-cog"></span> <span class=caret></span> </a> <ul class=dropdown-menu> <li class=ngeo-filter-condition-criteria-header translate>Criteria taken into account</li> <li ng-repeat="condition in ::$ctrl.conditions"> <a href ng-click=$ctrl.setCondition(condition)> <span ng-class="{\'ngeo-filter-condition-criteria-active\': condition.value == $ctrl.datasource.filterCondition}" class="fa fa-check ngeo-filter-condition-criteria"> </span> <span>{{::condition.text | translate}}</span> </a> </li> </ul> </div> <ngeo-rule ng-repeat="rule in $ctrl.directedRules" feature-overlay=::$ctrl.featureOverlay class=ngeo-filter-rule-directed map=$ctrl.map rule=rule tool-group=$ctrl.toolGroup> </ngeo-rule> <hr class=ngeo-filter-separator-rules /> <div ng-repeat="rule in $ctrl.customRules"> <a class="btn btn-xs btn-link ngeo-filter-rule-custom-rm-btn" ng-click="!$ctrl.aRuleIsActive && $ctrl.removeCustomRule(rule)" ng-disabled=$ctrl.aRuleIsActive href> <span class="fa fa-remove"></span> </a> <ngeo-rule feature-overlay=::$ctrl.featureOverlay class=ngeo-filter-rule-custom map=$ctrl.map rule=rule tool-group=$ctrl.toolGroup> </ngeo-rule> </div> <div class=dropdown> <a class="btn btn-link dropdown-toggle" ng-class="{disabled: $ctrl.aRuleIsActive}" type=button data-toggle=dropdown ng-disabled=$ctrl.aRuleIsActive> <span translate>+ Add a new criteria</span> <span class=caret></span> </a> <ul class=dropdown-menu> <li ng-repeat="attribute in ::$ctrl.geometryAttributes"> <a href ng-click=$ctrl.createAndAddCustomRule(attribute)> <span translate>Spatial filter</span> </a> </li> <li role=presentation class=divider></li> <li ng-repeat="attribute in ::$ctrl.otherAttributes"> <a href ng-click=$ctrl.createAndAddCustomRule(attribute)> <span>{{::attribute.name | translate}}</span> </a> </li> </ul> </div> <hr class=ngeo-filter-separator-criteria /> <a class="btn btn-link" type=button ng-click=$ctrl.apply() ng-disabled="$ctrl.hasARule() === false || $ctrl.datasource.visible === false"> <span class="fa fa-check"></span> <span translate>Apply filter</span> </a> <a class="btn btn-link" type=button ng-click=$ctrl.getData() ng-disabled="$ctrl.hasARule() === false || $ctrl.datasource.visible === false"> <span class="fa fa-chevron-right"></span> <span translate>Get data</span> </a> '},function(t,e){t.exports='<div class=dropdown ng-class="{open: $ctrl.rule.active}"> <a class="btn btn-default btn-sm dropdown-toggle" type=button ng-click=$ctrl.toggle()> <span>{{ ::$ctrl.clone.name | translate }}</span> <span class=caret></span> </a> <div class="dropdown-menu form-group"> <select class="form-control input-sm ngeo-rule-operators-list" ng-disabled=$ctrl.drawActive ng-if=::$ctrl.clone.operators ng-model=$ctrl.clone.operator ng-options="$ctrl.operators[operator] | translate for operator in ::$ctrl.clone.operators track by operator"> </select> <div ng-switch=::$ctrl.clone.type> <div class="ngeo-rule-type-date form-group" ng-if=$ctrl.rule.active ng-switch-when=date|datetime ng-switch-when-separator=|> <div ng-switch=$ctrl.clone.operator> <div ng-switch-when=..|time_during ng-switch-when-separator=|> <ngeo-date-picker time=$ctrl.timeRangeMode on-date-selected=$ctrl.onDateRangeSelected(time)> </ngeo-date-picker> </div> <div ng-switch-default> <ngeo-date-picker time=$ctrl.timeValueMode on-date-selected=$ctrl.onDateSelected(time)> </ngeo-date-picker> </div> </div> </div> <div class="ngeo-rule-type-geometry form-group" ng-switch-when=geometry> <div ng-switch=$ctrl.geomType> <span class="gmf-icon gmf-icon-point" ng-switch-when=Point> </span> <span class="gmf-icon gmf-icon-line" ng-switch-when=LineString> </span> <span class="gmf-icon gmf-icon-polygon" ng-switch-when=Polygon> </span> <span class="gmf-icon gmf-icon-circle" ng-switch-when=Circle> </span> <span class="gmf-icon gmf-icon-rectangle" ng-switch-when=Rectangle> </span> </div> <ngeo-drawfeature ngeo-drawfeature-active=$ctrl.drawActive ngeo-drawfeature-features=$ctrl.drawnFeatures ngeo-drawfeature-map=$ctrl.map> <div ngeo-btn-group class=btn-group> <a data-toggle=tooltip title="{{\'Draw a point on the map\' | translate}}" href ngeo-btn ngeo-drawpoint class="btn btn-sm btn-default ngeo-drawfeature-point" ng-show="[\'intersects\', \'within\'].indexOf($ctrl.clone.operator) !== -1" ng-class="{active: dfCtrl.drawPoint.active}" ng-model=dfCtrl.drawPoint.active> <span class="gmf-icon gmf-icon-point"></span> </a> <a data-toggle=tooltip title="{{\'Draw a line on the map\' | translate}}" href ngeo-btn ngeo-measurelength class="btn btn-sm btn-default ngeo-drawfeature-linestring" ng-show="[\'intersects\', \'within\'].indexOf($ctrl.clone.operator) !== -1" ng-class="{active: dfCtrl.measureLength.active}" ng-model=dfCtrl.measureLength.active> <span class="gmf-icon gmf-icon-line"></span> </a> <a data-toggle=tooltip title="{{\'Draw a polygon on the map\' | translate}}" href ngeo-btn ngeo-measurearea class="btn btn-sm btn-default ngeo-drawfeature-polygon" ng-class="{active: dfCtrl.measureArea.active}" ng-model=dfCtrl.measureArea.active> <span class="gmf-icon gmf-icon-polygon"></span> </a> <a data-toggle=tooltip title="{{\'Draw a circle on the map\' | translate}}" href ngeo-btn ngeo-measureazimut class="btn btn-sm btn-default ngeo-drawfeature-circle" ng-class="{active: dfCtrl.measureAzimut.active}" ng-model=dfCtrl.measureAzimut.active> <span class="gmf-icon gmf-icon-circle"></span> </a> <a data-toggle=tooltip title="{{\'Draw a rectangle on the map\' | translate}}" href ngeo-btn ngeo-drawrectangle class="btn btn-sm btn-default ngeo-drawfeature-rectangle" ng-class="{active: dfCtrl.drawRectangle.active}" ng-model=dfCtrl.drawRectangle.active> <span class="gmf-icon gmf-icon-rectangle"></span> </a> </div> <div class=ngeo-rule-type-geometry-instructions ng-if=$ctrl.drawActive> <span ng-if=dfCtrl.drawPoint.active> {{ \'Draw a point on the map.\' | translate }} </span> <span ng-if=dfCtrl.measureLength.active> {{ \'Draw a line string on the map.\' | translate }} </span> <span ng-if=dfCtrl.measureArea.active> {{ \'Draw a polygon on the map.\' | translate }} </span> <span ng-if=dfCtrl.measureAzimut.active> {{ \'Draw a circle on the map.\' | translate }} </span> <span ng-if=dfCtrl.drawRectangle.active> {{ \'Draw a rectangle on the map.\' | translate }} </span> </div> </ngeo-drawfeature> </div> <div class="checkbox ngeo-rule-type-select" ng-switch-when=select> <a ng-click=$ctrl.selectAllChoices() href>{{ All | translate}} </a> <label class="form-group ol-unselectable" ng-repeat="choice in ::$ctrl.clone.choices"> <input ng-checked="$ctrl.clone.getExpression() && $ctrl.clone.getExpression().split(\',\').indexOf(choice) > -1" ng-click=$ctrl.toggleChoiceSelection(choice) type=checkbox value=choice /> <span>{{ choice | translate }}</span> </label> </div> <div class="form-group ngeo-rule-type-text" ng-switch-default> <div ng-switch=$ctrl.clone.operator> <div ng-switch-when=..> <input type=number class="form-control input-sm" ng-model=$ctrl.clone.lowerBoundary /> <input type=number class="form-control input-sm" ng-model=$ctrl.clone.upperBoundary /> </div> <div ng-switch-default> <input type=number class="form-control input-sm" ng-if="$ctrl.clone.type === \'number\'" ng-model=$ctrl.clone.expression /> <input type=text class="form-control input-sm" ng-if="$ctrl.clone.type !== \'number\'" ng-model=$ctrl.clone.expression /> </div> </div> </div> <div class=ngeo-rule-btns> <button class="btn btn-xs btn-default" ng-click=$ctrl.apply() type=button>{{\'Apply\' | translate}}</button> <button class="btn btn-xs btn-default" ng-click=$ctrl.cancel() type=button>{{\'Cancel\' | translate}}</button> </div> </div> </div> </div> <div class=ngeo-rule-value ng-if="$ctrl.rule.value !== null"> <a class="btn btn-xs btn-link" ng-click="!$ctrl.rule.active && $ctrl.reset()" ng-disabled=$ctrl.rule.active href> <span class="fa fa-remove"></span> </a> <div ng-switch=::$ctrl.rule.type> <div ng-switch-when=date|datetime ng-switch-when-separator=|> <div ng-switch=$ctrl.rule.operator> <div ng-switch-when=..|time_during ng-switch-when-separator=|> <span translate>From </span> <span>{{ $ctrl.timeToDate($ctrl.rule.lowerBoundary) }}</span> <span translate> to </span> <span>{{ $ctrl.timeToDate($ctrl.rule.upperBoundary) }}</span> </div> <div ng-switch-default> <span>{{ $ctrl.operatorsShortFormat[$ctrl.rule.operator] }}</span> <span>{{ $ctrl.timeToDate($ctrl.rule.getExpression()) }}</span> </div> </div> </div> <div ng-switch-when=geometry> <span>{{ $ctrl.operators[$ctrl.rule.operator] }}</span> <span ng-switch=$ctrl.getRuleGeometryType()> <span class="gmf-icon gmf-icon-point" ng-switch-when=Point> </span> <span class="gmf-icon gmf-icon-line" ng-switch-when=LineString> </span> <span class="gmf-icon gmf-icon-polygon" ng-switch-when=Polygon> </span> <span class="gmf-icon gmf-icon-circle" ng-switch-when=Circle> </span> <span class="gmf-icon gmf-icon-rectangle" ng-switch-when=Rectangle> </span> </span> </div> <div ng-switch-when=select> <span ng-repeat="choice in $ctrl.rule.getExpression().split(\',\')"> {{ choice | translate }}{{ $last ? \'\' : \', \' }} </span> </div> <div ng-switch-default> <div ng-switch=$ctrl.rule.operator> <div ng-switch-when=..|time_during ng-switch-when-separator=|> <span translate>Between </span> <span>{{ $ctrl.rule.lowerBoundary }}</span> <span translate> and </span> <span>{{ $ctrl.rule.upperBoundary }}</span> </div> <div ng-switch-default> <span>{{ $ctrl.operatorsShortFormat[$ctrl.rule.operator] }}</span> <span>{{ $ctrl.rule.getExpression() }}</span> </div> </div> </div> </div> </div> '},function(t,e){t.exports='<div class=ngeo-datepicker> <form name=dateForm class=ngeo-datepicker-form novalidate> <div ng-if="::datepickerCtrl.time.widget === \'datepicker\'"> <div class=ngeo-datepicker-start-date> <span ng-if="::datepickerCtrl.time.mode === \'range\'" translate>From:</span> <span ng-if="::datepickerCtrl.time.mode !== \'range\'" translate>Date:</span> <input name=sdate ui-date=datepickerCtrl.sdateOptions ng-model=datepickerCtrl.sdate required=""/> </div> <div class=ngeo-datepicker-end-date ng-if="::datepickerCtrl.time.mode === \'range\'"> <span translate>To:</span> <input name=edate ui-date=datepickerCtrl.edateOptions ng-model=datepickerCtrl.edate required=""/> </div> </div> </form> </div> '},function(t,e,n){var i,r,a;(function(o){if(true){!(r=[n(279)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){t.regional.it={closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};t.setDefaults(t.regional.it);return t.regional.it})},function(t,e,n){var i,r,a;(function(o){if(true){!(r=[n(279)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){t.regional.de={closeText:"Schließen",prevText:"&#x3C;Zurück",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};t.setDefaults(t.regional.de);return t.regional.de})},function(t,e,n){var i,r,a;(function(o){if(true){!(r=[n(279)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){t.regional["en-GB"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};t.setDefaults(t.regional["en-GB"]);return t.regional["en-GB"]})},function(t,e,n){var i,r,a;(function(o){if(true){!(r=[n(279)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){t.regional.fr={closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthNamesShort:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};t.setDefaults(t.regional.fr);return t.regional.fr})},function(t,e,n){(function e(i,r){if(true)t.exports=r(n(38),n(385),n(279));else{}})(this,function(t,e,n){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:false};t[i].call(r.exports,r,r.exports,n);r.loaded=true;return r.exports}n.m=t;n.c=e;n.p="assets";return n(0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});var i=n(1);var r=u(i);var a=n(2);var o=u(a);var s=n(3);var l=u(s);function u(t){return t&&t.__esModule?t:{default:t}}e.default=o.default.module("ui.date",[]).constant("uiDateConfig",{}).constant("uiDateFormatConfig","").factory("uiDateConverter",["uiDateFormatConfig",function(t){return{stringToDate:n,dateToString:e};function e(e,n){var i=e||t;if(n){if(i){try{return r.default.datepicker.formatDate(i,n)}catch(t){return undefined}}if(n.toISOString){return n.toISOString()}}return null}function n(e,n){e=e||t;if(o.default.isDate(n)&&!isNaN(n)){return n}if(o.default.isString(n)){if(e){return r.default.datepicker.parseDate(e,n)}var i=new Date(n);return isNaN(i.getTime())?null:i}if(o.default.isNumber(n)){return new Date(n)}return null}}]).directive("uiDate",["uiDateConfig","uiDateConverter",function t(e,n){return{require:"?ngModel",link:function t(i,a,s,l){var u=(0,r.default)(a);var c=function t(){return o.default.extend({},e,i.$eval(s.uiDate))};var f=function t(){var e=false;var r=c();function f(t){var e=["Hours","Minutes","Seconds","Milliseconds"];var n=o.default.isDate(l.$modelValue);var i={};if(!t&&n&&l.$modelValue.toDateString()===u.datepicker("getDate").toDateString()){return}if(n){o.default.forEach(e,function(t){i[t]=l.$modelValue["get"+t]()})}var r=u.datepicker("getDate");if(n){o.default.forEach(e,function(t){r["set"+t](i[t])})}l.$setViewValue(r)}if(l){var h=r.onSelect||o.default.noop;r.onSelect=function(t,n){i.$apply(function(){e=true;f();u.blur();h(t,n,u)})};var d=r.beforeShow||o.default.noop;r.beforeShow=function(t,n){e=true;d(t,n,u)};var p=r.onClose||o.default.noop;r.onClose=function(t,n){e=false;p(t,n,u)};a.on("focus",function(t){if(s.readonly){t.stopImmediatePropagation()}});u.off("blur.datepicker").on("blur.datepicker",function(){if(!e){i.$apply(function(){u.datepicker("setDate",u.datepicker("getDate"));f()})}});l.$validators.uiDateValidator=function t(e,i){return i===null||i===""||o.default.isDate(n.stringToDate(s.uiDateFormat,i))};l.$parsers.push(function t(e){return n.stringToDate(s.uiDateFormat,e)});l.$render=function(){if(o.default.isDate(l.$modelValue)===false&&o.default.isString(l.$modelValue)){l.$modelValue=n.stringToDate(s.uiDateFormat,l.$modelValue)}u.datepicker("setDate",l.$modelValue)}}if(u.data("datepicker")){u.datepicker("option",r);u.datepicker("refresh")}else{u.datepicker(r);u.on("$destroy",function(){u.datepicker("hide");u.datepicker("destroy")})}if(l){l.$render();f(true)}};i.$watch(c,f,true)}}}]).directive("uiDateFormat",["uiDateConverter",function(t){return{require:"ngModel",link:function e(n,i,r,a){var o=r.uiDateFormat;a.$formatters.unshift(function(e){return t.stringToDate(o,e)});a.$parsers.push(function(e){return t.dateToString(o,e)})}}}])},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n}])})},function(t,e){t.exports='<div ng-switch=efsCtrl.selectedEditableTreeCtrl> <div ng-switch-when=null> <select class=form-control ng-model=efsCtrl.selectedEditableTreeCtrl ng-show="efsCtrl.editableTreeCtrls.length > 0" ng-options="treeCtrl.node.name | translate for treeCtrl in efsCtrl.editableTreeCtrls"> <option value="" translate>-- Choose a layer --</option> </select> <span ng-show="efsCtrl.editableTreeCtrls.length == 0" translate>No editable layer available!</span> </div> <div ng-switch-default> <div class=row> <div class=col-sm-12> <span translate>Currently editing: </span> <b>{{ efsCtrl.selectedEditableTreeCtrl.node.name | translate }}</b> <span class="fa fa-pencil"></span> <br> <button ng-click=efsCtrl.stopEditing() class="btn btn-link btn-xs pull-right"> <span class="fa fa-times"></span> {{\'Stop editing\' | translate}} </button> </div> </div> <gmf-editfeature gmf-editfeature-dirty=efsCtrl.dirty gmf-editfeature-editabletreectrl=::efsCtrl.selectedEditableTreeCtrl gmf-editfeature-map=::efsCtrl.map gmf-editfeature-state=efsCtrl.state gmf-editfeature-tolerance=::efsCtrl.tolerance gmf-editfeature-vector=::efsCtrl.vectorLayer gmf-editfeature-closeaftersave=::efsCtrl.closeAfterSave> </gmf-editfeature> </div> </div> '},function(t,e){t.exports='<div> <div ng-switch=efCtrl.feature> <a ng-switch-when=null ng-if=efCtrl.geomType href ngeo-btn ngeo-createfeature ngeo-createfeature-active=efCtrl.createActive ngeo-createfeature-features=::efCtrl.features ngeo-createfeature-geom-type=::efCtrl.geomType ngeo-createfeature-map=::efCtrl.map class="btn btn-default" ng-class="{active: efCtrl.createActive}" ng-model=efCtrl.createActive> <span ng-switch=::efCtrl.geomType> <span ng-switch-when=Point> <span class="gmf-icon gmf-icon-point"></span> {{\'Draw new point\' | translate}} </span> <span ng-switch-when=MultiPoint> <span class="gmf-icon gmf-icon-point"></span> {{\'Draw new point\' | translate}} </span> <span ng-switch-when=LineString> <span class="gmf-icon gmf-icon-line"></span> {{\'Draw new linestring\' | translate}} </span> <span ng-switch-when=MultiLineString> <span class="gmf-icon gmf-icon-line"></span> {{\'Draw new linestring\' | translate}} </span> <span ng-switch-when=Polygon> <span class="gmf-icon gmf-icon-polygon"></span> {{\'Draw new polygon\' | translate}} </span> <span ng-switch-when=MultiPolygon> <span class="gmf-icon gmf-icon-polygon"></span> {{\'Draw new polygon\' | translate}} </span> </span> </a> <div ng-switch-default> <form novalidate name=form class="form gmf-editfeature-attributes-container" ng-if=efCtrl.attributes> <div class=row> <div class=col-sm-12> <a class=close ng-click=efCtrl.cancel() ng-disabled=efCtrl.pending title="{{\'Cancel modifications\' | translate}}" href>&times;</a> </div> </div> <ngeo-attributes ngeo-attributes-attributes=::efCtrl.attributes ngeo-attributes-disabled=efCtrl.pending ngeo-attributes-feature=::efCtrl.feature> </ngeo-attributes> <input type=submit value="{{\'Save\' | translate}}" class="btn btn-sm btn-default gmf-editfeature-btn-save" ng-click="form.$valid && efCtrl.save()" ng-disabled="!efCtrl.dirty || efCtrl.pending" title="{{\'Save modifications\' | translate}}"> <a class="btn btn-sm btn-default gmf-editfeature-btn-cancel" ng-click=efCtrl.confirmCancel() ng-disabled=efCtrl.pending title="{{\'Cancel modifications\' | translate}}" href>{{\'Cancel\' | translate}}</a> <button class="btn btn-sm btn-link gmf-editfeature-btn-delete" ng-click=efCtrl.delete() ng-disabled=efCtrl.pending ng-show=efCtrl.featureId title="{{\'Delete this feature\' | translate}}"> <span class="fa fa-trash"></span> {{\'Delete\' | translate}} </button> </form> </div> </div> <ngeo-modal ng-model=efCtrl.unsavedModificationsModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{\'Unsaved modifications!\' | translate}} </h4> </div> <div class=modal-body> {{\'There are unsaved changes.\' | translate}} </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal ng-click=efCtrl.continueWithoutSaving()> {{\'Continue without saving\' | translate}} </button> <button type=button class="btn btn-primary" data-dismiss=modal> {{\'Cancel\' | translate}} </button> <button type=button class="btn btn-default" data-dismiss=modal ng-click=efCtrl.submit()> {{\'Save\' | translate}} </button> </div> </ngeo-modal> <ngeo-modal ng-model=efCtrl.showServerError> <div class=modal-header>{{\'Server error.\' | translate}}</div> <div class=modal-body>{{efCtrl.serverErrorType}}<br> {{efCtrl.serverErrorMessage || (\'Unexpected server error.\' | translate)}}</div> </ngeo-modal> </div> '},function(t,e){t.exports='<fieldset ng-disabled=attrCtrl.disabled> <div class=form-group ng-repeat="attribute in ::attrCtrl.attributes"> <div ng-if="attribute.type !== \'geometry\'"> <label ng-if="::attribute.type !== \'boolean\'" class=control-label>{{ ::attribute.name | translate }} <span class=text-muted>{{::attribute.required ? "*" : ""}}</span> </label> <div ng-switch=::attribute.type> <div ng-switch-when=boolean class=checkbox> <label> <input name={{::attribute.name}} ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); type=checkbox>  <span> {{ ::attribute.name | translate }} <span class=text-muted>{{::attribute.required ? "*" : ""}}</span></span> </label> </div> <select name={{::attribute.name}} ng-required=attribute.required ng-switch-when=select ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <option ng-repeat="attribute in ::attribute.choices" value="{{ ::attribute }}"> {{ ::attribute | translate }} </option> </select> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=date ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); ngeo-datetimepicker ngeo-datetimepicker-options="\'{&quot;timepicker&quot;: false, &quot;format&quot;: &quot;\' + attribute.format + \'&quot;, &quot;allowBlank&quot;: true, &quot;todayButton&quot;: false, &quot;mask&quot;: &quot;\' + attribute.mask + \'&quot;}\'" class=form-control type=text>  <input name={{::attribute.name}} id=time ng-required=attribute.required ng-switch-when=time ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); ngeo-datetimepicker ngeo-datetimepicker-options="\'{&quot;datepicker&quot;: false, &quot;format&quot;: &quot;\' + attribute.format + \'&quot;, &quot;todayButton&quot;: false, &quot;mask&quot;: &quot;\' + attribute.mask + \'&quot;, &quot;defaultTime&quot;: &quot;00:00&quot;}\'" class=form-control type=text>  <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=datetime ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); ngeo-datetimepicker ngeo-datetimepicker-options="\'{&quot;scrollTime&quot;: false, &quot;format&quot;: &quot;\' + attribute.format + \'&quot;, &quot;allowBlank&quot;: true, &quot;todayButton&quot;: false, &quot;mask&quot;: &quot;\' + attribute.mask + \'&quot;, &quot;defaultTime&quot;: &quot;00:00&quot;}\'" class=form-control type=text>  <div ng-switch-when=number ng-switch=::attribute.numType> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=integer ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control step=1 type=number>  <input name={{::attribute.name}} ng-required=attribute.required ng-switch-default ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=number>  </div> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-default ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); ng-maxlength=attribute.maxLength class=form-control type=text>  <div ng-show="attrCtrl.form.$submitted || attrCtrl.form[attribute.name].$touched"> <p class=text-danger ng-show=attrCtrl.form[attribute.name].$error.required> {{\'This field is required\' | translate}} </p> </div> </div> </div> </div> </fieldset> '},function(t,e,n){var i,r,a;
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
(function(o){if(true){!(r=[n(38)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){var e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice,r,a;if(t.event.fixHooks){for(var o=e.length;o;){t.event.fixHooks[e[--o]]=t.event.mouseHooks}}var s=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var e=n.length;e;){this.addEventListener(n[--e],l,false)}}else{this.onmousewheel=l}t.data(this,"mousewheel-line-height",s.getLineHeight(this));t.data(this,"mousewheel-page-height",s.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var e=n.length;e;){this.removeEventListener(n[--e],l,false)}}else{this.onmousewheel=null}t.removeData(this,"mousewheel-line-height");t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),i=n["offsetParent"in t.fn?"offsetParent":"parent"]();if(!i.length){i=t("body")}return parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:true,normalizeOffset:true}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}});function l(e){var n=e||window.event,o=i.call(arguments,1),l=0,f=0,h=0,d=0,p=0,v=0;e=t.event.fix(n);e.type="mousewheel";if("detail"in n){h=n.detail*-1}if("wheelDelta"in n){h=n.wheelDelta}if("wheelDeltaY"in n){h=n.wheelDeltaY}if("wheelDeltaX"in n){f=n.wheelDeltaX*-1}if("axis"in n&&n.axis===n.HORIZONTAL_AXIS){f=h*-1;h=0}l=h===0?f:h;if("deltaY"in n){h=n.deltaY*-1;l=h}if("deltaX"in n){f=n.deltaX;if(h===0){l=f*-1}}if(h===0&&f===0){return}if(n.deltaMode===1){var g=t.data(this,"mousewheel-line-height");l*=g;h*=g;f*=g}else if(n.deltaMode===2){var m=t.data(this,"mousewheel-page-height");l*=m;h*=m;f*=m}d=Math.max(Math.abs(h),Math.abs(f));if(!a||d<a){a=d;if(c(n,d)){a/=40}}if(c(n,d)){l/=40;f/=40;h/=40}l=Math[l>=1?"floor":"ceil"](l/a);f=Math[f>=1?"floor":"ceil"](f/a);h=Math[h>=1?"floor":"ceil"](h/a);if(s.settings.normalizeOffset&&this.getBoundingClientRect){var _=this.getBoundingClientRect();p=e.clientX-_.left;v=e.clientY-_.top}e.deltaX=f;e.deltaY=h;e.deltaFactor=a;e.offsetX=p;e.offsetY=v;e.deltaMode=0;o.unshift(e,l,f,h);if(r){clearTimeout(r)}r=setTimeout(u,200);return(t.event.dispatch||t.event.handle).apply(this,o)}function u(){a=null}function c(t,e){return s.settings.adjustOldDeltas&&t.type==="mousewheel"&&e%120===0}})},function(t,e){t.exports='<ngeo-drawfeature ngeo-btn-group class=btn-group ngeo-drawfeature-active=efCtrl.drawActive ngeo-drawfeature-map=efCtrl.map ngeo-drawfeature-showmeasure=efCtrl.showMeasure> <a data-toggle=tooltip title="{{\'Draw a point on the map\' | translate}}" href ngeo-btn ngeo-drawpoint class="btn btn-default ngeo-drawfeature-point" ng-class="{active: dfCtrl.drawPoint.active}" ng-model=dfCtrl.drawPoint.active> <span class="gmf-icon gmf-icon-point"></span> </a> <a data-toggle=tooltip title="{{\'Draw a line on the map\' | translate}}" href ngeo-btn ngeo-measurelength class="btn btn-default ngeo-drawfeature-linestring" ng-class="{active: dfCtrl.measureLength.active}" ng-model=dfCtrl.measureLength.active> <span class="gmf-icon gmf-icon-line"></span> </a> <a data-toggle=tooltip title="{{\'Draw a polygon on the map\' | translate}}" href ngeo-btn ngeo-measurearea class="btn btn-default ngeo-drawfeature-polygon" ng-class="{active: dfCtrl.measureArea.active}" ng-model=dfCtrl.measureArea.active> <span class="gmf-icon gmf-icon-polygon"></span> </a> <a data-toggle=tooltip title="{{\'Draw a circle on the map\' | translate}}" href ngeo-btn ngeo-measureazimut class="btn btn-default ngeo-drawfeature-circle" ng-class="{active: dfCtrl.measureAzimut.active}" ng-model=dfCtrl.measureAzimut.active> <span class="gmf-icon gmf-icon-circle"></span> </a> <a data-toggle=tooltip title="{{\'Draw a rectangle on the map\' | translate}}" href ngeo-btn ngeo-drawrectangle class="btn btn-default ngeo-drawfeature-rectangle" ng-class="{active: dfCtrl.drawRectangle.active}" ng-model=dfCtrl.drawRectangle.active> <span class="gmf-icon gmf-icon-rectangle"></span> </a> <a data-toggle=tooltip title="{{\'Draw a text label on the map\' | translate}}" href ngeo-btn ngeo-drawtext class="btn btn-default ngeo-drawfeature-text" ng-class="{active: dfCtrl.drawText.active}" ng-model=dfCtrl.drawText.active> <span class="gmf-icon gmf-icon-text"></span> </a> </ngeo-drawfeature> <div ng-switch=efCtrl.selectedFeature> <hr class=gmf-drawfeature-separator ng-show="efCtrl.getFeaturesArray().length > 0"> <div ng-switch-when=null> <div ng-show="efCtrl.getFeaturesArray().length > 0"> <div class=ngeo-drawfeature-actionbuttons> <button type=button data-toggle=dropdown aria-haspopup=true aria-expanded=false ngeo-exportfeatures ngeo-exportfeatures-features=efCtrl.features class="btn btn-link btn-sm"> <span class="fa fa-mail-forward"></span> {{\'Export\' | translate}} <span class=caret></span> </button> <button ng-click=efCtrl.clearFeatures() class="btn btn-link btn-xs"> <span class="fa fa-trash"></span> {{\'Delete All\' | translate}} </button> </div> <div class=gmf-eol></div> <div class="gmf-drawfeature-featurelist list-group list-group-sm"> <button role=button class=list-group-item ng-repeat="feature in efCtrl.getFeaturesArray()" ng-click=efCtrl.selectFeatureFromList(feature);> {{ feature.get(efCtrl.nameProperty) }} </button> </div> </div> </div> <div ng-switch-default> <button ng-click="efCtrl.selectedFeature = null;" class="btn btn-link btn-xs"> <span class="fa fa-arrow-left"></span> {{\'List\' | translate}} </button> <div class=ngeo-drawfeature-actionbuttons> <button type=button data-toggle=dropdown aria-haspopup=true aria-expanded=false ngeo-exportfeatures ngeo-exportfeatures-features=efCtrl.selectedFeatures class="btn btn-link btn-xs"> <span class="fa fa-mail-forward"></span> {{\'Export\' | translate}} <span class=caret></span> </button> <button ng-click=efCtrl.removeFeature(efCtrl.selectedFeature); class="btn btn-link btn-xs"> <span class="fa fa-trash"></span> {{\'Delete\' | translate}} </button> </div> <div class=gmf-eol></div> <gmf-featurestyle gmf-featurestyle-feature=efCtrl.selectedFeature> </gmf-featurestyle> </div> </div> '},function(t,e){t.exports='<div ng-if="fsCtrl.feature && fsCtrl.type"> <div class=form-group> <input ng-model=fsCtrl.getSetName ng-model-options="{getterSetter: true}" ng-attr-placeholder="{{\'Name\' | translate}}" class=form-control /> </div> <div ng-if="fsCtrl.type !== \'Text\'" class=form-group> <input id=gmf-featurestyle-showlabel type=checkbox ng-model=fsCtrl.getSetShowLabel ng-model-options="{getterSetter: true}"/> <label ng-switch=fsCtrl.type for=gmf-featurestyle-showlabel class=control-label> {{\'Display label\' | translate}} </label> </div> <div ng-if="fsCtrl.type !== \'Text\'" class=form-group> <input id=gmf-featurestyle-showmeasure type=checkbox ng-model=fsCtrl.getSetShowMeasure ng-model-options="{getterSetter: true}"/> <label ng-switch=fsCtrl.type for=gmf-featurestyle-showmeasure class=control-label> <span ng-switch-when=Circle> {{\'Display azimuth and radius\' | translate}} </span> <span ng-switch-when=Polygon> {{\'Display surface\' | translate}} </span> <span ng-switch-when=Rectangle> {{\'Display surface\' | translate}} </span> <span ng-switch-when=LineString> {{\'Display length\' | translate}} </span> <span ng-switch-when=Point> {{\'Display coordinates\' | translate}} </span> </label> <em class=text-muted> ({{ fsCtrl.measure }}) </em> </div> </div> <div ng-if="fsCtrl.feature && fsCtrl.type" class=form-horizontal> <div class=form-group> <div ngeo-colorpicker="" ngeo-colorpicker-color=fsCtrl.color class=col-md-12> </div> </div> <div ng-if="fsCtrl.type === \'Point\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Size\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=3 max=20 step=1 ng-model=fsCtrl.getSetSize ng-model-options="{getterSetter: true}"/> </div> </div> <div ng-if="fsCtrl.type === \'Text\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Size\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=8 max=30 step=1 ng-model=fsCtrl.getSetSize ng-model-options="{getterSetter: true}"/> </div> </div> <div ng-if="fsCtrl.type === \'Circle\' || fsCtrl.type === \'LineString\' || fsCtrl.type === \'Polygon\' || fsCtrl.type === \'Rectangle\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Stroke\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=0.5 max=5 step=0.5 ng-model=fsCtrl.getSetStroke ng-model-options="{getterSetter: true}"/> </div> </div> <div ng-if="fsCtrl.type === \'Circle\' || fsCtrl.type === \'Polygon\' || fsCtrl.type === \'Rectangle\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Opacity\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=0 max=1 step=0.05 ng-model=fsCtrl.getSetOpacity ng-model-options="{getterSetter: true}"/> </div> </div> <div ng-if="fsCtrl.type === \'Text\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Angle\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=-180 max=180 step=22.5 ng-model=fsCtrl.getSetAngle ng-model-options="{getterSetter: true}"/> </div> </div> </div> '},function(t,e){t.exports='<table class=ngeo-colorpicker-palette> <tr ng-repeat="colors in ::ctrl.colors"> <td ng-repeat="color in ::colors" ng-click=ctrl.setColor(color) ng-class="{\'ngeo-colorpicker-selected\': color == ctrl.color}"> <div ng-style="::{\'background-color\': color}"></div> </td> </tr> </table> '},function(t,e){t.exports='<h4 class="popover-title ngeo-popup-title"> <span ng-bind-html=title></span> <button type=button class=close ng-click="open = false"> &times;</button> </h4> <div class=popover-content ng-bind-html=content></div> '},function(t,e){
/**
 * @license AngularJS v1.7.0
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(t,e){"use strict";var n=e.$$minErr("$sanitize");var i;var r;var a;var o;var s;var l;var u;var c;var f;var h;function d(){var d=false;var p=false;this.$get=["$$sanitizeUri",function(t){d=true;if(p){r(E,S)}return function(e){var n=[];f(e,h(n,function(e,n){return!/^unsafe:/.test(t(e,n))}));return n.join("")}}];this.enableSvg=function(t){if(s(t)){p=t;return this}else{return p}};this.addValidElements=function(t){if(!d){if(o(t)){t={htmlElements:t}}A(S,t.svgElements);A(m,t.htmlVoidElements);A(E,t.htmlVoidElements);A(E,t.htmlElements)}return this};this.addValidAttrs=function(t){if(!d){r(I,N(t,true))}return this};i=e.bind;r=e.extend;a=e.forEach;o=e.isArray;s=e.isDefined;l=e.$$lowercase;u=e.noop;f=P;h=k;c=t.Node.prototype.contains||function(t){return!!(this.compareDocumentPosition(t)&16)};var v=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g=/([^#-~ |!])/g;var m=R("area,br,col,hr,img,wbr");var _=R("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),y=R("rp,rt"),b=r({},y,_);var w=r({},_,R("address,article,"+"aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,"+"h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul"));var x=r({},y,R("a,abbr,acronym,b,"+"bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,"+"samp,small,span,strike,strong,sub,sup,time,tt,u,var"));var S=R("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,"+"hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,"+"radialGradient,rect,stop,svg,switch,text,title,tspan");var C=R("script,style");var E=r({},m,w,x,b);var O=R("background,cite,href,longdesc,src,xlink:href,xml:base");var T=R("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,"+"color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,"+"ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,"+"scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,"+"valign,value,vspace,width");var M=R("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,"+"baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,"+"cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,"+"font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,"+"height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,"+"marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,"+"max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,"+"path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,"+"requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,"+"stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,"+"stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,"+"stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,"+"underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,"+"width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,"+"xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",true);var I=r({},O,M,T);function R(t,e){return N(t.split(","),e)}function N(t,e){var n={},i;for(i=0;i<t.length;i++){n[e?l(t[i]):t[i]]=true}return n}function A(t,e){if(e&&e.length){r(t,N(e))}}var L=function(t,e){var i;if(e&&e.implementation){i=e.implementation.createHTMLDocument("inert")}else{throw n("noinert","Can't create an inert html document")}var r=(i.documentElement||i.getDocumentElement()).querySelector("body");r.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>';if(!r.querySelector("svg")){return a}else{r.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">';if(r.querySelector("svg img")){return o}else{return s}}function a(e){e="<remove></remove>"+e;try{e=encodeURI(e)}catch(t){return undefined}var n=new t.XMLHttpRequest;n.responseType="document";n.open("GET","data:text/html;charset=utf-8,"+e,false);n.send(null);var i=n.response.body;i.firstChild.remove();return i}function o(e){e="<remove></remove>"+e;try{var n=(new t.DOMParser).parseFromString(e,"text/html").body;n.firstChild.remove();return n}catch(t){return undefined}}function s(t){r.innerHTML=t;if(e.documentMode){F(r)}return r}}(t,t.document);function P(t,e){if(t===null||t===undefined){t=""}else if(typeof t!=="string"){t=""+t}var i=L(t);if(!i)return"";var r=5;do{if(r===0){throw n("uinput","Failed to sanitize html because the input is unstable")}r--;t=i.innerHTML;i=L(t)}while(t!==i.innerHTML);var a=i.firstChild;while(a){switch(a.nodeType){case 1:e.start(a.nodeName.toLowerCase(),D(a.attributes));break;case 3:e.chars(a.textContent);break}var o;if(!(o=a.firstChild)){if(a.nodeType===1){e.end(a.nodeName.toLowerCase())}o=$("nextSibling",a);if(!o){while(o==null){a=$("parentNode",a);if(a===i)break;o=$("nextSibling",a);if(a.nodeType===1){e.end(a.nodeName.toLowerCase())}}}}a=o}while(a=i.firstChild){i.removeChild(a)}}function D(t){var e={};for(var n=0,i=t.length;n<i;n++){var r=t[n];e[r.name]=r.value}return e}function j(t){return t.replace(/&/g,"&amp;").replace(v,function(t){var e=t.charCodeAt(0);var n=t.charCodeAt(1);return"&#"+((e-55296)*1024+(n-56320)+65536)+";"}).replace(g,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function k(t,e){var n=false;var r=i(t,t.push);return{start:function(t,i){t=l(t);if(!n&&C[t]){n=t}if(!n&&E[t]===true){r("<");r(t);a(i,function(n,i){var a=l(i);var o=t==="img"&&a==="src"||a==="background";if(I[a]===true&&(O[a]!==true||e(n,o))){r(" ");r(i);r('="');r(j(n));r('"')}});r(">")}},end:function(t){t=l(t);if(!n&&E[t]===true&&m[t]!==true){r("</");r(t);r(">")}if(t==n){n=false}},chars:function(t){if(!n){r(j(t))}}}}function F(e){while(e){if(e.nodeType===t.Node.ELEMENT_NODE){var n=e.attributes;for(var i=0,r=n.length;i<r;i++){var a=n[i];var o=a.name.toLowerCase();if(o==="xmlns:ns1"||o.lastIndexOf("ns1:",0)===0){e.removeAttributeNode(a);i--;r--}}}var s=e.firstChild;if(s){F(s)}e=$("nextSibling",e)}}function $(t,e){var i=e[t];if(i&&c.call(e,i)){throw n("elclob","Failed to sanitize html because the element is clobbered: {0}",e.outerHTML||e.outerText)}return i}}function p(t){var e=[];var n=h(e,u);n.chars(t);return e.join("")}e.module("ngSanitize",[]).provider("$sanitize",d).info({angularVersion:"1.7.0"});e.module("ngSanitize").filter("linky",["$sanitize",function(t){var n=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i;var r=e.$$minErr("linky");var a=e.isDefined;var o=e.isFunction;var s=e.isObject;var l=e.isString;return function(e,u,c){if(e==null||e==="")return e;if(!l(e))throw r("notstring","Expected string but received: {0}",e);var f=o(c)?c:s(c)?function t(){return c}:function t(){return{}};var h;var d=e;var v=[];var g;var m;while(h=d.match(n)){g=h[0];if(!h[2]&&!h[4]){g=(h[3]?"http://":"mailto:")+g}m=h.index;_(d.substr(0,m));y(g,h[0].replace(i,""));d=d.substring(m+h[0].length)}_(d);return t(v.join(""));function _(t){if(!t){return}v.push(p(t))}function y(t,e){var n,i=f(t);v.push("<a ");for(n in i){v.push(n+'="'+i[n]+'" ')}if(a(u)&&!("target"in i)){v.push('target="',u,'" ')}v.push('href="',t.replace(/"/g,"&quot;"),'">');_(e);v.push("</a>")}}}])})(window,window.angular)},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);if(!e.children)e.children=[];Object.defineProperty(e,"loaded",{enumerable:true,get:function(){return e.l}});Object.defineProperty(e,"id",{enumerable:true,get:function(){return e.i}});Object.defineProperty(e,"exports",{enumerable:true});e.webpackPolyfill=1}return e}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){(function(e,n){true?t.exports=n():undefined})(this,function(){"use strict";function t(t,n,r,a,o){e(t,n,r||0,a||t.length-1,o||i)}function e(t,i,r,a,o){while(a>r){if(a-r>600){var s=a-r+1;var l=i-r+1;var u=Math.log(s);var c=.5*Math.exp(2*u/3);var f=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);var h=Math.max(r,Math.floor(i-l*c/s+f));var d=Math.min(a,Math.floor(i+(s-l)*c/s+f));e(t,i,h,d,o)}var p=t[i];var v=r;var g=a;n(t,r,i);if(o(t[a],p)>0)n(t,r,a);while(v<g){n(t,v,g);v++;g--;while(o(t[v],p)<0)v++;while(o(t[g],p)>0)g--}if(o(t[r],p)===0)n(t,r,g);else{g++;n(t,g,a)}if(g<=i)r=g+1;if(i<=g)a=g-1}}function n(t,e,n){var i=t[e];t[e]=t[n];t[n]=i}function i(t,e){return t<e?-1:t>e?1:0}return t})},function(t,e){t.exports='<ul class=gmf-backgroundlayerselector> <li ng-repeat="layer in ctrl.bgLayers" ng-click=ctrl.setLayer(layer) ng-class="{\'gmf-backgroundlayerselector-active\': ctrl.bgLayer == layer, \'gmf-backgroundlayerselector-disabled\': ctrl.opacityLayer == layer}"> <img class=gmf-thumb ng-src="{{::layer.get(\'metadata\')[\'thumbnail\']}}"/> <span class=gmf-text>{{layer.get("label") | translate}}</span> <span ng-class="{\'gmf-backgroundlayerselector-opacity-check\': ctrl.opacityLayer == layer}"></span> </li> <input ng-if=ctrl.opacityLayer class="input-action gmf-backgroundlayerselector-opacity-slider" name=bg-layer-opacity type=range min=0 max=1 step=0.01 ng-model=ctrl.getSetBgLayerOpacity ng-model-options="{getterSetter: true}"> </ul> '},function(t,e){t.exports='<div ng-if=$ctrl.gmfUser.username> <div class=form-group> <span>{{\'Logged in as\' | translate}}</span> <strong>{{ ::$ctrl.gmfUser.username }}</strong>. </div> <form name=logoutForm role=form ng-submit=$ctrl.logout() ng-controller=GmfAuthenticationController ng-class="{\'has-error\': $ctrl.error}" ng-if=!$ctrl.changingPassword> <div class=form-group> <input type=submit class="form-control btn btn-primary" value="{{\'Logout\' | translate}}"/> </div> <div class=form-group> <input ng-show=$ctrl.allowPasswordChange type=button class="form-control btn btn-default" value="{{\'Change password\' | translate}}" ng-click="$ctrl.changingPassword = true"/> </div> </form> <form name=changePasswordForm role=form ng-submit=$ctrl.changePassword() ng-controller=GmfAuthenticationController ng-class="{\'has-error\': $ctrl.error}" ng-if=$ctrl.changingPassword> <div class=form-group> <input type=password class=form-control name=oldpassword ng-model=$ctrl.oldPwdVal ng-attr-placeholder="{{\'Old password\' | translate}}"/> </div> <div class=form-group> <input type=password class=form-control name=newpassword ng-model=$ctrl.newPwdVal ng-attr-placeholder="{{\'New password\' | translate}}"/> </div> <div class=form-group> <input type=password class=form-control name=newpasswordconfirm ng-model=$ctrl.newPwdConfVal ng-attr-placeholder="{{\'Confirm new password\' | translate}}"/> </div> <div class=form-group> <input type=submit class="form-control btn btn-primary" value="{{\'Change password\' | translate}}"/> </div> <div class=form-group> <input type=button class="form-control btn btn-default" value="{{\'Cancel\' | translate}}" ng-if=!$ctrl.userMustChangeItsPassword ng-click=$ctrl.changePasswordReset() /> <input type=button class="form-control btn btn-default" value="{{\'Logout\' | translate}}" ng-if=$ctrl.userMustChangeItsPassword ng-click=$ctrl.logout() /> </div> </form> <div ng-show=$ctrl.error class="gmf-authentication-error help-block"></div> </div> <div ng-if=!$ctrl.gmfUser.username> <div class="alert alert-warning" ng-show=$ctrl.infoMessage> <span>{{ $ctrl.infoMessage }}</span> </div> <form name=loginForm role=form ng-submit=$ctrl.login() ng-controller=GmfAuthenticationController ng-class="{\'has-error\': $ctrl.error}"> <div class=form-group> <input type=text class=form-control name=login ng-model=$ctrl.loginVal ng-attr-placeholder="{{\'Username\' | translate}}"/> </div> <div class=form-group> <input type=password class=form-control name=password ng-model=$ctrl.pwdVal ng-attr-placeholder="{{\'Password\' | translate}}"/> </div> <div class=form-group> <input type=submit class="form-control btn btn-primary" value="{{\'Connect\' | translate}}"/> </div> <div ng-show=$ctrl.allowPasswordReset class=form-group> <a ng-click=$ctrl.resetPassword() href="">{{\'Password forgotten?\' | translate}}</a> </div> </form> <div ng-show=$ctrl.error class="gmf-authentication-error help-block"></div> <ngeo-modal ng-model=$ctrl.resetPasswordModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{\'Password forgotten?\' | translate}} </h4> </div> <div class=modal-body translate> A new password has just been sent to you by e-mail. </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal>{{\'OK\' | translate}}</button> </div> </ngeo-modal> </div> '},function(t,e,n){(function(t){+function(t){"use strict";var e=function(e,n){this.options=n;this.$body=t(document.body);this.$element=t(e);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};e.VERSION="3.3.7";e.TRANSITION_DURATION=300;e.BACKDROP_TRANSITION_DURATION=150;e.DEFAULTS={backdrop:true,keyboard:true,show:true};e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)};e.prototype.show=function(n){var i=this;var r=t.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(r);if(this.isShown||r.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){if(t(e.target).is(i.$element))i.ignoreBackdropClick=true})});this.backdrop(function(){var r=t.support.transition&&i.$element.hasClass("fade");if(!i.$element.parent().length){i.$element.appendTo(i.$body)}i.$element.show().scrollTop(0);i.adjustDialog();if(r){i.$element[0].offsetWidth}i.$element.addClass("in");i.enforceFocus();var a=t.Event("shown.bs.modal",{relatedTarget:n});r?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(e.TRANSITION_DURATION):i.$element.trigger("focus").trigger(a)})};e.prototype.hide=function(n){if(n)n.preventDefault();n=t.Event("hide.bs.modal");this.$element.trigger(n);if(!this.isShown||n.isDefaultPrevented())return;this.isShown=false;this.escape();this.resize();t(document).off("focusin.bs.modal");this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal()};e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){if(document!==t.target&&this.$element[0]!==t.target&&!this.$element.has(t.target).length){this.$element.trigger("focus")}},this))};e.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){t.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}};e.prototype.resize=function(){if(this.isShown){t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this))}else{t(window).off("resize.bs.modal")}};e.prototype.hideModal=function(){var t=this;this.$element.hide();this.backdrop(function(){t.$body.removeClass("modal-open");t.resetAdjustments();t.resetScrollbar();t.$element.trigger("hidden.bs.modal")})};e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};e.prototype.backdrop=function(n){var i=this;var r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=t.support.transition&&r;this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false;return}if(t.target!==t.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this));if(a)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!n)return;a?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){i.removeBackdrop();n&&n()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):o()}else if(n){n()}};e.prototype.handleUpdate=function(){this.adjustDialog()};e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})};e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t;this.scrollbarWidth=this.measureScrollbar()};e.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";if(this.bodyIsOverflowing)this.$body.css("padding-right",t+this.scrollbarWidth)};e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure";this.$body.append(t);var e=t.offsetWidth-t.clientWidth;this.$body[0].removeChild(t);return e};function n(n,i){return this.each(function(){var r=t(this);var a=r.data("bs.modal");var o=t.extend({},e.DEFAULTS,r.data(),typeof n=="object"&&n);if(!a)r.data("bs.modal",a=new e(this,o));if(typeof n=="string")a[n](i);else if(o.show)a.show(i)})}var i=t.fn.modal;t.fn.modal=n;t.fn.modal.Constructor=e;t.fn.modal.noConflict=function(){t.fn.modal=i;return this};t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this);var r=i.attr("href");var a=t(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,""));var o=a.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},a.data(),i.data());if(i.is("a"))e.preventDefault();a.one("show.bs.modal",function(t){if(t.isDefaultPrevented())return;a.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})});n.call(a,o,this)})}(t)}).call(this,n(38))},function(t,e,n){var i,r,a;(function(o){if(true){!(r=[n(38),n(118)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){return t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(n){e=t.body}if(!e){e=t.body}if(!e.nodeName){e=t.body}return e}})},function(t,e,n){var i,r,a;(function(o){if(true){!(r=[n(38),n(118)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){return t.ui.safeBlur=function(e){if(e&&e.nodeName.toLowerCase()!=="body"){t(e).trigger("blur")}}})},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(r=[n(38),n(293),n(382),n(381),n(530),n(531),n(380),n(118),n(236)],i=o,a=typeof i==="function"?i.apply(e,r):i,a!==undefined&&(t.exports=a))}else{}})(function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative()}if(this.options.addClasses){this._addClass("ui-draggable")}this._setHandleClassName();this._mouseInit()},_setOption:function(t,e){this._super(t,e);if(t==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;if(this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(e);if(!this.handle){return false}this._blurActiveElement(e);this._blockFrames(n.iframeFix===true?"iframe":n.iframeFix);return true},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function(e){var n=t.ui.safeActiveElement(this.document[0]),i=t(e.target);if(i.closest(n).length){return}t.ui.safeBlur(n)},_mouseStart:function(e){var n=this.options;this.helper=this._createHelper(e);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();if(t.ui.ddmanager){t.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return t(this).css("position")==="fixed"}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(e);this.originalPosition=this.position=this._generatePosition(e,false);this.originalPageX=e.pageX;this.originalPageY=e.pageY;n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt);this._setContainment();if(this._trigger("start",e)===false){this._clear();return false}this._cacheHelperProportions();if(t.ui.ddmanager&&!n.dropBehaviour){t.ui.ddmanager.prepareOffsets(this,e)}this._mouseDrag(e,true);if(t.ui.ddmanager){t.ui.ddmanager.dragStart(this,e)}return true},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,n){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(e,true);this.positionAbs=this._convertPositionTo("absolute");if(!n){var i=this._uiHash();if(this._trigger("drag",e,i)===false){this._mouseUp(new t.Event("mouseup",e));return false}this.position=i.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(t.ui.ddmanager){t.ui.ddmanager.drag(this,e)}return false},_mouseStop:function(e){var n=this,i=false;if(t.ui.ddmanager&&!this.options.dropBehaviour){i=t.ui.ddmanager.drop(this,e)}if(this.dropped){i=this.dropped;this.dropped=false}if(this.options.revert==="invalid"&&!i||this.options.revert==="valid"&&i||this.options.revert===true||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(n._trigger("stop",e)!==false){n._clear()}})}else{if(this._trigger("stop",e)!==false){this._clear()}}return false},_mouseUp:function(e){this._unblockFrames();if(t.ui.ddmanager){t.ui.ddmanager.dragStop(this,e)}if(this.handleElement.is(e.target)){this.element.trigger("focus")}return t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp(new t.Event("mouseup",{target:this.element[0]}))}else{this._clear()}return this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper),r=i?t(n.helper.apply(this.element[0],[e])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;if(!r.parents("body").length){r.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo)}if(i&&r[0]===this.element[0]){this._setPositionRelative()}if(r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))){r.css("position","absolute")}return r},_setPositionRelative:function(){if(!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}},_adjustOffsetFromHelper:function(e){if(typeof e==="string"){e=e.split(" ")}if(t.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left"in e){this.offset.click.left=e.left+this.margins.left}if("right"in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top"in e){this.offset.click.top=e.top+this.margins.top}if("bottom"in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),n=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==n&&t.contains(this.scrollParent[0],this.offsetParent[0])){e.left+=this.scrollParent.scrollLeft();e.top+=this.scrollParent.scrollTop()}if(this._isRootNode(this.offsetParent[0])){e={top:0,left:0}}return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0}}var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(!e?this.scrollParent.scrollTop():0),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(!e?this.scrollParent.scrollLeft():0)}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options,a=this.document[0];this.relativeContainer=null;if(!r.containment){this.containment=null;return}if(r.containment==="window"){this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(r.containment==="document"){this.containment=[0,0,t(a).width()-this.helperProportions.width-this.margins.left,(t(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(r.containment.constructor===Array){this.containment=r.containment;return}if(r.containment==="parent"){r.containment=this.helper[0].parentNode}n=t(r.containment);i=n[0];if(!i){return}e=/(scroll|auto)/.test(n.css("overflow"));this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=n},_convertPositionTo:function(t,e){if(!e){e=this.position}var n=t==="absolute"?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-(this.cssPosition==="fixed"?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-(this.cssPosition==="fixed"?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,r,a,o=this.options,s=this._isRootNode(this.scrollParent[0]),l=t.pageX,u=t.pageY;if(!s||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(e){if(this.containment){if(this.relativeContainer){i=this.relativeContainer.offset();n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else{n=this.containment}if(t.pageX-this.offset.click.left<n[0]){l=n[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<n[1]){u=n[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>n[2]){l=n[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>n[3]){u=n[3]+this.offset.click.top}}if(o.grid){r=o.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;u=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-o.grid[1]:r+o.grid[1]:r;a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;l=n?a-this.offset.click.left>=n[0]||a-this.offset.click.left>n[2]?a:a-this.offset.click.left>=n[0]?a-o.grid[0]:a+o.grid[0]:a}if(o.axis==="y"){l=this.originalPageX}if(o.axis==="x"){u=this.originalPageY}}return{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy()}},_trigger:function(e,n,i){i=i||this._uiHash();t.ui.plugin.call(this,e,[n,i,this],true);if(/^(drag|start|stop)/.test(e)){this.positionAbs=this._convertPositionTo("absolute");i.offset=this.positionAbs}return t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n,i){var r=t.extend({},n,{item:i.element});i.sortables=[];t(i.options.connectToSortable).each(function(){var n=t(this).sortable("instance");if(n&&!n.options.disabled){i.sortables.push(n);n.refreshPositions();n._trigger("activate",e,r)}})},stop:function(e,n,i){var r=t.extend({},n,{item:i.element});i.cancelHelperRemoval=false;t.each(i.sortables,function(){var t=this;if(t.isOver){t.isOver=0;i.cancelHelperRemoval=true;t.cancelHelperRemoval=false;t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")};t._mouseStop(e);t.options.helper=t.options._helper}else{t.cancelHelperRemoval=true;t._trigger("deactivate",e,r)}})},drag:function(e,n,i){t.each(i.sortables,function(){var r=false,a=this;a.positionAbs=i.positionAbs;a.helperProportions=i.helperProportions;a.offset.click=i.offset.click;if(a._intersectsWith(a.containerCache)){r=true;t.each(i.sortables,function(){this.positionAbs=i.positionAbs;this.helperProportions=i.helperProportions;this.offset.click=i.offset.click;if(this!==a&&this._intersectsWith(this.containerCache)&&t.contains(a.element[0],this.element[0])){r=false}return r})}if(r){if(!a.isOver){a.isOver=1;i._parent=n.helper.parent();a.currentItem=n.helper.appendTo(a.element).data("ui-sortable-item",true);a.options._helper=a.options.helper;a.options.helper=function(){return n.helper[0]};e.target=a.currentItem[0];a._mouseCapture(e,true);a._mouseStart(e,true,true);a.offset.click.top=i.offset.click.top;a.offset.click.left=i.offset.click.left;a.offset.parent.left-=i.offset.parent.left-a.offset.parent.left;a.offset.parent.top-=i.offset.parent.top-a.offset.parent.top;i._trigger("toSortable",e);i.dropped=a.element;t.each(i.sortables,function(){this.refreshPositions()});i.currentItem=i.element;a.fromOutside=i}if(a.currentItem){a._mouseDrag(e);n.position=a.position}}else{if(a.isOver){a.isOver=0;a.cancelHelperRemoval=true;a.options._revert=a.options.revert;a.options.revert=false;a._trigger("out",e,a._uiHash(a));a._mouseStop(e,true);a.options.revert=a.options._revert;a.options.helper=a.options._helper;if(a.placeholder){a.placeholder.remove()}n.helper.appendTo(i._parent);i._refreshOffsets(e);n.position=i._generatePosition(e,true);i._trigger("fromSortable",e);i.dropped=false;t.each(i.sortables,function(){this.refreshPositions()})}}})}});t.ui.plugin.add("draggable","cursor",{start:function(e,n,i){var r=t("body"),a=i.options;if(r.css("cursor")){a._cursor=r.css("cursor")}r.css("cursor",a.cursor)},stop:function(e,n,i){var r=i.options;if(r._cursor){t("body").css("cursor",r._cursor)}}});t.ui.plugin.add("draggable","opacity",{start:function(e,n,i){var r=t(n.helper),a=i.options;if(r.css("opacity")){a._opacity=r.css("opacity")}r.css("opacity",a.opacity)},stop:function(e,n,i){var r=i.options;if(r._opacity){t(n.helper).css("opacity",r._opacity)}}});t.ui.plugin.add("draggable","scroll",{start:function(t,e,n){if(!n.scrollParentNotHidden){n.scrollParentNotHidden=n.helper.scrollParent(false)}if(n.scrollParentNotHidden[0]!==n.document[0]&&n.scrollParentNotHidden[0].tagName!=="HTML"){n.overflowOffset=n.scrollParentNotHidden.offset()}},drag:function(e,n,i){var r=i.options,a=false,o=i.scrollParentNotHidden[0],s=i.document[0];if(o!==s&&o.tagName!=="HTML"){if(!r.axis||r.axis!=="x"){if(i.overflowOffset.top+o.offsetHeight-e.pageY<r.scrollSensitivity){o.scrollTop=a=o.scrollTop+r.scrollSpeed}else if(e.pageY-i.overflowOffset.top<r.scrollSensitivity){o.scrollTop=a=o.scrollTop-r.scrollSpeed}}if(!r.axis||r.axis!=="y"){if(i.overflowOffset.left+o.offsetWidth-e.pageX<r.scrollSensitivity){o.scrollLeft=a=o.scrollLeft+r.scrollSpeed}else if(e.pageX-i.overflowOffset.left<r.scrollSensitivity){o.scrollLeft=a=o.scrollLeft-r.scrollSpeed}}}else{if(!r.axis||r.axis!=="x"){if(e.pageY-t(s).scrollTop()<r.scrollSensitivity){a=t(s).scrollTop(t(s).scrollTop()-r.scrollSpeed)}else if(t(window).height()-(e.pageY-t(s).scrollTop())<r.scrollSensitivity){a=t(s).scrollTop(t(s).scrollTop()+r.scrollSpeed)}}if(!r.axis||r.axis!=="y"){if(e.pageX-t(s).scrollLeft()<r.scrollSensitivity){a=t(s).scrollLeft(t(s).scrollLeft()-r.scrollSpeed)}else if(t(window).width()-(e.pageX-t(s).scrollLeft())<r.scrollSensitivity){a=t(s).scrollLeft(t(s).scrollLeft()+r.scrollSpeed)}}}if(a!==false&&t.ui.ddmanager&&!r.dropBehaviour){t.ui.ddmanager.prepareOffsets(i,e)}}});t.ui.plugin.add("draggable","snap",{start:function(e,n,i){var r=i.options;i.snapElements=[];t(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var e=t(this),n=e.offset();if(this!==i.element[0]){i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})}})},drag:function(e,n,i){var r,a,o,s,l,u,c,f,h,d,p=i.options,v=p.snapTolerance,g=n.offset.left,m=g+i.helperProportions.width,_=n.offset.top,y=_+i.helperProportions.height;for(h=i.snapElements.length-1;h>=0;h--){l=i.snapElements[h].left-i.margins.left;u=l+i.snapElements[h].width;c=i.snapElements[h].top-i.margins.top;f=c+i.snapElements[h].height;if(m<l-v||g>u+v||y<c-v||_>f+v||!t.contains(i.snapElements[h].item.ownerDocument,i.snapElements[h].item)){if(i.snapElements[h].snapping){i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[h].item}))}i.snapElements[h].snapping=false;continue}if(p.snapMode!=="inner"){r=Math.abs(c-y)<=v;a=Math.abs(f-_)<=v;o=Math.abs(l-m)<=v;s=Math.abs(u-g)<=v;if(r){n.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top}if(a){n.position.top=i._convertPositionTo("relative",{top:f,left:0}).top}if(o){n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left}if(s){n.position.left=i._convertPositionTo("relative",{top:0,left:u}).left}}d=r||a||o||s;if(p.snapMode!=="outer"){r=Math.abs(c-_)<=v;a=Math.abs(f-y)<=v;o=Math.abs(l-g)<=v;s=Math.abs(u-m)<=v;if(r){n.position.top=i._convertPositionTo("relative",{top:c,left:0}).top}if(a){n.position.top=i._convertPositionTo("relative",{top:f-i.helperProportions.height,left:0}).top}if(o){n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left}if(s){n.position.left=i._convertPositionTo("relative",{top:0,left:u-i.helperProportions.width}).left}}if(!i.snapElements[h].snapping&&(r||a||o||s||d)){i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[h].item}))}i.snapElements[h].snapping=r||a||o||s||d}}});t.ui.plugin.add("draggable","stack",{start:function(e,n,i){var r,a=i.options,o=t.makeArray(t(a.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});if(!o.length){return}r=parseInt(t(o[0]).css("zIndex"),10)||0;t(o).each(function(e){t(this).css("zIndex",r+e)});this.css("zIndex",r+o.length)}});t.ui.plugin.add("draggable","zIndex",{start:function(e,n,i){var r=t(n.helper),a=i.options;if(r.css("zIndex")){a._zIndex=r.css("zIndex")}r.css("zIndex",a.zIndex)},stop:function(e,n,i){var r=i.options;if(r._zIndex){t(n.helper).css("zIndex",r._zIndex)}}});return t.ui.draggable})},function(t,e){angular.module("gettext",[]);angular.module("gettext").constant("gettext",function(t){return t});angular.module("gettext").factory("gettextCatalog",["gettextPlurals","gettextFallbackLanguage","$http","$cacheFactory","$interpolate","$rootScope",function(t,e,n,i,r,a){var o;var s="$$noContext";var l='<span id="test" title="test" class="tested">test</span>';var u=angular.element("<span>"+l+"</span>").html()!==l;var c=function(t){if(o.debug&&o.currentLanguage!==o.baseLanguage){return o.debugPrefix+t}else{return t}};var f=function(t){if(o.showTranslatedMarkers){return o.translatedMarkerPrefix+t+o.translatedMarkerSuffix}else{return t}};function h(){a.$broadcast("gettextLanguageChanged")}o={debug:false,debugPrefix:"[MISSING]: ",showTranslatedMarkers:false,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:i("strings"),setCurrentLanguage:function(t){this.currentLanguage=t;h()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(e,n){if(!this.strings[e]){this.strings[e]={}}var i=t(e,1);for(var r in n){var a=n[r];if(u){r=angular.element("<span>"+r+"</span>").html()}if(angular.isString(a)||angular.isArray(a)){var o={};o[s]=a;a=o}if(!this.strings[e][r]){this.strings[e][r]={}}for(var l in a){var c=a[l];if(!angular.isArray(c)){this.strings[e][r][l]=[];this.strings[e][r][l][i]=c}else{this.strings[e][r][l]=c}}}h()},getStringFormFor:function(e,n,i,r){if(!e){return null}var a=this.strings[e]||{};var o=a[n]||{};var l=o[r||s]||[];return l[t(e,i)]},getString:function(t,n,i){var a=e(this.currentLanguage);t=this.getStringFormFor(this.currentLanguage,t,1,i)||this.getStringFormFor(a,t,1,i)||c(t);t=n?r(t)(n):t;return f(t)},getPlural:function(t,n,i,a,o){var s=e(this.currentLanguage);n=this.getStringFormFor(this.currentLanguage,n,t,o)||this.getStringFormFor(s,n,t,o)||c(t===1?n:i);if(a){a.$count=t;n=r(n)(a)}return f(n)},loadRemote:function(t){return n({method:"GET",url:t,cache:o.cache}).then(function(t){var e=t.data;for(var n in e){o.setStrings(n,e[n])}return t})}};return o}]);angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window","gettextUtil",function(t,e,n,i,r,a){var o=angular.$$lowercase||angular.lowercase;var s=parseInt((/msie (\d+)/.exec(o(r.navigator.userAgent))||[])[1],10);var l="translateParams";function u(t){return a.lcFirst(t.replace(l,""))}function c(t,e,n){var i=Object.keys(e).filter(function(t){return a.startsWith(t,l)&&t!==l});if(!i.length){return null}var r=angular.extend({},t);var o=[];i.forEach(function(i){var a=t.$watch(e[i],function(t){var e=u(i);r[e]=t;n(r)});o.push(a)});t.$on("$destroy",function(){o.forEach(function(t){t()})});return r}return{restrict:"AE",terminal:true,compile:function r(o,l){a.assert(!l.translatePlural||l.translateN,"translate-n","translate-plural");a.assert(!l.translateN||l.translatePlural,"translate-plural","translate-n");var u=a.trim(o.html());var f=l.translatePlural;var h=l.translateContext;if(s<=8){if(u.slice(-13)==="\x3c!--IE fix--\x3e"){u=u.slice(0,-13)}}return{post:function(r,o,s){var l=e(s.translateN);var d=null;var p=true;function v(e){e=e||null;var s;if(f){r=d||(d=r.$new());r.$count=l(r);s=t.getPlural(r.$count,u,f,e,h)}else{s=t.getString(u,e,h)}var c=o.contents();if(!c&&!s){return}if(s===a.trim(c.html())){if(p){i(c)(r)}return}var v=angular.element("<span>"+s+"</span>");i(v.contents())(r);var g=v.contents();n.enter(g,o);n.leave(c)}var g=c(r,s,v);v(g);p=false;if(s.translateN){r.$watch(s.translateN,function(){v(g)})}r.$on("gettextLanguageChanged",function(){v(g)})}}}}}]);angular.module("gettext").factory("gettextFallbackLanguage",function(){var t={};var e=/([^_]+)_[^_]+$/;return function(n){if(t[n]){return t[n]}var i=e.exec(n);if(i){t[n]=i[1];return i[1]}return null}});angular.module("gettext").filter("translate",["gettextCatalog",function(t){function e(e,n){return t.getString(e,null,n)}e.$stateful=true;return e}]);angular.module("gettext").factory("gettextPlurals",function(){var t={pt_BR:"pt_BR","pt-BR":"pt_BR"};return function(t,n){switch(e(t)){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return n%10!=1||n%100==11?1:0;case"jv":return n!=0?1:0;case"mk":return n==1||n%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return n>1?1:0;case"lv":return n%10==1&&n%100!=11?0:n!=0?1:2;case"lt":return n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2;case"mnk":return n==0?0:n==1?1:2;case"ro":return n==1?0:n==0||n%100>0&&n%100<20?1:2;case"pl":return n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2;case"cs":case"sk":return n==1?0:n>=2&&n<=4?1:2;case"sl":return n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0;case"mt":return n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3;case"gd":return n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3;case"cy":return n==1?0:n==2?1:n!=8&&n!=11?2:3;case"kw":return n==1?0:n==2?1:n==3?2:3;case"ga":return n==1?0:n==2?1:n<7?2:n<11?3:4;case"ar":return n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5;default:return n!=1?1:0}};function e(e){if(!t[e]){t[e]=e.split(/\-|_/).shift()}return t[e]}});angular.module("gettext").factory("gettextUtil",function t(){var e=function(){if(!String.prototype.trim){return function(t){return typeof t==="string"?t.replace(/^\s*/,"").replace(/\s*$/,""):t}}return function(t){return typeof t==="string"?t.trim():t}}();function n(t,e,n){if(!t){throw new Error("You should add a "+e+" attribute whenever you add a "+n+" attribute.")}}function i(t,e){return t.indexOf(e)===0}function r(t){var e=t.charAt(0).toLowerCase();return e+t.substr(1)}return{trim:e,assert:n,startsWith:i,lcFirst:r}})},function(t,e,n){n(533);t.exports="gettext"},function(t,e,n){(function(t){
/**
 * @license AngularJS v1.7.0
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(e){"use strict";var n={objectMaxDepth:5};function i(t){if(U(t)){if(G(t.objectMaxDepth)){n.objectMaxDepth=r(t.objectMaxDepth)?t.objectMaxDepth:NaN}}else{return n}}function r(t){return H(t)&&t>0}function a(t,e){e=e||Error;var i="https://errors.angularjs.org/1.7.0/";var r=i.replace(".","\\.")+"[\\s\\S]*";var a=new RegExp(r,"g");return function(){var r=arguments[0],o=arguments[1],s="["+(t?t+":":"")+r+"] ",l=yt(arguments,2).map(function(t){return le(t,n.objectMaxDepth)}),u,c;s+=o.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1);if(e<l.length){return l[e].replace(a,"")}return t});s+="\n"+i+(t?t+"/":"")+r;for(c=0,u="?";c<l.length;c++,u="&"){s+=u+"p"+c+"="+encodeURIComponent(l[c])}return new e(s)}}var o=/^\/(.+)\/([a-z]*)$/;var s="validity";var l=Object.prototype.hasOwnProperty;var u=function(t){return V(t)?t.toLowerCase():t};var c=function(t){return V(t)?t.toUpperCase():t};var f,h,d,p=[].slice,v=[].splice,g=[].push,m=Object.prototype.toString,_=Object.getPrototypeOf,y=a("ng"),b=e.angular||(e.angular={}),w,x=0;f=e.document.documentMode;function S(t){if(t==null||K(t))return false;if(B(t)||V(t)||h&&t instanceof h)return true;var e="length"in Object(t)&&t.length;return H(e)&&(e>=0&&e-1 in t||typeof t.item==="function")}function C(t,e,n){var i,r;if(t){if(q(t)){for(i in t){if(i!=="prototype"&&i!=="length"&&i!=="name"&&t.hasOwnProperty(i)){e.call(n,t[i],i,t)}}}else if(B(t)||S(t)){var a=typeof t!=="object";for(i=0,r=t.length;i<r;i++){if(a||i in t){e.call(n,t[i],i,t)}}}else if(t.forEach&&t.forEach!==C){t.forEach(e,n,t)}else if(Y(t)){for(i in t){e.call(n,t[i],i,t)}}else if(typeof t.hasOwnProperty==="function"){for(i in t){if(t.hasOwnProperty(i)){e.call(n,t[i],i,t)}}}else{for(i in t){if(l.call(t,i)){e.call(n,t[i],i,t)}}}}return t}function E(t,e,n){var i=Object.keys(t).sort();for(var r=0;r<i.length;r++){e.call(n,t[i[r]],i[r])}return i}function O(t){return function(e,n){t(n,e)}}function T(){return++x}function M(t,e){if(e){t.$$hashKey=e}else{delete t.$$hashKey}}function I(t,e,n){var i=t.$$hashKey;for(var r=0,a=e.length;r<a;++r){var o=e[r];if(!U(o)&&!q(o))continue;var s=Object.keys(o);for(var l=0,u=s.length;l<u;l++){var c=s[l];var f=o[c];if(n&&U(f)){if(z(f)){t[c]=new Date(f.valueOf())}else if(X(f)){t[c]=new RegExp(f)}else if(f.nodeName){t[c]=f.cloneNode(true)}else if(lt(f)){t[c]=f.clone()}else{if(!U(t[c]))t[c]=B(f)?[]:{};I(t[c],[f],true)}}else{t[c]=f}}}M(t,i);return t}function R(t){return I(t,p.call(arguments,1),false)}function N(t){return I(t,p.call(arguments,1),true)}function A(t){return parseInt(t,10)}var L=Number.isNaN||function t(e){return e!==e};function P(t,e){return R(Object.create(t),e)}function D(){}D.$inject=[];function j(t){return t}j.$inject=[];function k(t){return function e(){return t}}function F(t){return q(t.toString)&&t.toString!==m}function $(t){return typeof t==="undefined"}function G(t){return typeof t!=="undefined"}function U(t){return t!==null&&typeof t==="object"}function Y(t){return t!==null&&typeof t==="object"&&!_(t)}function V(t){return typeof t==="string"}function H(t){return typeof t==="number"}function z(t){return m.call(t)==="[object Date]"}function B(t){return Array.isArray(t)||t instanceof Array}function W(t){var e=m.call(t);switch(e){case"[object Error]":return true;case"[object Exception]":return true;case"[object DOMException]":return true;default:return t instanceof Error}}function q(t){return typeof t==="function"}function X(t){return m.call(t)==="[object RegExp]"}function K(t){return t&&t.window===t}function Z(t){return t&&t.$evalAsync&&t.$watch}function Q(t){return m.call(t)==="[object File]"}function J(t){return m.call(t)==="[object FormData]"}function tt(t){return m.call(t)==="[object Blob]"}function et(t){return typeof t==="boolean"}function nt(t){return t&&q(t.then)}var it=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;function rt(t){return t&&H(t.length)&&it.test(m.call(t))}function at(t){return m.call(t)==="[object ArrayBuffer]"}var ot=function(t){return V(t)?t.trim():t};var st=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function lt(t){return!!(t&&(t.nodeName||t.prop&&t.attr&&t.find))}function ut(t){var e={},n=t.split(","),i;for(i=0;i<n.length;i++){e[n[i]]=true}return e}function ct(t){return u(t.nodeName||t[0]&&t[0].nodeName)}function ft(t,e){return Array.prototype.indexOf.call(t,e)!==-1}function ht(t,e){var n=t.indexOf(e);if(n>=0){t.splice(n,1)}return n}function dt(t,e,n){var i=[];var a=[];n=r(n)?n:NaN;if(e){if(rt(e)||at(e)){throw y("cpta","Can't copy! TypedArray destination cannot be mutated.")}if(t===e){throw y("cpi","Can't copy! Source and destination are identical.")}if(B(e)){e.length=0}else{C(e,function(t,n){if(n!=="$$hashKey"){delete e[n]}})}i.push(t);a.push(e);return o(t,e,n)}return s(t,n);function o(t,e,n){n--;if(n<0){return"..."}var i=e.$$hashKey;var r;if(B(t)){for(var a=0,o=t.length;a<o;a++){e.push(s(t[a],n))}}else if(Y(t)){for(r in t){e[r]=s(t[r],n)}}else if(t&&typeof t.hasOwnProperty==="function"){for(r in t){if(t.hasOwnProperty(r)){e[r]=s(t[r],n)}}}else{for(r in t){if(l.call(t,r)){e[r]=s(t[r],n)}}}M(e,i);return e}function s(t,e){if(!U(t)){return t}var n=i.indexOf(t);if(n!==-1){return a[n]}if(K(t)||Z(t)){throw y("cpws","Can't copy! Making copies of Window or Scope instances is not supported.")}var r=false;var s=u(t);if(s===undefined){s=B(t)?[]:Object.create(_(t));r=true}i.push(t);a.push(s);return r?o(t,s,e):s}function u(t){switch(m.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(s(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);new Uint8Array(e).set(new Uint8Array(t));return e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);n.lastIndex=t.lastIndex;return n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(q(t.cloneNode)){return t.cloneNode(true)}}}function pt(t,e){return t===e||t!==t&&e!==e}function vt(t,e){if(t===e)return true;if(t===null||e===null)return false;if(t!==t&&e!==e)return true;var n=typeof t,i=typeof e,r,a,o;if(n===i&&n==="object"){if(B(t)){if(!B(e))return false;if((r=t.length)===e.length){for(a=0;a<r;a++){if(!vt(t[a],e[a]))return false}return true}}else if(z(t)){if(!z(e))return false;return pt(t.getTime(),e.getTime())}else if(X(t)){if(!X(e))return false;return t.toString()===e.toString()}else{if(Z(t)||Z(e)||K(t)||K(e)||B(e)||z(e)||X(e))return false;o=Zt();for(a in t){if(a.charAt(0)==="$"||q(t[a]))continue;if(!vt(t[a],e[a]))return false;o[a]=true}for(a in e){if(!(a in o)&&a.charAt(0)!=="$"&&G(e[a])&&!q(e[a]))return false}return true}}return false}var gt=function(){if(!G(gt.rules)){var t=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(t){var n=t.getAttribute("ng-csp")||t.getAttribute("data-ng-csp");gt.rules={noUnsafeEval:!n||n.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!n||n.indexOf("no-inline-style")!==-1}}else{gt.rules={noUnsafeEval:i(),noInlineStyle:false}}}return gt.rules;function i(){try{new Function("");return false}catch(t){return true}}};var mt=function(){if(G(mt.name_))return mt.name_;var t;var n,i=Pt.length,r,a;for(n=0;n<i;++n){r=Pt[n];t=e.document.querySelector("["+r.replace(":","\\:")+"jq]");if(t){a=t.getAttribute(r+"jq");break}}return mt.name_=a};function _t(t,e,n){return t.concat(p.call(e,n))}function yt(t,e){return p.call(t,e||0)}function bt(t,e){var n=arguments.length>2?yt(arguments,2):[];if(q(e)&&!(e instanceof RegExp)){return n.length?function(){return arguments.length?e.apply(t,_t(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}else{return e}}function wt(t,n){var i=n;if(typeof t==="string"&&t.charAt(0)==="$"&&t.charAt(1)==="$"){i=undefined}else if(K(n)){i="$WINDOW"}else if(n&&e.document===n){i="$DOCUMENT"}else if(Z(n)){i="$SCOPE"}return i}function xt(t,e){if($(t))return undefined;if(!H(e)){e=e?2:null}return JSON.stringify(t,wt,e)}function St(t){return V(t)?JSON.parse(t):t}var Ct=/:/g;function Et(t,e){t=t.replace(Ct,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return L(n)?e:n}function Ot(t,e){t=new Date(t.getTime());t.setMinutes(t.getMinutes()+e);return t}function Tt(t,e,n){n=n?-1:1;var i=t.getTimezoneOffset();var r=Et(e,i);return Ot(t,n*(r-i))}function Mt(t){t=h(t).clone().empty();var e=h("<div></div>").append(t).html();try{return t[0].nodeType===ee?u(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(t,e){return"<"+u(e)})}catch(t){return u(e)}}function It(t){try{return decodeURIComponent(t)}catch(t){}}function Rt(t){var e={};C((t||"").split("&"),function(t){var n,i,r;if(t){i=t=t.replace(/\+/g,"%20");n=t.indexOf("=");if(n!==-1){i=t.substring(0,n);r=t.substring(n+1)}i=It(i);if(G(i)){r=G(r)?It(r):true;if(!l.call(e,i)){e[i]=r}else if(B(e[i])){e[i].push(r)}else{e[i]=[e[i],r]}}}});return e}function Nt(t){var e=[];C(t,function(t,n){if(B(t)){C(t,function(t){e.push(Lt(n,true)+(t===true?"":"="+Lt(t,true)))})}else{e.push(Lt(n,true)+(t===true?"":"="+Lt(t,true)))}});return e.length?e.join("&"):""}function At(t){return Lt(t,true).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Lt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var Pt=["ng-","data-ng-","ng:","x-ng-"];function Dt(t,e){var n,i,r=Pt.length;for(i=0;i<r;++i){n=Pt[i]+e;if(V(n=t.getAttribute(n))){return n}}return null}function jt(t){var n=t.currentScript;if(!n){return true}if(!(n instanceof e.HTMLScriptElement||n instanceof e.SVGScriptElement)){return false}var i=n.attributes;var r=[i.getNamedItem("src"),i.getNamedItem("href"),i.getNamedItem("xlink:href")];return r.every(function(e){if(!e){return true}if(!e.value){return false}var n=t.createElement("a");n.href=e.value;if(t.location.origin===n.origin){return true}switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return true;default:return false}})}var kt=jt(e.document);function Ft(t,n){var i,r,a={};C(Pt,function(e){var n=e+"app";if(!i&&t.hasAttribute&&t.hasAttribute(n)){i=t;r=t.getAttribute(n)}});C(Pt,function(e){var n=e+"app";var a;if(!i&&(a=t.querySelector("["+n.replace(":","\\:")+"]"))){i=a;r=a.getAttribute(n)}});if(i){if(!kt){e.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates "+"an extension, document.location.href does not match.");return}a.strictDi=Dt(i,"strict-di")!==null;n(i,r?[r]:[],a)}}function $t(t,n,i){if(!U(i))i={};var r={strictDi:false};i=R(r,i);var a=function(){t=h(t);if(t.injector()){var r=t[0]===e.document?"document":Mt(t);throw y("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}n=n||[];n.unshift(["$provide",function(e){e.value("$rootElement",t)}]);if(i.debugInfoEnabled){n.push(["$compileProvider",function(t){t.debugInfoEnabled(true)}])}n.unshift("ng");var a=Cn(n,i.strictDi);a.invoke(["$rootScope","$rootElement","$compile","$injector",function t(e,n,i,r){e.$apply(function(){n.data("$injector",r);i(n)(e)})}]);return a};var o=/^NG_ENABLE_DEBUG_INFO!/;var s=/^NG_DEFER_BOOTSTRAP!/;if(e&&o.test(e.name)){i.debugInfoEnabled=true;e.name=e.name.replace(o,"")}if(e&&!s.test(e.name)){return a()}e.name=e.name.replace(s,"");b.resumeBootstrap=function(t){C(t,function(t){n.push(t)});return a()};if(q(b.resumeDeferredBootstrap)){b.resumeDeferredBootstrap()}}function Gt(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name;e.location.reload()}function Ut(t){var e=b.element(t).injector();if(!e){throw y("test","no injector found for element argument to getTestability")}return e.get("$$testability")}var Yt=/[A-Z]/g;function Vt(t,e){e=e||"_";return t.replace(Yt,function(t,n){return(n?e:"")+t.toLowerCase()})}var Ht=false;function zt(){var n;if(Ht){return}var i=mt();d=$(i)?t:!i?undefined:e[i];if(d&&d.fn.on){h=d;R(d.fn,{scope:Qe.scope,isolateScope:Qe.isolateScope,controller:Qe.controller,injector:Qe.injector,inheritedData:Qe.inheritedData})}else{h=Le}n=h.cleanData;h.cleanData=function(t){var e;for(var i=0,r;(r=t[i])!=null;i++){e=h._data(r).events;if(e&&e.$destroy){h(r).triggerHandler("$destroy")}}n(t)};b.element=h;Ht=true}function Bt(t,e,n){if(!t){throw y("areq","Argument '{0}' is {1}",e||"?",n||"required")}return t}function Wt(t,e,n){if(n&&B(t)){t=t[t.length-1]}Bt(q(t),e,"not a function, got "+(t&&typeof t==="object"?t.constructor.name||"Object":typeof t));return t}function qt(t,e){if(t==="hasOwnProperty"){throw y("badname","hasOwnProperty is not a valid {0} name",e)}}function Xt(t,e,n){if(!e)return t;var i=e.split(".");var r;var a=t;var o=i.length;for(var s=0;s<o;s++){r=i[s];if(t){t=(a=t)[r]}}if(!n&&q(t)){return bt(a,t)}return t}function Kt(t){var e=t[0];var n=t[t.length-1];var i;for(var r=1;e!==n&&(e=e.nextSibling);r++){if(i||t[r]!==e){if(!i){i=h(p.call(t,0,r))}i.push(e)}}return i||t}function Zt(){return Object.create(null)}function Qt(t){if(t==null){return""}switch(typeof t){case"string":break;case"number":t=""+t;break;default:if(F(t)&&!B(t)&&!z(t)){t=t.toString()}else{t=xt(t)}}return t}var Jt=1;var te=2;var ee=3;var ne=8;var ie=9;var re=11;function ae(t){var e=a("$injector");var n=a("ng");function i(t,e,n){return t[e]||(t[e]=n())}var r=i(t,"angular",Object);r.$$minErr=r.$$minErr||a;return i(r,"module",function(){var t={};return function r(a,o,s){var l={};var u=function(t,e){if(t==="hasOwnProperty"){throw n("badname","hasOwnProperty is not a valid {0} name",e)}};u(a,"module");if(o&&t.hasOwnProperty(a)){t[a]=null}return i(t,a,function(){if(!o){throw e("nomod","Module '{0}' is not available! You either misspelled "+"the module name or forgot to load it. If registering a module ensure that you "+"specify the dependencies as the second argument.",a)}var t=[];var i=[];var r=[];var u=f("$injector","invoke","push",i);var c={_invokeQueue:t,_configBlocks:i,_runBlocks:r,info:function(t){if(G(t)){if(!U(t))throw n("aobj","Argument '{0}' must be an object","value");l=t;return this}return l},requires:o,name:a,provider:h("$provide","provider"),factory:h("$provide","factory"),service:h("$provide","service"),value:f("$provide","value"),constant:f("$provide","constant","unshift"),decorator:h("$provide","decorator",i),animation:h("$animateProvider","register"),filter:h("$filterProvider","register"),controller:h("$controllerProvider","register"),directive:h("$compileProvider","directive"),component:h("$compileProvider","component"),config:u,run:function(t){r.push(t);return this}};if(s){u(s)}return c;function f(e,n,i,r){if(!r)r=t;return function(){r[i||"push"]([e,n,arguments]);return c}}function h(e,n,i){if(!i)i=t;return function(t,r){if(r&&q(r))r.$$moduleName=a;i.push([e,n,arguments]);return c}}})}})}function oe(t,e){if(B(t)){e=e||[];for(var n=0,i=t.length;n<i;n++){e[n]=t[n]}}else if(U(t)){e=e||{};for(var r in t){if(!(r.charAt(0)==="$"&&r.charAt(1)==="$")){e[r]=t[r]}}}return e||t}function se(t,e){var n=[];if(r(e)){t=b.copy(t,null,e)}return JSON.stringify(t,function(t,e){e=wt(t,e);if(U(e)){if(n.indexOf(e)>=0)return"...";n.push(e)}return e})}function le(t,e){if(typeof t==="function"){return t.toString().replace(/ \{[\s\S]*$/,"")}else if($(t)){return"undefined"}else if(typeof t!=="string"){return se(t,e)}return t}var ue={full:"1.7.0",major:1,minor:7,dot:0,codeName:"nonexistent-physiology"};function ce(t){R(t,{errorHandlingConfig:i,bootstrap:$t,copy:dt,extend:R,merge:N,equals:vt,element:h,forEach:C,injector:Cn,noop:D,bind:bt,toJson:xt,fromJson:St,identity:j,isUndefined:$,isDefined:G,isString:V,isFunction:q,isObject:U,isNumber:H,isElement:lt,isArray:B,version:ue,isDate:z,callbacks:{$$counter:0},getTestability:Ut,reloadWithDebugInfo:Gt,$$minErr:a,$$csp:gt,$$encodeUriSegment:At,$$encodeUriQuery:Lt,$$lowercase:u,$$stringify:Qt,$$uppercase:c});w=ae(e);w("ng",["ngLocale"],["$provide",function t(e){e.provider({$$sanitizeUri:Lr});e.provider("$compile",Bn).directive({a:Ga,input:No,textarea:No,form:qa,script:Rs,select:Ps,option:Ds,ngBind:Po,ngBindHtml:jo,ngBindTemplate:Do,ngClass:$o,ngClassEven:Uo,ngClassOdd:Go,ngCloak:Yo,ngController:Vo,ngForm:Xa,ngHide:Ss,ngIf:Bo,ngInclude:Wo,ngInit:Xo,ngNonBindable:ps,ngPluralize:_s,ngRepeat:ys,ngShow:xs,ngStyle:Cs,ngSwitch:Es,ngSwitchWhen:Os,ngSwitchDefault:Ts,ngOptions:ms,ngTransclude:Is,ngModel:ls,ngList:Ko,ngChange:ko,pattern:ks,ngPattern:ks,required:js,ngRequired:js,minlength:$s,ngMinlength:$s,maxlength:Fs,ngMaxlength:Fs,ngValue:Lo,ngModelOptions:hs}).directive({ngInclude:qo}).directive(Ua).directive(Ho);e.provider({$anchorScroll:En,$animate:Dn,$animateCss:Fn,$$animateJs:Ln,$$animateQueue:Pn,$$AnimateRunner:kn,$$animateAsyncRun:jn,$browser:Gn,$cacheFactory:Un,$controller:ri,$document:ai,$$isDocumentHidden:oi,$exceptionHandler:si,$filter:oa,$$forceReflow:li,$interpolate:Ii,$interval:Ni,$http:Ci,$httpParamSerializer:gi,$httpParamSerializerJQLike:mi,$httpBackend:Oi,$xhrFactory:Ei,$jsonpCallbacks:Ai,$location:Ji,$log:tr,$parse:Cr,$rootScope:Ar,$q:Er,$$q:Or,$sce:Ur,$sceDelegate:Gr,$sniffer:Yr,$templateCache:Yn,$templateRequest:Hr,$$testability:zr,$timeout:Wr,$window:ia,$$rAF:Nr,$$jqLite:ln,$$Map:dn,$$cookieReader:aa})}]).info({angularVersion:"1.7.0"})}Le.expando="ng339";var fe=Le.cache={},he=1;Le._data=function(t){return this.cache[t[this.expando]]||{}};function de(){return++he}var pe=/-([a-z])/g;var ve=/^-ms-/;var ge={mouseleave:"mouseout",mouseenter:"mouseover"};var me=a("jqLite");function _e(t){return be(t.replace(ve,"ms-"))}function ye(t,e){return e.toUpperCase()}function be(t){return t.replace(pe,ye)}var we=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/;var xe=/<|&#?\w+;/;var Se=/<([\w:-]+)/;var Ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi;var Ee={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ee.optgroup=Ee.option;Ee.tbody=Ee.tfoot=Ee.colgroup=Ee.caption=Ee.thead;Ee.th=Ee.td;function Oe(t){return!xe.test(t)}function Te(t){var e=t.nodeType;return e===Jt||!e||e===ie}function Me(t){for(var e in fe[t.ng339]){return true}return false}function Ie(t,e){var n,i,r,a=e.createDocumentFragment(),o=[],s;if(Oe(t)){o.push(e.createTextNode(t))}else{n=a.appendChild(e.createElement("div"));i=(Se.exec(t)||["",""])[1].toLowerCase();r=Ee[i]||Ee._default;n.innerHTML=r[1]+t.replace(Ce,"<$1></$2>")+r[2];s=r[0];while(s--){n=n.lastChild}o=_t(o,n.childNodes);n=a.firstChild;n.textContent=""}a.textContent="";a.innerHTML="";C(o,function(t){a.appendChild(t)});return a}function Re(t,n){n=n||e.document;var i;if(i=we.exec(t)){return[n.createElement(i[1])]}if(i=Ie(t,n)){return i.childNodes}return[]}function Ne(t,e){var n=t.parentNode;if(n){n.replaceChild(e,t)}e.appendChild(t)}var Ae=e.Node.prototype.contains||function(t){return!!(this.compareDocumentPosition(t)&16)};function Le(t){if(t instanceof Le){return t}var e;if(V(t)){t=ot(t);e=true}if(!(this instanceof Le)){if(e&&t.charAt(0)!=="<"){throw me("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element")}return new Le(t)}if(e){ze(this,Re(t))}else if(q(t)){Ze(t)}else{ze(this,t)}}function Pe(t){return t.cloneNode(true)}function De(t,e){if(!e&&Te(t))h.cleanData([t]);if(t.querySelectorAll){h.cleanData(t.querySelectorAll("*"))}}function je(t){var e;for(e in t){return false}return true}function ke(t){var e=t.ng339;var n=e&&fe[e];var i=n&&n.events;var r=n&&n.data;if((!r||je(r))&&(!i||je(i))){delete fe[e];t.ng339=undefined}}function Fe(t,e,n,i){if(G(i))throw me("offargs","jqLite#off() does not support the `selector` argument");var r=Ge(t);var a=r&&r.events;var o=r&&r.handle;if(!o)return;if(!e){for(e in a){if(e!=="$destroy"){t.removeEventListener(e,o)}delete a[e]}}else{var s=function(e){var i=a[e];if(G(n)){ht(i||[],n)}if(!(G(n)&&i&&i.length>0)){t.removeEventListener(e,o);delete a[e]}};C(e.split(" "),function(t){s(t);if(ge[t]){s(ge[t])}})}ke(t)}function $e(t,e){var n=t.ng339;var i=n&&fe[n];if(i){if(e){delete i.data[e]}else{i.data={}}ke(t)}}function Ge(t,e){var n=t.ng339,i=n&&fe[n];if(e&&!i){t.ng339=n=de();i=fe[n]={events:{},data:{},handle:undefined}}return i}function Ue(t,e,n){if(Te(t)){var i;var r=G(n);var a=!r&&e&&!U(e);var o=!e;var s=Ge(t,!a);var l=s&&s.data;if(r){l[be(e)]=n}else{if(o){return l}else{if(a){return l&&l[be(e)]}else{for(i in e){l[be(i)]=e[i]}}}}}}function Ye(t,e){if(!t.getAttribute)return false;return(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function Ve(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");var i=n;C(e.split(" "),function(t){t=ot(t);i=i.replace(" "+t+" "," ")});if(i!==n){t.setAttribute("class",ot(i))}}}function He(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");var i=n;C(e.split(" "),function(t){t=ot(t);if(i.indexOf(" "+t+" ")===-1){i+=t+" "}});if(i!==n){t.setAttribute("class",ot(i))}}}function ze(t,e){if(e){if(e.nodeType){t[t.length++]=e}else{var n=e.length;if(typeof n==="number"&&e.window!==e){if(n){for(var i=0;i<n;i++){t[t.length++]=e[i]}}}else{t[t.length++]=e}}}}function Be(t,e){return We(t,"$"+(e||"ngController")+"Controller")}function We(t,e,n){if(t.nodeType===ie){t=t.documentElement}var i=B(e)?e:[e];while(t){for(var r=0,a=i.length;r<a;r++){if(G(n=h.data(t,i[r])))return n}t=t.parentNode||t.nodeType===re&&t.host}}function qe(t){De(t,true);while(t.firstChild){t.removeChild(t.firstChild)}}function Xe(t,e){if(!e)De(t);var n=t.parentNode;if(n)n.removeChild(t)}function Ke(t,n){n=n||e;if(n.document.readyState==="complete"){n.setTimeout(t)}else{h(n).on("load",t)}}function Ze(t){function n(){e.document.removeEventListener("DOMContentLoaded",n);e.removeEventListener("load",n);t()}if(e.document.readyState==="complete"){e.setTimeout(t)}else{e.document.addEventListener("DOMContentLoaded",n);e.addEventListener("load",n)}}var Qe=Le.prototype={ready:Ze,toString:function(){var t=[];C(this,function(e){t.push(""+e)});return"["+t.join(", ")+"]"},eq:function(t){return t>=0?h(this[t]):h(this[this.length+t])},length:0,push:g,sort:[].sort,splice:[].splice};var Je={};C("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){Je[u(t)]=t});var tn={};C("input,select,option,textarea,button,form,details".split(","),function(t){tn[t]=true});var en={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function nn(t,e){var n=Je[e.toLowerCase()];return n&&tn[ct(t)]&&n}function rn(t){return en[t]}C({data:Ue,removeData:$e,hasData:Me,cleanData:function t(e){for(var n=0,i=e.length;n<i;n++){$e(e[n]);Fe(e[n])}}},function(t,e){Le[e]=t});C({data:Ue,inheritedData:We,scope:function(t){return h.data(t,"$scope")||We(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return h.data(t,"$isolateScope")||h.data(t,"$isolateScopeNoTemplate")},controller:Be,injector:function(t){return We(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:Ye,css:function(t,e,n){e=_e(e);if(G(n)){t.style[e]=n}else{return t.style[e]}},attr:function(t,e,n){var i;var r=t.nodeType;if(r===ee||r===te||r===ne||!t.getAttribute){return}var a=u(e);var o=Je[a];if(G(n)){if(n===null||n===false&&o){t.removeAttribute(e)}else{t.setAttribute(e,o?a:n)}}else{i=t.getAttribute(e);if(o&&i!==null){i=a}return i===null?undefined:i}},prop:function(t,e,n){if(G(n)){t[e]=n}else{return t[e]}},text:function(){t.$dv="";return t;function t(t,e){if($(e)){var n=t.nodeType;return n===Jt||n===ee?t.textContent:""}t.textContent=e}}(),val:function(t,e){if($(e)){if(t.multiple&&ct(t)==="select"){var n=[];C(t.options,function(t){if(t.selected){n.push(t.value||t.text)}});return n}return t.value}t.value=e},html:function(t,e){if($(e)){return t.innerHTML}De(t,true);t.innerHTML=e},empty:qe},function(t,e){Le.prototype[e]=function(e,n){var i,r;var a=this.length;if(t!==qe&&$(t.length===2&&(t!==Ye&&t!==Be)?e:n)){if(U(e)){for(i=0;i<a;i++){if(t===Ue){t(this[i],e)}else{for(r in e){t(this[i],r,e[r])}}}return this}else{var o=t.$dv;var s=$(o)?Math.min(a,1):a;for(var l=0;l<s;l++){var u=t(this[l],e,n);o=o?o+u:u}return o}}else{for(i=0;i<a;i++){t(this[i],e,n)}return this}}});function an(t,e){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=e[i||n.type];var a=r?r.length:0;if(!a)return;if($(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=true;if(n.stopPropagation){n.stopPropagation()}if(o){o.call(n)}}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===true};var s=r.specialHandlerWrapper||on;if(a>1){r=oe(r)}for(var l=0;l<a;l++){if(!n.isImmediatePropagationStopped()){s(t,n,r[l])}}};n.elem=t;return n}function on(t,e,n){n.call(t,e)}function sn(t,e,n){var i=e.relatedTarget;if(!i||i!==t&&!Ae.call(t,i)){n.call(t,e)}}C({removeData:$e,on:function t(e,n,i,r){if(G(r))throw me("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(!Te(e)){return}var a=Ge(e,true);var o=a.events;var s=a.handle;if(!s){s=a.handle=an(e,o)}var l=n.indexOf(" ")>=0?n.split(" "):[n];var u=l.length;var c=function(t,n,r){var a=o[t];if(!a){a=o[t]=[];a.specialHandlerWrapper=n;if(t!=="$destroy"&&!r){e.addEventListener(t,s)}}a.push(i)};while(u--){n=l[u];if(ge[n]){c(ge[n],sn);c(n,undefined,true)}else{c(n)}}},off:Fe,one:function(t,e,n){t=h(t);t.on(e,function i(){t.off(e,n);t.off(e,i)});t.on(e,n)},replaceWith:function(t,e){var n,i=t.parentNode;De(t);C(new Le(e),function(e){if(n){i.insertBefore(e,n.nextSibling)}else{i.replaceChild(e,t)}n=e})},children:function(t){var e=[];C(t.childNodes,function(t){if(t.nodeType===Jt){e.push(t)}});return e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n!==Jt&&n!==re)return;e=new Le(e);for(var i=0,r=e.length;i<r;i++){var a=e[i];t.appendChild(a)}},prepend:function(t,e){if(t.nodeType===Jt){var n=t.firstChild;C(new Le(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){Ne(t,h(e).eq(0).clone()[0])},remove:Xe,detach:function(t){Xe(t,true)},after:function(t,e){var n=t,i=t.parentNode;if(i){e=new Le(e);for(var r=0,a=e.length;r<a;r++){var o=e[r];i.insertBefore(o,n.nextSibling);n=o}}},addClass:He,removeClass:Ve,toggleClass:function(t,e,n){if(e){C(e.split(" "),function(e){var i=n;if($(i)){i=!Ye(t,e)}(i?He:Ve)(t,e)})}},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==re?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){if(t.getElementsByTagName){return t.getElementsByTagName(e)}else{return[]}},clone:Pe,triggerHandler:function(t,e,n){var i,r,a;var o=e.type||e;var s=Ge(t);var l=s&&s.events;var u=l&&l[o];if(u){i={preventDefault:function(){this.defaultPrevented=true},isDefaultPrevented:function(){return this.defaultPrevented===true},stopImmediatePropagation:function(){this.immediatePropagationStopped=true},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===true},stopPropagation:D,type:o,target:t};if(e.type){i=R(i,e)}r=oe(u);a=n?[i].concat(n):[i];C(r,function(e){if(!i.isImmediatePropagationStopped()){e.apply(t,a)}})}}},function(t,e){Le.prototype[e]=function(e,n,i){var r;for(var a=0,o=this.length;a<o;a++){if($(r)){r=t(this[a],e,n,i);if(G(r)){r=h(r)}}else{ze(r,t(this[a],e,n,i))}}return G(r)?r:this}});Le.prototype.bind=Le.prototype.on;Le.prototype.unbind=Le.prototype.off;function ln(){this.$get=function t(){return R(Le,{hasClass:function(t,e){if(t.attr)t=t[0];return Ye(t,e)},addClass:function(t,e){if(t.attr)t=t[0];return He(t,e)},removeClass:function(t,e){if(t.attr)t=t[0];return Ve(t,e)}})}}function un(t,e){var n=t&&t.$$hashKey;if(n){if(typeof n==="function"){n=t.$$hashKey()}return n}var i=typeof t;if(i==="function"||i==="object"&&t!==null){n=t.$$hashKey=i+":"+(e||T)()}else{n=i+":"+t}return n}var cn=Object.create(null);function fn(){this._keys=[];this._values=[];this._lastKey=NaN;this._lastIndex=-1}fn.prototype={_idx:function(t){if(t===this._lastKey){return this._lastIndex}this._lastKey=t;this._lastIndex=this._keys.indexOf(t);return this._lastIndex},_transformKey:function(t){return L(t)?cn:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(e!==-1){return this._values[e]}},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);if(n===-1){n=this._lastIndex=this._keys.length}this._keys[n]=t;this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);if(e===-1){return false}this._keys.splice(e,1);this._values.splice(e,1);this._lastKey=NaN;this._lastIndex=-1;return true}};var hn=fn;var dn=[function(){this.$get=[function(){return hn}]}];var pn=/^([^(]+?)=>/;var vn=/^[^(]*\(\s*([^)]*)\)/m;var gn=/,/;var mn=/^\s*(_?)(\S+?)\1\s*$/;var _n=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;var yn=a("$injector");function bn(t){return Function.prototype.toString.call(t)}function wn(t){var e=bn(t).replace(_n,""),n=e.match(pn)||e.match(vn);return n}function xn(t){var e=wn(t);if(e){return"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")"}return"fn"}function Sn(t,e,n){var i,r,a;if(typeof t==="function"){if(!(i=t.$inject)){i=[];if(t.length){if(e){if(!V(n)||!n){n=t.name||xn(t)}throw yn("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n)}r=wn(t);C(r[1].split(gn),function(t){t.replace(mn,function(t,e,n){i.push(n)})})}t.$inject=i}}else if(B(t)){a=t.length-1;Wt(t[a],"fn");i=t.slice(0,a)}else{Wt(t,"fn",true)}return i}function Cn(t,e){e=e===true;var n={},i="Provider",r=[],a=new hn,o={$provide:{provider:d(p),factory:d(g),service:d(m),value:d(_),constant:d(y),decorator:x}},s=o.$injector=E(o,function(t,e){if(b.isString(e)){r.push(e)}throw yn("unpr","Unknown provider: {0}",r.join(" <- "))}),l={},u=E(l,function(t,e){var n=s.get(t+i,e);return c.invoke(n.$get,n,undefined,t)}),c=u;o["$injector"+i]={$get:k(u)};c.modules=s.modules=Zt();var h=S(t);c=u.get("$injector");c.strictDi=e;C(h,function(t){if(t)c.invoke(t)});c.loadNewModules=function(t){C(S(t),function(t){if(t)c.invoke(t)})};return c;function d(t){return function(e,n){if(U(e)){C(e,O(t))}else{return t(e,n)}}}function p(t,e){qt(t,"service");if(q(e)||B(e)){e=s.instantiate(e)}if(!e.$get){throw yn("pget","Provider '{0}' must define $get factory method.",t)}return o[t+i]=e}function v(t,e){return function n(){var i=c.invoke(e,this);if($(i)){throw yn("undef","Provider '{0}' must return a value from $get factory method.",t)}return i}}function g(t,e,n){return p(t,{$get:n!==false?v(t,e):e})}function m(t,e){return g(t,["$injector",function(t){return t.instantiate(e)}])}function _(t,e){return g(t,k(e),false)}function y(t,e){qt(t,"constant");o[t]=e;l[t]=e}function x(t,e){var n=s.get(t+i),r=n.$get;n.$get=function(){var t=c.invoke(r,n);return c.invoke(e,null,{$delegate:t})}}function S(t){Bt($(t)||B(t),"modulesToLoad","not an array");var e=[],n;C(t,function(t){if(a.get(t))return;a.set(t,true);function i(t){var e,n;for(e=0,n=t.length;e<n;e++){var i=t[e],r=s.get(i[0]);r[i[1]].apply(r,i[2])}}try{if(V(t)){n=w(t);c.modules[t]=n;e=e.concat(S(n.requires)).concat(n._runBlocks);i(n._invokeQueue);i(n._configBlocks)}else if(q(t)){e.push(s.invoke(t))}else if(B(t)){e.push(s.invoke(t))}else{Wt(t,"module")}}catch(e){if(B(t)){t=t[t.length-1]}if(e.message&&e.stack&&e.stack.indexOf(e.message)===-1){e=e.message+"\n"+e.stack}throw yn("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}});return e}function E(t,a){function s(e,i){if(t.hasOwnProperty(e)){if(t[e]===n){throw yn("cdep","Circular dependency found: {0}",e+" <- "+r.join(" <- "))}return t[e]}else{try{r.unshift(e);t[e]=n;t[e]=a(e,i);return t[e]}catch(i){if(t[e]===n){delete t[e]}throw i}finally{r.shift()}}}function l(t,n,i){var r=[],a=Cn.$$annotate(t,e,i);for(var o=0,l=a.length;o<l;o++){var u=a[o];if(typeof u!=="string"){throw yn("itkn","Incorrect injection token! Expected service name as string, got {0}",u)}r.push(n&&n.hasOwnProperty(u)?n[u]:s(u,i))}return r}function u(t){if(f||typeof t!=="function"){return false}var e=t.$$ngIsClass;if(!et(e)){e=t.$$ngIsClass=/^class\b/.test(bn(t))}return e}function c(t,e,n,i){if(typeof n==="string"){i=n;n=null}var r=l(t,n,i);if(B(t)){t=t[t.length-1]}if(!u(t)){return t.apply(e,r)}else{r.unshift(null);return new(Function.prototype.bind.apply(t,r))}}function h(t,e,n){var i=B(t)?t[t.length-1]:t;var r=l(t,e,n);r.unshift(null);return new(Function.prototype.bind.apply(i,r))}return{invoke:c,instantiate:h,get:s,annotate:Cn.$$annotate,has:function(e){return o.hasOwnProperty(e+i)||t.hasOwnProperty(e)}}}}Cn.$$annotate=Sn;function En(){var t=true;this.disableAutoScrolling=function(){t=false};this.$get=["$window","$location","$rootScope",function(e,n,i){var r=e.document;function a(t){var e=null;Array.prototype.some.call(t,function(t){if(ct(t)==="a"){e=t;return true}});return e}function o(){var t=l.yOffset;if(q(t)){t=t()}else if(lt(t)){var n=t[0];var i=e.getComputedStyle(n);if(i.position!=="fixed"){t=0}else{t=n.getBoundingClientRect().bottom}}else if(!H(t)){t=0}return t}function s(t){if(t){t.scrollIntoView();var n=o();if(n){var i=t.getBoundingClientRect().top;e.scrollBy(0,i-n)}}else{e.scrollTo(0,0)}}function l(t){t=V(t)?t:H(t)?t.toString():n.hash();var e;if(!t)s(null);else if(e=r.getElementById(t))s(e);else if(e=a(r.getElementsByName(t)))s(e);else if(t==="top")s(null)}if(t){i.$watch(function t(){return n.hash()},function t(e,n){if(e===n&&e==="")return;Ke(function(){i.$evalAsync(l)})})}return l}]}var On=a("$animate");var Tn=1;var Mn="ng-animate";function In(t,e){if(!t&&!e)return"";if(!t)return e;if(!e)return t;if(B(t))t=t.join(" ");if(B(e))e=e.join(" ");return t+" "+e}function Rn(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===Tn){return n}}}function Nn(t){if(V(t)){t=t.split(" ")}var e=Zt();C(t,function(t){if(t.length){e[t]=true}});return e}function An(t){return U(t)?t:{}}var Ln=function(){this.$get=D};var Pn=function(){var t=new hn;var e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){return{enabled:D,on:D,off:D,pin:D,push:function(t,e,i,r){if(r){r()}i=i||{};if(i.from){t.css(i.from)}if(i.to){t.css(i.to)}if(i.addClass||i.removeClass){o(t,i.addClass,i.removeClass)}var a=new n;a.complete();return a}};function r(t,e,n){var i=false;if(e){e=V(e)?e.split(" "):B(e)?e:[];C(e,function(e){if(e){i=true;t[e]=n}})}return i}function a(){C(e,function(e){var n=t.get(e);if(n){var i=Nn(e.attr("class"));var r="";var a="";C(n,function(t,e){var n=!!i[e];if(t!==n){if(t){r+=(r.length?" ":"")+e}else{a+=(a.length?" ":"")+e}}});C(e,function(t){if(r){He(t,r)}if(a){Ve(t,a)}});t.delete(e)}});e.length=0}function o(n,o,s){var l=t.get(n)||{};var u=r(l,o,true);var c=r(l,s,false);if(u||c){t.set(n,l);e.push(n);if(e.length===1){i.$$postDigest(a)}}}}]};var Dn=["$provide",function(t){var e=this;var n=null;var i=null;this.$$registeredAnimations=Object.create(null);this.register=function(n,i){if(n&&n.charAt(0)!=="."){throw On("notcsel","Expecting class selector starting with '.' got '{0}'.",n)}var r=n+"-animation";e.$$registeredAnimations[n.substr(1)]=r;t.factory(r,i)};this.customFilter=function(t){if(arguments.length===1){i=q(t)?t:null}return i};this.classNameFilter=function(t){if(arguments.length===1){n=t instanceof RegExp?t:null;if(n){var e=new RegExp("[(\\s|\\/)]"+Mn+"[(\\s|\\/)]");if(e.test(n.toString())){n=null;throw On("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Mn)}}}return n};this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var i=Rn(n);if(i&&!i.parentNode&&!i.previousElementSibling){n=null}}if(n){n.after(t)}else{e.prepend(t)}}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){if(t.cancel){t.cancel()}},enter:function(n,i,r,a){i=i&&h(i);r=r&&h(r);i=i||r.parent();e(n,i,r);return t.push(n,"enter",An(a))},move:function(n,i,r,a){i=i&&h(i);r=r&&h(r);i=i||r.parent();e(n,i,r);return t.push(n,"move",An(a))},leave:function(e,n){return t.push(e,"leave",An(n),function(){e.remove()})},addClass:function(e,n,i){i=An(i);i.addClass=In(i.addclass,n);return t.push(e,"addClass",i)},removeClass:function(e,n,i){i=An(i);i.removeClass=In(i.removeClass,n);return t.push(e,"removeClass",i)},setClass:function(e,n,i,r){r=An(r);r.addClass=In(r.addClass,n);r.removeClass=In(r.removeClass,i);return t.push(e,"setClass",r)},animate:function(e,n,i,r,a){a=An(a);a.from=a.from?R(a.from,n):n;a.to=a.to?R(a.to,i):i;r=r||"ng-inline-animate";a.tempClasses=In(a.tempClasses,r);return t.push(e,"animate",a)}}}]}];var jn=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n);if(e.length>1)return;t(function(){for(var t=0;t<e.length;t++){e[t]()}e=[]})}return function(){var t=false;n(function(){t=true});return function(e){if(t){e()}else{n(e)}}}}]};var kn=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,i,r){var a=0;var o=1;var s=2;l.chain=function(t,e){var n=0;i();function i(){if(n===t.length){e(true);return}t[n](function(t){if(t===false){e(false);return}n++;i()})}};l.all=function(t,e){var n=0;var i=true;C(t,function(t){t.done(r)});function r(r){i=i&&r;if(++n===t.length){e(i)}}};function l(t){this.setHost(t);var e=n();var a=function(t){r(t,0,false)};this._doneCallbacks=[];this._tick=function(t){if(i()){a(t)}else{e(t)}};this._state=0}l.prototype={setHost:function(t){this.host=t||{}},done:function(t){if(this._state===s){t()}else{this._doneCallbacks.push(t)}},progress:D,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){if(e===false){n()}else{t()}})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise()["catch"](t)},finally:function(t){return this.getPromise()["finally"](t)},pause:function(){if(this.host.pause){this.host.pause()}},resume:function(){if(this.host.resume){this.host.resume()}},end:function(){if(this.host.end){this.host.end()}this._resolve(true)},cancel:function(){if(this.host.cancel){this.host.cancel()}this._resolve(false)},complete:function(t){var e=this;if(e._state===a){e._state=o;e._tick(function(){e._resolve(t)})}},_resolve:function(t){if(this._state!==s){C(this._doneCallbacks,function(e){e(t)});this._doneCallbacks.length=0;this._state=s}}};return l}]};var Fn=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,i){var r=i||{};if(!r.$$prepared){r=dt(r)}if(r.cleanupStyles){r.from=r.to=null}if(r.from){e.css(r.from);r.from=null}var a,o=new n;return{start:s,end:s};function s(){t(function(){l();if(!a){o.complete()}a=true});return o}function l(){if(r.addClass){e.addClass(r.addClass);r.addClass=null}if(r.removeClass){e.removeClass(r.removeClass);r.removeClass=null}if(r.to){e.css(r.to);r.to=null}}}}]};function $n(t,e,n,i){var r=this,a=t.location,o=t.history,s=t.setTimeout,l=t.clearTimeout,u={};r.isMock=false;var c=0;var f=[];r.$$completeOutstandingRequest=d;r.$$incOutstandingRequestCount=function(){c++};function d(t){try{t.apply(null,yt(arguments,1))}finally{c--;if(c===0){while(f.length){try{f.pop()()}catch(t){n.error(t)}}}}}function p(t){var e=t.indexOf("#");return e===-1?"":t.substr(e)}r.notifyWhenNoOutstandingRequests=function(t){if(c===0){t()}else{f.push(t)}};var v,g,m=a.href,_=e.find("base"),y=null,b=!i.history?D:function t(){try{return o.state}catch(t){}};O();r.url=function(e,n,s){if($(s)){s=null}if(a!==t.location)a=t.location;if(o!==t.history)o=t.history;if(e){var l=g===s;if(m===e&&(!i.history||l)){return r}var u=m&&Vi(m)===Vi(e);m=e;g=s;if(i.history&&(!u||!l)){o[n?"replaceState":"pushState"](s,"",e);O()}else{if(!u){y=e}if(n){a.replace(e)}else if(!u){a.href=e}else{a.hash=p(e)}if(a.href!==e){y=e}}if(y){y=e}return r}else{return y||a.href}};r.state=function(){return v};var w=[],x=false;function S(){y=null;T()}var E=null;function O(){v=b();v=$(v)?null:v;if(vt(v,E)){v=E}E=v;g=v}function T(){var t=g;O();if(m===r.url()&&t===v){return}m=r.url();g=v;C(w,function(t){t(r.url(),v)})}r.onUrlChange=function(e){if(!x){if(i.history)h(t).on("popstate",S);h(t).on("hashchange",S);x=true}w.push(e);return e};r.$$applicationDestroyed=function(){h(t).off("hashchange popstate",S)};r.$$checkUrlChange=T;r.baseHref=function(){var t=_.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""};r.defer=function(t,e){var n;c++;n=s(function(){delete u[n];d(t)},e||0);u[n]=true;return n};r.defer.cancel=function(t){if(u[t]){delete u[t];l(t);d(D);return true}return false}}function Gn(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,i){return new $n(t,i,e,n)}]}function Un(){this.$get=function(){var t={};function e(e,n){if(e in t){throw a("$cacheFactory")("iid","CacheId '{0}' is already taken!",e)}var i=0,r=R({},n,{id:e}),o=Zt(),s=n&&n.capacity||Number.MAX_VALUE,l=Zt(),u=null,c=null;return t[e]={put:function(t,e){if($(e))return;if(s<Number.MAX_VALUE){var n=l[t]||(l[t]={key:t});f(n)}if(!(t in o))i++;o[t]=e;if(i>s){this.remove(c.key)}return e},get:function(t){if(s<Number.MAX_VALUE){var e=l[t];if(!e)return;f(e)}return o[t]},remove:function(t){if(s<Number.MAX_VALUE){var e=l[t];if(!e)return;if(e===u)u=e.p;if(e===c)c=e.n;h(e.n,e.p);delete l[t]}if(!(t in o))return;delete o[t];i--},removeAll:function(){o=Zt();i=0;l=Zt();u=c=null},destroy:function(){o=null;r=null;l=null;delete t[e]},info:function(){return R({},r,{size:i})}};function f(t){if(t!==u){if(!c){c=t}else if(c===t){c=t.n}h(t.n,t.p);h(t,u);u=t;u.n=null}}function h(t,e){if(t!==e){if(t)t.p=e;if(e)e.n=t}}}e.info=function(){var e={};C(t,function(t,n){e[n]=t.info()});return e};e.get=function(e){return t[e]};return e}}function Yn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var Vn=a("$compile");function Hn(){}var zn=new Hn;Bn.$inject=["$provide","$$sanitizeUriProvider"];function Bn(t,n){var i={},r="Directive",a=/^\s*directive:\s*([\w-]+)\s+(.*)$/,o=/(([\w-]+)(?::([^;]+))?;?)/,s=ut("ngSrc,ngSrcset,src,srcset"),c=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/;var d=/^(on[a-z]+|formaction)$/;var p=Zt();function v(t,e,n){var i=/^([@&<]|=(\*?))(\??)\s*([\w$]*)$/;var r=Zt();C(t,function(t,a){t=t.trim();if(t in p){r[a]=p[t];return}var o=t.match(i);if(!o){throw Vn("iscp","Invalid {3} for directive '{0}'."+" Definition: {... {1}: '{2}' ...}",e,a,t,n?"controller bindings definition":"isolate scope definition")}r[a]={mode:o[1][0],collection:o[2]==="*",optional:o[3]==="?",attrName:o[4]||a};if(o[4]){p[t]=r[a]}});return r}function g(t,e){var n={isolateScope:null,bindToController:null};if(U(t.scope)){if(t.bindToController===true){n.bindToController=v(t.scope,e,true);n.isolateScope={}}else{n.isolateScope=v(t.scope,e,false)}}if(U(t.bindToController)){n.bindToController=v(t.bindToController,e,true)}if(n.bindToController&&!t.controller){throw Vn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e)}return n}function _(t){var e=t.charAt(0);if(!e||e!==u(e)){throw Vn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t)}if(t!==t.trim()){throw Vn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}}function y(t){var e=t.require||t.controller&&t.name;if(!B(e)&&U(e)){C(e,function(t,n){var i=t.match(c);var r=t.substring(i[0].length);if(!r)e[n]=i[0]+n})}return e}function b(t,e){if(t&&!(V(t)&&/[EACM]/.test(t))){throw Vn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e)}return t||"EA"}this.directive=function e(n,a){Bt(n,"name");qt(n,"directive");if(V(n)){_(n);Bt(a,"directiveFactory");if(!i.hasOwnProperty(n)){i[n]=[];t.factory(n+r,["$injector","$exceptionHandler",function(t,e){var r=[];C(i[n],function(i,a){try{var o=t.invoke(i);if(q(o)){o={compile:k(o)}}else if(!o.compile&&o.link){o.compile=k(o.link)}o.priority=o.priority||0;o.index=a;o.name=o.name||n;o.require=y(o);o.restrict=b(o.restrict,n);o.$$moduleName=i.$$moduleName;r.push(o)}catch(t){e(t)}});return r}])}i[n].push(a)}else{C(n,O(e))}return this};this.component=function t(e,n){if(!V(e)){C(e,O(bt(this,t)));return this}var i=n.controller||function(){};function r(t){function e(e){if(q(e)||B(e)){return function(n,i){return t.invoke(e,this,{$element:n,$attrs:i})}}else{return e}}var r=!n.template&&!n.templateUrl?"":n.template;var a={controller:i,controllerAs:ii(n.controller)||n.controllerAs||"$ctrl",template:e(r),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};C(n,function(t,e){if(e.charAt(0)==="$")a[e]=t});return a}C(n,function(t,e){if(e.charAt(0)==="$"){r[e]=t;if(q(i))i[e]=t}});r.$inject=["$injector"];return this.directive(e,r)};this.aHrefSanitizationWhitelist=function(t){if(G(t)){n.aHrefSanitizationWhitelist(t);return this}else{return n.aHrefSanitizationWhitelist()}};this.imgSrcSanitizationWhitelist=function(t){if(G(t)){n.imgSrcSanitizationWhitelist(t);return this}else{return n.imgSrcSanitizationWhitelist()}};var w=true;this.debugInfoEnabled=function(t){if(G(t)){w=t;return this}return w};var x=false;this.strictComponentBindingsEnabled=function(t){if(G(t)){x=t;return this}return x};var S=10;this.onChangesTtl=function(t){if(arguments.length){S=t;return this}return S};var E=true;this.commentDirectivesEnabled=function(t){if(arguments.length){E=t;return this}return E};var T=true;this.cssClassDirectivesEnabled=function(t){if(arguments.length){T=t;return this}return T};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(t,n,p,v,_,y,b,O,M){var I=/^\w/;var N=e.document.createElement("div");var A=E;var L=T;var k=S;var F;function G(){try{if(!--k){F=undefined;throw Vn("infchng","{0} $onChanges() iterations reached. Aborting!\n",S)}b.$apply(function(){for(var t=0,e=F.length;t<e;++t){try{F[t]()}catch(t){p(t)}}F=undefined})}finally{k++}}function Y(t,e){if(e){var n=Object.keys(e);var i,r,a;for(i=0,r=n.length;i<r;i++){a=n[i];this[a]=e[a]}}else{this.$attr={}}this.$$element=t}Y.prototype={$normalize:Kn,$addClass:function(t){if(t&&t.length>0){M.addClass(this.$$element,t)}},$removeClass:function(t){if(t&&t.length>0){M.removeClass(this.$$element,t)}},$updateClass:function(t,e){var n=Jn(t,e);if(n&&n.length){M.addClass(this.$$element,n)}var i=Jn(e,t);if(i&&i.length){M.removeClass(this.$$element,i)}},$set:function(t,e,n,i){var r=this.$$element[0],a=nn(r,t),o=rn(t),s=t,l;if(a){this.$$element.prop(t,e);i=a}else if(o){this[o]=e;s=o}this[t]=e;if(i){this.$attr[t]=i}else{i=this.$attr[t];if(!i){this.$attr[t]=i=Vt(t,"-")}}l=ct(this.$$element);if(l==="img"&&t==="srcset"&&e){if(!V(e)){throw Vn("srcset","Can't pass trusted values to `$set('srcset', value)`: \"{0}\"",e.toString())}var u="";var c=ot(e);var f=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/;var h=/\s/.test(c)?f:/(,)/;var d=c.split(h);var v=Math.floor(d.length/2);for(var g=0;g<v;g++){var m=g*2;u+=O.getTrustedMediaUrl(ot(d[m]));u+=" "+ot(d[m+1])}var _=ot(d[g*2]).split(/\s/);u+=O.getTrustedMediaUrl(ot(_[0]));if(_.length===2){u+=" "+ot(_[1])}this[t]=e=u}if(n!==false){if(e===null||$(e)){this.$$element.removeAttr(i)}else{if(I.test(i)){this.$$element.attr(i,e)}else{H(this.$$element[0],i,e)}}}var y=this.$$observers;if(y){C(y[s],function(t){try{t(e)}catch(t){p(t)}})}},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers=Zt()),r=i[t]||(i[t]=[]);r.push(e);b.$evalAsync(function(){if(!r.$$inter&&n.hasOwnProperty(t)&&!$(n[t])){e(n[t])}});return function(){ht(r,e)}}};function H(t,e,n){N.innerHTML="<span "+e+">";var i=N.firstChild.attributes;var r=i[0];i.removeNamedItem(r.name);r.value=n;t.attributes.setNamedItem(r)}function z(t,e){try{t.addClass(e)}catch(t){}}var X=n.startSymbol(),K=n.endSymbol(),Q=X==="{{"&&K==="}}"?j:function t(e){return e.replace(/\{\{/g,X).replace(/}}/g,K)},J=/^ngAttr[A-Z]/;var tt=/^(.+)Start$/;nt.$$addBindingInfo=w?function t(e,n){var i=e.data("$binding")||[];if(B(n)){i=i.concat(n)}else{i.push(n)}e.data("$binding",i)}:D;nt.$$addBindingClass=w?function t(e){z(e,"ng-binding")}:D;nt.$$addScopeInfo=w?function t(e,n,i,r){var a=i?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(a,n)}:D;nt.$$addScopeClass=w?function t(e,n){z(e,n?"ng-isolate-scope":"ng-scope")}:D;nt.$$createComment=function(t,n){var i="";if(w){i=" "+(t||"")+": ";if(n)i+=n+" "}return e.document.createComment(i)};return nt;function nt(t,e,n,i,r){if(!(t instanceof h)){t=h(t)}var a=rt(t,e,t,n,i,r);nt.$$addScopeClass(t);var o=null;return function e(n,i,s){if(!t){throw Vn("multilink","This element has already been linked.")}Bt(n,"scope");if(r&&r.needsNewScope){n=n.$parent.$new()}s=s||{};var l=s.parentBoundTranscludeFn,u=s.transcludeControllers,c=s.futureParentElement;if(l&&l.$$boundTransclude){l=l.$$boundTransclude}if(!o){o=it(c)}var f;if(o!=="html"){f=h(Nt(o,h("<div></div>").append(t).html()))}else if(i){f=Qe.clone.call(t)}else{f=t}if(u){for(var d in u){f.data("$"+d+"Controller",u[d].instance)}}nt.$$addScopeInfo(f,n);if(i)i(f,n);if(a)a(n,f,f,l);if(!i){t=a=null}return f}}function it(t){var e=t&&t[0];if(!e){return"html"}else{return ct(e)!=="foreignobject"&&m.call(e).match(/SVG/)?"svg":"html"}}function rt(t,e,n,i,r,a){var o=[],s=B(t)||t instanceof h,l,u,c,d,p,v,g;for(var m=0;m<t.length;m++){l=new Y;if(f===11){at(t,m,s)}u=lt(t[m],[],l,m===0?i:undefined,r);c=u.length?mt(u,t[m],l,e,n,null,[],[],a):null;if(c&&c.scope){nt.$$addScopeClass(l.$$element)}p=c&&c.terminal||!(d=t[m].childNodes)||!d.length?null:rt(d,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:e);if(c||p){o.push(m,c,p);v=true;g=g||c}a=null}return v?_:null;function _(t,n,i,r){var a,s,l,u,c,f,d,p;var v;if(g){var m=n.length;v=new Array(m);for(c=0;c<o.length;c+=3){d=o[c];v[d]=n[d]}}else{v=n}for(c=0,f=o.length;c<f;){l=v[o[c++]];a=o[c++];s=o[c++];if(a){if(a.scope){u=t.$new();nt.$$addScopeInfo(h(l),u)}else{u=t}if(a.transcludeOnThisElement){p=st(t,a.transclude,r)}else if(!a.templateOnThisElement&&r){p=r}else if(!r&&e){p=st(t,e)}else{p=null}a(s,u,l,i,p)}else if(s){s(t,l.childNodes,undefined,r)}}}}function at(t,e,n){var i=t[e];var r=i.parentNode;var a;if(i.nodeType!==ee){return}while(true){a=r?i.nextSibling:t[e+1];if(!a||a.nodeType!==ee){break}i.nodeValue=i.nodeValue+a.nodeValue;if(a.parentNode){a.parentNode.removeChild(a)}if(n&&a===t[e+1]){t.splice(e+1,1)}}}function st(t,e,n){function i(i,r,a,o,s){if(!i){i=t.$new(false,s);i.$$transcluded=true}return e(i,r,{parentBoundTranscludeFn:n,transcludeControllers:a,futureParentElement:o})}var r=i.$$slots=Zt();for(var a in e.$$slots){if(e.$$slots[a]){r[a]=st(t,e.$$slots[a],n)}else{r[a]=null}}return i}function lt(t,e,n,i,r){var a=t.nodeType,s=n.$attr,l,u,c;switch(a){case Jt:u=ct(t);St(e,Kn(u),"E",i,r);for(var f,h,d,p,v,g,m=t.attributes,_=0,y=m&&m.length;_<y;_++){var b=false;var w=false;f=m[_];h=f.name;v=f.value;p=Kn(h);g=J.test(p);if(g){h=h.replace(qn,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()})}var x=p.match(tt);if(x&&Ct(x[1])){b=h;w=h.substr(0,h.length-5)+"end";h=h.substr(0,h.length-6)}d=Kn(h.toLowerCase());s[d]=h;if(g||!n.hasOwnProperty(d)){n[d]=v;if(nn(t,d)){n[d]=true}}Lt(t,e,v,d,g);St(e,d,"A",i,r,b,w)}if(u==="input"&&t.getAttribute("type")==="hidden"){t.setAttribute("autocomplete","off")}if(!L)break;c=t.className;if(U(c)){c=c.animVal}if(V(c)&&c!==""){while(l=o.exec(c)){d=Kn(l[2]);if(St(e,d,"C",i,r)){n[d]=ot(l[3])}c=c.substr(l.index+l[0].length)}}break;case ee:Rt(e,t.nodeValue);break;case ne:if(!A)break;ut(t,e,n,i,r);break}e.sort(Tt);return e}function ut(t,e,n,i,r){try{var o=a.exec(t.nodeValue);if(o){var s=Kn(o[1]);if(St(e,s,"M",i,r)){n[s]=ot(o[2])}}}catch(t){}}function ft(t,e,n){var i=[];var r=0;if(e&&t.hasAttribute&&t.hasAttribute(e)){do{if(!t){throw Vn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n)}if(t.nodeType===Jt){if(t.hasAttribute(e))r++;if(t.hasAttribute(n))r--}i.push(t);t=t.nextSibling}while(r>0)}else{i.push(t)}return h(i)}function dt(t,e,n){return function i(r,a,o,s,l){a=ft(a[0],e,n);return t(r,a,o,s,l)}}function gt(t,e,n,i,r,a){var o;if(t){return nt(e,n,i,r,a)}return function t(){if(!o){o=nt(e,n,i,r,a);e=n=a=null}return o.apply(this,arguments)}}function mt(t,e,n,i,r,a,o,s,l){l=l||{};var u=-Number.MAX_VALUE,c=l.newScopeDirective,f=l.controllerDirectives,d=l.newIsolateScopeDirective,v=l.templateDirective,g=l.nonTlbTranscludeDirective,m=false,_=false,y=l.hasElementTranscludeDirective,b=n.$$element=h(e),w,x,S,E=a,O=i,T,M=false,I=false,N;for(var A=0,L=t.length;A<L;A++){w=t[A];var P=w.$$start;var D=w.$$end;if(P){b=ft(e,P,D)}S=undefined;if(u>w.priority){break}N=w.scope;if(N){if(!w.templateUrl){if(U(N)){It("new/isolated scope",d||c,w,b);d=w}else{It("new/isolated scope",d,w,b)}}c=c||w}x=w.name;if(!M&&(w.replace&&(w.templateUrl||w.template)||w.transclude&&!w.$$tlb)){var j;for(var k=A+1;j=t[k++];){if(j.transclude&&!j.$$tlb||j.replace&&(j.templateUrl||j.template)){I=true;break}}M=true}if(!w.templateUrl&&w.controller){f=f||Zt();It("'"+x+"' controller",f[x],w,b);f[x]=w}N=w.transclude;if(N){m=true;if(!w.$$tlb){It("transclusion",g,w,b);g=w}if(N==="element"){y=true;u=w.priority;S=b;b=n.$$element=h(nt.$$createComment(x,n[x]));e=b[0];Pt(r,yt(S),e);O=gt(I,S,i,u,E&&E.name,{nonTlbTranscludeDirective:g})}else{var F=Zt();if(!U(N)){S=h(Pe(e)).contents()}else{S=[];var G=Zt();var V=Zt();C(N,function(t,e){var n=t.charAt(0)==="?";t=n?t.substring(1):t;G[t]=e;F[e]=null;V[e]=n});C(b.contents(),function(t){var e=G[Kn(ct(t))];if(e){V[e]=true;F[e]=F[e]||[];F[e].push(t)}else{S.push(t)}});C(V,function(t,e){if(!t){throw Vn("reqslot","Required transclusion slot `{0}` was not filled.",e)}});for(var H in F){if(F[H]){F[H]=gt(I,F[H],i)}}}b.empty();O=gt(I,S,i,undefined,undefined,{needsNewScope:w.$$isolateScope||w.$$newScope});O.$$slots=F}}if(w.template){_=true;It("template",v,w,b);v=w;N=q(w.template)?w.template(b,n):w.template;N=Q(N);if(w.replace){E=w;if(Oe(N)){S=[]}else{S=ti(Nt(w.templateNamespace,ot(N)))}e=S[0];if(S.length!==1||e.nodeType!==Jt){throw Vn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",x,"")}Pt(r,b,e);var z={$attr:{}};var W=lt(e,[],z);var X=t.splice(A+1,t.length-(A+1));if(d||c){xt(W,d,c)}t=t.concat(W).concat(X);Et(n,z);L=t.length}else{b.html(N)}}if(w.templateUrl){_=true;It("template",v,w,b);v=w;if(w.replace){E=w}tt=Ot(t.splice(A,t.length-A),b,n,r,m&&O,o,s,{controllerDirectives:f,newScopeDirective:c!==w&&c,newIsolateScopeDirective:d,templateDirective:v,nonTlbTranscludeDirective:g});L=t.length}else if(w.compile){try{T=w.compile(b,n,O);var K=w.$$originalDirective||w;if(q(T)){J(null,bt(K,T),P,D)}else if(T){J(bt(K,T.pre),bt(K,T.post),P,D)}}catch(t){p(t,Mt(b))}}if(w.terminal){tt.terminal=true;u=Math.max(u,w.priority)}}tt.scope=c&&c.scope===true;tt.transcludeOnThisElement=m;tt.templateOnThisElement=_;tt.transclude=O;l.hasElementTranscludeDirective=y;return tt;function J(t,e,n,i){if(t){if(n)t=dt(t,n,i);t.require=w.require;t.directiveName=x;if(d===w||w.$$isolateScope){t=Dt(t,{isolateScope:true})}o.push(t)}if(e){if(n)e=dt(e,n,i);e.require=w.require;e.directiveName=x;if(d===w||w.$$isolateScope){e=Dt(e,{isolateScope:true})}s.push(e)}}function tt(t,i,r,a,l){var u,g,m,_,b,w,x,S,E,O;if(e===r){E=n;S=n.$$element}else{S=h(r);E=new Y(S,n)}b=i;if(d){_=i.$new(true)}else if(c){b=i.$parent}if(l){x=L;x.$$boundTransclude=l;x.isSlotFilled=function(t){return!!l.$$slots[t]}}if(f){w=wt(S,E,x,f,_,i,d)}if(d){nt.$$addScopeInfo(S,_,true,!(v&&(v===d||v===d.$$originalDirective)));nt.$$addScopeClass(S,true);_.$$isolateBindings=d.$$isolateBindings;O=Ft(i,E,_,_.$$isolateBindings,d);if(O.removeWatches){_.$on("$destroy",O.removeWatches)}}for(var T in w){var M=f[T];var I=w[T];var N=M.$$bindings.bindToController;I.instance=I();S.data("$"+M.name+"Controller",I.instance);I.bindingInfo=Ft(b,E,I.instance,N,M)}C(f,function(t,e){var n=t.require;if(t.bindToController&&!B(n)&&U(n)){R(w[e].instance,_t(e,n,S,w))}});C(w,function(t){var e=t.instance;if(q(e.$onChanges)){try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){p(t)}}if(q(e.$onInit)){try{e.$onInit()}catch(t){p(t)}}if(q(e.$doCheck)){b.$watch(function(){e.$doCheck()});e.$doCheck()}if(q(e.$onDestroy)){b.$on("$destroy",function t(){e.$onDestroy()})}});for(u=0,g=o.length;u<g;u++){m=o[u];jt(m,m.isolateScope?_:i,S,E,m.require&&_t(m.directiveName,m.require,S,w),x)}var A=i;if(d&&(d.template||d.templateUrl===null)){A=_}if(t){t(A,r.childNodes,undefined,l)}for(u=s.length-1;u>=0;u--){m=s[u];jt(m,m.isolateScope?_:i,S,E,m.require&&_t(m.directiveName,m.require,S,w),x)}C(w,function(t){var e=t.instance;if(q(e.$postLink)){e.$postLink()}});function L(t,e,n,i){var r;if(!Z(t)){i=n;n=e;e=t;t=undefined}if(y){r=w}if(!n){n=y?S.parent():S}if(i){var a=l.$$slots[i];if(a){return a(t,e,r,n,A)}else if($(a)){throw Vn("noslot",'No parent directive that requires a transclusion with slot name "{0}". '+"Element: {1}",i,Mt(S))}}else{return l(t,e,r,n,A)}}}}function _t(t,e,n,i){var r;if(V(e)){var a=e.match(c);var o=e.substring(a[0].length);var s=a[1]||a[3];var l=a[2]==="?";if(s==="^^"){n=n.parent()}else{r=i&&i[o];r=r&&r.instance}if(!r){var u="$"+o+"Controller";r=s?n.inheritedData(u):n.data(u)}if(!r&&!l){throw Vn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",o,t)}}else if(B(e)){r=[];for(var f=0,h=e.length;f<h;f++){r[f]=_t(t,e[f],n,i)}}else if(U(e)){r={};C(e,function(e,a){r[a]=_t(t,e,n,i)})}return r||null}function wt(t,e,n,i,r,a,o){var s=Zt();for(var l in i){var u=i[l];var c={$scope:u===o||u.$$isolateScope?r:a,$element:t,$attrs:e,$transclude:n};var f=u.controller;if(f==="@"){f=e[u.name]}var h=y(f,c,true,u.controllerAs);s[u.name]=h;t.data("$"+u.name+"Controller",h.instance)}return s}function xt(t,e,n){for(var i=0,r=t.length;i<r;i++){t[i]=P(t[i],{$$isolateScope:e,$$newScope:n})}}function St(e,n,a,o,s,l,u){if(n===s)return null;var c=null;if(i.hasOwnProperty(n)){for(var f,h=t.get(n+r),d=0,p=h.length;d<p;d++){f=h[d];if(($(o)||o>f.priority)&&f.restrict.indexOf(a)!==-1){if(l){f=P(f,{$$start:l,$$end:u})}if(!f.$$bindings){var v=f.$$bindings=g(f,f.name);if(U(v.isolateScope)){f.$$isolateBindings=v.isolateScope}}e.push(f);c=f}}}return c}function Ct(e){if(i.hasOwnProperty(e)){for(var n,a=t.get(e+r),o=0,s=a.length;o<s;o++){n=a[o];if(n.multiElement){return true}}}return false}function Et(t,e){var n=e.$attr,i=t.$attr;C(t,function(i,r){if(r.charAt(0)!=="$"){if(e[r]&&e[r]!==i){if(i.length){i+=(r==="style"?";":" ")+e[r]}else{i=e[r]}}t.$set(r,i,true,n[r])}});C(e,function(e,r){if(!t.hasOwnProperty(r)&&r.charAt(0)!=="$"){t[r]=e;if(r!=="class"&&r!=="style"){i[r]=n[r]}}})}function Ot(t,e,n,i,r,a,o,s){var l=[],u,c,f=e[0],d=t.shift(),g=P(d,{templateUrl:null,transclude:null,replace:null,$$originalDirective:d}),m=q(d.templateUrl)?d.templateUrl(e,n):d.templateUrl,_=d.templateNamespace;e.empty();v(m).then(function(p){var v,y,b,w;p=Q(p);if(d.replace){if(Oe(p)){b=[]}else{b=ti(Nt(_,ot(p)))}v=b[0];if(b.length!==1||v.nodeType!==Jt){throw Vn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",d.name,m)}y={$attr:{}};Pt(i,e,v);var x=lt(v,[],y);if(U(d.scope)){xt(x,true)}t=x.concat(t);Et(n,y)}else{v=f;e.html(p)}t.unshift(g);u=mt(t,v,n,r,e,d,a,o,s);C(i,function(t,n){if(t===v){i[n]=e[0]}});c=rt(e[0].childNodes,r);while(l.length){var S=l.shift(),E=l.shift(),O=l.shift(),T=l.shift(),M=e[0];if(S.$$destroyed)continue;if(E!==f){var I=E.className;if(!(s.hasElementTranscludeDirective&&d.replace)){M=Pe(v)}Pt(O,h(E),M);z(h(M),I)}if(u.transcludeOnThisElement){w=st(S,u.transclude,T)}else{w=T}u(c,S,M,i,w)}l=null}).catch(function(t){if(W(t)){p(t)}});return function t(e,n,i,r,a){var o=a;if(n.$$destroyed)return;if(l){l.push(n,i,r,o)}else{if(u.transcludeOnThisElement){o=st(n,u.transclude,a)}u(c,n,i,r,o)}}}function Tt(t,e){var n=e.priority-t.priority;if(n!==0)return n;if(t.name!==e.name)return t.name<e.name?-1:1;return t.index-e.index}function It(t,e,n,i){function r(t){return t?" (module: "+t+")":""}if(e){throw Vn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,r(e.$$moduleName),n.name,r(n.$$moduleName),t,Mt(i))}}function Rt(t,e){var i=n(e,true);if(i){t.push({priority:0,compile:function t(e){var n=e.parent(),r=!!n.length;if(r)nt.$$addBindingClass(n);return function t(e,n){var a=n.parent();if(!r)nt.$$addBindingClass(a);nt.$$addBindingInfo(a,i.expressions);e.$watch(i,function t(e){n[0].nodeValue=e})}}})}}function Nt(t,n){t=u(t||"html");switch(t){case"svg":case"math":var i=e.document.createElement("div");i.innerHTML="<"+t+">"+n+"</"+t+">";return i.childNodes[0].childNodes;default:return n}}function At(t,e){if(e==="srcdoc"){return O.HTML}var n=ct(t);if(e==="src"||e==="ngSrc"){if(["img","video","audio","source","track"].indexOf(n)===-1){return O.RESOURCE_URL}return O.MEDIA_URL}else if(e==="xlinkHref"){if(n==="image")return O.MEDIA_URL;if(n==="a")return O.URL;return O.RESOURCE_URL}else if(n==="form"&&e==="action"||n==="base"&&e==="href"||n==="link"&&e==="href"){return O.RESOURCE_URL}else if(n==="a"&&(e==="href"||e==="ngHref")){return O.URL}}function Lt(t,e,i,r,a){var o=At(t,r);var l=!a;var u=s[r]||a;var c=n(i,l,o,u);if(!c)return;if(r==="multiple"&&ct(t)==="select"){throw Vn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Mt(t))}if(d.test(r)){throw Vn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the "+"ng- versions (such as ng-click instead of onclick) instead.")}e.push({priority:100,compile:function(){return{pre:function t(e,a,s){var l=s.$$observers||(s.$$observers=Zt());var f=s[r];if(f!==i){c=f&&n(f,true,o,u);i=f}if(!c)return;s[r]=c(e);(l[r]||(l[r]=[])).$$inter=true;(s.$$observers&&s.$$observers[r].$$scope||e).$watch(c,function t(e,n){if(r==="class"&&e!==n){s.$updateClass(e,n)}else{s.$set(r,e)}})}}}})}function Pt(t,n,i){var r=n[0],a=n.length,o=r.parentNode,s,l;if(t){for(s=0,l=t.length;s<l;s++){if(t[s]===r){t[s++]=i;for(var u=s,c=u+a-1,f=t.length;u<f;u++,c++){if(c<f){t[u]=t[c]}else{delete t[u]}}t.length-=a-1;if(t.context===r){t.context=i}break}}}if(o){o.replaceChild(i,r)}var d=e.document.createDocumentFragment();for(s=0;s<a;s++){d.appendChild(n[s])}if(h.hasData(r)){h.data(i,h.data(r));h(r).off("$destroy")}h.cleanData(d.querySelectorAll("*"));for(s=1;s<a;s++){delete n[s]}n[0]=i;n.length=1}function Dt(t,e){return R(function(){return t.apply(null,arguments)},t,e)}function jt(t,e,n,i,r,a){try{t(e,n,i,r,a)}catch(t){p(t,Mt(n))}}function kt(t,e){if(x){throw Vn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}}function Ft(t,e,i,r,a){var o=[];var s={};var u;C(r,function r(u,f){var h=u.attrName,d=u.optional,p=u.mode,v,g,m,y,b;switch(p){case"@":if(!d&&!l.call(e,h)){kt(h,a.name);i[f]=e[h]=undefined}b=e.$observe(h,function(t){if(V(t)||et(t)){var e=i[f];c(f,t,e);i[f]=t}});e.$$observers[h].$$scope=t;v=e[h];if(V(v)){i[f]=n(v)(t)}else if(et(v)){i[f]=v}s[f]=new Wn(zn,i[f]);o.push(b);break;case"=":if(!l.call(e,h)){if(d)break;kt(h,a.name);e[h]=undefined}if(d&&!e[h])break;g=_(e[h]);if(g.literal){y=vt}else{y=pt}m=g.assign||function(){v=i[f]=g(t);throw Vn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[h],h,a.name)};v=i[f]=g(t);var w=function e(n){if(!y(n,i[f])){if(!y(n,v)){i[f]=n}else{m(t,n=i[f])}}v=n;return v};w.$stateful=true;if(u.collection){b=t.$watchCollection(e[h],w)}else{b=t.$watch(_(e[h],w),null,g.literal)}o.push(b);break;case"<":if(!l.call(e,h)){if(d)break;kt(h,a.name);e[h]=undefined}if(d&&!e[h])break;g=_(e[h]);var x=g.literal;var S=i[f]=g(t);s[f]=new Wn(zn,i[f]);b=t.$watch(g,function t(e,n){if(n===e){if(n===S||x&&vt(n,S)){return}n=S}c(f,e,n);i[f]=e});o.push(b);break;case"&":if(!d&&!l.call(e,h)){kt(h,a.name)}g=e.hasOwnProperty(h)?_(e[h]):D;if(g===D&&d)break;i[f]=function(e){return g(t,e)};break}});function c(e,n,r){if(q(i.$onChanges)&&!pt(n,r)){if(!F){t.$$postDigest(G);F=[]}if(!u){u={};F.push(f)}if(u[e]){r=u[e].previousValue}u[e]=new Wn(r,n)}}function f(){i.$onChanges(u);u=undefined}return{initialChanges:s,removeWatches:o.length&&function t(){for(var e=0,n=o.length;e<n;++e){o[e]()}}}}}]}function Wn(t,e){this.previousValue=t;this.currentValue=e}Wn.prototype.isFirstChange=function(){return this.previousValue===zn};var qn=/^((?:x|data)[:\-_])/i;var Xn=/[:\-_]+(.)/g;function Kn(t){return t.replace(qn,"").replace(Xn,function(t,e,n){return n?e.toUpperCase():e})}function Zn(t,e,n,i){}function Qn(t,e,n,i,r){}function Jn(t,e){var n="",i=t.split(/\s+/),r=e.split(/\s+/);t:for(var a=0;a<i.length;a++){var o=i[a];for(var s=0;s<r.length;s++){if(o===r[s])continue t}n+=(n.length>0?" ":"")+o}return n}function ti(t){t=h(t);var e=t.length;if(e<=1){return t}while(e--){var n=t[e];if(n.nodeType===ne||n.nodeType===ee&&n.nodeValue.trim()===""){v.call(t,e,1)}}return t}var ei=a("$controller");var ni=/^(\S+)(\s+as\s+([\w$]+))?$/;function ii(t,e){if(e&&V(e))return e;if(V(t)){var n=ni.exec(t);if(n)return n[3]}}function ri(){var t={};this.has=function(e){return t.hasOwnProperty(e)};this.register=function(e,n){qt(e,"controller");if(U(e)){R(t,e)}else{t[e]=n}};this.$get=["$injector",function(e){return function i(r,a,o,s){var l,u,c,f;o=o===true;if(s&&V(s)){f=s}if(V(r)){u=r.match(ni);if(!u){throw ei("ctrlfmt","Badly formed controller string '{0}'. "+"Must match `__name__ as __id__` or `__name__`.",r)}c=u[1];f=f||u[3];r=t.hasOwnProperty(c)?t[c]:Xt(a.$scope,c,true);if(!r){throw ei("ctrlreg","The controller with the name '{0}' is not registered.",c)}Wt(r,c,true)}if(o){var h=(B(r)?r[r.length-1]:r).prototype;l=Object.create(h||null);if(f){n(a,f,l,c||r.name)}return R(function t(){var i=e.invoke(r,l,a,c);if(i!==l&&(U(i)||q(i))){l=i;if(f){n(a,f,l,c||r.name)}}return l},{instance:l,identifier:f})}l=e.instantiate(r,a,c);if(f){n(a,f,l,c||r.name)}return l};function n(t,e,n,i){if(!(t&&U(t.$scope))){throw a("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,e)}t.$scope[e]=n}}]}function ai(){this.$get=["$window",function(t){return h(t.document)}]}function oi(){this.$get=["$document","$rootScope",function(t,e){var n=t[0];var i=n&&n.hidden;t.on("visibilitychange",r);e.$on("$destroy",function(){t.off("visibilitychange",r)});function r(){i=n.hidden}return function(){return i}}]}function si(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var li=function(){this.$get=["$document",function(t){return function(e){if(e){if(!e.nodeType&&e instanceof h){e=e[0]}}else{e=t[0].body}return e.offsetWidth+1}}]};var ui="application/json";var ci={"Content-Type":ui+";charset=utf-8"};var fi=/^\[|^\{(?!\{)/;var hi={"[":/]$/,"{":/}$/};var di=/^\)]\}',?\n/;var pi=a("$http");function vi(t){if(U(t)){return z(t)?t.toISOString():xt(t)}return t}function gi(){this.$get=function(){return function t(e){if(!e)return"";var n=[];E(e,function(t,e){if(t===null||$(t)||q(t))return;if(B(t)){C(t,function(t){n.push(Lt(e)+"="+Lt(vi(t)))})}else{n.push(Lt(e)+"="+Lt(vi(t)))}});return n.join("&")}}}function mi(){this.$get=function(){return function t(e){if(!e)return"";var n=[];i(e,"",true);return n.join("&");function i(t,e,r){if(B(t)){C(t,function(t,n){i(t,e+"["+(U(t)?n:"")+"]")})}else if(U(t)&&!z(t)){E(t,function(t,n){i(t,e+(r?"":"[")+n+(r?"":"]"))})}else{if(q(t)){t=t()}n.push(Lt(e)+"="+(t==null?"":Lt(vi(t))))}}}}}function _i(t,e){if(V(t)){var n=t.replace(di,"").trim();if(n){var i=e("Content-Type");var r=i&&i.indexOf(ui)===0;if(r||yi(n)){try{t=St(n)}catch(e){if(!r){return t}throw pi("baddata",'Data must be a valid JSON object. Received: "{0}". '+'Parse error: "{1}"',t,e)}}}}return t}function yi(t){var e=t.match(fi);return e&&hi[e[0]].test(t)}function bi(t){var e=Zt(),n;function i(t,n){if(t){e[t]=e[t]?e[t]+", "+n:n}}if(V(t)){C(t.split("\n"),function(t){n=t.indexOf(":");i(u(ot(t.substr(0,n))),ot(t.substr(n+1)))})}else if(U(t)){C(t,function(t,e){i(u(e),ot(t))})}return e}function wi(t){var e;return function(n){if(!e)e=bi(t);if(n){var i=e[u(n)];if(i===undefined){i=null}return i}return e}}function xi(t,e,n,i){if(q(i)){return i(t,e,n)}C(i,function(i){t=i(t,e,n)});return t}function Si(t){return 200<=t&&t<300}function Ci(){var t=this.defaults={transformResponse:[_i],transformRequest:[function(t){return U(t)&&!Q(t)&&!tt(t)&&!J(t)?xt(t):t}],headers:{common:{Accept:"application/json, text/plain, */*"},post:oe(ci),put:oe(ci),patch:oe(ci)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"};var e=false;this.useApplyAsync=function(t){if(G(t)){e=!!t;return this}return e};var n=this.interceptors=[];var i=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(r,o,s,l,f,h,d,p){var v=l("$http");t.paramSerializer=V(t.paramSerializer)?d.get(t.paramSerializer):t.paramSerializer;var g=[];C(n,function(t){g.unshift(V(t)?d.get(t):d.invoke(t))});var m=ta(i);function _(e){if(!U(e)){throw a("$http")("badreq","Http request configuration must be an object.  Received: {0}",e)}if(!V(p.valueOf(e.url))){throw a("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",e.url)}var n=R({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},e);n.headers=m(e);n.method=c(n.method);n.paramSerializer=V(n.paramSerializer)?d.get(n.paramSerializer):n.paramSerializer;r.$$incOutstandingRequestCount();var i=[];var o=[];var s=h.resolve(n);C(g,function(t){if(t.request||t.requestError){i.unshift(t.request,t.requestError)}if(t.response||t.responseError){o.push(t.response,t.responseError)}});s=l(s,i);s=s.then(_);s=l(s,o);s=s.finally(f);return s;function l(t,e){for(var n=0,i=e.length;n<i;){var r=e[n++];var a=e[n++];t=t.then(r,a)}e.length=0;return t}function f(){r.$$completeOutstandingRequest(D)}function v(t,e){var n,i={};C(t,function(t,r){if(q(t)){n=t(e);if(n!=null){i[r]=n}}else{i[r]=t}});return i}function m(e){var n=t.headers,i=R({},e.headers),r,a,o;n=R({},n.common,n[u(e.method)]);t:for(r in n){a=u(r);for(o in i){if(u(o)===a){continue t}}i[r]=n[r]}return v(i,oe(e))}function _(e){var n=e.headers;var i=xi(e.data,wi(n),undefined,e.transformRequest);if($(i)){C(n,function(t,e){if(u(e)==="content-type"){delete n[e]}})}if($(e.withCredentials)&&!$(t.withCredentials)){e.withCredentials=t.withCredentials}return w(e,i).then(y,y)}function y(t){var e=R({},t);e.data=xi(t.data,t.headers,t.status,n.transformResponse);return Si(t.status)?e:h.reject(e)}}_.pendingRequests=[];y("get","delete","head","jsonp");b("post","put","patch");_.defaults=t;return _;function y(t){C(arguments,function(t){_[t]=function(e,n){return _(R({},n||{},{method:t,url:e}))}})}function b(t){C(arguments,function(t){_[t]=function(e,n,i){return _(R({},i||{},{method:t,url:e,data:n}))}})}function w(n,i){var r=h.defer(),a=r.promise,l,c,d=n.headers,g=u(n.method)==="jsonp",y=n.url;if(g){y=p.getTrustedResourceUrl(y)}else if(!V(y)){y=p.valueOf(y)}y=x(y,n.paramSerializer(n.params));if(g){y=S(y,n.jsonpCallbackParam)}_.pendingRequests.push(n);a.then(M,M);if((n.cache||t.cache)&&n.cache!==false&&(n.method==="GET"||n.method==="JSONP")){l=U(n.cache)?n.cache:U(t.cache)?t.cache:v}if(l){c=l.get(y);if(G(c)){if(nt(c)){c.then(T,T)}else{if(B(c)){O(c[1],c[0],oe(c[2]),c[3],c[4])}else{O(c,200,{},"OK","complete")}}}else{l.put(y,a)}}if($(c)){var b=m(n.url)?s()[n.xsrfCookieName||t.xsrfCookieName]:undefined;if(b){d[n.xsrfHeaderName||t.xsrfHeaderName]=b}o(n.method,y,i,E,d,n.timeout,n.withCredentials,n.responseType,w(n.eventHandlers),w(n.uploadEventHandlers))}return a;function w(t){if(t){var n={};C(t,function(t,i){n[i]=function(n){if(e){f.$applyAsync(i)}else if(f.$$phase){i()}else{f.$apply(i)}function i(){t(n)}}});return n}}function E(t,n,i,r,a){if(l){if(Si(t)){l.put(y,[t,n,bi(i),r,a])}else{l.remove(y)}}function o(){O(n,t,i,r,a)}if(e){f.$applyAsync(o)}else{o();if(!f.$$phase)f.$apply()}}function O(t,e,i,a,o){e=e>=-1?e:0;(Si(e)?r.resolve:r.reject)({data:t,status:e,headers:wi(i),config:n,statusText:a,xhrStatus:o})}function T(t){O(t.data,t.status,oe(t.headers()),t.statusText,t.xhrStatus)}function M(){var t=_.pendingRequests.indexOf(n);if(t!==-1)_.pendingRequests.splice(t,1)}}function x(t,e){if(e.length>0){t+=(t.indexOf("?")===-1?"?":"&")+e}return t}function S(t,e){var n=t.split("?");if(n.length>2){throw pi("badjsonp",'Illegal use more than one "?", in url, "{1}"',t)}var i=Rt(n[1]);C(i,function(n,i){if(n==="JSON_CALLBACK"){throw pi("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t)}if(i===e){throw pi("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)}});t+=(t.indexOf("?")===-1?"?":"&")+e+"=JSON_CALLBACK";return t}}]}function Ei(){this.$get=function(){return function t(){return new e.XMLHttpRequest}}}function Oi(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,i){return Ti(t,i,t.defer,e,n[0])}]}function Ti(t,e,n,i,r){return function(r,o,s,l,c,f,h,d,p,v){o=o||t.url();if(u(r)==="jsonp"){var g=i.createCallback(o);var m=a(o,g,function(t,e){var n=t===200&&i.getResponse(g);O(l,t,n,"",e,"complete");i.removeCallback(g)})}else{var _=e(r,o);var y=false;_.open(r,o,true);C(c,function(t,e){if(G(t)){_.setRequestHeader(e,t)}});_.onload=function t(){var e=_.statusText||"";var n="response"in _?_.response:_.responseText;var i=_.status===1223?204:_.status;if(i===0){i=n?200:Zr(o).protocol==="file"?404:0}O(l,i,n,_.getAllResponseHeaders(),e,"complete")};var b=function(){O(l,-1,null,null,"","error")};var w=function(){O(l,-1,null,null,"",y?"timeout":"abort")};var x=function(){O(l,-1,null,null,"","timeout")};_.onerror=b;_.ontimeout=x;_.onabort=w;C(p,function(t,e){_.addEventListener(e,t)});C(v,function(t,e){_.upload.addEventListener(e,t)});if(h){_.withCredentials=true}if(d){try{_.responseType=d}catch(t){if(d!=="json"){throw t}}}_.send($(s)?null:s)}if(f>0){var S=n(function(){E("timeout")},f)}else if(nt(f)){f.then(function(){E(G(f.$$timeoutId)?"timeout":"abort")})}function E(t){y=t==="timeout";if(m){m()}if(_){_.abort()}}function O(t,e,i,r,a,o){if(G(S)){n.cancel(S)}m=_=null;t(e,i,r,a,o)}};function a(t,e,n){t=t.replace("JSON_CALLBACK",e);var a=r.createElement("script"),o=null;a.type="text/javascript";a.src=t;a.async=true;o=function(t){a.removeEventListener("load",o);a.removeEventListener("error",o);r.body.removeChild(a);a=null;var s=-1;var l="unknown";if(t){if(t.type==="load"&&!i.wasCalled(e)){t={type:"error"}}l=t.type;s=t.type==="error"?404:200}if(n){n(s,l)}};a.addEventListener("load",o);a.addEventListener("error",o);r.body.appendChild(a);return o}}var Mi=b.$interpolateMinErr=a("$interpolate");Mi.throwNoconcat=function(t){throw Mi("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows "+"interpolations that concatenate multiple expressions when a trusted value is "+"required.  See http://docs.angularjs.org/api/ng.$sce",t)};Mi.interr=function(t,e){return Mi("interr","Can't interpolate: {0}\n{1}",t,e.toString())};function Ii(){var t="{{";var e="}}";this.startSymbol=function(e){if(e){t=e;return this}return t};this.endSymbol=function(t){if(t){e=t;return this}return e};this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){var a=t.length,o=e.length,s=new RegExp(t.replace(/./g,u),"g"),l=new RegExp(e.replace(/./g,u),"g");function u(t){return"\\\\\\"+t}function c(n){return n.replace(s,t).replace(l,e)}function f(t,e,n,i){var r=t.$watch(function t(e){r();return i(e)},e,n);return r}function h(s,l,u,h){var d=u===r.URL||u===r.MEDIA_URL;if(!s.length||s.indexOf(t)===-1){if(l&&!d)return;var p=c(s);if(d){p=r.getTrusted(u,p)}var v=k(p);v.exp=s;v.expressions=[];v.$$watchDelegate=f;return v}h=!!h;var g,m,_=0,y=[],b,w=s.length,x,S=[],C=[],E;while(_<w){if((g=s.indexOf(t,_))!==-1&&(m=s.indexOf(e,g+a))!==-1){if(_!==g){S.push(c(s.substring(_,g)))}x=s.substring(g+a,m);y.push(x);_=m+o;C.push(S.length);S.push("")}else{if(_!==w){S.push(c(s.substring(_)))}break}}E=S.length===1&&C.length===1;var O=d&&E?undefined:M;b=y.map(function(t){return n(t,O)});if(!l||y.length){var T=function(t){for(var e=0,n=y.length;e<n;e++){if(h&&$(t[e]))return;S[C[e]]=t[e]}if(d){return r.getTrusted(u,E?S[0]:S.join(""))}else if(u&&S.length>1){Mi.throwNoconcat(s)}return S.join("")};return R(function t(e){var n=0;var r=y.length;var a=new Array(r);try{for(;n<r;n++){a[n]=b[n](e)}return T(a)}catch(t){i(Mi.interr(s,t))}},{exp:s,expressions:y,$$watchDelegate:function(t,e){var n;return t.$watchGroup(b,function i(r,a){var o=T(r);e.call(this,o,r!==a?n:o,t);n=o})}})}function M(t){try{t=u&&!d?r.getTrusted(u,t):r.valueOf(t);return h&&!G(t)?t:Qt(t)}catch(t){i(Mi.interr(s,t))}}}h.startSymbol=function(){return t};h.endSymbol=function(){return e};return h}]}var Ri=a("$interval");function Ni(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,i,r){var a={};function o(o,s,l,u){var c=arguments.length>4,f=c?yt(arguments,4):[],h=e.setInterval,d=e.clearInterval,p=0,v=G(u)&&!u,g=(v?i:n).defer(),m=g.promise;l=G(l)?l:0;m.$$intervalId=h(function e(){if(v){r.defer(_)}else{t.$evalAsync(_)}g.notify(p++);if(l>0&&p>=l){g.resolve(p);d(m.$$intervalId);delete a[m.$$intervalId]}if(!v)t.$apply()},s);a[m.$$intervalId]=g;return m;function _(){if(!c){o(p)}else{o.apply(null,f)}}}o.cancel=function(t){if(!t)return false;if(!t.hasOwnProperty("$$intervalId")){throw Ri("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.")}if(!a.hasOwnProperty(t.$$intervalId))return false;var n=t.$$intervalId;var i=a[n];Rr(i.promise);i.reject("canceled");e.clearInterval(n);delete a[n];return true};return o}]}var Ai=function(){this.$get=function(){var t=b.callbacks;var e={};function n(t){var e=function(t){e.data=t;e.called=true};e.id=t;return e}return{createCallback:function(i){var r="_"+(t.$$counter++).toString(36);var a="angular.callbacks."+r;var o=n(r);e[a]=t[r]=o;return a},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){var i=e[n];delete t[i.id];delete e[n]}}}};var Li=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Pi={http:80,https:443,ftp:21};var Di=a("$location");function ji(t){var e=t.split("/"),n=e.length;while(n--){e[n]=At(e[n].replace(/%2F/g,"/"))}return e.join("/")}function ki(t,e){var n=t.split("/"),i=n.length;while(i--){n[i]=decodeURIComponent(n[i]);if(e){n[i]=n[i].replace(/\//g,"%2F")}}return n.join("/")}function Fi(t,e){var n=Zr(t);e.$$protocol=n.protocol;e.$$host=n.hostname;e.$$port=A(n.port)||Pi[n.protocol]||null}var $i=/^\s*[\\/]{2,}/;function Gi(t,e,n){if($i.test(t)){throw Di("badpath",'Invalid url "{0}".',t)}var i=t.charAt(0)!=="/";if(i){t="/"+t}var r=Zr(t);var a=i&&r.pathname.charAt(0)==="/"?r.pathname.substring(1):r.pathname;e.$$path=ki(a,n);e.$$search=Rt(r.search);e.$$hash=decodeURIComponent(r.hash);if(e.$$path&&e.$$path.charAt(0)!=="/"){e.$$path="/"+e.$$path}}function Ui(t,e){return t.slice(0,e.length)===e}function Yi(t,e){if(Ui(e,t)){return e.substr(t.length)}}function Vi(t){var e=t.indexOf("#");return e===-1?t:t.substr(0,e)}function Hi(t){return t.replace(/(#.+)|#$/,"$1")}function zi(t){return t.substr(0,Vi(t).lastIndexOf("/")+1)}function Bi(t){return t.substring(0,t.indexOf("/",t.indexOf("//")+2))}function Wi(t,e,n){this.$$html5=true;n=n||"";Fi(t,this);this.$$parse=function(t){var n=Yi(e,t);if(!V(n)){throw Di("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e)}Gi(n,this,true);if(!this.$$path){this.$$path="/"}this.$$compose()};this.$$compose=function(){var t=Nt(this.$$search),n=this.$$hash?"#"+At(this.$$hash):"";this.$$url=ji(this.$$path)+(t?"?"+t:"")+n;this.$$absUrl=e+this.$$url.substr(1);this.$$urlUpdatedByLocation=true};this.$$parseLinkUrl=function(i,r){if(r&&r[0]==="#"){this.hash(r.slice(1));return true}var a,o;var s;if(G(a=Yi(t,i))){o=a;if(n&&G(a=Yi(n,a))){s=e+(Yi("/",a)||a)}else{s=t+o}}else if(G(a=Yi(e,i))){s=e+a}else if(e===i+"/"){s=e}if(s){this.$$parse(s)}return!!s}}function qi(t,e,n){Fi(t,this);this.$$parse=function(i){var r=Yi(t,i)||Yi(e,i);var a;if(!$(r)&&r.charAt(0)==="#"){a=Yi(n,r);if($(a)){a=r}}else{if(this.$$html5){a=r}else{a="";if($(r)){t=i;this.replace()}}}Gi(a,this,false);this.$$path=o(this.$$path,a,t);this.$$compose();function o(t,e,n){var i=/^\/[A-Z]:(\/.*)/;var r;if(Ui(e,n)){e=e.replace(n,"")}if(i.exec(e)){return t}r=i.exec(t);return r?r[1]:t}};this.$$compose=function(){var e=Nt(this.$$search),i=this.$$hash?"#"+At(this.$$hash):"";this.$$url=ji(this.$$path)+(e?"?"+e:"")+i;this.$$absUrl=t+(this.$$url?n+this.$$url:"");this.$$urlUpdatedByLocation=true};this.$$parseLinkUrl=function(e,n){if(Vi(t)===Vi(e)){this.$$parse(e);return true}return false}}function Xi(t,e,n){this.$$html5=true;qi.apply(this,arguments);this.$$parseLinkUrl=function(i,r){if(r&&r[0]==="#"){this.hash(r.slice(1));return true}var a;var o;if(t===Vi(i)){a=i}else if(o=Yi(e,i)){a=t+n+o}else if(e===i+"/"){a=e}if(a){this.$$parse(a)}return!!a};this.$$compose=function(){var e=Nt(this.$$search),i=this.$$hash?"#"+At(this.$$hash):"";this.$$url=ji(this.$$path)+(e?"?"+e:"")+i;this.$$absUrl=t+n+this.$$url;this.$$urlUpdatedByLocation=true}}var Ki={$$absUrl:"",$$html5:false,$$replace:false,absUrl:Zi("$$absUrl"),url:function(t){if($(t)){return this.$$url}var e=Li.exec(t);if(e[1]||t==="")this.path(decodeURIComponent(e[1]));if(e[2]||e[1]||t==="")this.search(e[3]||"");this.hash(e[5]||"");return this},protocol:Zi("$$protocol"),host:Zi("$$host"),port:Zi("$$port"),path:Qi("$$path",function(t){t=t!==null?t.toString():"";return t.charAt(0)==="/"?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(V(t)||H(t)){t=t.toString();this.$$search=Rt(t)}else if(U(t)){t=dt(t,{});C(t,function(e,n){if(e==null)delete t[n]});this.$$search=t}else{throw Di("isrcharg","The first argument of the `$location#search()` call must be a string or an object.")}break;default:if($(e)||e===null){delete this.$$search[t]}else{this.$$search[t]=e}}this.$$compose();return this},hash:Qi("$$hash",function(t){return t!==null?t.toString():""}),replace:function(){this.$$replace=true;return this}};C([Xi,qi,Wi],function(t){t.prototype=Object.create(Ki);t.prototype.state=function(e){if(!arguments.length){return this.$$state}if(t!==Wi||!this.$$html5){throw Di("nostate","History API state support is available only "+"in HTML5 mode and only in browsers supporting HTML5 History API")}this.$$state=$(e)?null:e;this.$$urlUpdatedByLocation=true;return this}});function Zi(t){return function(){return this[t]}}function Qi(t,e){return function(n){if($(n)){return this[t]}this[t]=e(n);this.$$compose();return this}}function Ji(){var t="!",e={enabled:false,requireBase:true,rewriteLinks:true};this.hashPrefix=function(e){if(G(e)){t=e;return this}else{return t}};this.html5Mode=function(t){if(et(t)){e.enabled=t;return this}else if(U(t)){if(et(t.enabled)){e.enabled=t.enabled}if(et(t.requireBase)){e.requireBase=t.requireBase}if(et(t.rewriteLinks)||V(t.rewriteLinks)){e.rewriteLinks=t.rewriteLinks}return this}else{return e}};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,a,o){var s,l,u=i.baseHref(),c=i.url(),f;if(e.enabled){if(!u&&e.requireBase){throw Di("nobase","$location in HTML5 mode requires a <base> tag to be present!")}f=Bi(c)+(u||"/");l=r.history?Wi:Xi}else{f=Vi(c);l=qi}var d=zi(f);s=new l(f,d,"#"+t);s.$$parseLinkUrl(c,c);s.$$state=i.state();var p=/^\s*(javascript|mailto):/i;function v(t,e,n){var r=s.url();var a=s.$$state;try{i.url(t,e,n);s.$$state=i.state()}catch(t){s.url(r);s.$$state=a;throw t}}a.on("click",function(t){var r=e.rewriteLinks;if(!r||t.ctrlKey||t.metaKey||t.shiftKey||t.which===2||t.button===2)return;var o=h(t.target);while(ct(o[0])!=="a"){if(o[0]===a[0]||!(o=o.parent())[0])return}if(V(r)&&$(o.attr(r)))return;var l=o.prop("href");var u=o.attr("href")||o.attr("xlink:href");if(U(l)&&l.toString()==="[object SVGAnimatedString]"){l=Zr(l.animVal).href}if(p.test(l))return;if(l&&!o.attr("target")&&!t.isDefaultPrevented()){if(s.$$parseLinkUrl(l,u)){t.preventDefault();if(s.absUrl()!==i.url()){n.$apply()}}}});if(Hi(s.absUrl())!==Hi(c)){i.url(s.absUrl(),true)}var g=true;i.onUrlChange(function(t,e){if(!Ui(t,d)){o.location.href=t;return}n.$evalAsync(function(){var i=s.absUrl();var r=s.$$state;var a;t=Hi(t);s.$$parse(t);s.$$state=e;a=n.$broadcast("$locationChangeStart",t,i,e,r).defaultPrevented;if(s.absUrl()!==t)return;if(a){s.$$parse(i);s.$$state=r;v(i,false,r)}else{g=false;m(i,r)}});if(!n.$$phase)n.$digest()});n.$watch(function t(){if(g||s.$$urlUpdatedByLocation){s.$$urlUpdatedByLocation=false;var e=Hi(i.url());var a=Hi(s.absUrl());var o=i.state();var l=s.$$replace;var u=e!==a||s.$$html5&&r.history&&o!==s.$$state;if(g||u){g=false;n.$evalAsync(function(){var t=s.absUrl();var i=n.$broadcast("$locationChangeStart",t,e,s.$$state,o).defaultPrevented;if(s.absUrl()!==t)return;if(i){s.$$parse(e);s.$$state=o}else{if(u){v(t,l,o===s.$$state?null:s.$$state)}m(e,o)}})}}s.$$replace=false});return s;function m(t,e){n.$broadcast("$locationChangeSuccess",s.absUrl(),t,s.$$state,e)}}]}function tr(){var t=true,e=this;this.debugEnabled=function(e){if(G(e)){t=e;return this}else{return t}};this.$get=["$window",function(n){var i=f||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:a("log"),info:a("info"),warn:a("warn"),error:a("error"),debug:function(){var n=a("debug");return function(){if(t){n.apply(e,arguments)}}}()};function r(t){if(W(t)){if(t.stack&&i){t=t.message&&t.stack.indexOf(t.message)===-1?"Error: "+t.message+"\n"+t.stack:t.stack}else if(t.sourceURL){t=t.message+"\n"+t.sourceURL+":"+t.line}}return t}function a(t){var e=n.console||{},i=e[t]||e.log||D;return function(){var t=[];C(arguments,function(e){t.push(r(e))});return Function.prototype.apply.call(i,e,t)}}}]}var er=a("$parse");var nr={}.constructor.prototype.valueOf;function ir(t){return t+""}var rr=Zt();C("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){rr[t]=true});var ar={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'};var or=function t(e){this.options=e};or.prototype={constructor:or,lex:function(t){this.text=t;this.index=0;this.tokens=[];while(this.index<this.text.length){var e=this.text.charAt(this.index);if(e==='"'||e==="'"){this.readString(e)}else if(this.isNumber(e)||e==="."&&this.isNumber(this.peek())){this.readNumber()}else if(this.isIdentifierStart(this.peekMultichar())){this.readIdent()}else if(this.is(e,"(){}[].,;:?")){this.tokens.push({index:this.index,text:e});this.index++}else if(this.isWhitespace(e)){this.index++}else{var n=e+this.peek();var i=n+this.peek(2);var r=rr[e];var a=rr[n];var o=rr[i];if(r||a||o){var s=o?i:a?n:e;this.tokens.push({index:this.index,text:s,operator:true});this.index+=s.length}else{this.throwError("Unexpected next character ",this.index,this.index+1)}}}return this.tokens},is:function(t,e){return e.indexOf(t)!==-1},peek:function(t){var e=t||1;return this.index+e<this.text.length?this.text.charAt(this.index+e):false},isNumber:function(t){return"0"<=t&&t<="9"&&typeof t==="string"},isWhitespace:function(t){return t===" "||t==="\r"||t==="\t"||t==="\n"||t==="\v"||t===" "},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||t==="$"},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){if(t.length===1)return t.charCodeAt(0);return(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index);var e=this.peek();if(!e){return t}var n=t.charCodeAt(0);var i=e.charCodeAt(0);if(n>=55296&&n<=56319&&i>=56320&&i<=57343){return t+e}return t},isExpOperator:function(t){return t==="-"||t==="+"||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var i=G(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw er("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,i,this.text)},readNumber:function(){var t="";var e=this.index;while(this.index<this.text.length){var n=u(this.text.charAt(this.index));if(n==="."||this.isNumber(n)){t+=n}else{var i=this.peek();if(n==="e"&&this.isExpOperator(i)){t+=n}else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&t.charAt(t.length-1)==="e"){t+=n}else if(this.isExpOperator(n)&&(!i||!this.isNumber(i))&&t.charAt(t.length-1)==="e"){this.throwError("Invalid exponent")}else{break}}this.index++}this.tokens.push({index:e,text:t,constant:true,value:Number(t)})},readIdent:function(){var t=this.index;this.index+=this.peekMultichar().length;while(this.index<this.text.length){var e=this.peekMultichar();if(!this.isIdentifierContinue(e)){break}this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:true})},readString:function(t){var e=this.index;this.index++;var n="";var i=t;var r=false;while(this.index<this.text.length){var a=this.text.charAt(this.index);i+=a;if(r){if(a==="u"){var o=this.text.substring(this.index+1,this.index+5);if(!o.match(/[\da-f]{4}/i)){this.throwError("Invalid unicode escape [\\u"+o+"]")}this.index+=4;n+=String.fromCharCode(parseInt(o,16))}else{var s=ar[a];n=n+(s||a)}r=false}else if(a==="\\"){r=true}else if(a===t){this.index++;this.tokens.push({index:e,text:i,constant:true,value:n});return}else{n+=a}this.index++}this.throwError("Unterminated quote",e)}};var sr=function t(e,n){this.lexer=e;this.options=n};sr.Program="Program";sr.ExpressionStatement="ExpressionStatement";sr.AssignmentExpression="AssignmentExpression";sr.ConditionalExpression="ConditionalExpression";sr.LogicalExpression="LogicalExpression";sr.BinaryExpression="BinaryExpression";sr.UnaryExpression="UnaryExpression";sr.CallExpression="CallExpression";sr.MemberExpression="MemberExpression";sr.Identifier="Identifier";sr.Literal="Literal";sr.ArrayExpression="ArrayExpression";sr.Property="Property";sr.ObjectExpression="ObjectExpression";sr.ThisExpression="ThisExpression";sr.LocalsExpression="LocalsExpression";sr.NGValueParameter="NGValueParameter";sr.prototype={ast:function(t){this.text=t;this.tokens=this.lexer.lex(t);var e=this.program();if(this.tokens.length!==0){this.throwError("is an unexpected token",this.tokens[0])}return e},program:function(){var t=[];while(true){if(this.tokens.length>0&&!this.peek("}",")",";","]"))t.push(this.expressionStatement());if(!this.expect(";")){return{type:sr.Program,body:t}}}},expressionStatement:function(){return{type:sr.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){var t=this.expression();while(this.expect("|")){t=this.filter(t)}return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!gr(t)){throw er("lval","Trying to assign a value to a non l-value")}t={type:sr.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t=this.logicalOR();var e;var n;if(this.expect("?")){e=this.expression();if(this.consume(":")){n=this.expression();return{type:sr.ConditionalExpression,test:t,alternate:e,consequent:n}}}return t},logicalOR:function(){var t=this.logicalAND();while(this.expect("||")){t={type:sr.LogicalExpression,operator:"||",left:t,right:this.logicalAND()}}return t},logicalAND:function(){var t=this.equality();while(this.expect("&&")){t={type:sr.LogicalExpression,operator:"&&",left:t,right:this.equality()}}return t},equality:function(){var t=this.relational();var e;while(e=this.expect("==","!=","===","!==")){t={type:sr.BinaryExpression,operator:e.text,left:t,right:this.relational()}}return t},relational:function(){var t=this.additive();var e;while(e=this.expect("<",">","<=",">=")){t={type:sr.BinaryExpression,operator:e.text,left:t,right:this.additive()}}return t},additive:function(){var t=this.multiplicative();var e;while(e=this.expect("+","-")){t={type:sr.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()}}return t},multiplicative:function(){var t=this.unary();var e;while(e=this.expect("*","/","%")){t={type:sr.BinaryExpression,operator:e.text,left:t,right:this.unary()}}return t},unary:function(){var t;if(t=this.expect("+","-","!")){return{type:sr.UnaryExpression,operator:t.text,prefix:true,argument:this.unary()}}else{return this.primary()}},primary:function(){var t;if(this.expect("(")){t=this.filterChain();this.consume(")")}else if(this.expect("[")){t=this.arrayDeclaration()}else if(this.expect("{")){t=this.object()}else if(this.selfReferential.hasOwnProperty(this.peek().text)){t=dt(this.selfReferential[this.consume().text])}else if(this.options.literals.hasOwnProperty(this.peek().text)){t={type:sr.Literal,value:this.options.literals[this.consume().text]}}else if(this.peek().identifier){t=this.identifier()}else if(this.peek().constant){t=this.constant()}else{this.throwError("not a primary expression",this.peek())}var e;while(e=this.expect("(","[",".")){if(e.text==="("){t={type:sr.CallExpression,callee:t,arguments:this.parseArguments()};this.consume(")")}else if(e.text==="["){t={type:sr.MemberExpression,object:t,property:this.expression(),computed:true};this.consume("]")}else if(e.text==="."){t={type:sr.MemberExpression,object:t,property:this.identifier(),computed:false}}else{this.throwError("IMPOSSIBLE")}}return t},filter:function(t){var e=[t];var n={type:sr.CallExpression,callee:this.identifier(),arguments:e,filter:true};while(this.expect(":")){e.push(this.expression())}return n},parseArguments:function(){var t=[];if(this.peekToken().text!==")"){do{t.push(this.filterChain())}while(this.expect(","))}return t},identifier:function(){var t=this.consume();if(!t.identifier){this.throwError("is not a valid identifier",t)}return{type:sr.Identifier,name:t.text}},constant:function(){return{type:sr.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if(this.peekToken().text!=="]"){do{if(this.peek("]")){break}t.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:sr.ArrayExpression,elements:t}},object:function(){var t=[],e;if(this.peekToken().text!=="}"){do{if(this.peek("}")){break}e={type:sr.Property,kind:"init"};if(this.peek().constant){e.key=this.constant();e.computed=false;this.consume(":");e.value=this.expression()}else if(this.peek().identifier){e.key=this.identifier();e.computed=false;if(this.peek(":")){this.consume(":");e.value=this.expression()}else{e.value=e.key}}else if(this.peek("[")){this.consume("[");e.key=this.expression();this.consume("]");e.computed=true;this.consume(":");e.value=this.expression()}else{this.throwError("invalid key",this.peek())}t.push(e)}while(this.expect(","))}this.consume("}");return{type:sr.ObjectExpression,properties:t}},throwError:function(t,e){throw er("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(this.tokens.length===0){throw er("ueoe","Unexpected end of expression: {0}",this.text)}var e=this.expect(t);if(!e){this.throwError("is unexpected, expecting ["+t+"]",this.peek())}return e},peekToken:function(){if(this.tokens.length===0){throw er("ueoe","Unexpected end of expression: {0}",this.text)}return this.tokens[0]},peek:function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},peekAhead:function(t,e,n,i,r){if(this.tokens.length>t){var a=this.tokens[t];var o=a.text;if(o===e||o===n||o===i||o===r||!e&&!n&&!i&&!r){return a}}return false},expect:function(t,e,n,i){var r=this.peek(t,e,n,i);if(r){this.tokens.shift();return r}return false},selfReferential:{this:{type:sr.ThisExpression},$locals:{type:sr.LocalsExpression}}};function lr(t,e){return typeof t!=="undefined"?t:e}function ur(t,e){if(typeof t==="undefined")return e;if(typeof e==="undefined")return t;return t+e}function cr(t,e){var n=t(e);return!n.$stateful}var fr=1;var hr=2;function dr(t,e){switch(t.type){case sr.MemberExpression:if(t.computed){return false}break;case sr.UnaryExpression:return fr;case sr.BinaryExpression:return t.operator!=="+"?fr:false;case sr.CallExpression:return false}return undefined===e?hr:e}function pr(t,e,n){var i;var r;var a;var o=t.isPure=dr(t,n);switch(t.type){case sr.Program:i=true;C(t.body,function(t){pr(t.expression,e,o);i=i&&t.expression.constant});t.constant=i;break;case sr.Literal:t.constant=true;t.toWatch=[];break;case sr.UnaryExpression:pr(t.argument,e,o);t.constant=t.argument.constant;t.toWatch=t.argument.toWatch;break;case sr.BinaryExpression:pr(t.left,e,o);pr(t.right,e,o);t.constant=t.left.constant&&t.right.constant;t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case sr.LogicalExpression:pr(t.left,e,o);pr(t.right,e,o);t.constant=t.left.constant&&t.right.constant;t.toWatch=t.constant?[]:[t];break;case sr.ConditionalExpression:pr(t.test,e,o);pr(t.alternate,e,o);pr(t.consequent,e,o);t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant;t.toWatch=t.constant?[]:[t];break;case sr.Identifier:t.constant=false;t.toWatch=[t];break;case sr.MemberExpression:pr(t.object,e,o);if(t.computed){pr(t.property,e,o)}t.constant=t.object.constant&&(!t.computed||t.property.constant);t.toWatch=t.constant?[]:[t];break;case sr.CallExpression:a=t.filter?cr(e,t.callee.name):false;i=a;r=[];C(t.arguments,function(t){pr(t,e,o);i=i&&t.constant;r.push.apply(r,t.toWatch)});t.constant=i;t.toWatch=a?r:[t];break;case sr.AssignmentExpression:pr(t.left,e,o);pr(t.right,e,o);t.constant=t.left.constant&&t.right.constant;t.toWatch=[t];break;case sr.ArrayExpression:i=true;r=[];C(t.elements,function(t){pr(t,e,o);i=i&&t.constant;r.push.apply(r,t.toWatch)});t.constant=i;t.toWatch=r;break;case sr.ObjectExpression:i=true;r=[];C(t.properties,function(t){pr(t.value,e,o);i=i&&t.value.constant;r.push.apply(r,t.value.toWatch);if(t.computed){pr(t.key,e,false);i=i&&t.key.constant;r.push.apply(r,t.key.toWatch)}});t.constant=i;t.toWatch=r;break;case sr.ThisExpression:t.constant=false;t.toWatch=[];break;case sr.LocalsExpression:t.constant=false;t.toWatch=[];break}}function vr(t){if(t.length!==1)return;var e=t[0].expression;var n=e.toWatch;if(n.length!==1)return n;return n[0]!==e?n:undefined}function gr(t){return t.type===sr.Identifier||t.type===sr.MemberExpression}function mr(t){if(t.body.length===1&&gr(t.body[0].expression)){return{type:sr.AssignmentExpression,left:t.body[0].expression,right:{type:sr.NGValueParameter},operator:"="}}}function _r(t){return t.body.length===0||t.body.length===1&&(t.body[0].expression.type===sr.Literal||t.body[0].expression.type===sr.ArrayExpression||t.body[0].expression.type===sr.ObjectExpression)}function yr(t){return t.constant}function br(t){this.$filter=t}br.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};pr(t,e.$filter);var n="";var i;this.stage="assign";if(i=mr(t)){this.state.computing="assign";var r=this.nextId();this.recurse(i,r);this.return_(r);n="fn.assign="+this.generateFunction("assign","s,v,l")}var a=vr(t.body);e.stage="inputs";C(a,function(t,n){var i="fn"+n;e.state[i]={vars:[],body:[],own:{}};e.state.computing=i;var r=e.nextId();e.recurse(t,r);e.return_(r);e.state.inputs.push({name:i,isPure:t.isPure});t.watchId=n});this.state.computing="fn";this.stage="main";this.recurse(t);var o='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;";var s=new Function("$filter","getStringValue","ifDefined","plus",o)(this.$filter,ir,lr,ur);this.state=this.stage=undefined;return s},USE:"use",STRICT:"strict",watchFns:function(){var t=[];var e=this.state.inputs;var n=this;C(e,function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s"));if(e.isPure){t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")}});if(e.length){t.push("fn.inputs=["+e.map(function(t){return t.name}).join(",")+"];")}return t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[];var e=this;C(this.state.filters,function(n,i){t.push(n+"=$filter("+e.escape(i)+")")});if(t.length)return"var "+t.join(",")+";";return""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,i,r,a){var o,s,l=this,u,c,f;i=i||D;if(!a&&G(t.watchId)){e=e||this.nextId();this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,i,r,true));return}switch(t.type){case sr.Program:C(t.body,function(e,n){l.recurse(e.expression,undefined,undefined,function(t){s=t});if(n!==t.body.length-1){l.current().body.push(s,";")}else{l.return_(s)}});break;case sr.Literal:c=this.escape(t.value);this.assign(e,c);i(e||c);break;case sr.UnaryExpression:this.recurse(t.argument,undefined,undefined,function(t){s=t});c=t.operator+"("+this.ifDefined(s,0)+")";this.assign(e,c);i(c);break;case sr.BinaryExpression:this.recurse(t.left,undefined,undefined,function(t){o=t});this.recurse(t.right,undefined,undefined,function(t){s=t});if(t.operator==="+"){c=this.plus(o,s)}else if(t.operator==="-"){c=this.ifDefined(o,0)+t.operator+this.ifDefined(s,0)}else{c="("+o+")"+t.operator+"("+s+")"}this.assign(e,c);i(c);break;case sr.LogicalExpression:e=e||this.nextId();l.recurse(t.left,e);l.if_(t.operator==="&&"?e:l.not(e),l.lazyRecurse(t.right,e));i(e);break;case sr.ConditionalExpression:e=e||this.nextId();l.recurse(t.test,e);l.if_(e,l.lazyRecurse(t.alternate,e),l.lazyRecurse(t.consequent,e));i(e);break;case sr.Identifier:e=e||this.nextId();if(n){n.context=l.stage==="inputs"?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s");n.computed=false;n.name=t.name}l.if_(l.stage==="inputs"||l.not(l.getHasOwnProperty("l",t.name)),function(){l.if_(l.stage==="inputs"||"s",function(){if(r&&r!==1){l.if_(l.isNull(l.nonComputedMember("s",t.name)),l.lazyAssign(l.nonComputedMember("s",t.name),"{}"))}l.assign(e,l.nonComputedMember("s",t.name))})},e&&l.lazyAssign(e,l.nonComputedMember("l",t.name)));i(e);break;case sr.MemberExpression:o=n&&(n.context=this.nextId())||this.nextId();e=e||this.nextId();l.recurse(t.object,o,undefined,function(){l.if_(l.notNull(o),function(){if(t.computed){s=l.nextId();l.recurse(t.property,s);l.getStringValue(s);if(r&&r!==1){l.if_(l.not(l.computedMember(o,s)),l.lazyAssign(l.computedMember(o,s),"{}"))}c=l.computedMember(o,s);l.assign(e,c);if(n){n.computed=true;n.name=s}}else{if(r&&r!==1){l.if_(l.isNull(l.nonComputedMember(o,t.property.name)),l.lazyAssign(l.nonComputedMember(o,t.property.name),"{}"))}c=l.nonComputedMember(o,t.property.name);l.assign(e,c);if(n){n.computed=false;n.name=t.property.name}}},function(){l.assign(e,"undefined")});i(e)},!!r);break;case sr.CallExpression:e=e||this.nextId();if(t.filter){s=l.filter(t.callee.name);u=[];C(t.arguments,function(t){var e=l.nextId();l.recurse(t,e);u.push(e)});c=s+"("+u.join(",")+")";l.assign(e,c);i(e)}else{s=l.nextId();o={};u=[];l.recurse(t.callee,s,o,function(){l.if_(l.notNull(s),function(){C(t.arguments,function(e){l.recurse(e,t.constant?undefined:l.nextId(),undefined,function(t){u.push(t)})});if(o.name){c=l.member(o.context,o.name,o.computed)+"("+u.join(",")+")"}else{c=s+"("+u.join(",")+")"}l.assign(e,c)},function(){l.assign(e,"undefined")});i(e)})}break;case sr.AssignmentExpression:s=this.nextId();o={};this.recurse(t.left,undefined,o,function(){l.if_(l.notNull(o.context),function(){l.recurse(t.right,s);c=l.member(o.context,o.name,o.computed)+t.operator+s;l.assign(e,c);i(e||c)})},1);break;case sr.ArrayExpression:u=[];C(t.elements,function(e){l.recurse(e,t.constant?undefined:l.nextId(),undefined,function(t){u.push(t)})});c="["+u.join(",")+"]";this.assign(e,c);i(e||c);break;case sr.ObjectExpression:u=[];f=false;C(t.properties,function(t){if(t.computed){f=true}});if(f){e=e||this.nextId();this.assign(e,"{}");C(t.properties,function(t){if(t.computed){o=l.nextId();l.recurse(t.key,o)}else{o=t.key.type===sr.Identifier?t.key.name:""+t.key.value}s=l.nextId();l.recurse(t.value,s);l.assign(l.member(e,o,t.computed),s)})}else{C(t.properties,function(e){l.recurse(e.value,t.constant?undefined:l.nextId(),undefined,function(t){u.push(l.escape(e.key.type===sr.Identifier?e.key.name:""+e.key.value)+":"+t)})});c="{"+u.join(",")+"}";this.assign(e,c)}i(e||c);break;case sr.ThisExpression:this.assign(e,"s");i(e||"s");break;case sr.LocalsExpression:this.assign(e,"l");i(e||"l");break;case sr.NGValueParameter:this.assign(e,"v");i(e||"v");break}},getHasOwnProperty:function(t,e){var n=t+"."+e;var i=this.current().own;if(!i.hasOwnProperty(n)){i[n]=this.nextId(false,t+"&&("+this.escape(e)+" in "+t+")")}return i[n]},assign:function(t,e){if(!t)return;this.current().body.push(t,"=",e,";");return t},filter:function(t){if(!this.state.filters.hasOwnProperty(t)){this.state.filters[t]=this.nextId(true)}return this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(t===true){e()}else{var i=this.current().body;i.push("if(",t,"){");e();i.push("}");if(n){i.push("else{");n();i.push("}")}}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){var n=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/;var i=/[^$_a-zA-Z0-9]/g;if(n.test(e)){return t+"."+e}else{return t+'["'+e.replace(i,this.stringEscapeFn)+'"]'}},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){if(n)return this.computedMember(t,e);return this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,i,r,a){var o=this;return function(){o.recurse(t,e,n,i,r,a)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(V(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(H(t))return t.toString();if(t===true)return"true";if(t===false)return"false";if(t===null)return"null";if(typeof t==="undefined")return"undefined";throw er("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;if(!t){this.current().vars.push(n+(e?"="+e:""))}return n},current:function(){return this.state[this.state.computing]}};function wr(t){this.$filter=t}wr.prototype={compile:function(t){var e=this;pr(t,e.$filter);var n;var i;if(n=mr(t)){i=this.recurse(n)}var r=vr(t.body);var a;if(r){a=[];C(r,function(t,n){var i=e.recurse(t);i.isPure=t.isPure;t.input=i;a.push(i);t.watchId=n})}var o=[];C(t.body,function(t){o.push(e.recurse(t.expression))});var s=t.body.length===0?D:t.body.length===1?o[0]:function(t,e){var n;C(o,function(i){n=i(t,e)});return n};if(i){s.assign=function(t,e,n){return i(t,n,e)}}if(a){s.inputs=a}return s},recurse:function(t,e,n){var i,r,a=this,o;if(t.input){return this.inputs(t.input,t.watchId)}switch(t.type){case sr.Literal:return this.value(t.value,e);case sr.UnaryExpression:r=this.recurse(t.argument);return this["unary"+t.operator](r,e);case sr.BinaryExpression:i=this.recurse(t.left);r=this.recurse(t.right);return this["binary"+t.operator](i,r,e);case sr.LogicalExpression:i=this.recurse(t.left);r=this.recurse(t.right);return this["binary"+t.operator](i,r,e);case sr.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case sr.Identifier:return a.identifier(t.name,e,n);case sr.MemberExpression:i=this.recurse(t.object,false,!!n);if(!t.computed){r=t.property.name}if(t.computed)r=this.recurse(t.property);return t.computed?this.computedMember(i,r,e,n):this.nonComputedMember(i,r,e,n);case sr.CallExpression:o=[];C(t.arguments,function(t){o.push(a.recurse(t))});if(t.filter)r=this.$filter(t.callee.name);if(!t.filter)r=this.recurse(t.callee,true);return t.filter?function(t,n,i,a){var s=[];for(var l=0;l<o.length;++l){s.push(o[l](t,n,i,a))}var u=r.apply(undefined,s,a);return e?{context:undefined,name:undefined,value:u}:u}:function(t,n,i,a){var s=r(t,n,i,a);var l;if(s.value!=null){var u=[];for(var c=0;c<o.length;++c){u.push(o[c](t,n,i,a))}l=s.value.apply(s.context,u)}return e?{value:l}:l};case sr.AssignmentExpression:i=this.recurse(t.left,true,1);r=this.recurse(t.right);return function(t,n,a,o){var s=i(t,n,a,o);var l=r(t,n,a,o);s.context[s.name]=l;return e?{value:l}:l};case sr.ArrayExpression:o=[];C(t.elements,function(t){o.push(a.recurse(t))});return function(t,n,i,r){var a=[];for(var s=0;s<o.length;++s){a.push(o[s](t,n,i,r))}return e?{value:a}:a};case sr.ObjectExpression:o=[];C(t.properties,function(t){if(t.computed){o.push({key:a.recurse(t.key),computed:true,value:a.recurse(t.value)})}else{o.push({key:t.key.type===sr.Identifier?t.key.name:""+t.key.value,computed:false,value:a.recurse(t.value)})}});return function(t,n,i,r){var a={};for(var s=0;s<o.length;++s){if(o[s].computed){a[o[s].key(t,n,i,r)]=o[s].value(t,n,i,r)}else{a[o[s].key]=o[s].value(t,n,i,r)}}return e?{value:a}:a};case sr.ThisExpression:return function(t){return e?{value:t}:t};case sr.LocalsExpression:return function(t,n){return e?{value:n}:n};case sr.NGValueParameter:return function(t,n,i){return e?{value:i}:i}}},"unary+":function(t,e){return function(n,i,r,a){var o=t(n,i,r,a);if(G(o)){o=+o}else{o=0}return e?{value:o}:o}},"unary-":function(t,e){return function(n,i,r,a){var o=t(n,i,r,a);if(G(o)){o=-o}else{o=-0}return e?{value:o}:o}},"unary!":function(t,e){return function(n,i,r,a){var o=!t(n,i,r,a);return e?{value:o}:o}},"binary+":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o);var l=e(i,r,a,o);var u=ur(s,l);return n?{value:u}:u}},"binary-":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o);var l=e(i,r,a,o);var u=(G(s)?s:0)-(G(l)?l:0);return n?{value:u}:u}},"binary*":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o)*e(i,r,a,o);return n?{value:s}:s}},"binary/":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o)/e(i,r,a,o);return n?{value:s}:s}},"binary%":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o)%e(i,r,a,o);return n?{value:s}:s}},"binary===":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o)===e(i,r,a,o);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o)!==e(i,r,a,o);return n?{value:s}:s}},"binary==":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o)==e(i,r,a,o);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o)!=e(i,r,a,o);return n?{value:s}:s}},"binary<":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o)<e(i,r,a,o);return n?{value:s}:s}},"binary>":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o)>e(i,r,a,o);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o)<=e(i,r,a,o);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o)>=e(i,r,a,o);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o)&&e(i,r,a,o);return n?{value:s}:s}},"binary||":function(t,e,n){return function(i,r,a,o){var s=t(i,r,a,o)||e(i,r,a,o);return n?{value:s}:s}},"ternary?:":function(t,e,n,i){return function(r,a,o,s){var l=t(r,a,o,s)?e(r,a,o,s):n(r,a,o,s);return i?{value:l}:l}},value:function(t,e){return function(){return e?{context:undefined,name:undefined,value:t}:t}},identifier:function(t,e,n){return function(i,r,a,o){var s=r&&t in r?r:i;if(n&&n!==1&&s&&s[t]==null){s[t]={}}var l=s?s[t]:undefined;if(e){return{context:s,name:t,value:l}}else{return l}}},computedMember:function(t,e,n,i){return function(r,a,o,s){var l=t(r,a,o,s);var u;var c;if(l!=null){u=e(r,a,o,s);u=ir(u);if(i&&i!==1){if(l&&!l[u]){l[u]={}}}c=l[u]}if(n){return{context:l,name:u,value:c}}else{return c}}},nonComputedMember:function(t,e,n,i){return function(r,a,o,s){var l=t(r,a,o,s);if(i&&i!==1){if(l&&l[e]==null){l[e]={}}}var u=l!=null?l[e]:undefined;if(n){return{context:l,name:e,value:u}}else{return u}}},inputs:function(t,e){return function(n,i,r,a){if(a)return a[e];return t(n,i,r)}}};function xr(t,e,n){this.ast=new sr(t,n);this.astCompiler=n.csp?new wr(e):new br(e)}xr.prototype={constructor:xr,parse:function(t){var e=this.getAst(t);var n=this.astCompiler.compile(e.ast);n.literal=_r(e.ast);n.constant=yr(e.ast);n.oneTime=e.oneTime;return n},getAst:function(t){var e=false;t=t.trim();if(t.charAt(0)===":"&&t.charAt(1)===":"){e=true;t=t.substring(2)}return{ast:this.ast.ast(t),oneTime:e}}};function Sr(t){return q(t.valueOf)?t.valueOf():nr.call(t)}function Cr(){var t=Zt();var e={true:true,false:false,null:null,undefined:undefined};var n,i;this.addLiteral=function(t,n){e[t]=n};this.setIdentifierFns=function(t,e){n=t;i=e;return this};this.$get=["$filter",function(r){var a=gt().noUnsafeEval;var o={csp:a,literals:dt(e),isIdentifierStart:q(n)&&n,isIdentifierContinue:q(i)&&i};s.$$getAst=l;return s;function s(e,n){var i,a;switch(typeof e){case"string":e=e.trim();a=e;i=t[a];if(!i){var s=new or(o);var l=new xr(s,r,o);i=l.parse(e);t[a]=p(i)}return g(i,n);case"function":return g(e,n);default:return g(D,n)}}function l(t){var e=new or(o);var n=new xr(e,r,o);return n.getAst(t).ast}function u(t,e,n){if(t==null||e==null){return t===e}if(typeof t==="object"){t=Sr(t);if(typeof t==="object"&&!n){return false}}return t===e||t!==t&&e!==e}function c(t,e,n,i,r){var a=i.inputs;var o;if(a.length===1){var s=u;a=a[0];return t.$watch(function t(e){var n=a(e);if(!u(n,s,a.isPure)){o=i(e,undefined,undefined,[n]);s=n&&Sr(n)}return o},e,n,r)}var l=[];var c=[];for(var f=0,h=a.length;f<h;f++){l[f]=u;c[f]=null}return t.$watch(function t(e){var n=false;for(var r=0,s=a.length;r<s;r++){var f=a[r](e);if(n||(n=!u(f,l[r],a[r].isPure))){c[r]=f;l[r]=f&&Sr(f)}}if(n){o=i(e,undefined,undefined,c)}return o},e,n,r)}function f(t,e,n,i,r){var a=i.literal?h:G;var o,s;var l=i.$$intercepted||i;var u=i.$$interceptor||j;var c=i.inputs&&!l.inputs;d.literal=i.literal;d.constant=i.constant;d.inputs=i.inputs;p(d);o=t.$watch(d,e,n,r);return o;function f(){if(a(s)){o()}}function d(t,e,n,i){s=c&&i?i[0]:l(t,e,n,i);if(a(s)){t.$$postDigest(f)}return u(s)}}function h(t){var e=true;C(t,function(t){if(!G(t))e=false});return e}function d(t,e,n,i){var r=t.$watch(function t(e){r();return i(e)},e,n);return r}function p(t){if(t.constant){t.$$watchDelegate=d}else if(t.oneTime){t.$$watchDelegate=f}else if(t.inputs){t.$$watchDelegate=c}return t}function v(t,e){function n(n){return e(t(n))}n.$stateful=t.$stateful||e.$stateful;n.$$pure=t.$$pure&&e.$$pure;return n}function g(t,e){if(!e)return t;if(t.$$interceptor){e=v(t.$$interceptor,e);t=t.$$intercepted}var n=false;var i=function i(r,a,o,s){var l=n&&s?s[0]:t(r,a,o,s);return e(l)};i.$$intercepted=t;i.$$interceptor=e;i.literal=t.literal;i.oneTime=t.oneTime;i.constant=t.constant;if(!e.$stateful){n=!t.inputs;i.inputs=t.inputs?t.inputs:[t];if(!e.$$pure){i.inputs=i.inputs.map(function(t){if(t.isPure===hr){return function e(n){return t(n)}}return t})}}return p(i)}}]}function Er(){var t=true;this.$get=["$rootScope","$exceptionHandler",function(e,n){return Tr(function(t){e.$evalAsync(t)},n,t)}];this.errorOnUnhandledRejections=function(e){if(G(e)){t=e;return this}else{return t}}}function Or(){var t=true;this.$get=["$browser","$exceptionHandler",function(e,n){return Tr(function(t){e.defer(t)},n,t)}];this.errorOnUnhandledRejections=function(e){if(G(e)){t=e;return this}else{return t}}}function Tr(t,e,n){var i=a("$q",TypeError);var r=0;var o=[];function s(){return new l}function l(){var t=this.promise=new u;this.resolve=function(e){d(t,e)};this.reject=function(e){v(t,e)};this.notify=function(e){m(t,e)}}function u(){this.$$state={status:0}}R(u.prototype,{then:function(t,e,n){if($(t)&&$(e)&&$(n)){return this}var i=new u;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([i,t,e,n]);if(this.$$state.status>0)h(this.$$state);return i},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then(function(e){return y(e,w,t)},function(e){return y(e,_,t)},e)}});function c(i){var a,o,s;s=i.pending;i.processScheduled=false;i.pending=undefined;try{for(var l=0,u=s.length;l<u;++l){Ir(i);o=s[l][0];a=s[l][i.status];try{if(q(a)){d(o,a(i.value))}else if(i.status===1){d(o,i.value)}else{v(o,i.value)}}catch(t){v(o,t);if(t&&t.$$passToExceptionHandler===true){e(t)}}}}finally{--r;if(n&&r===0){t(f)}}}function f(){while(!r&&o.length){var t=o.shift();if(!Mr(t)){Ir(t);var n="Possibly unhandled rejection: "+le(t.value);if(W(t.value)){e(t.value,n)}else{e(n)}}}}function h(e){if(n&&!e.pending&&e.status===2&&!Mr(e)){if(r===0&&o.length===0){t(f)}o.push(e)}if(e.processScheduled||!e.pending)return;e.processScheduled=true;++r;t(function(){c(e)})}function d(t,e){if(t.$$state.status)return;if(e===t){g(t,i("qcycle","Expected promise to be resolved with value other than itself '{0}'",e))}else{p(t,e)}}function p(t,e){var n;var i=false;try{if(U(e)||q(e))n=e.then;if(q(n)){t.$$state.status=-1;n.call(e,r,a,o)}else{t.$$state.value=e;t.$$state.status=1;h(t.$$state)}}catch(t){a(t)}function r(e){if(i)return;i=true;p(t,e)}function a(e){if(i)return;i=true;g(t,e)}function o(e){m(t,e)}}function v(t,e){if(t.$$state.status)return;g(t,e)}function g(t,e){t.$$state.value=e;t.$$state.status=2;h(t.$$state)}function m(n,i){var r=n.$$state.pending;if(n.$$state.status<=0&&r&&r.length){t(function(){var t,n;for(var a=0,o=r.length;a<o;a++){n=r[a][0];t=r[a][3];try{m(n,q(t)?t(i):i)}catch(t){e(t)}}})}}function _(t){var e=new u;v(e,t);return e}function y(t,e,n){var i=null;try{if(q(n))i=n()}catch(t){return _(t)}if(nt(i)){return i.then(function(){return e(t)},_)}else{return e(t)}}function b(t,e,n,i){var r=new u;d(r,t);return r.then(e,n,i)}var w=b;function x(t){var e=new u,n=0,i=B(t)?[]:{};C(t,function(t,r){n++;b(t).then(function(t){i[r]=t;if(!--n)d(e,i)},function(t){v(e,t)})});if(n===0){d(e,i)}return e}function S(t){var e=s();C(t,function(t){b(t).then(e.resolve,e.reject)});return e.promise}function E(t){if(!q(t)){throw i("norslvr","Expected resolverFn, got '{0}'",t)}var e=new u;function n(t){d(e,t)}function r(t){v(e,t)}t(n,r);return e}E.prototype=u.prototype;E.defer=s;E.reject=_;E.when=b;E.resolve=w;E.all=x;E.race=S;return E}function Mr(t){return!!t.pur}function Ir(t){t.pur=true}function Rr(t){Ir(t.$$state)}function Nr(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame;var i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame;var r=!!n;var a=r?function(t){var e=n(t);return function(){i(e)}}:function(t){var n=e(t,16.66,false);return function(){e.cancel(n)}};a.supported=r;return a}]}function Ar(){var t=10;var e=a("$rootScope");var n=null;var i=null;this.digestTtl=function(e){if(arguments.length){t=e}return t};function r(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=T();this.$$ChildScope=null;this.$$suspended=false}e.prototype=t;return e}this.$get=["$exceptionHandler","$parse","$browser",function(a,o,s){function u(t){t.currentScope.$$destroyed=true}function c(t){if(f===9){if(t.$$childHead){c(t.$$childHead)}if(t.$$nextSibling){c(t.$$nextSibling)}}t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function h(){this.$id=T();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=false;this.$$suspended=false;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}h.prototype={constructor:h,$new:function(t,e){var n;e=e||this;if(t){n=new h;n.$root=this.$root}else{if(!this.$$ChildScope){this.$$ChildScope=r(this)}n=new this.$$ChildScope}n.$parent=e;n.$$prevSibling=e.$$childTail;if(e.$$childHead){e.$$childTail.$$nextSibling=n;e.$$childTail=n}else{e.$$childHead=e.$$childTail=n}if(t||e!==this)n.$on("$destroy",u);return n},$watch:function(t,e,i,r){var a=o(t);var s=q(e)?e:D;if(a.$$watchDelegate){return a.$$watchDelegate(this,s,i,a,t)}var l=this,u=l.$$watchers,c={fn:s,last:x,get:a,exp:r||t,eq:!!i};n=null;if(!u){u=l.$$watchers=[];u.$$digestWatchIndex=-1}u.unshift(c);u.$$digestWatchIndex++;b(this,1);return function t(){var e=ht(u,c);if(e>=0){b(l,-1);if(e<u.$$digestWatchIndex){u.$$digestWatchIndex--}}n=null}},$watchGroup:function(t,e){var n=new Array(t.length);var i=new Array(t.length);var r=[];var a=this;var o=false;var s=true;if(!t.length){var l=true;a.$evalAsync(function(){if(l)e(i,i,a)});return function t(){l=false}}if(t.length===1){return this.$watch(t[0],function t(r,a,o){i[0]=r;n[0]=a;e(i,r===a?i:n,o)})}C(t,function(t,e){var n=a.$watch(t,function t(n){i[e]=n;if(!o){o=true;a.$evalAsync(u)}});r.push(n)});function u(){o=false;try{if(s){s=false;e(i,i,a)}else{e(i,n,a)}}finally{for(var r=0;r<t.length;r++){n[r]=i[r]}}}return function t(){while(r.length){r.shift()()}}},$watchCollection:function(t,e){v.$$pure=o(t).literal;v.$stateful=!v.$$pure;var n=this;var i;var r;var a;var s=e.length>1;var u=0;var c=o(t,v);var f=[];var h={};var d=true;var p=0;function v(t){i=t;var e,n,a,o,s;if($(i))return;if(!U(i)){if(r!==i){r=i;u++}}else if(S(i)){if(r!==f){r=f;p=r.length=0;u++}e=i.length;if(p!==e){u++;r.length=p=e}for(var c=0;c<e;c++){s=r[c];o=i[c];a=s!==s&&o!==o;if(!a&&s!==o){u++;r[c]=o}}}else{if(r!==h){r=h={};p=0;u++}e=0;for(n in i){if(l.call(i,n)){e++;o=i[n];s=r[n];if(n in r){a=s!==s&&o!==o;if(!a&&s!==o){u++;r[n]=o}}else{p++;r[n]=o;u++}}}if(p>e){u++;for(n in r){if(!l.call(i,n)){p--;delete r[n]}}}}return u}function g(){if(d){d=false;e(i,i,n)}else{e(i,a,n)}if(s){if(!U(i)){a=i}else if(S(i)){a=new Array(i.length);for(var t=0;t<i.length;t++){a[t]=i[t]}}else{a={};for(var r in i){if(l.call(i,r)){a[r]=i[r]}}}}}return this.$watch(c,g)},$digest:function(){var r,o,l,u,c,f,h,g=t,b,w,S=p.length?d:this,C=[],O,T;_("$digest");s.$$checkUrlChange();if(this===d&&i!==null){s.defer.cancel(i);E()}n=null;do{h=false;w=S;for(var M=0;M<p.length;M++){try{T=p[M];u=T.fn;u(T.scope,T.locals)}catch(t){a(t)}n=null}p.length=0;t:do{if(f=!w.$$suspended&&w.$$watchers){f.$$digestWatchIndex=f.length;while(f.$$digestWatchIndex--){try{r=f[f.$$digestWatchIndex];if(r){c=r.get;if((o=c(w))!==(l=r.last)&&!(r.eq?vt(o,l):L(o)&&L(l))){h=true;n=r;r.last=r.eq?dt(o,null):o;u=r.fn;u(o,l===x?o:l,w);if(g<5){O=4-g;if(!C[O])C[O]=[];C[O].push({msg:q(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,newVal:o,oldVal:l})}}else if(r===n){h=false;break t}}}catch(t){a(t)}}}if(!(b=!w.$$suspended&&w.$$watchersCount&&w.$$childHead||w!==S&&w.$$nextSibling)){while(w!==S&&!(b=w.$$nextSibling)){w=w.$parent}}}while(w=b);if((h||p.length)&&!g--){y();throw e("infdig","{0} $digest() iterations reached. Aborting!\n"+"Watchers fired in the last 5 iterations: {1}",t,C)}}while(h||p.length);y();while(m<v.length){try{v[m++]()}catch(t){a(t)}}v.length=m=0;s.$$checkUrlChange()},$suspend:function(){this.$$suspended=true},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=false},$destroy:function(){if(this.$$destroyed)return;var t=this.$parent;this.$broadcast("$destroy");this.$$destroyed=true;if(this===d){s.$$applicationDestroyed()}b(this,-this.$$watchersCount);for(var e in this.$$listenerCount){w(this,this.$$listenerCount[e],e)}if(t&&t.$$childHead===this)t.$$childHead=this.$$nextSibling;if(t&&t.$$childTail===this)t.$$childTail=this.$$prevSibling;if(this.$$prevSibling)this.$$prevSibling.$$nextSibling=this.$$nextSibling;if(this.$$nextSibling)this.$$nextSibling.$$prevSibling=this.$$prevSibling;this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=D;this.$on=this.$watch=this.$watchGroup=function(){return D};this.$$listeners={};this.$$nextSibling=null;c(this)},$eval:function(t,e){return o(t)(this,e)},$evalAsync:function(t,e){if(!d.$$phase&&!p.length){s.defer(function(){if(p.length){d.$digest()}})}p.push({scope:this,fn:o(t),locals:e})},$$postDigest:function(t){v.push(t)},$apply:function(t){try{_("$apply");try{return this.$eval(t)}finally{y()}}catch(t){a(t)}finally{try{d.$digest()}catch(t){a(t);throw t}}},$applyAsync:function(t){var e=this;if(t){g.push(n)}t=o(t);O();function n(){e.$eval(t)}},$on:function(t,e){var n=this.$$listeners[t];if(!n){this.$$listeners[t]=n=[]}n.push(e);var i=this;do{if(!i.$$listenerCount[t]){i.$$listenerCount[t]=0}i.$$listenerCount[t]++}while(i=i.$parent);var r=this;return function(){var i=n.indexOf(e);if(i!==-1){delete n[i];w(r,1,t)}}},$emit:function(t,e){var n=[],i,r=this,o=false,s={name:t,targetScope:r,stopPropagation:function(){o=true},preventDefault:function(){s.defaultPrevented=true},defaultPrevented:false},l=_t([s],arguments,1),u,c;do{i=r.$$listeners[t]||n;s.currentScope=r;for(u=0,c=i.length;u<c;u++){if(!i[u]){i.splice(u,1);u--;c--;continue}try{i[u].apply(null,l)}catch(t){a(t)}}if(o){break}r=r.$parent}while(r);s.currentScope=null;return s},$broadcast:function(t,e){var n=this,i=n,r=n,o={name:t,targetScope:n,preventDefault:function(){o.defaultPrevented=true},defaultPrevented:false};if(!n.$$listenerCount[t])return o;var s=_t([o],arguments,1),l,u,c;while(i=r){o.currentScope=i;l=i.$$listeners[t]||[];for(u=0,c=l.length;u<c;u++){if(!l[u]){l.splice(u,1);u--;c--;continue}try{l[u].apply(null,s)}catch(t){a(t)}}if(!(r=i.$$listenerCount[t]&&i.$$childHead||i!==n&&i.$$nextSibling)){while(i!==n&&!(r=i.$$nextSibling)){i=i.$parent}}}o.currentScope=null;return o}};var d=new h;var p=d.$$asyncQueue=[];var v=d.$$postDigestQueue=[];var g=d.$$applyAsyncQueue=[];var m=0;return d;function _(t){if(d.$$phase){throw e("inprog","{0} already in progress",d.$$phase)}d.$$phase=t}function y(){d.$$phase=null}function b(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function w(t,e,n){do{t.$$listenerCount[n]-=e;if(t.$$listenerCount[n]===0){delete t.$$listenerCount[n]}}while(t=t.$parent)}function x(){}function E(){while(g.length){try{g.shift()()}catch(t){a(t)}}i=null}function O(){if(i===null){i=s.defer(function(){d.$apply(E)})}}}]}function Lr(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){if(G(e)){t=e;return this}return t};this.imgSrcSanitizationWhitelist=function(t){if(G(t)){e=t;return this}return e};this.$get=function(){return function n(i,r){var a=r?e:t;var o=Zr(i&&i.trim()).href;if(o!==""&&!o.match(a)){return"unsafe:"+o}return i}}}var Pr=a("$sce");var Dr={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};var jr=/_([a-z])/g;function kr(t){return t.replace(jr,ye)}function Fr(t){if(t==="self"){return t}else if(V(t)){if(t.indexOf("***")>-1){throw Pr("iwcard","Illegal sequence *** in string matcher.  String: {0}",t)}t=st(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*");return new RegExp("^"+t+"$")}else if(X(t)){return new RegExp("^"+t.source+"$")}else{throw Pr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}}function $r(t){var e=[];if(G(t)){C(t,function(t){e.push(Fr(t))})}return e}function Gr(){this.SCE_CONTEXTS=Dr;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){if(arguments.length){t=$r(e)}return t};this.resourceUrlBlacklist=function(t){if(arguments.length){e=$r(t)}return e};this.$get=["$injector","$$sanitizeUri",function(n,i){var r=function t(e){throw Pr("unsafe","Attempting to use an unsafe value in a safe context.")};if(n.has("$sanitize")){r=n.get("$sanitize")}function a(t,e){if(t==="self"){return Qr(e)||Jr(e)}else{return!!t.exec(e.href)}}function o(n){var i=Zr(n.toString());var r,o,s=false;for(r=0,o=t.length;r<o;r++){if(a(t[r],i)){s=true;break}}if(s){for(r=0,o=e.length;r<o;r++){if(a(e[r],i)){s=false;break}}}return s}function s(t){var e=function t(e){this.$$unwrapTrustedValue=function(){return e}};if(t){e.prototype=new t}e.prototype.valueOf=function t(){return this.$$unwrapTrustedValue()};e.prototype.toString=function t(){return this.$$unwrapTrustedValue().toString()};return e}var l=s(),u={};u[Dr.HTML]=s(l);u[Dr.CSS]=s(l);u[Dr.MEDIA_URL]=s(l);u[Dr.URL]=s(u[Dr.MEDIA_URL]);u[Dr.JS]=s(l);u[Dr.RESOURCE_URL]=s(u[Dr.URL]);function c(t,e){var n=u.hasOwnProperty(t)?u[t]:null;if(!n){throw Pr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e)}if(e===null||$(e)||e===""){return e}if(typeof e!=="string"){throw Pr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t)}return new n(e)}function f(t){if(t instanceof l){return t.$$unwrapTrustedValue()}else{return t}}function h(t,e){if(e===null||$(e)||e===""){return e}var n=u.hasOwnProperty(t)?u[t]:null;if(n&&e instanceof n){return e.$$unwrapTrustedValue()}if(q(e.$$unwrapTrustedValue)){e=e.$$unwrapTrustedValue()}if(t===Dr.MEDIA_URL||t===Dr.URL){return i(e,t===Dr.MEDIA_URL)}else if(t===Dr.RESOURCE_URL){if(o(e)){return e}else{throw Pr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString())}}else if(t===Dr.HTML){return r(e)}throw Pr("unsafe","Attempting to use an unsafe value in a safe context.")}return{trustAs:c,getTrusted:h,valueOf:f}}]}function Ur(){var t=true;this.enabled=function(e){if(arguments.length){t=!!e}return t};this.$get=["$parse","$sceDelegate",function(e,n){if(t&&f<8){throw Pr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks "+"mode.  You can fix this by adding the text <!doctype html> to the top of your HTML "+"document.  See http://docs.angularjs.org/api/ng.$sce for more information.")}var i=oe(Dr);i.isEnabled=function(){return t};i.trustAs=n.trustAs;i.getTrusted=n.getTrusted;i.valueOf=n.valueOf;if(!t){i.trustAs=i.getTrusted=function(t,e){return e};i.valueOf=j}i.parseAs=function t(n,r){var a=e(r);if(a.literal&&a.constant){return a}else{return e(r,function(t){return i.getTrusted(n,t)})}};var r=i.parseAs,a=i.getTrusted,o=i.trustAs;C(Dr,function(t,e){var n=u(e);i[kr("parse_as_"+n)]=function(e){return r(t,e)};i[kr("get_trusted_"+n)]=function(e){return a(t,e)};i[kr("trust_as_"+n)]=function(e){return o(t,e)}});return i}]}function Yr(){this.$get=["$window","$document",function(t,e){var n={},i=t.nw&&t.nw.process,r=!i&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id),a=!r&&t.history&&t.history.pushState,o=A((/android (\d+)/.exec(u((t.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((t.navigator||{}).userAgent),l=e[0]||{},c=l.body&&l.body.style,h=false,d=false;if(c){h=!!("transition"in c||"webkitTransition"in c);d=!!("animation"in c||"webkitAnimation"in c)}return{history:!!(a&&!(o<4)&&!s),hasEvent:function(t){if(t==="input"&&f)return false;if($(n[t])){var e=l.createElement("div");n[t]="on"+t in e}return n[t]},csp:gt(),transitions:h,animations:d,android:o}}]}var Vr=a("$templateRequest");function Hr(){var t;this.httpOptions=function(e){if(e){t=e;return this}return t};this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,i,r,a){function o(s,l){o.totalPendingRequests++;if(!V(s)||$(n.get(s))){s=a.getTrustedResourceUrl(s)}var u=i.defaults&&i.defaults.transformResponse;if(B(u)){u=u.filter(function(t){return t!==_i})}else if(u===_i){u=null}return i.get(s,R({cache:n,transformResponse:u},t)).finally(function(){o.totalPendingRequests--}).then(function(t){return n.put(s,t.data)},c);function c(t){if(!l){t=Vr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,t.status,t.statusText);e(t)}return r.reject(t)}}o.totalPendingRequests=0;return o}]}function zr(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var i={};i.findBindings=function(t,e,n){var i=t.getElementsByClassName("ng-binding");var r=[];C(i,function(t){var i=b.element(t).data("$binding");if(i){C(i,function(i){if(n){var a=new RegExp("(^|\\s)"+st(e)+"(\\s|\\||$)");if(a.test(i)){r.push(t)}}else{if(i.indexOf(e)!==-1){r.push(t)}}})}});return r};i.findModels=function(t,e,n){var i=["ng-","data-ng-","ng\\:"];for(var r=0;r<i.length;++r){var a=n?"=":"*=";var o="["+i[r]+"model"+a+'"'+e+'"]';var s=t.querySelectorAll(o);if(s.length){return s}}};i.getLocation=function(){return n.url()};i.setLocation=function(e){if(e!==n.url()){n.url(e);t.$digest()}};i.whenStable=function(t){e.notifyWhenNoOutstandingRequests(t)};return i}]}var Br=a("$timeout");function Wr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,i,r){var a={};function o(o,s,l){if(!q(o)){l=s;s=o;o=D}var u=yt(arguments,3),c=G(l)&&!l,f=(c?i:n).defer(),h=f.promise,d;d=e.defer(function(){try{f.resolve(o.apply(null,u))}catch(t){f.reject(t);r(t)}finally{delete a[h.$$timeoutId]}if(!c)t.$apply()},s);h.$$timeoutId=d;a[d]=f;return h}o.cancel=function(t){if(!t)return false;if(!t.hasOwnProperty("$$timeoutId")){throw Br("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.")}if(!a.hasOwnProperty(t.$$timeoutId))return false;var n=t.$$timeoutId;var i=a[n];Rr(i.promise);i.reject("canceled");delete a[n];return e.defer.cancel(n)};return o}]}var qr=e.document.createElement("a");var Xr=Zr(e.location.href);var Kr;function Zr(t){if(!V(t))return t;var e=t;if(f){qr.setAttribute("href",e);e=qr.href}qr.setAttribute("href",e);return{href:qr.href,protocol:qr.protocol?qr.protocol.replace(/:$/,""):"",host:qr.host,search:qr.search?qr.search.replace(/^\?/,""):"",hash:qr.hash?qr.hash.replace(/^#/,""):"",hostname:qr.hostname,port:qr.port,pathname:qr.pathname.charAt(0)==="/"?qr.pathname:"/"+qr.pathname}}function Qr(t){return ea(t,Xr)}function Jr(t){return ea(t,na())}function ta(t){var e=[Xr].concat(t.map(Zr));return function t(n){var i=Zr(n);return e.some(ea.bind(null,i))}}function ea(t,e){t=Zr(t);e=Zr(e);return t.protocol===e.protocol&&t.host===e.host}function na(){if(e.document.baseURI){return e.document.baseURI}if(!Kr){Kr=e.document.createElement("a");Kr.href=".";Kr=Kr.cloneNode(false)}return Kr.href}function ia(){this.$get=k(e)}function ra(t){var e=t[0]||{};var n={};var i="";function r(t){try{return t.cookie||""}catch(t){return""}}function a(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,s,l,u;var c=r(e);if(c!==i){i=c;t=i.split("; ");n={};for(s=0;s<t.length;s++){o=t[s];l=o.indexOf("=");if(l>0){u=a(o.substring(0,l));if($(n[u])){n[u]=a(o.substring(l+1))}}}}return n}}ra.$inject=["$document"];function aa(){this.$get=ra}oa.$inject=["$provide"];function oa(t){var e="Filter";function n(i,r){if(U(i)){var a={};C(i,function(t,e){a[e]=n(e,t)});return a}else{return t.factory(i+e,r)}}this.register=n;this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}];n("currency",pa);n("date",Aa);n("filter",sa);n("json",La);n("limitTo",ja);n("lowercase",Pa);n("number",va);n("orderBy",Fa);n("uppercase",Da)}function sa(){return function(t,e,n,i){if(!S(t)){if(t==null){return t}else{throw a("filter")("notarray","Expected array but received: {0}",t)}}i=i||"$";var r=ca(e);var o;var s;switch(r){case"function":o=e;break;case"boolean":case"null":case"number":case"string":s=true;case"object":o=la(e,n,i,s);break;default:return t}return Array.prototype.filter.call(t,o)}}function la(t,e,n,i){var r=U(t)&&n in t;var a;if(e===true){e=vt}else if(!q(e)){e=function(t,e){if($(t)){return false}if(t===null||e===null){return t===e}if(U(e)||U(t)&&!F(t)){return false}t=u(""+t);e=u(""+e);return t.indexOf(e)!==-1}}a=function(a){if(r&&!U(a)){return ua(a,t[n],e,n,false)}return ua(a,t,e,n,i)};return a}function ua(t,e,n,i,r,a){var o=ca(t);var s=ca(e);if(s==="string"&&e.charAt(0)==="!"){return!ua(t,e.substring(1),n,i,r)}else if(B(t)){return t.some(function(t){return ua(t,e,n,i,r)})}switch(o){case"object":var l;if(r){for(l in t){if(l.charAt&&l.charAt(0)!=="$"&&ua(t[l],e,n,i,true)){return true}}return a?false:ua(t,e,n,i,false)}else if(s==="object"){for(l in e){var u=e[l];if(q(u)||$(u)){continue}var c=l===i;var f=c?t:t[l];if(!ua(f,u,n,i,c,c)){return false}}return true}else{return n(t,e)}case"function":return false;default:return n(t,e)}}function ca(t){return t===null?"null":typeof t}var fa=22;var ha=".";var da="0";pa.$inject=["$locale"];function pa(t){var e=t.NUMBER_FORMATS;return function(t,n,i){if($(n)){n=e.CURRENCY_SYM}if($(i)){i=e.PATTERNS[1].maxFrac}var r=!n?/\s*\u00A4\s*/g:/\u00A4/g;return t==null?t:_a(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,i).replace(r,n)}}va.$inject=["$locale"];function va(t){var e=t.NUMBER_FORMATS;return function(t,n){return t==null?t:_a(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function ga(t){var e=0,n,i;var r,a,o;if((i=t.indexOf(ha))>-1){t=t.replace(ha,"")}if((r=t.search(/e/i))>0){if(i<0)i=r;i+=+t.slice(r+1);t=t.substring(0,r)}else if(i<0){i=t.length}for(r=0;t.charAt(r)===da;r++){}if(r===(o=t.length)){n=[0];i=1}else{o--;while(t.charAt(o)===da)o--;i-=r;n=[];for(a=0;r<=o;r++,a++){n[a]=+t.charAt(r)}}if(i>fa){n=n.splice(0,fa-1);e=i-1;i=1}return{d:n,e:e,i:i}}function ma(t,e,n,i){var r=t.d;var a=r.length-t.i;e=$(e)?Math.min(Math.max(n,a),i):+e;var o=e+t.i;var s=r[o];if(o>0){r.splice(Math.max(t.i,o));for(var l=o;l<r.length;l++){r[l]=0}}else{a=Math.max(0,a);t.i=1;r.length=Math.max(1,o=e+1);r[0]=0;for(var u=1;u<o;u++)r[u]=0}if(s>=5){if(o-1<0){for(var c=0;c>o;c--){r.unshift(0);t.i++}r.unshift(1);t.i++}else{r[o-1]++}}for(;a<Math.max(0,e);a++)r.push(0);var f=r.reduceRight(function(t,e,n,i){e=e+t;i[n]=e%10;return Math.floor(e/10)},0);if(f){r.unshift(f);t.i++}}function _a(t,e,n,i,r){if(!(V(t)||H(t))||isNaN(t))return"";var a=!isFinite(t);var o=false;var s=Math.abs(t)+"",l="",u;if(a){l="∞"}else{u=ga(s);ma(u,r,e.minFrac,e.maxFrac);var c=u.d;var f=u.i;var h=u.e;var d=[];o=c.reduce(function(t,e){return t&&!e},true);while(f<0){c.unshift(0);f++}if(f>0){d=c.splice(f,c.length)}else{d=c;c=[0]}var p=[];if(c.length>=e.lgSize){p.unshift(c.splice(-e.lgSize,c.length).join(""))}while(c.length>e.gSize){p.unshift(c.splice(-e.gSize,c.length).join(""))}if(c.length){p.unshift(c.join(""))}l=p.join(n);if(d.length){l+=i+d.join("")}if(h){l+="e+"+h}}if(t<0&&!o){return e.negPre+l+e.negSuf}else{return e.posPre+l+e.posSuf}}function ya(t,e,n,i){var r="";if(t<0||i&&t<=0){if(i){t=-t+1}else{t=-t;r="-"}}t=""+t;while(t.length<e)t=da+t;if(n){t=t.substr(t.length-e)}return r+t}function ba(t,e,n,i,r){n=n||0;return function(a){var o=a["get"+t]();if(n>0||o>-n){o+=n}if(o===0&&n===-12)o=12;return ya(o,e,i,r)}}function wa(t,e,n){return function(i,r){var a=i["get"+t]();var o=(n?"STANDALONE":"")+(e?"SHORT":"");var s=c(o+t);return r[s][a]}}function xa(t,e,n){var i=-1*n;var r=i>=0?"+":"";r+=ya(Math[i>0?"floor":"ceil"](i/60),2)+ya(Math.abs(i%60),2);return r}function Sa(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function Ca(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function Ea(t){return function(e){var n=Sa(e.getFullYear()),i=Ca(e);var r=+i-+n,a=1+Math.round(r/6048e5);return ya(a,t)}}function Oa(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]}function Ta(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}function Ma(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}var Ia={yyyy:ba("FullYear",4,0,false,true),yy:ba("FullYear",2,0,true,true),y:ba("FullYear",1,0,false,true),MMMM:wa("Month"),MMM:wa("Month",true),MM:ba("Month",2,1),M:ba("Month",1,1),LLLL:wa("Month",false,true),dd:ba("Date",2),d:ba("Date",1),HH:ba("Hours",2),H:ba("Hours",1),hh:ba("Hours",2,-12),h:ba("Hours",1,-12),mm:ba("Minutes",2),m:ba("Minutes",1),ss:ba("Seconds",2),s:ba("Seconds",1),sss:ba("Milliseconds",3),EEEE:wa("Day"),EEE:wa("Day",true),a:Oa,Z:xa,ww:Ea(2),w:Ea(1),G:Ta,GG:Ta,GGG:Ta,GGGG:Ma};var Ra=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Na=/^-?\d+$/;Aa.$inject=["$locale"];function Aa(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;function n(t){var n;if(n=t.match(e)){var i=new Date(0),r=0,a=0,o=n[8]?i.setUTCFullYear:i.setFullYear,s=n[8]?i.setUTCHours:i.setHours;if(n[9]){r=A(n[9]+n[10]);a=A(n[9]+n[11])}o.call(i,A(n[1]),A(n[2])-1,A(n[3]));var l=A(n[4]||0)-r;var u=A(n[5]||0)-a;var c=A(n[6]||0);var f=Math.round(parseFloat("0."+(n[7]||0))*1e3);s.call(i,l,u,c,f);return i}return t}return function(e,i,r){var a="",o=[],s,l;i=i||"mediumDate";i=t.DATETIME_FORMATS[i]||i;if(V(e)){e=Na.test(e)?A(e):n(e)}if(H(e)){e=new Date(e)}if(!z(e)||!isFinite(e.getTime())){return e}while(i){l=Ra.exec(i);if(l){o=_t(o,l,1);i=o.pop()}else{o.push(i);i=null}}var u=e.getTimezoneOffset();if(r){u=Et(r,u);e=Tt(e,r,true)}C(o,function(n){s=Ia[n];a+=s?s(e,t.DATETIME_FORMATS,u):n==="''"?"'":n.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return a}}function La(){return function(t,e){if($(e)){e=2}return xt(t,e)}}var Pa=k(u);var Da=k(c);function ja(){return function(t,e,n){if(Math.abs(Number(e))===Infinity){e=Number(e)}else{e=A(e)}if(L(e))return t;if(H(t))t=t.toString();if(!S(t))return t;n=!n||isNaN(n)?0:A(n);n=n<0?Math.max(0,t.length+n):n;if(e>=0){return ka(t,n,n+e)}else{if(n===0){return ka(t,e,t.length)}else{return ka(t,Math.max(0,n+e),n)}}}}function ka(t,e,n){if(V(t))return t.slice(e,n);return p.call(t,e,n)}Fa.$inject=["$parse"];function Fa(t){return function(t,n,i,s){if(t==null)return t;if(!S(t)){throw a("orderBy")("notarray","Expected array but received: {0}",t)}if(!B(n)){n=[n]}if(n.length===0){n=["+"]}var l=e(n);var u=i?-1:1;var c=q(s)?s:o;var f=Array.prototype.map.call(t,h);f.sort(d);t=f.map(function(t){return t.value});return t;function h(t,e){return{value:t,tieBreaker:{value:e,type:"number",index:e},predicateValues:l.map(function(n){return r(n.get(t),e)})}}function d(t,e){for(var n=0,i=l.length;n<i;n++){var r=c(t.predicateValues[n],e.predicateValues[n]);if(r){return r*l[n].descending*u}}return(c(t.tieBreaker,e.tieBreaker)||o(t.tieBreaker,e.tieBreaker))*u}};function e(e){return e.map(function(e){var n=1,i=j;if(q(e)){i=e}else if(V(e)){if(e.charAt(0)==="+"||e.charAt(0)==="-"){n=e.charAt(0)==="-"?-1:1;e=e.substring(1)}if(e!==""){i=t(e);if(i.constant){var r=i();i=function(t){return t[r]}}}}return{get:i,descending:n}})}function n(t){switch(typeof t){case"number":case"boolean":case"string":return true;default:return false}}function i(t){if(q(t.valueOf)){t=t.valueOf();if(n(t))return t}if(F(t)){t=t.toString();if(n(t))return t}return t}function r(t,e){var n=typeof t;if(t===null){n="null"}else if(n==="object"){t=i(t)}return{value:t,type:n,index:e}}function o(t,e){var n=0;var i=t.type;var r=e.type;if(i===r){var a=t.value;var o=e.value;if(i==="string"){a=a.toLowerCase();o=o.toLowerCase()}else if(i==="object"){if(U(a))a=t.index;if(U(o))o=e.index}if(a!==o){n=a<o?-1:1}}else{n=i==="undefined"?1:r==="undefined"?-1:i==="null"?1:r==="null"?-1:i<r?-1:1}return n}}function $a(t){if(q(t)){t={link:t}}t.restrict=t.restrict||"AC";return k(t)}var Ga=k({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref){return function(t,e){if(e[0].nodeName.toLowerCase()!=="a")return;var n=m.call(e.prop("href"))==="[object SVGAnimatedString]"?"xlink:href":"href";e.on("click",function(t){if(!e.attr(n)){t.preventDefault()}})}}}});var Ua={};C(Je,function(t,e){if(t==="multiple")return;function n(t,n,r){t.$watch(r[i],function t(n){r.$set(e,!!n)})}var i=Kn("ng-"+e);var r=n;if(t==="checked"){r=function(t,e,r){if(r.ngModel!==r[i]){n(t,e,r)}}}Ua[i]=function(){return{restrict:"A",priority:100,link:r}}});C(en,function(t,e){Ua[e]=function(){return{priority:100,link:function(t,n,i){if(e==="ngPattern"&&i.ngPattern.charAt(0)==="/"){var r=i.ngPattern.match(o);if(r){i.$set("ngPattern",new RegExp(r[1],r[2]));return}}t.$watch(i[e],function t(n){i.$set(e,n)})}}}});C(["src","srcset","href"],function(t){var e=Kn("ng-"+t);Ua[e]=function(){return{priority:99,link:function(n,i,r){var a=t,o=t;if(t==="href"&&m.call(i.prop("href"))==="[object SVGAnimatedString]"){o="xlinkHref";r.$attr[o]="xlink:href";a=null}r.$observe(e,function(e){if(!e){if(t==="href"){r.$set(o,null)}return}r.$set(o,e);if(f&&a)i.prop(a,r[o])})}}}});var Ya={$addControl:D,$$renameControl:za,$removeControl:D,$setValidity:D,$setDirty:D,$setPristine:D,$setSubmitted:D,$$setSubmitted:D},Va="ng-pending",Ha="ng-submitted";function za(t,e){t.$name=e}Ba.$inject=["$element","$attrs","$scope","$animate","$interpolate"];function Ba(t,e,n,i,r){this.$$controls=[];this.$error={};this.$$success={};this.$pending=undefined;this.$name=r(e.name||e.ngForm||"")(n);this.$dirty=false;this.$pristine=true;this.$valid=true;this.$invalid=false;this.$submitted=false;this.$$parentForm=Ya;this.$$element=t;this.$$animate=i;Ka(this)}Ba.prototype={$rollbackViewValue:function(){C(this.$$controls,function(t){t.$rollbackViewValue()})},$commitViewValue:function(){C(this.$$controls,function(t){t.$commitViewValue()})},$addControl:function(t){qt(t.$name,"input");this.$$controls.push(t);if(t.$name){this[t.$name]=t}t.$$parentForm=this},$$renameControl:function(t,e){var n=t.$name;if(this[n]===t){delete this[n]}this[e]=t;t.$name=e},$removeControl:function(t){if(t.$name&&this[t.$name]===t){delete this[t.$name]}C(this.$pending,function(e,n){this.$setValidity(n,null,t)},this);C(this.$error,function(e,n){this.$setValidity(n,null,t)},this);C(this.$$success,function(e,n){this.$setValidity(n,null,t)},this);ht(this.$$controls,t);t.$$parentForm=Ya},$setDirty:function(){this.$$animate.removeClass(this.$$element,Jo);this.$$animate.addClass(this.$$element,ts);this.$dirty=true;this.$pristine=false;this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Jo,ts+" "+Ha);this.$dirty=false;this.$pristine=true;this.$submitted=false;C(this.$$controls,function(t){t.$setPristine()})},$setUntouched:function(){C(this.$$controls,function(t){t.$setUntouched()})},$setSubmitted:function(){var t=this;while(t.$$parentForm&&t.$$parentForm!==Ya){t=t.$$parentForm}t.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,Ha);this.$submitted=true;C(this.$$controls,function(t){if(t.$$setSubmitted){t.$$setSubmitted()}})}};Za({clazz:Ba,set:function(t,e,n){var i=t[e];if(!i){t[e]=[n]}else{var r=i.indexOf(n);if(r===-1){i.push(n)}}},unset:function(t,e,n){var i=t[e];if(!i){return}ht(i,n);if(i.length===0){delete t[e]}}});var Wa=function(t){return["$timeout","$parse",function(e,n){var i={name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Ba,compile:function n(i,a){i.addClass(Jo).addClass(Zo);var o=a.name?"name":t&&a.ngForm?"ngForm":false;return{pre:function t(n,i,a,s){var l=s[0];if(!("action"in a)){var u=function(t){n.$apply(function(){l.$commitViewValue();l.$setSubmitted()});t.preventDefault()};i[0].addEventListener("submit",u);i.on("$destroy",function(){e(function(){i[0].removeEventListener("submit",u)},0,false)})}var c=s[1]||l.$$parentForm;c.$addControl(l);var f=o?r(l.$name):D;if(o){f(n,l);a.$observe(o,function(t){if(l.$name===t)return;f(n,undefined);l.$$parentForm.$$renameControl(l,t);f=r(l.$name);f(n,l)})}i.on("$destroy",function(){l.$$parentForm.$removeControl(l);f(n,undefined);R(l,Ya)})}}}};return i;function r(t){if(t===""){return n('this[""]').assign}return n(t).assign||D}}]};var qa=Wa();var Xa=Wa(true);function Ka(t){t.$$classCache={};t.$$classCache[Qo]=!(t.$$classCache[Zo]=t.$$element.hasClass(Zo))}function Za(t){var e=t.clazz,n=t.set,i=t.unset;e.prototype.$setValidity=function(t,e,l){if($(e)){r(this,"$pending",t,l)}else{a(this,"$pending",t,l)}if(!et(e)){i(this.$error,t,l);i(this.$$success,t,l)}else{if(e){i(this.$error,t,l);n(this.$$success,t,l)}else{n(this.$error,t,l);i(this.$$success,t,l)}}if(this.$pending){o(this,Va,true);this.$valid=this.$invalid=undefined;s(this,"",null)}else{o(this,Va,false);this.$valid=Qa(this.$error);this.$invalid=!this.$valid;s(this,"",this.$valid)}var u;if(this.$pending&&this.$pending[t]){u=undefined}else if(this.$error[t]){u=false}else if(this.$$success[t]){u=true}else{u=null}s(this,t,u);this.$$parentForm.$setValidity(t,u,this)};function r(t,e,i,r){if(!t[e]){t[e]={}}n(t[e],i,r)}function a(t,e,n,r){if(t[e]){i(t[e],n,r)}if(Qa(t[e])){t[e]=undefined}}function o(t,e,n){if(n&&!t.$$classCache[e]){t.$$animate.addClass(t.$$element,e);t.$$classCache[e]=true}else if(!n&&t.$$classCache[e]){t.$$animate.removeClass(t.$$element,e);t.$$classCache[e]=false}}function s(t,e,n){e=e?"-"+Vt(e,"-"):"";o(t,Zo+e,n===true);o(t,Qo+e,n===false)}}function Qa(t){if(t){for(var e in t){if(t.hasOwnProperty(e)){return false}}}return true}var Ja=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/;var to=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i;var eo=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;var no=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/;var io=/^(\d{4,})-(\d{2})-(\d{2})$/;var ro=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;var ao=/^(\d{4,})-W(\d\d)$/;var oo=/^(\d{4,})-(\d\d)$/;var so=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;var lo="keydown wheel mousedown";var uo=Zt();C("date,datetime-local,month,time,week".split(","),function(t){uo[t]=true});var co={text:ho,date:mo("date",io,go(io,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":mo("datetimelocal",ro,go(ro,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:mo("time",so,go(so,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:mo("week",ao,vo,"yyyy-Www"),month:mo("month",oo,go(oo,["yyyy","MM"]),"yyyy-MM"),number:Co,url:Oo,email:To,radio:Mo,range:Eo,checkbox:Ro,hidden:D,button:D,submit:D,reset:D,file:D};function fo(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function ho(t,e,n,i,r,a){po(t,e,n,i,r,a);fo(i)}function po(t,e,n,i,r,a){var o=u(e[0].type);if(!r.android){var l=false;e.on("compositionstart",function(){l=true});e.on("compositionupdate",function(t){if($(t.data)||t.data===""){l=false}});e.on("compositionend",function(){l=false;f()})}var c;var f=function(t){if(c){a.defer.cancel(c);c=null}if(l)return;var r=e.val(),s=t&&t.type;if(o!=="password"&&(!n.ngTrim||n.ngTrim!=="false")){r=ot(r)}if(i.$viewValue!==r||r===""&&i.$$hasNativeValidators){i.$setViewValue(r,s)}};if(r.hasEvent("input")){e.on("input",f)}else{var h=function(t,e,n){if(!c){c=a.defer(function(){c=null;if(!e||e.value!==n){f(t)}})}};e.on("keydown",function(t){var e=t.keyCode;if(e===91||15<e&&e<19||37<=e&&e<=40)return;h(t,this,this.value)});if(r.hasEvent("paste")){e.on("paste cut drop",h)}}e.on("change",f);if(uo[o]&&i.$$hasNativeValidators&&o===n.type){e.on(lo,function(t){if(!c){var e=this[s];var n=e.badInput;var i=e.typeMismatch;c=a.defer(function(){c=null;if(e.badInput!==n||e.typeMismatch!==i){f(t)}})}})}i.$render=function(){var t=i.$isEmpty(i.$viewValue)?"":i.$viewValue;if(e.val()!==t){e.val(t)}}}function vo(t,e){if(z(t)){return t}if(V(t)){ao.lastIndex=0;var n=ao.exec(t);if(n){var i=+n[1],r=+n[2],a=0,o=0,s=0,l=0,u=Sa(i),c=(r-1)*7;if(e){a=e.getHours();o=e.getMinutes();s=e.getSeconds();l=e.getMilliseconds()}return new Date(i,0,u.getDate()+c,a,o,s,l)}}return NaN}function go(t,e){return function(n,i){var r,a;if(z(n)){return n}if(V(n)){if(n.charAt(0)==='"'&&n.charAt(n.length-1)==='"'){n=n.substring(1,n.length-1)}if(Ja.test(n)){return new Date(n)}t.lastIndex=0;r=t.exec(n);if(r){r.shift();if(i){a={yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}}else{a={yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0}}C(r,function(t,n){if(n<e.length){a[e[n]]=+t}});var o=new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,a.sss*1e3||0);if(a.yyyy<100){o.setFullYear(a.yyyy)}return o}}return NaN}}function mo(t,e,n,i){return function r(a,o,s,l,u,c,f){_o(a,o,s,l,t);po(a,o,s,l,u,c);var h;var d;l.$parsers.push(function(n){if(l.$isEmpty(n))return null;if(e.test(n)){return _(n,h)}l.$$parserName=t;return undefined});l.$formatters.push(function(t){if(t&&!z(t)){throw as("datefmt","Expected `{0}` to be a date",t)}if(g(t)){h=t;var e=l.$options.getOption("timezone");if(e){d=e;h=Tt(h,e,true)}return f("date")(t,i,e)}else{h=null;d=null;return""}});if(G(s.min)||s.ngMin){var p;l.$validators.min=function(t){return!g(t)||$(p)||n(t)>=p};s.$observe("min",function(t){p=m(t);l.$validate()})}if(G(s.max)||s.ngMax){var v;l.$validators.max=function(t){return!g(t)||$(v)||n(t)<=v};s.$observe("max",function(t){v=m(t);l.$validate()})}function g(t){return t&&!(t.getTime&&t.getTime()!==t.getTime())}function m(t){return G(t)&&!z(t)?_(t)||undefined:t}function _(t,e){var i=l.$options.getOption("timezone");if(d&&d!==i){e=Ot(e,Et(d))}var r=n(t,e);if(!isNaN(r)&&i){r=Tt(r,i)}return r}}}function _o(t,e,n,i,r){var a=e[0];var o=i.$$hasNativeValidators=U(a.validity);if(o){i.$parsers.push(function(t){var n=e.prop(s)||{};if(n.badInput||n.typeMismatch){i.$$parserName=r;return undefined}return t})}}function yo(t){t.$parsers.push(function(e){if(t.$isEmpty(e))return null;if(no.test(e))return parseFloat(e);t.$$parserName="number";return undefined});t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!H(e)){throw as("numfmt","Expected `{0}` to be a number",e)}e=e.toString()}return e})}function bo(t){if(G(t)&&!H(t)){t=parseFloat(t)}return!L(t)?t:undefined}function wo(t){return(t|0)===t}function xo(t){var e=t.toString();var n=e.indexOf(".");if(n===-1){if(-1<t&&t<1){var i=/e-(\d+)$/.exec(e);if(i){return Number(i[1])}}return 0}return e.length-n-1}function So(t,e,n){var i=Number(t);var r=!wo(i);var a=!wo(e);var o=!wo(n);if(r||a||o){var s=r?xo(i):0;var l=a?xo(e):0;var u=o?xo(n):0;var c=Math.max(s,l,u);var f=Math.pow(10,c);i=i*f;e=e*f;n=n*f;if(r)i=Math.round(i);if(a)e=Math.round(e);if(o)n=Math.round(n)}return(i-e)%n===0}function Co(t,e,n,i,r,a){_o(t,e,n,i,"number");yo(i);po(t,e,n,i,r,a);var o;var s;if(G(n.min)||n.ngMin){i.$validators.min=function(t,e){return i.$isEmpty(e)||$(o)||e>=o};n.$observe("min",function(t){o=bo(t);i.$validate()})}if(G(n.max)||n.ngMax){i.$validators.max=function(t,e){return i.$isEmpty(e)||$(s)||e<=s};n.$observe("max",function(t){s=bo(t);i.$validate()})}if(G(n.step)||n.ngStep){var l;i.$validators.step=function(t,e){return i.$isEmpty(e)||$(l)||So(e,o||0,l)};n.$observe("step",function(t){l=bo(t);i.$validate()})}}function Eo(t,e,n,i,r,a){_o(t,e,n,i,"range");yo(i);po(t,e,n,i,r,a);var o=i.$$hasNativeValidators&&e[0].type==="range",s=o?0:undefined,l=o?100:undefined,u=o?1:undefined,c=e[0].validity,f=G(n.min),h=G(n.max),d=G(n.step);var p=i.$render;i.$render=o&&G(c.rangeUnderflow)&&G(c.rangeOverflow)?function t(){p();i.$setViewValue(e.val())}:p;if(f){i.$validators.min=o?function t(){return true}:function t(e,n){return i.$isEmpty(n)||$(s)||n>=s};v("min",g)}if(h){i.$validators.max=o?function t(){return true}:function t(e,n){return i.$isEmpty(n)||$(l)||n<=l};v("max",m)}if(d){i.$validators.step=o?function t(){return!c.stepMismatch}:function t(e,n){return i.$isEmpty(n)||$(u)||So(n,s||0,u)};v("step",_)}function v(t,i){e.attr(t,n[t]);n.$observe(t,i)}function g(t){s=bo(t);if(L(i.$modelValue)){return}if(o){var n=e.val();if(s>n){n=s;e.val(n)}i.$setViewValue(n)}else{i.$validate()}}function m(t){l=bo(t);if(L(i.$modelValue)){return}if(o){var n=e.val();if(l<n){e.val(l);n=l<s?s:l}i.$setViewValue(n)}else{i.$validate()}}function _(t){u=bo(t);if(L(i.$modelValue)){return}if(o&&i.$viewValue!==e.val()){i.$setViewValue(e.val())}else{i.$validate()}}}function Oo(t,e,n,i,r,a){po(t,e,n,i,r,a);fo(i);i.$validators.url=function(t,e){var n=t||e;return i.$isEmpty(n)||to.test(n)}}function To(t,e,n,i,r,a){po(t,e,n,i,r,a);fo(i);i.$validators.email=function(t,e){var n=t||e;return i.$isEmpty(n)||eo.test(n)}}function Mo(t,e,n,i){var r=!n.ngTrim||ot(n.ngTrim)!=="false";if($(n.name)){e.attr("name",T())}var a=function(t){var a;if(e[0].checked){a=n.value;if(r){a=ot(a)}i.$setViewValue(a,t&&t.type)}};e.on("change",a);i.$render=function(){var t=n.value;if(r){t=ot(t)}e[0].checked=t===i.$viewValue};n.$observe("value",i.$render)}function Io(t,e,n,i,r){var a;if(G(i)){a=t(i);if(!a.constant){throw as("constexpr","Expected constant expression for `{0}`, but saw "+"`{1}`.",n,i)}return a(e)}return r}function Ro(t,e,n,i,r,a,o,s){var l=Io(s,t,"ngTrueValue",n.ngTrueValue,true);var u=Io(s,t,"ngFalseValue",n.ngFalseValue,false);var c=function(t){i.$setViewValue(e[0].checked,t&&t.type)};e.on("change",c);i.$render=function(){e[0].checked=i.$viewValue};i.$isEmpty=function(t){return t===false};i.$formatters.push(function(t){return vt(t,l)});i.$parsers.push(function(t){return t?l:u})}var No=["$browser","$sniffer","$filter","$parse",function(t,e,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,a,o,s){if(s[0]){(co[u(o.type)]||co.text)(r,a,o,s[0],e,t,n,i)}}}}}];var Ao=/^(true|false|\d+)$/;var Lo=function(){function t(t,e,n){var i=G(n)?n:f===9?"":null;t.prop("value",i);e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){if(Ao.test(n.ngValue)){return function e(n,i,r){var a=n.$eval(r.ngValue);t(i,r,a)}}else{return function e(n,i,r){n.$watch(r.ngValue,function e(n){t(i,r,n)})}}}}};var Po=["$compile",function(t){return{restrict:"AC",compile:function e(n){t.$$addBindingClass(n);return function e(n,i,r){t.$$addBindingInfo(i,r.ngBind);i=i[0];n.$watch(r.ngBind,function t(e){i.textContent=Qt(e)})}}}}];var Do=["$interpolate","$compile",function(t,e){return{compile:function n(i){e.$$addBindingClass(i);return function n(i,r,a){var o=t(r.attr(a.$attr.ngBindTemplate));e.$$addBindingInfo(r,o.expressions);r=r[0];a.$observe("ngBindTemplate",function(t){r.textContent=$(t)?"":t})}}}}];var jo=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function i(r,a){var o=e(a.ngBindHtml);var s=e(a.ngBindHtml,function e(n){return t.valueOf(n)});n.$$addBindingClass(r);return function e(i,r,a){n.$$addBindingInfo(r,a.ngBindHtml);i.$watch(s,function e(){var n=o(i);r.html(t.getTrustedHtml(n)||"")})}}}}];var ko=k({restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}});function Fo(t,e){t="ngClass"+t;var n;return["$parse",function(o){return{restrict:"AC",link:function(s,l,u){var c=l.data("$classCounts");var f=true;var h;if(!c){c=Zt();l.data("$classCounts",c)}if(t!=="ngClass"){if(!n){n=o("$index",function t(e){return e&1})}s.$watch(n,m)}s.$watch(o(u[t],a),_);function d(t){t=g(r(t),1);u.$addClass(t)}function p(t){t=g(r(t),-1);u.$removeClass(t)}function v(t,e){var n=r(t);var a=r(e);var o=i(n,a);var s=i(a,n);var l=g(o,-1);var c=g(s,1);u.$addClass(c);u.$removeClass(l)}function g(t,e){var n=[];C(t,function(t){if(e>0||c[t]){c[t]=(c[t]||0)+e;if(c[t]===+(e>0)){n.push(t)}}});return n.join(" ")}function m(t){if(t===e){d(h)}else{p(h)}f=t}function _(t){if(f===e){v(h,t)}h=t}}}}];function i(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var i=0;i<t.length;i++){var r=t[i];for(var a=0;a<e.length;a++){if(r===e[a])continue t}n.push(r)}return n}function r(t){return t&&t.split(" ")}function a(t){var e=t;if(B(t)){e=t.map(a).join(" ")}else if(U(t)){e=Object.keys(t).filter(function(e){return t[e]}).join(" ")}return e}}var $o=Fo("",true);var Go=Fo("Odd",0);var Uo=Fo("Even",1);var Yo=$a({compile:function(t,e){e.$set("ngCloak",undefined);t.removeClass("ng-cloak")}});var Vo=[function(){return{restrict:"A",scope:true,controller:"@",priority:500}}];var Ho={};var zo={blur:true,focus:true};C("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=Kn("ng-"+t);Ho[e]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,a){var o=n(a[e]);return function e(n,r){r.on(t,function(e){var r=function(){o(n,{$event:e})};if(zo[t]&&i.$$phase){n.$evalAsync(r)}else{n.$apply(r)}})}}}}]});var Bo=["$animate","$compile",function(t,e){return{multiElement:true,transclude:"element",priority:600,terminal:true,restrict:"A",$$tlb:true,link:function(n,i,r,a,o){var s,l,u;n.$watch(r.ngIf,function n(a){if(a){if(!l){o(function(n,a){l=a;n[n.length++]=e.$$createComment("end ngIf",r.ngIf);s={clone:n};t.enter(n,i.parent(),i)})}}else{if(u){u.remove();u=null}if(l){l.$destroy();l=null}if(s){u=Kt(s.clone);t.leave(u).done(function(t){if(t!==false)u=null});s=null}}})}}}];var Wo=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:true,transclude:"element",controller:b.noop,compile:function(i,r){var a=r.ngInclude||r.src,o=r.onload||"",s=r.autoscroll;return function(i,r,l,u,c){var f=0,h,d,p;var v=function(){if(d){d.remove();d=null}if(h){h.$destroy();h=null}if(p){n.leave(p).done(function(t){if(t!==false)d=null});d=p;p=null}};i.$watch(a,function a(l){var d=function(t){if(t!==false&&G(s)&&(!s||i.$eval(s))){e()}};var g=++f;if(l){t(l,true).then(function(t){if(i.$$destroyed)return;if(g!==f)return;var e=i.$new();u.template=t;var a=c(e,function(t){v();n.enter(t,null,r).done(d)});h=e;p=a;h.$emit("$includeContentLoaded",l);i.$eval(o)},function(){if(i.$$destroyed)return;if(g===f){v();i.$emit("$includeContentError",l)}});i.$emit("$includeContentRequested",l)}else{v();u.template=null}})}}}}];var qo=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,a){if(m.call(i[0]).match(/SVG/)){i.empty();t(Ie(a.template,e.document).childNodes)(n,function t(e){i.append(e)},{futureParentElement:i});return}i.html(a.template);t(i.contents())(n)}}}];var Xo=$a({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}});var Ko=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,i){var r=n.ngList||", ";var a=n.ngTrim!=="false";var o=a?ot(r):r;var s=function(t){if($(t))return;var e=[];if(t){C(t.split(o),function(t){if(t)e.push(a?ot(t):t)})}return e};i.$parsers.push(s);i.$formatters.push(function(t){if(B(t)){return t.join(r)}return undefined});i.$isEmpty=function(t){return!t||!t.length}}}};var Zo="ng-valid",Qo="ng-invalid",Jo="ng-pristine",ts="ng-dirty",es="ng-untouched",ns="ng-touched",is="ng-empty",rs="ng-not-empty";var as=a("ngModel");os.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"];function os(t,e,n,i,r,a,o,s,l){this.$viewValue=Number.NaN;this.$modelValue=Number.NaN;this.$$rawModelValue=undefined;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=true;this.$touched=false;this.$pristine=true;this.$dirty=false;this.$valid=true;this.$invalid=false;this.$error={};this.$$success={};this.$pending=undefined;this.$name=l(n.name||"",false)(t);this.$$parentForm=Ya;this.$options=us;this.$$updateEvents="";this.$$updateEventHandler=this.$$updateEventHandler.bind(this);this.$$parsedNgModel=r(n.ngModel);this.$$parsedNgModelAssign=this.$$parsedNgModel.assign;this.$$ngModelGet=this.$$parsedNgModel;this.$$ngModelSet=this.$$parsedNgModelAssign;this.$$pendingDebounce=null;this.$$parserValid=undefined;this.$$parserName="parse";this.$$currentValidationRunId=0;this.$$scope=t;this.$$attr=n;this.$$element=i;this.$$animate=a;this.$$timeout=o;this.$$parse=r;this.$$q=s;this.$$exceptionHandler=e;Ka(this);ss(this)}os.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);if(q(n)){n=t(e)}return n};this.$$ngModelSet=function(t,n){if(q(this.$$parsedNgModel(t))){e(t,{$$$p:n})}else{this.$$parsedNgModelAssign(t,n)}}}else if(!this.$$parsedNgModel.assign){throw as("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,Mt(this.$$element))}},$render:D,$isEmpty:function(t){return $(t)||t===""||t===null||t!==t},$$updateEmptyClasses:function(t){if(this.$isEmpty(t)){this.$$animate.removeClass(this.$$element,rs);this.$$animate.addClass(this.$$element,is)}else{this.$$animate.removeClass(this.$$element,is);this.$$animate.addClass(this.$$element,rs)}},$setPristine:function(){this.$dirty=false;this.$pristine=true;this.$$animate.removeClass(this.$$element,ts);this.$$animate.addClass(this.$$element,Jo)},$setDirty:function(){this.$dirty=true;this.$pristine=false;this.$$animate.removeClass(this.$$element,Jo);this.$$animate.addClass(this.$$element,ts);this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=false;this.$untouched=true;this.$$animate.setClass(this.$$element,es,ns)},$setTouched:function(){this.$touched=true;this.$untouched=false;this.$$animate.setClass(this.$$element,ns,es)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce);this.$viewValue=this.$$lastCommittedViewValue;this.$render()},$validate:function(){if(L(this.$modelValue)){return}var t=this.$$lastCommittedViewValue;var e=this.$$rawModelValue;var n=this.$valid;var i=this.$modelValue;var r=this.$options.getOption("allowInvalid");var a=this;this.$$runValidators(e,t,function(t){if(!r&&n!==t){a.$modelValue=t?e:undefined;if(a.$modelValue!==i){a.$$writeModelToScope()}}})},$$runValidators:function(t,e,n){this.$$currentValidationRunId++;var i=this.$$currentValidationRunId;var r=this;if(!a()){u(false);return}if(!o()){u(false);return}s();function a(){var t=r.$$parserName;if($(r.$$parserValid)){l(t,null)}else{if(!r.$$parserValid){C(r.$validators,function(t,e){l(e,null)});C(r.$asyncValidators,function(t,e){l(e,null)})}l(t,r.$$parserValid);return r.$$parserValid}return true}function o(){var n=true;C(r.$validators,function(i,r){var a=Boolean(i(t,e));n=n&&a;l(r,a)});if(!n){C(r.$asyncValidators,function(t,e){l(e,null)});return false}return true}function s(){var n=[];var i=true;C(r.$asyncValidators,function(r,a){var o=r(t,e);if(!nt(o)){throw as("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",o)}l(a,undefined);n.push(o.then(function(){l(a,true)},function(){i=false;l(a,false)}))});if(!n.length){u(true)}else{r.$$q.all(n).then(function(){u(i)},D)}}function l(t,e){if(i===r.$$currentValidationRunId){r.$setValidity(t,e)}}function u(t){if(i===r.$$currentValidationRunId){n(t)}}},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce);if(this.$$lastCommittedViewValue===t&&(t!==""||!this.$$hasNativeValidators)){return}this.$$updateEmptyClasses(t);this.$$lastCommittedViewValue=t;if(this.$pristine){this.$setDirty()}this.$$parseAndValidate()},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue;var e=t;var n=this;this.$$parserValid=$(e)?undefined:true;this.$setValidity(this.$$parserName,null);this.$$parserName="parse";if(this.$$parserValid){for(var i=0;i<this.$parsers.length;i++){e=this.$parsers[i](e);if($(e)){this.$$parserValid=false;break}}}if(L(this.$modelValue)){this.$modelValue=this.$$ngModelGet(this.$$scope)}var r=this.$modelValue;var a=this.$options.getOption("allowInvalid");this.$$rawModelValue=e;if(a){this.$modelValue=e;o()}this.$$runValidators(e,this.$$lastCommittedViewValue,function(t){if(!a){n.$modelValue=t?e:undefined;o()}});function o(){if(n.$modelValue!==r){n.$$writeModelToScope()}}},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue);C(this.$viewChangeListeners,function(t){try{t()}catch(t){this.$$exceptionHandler(t)}},this)},$setViewValue:function(t,e){this.$viewValue=t;if(this.$options.getOption("updateOnDefault")){this.$$debounceViewValueCommit(e)}},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");if(H(e[t])){e=e[t]}else if(H(e["default"])&&this.$options.getOption("updateOn").indexOf(t)===-1){e=e["default"]}else if(H(e["*"])){e=e["*"]}this.$$timeout.cancel(this.$$pendingDebounce);var n=this;if(e>0){this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},e)}else if(this.$$scope.$root.$$phase){this.$commitViewValue()}else{this.$$scope.$apply(function(){n.$commitViewValue()})}},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t);this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();if(this.$viewValue!==t){this.$$updateEmptyClasses(t);this.$viewValue=this.$$lastCommittedViewValue=t;this.$render();this.$$runValidators(this.$modelValue,this.$viewValue,D)}},$$format:function(){var t=this.$formatters,e=t.length;var n=this.$modelValue;while(e--){n=t[e](n)}return n},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t;this.$$parserValid=undefined;this.$processModelValue()},$$setUpdateOnEvents:function(){if(this.$$updateEvents){this.$$element.off(this.$$updateEvents,this.$$updateEventHandler)}this.$$updateEvents=this.$options.getOption("updateOn");if(this.$$updateEvents){this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)}},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}};function ss(t){t.$$scope.$watch(function e(n){var i=t.$$ngModelGet(n);if(i!==t.$modelValue&&(t.$modelValue===t.$modelValue||i===i)){t.$$setModelValue(i)}return i})}Za({clazz:os,set:function(t,e){t[e]=true},unset:function(t,e){delete t[e]}});var ls=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:os,priority:1,compile:function e(n){n.addClass(Jo).addClass(es).addClass(Zo);return{pre:function t(e,n,i,r){var a=r[0],o=r[1]||a.$$parentForm,s=r[2];if(s){a.$options=s.$options}a.$$initGetterSetters();o.$addControl(a);i.$observe("name",function(t){if(a.$name!==t){a.$$parentForm.$$renameControl(a,t)}});e.$on("$destroy",function(){a.$$parentForm.$removeControl(a)})},post:function e(n,i,r,a){var o=a[0];o.$$setUpdateOnEvents();function s(){o.$setTouched()}i.on("blur",function(){if(o.$touched)return;if(t.$$phase){n.$evalAsync(s)}else{n.$apply(s)}})}}}}}];var us;var cs=/(\s+|^)default(\s+|$)/;function fs(t){this.$$options=t}fs.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=false;t=R({},t);C(t,function(n,i){if(n==="$inherit"){if(i==="*"){e=true}else{t[i]=this.$$options[i];if(i==="updateOn"){t.updateOnDefault=this.$$options.updateOnDefault}}}else{if(i==="updateOn"){t.updateOnDefault=false;t[i]=ot(n.replace(cs,function(){t.updateOnDefault=true;return" "}))}}},this);if(e){delete t["*"];ds(t,this.$$options)}ds(t,us.$$options);return new fs(t)}};us=new fs({updateOn:"",updateOnDefault:true,debounce:0,getterSetter:false,allowInvalid:false,timezone:null});var hs=function(){t.$inject=["$attrs","$scope"];function t(t,e){this.$$attrs=t;this.$$scope=e}t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:us;var e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}};return{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:true,controller:t}};function ds(t,e){C(e,function(e,n){if(!G(t[n])){t[n]=e}})}var ps=$a({terminal:true,priority:1e3});var vs=a("ngOptions");var gs=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/;var ms=["$compile","$document","$parse",function(t,n,i){function r(t,e,n){var r=t.match(gs);if(!r){throw vs("iexp","Expected expression in form of "+"'_select_ (as _label_)? for (_key_,)?_value_ in _collection_'"+" but got '{0}'. Element: {1}",t,Mt(e))}var a=r[5]||r[7];var o=r[6];var s=/ as /.test(r[0])&&r[1];var l=r[9];var u=i(r[2]?r[1]:a);var c=s&&i(s);var f=c||u;var h=l&&i(l);var d=l?function(t,e){return h(n,e)}:function t(e){return un(e)};var p=function(t,e){return d(t,b(t,e))};var v=i(r[2]||r[1]);var g=i(r[3]||"");var m=i(r[4]||"");var _=i(r[8]);var y={};var b=o?function(t,e){y[o]=e;y[a]=t;return y}:function(t){y[a]=t;return y};function w(t,e,n,i,r){this.selectValue=t;this.viewValue=e;this.label=n;this.group=i;this.disabled=r}function x(t){var e;if(!o&&S(t)){e=t}else{e=[];for(var n in t){if(t.hasOwnProperty(n)&&n.charAt(0)!=="$"){e.push(n)}}}return e}return{trackBy:l,getTrackByValue:p,getWatchables:i(_,function(t){var e=[];t=t||[];var i=x(t);var a=i.length;for(var o=0;o<a;o++){var s=t===i?o:i[o];var l=t[s];var u=b(l,s);var c=d(l,u);e.push(c);if(r[2]||r[1]){var f=v(n,u);e.push(f)}if(r[4]){var h=m(n,u);e.push(h)}}return e}),getOptions:function(){var t=[];var e={};var i=_(n)||[];var r=x(i);var a=r.length;for(var o=0;o<a;o++){var s=i===r?o:r[o];var u=i[s];var c=b(u,s);var h=f(n,c);var y=d(h,c);var S=v(n,c);var C=g(n,c);var E=m(n,c);var O=new w(y,h,S,C,E);t.push(O);e[y]=O}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[p(t)]},getViewValueFromOption:function(t){return l?dt(t.viewValue):t.viewValue}}}}}var a=e.document.createElement("option"),o=e.document.createElement("optgroup");function s(e,i,s,l){var u=l[0];var c=l[1];var f=s.multiple;for(var d=0,p=i.children(),v=p.length;d<v;d++){if(p[d].value===""){u.hasEmptyOption=true;u.emptyOption=p.eq(d);break}}i.empty();var g=!!u.emptyOption;var m=h(a.cloneNode(false));m.val("?");var _;var y=r(s.ngOptions,i,e);var b=n[0].createDocumentFragment();u.generateUnknownOptionValue=function(t){return"?"};if(!f){u.writeValue=function t(e){if(!_)return;var n=i[0].options[i[0].selectedIndex];var r=_.getOptionFromViewValue(e);if(n)n.removeAttribute("selected");if(r){if(i[0].value!==r.selectValue){u.removeUnknownOption();i[0].value=r.selectValue;r.element.selected=true}r.element.setAttribute("selected","selected")}else{u.selectUnknownOrEmptyOption(e)}};u.readValue=function t(){var e=_.selectValueMap[i.val()];if(e&&!e.disabled){u.unselectEmptyOption();u.removeUnknownOption();return _.getViewValueFromOption(e)}return null};if(y.trackBy){e.$watch(function(){return y.getTrackByValue(c.$viewValue)},function(){c.$render()})}}else{u.writeValue=function t(e){if(!_)return;var n=e&&e.map(x)||[];_.items.forEach(function(t){if(t.element.selected&&!ft(n,t)){t.element.selected=false}})};u.readValue=function t(){var e=i.val()||[],n=[];C(e,function(t){var e=_.selectValueMap[t];if(e&&!e.disabled)n.push(_.getViewValueFromOption(e))});return n};if(y.trackBy){e.$watchCollection(function(){if(B(c.$viewValue)){return c.$viewValue.map(function(t){return y.getTrackByValue(t)})}},function(){c.$render()})}}if(g){t(u.emptyOption)(e);i.prepend(u.emptyOption);if(u.emptyOption[0].nodeType===ne){u.hasEmptyOption=false;u.registerOption=function(t,e){if(e.val()===""){u.hasEmptyOption=true;u.emptyOption=e;u.emptyOption.removeClass("ng-scope");c.$render();e.on("$destroy",function(){var t=u.$isEmptyOptionSelected();u.hasEmptyOption=false;u.emptyOption=undefined;if(t)c.$render()})}}}else{u.emptyOption.removeClass("ng-scope")}}e.$watchCollection(y.getWatchables,E);function w(t,e){var n=a.cloneNode(false);e.appendChild(n);S(t,n)}function x(t){var e=_.getOptionFromViewValue(t);var n=e&&e.element;if(n&&!n.selected)n.selected=true;return e}function S(t,e){t.element=e;e.disabled=t.disabled;if(t.label!==e.label){e.label=t.label;e.textContent=t.label}e.value=t.selectValue}function E(){var t=_&&u.readValue();if(_){for(var e=_.items.length-1;e>=0;e--){var n=_.items[e];if(G(n.group)){Xe(n.element.parentNode)}else{Xe(n.element)}}}_=y.getOptions();var r={};_.items.forEach(function t(e){var n;if(G(e.group)){n=r[e.group];if(!n){n=o.cloneNode(false);b.appendChild(n);n.label=e.group===null?"null":e.group;r[e.group]=n}w(e,n)}else{w(e,b)}});i[0].appendChild(b);c.$render();if(!c.$isEmpty(t)){var a=u.readValue();var s=y.trackBy||f;if(s?!vt(t,a):t!==a){c.$setViewValue(a);c.$render()}}}}return{restrict:"A",terminal:true,require:["select","ngModel"],link:{pre:function t(e,n,i,r){r[0].registerOption=D},post:s}}}];var _s=["$locale","$interpolate","$log",function(t,e,n){var i=/{}/g,r=/^when(Minus)?(.+)$/;return{link:function(a,o,s){var l=s.count,c=s.$attr.when&&o.attr(s.$attr.when),f=s.offset||0,h=a.$eval(c)||{},d={},p=e.startSymbol(),v=e.endSymbol(),g=p+l+"-"+f+v,m=b.noop,_;C(s,function(t,e){var n=r.exec(e);if(n){var i=(n[1]?"-":"")+u(n[2]);h[i]=o.attr(s.$attr[e])}});C(h,function(t,n){d[n]=e(t.replace(i,g))});a.$watch(l,function e(i){var r=parseFloat(i);var o=L(r);if(!o&&!(r in h)){r=t.pluralCat(r-f)}if(r!==_&&!(o&&L(_))){m();var s=d[r];if($(s)){if(i!=null){n.debug("ngPluralize: no rule defined for '"+r+"' in "+c)}m=D;y()}else{m=a.$watch(s,y)}_=r}});function y(t){o.text(t||"")}}}}];var ys=["$parse","$animate","$compile",function(t,e,n){var i="$$NG_REMOVED";var r=a("ngRepeat");var o=function(t,e,n,i,r,a,o){t[n]=i;if(r)t[r]=a;t.$index=e;t.$first=e===0;t.$last=e===o-1;t.$middle=!(t.$first||t.$last);t.$odd=!(t.$even=(e&1)===0)};var s=function(t){return t.clone[0]};var u=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:true,transclude:"element",priority:1e3,terminal:true,$$tlb:true,compile:function a(c,f){var h=f.ngRepeat;var d=n.$$createComment("end ngRepeat",h);var p=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p){throw r("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",h)}var v=p[1];var g=p[2];var m=p[3];var _=p[4];p=v.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);if(!p){throw r("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",v)}var y=p[3]||p[1];var b=p[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m))){throw r("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",m)}var w,x,E,O;var T={$id:un};if(_){w=t(_)}else{E=function(t,e){return un(e)};O=function(t){return t}}return function t(n,a,c,f,p){if(w){x=function(t,e,i){if(b)T[b]=t;T[y]=e;T.$index=i;return w(n,T)}}var v=Zt();n.$watchCollection(g,function t(c){var f,g,_=a[0],w,T=Zt(),M,I,R,N,A,L,P,D,j;if(m){n[m]=c}if(S(c)){L=c;A=x||E}else{A=x||O;L=[];for(var k in c){if(l.call(c,k)&&k.charAt(0)!=="$"){L.push(k)}}}M=L.length;D=new Array(M);for(f=0;f<M;f++){I=c===L?f:L[f];R=c[I];N=A(I,R,f);if(v[N]){P=v[N];delete v[N];T[N]=P;D[f]=P}else if(T[N]){C(D,function(t){if(t&&t.scope)v[t.id]=t});throw r("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",h,N,R)}else{D[f]={id:N,scope:undefined,clone:undefined};T[N]=true}}for(var F in v){P=v[F];j=Kt(P.clone);e.leave(j);if(j[0].parentNode){for(f=0,g=j.length;f<g;f++){j[f][i]=true}}P.scope.$destroy()}for(f=0;f<M;f++){I=c===L?f:L[f];R=c[I];P=D[f];if(P.scope){w=_;do{w=w.nextSibling}while(w&&w[i]);if(s(P)!==w){e.move(Kt(P.clone),null,_)}_=u(P);o(P.scope,f,y,R,b,I,M)}else{p(function t(n,i){P.scope=i;var r=d.cloneNode(false);n[n.length++]=r;e.enter(n,null,_);_=r;P.clone=n;T[P.id]=P;o(P.scope,f,y,R,b,I,M)})}}v=T})}}}}];var bs="ng-hide";var ws="ng-hide-animate";var xs=["$animate",function(t){return{restrict:"A",multiElement:true,link:function(e,n,i){e.$watch(i.ngShow,function e(i){t[i?"removeClass":"addClass"](n,bs,{tempClasses:ws})})}}}];var Ss=["$animate",function(t){return{restrict:"A",multiElement:true,link:function(e,n,i){e.$watch(i.ngHide,function e(i){t[i?"addClass":"removeClass"](n,bs,{tempClasses:ws})})}}}];var Cs=$a(function(t,e,n){t.$watchCollection(n.ngStyle,function t(n,i){if(i&&n!==i){C(i,function(t,n){e.css(n,"")})}if(n)e.css(n)})});var Es=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function t(){this.cases={}}],link:function(n,i,r,a){var o=r.ngSwitch||r.on,s=[],l=[],u=[],c=[];var f=function(t,e){return function(n){if(n!==false)t.splice(e,1)}};n.$watch(o,function n(i){var r,o;while(u.length){t.cancel(u.pop())}for(r=0,o=c.length;r<o;++r){var h=Kt(l[r].clone);c[r].$destroy();var d=u[r]=t.leave(h);d.done(f(u,r))}l.length=0;c.length=0;if(s=a.cases["!"+i]||a.cases["?"]){C(s,function(n){n.transclude(function(i,r){c.push(r);var a=n.element;i[i.length++]=e.$$createComment("end ngSwitchWhen");var o={clone:i};l.push(o);t.enter(i,a.parent(),a)})})}})}}}];var Os=$a({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:true,link:function(t,e,n,i,r){var a=n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(t,e,n){return n[e-1]!==t});C(a,function(t){i.cases["!"+t]=i.cases["!"+t]||[];i.cases["!"+t].push({transclude:r,element:e})})}});var Ts=$a({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:true,link:function(t,e,n,i,r){i.cases["?"]=i.cases["?"]||[];i.cases["?"].push({transclude:r,element:e})}});var Ms=a("ngTransclude");var Is=["$compile",function(t){return{restrict:"EAC",compile:function e(n){var i=t(n.contents());n.empty();return function t(e,n,r,a,o){if(!o){throw Ms("orphan","Illegal use of ngTransclude directive in the template! "+"No parent directive that requires a transclusion found. "+"Element: {0}",Mt(n))}if(r.ngTransclude===r.$attr.ngTransclude){r.ngTransclude=""}var s=r.ngTransclude||r.ngTranscludeSlot;o(l,null,s);if(s&&!o.isSlotFilled(s)){u()}function l(t,e){if(t.length&&c(t)){n.append(t)}else{u();e.$destroy()}}function u(){i(e,function(t){n.append(t)})}function c(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];if(i.nodeType!==ee||i.nodeValue.trim()){return true}}}}}}}];var Rs=["$templateCache",function(t){return{restrict:"E",terminal:true,compile:function(e,n){if(n.type==="text/ng-template"){var i=n.id,r=e[0].text;t.put(i,r)}}}}];var Ns={$setViewValue:D,$render:D};function As(t,e){t.prop("selected",e);t.attr("selected",e)}var Ls=["$element","$scope",function(t,n){var i=this,r=new hn;i.selectValueMap={};i.ngModelCtrl=Ns;i.multiple=false;i.unknownOption=h(e.document.createElement("option"));i.hasEmptyOption=false;i.emptyOption=undefined;i.renderUnknownOption=function(e){var n=i.generateUnknownOptionValue(e);i.unknownOption.val(n);t.prepend(i.unknownOption);As(i.unknownOption,true);t.val(n)};i.updateUnknownOption=function(e){var n=i.generateUnknownOptionValue(e);i.unknownOption.val(n);As(i.unknownOption,true);t.val(n)};i.generateUnknownOptionValue=function(t){return"? "+un(t)+" ?"};i.removeUnknownOption=function(){if(i.unknownOption.parent())i.unknownOption.remove()};i.selectEmptyOption=function(){if(i.emptyOption){t.val("");As(i.emptyOption,true)}};i.unselectEmptyOption=function(){if(i.hasEmptyOption){As(i.emptyOption,false)}};n.$on("$destroy",function(){i.renderUnknownOption=D});i.readValue=function e(){var n=t.val();var r=n in i.selectValueMap?i.selectValueMap[n]:n;if(i.hasOption(r)){return r}return null};i.writeValue=function e(n){var r=t[0].options[t[0].selectedIndex];if(r)As(h(r),false);if(i.hasOption(n)){i.removeUnknownOption();var a=un(n);t.val(a in i.selectValueMap?a:n);var o=t[0].options[t[0].selectedIndex];As(h(o),true)}else{i.selectUnknownOrEmptyOption(n)}};i.addOption=function(t,e){if(e[0].nodeType===ne)return;qt(t,'"option value"');if(t===""){i.hasEmptyOption=true;i.emptyOption=e}var n=r.get(t)||0;r.set(t,n+1);o()};i.removeOption=function(t){var e=r.get(t);if(e){if(e===1){r.delete(t);if(t===""){i.hasEmptyOption=false;i.emptyOption=undefined}}else{r.set(t,e-1)}}};i.hasOption=function(t){return!!r.get(t)};i.$hasEmptyOption=function(){return i.hasEmptyOption};i.$isUnknownOptionSelected=function(){return t[0].options[0]===i.unknownOption[0]};i.$isEmptyOptionSelected=function(){return i.hasEmptyOption&&t[0].options[t[0].selectedIndex]===i.emptyOption[0]};i.selectUnknownOrEmptyOption=function(t){if(t==null&&i.emptyOption){i.removeUnknownOption();i.selectEmptyOption()}else if(i.unknownOption.parent().length){i.updateUnknownOption(t)}else{i.renderUnknownOption(t)}};var a=false;function o(){if(a)return;a=true;n.$$postDigest(function(){a=false;i.ngModelCtrl.$render()})}var s=false;function l(t){if(s)return;s=true;n.$$postDigest(function(){if(n.$$destroyed)return;s=false;i.ngModelCtrl.$setViewValue(i.readValue());if(t)i.ngModelCtrl.$render()})}i.registerOption=function(t,e,n,r,a){if(n.$attr.ngValue){var s,u=NaN;n.$observe("value",function t(n){var r;var a=e.prop("selected");if(G(u)){i.removeOption(s);delete i.selectValueMap[u];r=true}u=un(n);s=n;i.selectValueMap[u]=n;i.addOption(n,e);e.attr("value",u);if(r&&a){l()}})}else if(r){n.$observe("value",function t(n){i.readValue();var r;var a=e.prop("selected");if(G(s)){i.removeOption(s);r=true}s=n;i.addOption(n,e);if(r&&a){l()}})}else if(a){t.$watch(a,function t(r,a){n.$set("value",r);var o=e.prop("selected");if(a!==r){i.removeOption(a)}i.addOption(r,e);if(a&&o){l()}})}else{i.addOption(n.value,e)}n.$observe("disabled",function(t){if(t==="true"||t&&e.prop("selected")){if(i.multiple){l(true)}else{i.ngModelCtrl.$setViewValue(null);i.ngModelCtrl.$render()}}});e.on("$destroy",function(){var t=i.readValue();var e=n.value;i.removeOption(e);o();if(i.multiple&&t&&t.indexOf(e)!==-1||t===e){l(true)}})}}];var Ps=function(){return{restrict:"E",require:["select","?ngModel"],controller:Ls,priority:1,link:{pre:t,post:e}};function t(t,e,n,i){var r=i[0];var a=i[1];if(!a){r.registerOption=D;return}r.ngModelCtrl=a;e.on("change",function(){r.removeUnknownOption();t.$apply(function(){a.$setViewValue(r.readValue())})});if(n.multiple){r.multiple=true;r.readValue=function t(){var n=[];C(e.find("option"),function(t){if(t.selected&&!t.disabled){var e=t.value;n.push(e in r.selectValueMap?r.selectValueMap[e]:e)}});return n};r.writeValue=function t(n){C(e.find("option"),function(t){var e=!!n&&(ft(n,t.value)||ft(n,r.selectValueMap[t.value]));var i=t.selected;if(e!==i){As(h(t),e)}})};var o,s=NaN;t.$watch(function t(){if(s===a.$viewValue&&!vt(o,a.$viewValue)){o=oe(a.$viewValue);a.$render()}s=a.$viewValue});a.$isEmpty=function(t){return!t||t.length===0}}}function e(t,e,n,i){var r=i[1];if(!r)return;var a=i[0];r.$render=function(){a.writeValue(r.$viewValue)}}};var Ds=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var i,r;if(G(n.ngValue)){}else if(G(n.value)){i=t(n.value,true)}else{r=t(e.text(),true);if(!r){n.$set("value",e.text())}}return function(t,e,n){var a="$selectController",o=e.parent(),s=o.data(a)||o.parent().data(a);if(s){s.registerOption(t,e,n,i,r)}}}}}];var js=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(!i)return;n.required=true;i.$validators.required=function(t,e){return!n.required||!i.$isEmpty(e)};n.$observe("required",function(){i.$validate()})}}};var ks=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(!i)return;var r,o=n.ngPattern||n.pattern;n.$observe("pattern",function(t){if(V(t)&&t.length>0){t=new RegExp("^"+t+"$")}if(t&&!t.test){throw a("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",o,t,Mt(e))}r=t||undefined;i.$validate()});i.$validators.pattern=function(t,e){return i.$isEmpty(e)||$(r)||r.test(e)}}}};var Fs=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(!i)return;var r=-1;n.$observe("maxlength",function(t){var e=A(t);r=L(e)?-1:e;i.$validate()});i.$validators.maxlength=function(t,e){return r<0||i.$isEmpty(e)||e.length<=r}}}};var $s=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(!i)return;var r=0;n.$observe("minlength",function(t){r=A(t)||0;i.$validate()});i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=r}}}};if(e.angular.bootstrap){if(e.console){console.log("WARNING: Tried to load AngularJS more than once.")}return}zt();ce(b);b.module("ngLocale",[],["$provide",function(t){var e={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};function n(t){t=t+"";var e=t.indexOf(".");return e==-1?0:t.length-e-1}function i(t,e){var i=e;if(undefined===i){i=Math.min(n(t),3)}var r=Math.pow(10,i);var a=(t*r|0)%r;return{v:i,f:a}}t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,n){var r=t|0;var a=i(t,n);if(r==1&&a.v==0){return e.ONE}return e.OTHER}})}]);h(function(){Ft(e.document,$t)})})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')}).call(this,n(38))},function(t,e,n){n(535);t.exports=angular},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},,,,,,,function(t,e){},function(t,e){},,,,,,,function(t,e){},,function(t,e){}]]);
//# sourceMappingURL=commons.4d8dbc.js.map