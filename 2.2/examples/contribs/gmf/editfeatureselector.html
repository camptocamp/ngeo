<!DOCTYPE html>
<html ng-app='gmfapp'>
  <head>
    <script src="../../https.js"></script>
    <title>GeoMapFish EditFeature selector example</title>
    <meta charset="utf-8">
    <meta name="viewport"
          content="initial-scale=1.0, user-scalable=no, width=device-width">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="../../lib/ngeo.css" type="text/css">
    <link rel="stylesheet" href="../../lib/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="../../lib/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="../../lib/jquery-ui.min.css">
    <style>
      body {
        padding: 1rem;
      }
      .panel {
        display: block;
        float: left;
        margin: 0 1rem 0 0;
        width: 35rem;
      }
      gmf-map > div {
        width: 60rem;
        height: 40rem;
      }
      gmf-editfeatureselector {
        display: block;
        width: 30rem;
      }
      gmf-editfeature {
        display: block;
      }
      .gmf-editfeatureselector-stopediting {
        float: right;
      }
      ngeo-attributes {
        border-top: 0.1rem solid black;
        display: block;
        padding: 1rem 0;
      }
      .gmf-editfeature-btn-delete {
        float: right;
      }

      /* measure tooltips  */
      .tooltip {
        position: relative;
        background: rgba(0, 0, 0, 0.5);
        border-radius: 4px;
        color: white;
        padding: 4px 8px;
        opacity: 0.7;
        white-space: nowrap;
      }
      .ngeo-tooltip-measure {
        opacity: 1;
        font-weight: bold;
      }
      .ngeo-tooltip-static {
        display: none;
      }
      .ngeo-tooltip-measure:before,
      .ngeo-tooltip-static:before {
        border-top: 6px solid rgba(0, 0, 0, 0.5);
        border-right: 6px solid transparent;
        border-left: 6px solid transparent;
        content: "";
        position: absolute;
        bottom: -6px;
        margin-left: -7px;
        left: 50%;
      }
      .ngeo-tooltip-static:before {
        border-top-color: #ffcc33;
      }
    </style>
  </head>
  <body ng-controller="MainController as ctrl">
    <gmf-map gmf-map-map="ctrl.map"></gmf-map>

    <p id="desc">
      This example shows how to use the <code>gmf-editfeatureselector</code>
      directive to edit vector features from editable layers that are defined
      in the GeoMapFish themes. First, you need to login. Then, select the
      layer you wish to edit. Finally, you can either click on an existing
      feature on map to modify or delete it, or you can create a new one using
      the "Draw" button.
    </p>

    <p><strong>Note:</strong> After logging it, you need to refresh the page</p>

    <gmf-layertree
        class="panel panel-default panel-body"
        gmf-layertree-map="::ctrl.map">
    </gmf-layertree>

    <gmf-authentication
        class="panel panel-default panel-body">
    </gmf-authentication>

    <div
        ng-show="ctrl.gmfUser.username"
        class="panel panel-default panel-body">

    <input type="checkbox"
       id="checkbox-editfeatureselector"
       ng-model="ctrl.editFeatureSelectorActive" />
    <label for="checkbox-editfeatureselector"> EditFeatureSelector</label>

    <input type="checkbox"
       id="checkbox-dummy"
       ng-model="ctrl.dummyActive" />
    <label for="checkbox-dummy"> Dummy tool</label>

    <gmf-editfeatureselector
        ng-show="ctrl.editFeatureSelectorActive === true"
        gmf-editfeatureselector-active="ctrl.editFeatureSelectorActive"
        gmf-editfeatureselector-map="::ctrl.map"
        gmf-editfeatureselector-vector="::ctrl.vectorLayer">
    </gmf-editfeatureselector>

    </div>

    <script src="../../lib/jquery.min.js"></script>
    <script src="../../lib/jquery-ui.min.js"></script>
    <script src="../../lib/angular.min.js"></script>
    <script src="../../lib/angular-animate.min.js"></script>
    <script src="../../lib/angular-sanitize.min.js"></script>
    <script src="../../lib/angular-touch.min.js"></script>
    <script src="../../lib/bootstrap.min.js"></script>
    <script src="../../lib/angular-gettext.min.js"></script>
    <script src="../../lib/proj4.js"></script>
    <script src="../../lib/date.min.js"></script>
    <script src="../../lib/angular-floatThead.js"></script>
    <script src="../../lib/jquery.floatThead.min.js"></script>
    <script src="../../lib/slider.min.js"></script>
    <script src="../../lib/tmhDynamicLocale.min.js"></script>
    <script src="../../lib/transpile.js"></script>
    <script src="editfeatureselector.js"></script>
    <script src="../../lib/watchwatchers.js"></script>
    <script>
      var gmfModule = angular.module('gmf');
      gmfModule.constant('defaultTheme', 'Edit');
      gmfModule.constant('angularLocaleScript', '../build/angular-locale_{{locale}}.js');
    </script>
  </body>
</html>
