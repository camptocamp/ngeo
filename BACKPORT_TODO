Backport of #9644 to master

Error on cherry-picking: 22303721882c5e40049bc03da97cb3b5fe88e98a, 3b066af5b8c9a5f751c2a1478aebf869bee8cc6d

To continue do:
```bash
git fetch && \
  git checkout ghci/backport/9644-to-master && \
  git reset --hard HEAD^ && \
  git cherry-pick 22303721882c5e40049bc03da97cb3b5fe88e98a 3b066af5b8c9a5f751c2a1478aebf869bee8cc6d
git push origin ghci/backport/9644-to-master --force
```