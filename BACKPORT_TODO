Backport of #9736 to master

Error on cherry-picking: 909ba9b88ccfd5756cae5fb6d3db0fdafd3b56a9, 0bb51f51937e0af214e7abeabd6319904a1174fa

To continue do:
```bash
git fetch && \
  git checkout ghci/backport/9736-to-master && \
  git reset --hard HEAD^ && \
  git cherry-pick 909ba9b88ccfd5756cae5fb6d3db0fdafd3b56a9 0bb51f51937e0af214e7abeabd6319904a1174fa
git push origin ghci/backport/9736-to-master --force
```