Backport of #9643 to master

Error on cherry-picking: f2c0165649298c7462f7618ab6ce3150cbcffc89, a0eb438b046667dbc08f59a45e76b61818a620b8

To continue do:
```bash
git fetch && \
  git checkout ghci/backport/9643-to-master && \
  git reset --hard HEAD^ && \
  git cherry-pick f2c0165649298c7462f7618ab6ce3150cbcffc89 a0eb438b046667dbc08f59a45e76b61818a620b8
git push origin ghci/backport/9643-to-master --force
```